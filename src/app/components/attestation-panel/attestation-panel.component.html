

<div class="card">
    <div class="card-header" id="attestationHeading">
        <h5 class="mb-0">
            <a class="btn btn-link w-100 d-flex align-self-center collapsed " data-toggle="collapse"
                data-target="#attestationCollapse" aria-expanded="true" aria-controls="attestationCollapse">
                Attestation Panel<i class="fa ml-auto"></i>
            </a>
        </h5>
    </div>
    <div id="attestationCollapse" class="collapse" aria-labelledby="attestationHeading" #accordion>
        <div class="card-body">
            <div *ngIf="formData != null">
               
                <div class="card mb-4 pt-4" *ngFor="let item of formData; let i = index">
                    
                    <a class="attestationCollapse" data-toggle="collapse" [attr.data-target]="'#attestation_collapse-'+i"
                        aria-expanded="true" [attr.aria-controls]="'#attestation_collapse-'+i" ><span class="text-id pointer"> <!-- (click)="getForm(item?.value, i)" --><b
                                class="badge badge-primary">{{fileId == undefined ? item?.attributes.fileId : fileId}} - {{item?.attributes.label != undefined ? item?.attributes.label : ''}}</b></span></a>
                   
                    <a  (click)="loadFormData(item?.id, item?.value, fileId == null ? item?.attributes.fileId : fileId); " class="pointer"><span container="body" placement="top" ngbTooltip="Open in new panel" class="external-icon"><i class="fa fa-external-link-alt"></i></span></a>
                    <a (click)="cancelAttestation(i, item?.id, item?.attributes.node_id)" class="pointer"><span class="trash-icon"><i class="fa fa-trash"></i></span></a>
                    

                    <div [id]="'attestation_collapse-'+i" class="collapse" >
                        <div class="card-body" style="max-height: 20rem;  overflow: auto;  ">
                            <!-- <div class="form-group row ml-2 mr-2 mb-0">
                                <label for="inputLabel" class="col-lg-4 pl-0 pr-0 col-form-label">URI:</label>
                                <div class="input-group col-lg-8 pl-0 pr-0">
                                    <span class="font-italic overflow-auto p-1">{{item?.value}}</span>
                                </div>
                            </div> -->
                            
                            
                            <div class="form-group row ml-2 mr-2 mb-0" *ngFor="let subprop of item?.attributes | keyvalue">
                                <label for="inputLabel" class="col-lg-4 pl-0 pr-0 col-form-label" *ngIf="subprop?.key != 'bibliography' && subprop?.key != 'validity' && subprop?.key != 'node_id' && subprop?.key != 'lexicalEntry' && subprop?.key != 'fileId' && subprop?.key != 'form_id' && subprop?.key != 'creator' && subprop?.key != 'timestamp' && subprop?.key != 'label' && subprop?.key != 'confidence'">{{subprop?.key}}:</label>
                                <label for="inputLabel" class="col-lg-4 pl-0 pr-0 col-form-label" *ngIf="subprop?.key == 'label'">form:</label>
                                <label for="inputLabel" class="col-lg-4 pl-0 pr-0 col-form-label" *ngIf="subprop?.key == 'confidence'">uncertain:</label>

                                
                                <div class="input-group col-lg-8 pl-0 pr-0">
                                    <span class="font-italic overflow-auto p-1" *ngIf="subprop?.key == 'label'">{{subprop?.value}}</span>
                                    <span class="font-italic overflow-auto p-1" *ngIf="subprop?.key == 'leiden' && !item.empty_file">{{subprop?.value}}</span>
                                    <input #sub_property *ngIf="subprop?.key != 'creator' && 
                                                  subprop?.key != 'label' && 
                                                  subprop?.key != 'note' &&
                                                  subprop?.key != 'timestamp' &&
                                                  subprop?.key != 'node_id' &&
                                                  subprop?.key != 'form_id' &&
                                                  subprop?.key != 'confidence' &&
                                                  subprop?.key != 'bibliography'  &&
                                                  subprop?.key != 'validity' &&
                                                  subprop?.key != 'leiden' &&
                                                  subprop?.key != 'lexicalEntry' &&
                                                  subprop?.key != 'fileId'" 
                                                  (keyup)="triggerUpdateAttestation($event, sub_property.value, subprop?.key, item)" id="attributes" name="attributes" type="text" class="form-control" placeholder="No info" [value]="subprop?.value">
                                    <input #confidence (change)="triggerUpdateAttestation($event, confidence.value, subprop?.key, item)" type="checkbox" *ngIf="subprop?.key == 'confidence'" [checked]="subprop?.value == 0" >
                                    <input #leiden (keyup)="triggerUpdateAttestation($event, leiden.value, subprop?.key, item)" type="text" *ngIf="item.empty_file && subprop?.key == 'leiden'" class="form-control" placeholder="No info" [value]="subprop?.value">
<!--                                     <input #confidence *ngIf="subprop?.key == 'confidence'" (keyup)="triggerUpdateAttestation($event, confidence.value, subprop?.key, item)" (change)="triggerUpdateAttestation($event, confidence.value, subprop?.key, item)" id="attributes" name="attributes" type="number" min="0" max="1" step="0.1" class="form-control" placeholder="No info" [value]="subprop?.value">
 -->                                    <!-- <span class="font-italic overflow-auto p-1" *ngIf="subprop?.key == 'timestamp'">{{subprop?.value | date: 'dd/MM/yyyy HH:mm:ss'}}</span> -->
                                    <textarea #text_area (keyup)="triggerUpdateAttestation($event, text_area.value, subprop?.key, item)" *ngIf="subprop?.key == 'note'" id="attributes" name="attributes" type="text" class="form-control" placeholder="No info" style="resize: none;">{{subprop?.value}}</textarea>
                                </div>
                            </div>
                            <div class="form-group row ml-2 mr-2 mb-0">
                                <label for="inputLabel" class="col-lg-4 pl-0 pr-0 col-form-label">bibliography:</label>
                                <div class="input-group col-lg-8 pl-0 pr-0 justify-content-between">
                                    <span class="font-italic overflow-auto p-1" *ngIf="item?.attributes.bibliography.length == 0">
                                        No bibliography
                                    </span>
                                    <span class="font-italic overflow-auto p-1" *ngIf="item?.attributes.bibliography.length != 0">
                                        {{item?.attributes?.bibliography.length}} item(s)
                                    </span>
                                    <button (click)="showBiblioModal(item)" title="Add new bibliography item" class="btn btn-success rounded-circle" style="
                                    width: 20px;
                                    height: 20px;
                                    padding: 0%;
                                    border-radius: 15px !important;">
                                        <i class="fas fa-plus"></i>
                                    </button>
                                </div>
                                
                                
                            </div>
                            <div *ngIf="item?.attributes.bibliography.length > 0">
                                <div class="form-group row ml-2 mt-3 mb-1  mr-2" *ngFor="let item_biblio of item?.attributes.bibliography; let j = index">
                                    <div class="input-group col-xl-12 p-0">
                                        <!-- {{item_biblio.creators | json}} -->
                                        <div id="accordion">
                                            <div class="card">
                                                <a class="biblioCollapse" data-toggle="collapse" [attr.data-target]="'#attestation_biblio_collapse-'+item?.id+'-'+j" aria-expanded="true" [attr.aria-controls]="'#attestation_biblio_collapse-'+item?.id+'-'+j">
                                                    
                                                    <span class="text-id pointer" style="z-index: 0;">
                                                        <span  *ngFor="let auth of item_biblio.creators">
                                                            <b *ngIf="auth.creatorType == 'author'">{{auth.lastName}} {{auth.firstName}} </b>
                                                        </span>
                                                        <b>- ({{item_biblio.title != undefined ? (item_biblio.title | slice:0:10) +'...' : ''}})</b>
                                                    </span>
                                                    <!-- <span class="text-id pointer">
                                                        
                                                    </span> -->
                                                </a>
                                                <span *ngIf="item_biblio != undefined" class="icons-container">
                                                    <!-- {{bibliographyData[i]['url'] | json}} -->
                                                    <!-- <span><a target="_blank" class="pointer text-primary" (click)="synchronizeBibliography(biblio.get('id').value)"><span class="synchro-icon"><i class="fas fa-sync-alt" *ngIf="!loadingSynchro"></i> <i class="fas fa-sync fa-spin" *ngIf="loadingSynchro"></i></span></a></span> -->
                                                    <span ><a  href="https://www.zotero.org/groups/2552746/prin_italia_antica/items/{{item_biblio.key}}/library" target="_blank" class="pointer text-primary"><span class="external-icon"><i class="fas fa-external-link-alt"></i></span></a></span>
                                                    <span><a *ngIf="item_biblio.url != ''" [href]="item_biblio.url" target="_blank" class="pointer text-primary"><span class="download-icon"><i class="fas fa-download"></i></span></a></span>
                                                </span>
                                                
                                                <a class="pointer" (click)="removeItem(item, j)"><span class="trash-icon"><i class="fa fa-trash text-danger"></i></span></a> 
                                                
                                                <div [id]="'attestation_biblio_collapse-'+item?.id+'-'+j" class="collapse" > <!-- data-parent="#accordion" -->
                                                    <div class="card-body mt-2">
                                                        <div class="form-group row ml-2 mr-2 mb-0">
                                                            <label for="inputLabel" class="col-lg-4 px-0 col-form-label">Title:</label>
                                                            <div class="input-group col-lg-8 pl-0">
                                                                <input id="title"  name="title" type="text" class="form-control" placeholder="" disabled [value]="item_biblio?.title">
                                                            </div>
                                                        </div>           
                                                        <div class="form-group row ml-2 mr-2 mb-0">
                                                            <label for="inputLabel" class="col-lg-4 px-0 col-form-label">Author:</label>
                                                            <div class="input-group col-lg-8 pl-0  ">
                                                                <span *ngFor="let auth of item_biblio.creators" class="pb-1">
                                                                    <input id="author"   name="author" type="text" class="form-control" placeholder="" disabled [value]="auth.firstName + ' ' + auth.lastName">
                                                                </span>
                                                                
                                                            </div>
                                                        </div>   
                                                        <div class="form-group row ml-2 mr-2 mb-0">
                                                            <label for="inputLabel" class="col-lg-4 px-0 col-form-label">Date:</label>
                                                            <div class="input-group col-lg-8 pl-0">
                                                                <input id="date"   name="date" type="text" class="form-control" placeholder="" disabled [value]="item_biblio.date">
                                                            </div>
                                                        </div>
                                                        <div class="form-group row ml-2 mr-2">
                                                            <label for="inputLabel" class="col-lg-4 px-0 col-form-label">Note:</label>
                                                            <div class="input-group col-lg-8 pl-0">
                                                                <textarea #note_item_biblio_anno (keyup)="debounceKeyup(note_item_biblio_anno.value, item, j, 'note')"  name="note" class="form-control" style="resize: none;" [value]="item_biblio.note"></textarea>
                                                            </div>
                                                        </div>  
                                                        <div class="form-group row ml-2 mr-2">
                                                            <label for="inputLabel" class="col-lg-4 px-0 col-form-label">TextualRef:</label>
                                                            <div class="input-group col-lg-8 pl-0">
                                                                <textarea #txtref_item_biblio_anno (keyup)="debounceKeyup(txtref_item_biblio_anno.value, item, j, 'textualRef')"  name="textualReference" class="form-control" style="resize: none;" [value]="item_biblio.textualRef"></textarea>
                                                            </div>
                                                        </div>     
                                                    </div>
                                                </div>                                            
                                            </div>
                                        </div>
                                        
                                        
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>


                    
                </div>
            </div>
           
        </div>
    </div>

</div>




<!-- ################ BIBLIO MODAL ################# -->
                    
<app-modal #addBibliographyAttestation class="biblio_modal" [backdrop]="false" [inViewport]="true" (closeModal)="onCloseModal()">

    <ng-container class="app-modal-header">
        <img src="../../../../../../assets/images/zotero_logo.png">
        <span class="ml-2 biblio-header-title">Library: PRIN Italia Antica</span>
    </ng-container>
    
    <ng-container class="app-modal-body">
        <!-- SEARCH BAR -->
        <div class="w-25 pt-1 pb-1">
            <div class="input-group mb-3" *ngIf="{switch : false}; let variable">
                <div class="input-group-prepend">
                    <button class="btn btn-outline-secondary dropdown-toggle" type="button" data-toggle="dropdown"
                        aria-haspopup="true" aria-expanded="false"><i class="fa fa-search"></i></button>
                    <div class="dropdown-menu">
                        <a [class.disable_click_fire]="!variable.switch" class="dropdown-item" style="cursor: pointer;"
                            (click)="variable.switch = false; searchBibliography(searchBiblio.value, variable.switch);">Normal</a>
                        <a [class.disable_click_fire]="variable.switch" class="dropdown-item" style="cursor: pointer;"
                            (click)="variable.switch = true; searchBibliography(searchBiblio.value, variable.switch);">Full
                            Text</a>
                    </div>
                </div>
                <input #searchBiblio (keyup)="triggerSearch($event, searchBiblio.value, variable.switch)" type="text"
                    class="form-control" aria-label="Text input with dropdown button"
                    [placeholder]="variable.switch ?'Title, creator, year + Full Text' : 'Title, creator, year'"
                    style="font-size: 12px;">
            </div>

        </div>
        <!-- {{'start: '+start + ' sortField: '+ sortField + ' direction: '+ direction + ' queryTitle: '+ queryTitle + ' queryMode: '+ queryMode}} -->

        <!-- SKELETON CONTAINER -->
        <div class="container-fluid">
            <div class="row">
                <div class="col-md-8 pl-0">


                    <!-- TABLE -->
                    <div class="table-responsive table-body">
                        <div id="biblioModalAnnotation" class="modal fade" role="dialog">
                            <div class="modal-dialog">

                                <!-- Modal content-->
                                <div class="modal-content">
                                    <div class="modal-body">
                                        <div class="d-flex justify-content-center">
                                            <div class="spinner-border" role="status">
                                                <span class="sr-only">Loading...</span>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                            </div>
                        </div>
                        
                        <table class="table table-striped table-hover" [hidden]="bibliography.length == 0">
                            <thead>
                                <tr>
                                    <th scope="col" style="width: 50%; cursor: pointer;" (click)="sortBibliography($event, 'title')">
                                        <span>Title</span>
                                        <span class="float-right">
                                            <i class="fas fa-sort-up" *ngIf="direction == 'asc' && sortField == 'title'"></i>
                                            <i class="fas fa-sort-down" *ngIf="direction == 'desc' && sortField == 'title'"></i>
                                        </span>
                                    </th>
                                    <th scope="col" style="width: 30%; cursor: pointer;" (click)="sortBibliography($event, 'creator')">
                                        <span>Creator</span>
                                        <span class="float-right">
                                            <i class="fas fa-sort-up" *ngIf="direction == 'asc' && sortField == 'creator'"></i>
                                            <i class="fas fa-sort-down" *ngIf="direction == 'desc' && sortField == 'creator'"></i>
                                        </span>
                                    </th>
                                    <th scope="col" style="width: 20%; cursor: pointer;" (click)="sortBibliography($event, 'date')">
                                        <span>Date</span>
                                        <span class="float-right">
                                            <i class="fas fa-sort-up" *ngIf="direction == 'asc' && sortField == 'date'"></i>
                                            <i class="fas fa-sort-down" *ngIf="direction == 'desc' && sortField == 'date'"></i>
                                        </span>
                                    </th>
                                </tr>
                            </thead>
                            <tbody #table_body infiniteScroll [infiniteScrollDistance]="0.4"
                                [infiniteScrollThrottle]="150" [scrollWindow]="false" (scrolled)="onScrollDown()">


                                <tr *ngFor="let item of bibliography" (click)="selectItem($event, item)"
                                    [ngClass]="item?.selected ? 'selected' : ''" style="cursor: pointer;">
                                    <td style="width: 50%">
                                        <span *ngIf="item.data.itemType == 'book'" class="pl-1 pr-1">
                                            <i class="fas fa-book"></i>
                                        </span>
                                        <span *ngIf="item.data.itemType == 'bookSection'" class="pl-1 pr-1">
                                            <i class="fas fa-book-open"></i>
                                        </span>
                                        <span *ngIf="item.data.itemType == 'journalArticle'" class="pl-1 pr-1">
                                            <i class="far fa-newspaper"></i>
                                        </span>
                                        <span *ngIf="item.data.itemType == 'note'" class="pl-1 pr-1">
                                            <i class="far fa-clipboard"></i>
                                        </span>
                                        <span *ngIf="item.data.itemType == 'attachment'" class="pl-1 pr-1">
                                            <i class="fas fa-paperclip"></i>
                                        </span>
                                        <span *ngIf="item.data.itemType == 'conferencePaper'" class="pl-1 pr-1">
                                            <i class="fas fa-chalkboard-teacher"></i>
                                        </span>
                                        <span
                                            *ngIf="item.data.title != undefined && item.data.title != ''">{{item.data.title |titlecase}}</span>
                                        <span *ngIf="item.data.title == undefined || item.data.title == ''"
                                            class="font-italic">No title</span>
                                    </td>
                                    <td style="width: 30%">
                                        <span *ngIf="item.data.creators != undefined">
                                            <span *ngFor="let author of item.data.creators; let i = index">
                                                <span *ngIf="author.creatorType == 'author'">
                                                    {{author.lastName | titlecase}} {{author.firstName | titlecase}} 
                                                </span>
                                            </span>
                                            <span *ngIf="!checkIfCreatorExist(item.data.creators)"
                                                class="font-italic">No data</span>
                                        </span>
                                        <span *ngIf="item.data.creators == undefined" class="font-italic">No data</span>
                                    </td>
                                    <td style="width: 20%">
                                        <span *ngIf="item.data.date != undefined && item.data.date != ''">
                                            {{item.data.date | titlecase}}
                                        </span>
                                        <span *ngIf="item.data.date == undefined || item.data.date == ''"
                                            class="font-italic">
                                            No info
                                        </span>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                        <p class="font-italic text-muted no-results" *ngIf="bibliography.length == 0">No results</p>
                    </div>


                </div>
                <div class="col-md-4" style="font-size: 14px;">
                    <div class="row">
                        <div class="col-md-12 item-description"
                            style="height: calc(100vh - 37rem); overflow: auto; font-size: 13px;">
                            <div *ngIf="!selectedItem">
                                <div class="row">
                                    <div class="col-md-12">
                                        <p class="text-muted text-center align-middle mb-1 font-italic">
                                            No item selected
                                        </p>
                                    </div>
                                </div>
                            </div>
                            <div *ngIf="selectedItem">
                                <div class="row"
                                    *ngIf="selectedItem.data.itemType != '' && selectedItem.data.itemType != undefined">
                                    <div class="col-md-4 left" style="text-align: right;">
                                        <p class="text-muted font-weight-bold mb-1">
                                            Item type
                                        </p>
                                    </div>
                                    <div class="col-md-8 right" style="text-align: left;">
                                        <p class="font-weight-normal mb-1">
                                            {{selectedItem.data.itemType | titlecase}}
                                        </p>
                                    </div>
                                </div>
                                <div class="row"
                                    *ngIf="selectedItem.data.title != '' && selectedItem.data.title != undefined">
                                    <div class="col-md-4 left" style="text-align: right;">
                                        <p class="text-muted font-weight-bold mb-1">
                                            Title
                                        </p>
                                    </div>
                                    <div class="col-md-8 right" style="text-align: left;">
                                        <p class="font-weight-normal mb-1">
                                            {{selectedItem.data.title | titlecase}}
                                        </p>
                                    </div>
                                </div>
                                <div class="row"
                                    *ngIf="selectedItem.data.creators != undefined && selectedItem.data.creators.length > 0 && checkIfCreatorExist(selectedItem.data.creators)">
                                    <div class="col-md-4 left" style="text-align: right;">
                                        <p class="text-muted font-weight-bold mb-1">
                                            Author
                                        </p>
                                    </div>
                                    <div class="col-md-8 right" style="text-align: left;">
                                        <span *ngFor="let author of selectedItem.data.creators">
                                            <span *ngIf="author.creatorType == 'author'">
                                                <p class="font-weight-normal mb-1">
                                                    {{author.firstName | titlecase}} {{author.lastName | titlecase}}
                                                </p>
                                            </span>
                                        </span>
                                    </div>
                                </div>
                                <div class="row"
                                    *ngIf="selectedItem.data.creators != undefined && selectedItem.data.creators.length > 0">
                                    <div class="col-md-4 left" style="text-align: right;">
                                        <p class="text-muted font-weight-bold mb-1">
                                            Editor
                                        </p>
                                    </div>
                                    <div class="col-md-8 right" style="text-align: left;">
                                        <span *ngFor="let editor of selectedItem.data.creators">
                                            <span *ngIf="editor.creatorType == 'editor'">
                                                <p class="font-weight-normal mb-1">
                                                    {{editor.firstName | titlecase}} {{editor.lastName | titlecase}}
                                                </p>
                                            </span>
                                        </span>
                                    </div>
                                </div>
                                <div class="row"
                                    *ngIf="selectedItem.data.publicationTitle != '' && selectedItem.data.publicationTitle != undefined">
                                    <div class="col-md-4 left" style="text-align: right;">
                                        <p class="text-muted font-weight-bold mb-1">
                                            Publication
                                        </p>
                                    </div>
                                    <div class="col-md-8 right" style="text-align: left;">
                                        <p class="font-weight-normal mb-1">
                                            {{selectedItem.data.publicationTitle | titlecase}}
                                        </p>
                                    </div>
                                </div>
                                <div class="row"
                                    *ngIf="selectedItem.data.publisher != '' && selectedItem.data.publisher != undefined">
                                    <div class="col-md-4 left" style="text-align: right;">
                                        <p class="text-muted font-weight-bold mb-1">
                                            Publisher
                                        </p>
                                    </div>
                                    <div class="col-md-8 right" style="text-align: left;">
                                        <p class="font-weight-normal mb-1">
                                            {{selectedItem.data.publisher | titlecase}}
                                        </p>
                                    </div>
                                </div>
                                <div class="row"
                                    *ngIf="selectedItem.data.issue != '' && selectedItem.data.issue != undefined">
                                    <div class="col-md-4 left" style="text-align: right;">
                                        <p class="text-muted font-weight-bold mb-1">
                                            Issue
                                        </p>
                                    </div>
                                    <div class="col-md-8 right" style="text-align: left;">
                                        <p class="font-weight-normal mb-1">
                                            {{selectedItem.data.issue | titlecase}}
                                        </p>
                                    </div>
                                </div>
                                <div class="row"
                                    *ngIf="selectedItem.data.pages != '' && selectedItem.data.pages != undefined">
                                    <div class="col-md-4 left" style="text-align: right;">
                                        <p class="text-muted font-weight-bold mb-1">
                                            Pages
                                        </p>
                                    </div>
                                    <div class="col-md-8 right" style="text-align: left;">
                                        <p class="font-weight-normal mb-1">
                                            {{selectedItem.data.pages | titlecase }}
                                        </p>
                                    </div>
                                </div>
                                <div class="row"
                                    *ngIf="selectedItem.data.place != '' && selectedItem.data.place != undefined">
                                    <div class="col-md-4 left" style="text-align: right;">
                                        <p class="text-muted font-weight-bold mb-1">
                                            Place
                                        </p>
                                    </div>
                                    <div class="col-md-8 right" style="text-align: left;">
                                        <p class="font-weight-normal mb-1">
                                            {{selectedItem.data.place | titlecase }}
                                        </p>
                                    </div>
                                </div>
                                <div class="row"
                                    *ngIf="selectedItem.data.date != '' && selectedItem.data.pages != date">
                                    <div class="col-md-4 left" style="text-align: right;">
                                        <p class="text-muted font-weight-bold mb-1">
                                            Date
                                        </p>
                                    </div>
                                    <div class="col-md-8 right" style="text-align: left;">
                                        <p class="font-weight-normal mb-1">
                                            {{selectedItem.data.date | titlecase}}
                                        </p>
                                    </div>
                                </div>
                                <div class="row"
                                    *ngIf="selectedItem.data.journalAbbreviation != '' && selectedItem.data.journalAbbreviation != undefined">
                                    <div class="col-md-4 left" style="text-align: right;">
                                        <p class="text-muted font-weight-bold mb-1">
                                            Journal Abbr
                                        </p>
                                    </div>
                                    <div class="col-md-8 right" style="text-align: left;">
                                        <p class="font-weight-normal mb-1">
                                            {{selectedItem.data.journalAbbreviation | titlecase}}
                                        </p>
                                    </div>
                                </div>
                                <div class="row"
                                    *ngIf="selectedItem.data.DOI != '' && selectedItem.data.DOI != undefined">
                                    <div class="col-md-4 left" style="text-align: right;">
                                        <p class="text-muted font-weight-bold mb-1">
                                            <a class="text-muted" href="{{'https://doi.org/'+selectedItem.data.DOI}}"
                                                target="_blank">DOI <i class="fas fa-external-link-alt"></i></a>
                                        </p>
                                    </div>
                                    <div class="col-md-8 right" style="text-align: left;">
                                        <p class="font-weight-normal mb-1">
                                            {{selectedItem.data.DOI | titlecase}}
                                        </p>
                                    </div>
                                </div>
                                <div class="row"
                                    *ngIf="selectedItem.data.ISSN != '' && selectedItem.data.ISSN != undefined">
                                    <div class="col-md-4 left" style="text-align: right;">
                                        <p class="text-muted font-weight-bold mb-1">
                                            ISSN
                                        </p>
                                    </div>
                                    <div class="col-md-8 right" style="text-align: left;">
                                        <p class="font-weight-normal mb-1">
                                            {{selectedItem.data.ISSN | titlecase}}
                                        </p>
                                    </div>
                                </div>
                                <div class="row"
                                    *ngIf="selectedItem.data.url != '' && selectedItem.data.url != undefined">
                                    <div class="col-md-4 left" style="text-align: right;">
                                        <p class="text-muted font-weight-bold mb-1">
                                            <a class="text-muted" href="{{selectedItem.data.url}}" target="_blank">URL
                                                <i class="fas fa-external-link-alt"></i></a>
                                        </p>
                                    </div>
                                    <div class="col-md-8 right" style="text-align: left;">
                                        <p class="font-weight-normal mb-1">
                                            {{selectedItem.data.url}}
                                        </p>
                                    </div>
                                </div>
                                <div class="row"
                                    *ngIf="selectedItem.data.accessDate != '' && selectedItem.data.accessDate != undefined">
                                    <div class="col-md-4 left" style="text-align: right;">
                                        <p class="text-muted font-weight-bold mb-1">
                                            Accessed
                                        </p>
                                    </div>
                                    <div class="col-md-8 right" style="text-align: left;">
                                        <p class="font-weight-normal mb-1">
                                            {{selectedItem.data.accessDate}}
                                        </p>
                                    </div>
                                </div>
                            </div>

                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-12" style="height: calc(40vh - 10rem); overflow: auto; font-size: 13px;">
                            <div *ngIf="!selectedItem">
                                <div class="row">
                                    <div class="col-md-12">
                                        <p class="text-muted text-center align-middle mb-1 font-italic">
                                            No item selected
                                        </p>
                                    </div>
                                </div>
                            </div>
                            <div
                                *ngIf="selectedItem && (selectedItem.data.abstractNote == '' || selectedItem.data.abstractNote == undefined)">
                                <div class="row">
                                    <div class="col-md-12">
                                        <p class="text-muted text-center align-middle mb-1 font-italic">
                                            No info
                                        </p>
                                    </div>
                                </div>
                            </div>
                            <div
                                *ngIf="selectedItem && (selectedItem.data.abstractNote != '' && selectedItem.data.abstractNote != undefined)">
                                <p class="text-muted font-weight-bold">
                                    Abstract
                                </p>
                                <p class="font-weight-normal">
                                    {{selectedItem.data.abstractNote}}
                                </p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="row">
                <div class="col-md-12 d-flex justify-content-end">
                    <button class="btn btn-secondary w-25" [disabled]="!selectedItem" (click)="addBibliographyItem(selectedItem)">Save</button>
                    <!-- <button class="btn btn-secondary" (click)="addBibliography.hide()">Close</button> -->
                </div>
            </div>
        </div>
    </ng-container>

    <ng-container class="app-modal-footer">
    </ng-container>
</app-modal>

<ng-template #formPanel></ng-template>
