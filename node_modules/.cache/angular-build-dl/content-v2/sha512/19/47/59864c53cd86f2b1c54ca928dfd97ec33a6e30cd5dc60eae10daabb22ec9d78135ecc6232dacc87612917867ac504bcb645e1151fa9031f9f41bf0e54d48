{"version":3,"sources":["webpack:///src/app/components/lexicon-panel/lexicon-panel.component.ts","webpack:///src/app/components/lexicon-panel/lexicon-panel.component.html","webpack:///src/app/components/link-panel/same-as/same-as.component.ts","webpack:///src/app/components/link-panel/same-as/same-as.component.html","webpack:///src/app/components/attestation-panel/form-panel/form-panel.component.ts","webpack:///src/app/components/attestation-panel/form-panel/form-panel.component.html","webpack:///src/app/components/lexicon-panel/document-system-tree/lexical-entry-tree/lexical-entry-tree.component.ts","webpack:///src/app/components/lexicon-panel/document-system-tree/lexical-entry-tree/lexical-entry-tree.component.html","webpack:///src/app/components/lexicon-panel/text-detail/epigraphy-detail/epigraphy-tab/epigraphy-form/search-form/search-form.component.ts","webpack:///src/app/components/lexicon-panel/text-detail/epigraphy-detail/epigraphy-tab/epigraphy-form/search-form/search-form.component.html","webpack:///src/app/services/document-system/document-system.service.ts","webpack:///src/app/components/lexicon-panel/text-detail/edit-detail/synsem-tab/synsem-tab.component.ts","webpack:///src/app/components/lexicon-panel/text-detail/edit-detail/synsem-tab/synsem-tab.component.html","webpack:///src/app/components/lexicon-panel/text-detail/edit-detail/decomposition-tab/decomposition-tab.component.ts","webpack:///src/app/components/lexicon-panel/text-detail/edit-detail/decomposition-tab/decomposition-tab.component.html","webpack:///src/app/views/home-page/home-page.component.ts","webpack:///src/app/views/home-page/home-page.component.html","webpack:///src/app/services/auth/auth.service.ts","webpack:///src/environments/environment.ts","webpack:///src/app/components/lexicon-panel/document-system-tree/skos-tree/skos-tree.component.html","webpack:///src/app/components/lexicon-panel/document-system-tree/skos-tree/skos-tree.component.ts","webpack:///src/app/components/profiles-table/profiles-table.component.ts","webpack:///src/app/components/profiles-table/profiles-table.component.html","webpack:///src/app/services/annotator/annotator.service.ts","webpack:///src/app/components/lexicon-panel/text-detail/edit-detail/vartrans-tab/vartrans-tab.component.ts","webpack:///src/app/components/lexicon-panel/text-detail/edit-detail/vartrans-tab/vartrans-tab.component.html","webpack:///src/app/components/lexicon-panel/text-detail/edit-detail/core-tab/core-tab.component.ts","webpack:///src/app/components/lexicon-panel/text-detail/edit-detail/core-tab/core-tab.component.html","webpack:///src/app/components/lexicon-panel/text-detail/edit-detail/vartrans-tab/lexical-entry-vartrans-form/lexical-entry-vartrans-form.component.ts","webpack:///src/app/components/lexicon-panel/text-detail/edit-detail/vartrans-tab/lexical-entry-vartrans-form/lexical-entry-vartrans-form.component.html","webpack:///src/app/components/lexicon-panel/document-system-tree/language-manager/language-manager.component.ts","webpack:///src/app/components/lexicon-panel/document-system-tree/language-manager/language-manager.component.html","webpack:///src/app/services/bibliography-service/bibliography.service.ts","webpack:///src/app/components/lexicon-panel/text-detail/edit-detail/synsem-tab/lexical-entry-synsem-form/lexical-entry-synsem-form.component.ts","webpack:///src/app/components/lexicon-panel/text-detail/edit-detail/synsem-tab/lexical-entry-synsem-form/lexical-entry-synsem-form.component.html","webpack:///src/app/components/profiles-table/validator/password-match.ts","webpack:///src/app/services/concept/concept.service.ts","webpack:///src/app/views/login-page/login-page.component.ts","webpack:///src/app/views/login-page/login-page.component.html","webpack:///src/app/app.component.ts","webpack:///src/app/app.component.html","webpack:///src/app/components/lexicon-panel/text-detail/edit-detail/etymology-tab/etymology-form/etymology-form.component.ts","webpack:///src/app/components/lexicon-panel/text-detail/edit-detail/etymology-tab/etymology-form/etymology-form.component.html","webpack:///src/app/views/lexicon-page/lexicon-page.component.ts","webpack:///src/app/views/lexicon-page/lexicon-page.component.html","webpack:///src/app/components/lexicon-panel/document-system-tree/lexical-entry-tree/interfaces/lexical-entry-interface.ts","webpack:///src/app/components/lexicon-panel/document-system-tree/text-tree/text-tree.component.ts","webpack:///src/app/components/lexicon-panel/document-system-tree/text-tree/text-tree.component.html","webpack:///src/app/components/lexicon-panel/text-detail/edit-detail/decomposition-tab/lexical-entry-decomp-form/lexical-entry-decomp-form.component.ts","webpack:///src/app/components/lexicon-panel/text-detail/edit-detail/decomposition-tab/lexical-entry-decomp-form/lexical-entry-decomp-form.component.html","webpack:///src/app/components/lexicon-panel/text-detail/edit-detail/dictionary-tab/dictionary-tab.component.ts","webpack:///src/app/components/lexicon-panel/text-detail/edit-detail/dictionary-tab/dictionary-tab.component.html","webpack:///src/app/app.module.ts","webpack:///src/app/components/metadata-panel/metadata-panel.component.ts","webpack:///src/app/components/metadata-panel/metadata-panel.component.html","webpack:///src/app/components/lexicon-panel/text-detail/edit-detail/edit-detail.component.ts","webpack:///src/app/components/lexicon-panel/text-detail/edit-detail/edit-detail.component.html","webpack:///src/app/services/expander/expander.service.ts","webpack:///src/app/components/lexicon-panel/text-detail/epigraphy-detail/epigraphy-tab/epigraphy-form/epigraphy-form.component.ts","webpack:///src/app/components/lexicon-panel/text-detail/epigraphy-detail/epigraphy-tab/epigraphy-form/epigraphy-form.component.html","webpack:///src/app/components/lexicon-panel/text-detail/edit-detail/core-tab/concept-set-core-form/concept-set-core-form.component.ts","webpack:///src/app/components/lexicon-panel/text-detail/edit-detail/core-tab/concept-set-core-form/concept-set-core-form.component.html","webpack:///src/app/components/lexicon-panel/text-detail/epigraphy-detail/epigraphy-detail.component.ts","webpack:///src/app/components/lexicon-panel/text-detail/epigraphy-detail/epigraphy-detail.component.html","webpack:///src/app/components/lexicon-panel/document-system-tree/document-system-tree.component.ts","webpack:///src/app/components/lexicon-panel/document-system-tree/document-system-tree.component.html","webpack:///src/app/components/bibliography-panel/bibliography-panel.component.ts","webpack:///src/app/components/bibliography-panel/bibliography-panel.component.html","webpack:///src/app/services/initializer/app-init.ts","webpack:///src/app/components/note-panel/note-panel.component.ts","webpack:///src/app/components/note-panel/note-panel.component.html","webpack:///src/app/services/lexical-entries/lexical-entries.service.ts","webpack:///src/app/views/unauthorized-page/unauthorized-page/unauthorized-page.component.ts","webpack:///src/app/views/unauthorized-page/unauthorized-page/unauthorized-page.component.html","webpack:///src/app/components/navbar/navbar.component.ts","webpack:///src/app/components/navbar/navbar.component.html","webpack:///src/app/components/lexicon-panel/text-detail/edit-detail/etymology-tab/etymology-tab.component.ts","webpack:///src/app/components/lexicon-panel/text-detail/edit-detail/etymology-tab/etymology-tab.component.html","webpack:///src/app/components/lexicon-panel/text-detail/text-detail.component.ts","webpack:///src/app/components/lexicon-panel/text-detail/text-detail.component.html","webpack:///src/app/services/guard/auth.guard.ts","webpack:///src/app/components/lexicon-panel/text-detail/epigraphy-detail/epigraphy-tab/epigraphy-tab.component.ts","webpack:///src/app/components/lexicon-panel/text-detail/epigraphy-detail/epigraphy-tab/epigraphy-tab.component.html","webpack:///src/app/views/page-not-found/page-not-found.component.ts","webpack:///src/app/views/page-not-found/page-not-found.component.html","webpack:///src/app/components/link-panel/see-also/see-also.component.ts","webpack:///src/app/components/link-panel/see-also/see-also.component.html","webpack:///src/app/views/profile-page/profile-page.component.ts","webpack:///src/app/views/profile-page/profile-page.component.html","webpack:///src/app/components/lexicon-panel/text-detail/edit-detail/core-tab/lexical-concept-form/lexical-concept-form.component.ts","webpack:///src/app/components/lexicon-panel/text-detail/edit-detail/core-tab/lexical-concept-form/lexical-concept-form.component.html","webpack:///src/app/components/lexicon-panel/text-detail/edit-detail/core-tab/sense-core-form/sense-core-form.component.ts","webpack:///src/app/components/lexicon-panel/text-detail/edit-detail/core-tab/sense-core-form/sense-core-form.component.html","webpack:///src/app/components/lexicon-panel/text-detail/edit-detail/vartrans-tab/sense-vartrans-form/sense-vartrans-form.component.ts","webpack:///src/app/components/lexicon-panel/text-detail/edit-detail/vartrans-tab/sense-vartrans-form/sense-vartrans-form.component.html","webpack:///src/app/components/attestation-panel/attestation-panel.component.ts","webpack:///src/app/components/attestation-panel/attestation-panel.component.html","webpack:///src/app/views/search-page/search-page.component.ts","webpack:///src/app/views/search-page/search-page.component.html","webpack:///src/app/app-routing.module.ts","webpack:///src/app/services/lila/lila.service.ts","webpack:///src/app/components/lexicon-panel/text-detail/edit-detail/core-tab/form-core-form/form-core-form.component.ts","webpack:///src/app/components/lexicon-panel/text-detail/edit-detail/core-tab/form-core-form/form-core-form.component.html","webpack:///src/app/components/data-search-form/data-search-form.component.ts","webpack:///src/app/components/data-search-form/data-search-form.component.html","webpack:///src/app/components/lexicon-panel/text-detail/edit-detail/core-tab/lexical-entry-core-form/cognate-panel/cognate-panel.component.ts","webpack:///src/app/components/lexicon-panel/text-detail/edit-detail/core-tab/lexical-entry-core-form/cognate-panel/cognate-panel.component.html","webpack:///src/app/components/lexicon-panel/text-detail/edit-detail/core-tab/lexical-entry-core-form/lexical-entry-core-form.component.ts","webpack:///src/app/components/lexicon-panel/text-detail/edit-detail/core-tab/lexical-entry-core-form/lexical-entry-core-form.component.html","webpack:///src/main.ts","webpack:///$_lazy_route_resource lazy namespace object","webpack:///src/app/components/link-panel/link-panel.component.ts","webpack:///src/app/components/link-panel/link-panel.component.html"],"names":["LexiconPanelComponent","selector","templateUrl","styleUrls","SameAsComponent","formBuilder","lexicalService","toastr","lilaService","subject","subject_input","searchResults","filterLoading","destroy$","memorySameAs","disableAddSameAs","sameAsForm","sameAsArray","createSameAsEntry","isEtymon","isCognate","group","array","pipe","subscribe","data","onSearchFilter","sameas_subscription","triggerSameAs$","console","log","undefined","object","type","find","element","get","setValue","emitEvent","error","onChangeSameAsByInput","triggerTooltip","changes","setTimeout","sameAsData","currentValue","clear","forEach","addSameAsEntry","entity","linkType","push","lexicalEntry","isLexEntry","isForm","isSense","isLexicalConcept","form","sense","lexicalConcept","value","index","trim","selectedValues","lexicalElementId","parameters","etymology","relation","oldValue","updateGenericRelation","toPromise","status","success","timeOut","at","sameAs","selectedItems","length","isLila","text","searchMode","pos","formType","author","lang","offset","limit","getLexicalEntriesList","lex_entry_list","representationType","getFormList","forms_list","getSensesList","senses_list","queryEtymon","etymon_list","list","map","etym","label","language","queryCognate","cognates_list","labelValue","tmpLblVal","split","tmpLblPos","labelElement","labelPos","evt","i","target","next","$","tooltip","trigger","e","inferred","lila","lexical_entity","deleteLinguisticRelation","delete_request","splice","removeAt","unsubscribe","complete","sameAsList","FormPanelComponent","annotatorService","subscription","formPanelModal","show","idForm","closePanelForm","getAllPanelForms","onCloseModal","$event","actionMapping","mouse","dblClick","tree","node","hasChildren","TOGGLE_EXPANDED","click","TOGGLE_ACTIVE","contextMenu","LexicalEntryTreeComponent","expander","renderer","modalShow","flagAuthor","searchIconSpinner","titlePopover","popoverWildcards","labelView","idView","counter","startsWith","options","useVirtualScroll","scrollOnActivate","nodeHeight","getChildren","bind","filterForm","initialValues","copySubject","onEvent","eventName","selectedNodeId","idLexicalEntry","getLexEntryData","sendToCoreTab","sendToRightTab","sendToEtymologyTab","updateCoreCard","lastUpdate","creationDate","isEditTabOpen","isEpigraphyTabOpen","isEditTabExpanded","isEpigraphyTabExpanded","expandCollapseEdit","openCollapseEdit","expandCollapseEpigraphy","modal","appendTo","backdrop","keyboard","removeClass","css","note","triggerNotePanel","formId","getFormData","parent","senseId","getSenseData","etymologyId","getEtymologyData","component","componentInstanceName","compId","parentInstanceLabel","parentInstanceName","parentNodeInstanceName","onKey","that","results","document","body","querySelectorAll","children","refreshTooltip","setInterval","val","viewPort","nativeElement","querySelector","addClass","onChanges","delete_req_subscription","deleteReq$","signal","lexEntryDeleteReq","add_sub_subscription","addSubReq$","addSubElement","copy_subject_subscription","v","selBox","createElement","style","position","left","top","opacity","appendChild","focus","select","execCommand","removeChild","info","refresh_filter_subscription","refreshFilter$","get_lex_entry_list_subscription","get_languages_subscription","getLanguages","languages","get_types_subscription","getTypes","types","get_authors_subscription","getAuthors","authors","get_pos_subscription","getPos","partOfSpeech","get_status_subscription","getStatus","nodes","valueChanges","searchParams","lexicalEntriesFilter","instanceName","lex","request","lexicalEntryTree","treeModel","getNodeBy","x","isExpanded","expand","interval","y","creator","setActiveAndVisible","clearInterval","checkExistence","filter","parentNodeLabel","count","update","sort","a","b","textA","toUpperCase","textB","reator","indexOf","countSubterm","countForm","countSense","subtermInstanceName","Array","from","newPar","viewPort_prova","scrollTop","updateTreeView","popover","html","title","content","reset","sizeChanged","get_entry_list","remove","instance","getLexEntryElements","obj","newNodes","c","Object","assign","keys","getLexEntryForms","form_data","sense_data","getEtymologies","etymology_data","getSubTerms","subterm_data","subterm","resetFields","onScrollDown","copyText","basicMenu","triggerShowTree","SearchFormComponent","modalService","auth","documentService","search_subject","search_lex_entries_subject","morphologyData","loader","modalStep","stepOneForm","existOrNot","required","stepTwoForm","stepThreeForm","stepFourForm","writtenForm","statusForm","lexicalEntryCreation","attachingLanguage","attachingType","attachingLabel","attachingPos","creatingForm","attachingWrittenForm","attachingFormType","finish","addNewForm","addTagFormText","selectedPopover","tokenId","spanPopovers","toArray","isOpen","close","open","addFormModal","size","windowClass","beforeDismiss","touched","confirm","markAsUntouched","markAsPristine","getLoggedUser","onSearchLexicalEntriesFilter","getLexiconLanguages","get_morphology_subscription","getMorphologyData","morphoData","propertyId","get_lex_entry_type_subscription","getLexEntryTypes","lexEntryTypesData","get_form_type_subscription","getFormTypes","typesData","triggerSearch$","bindSelection","key","form_list","lex_list","lex_searchResuts","select_form","handleClearClick","search_lexicalEntry","req","ngSelect","onChangeForm","idPopover","tokenData","element_id","epiData","textSelection","message","selectionSpan","spanSelection","formValue","xmlNode","xmlDoc","xmlid","outerHTML","xmlString","leidenToken","testConvertItAnt","convert_to_leiden","raw","bodyResponse","DOMParser","parseFromString","childNodes","nodeName","nodeValue","replace","confidence","timestamp","Date","getTime","toString","bibliography","validity","externalRef","leiden","node_id","id","start","end","isArray","isEmptyFile","begin","identifier","addAnnotation","add_annotation_request","annotationArray","annotation","populateLocalAnnotation","attributes","positionElement","elementHTML","getElementsByClassName","clearAll","patchValue","wizardFactory","newLexicalEntry","new_lex_entry_request","lexId","updateLexicalEntry","update_lang_new_lex_request","attach_type_req","attach_label","updateLinguisticRelation","attach_pos","createNewForm","create_form","formData","writtenRep","updateForm","attach_written_rep","typeForm","attach_type_form","create_new_form","attach_type","triggerSearch","handleForm","DocumentSystemService","http","baseUrl_document","_epigraphyData","_epigraphyTextData","_epigraphyLeidenData","_epigraphyTranslationData","_metadataData","_triggerMetadataPanel","epigraphyData$","asObservable","epigraphyTextData$","epigraphyLeidenData$","epigraphyTranslationData$","metadataData$","triggerMetadataPanel$","string","bool","post","request_uuid","encodeURIComponent","nodeId","providedIn","SynsemTabComponent","rend","lock","exp_trig","isLexicalEntry","expander_edit_subscription","expEdit$","isEditExpanded","isEpigraphyExpanded","setStyle","expander_body","expander_epigraphy_subscription","expEpigraphy$","changeStatus","height","animations","DecompositionTabComponent","decomp_data_subscription","decompData$","decompData","expand_edit_subscription","expand_epigraphy_subscription","lexicalId","addSubElementRequest","createNewSense","senseInstanceName","createNewEtymology","addNewSense","addNewEtymology","HomePageComponent","AuthService","keycloakService","baseUrl","keycloak","issuer","realmId","realm","clientId","userDetails","getKeycloakInstance","idTokenParsed","isLoggedIn","loadUserProfile","login","logout","accountManagement","window","location","reload","realmAccess","roles","search","username","userId","role_name","idUser","put","headers","set","environment","production","shiftKey","TOGGLE_ACTIVE_MULTI","rename_mode","preventDefault","expanderClick","ENTER","alert","name","SkosTreeComponent","conceptService","biblioService","skosFilterForm","search_text","search_mode","skos_nodes","allowDrag","conceptSet","allowDrop","getNodeClone","getLexicalConceptData","isConceptSet","item","processRequestForm","oneOrAll","loadTree","deleteSkosReq$","skosDeleteRequest","searchFilter","node_source","node_target","to","source","updateSemanticRelation","from_node","deleteRelation","conceptSets","rootConceptSets","tmp","getRootLexicalConcepts","then","response","skosTree","labelType","conceptFilter","filter_lang","el","getLexicalConcepts","deleteLexicalConcept","nodeToRemove","deleteLexicalConceptRecursive","lexicalConceptID","deleteRequest","sendDataToBibliographyPanel","isEpigraphyOpen","force","lexicalConceptRemoverModal","centered","parentNode","createNewLexicalConcept","updateSchemeProperty","createNewConceptSet","getNodeById","onMoveNode","addLexicalConcept","skosMenu","ProfilesTableComponent","httpClient","users","isPopulated","creationRequest","itsMe","selectedRoles","filterSelectedRoles","userDetailForm","email","password","repeat_password","enabled","minLength","pattern","validator","getClientsInfo","idClient","checkIdTimer","getAllClientsRoles","role_id","getUsersByRole","searchUser","usr","searchUsers","roles_array","event","selected_idUser","button_create","classList","getUserInfo","responseUserInfo","getUserRoles","responseUserRoles","extractRoleName","populateForm","errorUserRoles","initialValue","sub","markAsTouched","valid","JSON","stringify","updateUser","initialRoles","updatedRoles","difference","includes","removeDiff","assignRolesToUser","userDetail","deleteRolesToUser","credentials","temporary","createUser","getUserByUsername","cleanActiveLinks","newUser","activeNewUserLink","deleteUser","filtered","modalRef","makeId","makeid","result","characters","charactersLength","charAt","Math","floor","random","j","l","m","temporaryId","links","user_list","contains","innerText","add","invalid","controls","createNewUser","resetForm","isNotTheSameId","AnnotatorService","_triggerSearch","_deleteAnnoRequest","_getIdText","arrayPanelFormsData","deleteAnnoReq$","getIdText$","id_annotation","VartransTabComponent","expand_epi_subscription","CoreTabComponent","isEtymology","goBack","sortField","direction","memorySort","field","queryTitle","queryMode","searchSubject","core_data_subscription","coreData$","lexicalEntryData","conceptSetData","lexicalConceptData","senseData","timer","is","revisor","lastUpdateDate","update_core_card_subscription","updateCoreCardReq$","spinner_subscription","spinnerAction$","search_subject_subscription","query","searchBibliography","biblio_bootstrap_subscription","bootstrapData","refreshAfterEdit","conceptSetId","deleteConceptSet","deleteLexicalEntry","refreshLangTable","refreshFilter","deleteForm","deleteSense","creators","creatorType","lastName","firstName","date","url","seeAlsoLink","addBibliographyData","triggerPanel","hide","statusText","some","selectedItem","tableBody","filterBibliography","selected","sortBibliography","addBibliographyItem","searchBiblio","LexicalEntryVartransFormComponent","switchInput","peopleLoading","vartransForm","translatableAs","createTranslatableAs","lexicalRelationDirect","createLexicalRelationDirect","lexicalRelationIndirect","createLexicalRelationIndirect","loadPeople","lexData","addLexicalRelationIndirect","control","insert","createSubLexicalRelationIndirect","iy","a_entity","b_entity","sub_rel","sub_relation","sub_entity","LanguageManagerComponent","languageList","editLangArray","isValid","loadingService","editLangForm","description","lexvo","maxLength","refresh_lang_table_subscription","refreshLangTable$","loadLangData","subject_subscription","onEditLanguage","inputValue","match","createNewLanguage","updateLangSelect","langId","updateLanguage","eventEmit","removeMessage","linkedLexicalEntries","filtered_lex_entries","getElementById","innerHTML","deleteLanguage","deleteLangRequest","onSubmit","BibliographyService","_addBiblioItem","_triggerPanel","addBiblioReq$","triggerPanel$","LexicalEntrySynsemFormComponent","synsemForm","frames","createFrame","frameArray","createArg","ix","createForm","iz","example","args","marker","optional","form_label","ConfirmedValidator","controlName","matchingControlName","formGroup","matchingControl","errors","confirmedValidator","setErrors","ConceptService","lexicalIRI","lexicalPrefix","_deleteConceptSetReq","_addSubElementReq","getUsername","conceptSetID","recursive","LoginPageComponent","AppComponent","EtymologyFormComponent","etyForm","etylink","createEtyLink","cognates","createCognate","subject_cognates","subject_cognates_input","subject_etylink","subject_etylink_input","etylink_note_subject","etylink_label_subject","memoryLinks","memoryConfidence","subject_cognates_subscription","subject_etylink_subscription","subject_etylink_input_subscription","onChangeEtylink","subject_cognates_input_subscription","subject_etylink_note_subscription","onChangeEtylinkNote","subject_etylink_label_subscription","onChangeEtylinkLabel","etymData","etyLinkArray","cognatesArray","hypothesisOf","etyLinks","lex_entity","etySourceLabel","etySource","ety_type","etyLinkType","ety_source","ety_target","etyTarget","external_iri","externalIRI","addEtyLink","prev","spinnerAction","etyId","newValue","updateEtymology","updatedLabel","updateLabel","updateAuthor","update_label_req","update_author_req","etymologicalLink","updateEtylink","change_etylink_note_req","change_etylink_label_req","etymId","change_etylink_type_req","etyLink","new_etymon","change_etylink_req","label_new_lexical_entry","new_lexical_entry_req","lexical_entry","lexical_entry_in","change_lex_entry_label_req","apply_etymon_type_req","change_etysource_req","change_etylink_source","Promise","resolve","le","elt","es","et","n","createNewEtylink","etyType","etyLinkId","deleteEtylink","trait","cognate","isLilaActived","search_req","query_etymon_req","etyLinkList","LexiconPageComponent","notes","link","note_panel_subscription","triggerNotePanel$","boolean","a_link","accordion","collapse_container","item_collapse","trigger_att_panel_subscription","triggerAttestationPanel$","trigger_biblio_panel_subscription","attestation_panel_subscription","attestationPanelData$","attestation","medatata_panel_subscription","metadata","trigger_metatada_panel_subscription","right_panel_subscription","rightPanelData$","searchModeEnum","typeEnum","formTypeEnum","TextTreeComponent","datePipe","validName","searchIconSpinner_input","memoryMetadata","metadataForm","metadata_array","isLeaf","transform","textFilterForm","import_date","date_mode","selectedEpidocId","getContent","xmlDom","getTokens","tokens","sendToEpigraphyTab","epidoc_id","openCollapseEpigraphy","path","sendToMetadataPanel","triggerMetadataPanel","sendLeidenToEpigraphyTab","testConvert","xml","HTML","domNodes","childNode","subChild","leidenLines","textNode","toLowerCase","translations","translationArray","child","sendTranslationToEpigraphyTab","getIdText","isFolder","treeText","activeNodes","isFile","enableMetadata","multipleSelection","isFolderMultiple","selectedFileToCopyArray","pasteElementsReq","renameNode_input","stopPropagation","node_type","target_type","moveFolder","moveFile","getDocumentSystem","target_element_id","copyFileTo","selectedFileToCopy","selected_elements","elements","data_node","removeFile","sendToAttestationPanel","isEditOpen","removeFolder","requestUUID","filename","createFile","expandedNodes","addFolder","element_id_new_node","id_new_node","new_node","uploadFile_input","file_name","files","FormData","append","uploadFile","files_array","updateFileMetadata_input","updateFileMetadata","setProperty","element_id_target","element_id_source","downloadFile","storeTempRemoveFile_data","target_id","moveFileTo","new_value","updateNodeName","exitRenamingMode","renameFolder","renameFile","updateMetadata","k","createMetadataItem","deleteMetadata","editMetadataModal","entries","addMetadata","uniqueIdValidator","duplicate","tag","metadata_tags_element","triggerUploader","createNewFile","renameNode","copyElements","pasteElements","removeElements","copyFile","pasteFile","storeTempDeleteFile","triggerFileMetadataUploader","deleteTempData","addFile","updateFileMetadataHandler","saveMetadata","onCloseRemoveMetadata","providers","clickout","LexicalEntryDecompFormComponent","subterm_subject","ext_subterm_subject","corresponds_subject","update_component_subject","subtermDisabled","memorySubterm","memoryComponent","memoryValues","decompForm","createComponent","createSubtermComponent","staticMorpho","valueTraits","disableAddTraits","loadMorphologyData","change_decomp_label_subscription","changeDecompLabel$","subterm_subject_subscription","ext_subterm_subject_subscription","onChangeSubterm","corresponds_subject_subscription","update_component_subject_subscription","get_morpho_data","decData","componentArray","subtermArray","lexicalEntryInstanceName","lexicaleEntryInstanceName","getSubterms","getConstituents","get_subterms_req","addSubterm","get_constituents_req","getCorrespondsTo","get_corresponds_to_req","corr","corresponds_to","addComponent","fieldType","update_comp_req","morphology","delete_old_param","delete_req","change_morpho_value_req","traitDescription","propertyValues","valueId","valueDescription","arrayValues","create_comp_req","componentURI","corr_to","addRelation","idComp","deleteComponent","delete_comp_req","morphologyArray","createRelation","timer1","timer2","delete_linguistic_rel_req","t","uri","onChangeCorrespondsTo","f","change_subterm_req","change_corr_req","search_filter_req","DictionaryTabComponent","AppModule","provide","useFactory","deps","multi","forRoot","useBootstrap4","declarations","imports","bootstrap","MetadataPanelComponent","metadataData","re","EditDetailComponent","exp","showTrigger","hideEtymology","hideDecomp","hideDictionary","openEdit$","text_detail","navTabLinks","navtabs","navContent","navcontent","etymology_data_subscription","etymologyData$","triggerExpansionEdit","ExpanderService","_openEdit","_openEpigraphy","_expandEpigraphy","_expandEdit","openEpigraphy$","EpigraphyFormComponent","router","config","textEpigraphy","bind_subject","memoryForms","htmlNodeName","epigraphyForm","createToken","multiWordMode","token_annotationArray","epidoc_annotation_array","leiden_array","translation_array","evtPath","isMultiwordRequest","event_el","multiWordArray","subchild","previousElementSibling","nextElementSibling","classNames","className","matchTest","test","position_popover","getAttribute","popover_id","_ngbPopoverWindowId","multiwordSpan","spansArray","span","parseInt","htmlNode","editing","parentMarkElement","textMarkElement","textContent","createText","insertBefore","altKey","ctrlKey","code","epigraphy_text_subscription","leiden_subscription","translation_subscription","delete_annotation_subscription","localArray","spans","tokenArray","getAnnotations","fileId","getAnnotation","get_anno_req","annotations","layer","tmp_arr","startElement","endElement","startAnnotation","endAnnotation","triggerAttestationPanel","token","parentElement","getSelection","empty","removeAllRanges","popoverHtml","_elementRef","multiWordCreator","prevSibling","nextSibling","previousSibling","createDynamicButtons","div","okButton","leaveButton","okIcon","leaveIcon","start_token","end_token","selection","anchorNode","focusNode","isThereMark","areThereAnnotations","anchorNodeParent","focusNodeParent","anchorOffset","focusOffset","l_text","substring","r_text","setAttribute","anno_id","token_position","deleteAnnotation","delete_anno_req","origin","startIndex","endIndex","insertion","searchForm","onMouseUp","onGlobalClick","enableMultiword","disableMultiword","ConceptSetCoreFormComponent","conceptSetForm","defaultLabel","oldTarget","targetLanguage","oldTargetLanguage","updateSkosLabel","EpigraphyDetailComponent","open_epigraphy_subscription","triggerExpansionEpigraphy","DocumentSystemTreeComponent","switcher","refresh_after_edit_subscription","refreshAfterEdit$","trigger_lex_tree_subscription","triggerLexicalEntryTree$","updateTreeParent","lexTree","lexicalEntryLabel","a_link_epigraphy","collapse_container_epigraphy","attr","scrollIntoView","seame","definition","lexEdit","changeFormLabel","changeFormType","changeSenseDefinition","newLexEntryLabel","getParameters","textTree","exportLexicon","blob","Blob","URL","createObjectURL","addNewFile","addNewFolder","switchLabel","triggerLoad","addNewLexicalConcept","conceptTree","BibliographyPanelComponent","countElement","loadingSynchro","bibliographyForm","createBibliography","memoryNote","memoryTextualRef","add_biblio_req_subscription","incomingBiblio","textualReference","bibliographyData","addBibliographyElement","biblioData","biblioArray","getBibliographyData","removeBibliographyItem","d","synchronizeBibliographyItem","initializer","reject","init","loadUserProfileAtStartUp","enableBearerInterceptor","bearerPrefix","initOptions","onLoad","checkLoginIframe","bearerExcludedUrls","NotePanelComponent","editorConfig","editable","spellcheck","minHeight","maxHeight","width","minWidth","translate","enableToolbar","showToolbar","placeholder","defaultParagraphSeparator","customClasses","uploadUrl","uploadWithCredentials","sanitize","toolbarPosition","toolbarHiddenButtons","newNote","noteData","updateSense","updateNoteProperty","keyEvent","LexicalEntriesService","_coreFormData","_attestationPanelData","_etymologyData","_rightPanelData","_deleteLexicalEntryReq","_updateCoreCardReq","_spinnerAction","_refreshLanguageTable","_refreshAfterEdit","_refreshFilter","_updateLangSelect","_triggerNotePanel","_triggerAttestationPanel","_changeDecompLabel","_decompData","_refreshLinkCounter","_triggerLexicalEntryTree","_triggerSameAs","bibliographyIRI","updateLangSelect$","refreshLinkCounter$","property","aspect","itemKey","lexInstance","etymInstance","etyLinkInstance","lexicalEntityID","responseType","cogInstanceName","lexInstanceName","UnauthorizedPageComponent","NavbarComponent","route","isAdmin","admin","userRoles","getCurrentUserRole","kc_subscriber","keycloakEvents$","OnTokenExpired","updateToken","EtymologyTabComponent","etymologyData","bootstrap_bibliography_subscription","deleteEtymology","delete_etym_req","create_etymon_req","filter_bibliography_req","create_new_form_req","create_new_sense","add_biblio_data","showBiblioModal","TextDetailComponent","AuthGuard","state","authenticated","redirectUri","requiredRoles","every","role","navigate","EpigraphyTabComponent","epigraphyData","PageNotFoundComponent","SeeAlsoComponent","memorySeeAlso","disableSeeAlso","seeAlsoForm","seeAlsoArray","createSeeAlsoEntry","search_filter_subscriber","search_by_input_subscriber","onChangeSeeAlsoByInput","seeAlsoData","addSeeAlsoEntry","seeAlso","refreshLinkCounter","getLexicalSensesList","lt","link_type","delete_see_also","conceptId","ProfilePageComponent","LexicalConceptFormComponent","lexicalConceptForm","isEvokedBy","createIsEvokedBy","lexicalizedSenses","createLexicalizedSense","disableAddIsEvokedBy","disableAddLexicalizedSense","memoryIsEvokedBy","memoryLexicalizedSenses","evokedBySubject","lexicalizedSenseSubject","searchResultsSenses","onSearchFilterLexicalizedSense","isEvokedByArray","lexicalizedSensesArray","getLexEntryLinguisticRelation","addIsEvokedBy","addLexicalizedSense","onChangeIsEvokedBy","onChangeLexicalizedSense","raw_data","SenseCoreFormComponent","subject_def","subject_ex_def","disableAddDef","definitionData","definitionMemory","staticDef","senseCore","createDefinition","usage","topic","reference","createReference","lexical_concept","sense_of","lexical_concept_subject","memoryLexicalConcept","subject_def_subscription","onChangeDefinition","subject_ex_def_subscription","onChangeExistingDefinition","lexicalConceptArray","definitionArray","pId","pVal","addDefinition","newDef","confidence_value","newTopic","propertyID","propertyValue","prefLabel","onChangeLexicalConcept","disableAddLexicalConcept","namespace","referenceArray","createLexicalConcept","SenseVartransFormComponent","senseVartransForm","translation","createTranslation","senseTranslation","createSenseTranslation","terminologicalRelation","createTerminologicalRelation","createSubTerminologicalRelation","AttestationPanelComponent","factory","update_anno_subject","update_biblio_anno_subject","arrayComponents","typeDesc","staticOtherDef","labelData","updateAnnotation","updateBiblioAnnotation","attestationData","selectedAnnotation","deleteAnnotationRequest","instanceComponent","propKey","checked","triggerLexicalEntryTree","idAnnotation","panel","getPanelForm","newPanelForm","resolveComponentFactory","componentRef","vc","triggerFormPanel","read","SearchPageComponent","routes","redirectTo","pathMatch","canActivate","AppRoutingModule","exports","LilaService","endpoint","FormCoreFormComponent","subject_label","subject_ex_label","memoryTraits","formCore","inheritance","createInheritance","createLabel","morphoTraits","createMorphoTraits","memoryLabel","ontolexRepresentations","lexinfoRepresentations","disableAddOther","disableAddMorpho","get_morpho_data_subscription","subject_label_subscription","onChangeLabel","subject_ex_label_subscription","onChangeExistingLabelValue","inheritanceArray","labelArray","inheritedMorphology","addInheritance","addLabel","addMorphoTraits","onChangeTrait","getOntolexRepresentations","getLexinfoRepresentations","searchAttestations","rows","ids","Set","tokensId","nodePath","setIds","annotation_array","requests","elem","parse","filter_anno","anno","newType","DataSearchFormComponent","warn","CognatePanelComponent","cognatePanelModal","LexicalEntryCoreFormComponent","memoryDenotes","memoryCognates","memoryEvokes","memoryStem","valuePos","memoryPos","posDescription","denotes_subject","cognates_subject","evokes_subject","urlRegex","emptyLabelFlag","emptyFlag","disableAddSubterm","isMultiword","coreForm","stemType","evokes","createEvokes","denotes","createDenotes","createCognates","disableAddCognates","disableAddDenotes","disableAddEvokes","subject_evokes_search","denotes_subject_subscription","onChangeDenotes","onChangeEvokes","cognates_subject_subscription","onChangeCognates","onSearchFilterSubterm","update_lang_subscription","onSearchLexicalConcept","evokesArray","denotesArray","disable","onlySelf","enable","labelTrait","addDenotes","addEvokes","addCognates","langLabel","langValue","posValue","changeDecompLabel","updateStem","lT","lV","lexName","instance_name","external","lexIn","triggerSameAs","cognateInstanceName","getPanelCognate","lexicalEntryId","triggerCognatePanel","bootstrapModule","err","webpackEmptyAsyncContext","Error","module","LinkPanelComponent","counterElement","refresh_subscription","eval","linkData","instanceNameType","getLexEntryGenericRelation","same_as_data","see_also_data"],"mappings":"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","file":"main-es5.js","sourcesContent":["/*\n   Copyright 2021-2022  Istituto di Linguistica Computazionale \"A. Zampolli\", Consiglio Nazionale delle Ricerche, Pisa, Italy.\n \nThis file is part of EpiLexo.\n\nEpiLexo is free software: you can redistribute it and/or modify it under the terms of the GNU General Public License as published by the Free Software Foundation, either version 3 of the License, or (at your option) any later version.\n\nEpiLexo is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for more details.\n\nYou should have received a copy of the GNU General Public License along with EpiLexo. If not, see <https://www.gnu.org/licenses/>.\n*/\n\nimport { Component, OnInit } from '@angular/core';\n\n@Component({\n  selector: 'app-lexicon-panel',\n  templateUrl: './lexicon-panel.component.html',\n  styleUrls: ['./lexicon-panel.component.scss']\n})\nexport class LexiconPanelComponent implements OnInit {\n\n  constructor() { }\n\n  ngOnInit(): void {\n  }\n\n}\n","\n\n<div class=\"container-fluid\" >\n    <div class=\"row\" >\n        <div class=\"col-md-4 p-1\" >\n            <app-document-system-tree></app-document-system-tree>\n        </div>\n        <div class=\"col-md-8 p-1\" >\n            <app-text-detail></app-text-detail>\n        </div>\n    </div>\n</div>","/*\n   Copyright 2021-2022  Istituto di Linguistica Computazionale \"A. Zampolli\", Consiglio Nazionale delle Ricerche, Pisa, Italy.\n \nThis file is part of EpiLexo.\n\nEpiLexo is free software: you can redistribute it and/or modify it under the terms of the GNU General Public License as published by the Free Software Foundation, either version 3 of the License, or (at your option) any later version.\n\nEpiLexo is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for more details.\n\nYou should have received a copy of the GNU General Public License along with EpiLexo. If not, see <https://www.gnu.org/licenses/>.\n*/\n\nimport { Component, Input, OnDestroy, OnInit, QueryList, SimpleChanges, ViewChildren } from '@angular/core';\nimport { FormArray, FormBuilder, FormControl, FormGroup } from '@angular/forms';\nimport { Subject, Subscription } from 'rxjs';\nimport { debounceTime, takeUntil } from 'rxjs/operators';\nimport { LexicalEntriesService } from 'src/app/services/lexical-entries/lexical-entries.service';\nimport { ToastrService } from 'ngx-toastr';\nimport { LilaService } from 'src/app/services/lila/lila.service';\nimport { NgSelectComponent } from '@ng-select/ng-select';\n\n@Component({\n  selector: 'app-same-as',\n  templateUrl: './same-as.component.html',\n  styleUrls: ['./same-as.component.scss']\n})\nexport class SameAsComponent implements OnInit, OnDestroy {\n\n  @Input() sameAsData: any[] | any;\n\n  private subject: Subject<any> = new Subject();\n  private subject_input: Subject<any> = new Subject();\n  subscription: Subscription;\n  object: any;\n  searchResults = [];\n  filterLoading = false;\n\n  sameas_subscription: Subscription;\n\n  destroy$ : Subject<any> = new Subject();\n\n  @ViewChildren('sameAsSelect') sameAsList: QueryList<NgSelectComponent>;\n\n\n  memorySameAs = [];\n  isSense;\n  isForm;\n  isLexEntry;\n  isLexicalConcept;\n\n  disableAddSameAs = false;\n\n  sameAsForm = new FormGroup({\n    sameAsArray: new FormArray([this.createSameAsEntry()]),\n    isEtymon: new FormControl(null),\n    isCognate: new FormControl(null)\n  })\n\n  sameAsArray: FormArray;\n\n  constructor(private formBuilder: FormBuilder,\n    private lexicalService: LexicalEntriesService,\n    private toastr: ToastrService,\n    private lilaService: LilaService) {\n  }\n\n  ngOnInit() {\n    this.sameAsForm = this.formBuilder.group({\n      sameAsArray: this.formBuilder.array([]),\n      isEtymon: false,\n      isCognate: false,\n    })\n\n    this.subject.pipe(debounceTime(1000), takeUntil(this.destroy$)).subscribe(\n      data => {\n        this.onSearchFilter(data)\n      }\n    )\n\n    this.sameas_subscription = this.lexicalService.triggerSameAs$.subscribe(\n      data => {\n        console.log(data);\n        if ((data != undefined || data != null) && this.object != undefined) {\n          this.object.type = data;\n          if (typeof (this.object.type) != \"string\") {\n            let isCognate = this.object.type.find(element => element == 'Cognate');\n            if (isCognate) {\n              this.sameAsForm.get('isCognate').setValue(true, { emitEvent: false })\n            } else {\n              this.sameAsForm.get('isCognate').setValue(false, { emitEvent: false })\n            }\n\n            let isEtymon = this.object.type.find(element => element == 'Etymon');\n            if (isEtymon) {\n              this.sameAsForm.get('isEtymon').setValue(true, { emitEvent: false })\n            } else {\n              this.sameAsForm.get('isEtymon').setValue(false, { emitEvent: false })\n            }\n          } else {\n            if (this.object.type == 'Cognate') {\n              this.sameAsForm.get('isCognate').setValue(true, { emitEvent: false })\n            } else {\n              this.sameAsForm.get('isCognate').setValue(false, { emitEvent: false })\n            }\n\n            if (this.object.type == 'Etymon') {\n              this.sameAsForm.get('isEtymon').setValue(true, { emitEvent: false })\n            } else {\n              this.sameAsForm.get('isEtymon').setValue(false, { emitEvent: false })\n            }\n          }\n        }\n      }, error => {\n        console.log(error)\n      }\n    )\n\n    this.subject_input.pipe(debounceTime(1000), takeUntil(this.destroy$)).subscribe(\n      data => {\n        this.onChangeSameAsByInput(data['value'], data['i'])\n      }\n    )\n\n    this.triggerTooltip();\n  }\n\n  ngOnChanges(changes: SimpleChanges) {\n    setTimeout(() => {\n      if (changes.sameAsData.currentValue != undefined) {\n        this.object = changes.sameAsData.currentValue;\n        this.sameAsArray = this.sameAsForm.get('sameAsArray') as FormArray;\n        this.sameAsArray.clear();\n\n        this.memorySameAs = [];\n        console.log(this.object)\n        this.disableAddSameAs = false;\n\n        this.object.array.forEach(element => {\n          this.addSameAsEntry(element.entity, element.linkType == 'external')\n          this.memorySameAs.push(element.entity);\n        });\n\n        //console.log(this.memorySameAs)\n        if (this.object.type != undefined) {\n          if (typeof (this.object.type) != \"string\") {\n            let isCognate = this.object.type.find(element => element == 'Cognate');\n            if (isCognate) {\n              this.sameAsForm.get('isCognate').setValue(true, { emitEvent: false })\n            } else {\n              this.sameAsForm.get('isCognate').setValue(false, { emitEvent: false })\n            }\n\n            let isEtymon = this.object.type.find(element => element == 'Etymon');\n            if (isEtymon) {\n              this.sameAsForm.get('isEtymon').setValue(true, { emitEvent: false })\n            } else {\n              this.sameAsForm.get('isEtymon').setValue(false, { emitEvent: false })\n            }\n          } else {\n            if (this.object.type == 'Cognate') {\n              this.sameAsForm.get('isCognate').setValue(true, { emitEvent: false })\n            } else {\n              this.sameAsForm.get('isCognate').setValue(false, { emitEvent: false })\n            }\n\n            if (this.object.type == 'Etymon') {\n              this.sameAsForm.get('isEtymon').setValue(true, { emitEvent: false })\n            } else {\n              this.sameAsForm.get('isEtymon').setValue(false, { emitEvent: false })\n            }\n          }\n\n        }\n\n\n        if (this.object.lexicalEntry != undefined) {\n          this.isLexEntry = true;\n          this.isForm = false;\n          this.isSense = false;\n          this.isLexicalConcept = false;\n        } else if (this.object.form != undefined) {\n          this.isLexEntry = false;\n          this.isForm = true;\n          this.isSense = false;\n          this.isLexicalConcept = false;\n        } else if (this.object.sense != undefined) {\n          this.isLexEntry = false;\n          this.isForm = false;\n          this.isSense = true;\n          this.isLexicalConcept = false;\n        } else if (this.object.lexicalConcept != undefined) {\n          this.isLexEntry = false;\n          this.isForm = false;\n          this.isSense = false;\n          this.isLexicalConcept = true;\n        }\n\n      } else {\n        this.object = null;\n      }\n    }, 10);\n  }\n\n  async onChangeSameAsByInput(value, index) {\n    if (value.trim() != '') {\n      var selectedValues = value;\n      var lexicalElementId = '';\n      let parameters = {};\n      if (this.object.lexicalEntry != undefined) {\n        lexicalElementId = this.object.lexicalEntry;\n      } else if (this.object.form != undefined) {\n        lexicalElementId = this.object.form;\n      } else if (this.object.sense != undefined) {\n        lexicalElementId = this.object.sense;\n      } else if (this.object.etymology != undefined) {\n        lexicalElementId = this.object.etymology;\n      } else if (this.object.lexicalConcept != undefined) {\n        lexicalElementId = this.object.lexicalConcept;\n      }\n\n      //console.log(this.memorySameAs[index])\n      if (this.memorySameAs[index] == undefined || this.memorySameAs[index] == \"\") {\n        parameters = {\n          type: \"reference\",\n          relation: \"http://www.w3.org/2002/07/owl#sameAs\",\n          value: selectedValues\n        }\n\n\n        \n      } else {\n        let oldValue = this.memorySameAs[index];\n        parameters = {\n          type: \"reference\",\n          relation: \"http://www.w3.org/2002/07/owl#sameAs\",\n          value: selectedValues,\n          currentValue: oldValue\n        }\n\n      }\n\n      try {\n        let data = await this.lexicalService.updateGenericRelation(lexicalElementId, parameters).toPromise();\n      } catch (e) {\n        console.log(e)\n        this.disableAddSameAs = false;\n        if (e.status == 200) {\n          this.memorySameAs[index] = selectedValues;\n          this.memorySameAs.push(selectedValues);\n          this.toastr.success('sameAs updated', '', {\n            timeOut: 5000,\n          });\n\n          this.sameAsArray.at(index).get('entity').setValue(selectedValues, {emitEvent: false});\n          this.sameAsArray.at(index).get('inferred').setValue(true, {emitEvent: false})\n          this.sameAsArray.at(index).get('lila').setValue(false, {emitEvent: false})\n        } else {\n          this.toastr.error(e.error, 'Error', {\n            timeOut: 5000,\n          });\n        }\n      }\n    }\n\n  }\n\n  async onChangeSameAs(sameAs, index) {\n    console.log(sameAs.selectedItems);\n    let lexicalElementId = '';\n\n    if (this.object.lexicalEntry != undefined) {\n      lexicalElementId = this.object.lexicalEntry;\n    } else if (this.object.form != undefined) {\n      lexicalElementId = this.object.form;\n    } else if (this.object.sense != undefined) {\n      lexicalElementId = this.object.sense;\n    } else if (this.object.etymology != undefined) {\n      lexicalElementId = this.object.etymology;\n    }\n    if (sameAs.selectedItems.length != 0) {\n      let parameters = {};\n      var selectedValues = sameAs.selectedItems[0].value.lexicalEntry;\n\n      if (selectedValues == undefined) {\n        sameAs.selectedItems[0].value.lexicalEntry;\n      }\n\n\n      if (this.memorySameAs[index] == undefined || this.memorySameAs[index] == \"\") {\n        parameters = {\n          type: \"reference\",\n          relation: \"http://www.w3.org/2002/07/owl#sameAs\",\n          value: selectedValues\n        }\n\n\n       \n      } else {\n        let oldValue = this.memorySameAs[index];\n        parameters = {\n          type: \"reference\",\n          relation: \"http://www.w3.org/2002/07/owl#sameAs\",\n          value: selectedValues,\n          currentValue: oldValue\n        }\n\n      }\n      console.log(parameters)\n      try {\n        let data = await this.lexicalService.updateGenericRelation(lexicalElementId, parameters).toPromise();\n      } catch (e) {\n        console.log(e)\n        if (e.status == 200) {\n          this.memorySameAs[index] = selectedValues;\n          this.memorySameAs.push(selectedValues);\n          this.sameAsArray.at(index).get('entity').setValue(selectedValues, {emitEvent: false});\n          this.sameAsArray.at(index).get('inferred').setValue(true, {emitEvent: false})\n          this.toastr.success('SeeAlso updated', '', {\n            timeOut: 5000,\n          });\n        } else {\n          this.toastr.error(e.error, 'Error', {\n            timeOut: 5000,\n          });\n        }\n      }\n\n    }\n\n\n  }\n\n  async onSearchFilter(data) {\n    this.filterLoading = true;\n    this.searchResults = [];\n\n    let value = data.value;\n    let index = data.index;\n    console.log(data)\n    this.sameAsArray = this.sameAsForm.get('sameAsArray') as FormArray;\n    let isLila = this.sameAsArray.at(index).get('lila').value;\n\n    if (!isLila) {\n      if (this.object.lexicalEntry != undefined) {\n        let parameters = {\n          text: data,\n          searchMode: \"startsWith\",\n          type: \"\",\n          pos: \"\",\n          formType: \"entry\",\n          author: \"\",\n          lang: \"\",\n          status: \"\",\n          offset: 0,\n          limit: 500\n        }\n        try {\n          let lex_entry_list = await this.lexicalService.getLexicalEntriesList(parameters).toPromise();\n          this.searchResults = lex_entry_list['list']\n          console.log(this.searchResults)\n          this.filterLoading = false;\n        } catch (e) {\n          console.log(e);\n          if (e.status != 200) {\n            this.toastr.error('Something went wrong', 'Error', { timeOut: 5000 });\n          }\n          this.filterLoading = false;\n        }\n\n\n\n      } else if (this.object.form != undefined) {\n        let parameters = {\n          text: data,\n          searchMode: \"startsWith\",\n          representationType: \"writtenRep\",\n          author: \"\",\n          offset: 0,\n          limit: 500\n        }\n        console.log(parameters);\n        try {\n          let forms_list = await this.lexicalService.getFormList(parameters).toPromise();\n          this.searchResults = forms_list['list']\n          console.log(this.searchResults)\n          this.filterLoading = false;\n        } catch (e) {\n          console.log(e);\n          if (e.status != 200) {\n            this.toastr.error('Something went wrong', 'Error', { timeOut: 5000 });\n          }\n          this.filterLoading = false;\n        }\n\n\n      } else if (this.object.sense != undefined) {\n        let parameters = {\n          text: data,\n          searchMode: \"startsWith\",\n          type: \"\",\n          pos: \"\",\n          formType: \"entry\",\n          author: \"\",\n          lang: \"\",\n          status: \"\",\n          offset: 0,\n          limit: 500\n        }\n\n        try {\n          let senses_list = await this.lexicalService.getSensesList(parameters).toPromise();\n          this.searchResults = senses_list['list']\n          console.log(this.searchResults)\n          this.filterLoading = false;\n        } catch (e) {\n          console.log(e);\n          if (e.status != 200) {\n            this.toastr.error('Something went wrong', 'Error', { timeOut: 5000 });\n          }\n          this.filterLoading = false;\n        }\n      }\n    } else if (isLila) {\n      this.searchResults = [];\n      if (this.sameAsForm.get('isEtymon').value) {\n\n        try {\n          let etymon_list = await this.lilaService.queryEtymon(value).toPromise();\n          if (etymon_list.list.length > 0) {\n            const map = etymon_list.list.map(etym => (\n              {\n                label: etym[2]?.value,\n                language: etym[1]?.value,\n                lexicalEntry: etym[0]?.value\n              })\n            )\n            this.searchResults = map;\n            console.log(this.searchResults)\n          }\n        } catch (e) {\n          console.log(e);\n          if (e.status != 200) {\n            this.toastr.error('Something went wrong', 'Error', { timeOut: 5000 });\n          }\n          this.filterLoading = false;\n        }\n      }\n\n\n      if (this.sameAsForm.get('isCognate').value) {\n        try{\n          let cognates_list = await this.lilaService.queryCognate(value).toPromise();\n          if (cognates_list.list.length > 0) {\n\n\n            const map = cognates_list.list.map(element => (\n              {\n                label: this.object.label,\n                labelValue: element[0].value,\n                pos: element[1].value\n              })\n            )\n\n            map.forEach(element => {\n              let tmpLblVal = element.labelValue.split('/');\n              let labelValue = tmpLblVal[tmpLblVal.length - 1];\n\n              let tmpLblPos = element.pos.split('/');\n              let pos = tmpLblPos[tmpLblPos.length - 1];\n\n\n              element.labelElement = labelValue;\n              element.labelPos = pos;\n\n            });\n\n\n\n            this.searchResults = map;\n            console.log(this.searchResults)\n\n          }\n        }catch(e){\n          console.log(e);\n          if (e.status != 200) {\n            this.toastr.error('Something went wrong', 'Error', { timeOut: 5000 });\n          }\n          this.filterLoading = false;\n        }\n        \n      }\n    }\n\n\n    console.log(data)\n\n  }\n\n  /* triggerLilaSearch(index){\n    \n    \n    setTimeout(() => {\n      this.sameAsArray = this.sameAsForm.get('sameAsArray') as FormArray;\n      if(this.sameAsArray.at(index).get('lila').value){\n        const element = Array.from(this.sameAsList)[index];\n\n       \n      }\n      \n\n    })\n  }\n */\n\n  deleteData() {\n    this.searchResults = [];\n  }\n\n  triggerSameAsInput(evt, i) {\n    if (evt.target != undefined) {\n      let value = evt.target.value;\n      this.subject_input.next({ value, i })\n    }\n  }\n\n  triggerSameAs(evt, i) {\n    console.log(evt.target.value)\n    if (evt.target != undefined) {\n      this.subject.next({ value: evt.target.value, index: i })\n    }\n  }\n\n  triggerTooltip() {\n    setTimeout(() => {\n      //@ts-ignore\n      $('.same-as-tooltip').tooltip({\n        trigger: 'hover'\n      });\n    }, 500);\n  }\n\n  createSameAsEntry(e?, i?) {\n    if (e == undefined) {\n      return this.formBuilder.group({\n        entity: null,\n        inferred: false,\n        lila: false\n      })\n    } else {\n      return this.formBuilder.group({\n        entity: e,\n        inferred: i,\n        lila: false\n      })\n    }\n\n  }\n\n  addSameAsEntry(e?, i?) {\n\n\n    this.sameAsArray = this.sameAsForm.get('sameAsArray') as FormArray;\n    if (e == undefined) {\n      this.disableAddSameAs = true;\n      this.sameAsArray.push(this.createSameAsEntry());\n    } else {\n      this.sameAsArray.push(this.createSameAsEntry(e, i));\n    }\n\n\n\n    this.triggerTooltip();\n\n\n  }\n\n  async removeElement(index) {\n    this.sameAsArray = this.sameAsForm.get('sameAsArray') as FormArray;\n    const lexical_entity = this.sameAsArray.at(index).get('entity').value;\n    this.disableAddSameAs = false;\n    let lexicalElementId = '';\n\n    if (this.object.lexicalEntry != undefined) {\n      lexicalElementId = this.object.lexicalEntry;\n    } else if (this.object.form != undefined) {\n      lexicalElementId = this.object.form;\n    } else if (this.object.sense != undefined) {\n      lexicalElementId = this.object.sense;\n    } else if (this.object.etymology != undefined) {\n      lexicalElementId = this.object.etymology;\n    } else if (this.object.lexicalConcept != undefined) {\n      lexicalElementId = this.object.lexicalConcept;\n    }\n    let parameters = {\n      relation: 'http://www.w3.org/2002/07/owl#sameAs',\n      value: lexical_entity\n    }\n\n    try{\n      let delete_request = await this.lexicalService.deleteLinguisticRelation(lexicalElementId, parameters).toPromise();\n\n      this.toastr.success(\"SameAs Removed\", '', {\n        timeOut: 5000,\n      });\n    }catch(e){\n      if (e.status == 200) {\n        this.toastr.success(\"SameAs Removed\", '', {\n          timeOut: 5000,\n        });\n      } else {\n        this.toastr.error(e.error.text, 'Error', {\n          timeOut: 5000,\n        });\n      }\n    }\n\n    \n    this.memorySameAs.splice(index, 1)\n    this.sameAsArray.removeAt(index);\n  }\n\n  ngOnDestroy(): void {\n    this.sameas_subscription.unsubscribe();\n    this.destroy$.next(true);\n    this.destroy$.complete();\n  }\n\n}\n","\n\n<form [formGroup]=\"sameAsForm\">\n    <div class=\"form-group row mt-3\">\n        <div class=\"input-group col-sm-12\">\n            <div class=\"card\">\n                <span class=\"text-id\">SAME AS</span>\n                <a (click)=\"addSameAsEntry()\" [ngClass]=\"{no_pointer: disableAddSameAs}\" class=\"pointer\"><span class=\"collapse-icon\"><i\n                            class=\"fa fa-plus-square\"></i></span></a>\n                <div class=\"card-body\">\n                    <div formArrayName=\"sameAsArray\" class=\"mt-3\">\n                        <div *ngFor=\"let sameAs of sameAsForm.get('sameAsArray')['controls']; let i = index\">\n                            <div [formGroupName]=\"i\">\n                                <div class=\"d-flex\">\n                                    <div class=\"form-group row ml-2  mr-2 w-100\" *ngIf=\"{switch : false}; let variable\">\n                                        <div class=\"input-group\" *ngIf=\"{boolean : sameAs.get('inferred').value}; let inf\">\n                                            <ng-select [isOpen]=\"dropdown\" #sameAsSelect formControlName=\"entity\" name=\"entity\"\n                                                (change)=\"onChangeSameAs(sameAsSelect, i)\" (focus)=\"deleteData()\"\n                                                (keyup)=\"triggerSameAs($event, i)\" bindValue=\"label\" class=\"resizeNgSelect\" [items]=\"searchResults\"\n                                                bindLabel=\"label\" placeholder=\"Search entity\" appendTo=\"body\"\n                                                [hidden]=\"!sameAs.get('lila').value\" [readonly]=\"inf.boolean\">\n                                                <ng-template ng-option-tmp let-item=\"item\" let-search=\"searchTerm\">\n                                           \n                                                    <div class=\"card-body p-0\">\n                                                        <span class=\"card-title m-0\" [ngOptionHighlight]=\"search\">{{item.label}}</span>\n                                                        <span style=\"color: blue;\">@{{item.language}}</span>\n                                                        <small class=\"card-text\">\n                                                           \n                                        \n                                                        </small>\n                                                       \n                                                    </div>\n                                        \n                                                </ng-template>\n                                               \n                                            </ng-select>\n                                            \n                                            <input formControlName=\"entity\" name=\"entity\" type=\"text\"\n                                                class=\"form-control \" (keyup)=\"triggerSameAsInput($event, i)\"\n                                                placeholder=\"Insert URI\" [hidden]=\"sameAs.get('lila').value\">\n\n                                            <div class=\"input-group-append\">\n                                               <!--  <div class=\"input-group-append ml-2 form-check\">\n                                                    <input class=\"form-check-input same-as-tooltip\" type=\"checkbox\"\n                                                        (change)=\"variable.switch=!variable.switch\"\n                                                        data-toggle=\"tooltip\" data-placement=\"bottom\"\n                                                        data-trigger=\"hover\"\n                                                        title=\"Clicca per inserire un URI manualmente\">\n                                                    <label class=\"form-check-label\" for=\"extCheck\"></label>\n                                                </div> -->\n                                                \n                                                <div class=\"input-group-append ml-2\" *ngIf=\"(sameAsForm.get('isCognate').value || sameAsForm.get('isEtymon').value) && (!inf.boolean && !sameAs.get('inferred').value)\">\n                                                    <div class=\"btn-group-toggle\" data-toggle=\"buttons\" placement=\"top\" ngbTooltip=\"Enable LiLa endpoint\" title=\"Enable LiLa endpoint\" >\n                                                        <label class=\"btn btn-secondary\" >\n                                                          <input  type=\"checkbox\" autocomplete=\"off\" autocomplete=\"off\" formControlName=\"lila\" name=\"lila\" style=\"border-radius: .3rem;\" > \n                                                            <!-- <img src=\"../../../../../../../assets/images/graphql.png\" alt=\"Avatar\" class=\"image\" style=\"height: 20px;\" /> -->\n                                                            <i class=\"fas fa-project-diagram\"></i>\n                                                        </label>\n                                                    </div>\n                                                </div>\n                                                <div class=\"input-group-append ml-2\" *ngIf=\"inf.boolean\">\n                                                    <a [href]=\"sameAs.get('entity').value\" target=\"_blank\"  class=\"btn btn-primary\"\n                                                        type=\"button\"><i class=\"fas fa-external-link-alt\"></i></a>\n                                                </div>\n                                                <div class=\"input-group-append ml-2\">\n                                                    <button (click)=\"removeElement(i)\" class=\"btn btn-danger\"\n                                                        type=\"button\"><i class=\"fa fa-trash-alt\"></i></button>\n                                                </div>\n                                            </div>\n\n                                           \n                                        </div>\n                                    </div>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n</form>","import { Component, Input, OnDestroy, OnInit, ViewChild } from '@angular/core';\nimport { ModalComponent } from 'ng-modal-lib';\nimport { Subscription } from 'rxjs';\nimport { debounceTime, first } from 'rxjs/operators';\nimport { AnnotatorService } from 'src/app/services/annotator/annotator.service';\n\n@Component({\n  selector: 'app-form-panel',\n  templateUrl: './form-panel.component.html',\n  styleUrls: ['./form-panel.component.scss']\n})\nexport class FormPanelComponent implements OnInit, OnDestroy {\n  public formId: string;\n  public label : any;\n  public subscription: Subscription;\n  public formData : any;\n  public id : any;\n\n  @ViewChild('formPanelModal', {static: false}) formPanelModal: ModalComponent;\n  \n  constructor(private annotatorService : AnnotatorService) { }\n\n  ngOnInit(): void {\n    \n  }\n\n  ngOnDestroy() : void {\n    this.subscription.unsubscribe();\n  }\n\n\n  triggerFormPanel(data?){\n    setTimeout(() => {\n      this.formPanelModal.show();\n      \n    }, 100);\n    \n  }\n\n  onCloseModal(idForm){\n    this.annotatorService.closePanelForm(idForm);\n    console.log(this.annotatorService.getAllPanelForms())\n  }\n}\n","<app-modal #formPanelModal style=\"top: 10%;\" class=\"modal-demo\" [maximizable]=\"false\" [inViewport]=\"true\"  [backdrop]=\"false\" class=\"panelFormData\" (closeModal)=\"onCloseModal(id)\">\n    <ng-container class=\"app-modal-header\">{{label}}</ng-container>\n    <ng-container class=\"app-modal-body\">\n       <app-form-core-form [formData]=\"formData\"></app-form-core-form>\n    </ng-container>\n    <!-- <ng-container class=\"app-modal-footer\">\n        <button type=\"button\" class=\"button button3\"\n            (click)=\"formPanelModal.hide()\">Delete</button>\n        <button type=\"button\" class=\"button button1\"\n            (click)=\"formPanelModal.hide()\">Save</button>\n        <button type=\"button\" class=\"button button2\"\n            style=\"float: right;\" (click)=\"formPanelModal.hide()\">Close\n        </button>\n    </ng-container> -->\n</app-modal>","/*\n   Copyright 2021-2022  Istituto di Linguistica Computazionale \"A. Zampolli\", Consiglio Nazionale delle Ricerche, Pisa, Italy.\n \nThis file is part of EpiLexo.\n\nEpiLexo is free software: you can redistribute it and/or modify it under the terms of the GNU General Public License as published by the Free Software Foundation, either version 3 of the License, or (at your option) any later version.\n\nEpiLexo is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for more details.\n\nYou should have received a copy of the GNU General Public License along with EpiLexo. If not, see <https://www.gnu.org/licenses/>.\n*/\n\nimport { ApplicationRef, Component, ElementRef, Input, OnDestroy, OnInit, Renderer2, ViewChild } from '@angular/core';\nimport { TreeNode, TreeModel, TREE_ACTIONS, KEYS, IActionMapping, ITreeOptions, ITreeState } from '@circlon/angular-tree-component';\nimport { formTypeEnum, LexicalEntryRequest, searchModeEnum, typeEnum } from './interfaces/lexical-entry-interface'\nimport { LexicalEntriesService } from 'src/app/services/lexical-entries/lexical-entries.service';\nimport { FormControl, FormGroup } from '@angular/forms';\nimport { ContextMenuComponent } from 'ngx-contextmenu';\n\nimport * as _ from 'underscore';\ndeclare var $: JQueryStatic;\n\n\nimport { debounceTime, take, takeUntil } from 'rxjs/operators';\nimport { ExpanderService } from 'src/app/services/expander/expander.service';\nimport { Subject, Subscription } from 'rxjs';\nimport { ToastrService } from 'ngx-toastr';\n\n\nconst actionMapping: IActionMapping = {\n  mouse: {\n\n    dblClick: (tree, node, $event) => {\n      if (node.hasChildren) {\n        TREE_ACTIONS.TOGGLE_EXPANDED(tree, node, $event);\n      }\n    },\n    click: (tree, node, $event) => {\n\n      TREE_ACTIONS.TOGGLE_ACTIVE(tree, node, $event);\n      TREE_ACTIONS.TOGGLE_EXPANDED(tree, node, $event);\n    },\n    contextMenu: (tree, node, $event) => {\n\n      TREE_ACTIONS.TOGGLE_ACTIVE(tree, node, $event);\n      TREE_ACTIONS.TOGGLE_EXPANDED(tree, node, $event);\n    },\n  }\n};\n\n@Component({\n  selector: 'app-lexical-entry-tree',\n  templateUrl: './lexical-entry-tree.component.html',\n  styleUrls: ['./lexical-entry-tree.component.scss']\n})\n\nexport class LexicalEntryTreeComponent implements OnInit, OnDestroy {\n  state!: ITreeState;\n  show = false;\n  modalShow = false;\n  flagAuthor = false;\n  searchIconSpinner = false;\n  viewPort: any;\n  titlePopover = \"Search examples\"\n  popoverWildcards = \"<span><b>Multiple character wildcard search:</b></span>&nbsp;<span><i>te*</i></span><br><span><b>Single character wildcard search:</b></span>&nbsp;<span><i>te?t</i></span><br> <b>Fuzzy search:</b></span>&nbsp;<span><i>test~</i></span><br><b>Weighted fuzzy search:</b></span>&nbsp;<span><i>test~0.8</i></span>\"\n  labelView = true;\n  idView = false;\n  offset = 0;\n  limit = 500;\n  interval;\n\n  destroy$ : Subject<boolean> = new Subject();\n\n  @ViewChild(ContextMenuComponent) public basicMenu: ContextMenuComponent;\n  /* sub : Subscription; */\n\n  counter = 0;\n\n  @Input() triggerShowTree: any;\n  @ViewChild('lexicalEntry') lexicalEntryTree: any;\n\n  nodes;\n  languages;\n  types;\n  authors;\n  partOfSpeech;\n  selectedNodeId;\n  status = [{ \"label\": \"false\", \"count\": 0 }, { \"label\": \"true\", \"count\": 0 }];\n  parameters: LexicalEntryRequest = {\n    text: \"\",\n    searchMode: searchModeEnum.startsWith,\n    type: \"\",\n    pos: \"\",\n    formType: \"entry\",\n    author: \"\",\n    lang: \"\",\n    status: \"\",\n    offset: this.offset,\n    limit: this.limit\n  }\n\n\n  options: ITreeOptions = {\n    useVirtualScroll: true,\n    scrollOnActivate: false,\n    nodeHeight: 13,\n    actionMapping,\n    getChildren: this.getChildren.bind(this)\n  };\n\n\n  filterForm = new FormGroup({\n    text: new FormControl(''),\n    searchMode: new FormControl('startsWith'),\n    type: new FormControl(''),\n    pos: new FormControl(''),\n    formType: new FormControl('entry'),\n    author: new FormControl(''),\n    lang: new FormControl(''),\n    status: new FormControl('')\n  });\n\n  initialValues = this.filterForm.value;\n\n  copySubject: Subject<string> = new Subject();\n\n  delete_req_subscription : Subscription;\n  add_sub_subscription : Subscription;\n  copy_subject_subscription : Subscription;\n  refresh_filter_subscription : Subscription;\n  get_lex_entry_list_subscription : Subscription;\n  get_languages_subscription : Subscription;\n  get_types_subscription : Subscription;\n  get_authors_subscription : Subscription;\n  get_pos_subscription : Subscription;\n  get_status_subscription : Subscription;\n\n  constructor(private expander: ExpanderService, \n              private renderer: Renderer2, \n              private element: ElementRef, \n              private lexicalService: LexicalEntriesService, \n              private toastr: ToastrService) {\n\n    var refreshTooltip = setInterval((val) => {\n      //console.log('called'); \n      //@ts-ignore\n      $('.lexical-tooltip').tooltip('disable');\n      //@ts-ignore\n      $('.lexical-tooltip').tooltip('enable');\n      //@ts-ignore\n      $('.note-tooltip').tooltip('disable');\n      //@ts-ignore\n      $('.note-tooltip').tooltip('enable');\n    }, 2000)\n  }\n\n  ngOnInit(): void {\n\n    this.viewPort = this.element.nativeElement.querySelector('tree-viewport');\n    this.renderer.addClass(this.viewPort, 'search-results');\n\n    this.onChanges();\n\n    this.delete_req_subscription = this.lexicalService.deleteReq$.subscribe(\n      signal => {\n\n        ////console.log(\"richiesta eliminazione lexical entry\");\n        if (signal != null) {\n          this.lexEntryDeleteReq(signal);\n        }\n\n      }\n    )\n\n    this.add_sub_subscription = this.lexicalService.addSubReq$.subscribe(\n      signal => {\n\n        if (signal != null) {\n          this.addSubElement(signal)\n        }\n      }\n    )\n\n    this.copy_subject_subscription = this.copySubject.pipe(debounceTime(500), takeUntil(this.destroy$)).subscribe(v => {\n      let selBox = document.createElement('textarea');\n      selBox.style.position = 'fixed';\n      selBox.style.left = '0';\n      selBox.style.top = '0';\n      selBox.style.opacity = '0';\n      selBox.value = v;\n      document.body.appendChild(selBox);\n      selBox.focus();\n      selBox.select();\n      document.execCommand('copy');\n      document.body.removeChild(selBox);\n\n      this.toastr.info('URI copied', 'Info', {\n        timeOut: 5000,\n      });\n    })\n\n    this.refresh_filter_subscription = this.lexicalService.refreshFilter$.subscribe(\n      signal => {\n\n        if (signal != null) {\n\n          this.get_lex_entry_list_subscription = this.lexicalService.getLexicalEntriesList(this.parameters).pipe(takeUntil(this.destroy$)).subscribe(\n            data => {\n              this.counter = data['totalHits'];\n            },\n            error => {\n              //console.log(error)\n            }\n          );\n\n\n          this.get_languages_subscription = this.lexicalService.getLanguages().pipe(takeUntil(this.destroy$)).subscribe(\n            data => {\n\n              this.languages = data;\n            }\n          );\n\n          this.get_types_subscription = this.lexicalService.getTypes().pipe(takeUntil(this.destroy$)).subscribe(\n            data => {\n              this.types = data;\n            }\n          );\n\n          this.get_authors_subscription = this.lexicalService.getAuthors().pipe(takeUntil(this.destroy$)).subscribe(\n            data => {\n              this.authors = data;\n            }\n          );\n\n          this.get_pos_subscription = this.lexicalService.getPos().pipe(takeUntil(this.destroy$)).subscribe(\n            data => {\n              this.partOfSpeech = data;\n            }\n          )\n\n          this.get_status_subscription = this.lexicalService.getStatus().pipe(takeUntil(this.destroy$)).subscribe(\n            data => {\n              this.status = data;\n            }\n          )\n\n\n        }\n      }\n    )\n\n    /* //console.log(this.parameters) */\n    this.get_lex_entry_list_subscription = this.lexicalService.getLexicalEntriesList(this.parameters).pipe(takeUntil(this.destroy$)).subscribe(\n      data => {\n        this.nodes = data['list'];\n        this.counter = data['totalHits'];\n      },\n      error => {\n        //console.log(error)\n      }\n    );\n\n    this.get_languages_subscription = this.lexicalService.getLanguages().subscribe(\n      data => {\n        this.languages = data;\n      }\n    );\n\n    this.get_types_subscription = this.lexicalService.getTypes().subscribe(\n      data => {\n        this.types = data;\n      }\n    );\n\n    this.get_authors_subscription = this.lexicalService.getAuthors().subscribe(\n      data => {\n        this.authors = data;\n      }\n    );\n\n    this.get_pos_subscription = this.lexicalService.getPos().subscribe(\n      data => {\n        this.partOfSpeech = data;\n      }\n    )\n\n    this.get_status_subscription = this.lexicalService.getStatus().subscribe(\n      data => {\n        this.status = data;\n      }\n    )\n  }\n\n  onChanges() {\n    this.filterForm.valueChanges.pipe(debounceTime(500), takeUntil(this.destroy$)).subscribe(searchParams => {\n      this.offset = 0;\n      this.lexicalEntriesFilter(searchParams);\n    })\n  }\n\n  addSubElement(signal?) {\n\n    setTimeout(() => {\n      let instanceName;\n      let lex = signal.lex;\n      let data = signal.data;\n      console.log(lex)\n      console.log(data)\n      switch (lex.request) {\n        case 'form': instanceName = 'form'; break;\n        case 'sense': instanceName = 'sense'; break;\n        case 'etymology': instanceName = 'etymology'; break;\n        case 'subterm': instanceName = 'lexicalEntry'; break;\n        case 'constituent': instanceName = 'component'; break;\n      }\n      this.lexicalEntryTree.treeModel.getNodeBy(x => {\n        if (lex.lexicalEntry != undefined) {\n          if (x.data.lexicalEntry === lex.lexicalEntry) {\n            if (x.data.children == undefined && !x.isExpanded) {\n              x.expand();\n              var that = this;\n              this.interval = setInterval((val) => {\n                if (x.data.children != undefined) {\n                  this.lexicalEntryTree.treeModel.getNodeBy(y => {\n                    if (y.data[instanceName] != undefined) {\n                      /* console.log(y.data[instanceName]) */\n                      if (y.data['creator'] == x.data.creator) {\n                        y.data['flagAuthor'] = false;\n                      } else {\n                        y.data['flagAuthor'] = true;\n                      }\n                      if (y.data[instanceName] === data[instanceName]) {\n                        y.setActiveAndVisible();\n                        clearInterval(that.interval)\n                        return true;\n                      } else {\n                        return false;\n                      }\n                    } else {\n                      return false;\n                    }\n                  })\n                }\n              }, 3000)\n\n            } else if (x.data.children != undefined) {\n              let checkExistence = x.data.children.filter(element => {\n                return element.label === lex.request\n              });\n              if (checkExistence.length == 1) {\n                x.data.children.filter(element => {\n                  if (element.label === lex.request) {\n                    if (lex.request == 'sense') {\n                      data['label'] = 'no definition'\n                      data['definition'] = 'no definition'\n                    } else if (lex.request == 'etymology') {\n                      data['label'] = \"Etymology of: \" + lex.parentNodeLabel;\n                      console.log(data['label'])\n                    } else if (lex.request == 'subterm') {\n                      data.label = data.label;\n                      data.children = null;\n                      data.hasChildren = false;\n                    } else if (lex.request == 'constituent') {\n                      data.label = '';\n                      data.children = null;\n                      data.hasChildren = false;\n                    } else {\n                      data['label'] = data[instanceName];\n                    }\n                    /* console.log(data['creator'] == x.data.creator);\n                    console.log(data['creator'], x.data.creator) */\n\n                    if (data['creator'] == x.data.creator) {\n                      data['flagAuthor'] = false;\n                    } else {\n                      data['flagAuthor'] = true;\n                    }\n\n                    element.count++;\n                    element.children.push(data);\n                    this.lexicalEntryTree.treeModel.update();\n                    this.lexicalEntryTree.treeModel.getNodeBy(y => {\n                      if (y.data.etymology == undefined && y.data.label === data['label'] && lex.request != 'subterm') {\n                        y.setActiveAndVisible();\n                      } else if (y.data.etymology != undefined && y.data.etymology === data['etymology'] && lex.request != 'subterm') {\n                        y.setActiveAndVisible();\n                      }\n                    })\n                    return true;\n                  } else {\n                    return false;\n                  }\n                });\n              } else if (checkExistence.length == 0) {\n                let node = {\n                  hasChildren: true,\n                  label: lex.request,\n                  children: [],\n                  count: 0\n                }\n                x.data.children.push(node);\n                x.data.children.sort(function (a, b) {\n                  var textA = a.label.toUpperCase();\n                  var textB = b.label.toUpperCase();\n                  return (textA < textB) ? -1 : (textA > textB) ? 1 : 0;\n                })\n                this.lexicalEntryTree.treeModel.update();\n                x.data.children.filter(element => {\n                  if (element.label === lex.request) {\n                    console.log(data['creator'], x.data.reator)\n                    if (data['creator'] == x.data.creator) {\n                      data['flagAuthor'] = false;\n                    } else {\n                      data['flagAuthor'] = true;\n                    }\n\n                    if (lex.request == 'sense') {\n                      data['definition'] = 'no definition';\n                      data.label = 'no definintion'\n                    } else if (lex.request == 'subterm') {\n                      data.label = data.label;\n                      data.children = null;\n                      data.hasChildren = false;\n                    } else {\n                      data['label'] = data[instanceName];\n                    }\n\n                    if (lex.request == 'subterm') {\n                      data.children == null;\n                      data.hasChildren = false;\n                      data.label = data.label;\n                    }\n\n                    if (lex.request == 'constituent') {\n                      data.children == null;\n                      data.label = '';\n                    }\n\n                    element.count++;\n                    element.children.push(data);\n                    this.lexicalEntryTree.treeModel.update();\n                    this.lexicalEntryTree.treeModel.getNodeBy(y => {\n                      if (y.data.label === data['label'] && lex.request != 'subterm') { /* && lex.request != 'subterm' */\n                        y.setActiveAndVisible();\n                      }\n                    })\n                    return true;\n                  } else {\n                    return false;\n                  }\n                });\n              }\n            } else {\n              return false;\n            }\n            return true;\n          } else {\n            return false;\n          }\n        } else {\n          return false;\n        }\n      })\n    }, 300);\n  }\n\n  lexEntryDeleteReq(signal?) {\n\n\n\n    this.lexicalEntryTree.treeModel.getNodeBy(x => {\n      if (signal.lexicalEntry != undefined && signal.form == undefined && signal.sense == undefined) {\n        if (x.data.lexicalEntry === signal.lexicalEntry) {\n\n          x.parent.data.children.splice(x.parent.data.children.indexOf(x.data), 1);\n\n          let countSubterm = x.parent.data.count;\n          if (countSubterm != 0) {\n            x.parent.data.count--;\n            countSubterm--;\n          }\n\n          //this.lexicalEntryTree.treeModel.update();\n          if (this.nodes.length == 0) {\n            this.lexicalEntriesFilter(this.parameters);\n          }\n\n\n\n          if (countSubterm == 0) {\n            x.parent.parent.data.children.splice(x.parent.parent.data.children.indexOf(x.parent.data), 1)\n          }\n          console.log(x.parent)\n\n          this.lexicalEntryTree.treeModel.update()\n\n          return true;\n        } else {\n          return false;\n        }\n      } else if (signal.form != undefined) {\n        if (x.data.form === signal.form) {\n\n          x.parent.data.children.splice(x.parent.data.children.indexOf(x.data), 1);\n          let countForm = x.parent.data.count;\n          if (countForm != 0) {\n            x.parent.data.count--;\n            countForm--;\n          }\n\n          if (countForm == 0) {\n            x.parent.parent.data.children.splice(x.parent.parent.data.children.indexOf(x.parent.data), 1)\n          }\n          console.log(x.parent)\n\n          this.lexicalEntryTree.treeModel.update()\n\n          return true;\n        } else {\n          return false;\n        }\n      } else if (signal.sense != undefined) {\n        if (x.data.sense === signal.sense) {\n\n          x.parent.data.children.splice(x.parent.data.children.indexOf(x.data), 1);\n          let countSense = x.parent.data.count;\n          if (countSense != 0) {\n            x.parent.data.count--;\n            countSense--;\n          }\n\n          if (countSense == 0) {\n            x.parent.parent.data.children.splice(x.parent.parent.data.children.indexOf(x.parent.data), 1)\n          }\n          console.log(x.parent)\n\n          this.lexicalEntryTree.treeModel.update()\n\n          return true;\n        } else {\n          return false;\n        }\n      } else if (signal.etymology != undefined) {\n        if (x.data.etymology === signal.etymology.etymology) {\n          x.parent.data.children.splice(x.parent.data.children.indexOf(x.data), 1);\n          let countSense = x.parent.data.count;\n          if (countSense != 0) {\n            x.parent.data.count--;\n            countSense--;\n          }\n\n          if (countSense == 0) {\n            x.parent.parent.data.children.splice(x.parent.parent.data.children.indexOf(x.parent.data), 1)\n          }\n          console.log(x.parent)\n\n          this.lexicalEntryTree.treeModel.update()\n\n          return true;\n        } else {\n          return false;\n        }\n      } else if (signal.componentInstanceName != undefined) {\n        if (x.data.componentInstanceName === signal.componentInstanceName) {\n          x.parent.data.children.splice(x.parent.data.children.indexOf(x.data), 1);\n          let countSense = x.parent.data.count;\n          if (countSense != 0) {\n            x.parent.data.count--;\n            countSense--;\n          }\n\n          if (countSense == 0) {\n            x.parent.parent.data.children.splice(x.parent.parent.data.children.indexOf(x.parent.data), 1)\n          }\n          console.log(x.parent)\n\n          this.lexicalEntryTree.treeModel.update()\n\n          return true;\n        } else {\n          return false;\n        }\n      } else if (signal.subtermInstanceName != undefined) {\n        let parent = signal.parentNodeInstanceName;\n        if (x.data.lexicalEntry == signal.parentNodeInstanceName) {\n          console.log(x)\n          let children = x.data.children;\n\n          if (children.length >= 1) {\n            Array.from(children).forEach((y: any) => {\n              if (y.lexicalEntry == signal.subtermInstanceName) {\n\n                console.log(y, x)\n\n                x.data.children.splice(x.data.children.indexOf(y), 1);\n\n                let countSubterm = x.data.count;\n                if (countSubterm != 0) {\n                  x.data.count--;\n                  countSubterm--;\n                }\n\n                if (this.nodes.length == 0) {\n                  this.lexicalEntriesFilter(this.parameters);\n                }\n\n\n\n                if (countSubterm == 0) {\n                  x.parent.data.children.splice(x.parent.data.children.indexOf(x.data), 1)\n                }\n\n                this.lexicalEntryTree.treeModel.update()\n                return true\n\n              } else {\n                return false\n              }\n            })\n          }\n        }\n      } else {\n        return false;\n      }\n      return false;\n    })\n\n\n  }\n\n  lexicalEntriesFilter(newPar) {\n\n    setTimeout(() => {\n      const viewPort_prova = this.element.nativeElement.querySelector('tree-viewport') as HTMLElement;\n      viewPort_prova.scrollTop = 0\n    }, 300);\n\n    this.searchIconSpinner = true;\n    let parameters = newPar;\n    parameters['offset'] = this.offset;\n    parameters['limit'] = this.limit;\n    console.log(parameters)\n    this.lexicalService.getLexicalEntriesList(newPar).pipe(takeUntil(this.destroy$)).subscribe(\n      data => {\n        console.log(data)\n        if (data['list'].length > 0) {\n          this.show = false;\n        } else {\n          this.show = true;\n        }\n        this.nodes = data['list'];\n        this.counter = data['totalHits'];\n        this.lexicalEntryTree.treeModel.update();\n        this.updateTreeView();\n        this.searchIconSpinner = false;\n      },\n      error => {\n        console.log(error)\n      }\n    )\n  }\n\n  getParameters() {\n    return this.initialValues;\n  }\n\n  ngAfterViewInit(): void {\n    //@ts-ignore\n    $('[data-toggle=\"popover\"]').popover({\n      html: true,\n      title: this.titlePopover,\n      content: this.popoverWildcards\n    });\n  }\n\n  resetFields() {\n    this.initialValues.text = '';\n    this.parameters.text = '';\n    this.offset = 0;\n    this.filterForm.reset(this.initialValues, { emitEvent: false });\n    setTimeout(() => {\n      //this.filterForm.get('text').setValue('', {eventEmit : false});\n      this.lexicalEntriesFilter(this.parameters);\n      this.lexicalEntryTree.treeModel.update();\n      //this.updateTreeView();\n      /* this.lexicalService.sendToCoreTab(null);\n      this.lexicalService.sendToRightTab(null); */\n    }, 500);\n\n  }\n\n  updateTreeView() {\n\n    setTimeout(() => {\n      this.lexicalEntryTree.sizeChanged();\n      //@ts-ignore\n      $('.lexical-tooltip').tooltip();\n    }, 1000);\n  }\n\n  onEvent = ($event: any) => {\n\n    console.log($event)\n    setTimeout(() => {\n      //@ts-ignore\n      $('.lexical-tooltip').tooltip();\n    }, 2000);\n\n    if ($event.eventName == 'activate' && $event.node.data.lexicalEntry != undefined\n      && $event.node.data.form == undefined\n      && $event.node.data.sense == undefined\n      && $event.node.data.etymology == undefined\n      && $event.node.data.lexicalEntry != this.selectedNodeId) {\n      //this.lexicalService.sendToCoreTab($event.node.data);\n      let idLexicalEntry = $event.node.data.lexicalEntry;\n      this.lexicalService.getLexEntryData(idLexicalEntry).pipe(takeUntil(this.destroy$)).subscribe(\n        data => {\n\n          console.log(data);\n          this.selectedNodeId = $event.node.data.lexicalEntry;\n          this.lexicalService.sendToCoreTab(data);\n          this.lexicalService.sendToRightTab(data);\n          this.lexicalService.sendToEtymologyTab(null);\n          this.lexicalService.updateCoreCard({ lastUpdate: data['lastUpdate'], creationDate: data['creationDate'] });\n\n          \n\n          if (!this.expander.isEditTabOpen() && !this.expander.isEpigraphyTabOpen()) {\n            if (!this.expander.isEditTabExpanded() && !this.expander.isEpigraphyTabExpanded()) {\n\n              this.expander.expandCollapseEdit(true);\n              this.expander.openCollapseEdit(true);\n            }\n          } else if (!this.expander.isEditTabOpen() && this.expander.isEpigraphyTabOpen()) {\n            if (!this.expander.isEditTabExpanded() && this.expander.isEpigraphyTabExpanded()) {\n              this.expander.expandCollapseEpigraphy(false);\n              this.expander.openCollapseEdit(true)\n            }\n          }\n\n\n          //@ts-ignore\n          $(\"#coreTabModal\").modal(\"show\");\n          $('.modal-backdrop').appendTo('.core-tab-body');\n          //@ts-ignore\n          $('#coreTabModal').modal({ backdrop: 'static', keyboard: false })\n          $('body').removeClass(\"modal-open\")\n          $('body').css(\"padding-right\", \"\");\n\n          if (data.note != undefined) {\n            if (data.note != \"\") {\n              this.lexicalService.triggerNotePanel(true);\n            } else {\n              this.lexicalService.triggerNotePanel(false);\n            }\n          }\n        },\n        error => {\n          console.log(error)\n        }\n      )\n    } else if ($event.eventName == 'activate'\n      && $event.node.data.form != undefined\n      && $event.node.data.form != this.selectedNodeId) {\n\n      let formId = $event.node.data.form;\n\n      this.lexicalService.getFormData(formId, 'core').pipe(takeUntil(this.destroy$)).subscribe(\n        data => {\n          console.log(data)\n          this.selectedNodeId = $event.node.data.form;\n          data['parentNodeLabel'] = $event.node.parent.parent.data.label;\n          data['parentNodeInstanceName'] = $event.node.parent.parent.data.lexicalEntry;\n          this.lexicalService.sendToCoreTab(data)\n          this.lexicalService.sendToEtymologyTab(null);\n          this.lexicalService.sendToRightTab(data);\n          this.lexicalService.updateCoreCard({ lastUpdate: data['lastUpdate'], creationDate: data['creationDate'] })\n          //@ts-ignore\n          $(\"#coreTabModal\").modal(\"show\");\n          $('.modal-backdrop').appendTo('.core-tab-body');\n          //@ts-ignore\n          $('#coreTabModal').modal({ backdrop: 'static', keyboard: false })\n          $('body').removeClass(\"modal-open\")\n          $('body').css(\"padding-right\", \"\");\n\n\n          \n          // this.lexicalService.sendToAttestationPanel(null);\n          // this.lexicalService.triggerAttestationPanel(false);\n\n          if (!this.expander.isEditTabOpen() && !this.expander.isEpigraphyTabOpen()) {\n            if (!this.expander.isEditTabExpanded() && !this.expander.isEpigraphyTabExpanded()) {\n\n              this.expander.expandCollapseEdit(true);\n              this.expander.openCollapseEdit(true);\n            }\n          } else if (!this.expander.isEditTabOpen() && this.expander.isEpigraphyTabOpen()) {\n            if (!this.expander.isEditTabExpanded() && this.expander.isEpigraphyTabExpanded()) {\n              this.expander.expandCollapseEpigraphy(false);\n              this.expander.openCollapseEdit(true)\n            }\n          }\n\n          if (data.note != undefined) {\n            if (data.note != \"\") {\n              this.lexicalService.triggerNotePanel(true);\n            } else {\n              this.lexicalService.triggerNotePanel(false);\n            }\n          }\n        },\n        error => {\n          //console.log(error)\n        }\n      )\n\n    } else if ($event.eventName == 'activate'\n      && $event.node.data.sense != undefined\n      && $event.node.data.sense != this.selectedNodeId) {\n\n      let senseId = $event.node.data.sense;\n\n      this.lexicalService.getSenseData(senseId, 'core').pipe(takeUntil(this.destroy$)).subscribe(\n        data => {\n          this.selectedNodeId = $event.node.data.sense;\n          data['parentNodeLabel'] = $event.node.parent.parent.data.label;\n          data['parentNodeInstanceName'] = $event.node.parent.parent.data.lexicalEntry;\n          data['type'] = $event.node.parent.parent.data.type;\n          console.log(data)\n          this.lexicalService.sendToCoreTab(data)\n          this.lexicalService.sendToEtymologyTab(null);\n          this.lexicalService.sendToRightTab(data);\n          this.lexicalService.updateCoreCard({ lastUpdate: data['lastUpdate'], creationDate: data['creationDate'] })\n\n          // this.lexicalService.sendToAttestationPanel(null);\n          // this.lexicalService.triggerAttestationPanel(false);\n          //@ts-ignore\n          $(\"#coreTabModal\").modal(\"show\");\n          $('.modal-backdrop').appendTo('.core-tab-body');\n          //@ts-ignore\n          $('#coreTabModal').modal({ backdrop: 'static', keyboard: false })\n          $('body').removeClass(\"modal-open\")\n          $('body').css(\"padding-right\", \"\");\n\n          if (!this.expander.isEditTabOpen() && !this.expander.isEpigraphyTabOpen()) {\n            if (!this.expander.isEditTabExpanded() && !this.expander.isEpigraphyTabExpanded()) {\n\n              this.expander.expandCollapseEdit(true);\n              this.expander.openCollapseEdit(true);\n            }\n          } else if (!this.expander.isEditTabOpen() && this.expander.isEpigraphyTabOpen()) {\n            if (!this.expander.isEditTabExpanded() && this.expander.isEpigraphyTabExpanded()) {\n              this.expander.expandCollapseEpigraphy(false);\n              this.expander.openCollapseEdit(true)\n            }\n          }\n\n          if (data.note != undefined) {\n            if (data.note != \"\") {\n              this.lexicalService.triggerNotePanel(true);\n            } else {\n              this.lexicalService.triggerNotePanel(false);\n            }\n          }\n        },\n        error => {\n          //console.log(error)\n        }\n      )\n    } else if ($event.eventName == 'activate'\n      && $event.node.data.etymology != undefined\n      && $event.node.data.etymology != this.selectedNodeId) {\n\n      let etymologyId = $event.node.data.etymology;\n\n      this.lexicalService.getEtymologyData(etymologyId).pipe(takeUntil(this.destroy$)).subscribe(\n        data => {\n          this.selectedNodeId = $event.node.data.etymology;\n          data['parentNodeLabel'] = $event.node.parent.parent.data.label;\n          data['parentNodeInstanceName'] = $event.node.parent.parent.data.lexicalEntry;\n          console.log(data)\n          data['type'] = $event.node.parent.parent.data.type;\n          // this.lexicalService.sendToAttestationPanel(null);\n          // this.lexicalService.triggerAttestationPanel(false);\n\n          //this.lexicalService.sendToCoreTab(null);\n          this.lexicalService.sendToEtymologyTab(data);\n          this.lexicalService.sendToRightTab(data);\n          this.lexicalService.updateCoreCard({ lastUpdate: data['etymology']['lastUpdate'], creationDate: data['etymology']['creationDate'] })\n          //@ts-ignore\n          $(\"#etymologyTabModal\").modal(\"show\");\n          $('.modal-backdrop').appendTo('.etym-tab-body');\n          //@ts-ignore\n          $('#etymologyTabModal').modal({ backdrop: 'static', keyboard: false })\n          $('body').removeClass(\"modal-open\")\n          $('body').css(\"padding-right\", \"\");\n\n          if (!this.expander.isEditTabOpen() && !this.expander.isEpigraphyTabOpen()) {\n            if (!this.expander.isEditTabExpanded() && !this.expander.isEpigraphyTabExpanded()) {\n\n              this.expander.expandCollapseEdit(true);\n              this.expander.openCollapseEdit(true);\n            }\n          } else if (!this.expander.isEditTabOpen() && this.expander.isEpigraphyTabOpen()) {\n            if (!this.expander.isEditTabExpanded() && this.expander.isEpigraphyTabExpanded()) {\n              this.expander.expandCollapseEpigraphy(false);\n              this.expander.openCollapseEdit(true)\n            }\n          }\n\n          if (data.note != undefined) {\n            if (data.note != \"\") {\n              this.lexicalService.triggerNotePanel(true);\n            } else {\n              this.lexicalService.triggerNotePanel(false);\n            }\n          }\n        },\n        error => {\n          console.log(error)\n        }\n      )\n    } else if ($event.eventName == 'activate'\n      && $event.node.data.component != undefined\n      && $event.node.data.componentInstanceName != this.selectedNodeId) {\n\n      let compId = $event.node.data.componentInstanceName;\n      let parentInstanceLabel = $event.node.parent.parent.data.label;\n      let parentInstanceName = $event.node.parent.parent.data.lexicalEntry;\n\n      this.lexicalService.getLexEntryData(parentInstanceName).pipe(takeUntil(this.destroy$)).subscribe(\n        data => {\n          this.selectedNodeId = $event.node.data.parentNodeInstanceName;\n\n          console.log(data)\n          //this.lexicalService.sendToCoreTab(data);\n          //this.lexicalService.sendToEtymologyTab(data);\n          //this.lexicalService.sendToDecompTab(data);\n          this.lexicalService.sendToRightTab(data);\n          // this.lexicalService.sendToAttestationPanel(null);\n          // this.lexicalService.triggerAttestationPanel(false);\n          this.lexicalService.updateCoreCard({ lastUpdate: data['lastUpdate'], creationDate: data['creationDate'] })\n          //@ts-ignore\n          $(\"#etymologyTabModal\").modal(\"show\");\n          $('.modal-backdrop').appendTo('.etym-tab-body');\n          //@ts-ignore\n          $('#etymologyTabModal').modal({ backdrop: 'static', keyboard: false })\n          $('body').removeClass(\"modal-open\")\n          $('body').css(\"padding-right\", \"\");\n\n          if (!this.expander.isEditTabOpen() && !this.expander.isEpigraphyTabOpen()) {\n            if (!this.expander.isEditTabExpanded() && !this.expander.isEpigraphyTabExpanded()) {\n\n              this.expander.expandCollapseEdit(true);\n              this.expander.openCollapseEdit(true);\n            }\n          } else if (!this.expander.isEditTabOpen() && this.expander.isEpigraphyTabOpen()) {\n            if (!this.expander.isEditTabExpanded() && this.expander.isEpigraphyTabExpanded()) {\n              this.expander.expandCollapseEpigraphy(false);\n              this.expander.openCollapseEdit(true)\n            }\n          }\n\n          if (data.note != undefined) {\n            if (data.note != \"\") {\n              this.lexicalService.triggerNotePanel(true);\n            } else {\n              this.lexicalService.triggerNotePanel(false);\n            }\n          }\n        },\n        error => {\n          console.log(error)\n        }\n      )\n    }\n\n  };\n\n  onKey = ($event: any) => {\n    var that = this;\n    setTimeout(function () {\n      var results = document.body.querySelectorAll('tree-node-collection > div')[1].children.length;\n      if (results == 0) {\n        that.show = true;\n      } else {\n        that.show = false;\n      }\n    }, 5);\n  };\n\n  async onScrollDown(treeModel: TreeModel) {\n\n    this.offset += 500;\n    this.modalShow = true;\n\n    //@ts-ignore\n    $(\"#lazyLoadingModal\").modal(\"show\");\n    $('.modal-backdrop').appendTo('.tree-view');\n    $('body').removeClass(\"modal-open\")\n    $('body').css(\"padding-right\", \"\");\n\n    let parameters = this.filterForm.value;\n    parameters['offset'] = this.offset;\n    parameters['limit'] = this.limit;\n\n    try {\n      let get_entry_list = await this.lexicalService.getLexicalEntriesList(parameters).toPromise();\n      //@ts-ignore\n      $('#lazyLoadingModal').modal('hide');\n      $('.modal-backdrop').remove();\n      for (var i = 0; i < get_entry_list['list'].length; i++) {\n        this.nodes.push(get_entry_list['list'][i]);\n      };\n      //this.counter = this.nodes.length;\n      this.lexicalEntryTree.treeModel.update();\n      this.updateTreeView();\n      this.modalShow = false;\n\n      setTimeout(() => {\n        //@ts-ignore\n        $('#lazyLoadingModal').modal('hide');\n        $('.modal-backdrop').remove();\n      }, 300);\n    } catch (error) {\n      console.log(error)\n      \n    }\n  }\n\n  async getChildren(node: any) {\n    let newNodes: any;\n    if (node.data.lexicalEntry != undefined) {\n\n      try {\n        let instance = node.data.lexicalEntry;\n        let data = await this.lexicalService.getLexEntryElements(instance).toPromise();\n        console.log(data['elements'])\n        data[\"elements\"] = data[\"elements\"].filter(function (obj) {\n          return obj.count != 0 && (obj.label != 'lexicalConcept' && obj.label != 'concept');\n        })\n        newNodes = data[\"elements\"].map((c) => Object.assign({}, c));\n\n        if (Object.keys(newNodes).length > 0) {\n\n          for (const element of newNodes) {\n\n            if (element.label == 'form') {\n              let form_data = await this.lexicalService.getLexEntryForms(instance).toPromise();\n              element.isExpanded = true;\n              element.children = [];\n\n              form_data.forEach(form => {\n                element.children.push(form);\n              });\n            } else if (element.label == 'sense') {\n              let sense_data = await this.lexicalService.getSensesList(instance).toPromise();\n              element.isExpanded = true;\n              element.children = [];\n              sense_data.forEach(sense => {\n                element.children.push(sense);\n              });\n            } else if (element.label == 'etymology') {\n              let etymology_data = await this.lexicalService.getEtymologies(instance).toPromise();\n              element.isExpanded = true;\n              element.children = [];\n              etymology_data.forEach(etym => {\n                element.children.push(etym);\n              });\n            } else if (element.label == 'subterm') {\n              let subterm_data = await this.lexicalService.getSubTerms(instance).toPromise();\n              element.isExpanded = true;\n              element.children = [];\n              subterm_data.forEach(subterm => {\n                subterm.hasChildren = false;\n                element.children.push(subterm);\n              });\n            }\n\n          }\n          return newNodes;\n        } else {\n          this.toastr.info('No childs for this node', 'Info', { timeOut: 5000 });\n          return newNodes;\n        }\n        \n      } catch (error) {\n        console.log(error)\n        if(error.status != 200){\n          this.toastr.error(\"Something went wrong, please check the log\", \"Error\", {timeOut: 5000})\n        }\n      }\n      \n\n\n    }\n\n  }\n\n\n  /* To copy any Text */\n  copyText(val: object) {\n    console.log(val)\n\n    let value = '';\n    if (val['lexicalEntry'] != undefined && val['sense'] == undefined && val['etymology'] == undefined && val['form'] == undefined) {\n      value = val['lexicalEntry']\n    } else if (val['form'] != undefined) {\n      value = val['form']\n    } else if (val['sense'] != undefined) {\n      value = val['sense']\n    } else if (val['etymology'] != undefined) {\n      value = val['etymology']\n    }\n    this.copySubject.next(value);\n  }\n\n  ngOnDestroy(): void {\n    this.delete_req_subscription.unsubscribe();\n    this.add_sub_subscription.unsubscribe();\n    this.copy_subject_subscription.unsubscribe();\n    this.refresh_filter_subscription.unsubscribe();\n    this.get_lex_entry_list_subscription.unsubscribe();\n    this.get_languages_subscription.unsubscribe();\n    this.get_types_subscription.unsubscribe();\n    this.get_authors_subscription.unsubscribe();\n    this.get_pos_subscription.unsubscribe();\n    this.get_status_subscription.unsubscribe();\n\n    this.destroy$.next(true);\n    this.destroy$.complete();\n  }\n}","\n\n<form [formGroup]=\"filterForm\">\n    <div class=\"input-group col-md-12 mt-1 p-0\">\n        <input formControlName=\"text\" id=\"filterLexicalEntry\" name=\"text\" type=\"text\" class=\"form-control\"\n            placeholder=\"Search\" [value]=\"filterForm.get('text').value\"/>\n        <div class=\"input-group-append\">\n            <span class=\"input-group-text loading_icon_append\" id=\"basic-addon2\">\n                <div class=\"spinner-border spinner-border-sm m-1\" role=\"status\" *ngIf=\"searchIconSpinner\">\n                    <span class=\"sr-only\">Loading...</span>\n                </div>\n            </span>\n        </div>\n        <div id=\"buttons-container\" class=\"input-group-append\">\n            <button class=\"btn  btn-sm btn-info btn-block filter-button\" type=\"button\" data-toggle=\"popover\"\n                data-placement=\"bottom\" data-trigger=\"hover\"><i class=\"fa fa-question\"></i></button>\n            <button  class=\"btn btn-sm btn-secondary btn-block filter-button\" type=\"button\" value=\"Filter\" title=\"Filter\"\n                container=\"body\" placement=\"bottom\" ngbTooltip=\"Show lexical entries filter\" data-toggle=\"collapse\" data-target=\"#filterCollapse\" aria-expanded=\"false\"\n                aria-controls=\"filterCollapse\"><i class=\"fa fa-filter\"></i></button>\n            <button container=\"body\" placement=\"right\" ngbTooltip=\"Reset form fields\" class=\"btn btn-sm btn-danger btn-block reset-button\" type=\"button\" value=\"Reset\" title=\"Reset\"\n                (click)=\"resetFields();\" style=\"border-top-right-radius: .25rem; border-bottom-right-radius: .25rem;\"><i\n                    class=\"fa fa-times\"></i></button>\n            <button class=\"btn btn-block counter-button\" type=\"button\"><span\n                    class=\"font-weight-bold font-italic text-muted\">{{counter}}</span></button>\n        </div>\n    </div>\n\n\n    <div class=\"d-flex flex-wrap mt-3\">\n        <div class=\"col-md-6 col-sm-3\">\n            <div class=\"form-check\">\n                <input formControlName=\"searchMode\" class=\"form-check-input\" type=\"radio\" name=\"searchMode\"\n                    id=\"equalsRadio\" value=\"equals\">\n                <label class=\"form-check-label\" for=\"equalsRadio\">\n                    Equals\n                </label>\n            </div>\n        </div>\n        <div class=\"col-md-6 col-sm-3\">\n            <div class=\"form-check\">\n                <input formControlName=\"searchMode\" class=\"form-check-input\" type=\"radio\" name=\"searchMode\"\n                    id=\"startRadio\" value=\"startsWith\">\n                <label class=\"form-check-label\" for=\"startRadio\">\n                    Starts\n                </label>\n            </div>\n        </div>\n        <div class=\"col-md-6 col-sm-3\">\n            <div class=\"form-check\">\n                <input formControlName=\"searchMode\" class=\"form-check-input\" type=\"radio\" name=\"searchMode\"\n                    id=\"containsRadio\" value=\"contains\">\n                <label class=\"form-check-label\" for=\"containsRadio\">\n                    Contains\n                </label>\n            </div>\n        </div>\n        <div class=\"col-md-6 col-sm-3\">\n            <div class=\"form-check\">\n                <input formControlName=\"searchMode\" class=\"form-check-input\" type=\"radio\" name=\"searchMode\"\n                    id=\"endRadio\" value=\"end\">\n                <label class=\"form-check-label\" for=\"endRadio\">\n                    Ends\n                </label>\n            </div>\n        </div>\n    </div>\n\n    <div class=\"collapse multi-collapse\" id=\"filterCollapse\">\n        <div class=\"d-flex flex-wrap mt-3\">\n            <div class=\"col-md-6 col-sm-12\">\n                <select formControlName=\"type\" class=\"form-control\" id=\"type\" name=\"type\">\n                    <option value=\"\">Type</option>\n                    <option *ngFor=\"let type of types\" [value]=\"type.label\">{{type.label}} - {{type.count}}</option>\n                </select>\n            </div>\n            <div class=\"col-md-6 col-sm-12\">\n                <div class=\"d-md-none mt-3\"></div>\n                <select formControlName=\"pos\" class=\"form-control\" id=\"pos\" name=\"pos\">\n                    <option value=\"\">Pos</option>\n                    <option *ngFor=\"let ps of partOfSpeech\" [value]=\"ps.label\">{{ps.label}} - {{ps.count}} </option>\n                </select>\n            </div>\n        </div>\n\n        <div class=\"d-flex flex-wrap mt-3\">\n            <div class=\"col-md-6 col-sm-12\">\n                <div class=\"d-md-none mt-3\"></div>\n                <select formControlName=\"formType\" class=\"form-control\" id=\"formType\" name=\"formType\">\n                    <option value=\"entry\">Entry</option>\n                    <option value=\"flexed\">Flexed</option>\n                </select>\n            </div>\n            <div class=\"col-md-6 col-sm-12\">\n                <div class=\"d-md-none mt-3\"></div>\n                <select formControlName=\"author\" class=\"form-control\" id=\"author\" name=\"author\">\n                    <option value=\"\">Author</option>\n                    <option *ngFor=\"let auth of authors\" [value]=\"auth.label\">{{auth.label}} - {{auth.count}}</option>\n                </select>\n            </div>\n        </div>\n        <div class=\"d-flex flex-wrap mt-3\">\n            <div class=\"col-md-6 col-sm-12\">\n                <div class=\"d-md-none mt-3\"></div>\n                <select formControlName=\"lang\" class=\"form-control\" id=\"lang\" name=\"lang\">\n                    <option value=\"\">Language</option>\n                    <option *ngFor=\"let lang of languages\" [value]=\"lang.label\">{{lang.label}} - {{lang.count}}\n                    </option>\n                </select>\n            </div>\n            <div class=\"col-md-6 col-sm-12\">\n                <div class=\"d-md-none mt-3\"></div>\n                <select formControlName=\"status\" class=\"form-control\" id=\"status\" name=\"status\">\n                    <option value=\"\">Status</option>\n                    <option value=\"working\">working</option>\n                    <option value=\"completed\">completed</option>\n                    <option value=\"reviewed\">reviewed</option>\n                </select>\n            </div>\n        </div>\n    </div>\n</form>\n\n\n<!-- INFINITE SCROLL AND TREE VIEW -->\n<div class=\"col-md-12 mt-3 rounded border border-secondary tree-view\" infiniteScroll [infiniteScrollDistance]=\"0.4\"\n    [infiniteScrollThrottle]=\"150\" [infiniteScrollContainer]=\"'.search-results'\" [fromRoot]=\"true\"\n    (scrolled)=\"onScrollDown(lexicalEntry.treeModel)\" style=\"height: calc(100vh - 21rem); overflow-x: auto;\">\n\n    <div id=\"lazyLoadingModal\" class=\"modal fade\" role=\"dialog\">\n        <div class=\"modal-dialog\">\n\n            <!-- Modal content-->\n            <div class=\"modal-content\">\n                <div class=\"modal-body\">\n                    <div class=\"d-flex justify-content-center\">\n                        <div class=\"spinner-border\" role=\"status\">\n                            <span class=\"sr-only\">Loading...</span>\n                        </div>\n                    </div>\n                </div>\n            </div>\n\n        </div>\n    </div>\n\n    <p class=\"mx-3\" *ngIf=\"show\">Nessun risultato</p>\n    <tree-root #lexicalEntry [(state)]=\"state\" [nodes]=\"nodes\" [options]=\"options\" [focused]=\"true\"\n        (activate)=\"onEvent($event)\" (deactivate)=\"onEvent($event)\" class=\"lexicalEntryTree\">\n        \n        <ng-template #treeNodeWrapperTemplate let-node let-index=\"index\">\n            <div class=\"node-wrapper\"  style=\"justify-content: space-between; padding: 0px 15px;\" > <!-- [style.padding-left]=\"node.getNodePadding()\" -->\n                <div>\n                    <tree-node-expander [node]=\"node\" *ngIf=\"node.data.hasChildren == true\"></tree-node-expander>\n                    <div class=\"node-content-wrapper\" [class.node-content-wrapper-active]=\"node.isActive\"\n                        [class.node-content-wrapper-focused]=\"node.isFocused\" (click)=\"node.mouseAction('click', $event)\"\n                        (dblclick)=\"node.mouseAction('dblClick', $event)\" [contextMenu]=\"basicMenu\" [contextMenuSubject]=\"node.data\">\n    \n                        <span\n                            *ngIf=\"node.data.count == undefined && labelView && node.data.component == undefined && node.data.etymology == undefined && node.data.definition == undefined && node.data.type!='canonicalForm' && node.data.sense == undefined\">{{\n                            node.data.label}} </span>\n                        <span\n                            *ngIf=\"node.data.count == undefined && idView && node.data.definition == undefined && node.data.form == undefined && node.data.type!='canonicalForm' && node.data.sense == undefined && node.data.etymology == undefined\">{{\n                            node.data.lexicalEntry }} </span>\n    \n                        <span\n                            *ngIf=\"node.data.count == undefined && labelView && node.data.definition == undefined && node.data.type=='canonicalForm' && node.data.sense == undefined\"><b>{{\n                                node.data.label }}</b></span>\n                        <span\n                            *ngIf=\"node.data.count == undefined && idView && node.data.definition == undefined && node.data.type=='canonicalForm' && node.data.sense == undefined\"><b>{{\n                                node.data.form }}</b></span>\n                        <span\n                            *ngIf=\"node.data.count == undefined && idView && node.data.definition == undefined && node.data.type!='canonicalForm' && node.data.sense == undefined\">{{\n                            node.data.form }}</span>\n\n                        <!-- <span *ngIf=\"node.data.count == undefined && idView && node.data.definition != undefined\">\n                            {{ node.data.sense }}</span> -->\n\n                       \n\n                        <span *ngIf=\"node.data.count == undefined && idView && node.data.etymology != undefined\">{{\n                            node.data.etymology }}</span>\n\n                        <span *ngIf=\"node.data.count == undefined && labelView && node.data.etymology != undefined\">{{\n                            node.data.label }}</span>\n\n                        <span *ngIf=\"node.data.count == undefined && labelView && node.data.component != undefined && node.data.label == ''\">\n                           Anonimous component</span>\n\n                        <span *ngIf=\"node.data.count == undefined && labelView && node.data.component != undefined && node.data.label != ''\">\n                            {{node.data.label}}</span>\n                        \n                        <span *ngIf=\"node.data.count == undefined && idView && node.data.component != undefined\">\n                            {{node.data.component}}</span>\n    \n                        <span class=\"lexical-tooltip\"\n                            *ngIf=\"node.data.count == undefined && labelView && node.data.definition != undefined\"\n                             placement=\"top\" [ngbTooltip]=\"node.data.definition\">\n                                {{node.data.definition == '' ? node.data.label : ''}}\n                                {{node.data.definition.length > 10 ? (node.data.definition | slice:0:10) +'...' : node.data.definition}}\n                            </span>\n                        <span class=\"lexical-tooltip\"\n                            *ngIf=\"node.data.count == undefined && idView && node.data.definition != undefined\"\n                             placement=\"top\" [ngbTooltip]=\"node.data.definition\">{{ node.data.sense\n                            }}</span>\n    \n                        <span *ngIf=\"node.data.count != undefined\"><i><span\n                                    style=\"color: #6e6e6e\">{{node.data.label}}</span></i>&nbsp;({{ node.data.count\n                            }})</span>\n                        <span *ngIf=\"node.data.writtenRep != ''\">{{ node.data.writtenRep }}</span>\n                        <sub *ngIf=\"labelView && node.data.sense == undefined\">{{node.data.pos}}</sub>\n                        <span *ngIf=\"node.data.language != null && labelView\" class=\"lang\">@{{node.data.language}}</span>\n                        \n                    </div>\n                   \n                    \n                </div>\n                \n                <div class=\"icons-container\">\n                    <div style=\"width: 30%;\">\n                        <i *ngIf=\"node.data.note != '' && node.data.note != null\"\n                            class=\"far fa-comment-dots note-tooltip note_{{node.data.id}}\" data-toggle=\"tooltip\"\n                            data-html=\"true\" [title]=\"node.data.note\"></i>\n                    </div>\n                    <div style=\"width: 30%;\">\n                        <i *ngIf=\"node.data.lexicalEntry != undefined && !flagAuthor && node.data.status == 'working'\"\n                            class=\"fas fa-user lexical-tooltip\" data-toggle=\"tooltip\" data-html=\"true\"\n                            [title]=\"node.data.creator\"></i>\n\n                        <i *ngIf=\"node.data.lexicalEntry != undefined && !flagAuthor && node.data.status == 'completed'\"\n                            class=\"fas fa-user lexical-tooltip\" data-toggle=\"tooltip\" data-html=\"true\"\n                            [title]=\"node.data.author\"></i>\n\n                        <i *ngIf=\"node.data.lexicalEntry != undefined && !flagAuthor && node.data.status == 'reviewed'\"\n                            class=\"fas fa-user lexical-tooltip\" data-toggle=\"tooltip\" data-html=\"true\"\n                            [title]=\"node.data.revisor\"></i>\n\n                        <i *ngIf=\"node.data.form != undefined && node.data.flagAuthor\"\n                            class=\"fas fa-user lexical-tooltip\" data-toggle=\"tooltip\" data-html=\"true\"\n                            [title]=\"node.data.creator\"></i>\n                        <i *ngIf=\"node.data.sense != undefined && node.data.flagAuthor\"\n                            class=\"fas fa-user lexical-tooltip\" data-toggle=\"tooltip\" data-html=\"true\"\n                            [title]=\"node.data.creator\"></i>\n                            <i *ngIf=\"node.data.etymology != undefined && node.data.flagAuthor\"\n                            class=\"fas fa-user lexical-tooltip\" data-toggle=\"tooltip\" data-html=\"true\"\n                            [title]=\"node.data.creator\"></i>\n                    </div>\n                    <div style=\"width: 30%;\">\n                        <i *ngIf=\"node.data.status != undefined && node.data.status == 'working'\" class=\"fa fa-circle\"\n                            style=\"color:red;\"></i>\n                        <i *ngIf=\"node.data.status != undefined && node.data.status == 'completed'\" class=\"fa fa-circle\"\n                            style=\"color:yellow;\"></i>\n                        <i *ngIf=\"node.data.status != undefined && node.data.status == 'reviewed'\"\n                            class=\"fa fa-circle lexical-tooltip\" style=\"color: green;\" data-toggle=\"tooltip\"\n                            data-html=\"true\" [title]=\"node.data.revisor\"></i>\n                    </div>\n\n                </div>\n            </div>\n        </ng-template>\n        <context-menu>\n\n            <!-- FOLDER CONTEXT MENU -->\n            <ng-template contextMenuItem let-item (execute)=\"copyText($event.item)\">\n              Copy URI\n            </ng-template>\n        </context-menu>\n        <ng-template #loadingTemplate let-loadingNode>\n            <div *ngIf=\"loadingNode.hasChildren\">\n                <div class=\"spinner-border spinner-border-sm m-1\" role=\"status\">\n                    <span class=\"sr-only\">Loading...</span>\n                </div>\n            </div>\n        </ng-template>\n    </tree-root>\n\n    \n</div>","/*\n   Copyright 2021-2022  Istituto di Linguistica Computazionale \"A. Zampolli\", Consiglio Nazionale delle Ricerche, Pisa, Italy.\n \nThis file is part of EpiLexo.\n\nEpiLexo is free software: you can redistribute it and/or modify it under the terms of the GNU General Public License as published by the Free Software Foundation, either version 3 of the License, or (at your option) any later version.\n\nEpiLexo is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for more details.\n\nYou should have received a copy of the GNU General Public License along with EpiLexo. If not, see <https://www.gnu.org/licenses/>.\n*/\n\nimport { Component, Input, OnDestroy, OnInit, Renderer2, ViewChild } from '@angular/core';\nimport { FormBuilder, FormControl, FormGroup, Validators } from '@angular/forms';\nimport { NgbModal } from '@ng-bootstrap/ng-bootstrap';\nimport { NgSelectComponent } from '@ng-select/ng-select';\nimport { data } from 'jquery';\nimport { ToastrService } from 'ngx-toastr';\nimport { Subject, Subscription } from 'rxjs';\nimport { debounceTime, takeUntil } from 'rxjs/operators';\nimport { AnnotatorService } from 'src/app/services/annotator/annotator.service';\nimport { AuthService } from 'src/app/services/auth/auth.service';\nimport { DocumentSystemService } from 'src/app/services/document-system/document-system.service';\nimport { ExpanderService } from 'src/app/services/expander/expander.service';\nimport { LexicalEntriesService } from 'src/app/services/lexical-entries/lexical-entries.service';\n\n@Component({\n  selector: 'app-search-form',\n  templateUrl: './search-form.component.html',\n  styleUrls: ['./search-form.component.scss']\n})\nexport class SearchFormComponent implements OnInit, OnDestroy {\n  private search_subject: Subject<any> = new Subject();\n  private search_lex_entries_subject: Subject<any> = new Subject();\n  searchResults: any[];\n  lex_searchResuts: any[];\n  languages = [];\n  morphologyData = [];\n  lexEntryTypesData: any;\n  typesData: any;\n  addTagFormText: any;\n  creator: any;\n\n\n  search_subscription: Subscription;\n  get_languages_subscription: Subscription;\n  get_morphology_subscription: Subscription;\n  get_lex_entry_type_subscription: Subscription;\n  get_form_type_subscription: Subscription;\n\n  constructor(private formBuilder: FormBuilder, \n              private modalService: NgbModal, \n              private toastr: ToastrService, \n              private annotatorService: AnnotatorService, \n              private lexicalService: LexicalEntriesService, \n              private expander: ExpanderService, \n              private renderer: Renderer2, \n              private auth: AuthService,\n              private documentService : DocumentSystemService) { }\n\n  @Input() bind;\n  @ViewChild('addFormModal') addFormModal: any;\n  @ViewChild('select_form') select_form: NgSelectComponent;\n  @ViewChild('search_lexicalEntry') search_lexicalEntry: NgSelectComponent;\n  loader = false;\n  modalStep = 0;\n\n  stepOneForm = new FormGroup({\n    existOrNot: new FormControl('', Validators.required),\n  })\n\n  stepTwoForm = new FormGroup({\n    lexicalEntry: new FormControl('', Validators.required)\n  })\n\n  stepThreeForm = new FormGroup({\n    label: new FormControl('', Validators.required),\n    type: new FormControl('', Validators.required),\n    language: new FormControl('', Validators.required),\n    pos: new FormControl('', Validators.required),\n  });\n\n  stepFourForm = new FormGroup({\n    writtenForm: new FormControl('', Validators.required),\n    type: new FormControl('', Validators.required),\n  });\n\n  statusForm = new FormGroup({\n    lexicalEntryCreation: new FormControl(''),\n    attachingLanguage: new FormControl(''),\n    attachingType: new FormControl(''),\n    attachingLabel: new FormControl(''),\n    attachingPos: new FormControl(''),\n    creatingForm: new FormControl(''),\n    attachingWrittenForm: new FormControl(''),\n    attachingFormType: new FormControl(''),\n    finish: new FormControl(''),\n    error: new FormControl(null)\n  })\n\n  destroy$: Subject<boolean> = new Subject();\n\n  ngOnInit(): void {\n    setTimeout(() => {\n      //console.log(this.select_form);\n    }, 1000);\n\n    if (this.auth.getLoggedUser()['preferred_username'] != undefined) {\n      this.creator = this.auth.getLoggedUser()['preferred_username'];\n    }\n\n    this.search_lex_entries_subject.pipe(debounceTime(1000)).subscribe(\n      data => {\n        this.onSearchLexicalEntriesFilter(data)\n      }\n    )\n\n    this.search_subject.pipe(debounceTime(1000), takeUntil(this.destroy$)).subscribe(\n      data => {\n        this.onSearchFilter(data)\n      }\n    )\n\n    this.get_languages_subscription = this.lexicalService.getLexiconLanguages().subscribe(\n      data => {\n        this.languages = [];\n        for (var i = 0; i < data.length; i++) {\n          this.languages[i] = data[i]\n        }\n      }\n    );\n\n    this.get_morphology_subscription = this.lexicalService.getMorphologyData().subscribe(\n      data => {\n        /* this.morphologyData = data; */\n\n        let morphoData = data;\n\n        this.morphologyData = morphoData.filter((x : any) => {\n          if (x.propertyId == 'http://www.lexinfo.net/ontology/3.0/lexinfo#partOfSpeech') {\n            return true;\n          } else {\n            return false;\n          }\n        })\n\n        this.morphologyData = this.morphologyData[0]['propertyValues'];\n      }\n    )\n\n    this.get_lex_entry_type_subscription = this.lexicalService.getLexEntryTypes().subscribe(\n      data => {\n        //console.log(data)\n        this.lexEntryTypesData = data;\n\n      }\n    )\n\n    this.get_form_type_subscription = this.lexicalService.getFormTypes().subscribe(\n      data => {\n        this.typesData = data;\n        //console.log(this.typesData)\n      },\n      error => {\n        //console.log(error)\n      }\n    )\n\n    this.annotatorService.triggerSearch$.subscribe(\n      request => {\n        console.log(request);\n        if (request != null) {\n          this.bindSelection(request);\n        }\n      }, error => {\n\n      }\n    ).unsubscribe();\n\n\n    this.stepOneForm = this.formBuilder.group({\n      existOrNot: ['', Validators.required]\n    })\n\n    this.stepTwoForm = this.formBuilder.group({\n      lexicalEntry: ['', Validators.required]\n    })\n\n    this.stepThreeForm = this.formBuilder.group({\n      label: ['', Validators.required],\n      type: ['', Validators.required],\n      language: ['', Validators.required],\n      pos: ['', Validators.required],\n    });\n\n    this.stepFourForm = this.formBuilder.group({\n      writtenForm: ['', Validators.required],\n      type: ['', Validators.required]\n    });\n\n    this.statusForm = this.formBuilder.group({\n      lexicalEntryCreation: ['pause'],\n      attachingLanguage: ['pause'],\n      attachingType: ['pause'],\n      attachingLabel: ['pause'],\n      attachingPos: ['pause'],\n      creatingForm: ['pause'],\n      attachingWrittenForm: ['pause'],\n      attachingFormType: ['pause'],\n      finish: ['pause'],\n      error: [null]\n    })\n  }\n\n\n  triggerSearch(evt) {\n    //console.log(evt)\n    if (evt.target != undefined && evt.key != 'Control') {\n\n      this.search_subject.next(evt.target.value)\n    }\n  }\n\n  triggerSearchLexicalEntries(evt) {\n    if (evt.target != undefined && evt.key != 'Control') {\n\n      this.search_lex_entries_subject.next(evt.target.value)\n    }\n  }\n\n  async onSearchFilter(data) {\n    this.searchResults = [];\n    /* console.log(data) */\n    let parameters = {\n      text: data,\n      searchMode: \"startsWith\",\n      representationType: \"writtenRep\",\n      author: \"\",\n      offset: 0,\n      limit: 500\n    }\n    console.log(parameters)\n    if (data != undefined) { /* && data.length >= 3 */\n\n      try {\n        let form_list = await this.lexicalService.getFormList(parameters).toPromise();\n        this.searchResults = form_list['list'];\n        this.loader = false;\n\n      } catch (error) {\n        console.log(error)\n        this.loader = false;\n      }\n    }\n\n  }\n\n  async onSearchLexicalEntriesFilter(data) {\n    this.searchResults = [];\n    /* console.log(data) */\n    let parameters = {\n      text: data,\n      searchMode: \"startsWith\",\n      type: \"\",\n      pos: \"\",\n      formType: \"entry\",\n      author: \"\",\n      lang: \"\",\n      status: \"\",\n      offset: 0,\n      limit: 500\n    }\n\n    console.log(parameters)\n    if (data != \"\") { /* && data.length >= 3 */\n\n      try {\n        let lex_list = await this.lexicalService.getLexicalEntriesList(parameters).toPromise();\n        this.lex_searchResuts = lex_list['list'];\n        this.loader = false;\n      } catch (error) {\n        console.log(error)\n      }\n\n    }\n\n  }\n\n  clearAll() {\n    this.select_form.handleClearClick();\n  }\n\n  clearAllLexicalEntries() {\n    this.search_lexicalEntry.handleClearClick();\n  }\n\n  bindSelection(req) {\n    this.loader = true;\n    setTimeout(() => {\n      this.select_form.filter(req);\n      this.onSearchFilter(req)\n    }, 100);\n\n  }\n\n\n\n\n  handleForm(ngSelect, $event) {\n\n    if (ngSelect instanceof NgSelectComponent) {\n      if (ngSelect.selectedItems.length > 0) {\n        /* console.log(ngSelect.selectedItems[0]) */\n        let label;\n        if (ngSelect.selectedItems[0]['value']['form'] != undefined) {\n          label = ngSelect.selectedItems[0]['value']['form'];\n        } else {\n          label = ngSelect.selectedItems[0].label;\n        }\n        this.onChangeForm(ngSelect.selectedItems[0]['value'])\n      }\n    } /* else {\n        let label = evt.target.value;\n        this.form_subject.next({ name: label})\n    } */\n  }\n\n\n  async onChangeForm(data) {\n\n    //TODO: aggiungere leiden\n\n    let parameters = {}\n    let idPopover = this.bind.selectedPopover.tokenId;\n    let tokenData = this.bind.object[idPopover];\n    let element_id = this.bind.epiData.element_id;\n    let textSelection = this.bind.message;\n    let selectionSpan = this.bind.spanSelection;\n    let formValue = data.form;\n\n\n    let xmlNode = this.bind.epiData.xmlDoc.querySelectorAll('[*|id=\\'' + tokenData.xmlid + '\\']')[0].outerHTML;\n    let object = {\n      xmlString: xmlNode\n    }\n    let leidenToken = '';\n    try {\n      let convert_to_leiden = await this.documentService.testConvertItAnt(object).toPromise();\n      console.log(convert_to_leiden);\n      let raw = convert_to_leiden['xml'];\n      let bodyResponse = new DOMParser().parseFromString(raw, \"text/html\").body;\n      \n      bodyResponse.childNodes.forEach(\n        x => {\n          if (x.nodeName != undefined) {\n            if (x.nodeName == '#text') {\n              leidenToken += x.nodeValue.replace('\\n', '');\n            }\n          }\n        }\n      )\n    } catch (error) {\n\n    }\n\n\n\n    if (this.creator == undefined) {\n      this.creator = '';\n    }\n\n    console.log(selectionSpan)\n    console.log(textSelection)\n    if (textSelection != '' && textSelection != undefined) {\n      //console.log(111)\n      parameters[\"value\"] = formValue;\n      parameters[\"layer\"] = \"attestation\";\n      parameters[\"attributes\"] = {\n        author: this.creator,\n        creator: this.creator,\n        note: \"\",\n        confidence: 1,\n        timestamp: new Date().getTime().toString(),\n        bibliography: [],\n        validity: \"\",\n        externalRef: \"\",\n        leiden : leidenToken,\n        node_id: tokenData.id,\n        label: data.label,\n        lexicalEntry: data.lexicalEntry\n      };\n      parameters[\"spans\"] = [\n        {\n          start: selectionSpan.start.toString(),\n          end: selectionSpan.end.toString()\n        }\n      ];\n      parameters[\"id\"] = tokenData.node;\n    } else if (textSelection == '' && !Array.isArray(selectionSpan) && !this.bind.isEmptyFile) {\n      parameters[\"value\"] = formValue;\n      parameters[\"layer\"] = \"attestation\";\n      parameters[\"attributes\"] = {\n        author: this.creator,\n        creator: this.creator,\n        note: \"\",\n        confidence: 1,\n        timestamp: new Date().getTime().toString(),\n        bibliography: [],\n        leiden : leidenToken,\n        validity: \"\",\n        externalRef: \"\",\n        node_id: tokenData.id,\n        label: data.label,\n        lexicalEntry: data.lexicalEntry\n      };\n      parameters[\"spans\"] = [\n        {\n          start: tokenData.begin.toString(),\n          end: tokenData.end.toString()\n        }\n      ];\n      parameters[\"id\"] = tokenData.node;\n    } else if (Array.isArray(selectionSpan)) { //MULTIWORD\n      parameters[\"value\"] = formValue;\n      parameters[\"layer\"] = \"attestation\";\n      parameters[\"attributes\"] = {\n        author: this.creator,\n        creator: this.creator,\n        note: \"\",\n        confidence: 1,\n        timestamp: new Date().getTime().toString(),\n        bibliography: [],\n        validity: \"\",\n        externalRef: \"\",\n        leiden : leidenToken,\n        node_id: tokenData.id,\n        label: data.label,\n        lexicalEntry: data.lexicalEntry\n      };\n      parameters[\"spans\"] = selectionSpan\n      parameters[\"id\"] = tokenData.node;\n    } else if (this.bind.isEmptyFile) {\n      parameters[\"value\"] = formValue;\n      parameters[\"layer\"] = \"attestation\";\n      parameters[\"attributes\"] = {\n        author: this.creator,\n        creator: this.creator,\n        note: \"\",\n        confidence: 1,\n        timestamp: new Date().getTime().toString(),\n        bibliography: [],\n        validity: \"\",\n        leiden : leidenToken,\n        externalRef: \"\",\n        node_id: undefined,\n        label: data.label,\n        lexicalEntry: data.lexicalEntry\n      };\n      parameters[\"spans\"] = [\n        {\n          start: 0,\n          end: 0\n        }\n      ];\n      parameters[\"id\"] = element_id;\n    }\n    //console.log(idPopover, tokenData, data);\n\n    console.log(parameters)\n\n    let identifier;\n\n    if (!this.bind.isEmptyFile) {\n      identifier = tokenData.node;\n    } else {\n      identifier = element_id\n    }\n\n    try {\n      let add_annotation_request = await this.annotatorService.addAnnotation(parameters, identifier).toPromise()\n      console.log(data);\n      this.bind.annotationArray.push(add_annotation_request.annotation);\n\n      if (!this.bind.isEmptyFile) {\n        this.bind.populateLocalAnnotation(tokenData);\n      } else {\n        this.bind.populateLocalAnnotation(add_annotation_request.annotation)\n      }\n\n\n      if (!this.bind.isEmptyFile) {\n        this.bind.object.forEach(element => {\n          if (add_annotation_request.annotation.attributes.node_id == element.id) {\n            let positionElement = element.position;\n            let elementHTML = document.getElementsByClassName('token-' + (positionElement - 1))[0]\n            this.renderer.addClass(elementHTML, 'annotation');\n          }\n        });\n      }\n\n\n      this.toastr.success('New attestation created', 'Info', {\n        timeOut: 5000\n      })\n    } catch (error) {\n      if (error.status != 200) {\n        this.toastr.error('Error on create new attestation', 'Error', {\n          timeOut: 5000\n        })\n      }\n    }\n  }\n\n  addNewForm = (form: string) => {\n    this.addTagFormText = form;\n\n\n    let index = this.bind.selectedPopover.tokenId;\n    let popover = this.bind.spanPopovers.toArray()[index];\n\n    if (popover != undefined) {\n      if (popover.isOpen()) {\n        popover.close();\n      }\n    }\n\n    this.modalService.open(this.addFormModal, {\n      size: 'lg',\n      windowClass: 'dark-modal',\n      beforeDismiss: () => {\n        if (this.stepOneForm.touched || this.stepTwoForm.touched || this.stepThreeForm.touched || this.stepFourForm.touched) {\n          if (!confirm('There are unsaved changes. Do you really want to quit without saving?')) {\n            return false;\n          } else {\n            this.stepOneForm.reset();\n            this.stepOneForm.markAsUntouched();\n            this.stepOneForm.markAsPristine();\n\n            this.stepTwoForm.reset();\n            this.stepTwoForm.markAsUntouched();\n            this.stepTwoForm.markAsPristine();\n\n            this.stepThreeForm.reset();\n            this.stepThreeForm.markAsUntouched();\n            this.stepThreeForm.markAsPristine();\n\n            this.stepFourForm.reset();\n            this.stepFourForm.markAsUntouched();\n            this.stepFourForm.markAsPristine();\n\n            this.statusForm.reset();\n            this.statusForm.markAsPristine();\n            this.statusForm.markAsUntouched();\n            return true;\n          }\n\n        } else {\n          this.stepOneForm.reset();\n          this.stepOneForm.markAsUntouched();\n          this.stepOneForm.markAsPristine();\n\n          this.stepTwoForm.reset();\n          this.stepTwoForm.markAsUntouched();\n          this.stepTwoForm.markAsPristine();\n\n          this.stepThreeForm.reset();\n          this.stepThreeForm.markAsUntouched();\n          this.stepThreeForm.markAsPristine();\n\n          this.stepFourForm.reset();\n          this.stepFourForm.markAsUntouched();\n          this.stepFourForm.markAsPristine();\n          return true;\n        }\n      }\n    });\n    this.modalStep = 1;\n\n  }\n\n  nextStep() {\n    if (this.modalStep == 1) {\n      if (this.stepOneForm.get('existOrNot').value == 'new') {\n        this.modalStep = 3;\n      } else {\n        this.modalStep = 2;\n      }\n\n      if (this.stepTwoForm.touched) {\n        this.stepTwoForm.reset();\n        this.stepTwoForm.markAsUntouched();\n        this.stepTwoForm.markAsPristine();\n        this.clearAll();\n      }\n\n      if (this.stepThreeForm.touched) {\n        this.stepThreeForm.reset();\n        this.stepThreeForm.markAsUntouched();\n        this.stepThreeForm.markAsPristine();\n      }\n\n      if (this.stepFourForm.touched) {\n        this.stepFourForm.reset();\n        this.stepFourForm.markAsUntouched();\n        this.stepFourForm.markAsPristine();\n      }\n\n    } else if (this.modalStep == 3) {\n      this.modalStep += 1;\n      if (this.stepTwoForm.touched) {\n        this.stepTwoForm.reset();\n        this.stepTwoForm.markAsUntouched();\n        this.stepTwoForm.markAsPristine();\n\n        this.clearAll();\n      }\n\n      if (this.stepFourForm.touched) {\n        this.stepFourForm.reset();\n        this.stepFourForm.markAsUntouched();\n        this.stepFourForm.markAsPristine();\n      }\n\n      this.stepFourForm.get('writtenForm').patchValue(this.addTagFormText, { emitEvent: false });\n\n    } else if (this.modalStep == 2) {\n      this.modalStep = 4;\n      if (this.stepThreeForm.touched) {\n        this.stepThreeForm.reset();\n        this.stepThreeForm.markAsUntouched();\n        this.stepThreeForm.markAsPristine();\n      }\n\n      if (this.stepFourForm.touched) {\n        this.stepFourForm.reset();\n        this.stepFourForm.markAsUntouched();\n        this.stepFourForm.markAsPristine();\n      }\n\n      this.stepFourForm.get('writtenForm').patchValue(this.addTagFormText, { emitEvent: false });\n    } else {\n      this.modalStep += 1;\n\n      if (this.modalStep == 6) {\n        this.wizardFactory();\n      }\n\n      if (this.modalStep > 6) {\n        this.modalStep = 6;\n      }\n    }\n\n  }\n\n  previousStep() {\n    if (this.modalStep == 2) {\n      this.modalStep -= 1;\n    } else if (this.modalStep == 3) {\n      this.modalStep = 1;\n    } else if (this.modalStep == 4) {\n\n      if (this.stepThreeForm.touched) {\n        this.modalStep = 3;\n      } else if (this.stepTwoForm.touched) {\n        this.modalStep = 2;\n      }\n    } else if (this.modalStep == 5) {\n      this.modalStep -= 1;\n    }\n  }\n\n  async wizardFactory() {\n\n    //TODO: attaccargli token alla fine\n\n    //nuova lexical entry\n    if (this.stepThreeForm.touched) {\n\n      //lexical entry creazion\n      this.statusForm.get('lexicalEntryCreation').patchValue('pending', { emitEvent: false });\n\n      try {\n        let new_lex_entry_request = await this.lexicalService.newLexicalEntry().toPromise();\n\n        this.statusForm.get('lexicalEntryCreation').patchValue('ok', { emitEvent: false })\n        this.statusForm.get('attachingLanguage').patchValue('pending', { emitEvent: false })\n\n        //attaching language\n        let lexId = new_lex_entry_request['lexicalEntry'];\n        let lang = this.stepThreeForm.get('language').value;\n        let parameters = {\n          relation: 'http://www.w3.org/ns/lemon/lime#entry',\n          value: lang\n        }\n\n        try {\n          let update_lang_new_lex_request = await this.lexicalService.updateLexicalEntry(lexId, parameters).toPromise();\n        } catch (error) {\n\n          if (error.status == 200) {\n            this.statusForm.get('attachingLanguage').patchValue('ok', { emitEvent: false });\n            //attaching type\n            this.statusForm.get('attachingType').patchValue('pending', { emitEvent: false });\n            let type = this.stepThreeForm.get('type').value;\n            let parameters = {\n              relation: 'http://www.w3.org/1999/02/22-rdf-syntax-ns#type',\n              value: type\n            }\n\n            try {\n              let attach_type_req = await this.lexicalService.updateLexicalEntry(lexId, parameters).toPromise()\n            } catch (error) {\n              if (error.status == 200) {\n                this.statusForm.get('attachingType').patchValue('ok', { emitEvent: false });\n\n                this.statusForm.get('attachingLabel').patchValue('pending', { emitEvent: false });\n                //attaching label\n                let label = this.stepThreeForm.get('label').value;\n                let parameters = {\n                  relation: 'http://www.w3.org/2000/01/rdf-schema#label',\n                  value: label\n                };\n\n                try {\n                  let attach_label = await this.lexicalService.updateLexicalEntry(lexId, parameters).toPromise();\n\n                } catch (error) {\n                  if (error.status == 200) {\n                    this.statusForm.get('attachingLabel').patchValue('ok', { emitEvent: false });\n                    //attaching pos\n                    this.statusForm.get('attachingPos').patchValue('pending', { emitEvent: false });\n\n                    let pos = this.stepThreeForm.get('pos').value;\n                    let parameters = {\n                      type: 'morphology',\n                      relation: 'http://www.lexinfo.net/ontology/3.0/lexinfo#partOfSpeech',\n                      value: pos\n                    }\n\n                    try {\n                      let attach_pos = await this.lexicalService.updateLinguisticRelation(lexId, parameters).toPromise();\n                    } catch (error) {\n                      if (error.status == 200) {\n                        this.statusForm.get('attachingPos').patchValue('ok', { emitEvent: false });\n\n                        //creating form\n                        this.statusForm.get('creatingForm').patchValue('pending', { emitEvent: false });\n\n                        try {\n                          let create_form = await this.lexicalService.createNewForm(lexId).toPromise();\n                          console.log(create_form);\n                          let formId = create_form.form;\n                          let formData = create_form;\n                          this.statusForm.get('creatingForm').patchValue('ok', { emitEvent: false });\n\n\n                          //attaching writtenRep to form\n                          this.statusForm.get('attachingWrittenForm').patchValue('pending', { emitEvent: false });\n                          let writtenRep = this.stepFourForm.get('writtenForm').value;\n                          let parameters = {\n                            relation: 'http://www.w3.org/ns/lemon/ontolex#writtenRep',\n                            value: writtenRep\n                          }\n\n                          try {\n                            let attach_written_rep = await this.lexicalService.updateForm(formId, parameters).toPromise();\n                          } catch (error) {\n                            if (error.status == 200) {\n                              this.statusForm.get('attachingWrittenForm').patchValue('ok', { emitEvent: false });\n                              //attach type to form\n                              this.statusForm.get('attachingFormType').patchValue('pending', { emitEvent: false });\n                              let typeForm = this.stepFourForm.get('type').value;\n\n                              let parameters = {\n                                relation: 'http://www.w3.org/1999/02/22-rdf-syntax-ns#type',\n                                value: typeForm\n                              }\n\n                              try {\n                                let attach_type_form = await this.lexicalService.updateForm(formId, parameters).toPromise();\n                                this.statusForm.get('attachingFormType').patchValue('ok', { emitEvent: false });\n                                this.statusForm.get('finish').patchValue('ok', { emitEvent: false });\n                              } catch (error) {\n                                if (error.status == 200) {\n                                  this.statusForm.get('attachingFormType').patchValue('ok', { emitEvent: false });\n                                  this.statusForm.get('finish').patchValue('ok', { emitEvent: false });\n\n\n                                  let parameters = {}\n                                  let idPopover = this.bind.selectedPopover.tokenId;\n                                  let tokenData = this.bind.object[idPopover];\n                                  let element_id = this.bind.epiData.element_id;\n                                  let textSelection = this.bind.message;\n                                  let selectionSpan = this.bind.spanSelection;\n                                  let formValue = formId;\n\n                                  let xmlNode = this.bind.epiData.xmlDoc.querySelectorAll('[*|id=\\'' + tokenData.xmlid + '\\']')[0].outerHTML;\n                                  let object = {\n                                    xmlString: xmlNode\n                                  }\n                                  let leidenToken = '';\n                                  try {\n                                    let convert_to_leiden = await this.documentService.testConvertItAnt(object).toPromise();\n                                    console.log(convert_to_leiden);\n                                    let raw = convert_to_leiden['xml'];\n                                    let bodyResponse = new DOMParser().parseFromString(raw, \"text/html\").body;\n                                    \n                                    bodyResponse.childNodes.forEach(\n                                      x => {\n                                        if (x.nodeName != undefined) {\n                                          if (x.nodeName == '#text') {\n                                            leidenToken += x.nodeValue.replace('\\n', '');\n                                          }\n                                        }\n                                      }\n                                    )\n                                  } catch (error) {\n\n                                  }\n\n\n\n                                  if (this.creator == undefined) {\n                                    this.creator = '';\n                                  }\n\n\n                                  parameters[\"value\"] = formValue;\n                                  parameters[\"layer\"] = \"attestation\";\n                                  parameters[\"attributes\"] = {\n                                    author: this.creator,\n                                    creator: this.creator,\n                                    note: \"\",\n                                    confidence: 1,\n                                    timestamp: new Date().getTime().toString(),\n                                    bibliography: [],\n                                    leiden : leidenToken,\n                                    validity: \"\",\n                                    externalRef: \"\",\n                                    node_id: tokenData.id,\n                                    label: writtenRep,\n                                    lexicalEntry: formData.lexicalEntry\n                                  };\n                                  parameters[\"spans\"] = [\n                                    {\n                                      start: tokenData.begin.toString(),\n                                      end: tokenData.end.toString()\n                                    }\n                                  ];\n                                  parameters[\"id\"] = tokenData.node;\n\n\n                                  let identifier;\n\n                                  if (!this.bind.isEmptyFile) {\n                                    identifier = tokenData.node;\n                                  } else {\n                                    identifier = element_id\n                                  }\n\n                                  try {\n                                    let add_annotation_request = await this.annotatorService.addAnnotation(parameters, identifier).toPromise()\n                                    console.log(data);\n                                    this.bind.annotationArray.push(add_annotation_request.annotation);\n                              \n                                    if (!this.bind.isEmptyFile) {\n                                      this.bind.populateLocalAnnotation(tokenData);\n                                    } else {\n                                      this.bind.populateLocalAnnotation(add_annotation_request.annotation)\n                                    }\n                              \n                              \n                                    if (!this.bind.isEmptyFile) {\n                                      this.bind.object.forEach(element => {\n                                        if (add_annotation_request.annotation.attributes.node_id == element.id) {\n                                          let positionElement = element.position;\n                                          let elementHTML = document.getElementsByClassName('token-' + (positionElement - 1))[0]\n                                          this.renderer.addClass(elementHTML, 'annotation');\n                                        }\n                                      });\n                                    }\n                              \n                              \n                                    this.toastr.success('New attestation created', 'Info', {\n                                      timeOut: 5000\n                                    })\n                                  } catch (error) {\n                                    if (error.status != 200) {\n                                      this.toastr.error('Error on create new attestation', 'Error', {\n                                        timeOut: 5000\n                                      })\n                                    }\n                                  }\n                                } else {\n                                  this.toastr.error(\"Error on attaching form type\", \"Error\", { timeOut: 5000 })\n                                }\n                              }\n\n                            } else {\n                              this.toastr.error(\"Error on attaching writtenRep\", \"Error\", { timeOut: 5000 })\n                            }\n                          }\n                        } catch (error) {\n                          this.toastr.error(\"Error on creating new form\", \"Error\", { timeOut: 5000 })\n                        }\n                      } else {\n                        this.toastr.error(\"Error on attaching POS\", \"Error\", { timeOut: 5000 })\n                      }\n                    }\n                  } else {\n                    this.toastr.error(\"Error on attaching label\", \"Error\", { timeOut: 5000 })\n                  }\n                }\n              } else {\n                this.toastr.error(\"Error on attaching type\", \"Error\", { timeOut: 5000 })\n              }\n\n            }\n          } else {\n            this.toastr.error(error.error.message, \"Error\")\n          }\n\n        }\n      } catch (error) {\n        this.toastr.error(\"Error on creating lexical entry\", \"Error\")\n      }\n    } else if (this.stepTwoForm.touched) { //lexical entry esistente\n\n      let lexId = this.stepTwoForm.get('lexicalEntry').value;\n      //creating form\n      this.statusForm.get('creatingForm').patchValue('pending', { emitEvent: false });\n\n      try {\n        let create_new_form = await this.lexicalService.createNewForm(lexId).toPromise();\n        console.log(create_new_form);\n\n        let formId = create_new_form.form;\n\n        this.statusForm.get('creatingForm').patchValue('ok', { emitEvent: false });\n\n\n        //attaching writtenRep to form\n        this.statusForm.get('attachingWrittenForm').patchValue('pending', { emitEvent: false });\n        let writtenRep = this.stepFourForm.get('writtenForm').value;\n        let parameters = {\n          relation: 'http://www.w3.org/ns/lemon/ontolex#writtenRep',\n          value: writtenRep\n        }\n\n        try {\n          let attach_written_rep = await this.lexicalService.updateForm(formId, parameters).toPromise();\n        } catch (error) {\n          if (error.status == 200) {\n            this.statusForm.get('attachingWrittenForm').patchValue('ok', { emitEvent: false });\n            //attach type to form\n            this.statusForm.get('attachingFormType').patchValue('pending', { emitEvent: false });\n            let typeForm = this.stepFourForm.get('type').value;\n\n            let parameters = {\n              relation: 'http://www.w3.org/1999/02/22-rdf-syntax-ns#type',\n              value: typeForm\n            }\n\n            try {\n              let attach_type = await this.lexicalService.updateForm(formId, parameters).toPromise();\n              this.statusForm.get('attachingFormType').patchValue('ok', { emitEvent: false });\n              this.statusForm.get('finish').patchValue('ok', { emitEvent: false });\n            } catch (error) {\n              if (error.status == 200) {\n                this.statusForm.get('attachingFormType').patchValue('ok', { emitEvent: false });\n                this.statusForm.get('finish').patchValue('ok', { emitEvent: false });\n\n\n                let parameters = {}\n                let idPopover = this.bind.selectedPopover.tokenId;\n                let tokenData = this.bind.object[idPopover];\n                let element_id = this.bind.epiData.element_id;\n                let textSelection = this.bind.message;\n                let selectionSpan = this.bind.spanSelection;\n                let formValue = formId;\n\n                let xmlNode = this.bind.epiData.xmlDoc.querySelectorAll('[*|id=\\'' + tokenData.xmlid + '\\']')[0].outerHTML;\n                let object = {\n                  xmlString: xmlNode\n                }\n                let leidenToken = '';\n                try {\n                  let convert_to_leiden = await this.documentService.testConvertItAnt(object).toPromise();\n                  console.log(convert_to_leiden);\n                  let raw = convert_to_leiden['xml'];\n                  let bodyResponse = new DOMParser().parseFromString(raw, \"text/html\").body;\n                  \n                  bodyResponse.childNodes.forEach(\n                    x => {\n                      if (x.nodeName != undefined) {\n                        if (x.nodeName == '#text') {\n                          leidenToken += x.nodeValue.replace('\\n', '');\n                        }\n                      }\n                    }\n                  )\n                } catch (error) {\n\n                }\n\n\n\n                if (this.creator == undefined) {\n                  this.creator = '';\n                }\n\n\n                parameters[\"value\"] = formValue;\n                parameters[\"layer\"] = \"attestation\";\n                parameters[\"attributes\"] = {\n                  author: this.creator,\n                  creator: this.creator,\n                  note: \"\",\n                  confidence: 1,\n                  timestamp: new Date().getTime().toString(),\n                  bibliography: [],\n                  leiden : leidenToken,\n                  validity: \"\",\n                  externalRef: \"\",\n                  node_id: tokenData.id,\n                  label: writtenRep,\n                  lexicalEntry: lexId\n                };\n                parameters[\"spans\"] = [\n                  {\n                    start: tokenData.begin.toString(),\n                    end: tokenData.end.toString()\n                  }\n                ];\n                parameters[\"id\"] = tokenData.node;\n\n\n                let identifier;\n\n                if (!this.bind.isEmptyFile) {\n                  identifier = tokenData.node;\n                } else {\n                  identifier = element_id\n                }\n\n                try {\n                  let add_annotation_request = await this.annotatorService.addAnnotation(parameters, identifier).toPromise()\n                  console.log(data);\n                  this.bind.annotationArray.push(add_annotation_request.annotation);\n            \n                  if (!this.bind.isEmptyFile) {\n                    this.bind.populateLocalAnnotation(tokenData);\n                  } else {\n                    this.bind.populateLocalAnnotation(add_annotation_request.annotation)\n                  }\n            \n            \n                  if (!this.bind.isEmptyFile) {\n                    this.bind.object.forEach(element => {\n                      if (add_annotation_request.annotation.attributes.node_id == element.id) {\n                        let positionElement = element.position;\n                        let elementHTML = document.getElementsByClassName('token-' + (positionElement - 1))[0]\n                        this.renderer.addClass(elementHTML, 'annotation');\n                      }\n                    });\n                  }\n            \n            \n                  this.toastr.success('New attestation created', 'Info', {\n                    timeOut: 5000\n                  })\n                } catch (error) {\n                  if (error.status != 200) {\n                    this.toastr.error('Error on create new attestation', 'Error', {\n                      timeOut: 5000\n                    })\n                  }\n                }\n              } else {\n                this.toastr.error(\"Error on attaching type\", \"Error\", { timeOut: 5000 })\n              }\n            }\n          } else {\n            this.toastr.error(\"Error on attaching writtenRep\", \"Error\", { timeOut: 5000 })\n          }\n        }\n      } catch (error) {\n        if (error.status != 200) {\n          this.toastr.error(\"Error on creating new form\", \"Error\", { timeOut: 5000 });\n        }\n      }\n    }\n  }\n\n  ngOnDestroy(): void {\n    //this.search_subscription.unsubscribe();\n    this.get_languages_subscription.unsubscribe();\n    this.get_morphology_subscription.unsubscribe();\n    this.get_lex_entry_type_subscription.unsubscribe();\n    this.get_form_type_subscription.unsubscribe();\n    this.destroy$.next(true);\n    this.destroy$.complete();\n  }\n\n}\n","<div class=\"input-group col-xl-12 searchSelect\" #search_form_container>\n    <ng-select #select_form name=\"entity\" [addTag]=\"addNewForm\" [clearable]=\"false\" (focus)=\"true\" bindValue=\"label\"\n        bindLabel=\"label\" placeholder=\"Search form\" appendTo=\".token_modal\" (keyup)=\"triggerSearch($event)\"\n        [items]=\"searchResults\" (change)=\"handleForm(select_form, search_form_container)\" [loading]=\"loader\">\n        <!--  -->\n        <!-- && cog.get('type').value != 'external' -->\n        <!-- \"\n     -->\n        <!-- (focus)=\"deleteData()\" -->\n        <!-- -->\n        <ng-template ng-option-tmp let-item=\"item\" let-search=\"searchTerm\">\n            <!--     <div>\n    <span>{{item.label}} </span><span style=\"color: blue;\">@{{item.language}}</span>\n</div> -->\n            <div class=\"card-body p-0\">\n                <h6 class=\"card-title m-0\" [ngOptionHighlight]=\"search\">{{item.label}}</h6>\n                <!-- <p class=\"card-subtitle mb-2 text-muted\">{{item.type}}</p> -->\n                <small *ngFor=\"let sub of item.morphology\">\n                    <span *ngIf=\"sub.trait == 'case' || sub.trait == 'gender' || sub.trait == 'number' || sub.trait == 'partOfSpeech'\">\n                        {{sub.trait}} : {{sub.value.split('#')[1]}} <br>\n                    </span>\n                </small>\n                <small class=\"card-text\">\n                    <!-- <img height=\"15\" width=\"15\" [src]=\"item.avatar\"/> -->\n                    <!-- LexicalEntry: {{item.lexicalEntryInstanceName}} -->\n\n                </small>\n                <!--  <div *ngIf=\"item.name === 'Pavilnys'\">\n        <a href=\"#\" class=\"card-link\">Card link</a>\n        <a href=\"#\" class=\"card-link\">Another link</a>\n    </div> -->\n            </div>\n\n        </ng-template>\n    </ng-select>\n\n    <div class=\"input-group-append ml-2\">\n        <button (click)=\"clearAll()\" class=\"btn btn-danger\" type=\"button\">Clear</button>\n    </div>\n</div>\n\n<ng-template #addFormModal let-modal>\n    <div class=\"modal-header\">\n        <h4 class=\"modal-title\" id=\"modal-basic-title\">Wizard</h4>\n        <button type=\"button\" class=\"close\" aria-label=\"Close\" (click)=\"modal.dismiss('Cross click')\">\n            <span aria-hidden=\"true\">&times;</span>\n        </button>\n    </div>\n\n    <form [formGroup]=\"stepOneForm\" *ngIf=\"modalStep == 1\">\n        <div class=\"modal-body\">\n            <!-- {{modalStep}} -->\n            <div class=\"form-group\" >\n                <p>To create a new lexical form it is necessary to have a reference lexical entry. Select one of the two options:</p>\n                <div class=\"form-check form-check-inline\">\n                    <input class=\"form-check-input\" formControlName=\"existOrNot\" name=\"existOrNot\" type=\"radio\" value=\"new\">\n                    <label class=\"form-check-label\" for=\"existOrNot\">Create new lexical entry</label>\n                </div>\n                <div class=\"form-check form-check-inline\">\n                    <input class=\"form-check-input\" formControlName=\"existOrNot\" name=\"existOrNot\" type=\"radio\" value=\"exist\">\n                    <label class=\"form-check-label\" for=\"existOrNot\">Choose one existing lexical entry</label>\n                </div>\n            </div>\n            \n        </div>\n        <div class=\"modal-footer\">\n            <button type=\"button\" class=\"btn btn-outline-dark\" (click)=\"previousStep()\"\n                [disabled]=\"modalStep == 1\">Previous</button>\n            <button type=\"button\" class=\"btn btn-outline-dark\" (click)=\"nextStep()\" [disabled]=\"stepOneForm.invalid\">Next</button>\n        </div>  \n       \n    </form>\n\n    <form [formGroup]=\"stepTwoForm\"  *ngIf=\"modalStep == 2\">\n        {{stepTwoForm.value | json}}\n        <div class=\"modal-body\">\n            <!-- {{modalStep}} -->\n            <p>Choose a lexical entry:</p>\n            <div class=\"input-group searchSelect\">\n                <ng-select #search_lexicalEntry formControlName=\"lexicalEntry\" name=\"lexicalEntry\" [clearable]=\"false\" (focus)=\"true\" bindValue=\"lexicalEntry\"\n                bindLabel=\"label\" placeholder=\"Search form\" appendTo=\"body\" (keyup)=\"triggerSearchLexicalEntries($event)\"\n                [items]=\"lex_searchResuts\" [loading]=\"loader\"> </ng-select>\n                \n                <div class=\"input-group-append ml-2\">\n                    <button (click)=\"clearAll()\" class=\"btn btn-danger\" type=\"button\">Clear</button>\n                </div>\n            </div>\n            \n        </div>\n        <div class=\"modal-footer\">\n            <button type=\"button\" class=\"btn btn-outline-dark\" (click)=\"previousStep()\"\n                [disabled]=\"modalStep == 1\">Previous</button>\n            <button type=\"button\" class=\"btn btn-outline-dark\" (click)=\"nextStep()\" [disabled]=\"stepTwoForm.invalid\">Next</button>\n        </div>  \n       \n    </form>\n\n    <form [formGroup]=\"stepThreeForm\"  *ngIf=\"modalStep == 3\">\n        <div class=\"modal-body\">\n            <!-- {{modalStep}} -->\n            <p>Enter basic info for lexical entry creation:</p>\n            <div class=\"form-row\">\n                <div class=\"col-md-4 mb-3\">\n                    <label for=\"label\">Label</label>\n                    <input type=\"text\" class=\"form-control\" formControlName=\"label\" name=\"label\" id=\"label\" required>\n                    <div class=\"invalid-feedback\">\n                        Please provide a valid state.\n                    </div>\n                </div>\n                <div class=\"col-md-3 mb-3\">\n                    <label for=\"label\">Type</label>\n                    <select class=\"custom-select\" formControlName=\"type\" name=\"type\" id=\"type\" required>\n                        <option selected value=\"\">Select type</option>\n                        <option *ngFor=\"let type of lexEntryTypesData\" [value]=\"type.valueId\">{{type.valueLabel}}</option>\n                    </select>\n                    <div class=\"invalid-feedback\">\n                        Please provide a valid state.\n                    </div>\n                </div>\n                <div class=\"col-md-2 mb-3\">\n                    <label for=\"label\">Language</label>\n                    <select class=\"custom-select\" formControlName=\"language\" name=\"language\" id=\"language\" required>\n                        <option selected value=\"\">Select language</option>\n                        <option *ngFor=\"let lang of languages\" [value]=\"lang.label\">{{lang.label}}</option>\n                    </select>\n                    <div class=\"invalid-feedback\">\n                        Please provide a valid state.\n                    </div>\n                </div>\n                <div class=\"col-md-3 mb-3\">\n                    <label for=\"label\">Part of Speech</label>\n                    <select class=\"custom-select\" formControlName=\"pos\" name=\"pos\" id=\"pos\" required>\n                        <option selected value=\"\">Select pos</option>\n                        <option *ngFor=\"let pos of morphologyData\" [value]=\"pos.valueId\">{{pos.valueLabel}}</option>\n                    </select>\n                    <div class=\"invalid-feedback\">\n                        Please provide a valid state.\n                    </div>\n                </div>\n            </div>\n            <!-- <div class=\"form-row\">\n                \n            </div> -->\n            \n        </div>\n        <div class=\"modal-footer\">\n            <button type=\"button\" class=\"btn btn-outline-dark\" (click)=\"previousStep()\"\n                [disabled]=\"modalStep == 1\">Previous</button>\n            <button type=\"button\" class=\"btn btn-outline-dark\" (click)=\"nextStep()\" [disabled]=\"stepThreeForm.invalid\">Next</button>\n        </div>  \n       \n    </form>\n\n    <form [formGroup]=\"stepFourForm\"  *ngIf=\"modalStep == 4\">\n        <div class=\"modal-body\">\n            <p>Enter basic info for form creation:</p>\n            <div class=\"form-row\">\n                <div class=\"col-md-4 mb-3\">\n                    <label for=\"label\">Written Form</label>\n                    <input type=\"text\" class=\"form-control\" formControlName=\"writtenForm\" name=\"writtenForm\" id=\"writtenForm\" required>\n                    <div class=\"invalid-feedback\">\n                        Please provide a valid state.\n                    </div>\n                </div>\n                <div class=\"col-md-3 mb-3\">\n                    <label for=\"label\">Type</label>\n                    <select class=\"custom-select\" formControlName=\"type\" name=\"type\" id=\"type\" required>\n                        <option selected value=\"\">Select type</option>\n                        <option *ngFor=\"let type of typesData\" [value]=\"type.valueId\">{{type.valueLabel}}</option>\n                    </select>\n                    <div class=\"invalid-feedback\">\n                        Please provide a valid state.\n                    </div>\n                </div>\n            </div>\n        </div>\n        <div class=\"modal-footer\">\n            <button type=\"button\" class=\"btn btn-outline-dark\" (click)=\"previousStep()\">Previous</button>\n            <button type=\"button\" class=\"btn btn-outline-dark\" (click)=\"nextStep()\" [disabled]=\"stepFourForm.invalid\">Next</button>\n        </div>  \n    </form>\n\n    <div *ngIf=\"modalStep == 5\">\n        <div class=\"modal-body\">\n            <p>Summary:</p>\n\n            <div class=\"row\">\n                <div class=\"col-4\">\n                    <p>Lexical form to create</p>\n                </div>\n                <div class=\"col-8\">\n                    <p>{{stepFourForm.get('writtenForm').value}}  -  {{stepFourForm.get('type').value}}</p>\n               </div>\n            </div>\n\n            <div class=\"row\" *ngIf=\"stepTwoForm.touched\">\n                <div class=\"col-4\">\n                    <p>Lexical Entry to be attached</p>\n                </div>\n                <div class=\"col-8\">\n                    <p>{{stepTwoForm.get('lexicalEntry').value}}</p>\n               </div>\n            </div>\n\n            <div class=\"row\" *ngIf=\"stepThreeForm.touched\">\n                <div class=\"col-4\">\n                    <p>New lexical entry to be attached</p>\n                </div>\n                <div class=\"col-8\">\n                    <p>{{stepThreeForm.get('label').value}}</p>\n               </div>\n            </div>\n\n\n        </div>\n        <div class=\"modal-footer\">\n            <button type=\"button\" class=\"btn btn-outline-dark\" (click)=\"previousStep()\">Previous</button>\n            <button type=\"button\" class=\"btn btn-outline-dark\" (click)=\"nextStep()\">Proceed</button>\n        </div>\n    </div>\n\n\n    <form [formGroup]=\"statusForm\"  *ngIf=\"modalStep == 6\">\n        <div class=\"modal-body\">\n            <p>Summary:</p>\n            \n            <div class=\"row\" *ngIf=\"stepThreeForm.touched\">\n                <div class=\"col-4\">\n                    <p [ngClass]=\"{'text-muted': statusForm.get('lexicalEntryCreation').value == 'pause'}\">Lexical entry creation</p>\n                </div>\n                <div class=\"col-8\">\n                    <div class=\"d-flex align-items-center\" *ngIf=\"statusForm.get('lexicalEntryCreation').value == 'pause'\">\n                        <!-- <strong>Loading...</strong> -->\n                        <div class=\"mr-auto ml-auto\" aria-hidden=\"true\"><i class=\"fas fa-pause-circle fa-2x\" style=\"color: gray;\"></i></div>\n                    </div>\n                    <div class=\"d-flex align-items-center\" *ngIf=\"statusForm.get('lexicalEntryCreation').value == 'pending'\">\n                        <!-- <strong>Loading...</strong> -->\n                        <div class=\"spinner-border mr-auto ml-auto\" role=\"status\" aria-hidden=\"true\"></div>\n                    </div>\n                    <div class=\"d-flex align-items-center\" *ngIf=\"statusForm.get('lexicalEntryCreation').value == 'ok'\">\n                        <!-- <strong>Loading...</strong> -->\n                        <div class=\"mr-auto ml-auto\" aria-hidden=\"true\"><i class=\"fas fa-check-circle fa-2x\" style=\"color: green;\"></i></div>\n                    </div>\n                    <div class=\"d-flex align-items-center\" *ngIf=\"statusForm.get('lexicalEntryCreation').value == 'error'\">\n                        <!-- <strong>Loading...</strong> -->\n                        <div class=\"mr-auto ml-auto\" aria-hidden=\"true\"><i class=\"fas fa-times-circle fa-2x\" style=\"color: red;\"></i></div>\n                    </div>\n               </div>\n            </div>\n\n            <div class=\"row\" *ngIf=\"stepThreeForm.touched\">\n                <div class=\"col-4\">\n                    <p [ngClass]=\"{'text-muted': statusForm.get('attachingLanguage').value == 'pause'}\">Attaching language</p>\n                </div>\n                <div class=\"col-8\">\n                    <div class=\"d-flex align-items-center\" *ngIf=\"statusForm.get('attachingLanguage').value == 'pause'\">\n                        <!-- <strong>Loading...</strong> -->\n                        <div class=\"mr-auto ml-auto\" aria-hidden=\"true\"><i class=\"fas fa-pause-circle fa-2x\" style=\"color: gray;\"></i></div>\n                    </div>\n                    <div class=\"d-flex align-items-center\" *ngIf=\"statusForm.get('attachingLanguage').value == 'pending'\">\n                        <!-- <strong>Loading...</strong> -->\n                        <div class=\"spinner-border mr-auto ml-auto\" role=\"status\" aria-hidden=\"true\"></div>\n                    </div>\n                    <div class=\"d-flex align-items-center\" *ngIf=\"statusForm.get('attachingLanguage').value == 'ok'\">\n                        <!-- <strong>Loading...</strong> -->\n                        <div class=\"mr-auto ml-auto\" aria-hidden=\"true\"><i class=\"fas fa-check-circle fa-2x\" style=\"color: green;\"></i></div>\n                    </div>\n                    <div class=\"d-flex align-items-center\" *ngIf=\"statusForm.get('attachingLanguage').value == 'error'\">\n                        <!-- <strong>Loading...</strong> -->\n                        <div class=\"mr-auto ml-auto\" aria-hidden=\"true\"><i class=\"fas fa-times-circle fa-2x\" style=\"color: red;\"></i></div>\n                    </div>\n               </div>\n            </div>\n\n            <div class=\"row\" *ngIf=\"stepThreeForm.touched\">\n                <div class=\"col-4\">\n                    <p [ngClass]=\"{'text-muted': statusForm.get('attachingType').value == 'pause'}\">Attaching type</p>\n                </div>\n                <div class=\"col-8\">\n                    <div class=\"d-flex align-items-center\" *ngIf=\"statusForm.get('attachingType').value == 'pause'\">\n                        <!-- <strong>Loading...</strong> -->\n                        <div class=\"mr-auto ml-auto\" aria-hidden=\"true\"><i class=\"fas fa-pause-circle fa-2x\" style=\"color: gray;\"></i></div>\n                    </div>\n                    <div class=\"d-flex align-items-center\" *ngIf=\"statusForm.get('attachingType').value == 'pending'\">\n                        <!-- <strong>Loading...</strong> -->\n                        <div class=\"spinner-border mr-auto ml-auto\" role=\"status\" aria-hidden=\"true\"></div>\n                    </div>\n                    <div class=\"d-flex align-items-center\" *ngIf=\"statusForm.get('attachingType').value == 'ok'\">\n                        <!-- <strong>Loading...</strong> -->\n                        <div class=\"mr-auto ml-auto\" aria-hidden=\"true\"><i class=\"fas fa-check-circle fa-2x\" style=\"color: green;\"></i></div>\n                    </div>\n                    <div class=\"d-flex align-items-center\" *ngIf=\"statusForm.get('attachingType').value == 'error'\">\n                        <!-- <strong>Loading...</strong> -->\n                        <div class=\"mr-auto ml-auto\" aria-hidden=\"true\"><i class=\"fas fa-times-circle fa-2x\" style=\"color: red;\"></i></div>\n                    </div>\n               </div>\n            </div>\n\n            <div class=\"row\" *ngIf=\"stepThreeForm.touched\">\n                <div class=\"col-4\">\n                    <p [ngClass]=\"{'text-muted': statusForm.get('attachingLabel').value == 'pause'}\">Attaching label</p>\n                </div>\n                <div class=\"col-8\">\n                    <div class=\"d-flex align-items-center\" *ngIf=\"statusForm.get('attachingLabel').value == 'pause'\">\n                        <!-- <strong>Loading...</strong> -->\n                        <div class=\"mr-auto ml-auto\" aria-hidden=\"true\"><i class=\"fas fa-pause-circle fa-2x\" style=\"color: gray;\"></i></div>\n                    </div>\n                    <div class=\"d-flex align-items-center\" *ngIf=\"statusForm.get('attachingLabel').value == 'pending'\">\n                        <!-- <strong>Loading...</strong> -->\n                        <div class=\"spinner-border mr-auto ml-auto\" role=\"status\" aria-hidden=\"true\"></div>\n                    </div>\n                    <div class=\"d-flex align-items-center\" *ngIf=\"statusForm.get('attachingLabel').value == 'ok'\">\n                        <!-- <strong>Loading...</strong> -->\n                        <div class=\"mr-auto ml-auto\" aria-hidden=\"true\"><i class=\"fas fa-check-circle fa-2x\" style=\"color: green;\"></i></div>\n                    </div>\n                    <div class=\"d-flex align-items-center\" *ngIf=\"statusForm.get('attachingLabel').value == 'error'\">\n                        <!-- <strong>Loading...</strong> -->\n                        <div class=\"mr-auto ml-auto\" aria-hidden=\"true\"><i class=\"fas fa-times-circle fa-2x\" style=\"color: red;\"></i></div>\n                    </div>\n               </div>\n            </div>\n\n            <div class=\"row\" *ngIf=\"stepThreeForm.touched\">\n                <div class=\"col-4\">\n                    <p [ngClass]=\"{'text-muted': statusForm.get('attachingPos').value == 'pause'}\">Attaching part of speech</p>\n                </div>\n                <div class=\"col-8\">\n                    <div class=\"d-flex align-items-center\" *ngIf=\"statusForm.get('attachingPos').value == 'pause'\">\n                        <!-- <strong>Loading...</strong> -->\n                        <div class=\"mr-auto ml-auto\" aria-hidden=\"true\"><i class=\"fas fa-pause-circle fa-2x\" style=\"color: gray;\"></i></div>\n                    </div>\n                    <div class=\"d-flex align-items-center\" *ngIf=\"statusForm.get('attachingPos').value == 'pending'\">\n                        <!-- <strong>Loading...</strong> -->\n                        <div class=\"spinner-border mr-auto ml-auto\" role=\"status\" aria-hidden=\"true\"></div>\n                    </div>\n                    <div class=\"d-flex align-items-center\" *ngIf=\"statusForm.get('attachingPos').value == 'ok'\">\n                        <!-- <strong>Loading...</strong> -->\n                        <div class=\"mr-auto ml-auto\" aria-hidden=\"true\"><i class=\"fas fa-check-circle fa-2x\" style=\"color: green;\"></i></div>\n                    </div>\n                    <div class=\"d-flex align-items-center\" *ngIf=\"statusForm.get('attachingPos').value == 'error'\">\n                        <!-- <strong>Loading...</strong> -->\n                        <div class=\"mr-auto ml-auto\" aria-hidden=\"true\"><i class=\"fas fa-times-circle fa-2x\" style=\"color: red;\"></i></div>\n                    </div>\n               </div>\n            </div>\n\n            <div class=\"row\">\n                <div class=\"col-4\">\n                    <p [ngClass]=\"{'text-muted': statusForm.get('creatingForm').value == 'pause'}\">Creating form</p>\n                </div>\n                <div class=\"col-8\">\n                    <div class=\"d-flex align-items-center\" *ngIf=\"statusForm.get('creatingForm').value == 'pause'\">\n                        <!-- <strong>Loading...</strong> -->\n                        <div class=\"mr-auto ml-auto\" aria-hidden=\"true\"><i class=\"fas fa-pause-circle fa-2x\" style=\"color: gray;\"></i></div>\n                    </div>\n                    <div class=\"d-flex align-items-center\" *ngIf=\"statusForm.get('creatingForm').value == 'pending'\">\n                        <!-- <strong>Loading...</strong> -->\n                        <div class=\"spinner-border mr-auto ml-auto\" role=\"status\" aria-hidden=\"true\"></div>\n                    </div>\n                    <div class=\"d-flex align-items-center\" *ngIf=\"statusForm.get('creatingForm').value == 'ok'\">\n                        <!-- <strong>Loading...</strong> -->\n                        <div class=\"mr-auto ml-auto\" aria-hidden=\"true\"><i class=\"fas fa-check-circle fa-2x\" style=\"color: green;\"></i></div>\n                    </div>\n                    <div class=\"d-flex align-items-center\" *ngIf=\"statusForm.get('creatingForm').value == 'error'\">\n                        <!-- <strong>Loading...</strong> -->\n                        <div class=\"mr-auto ml-auto\" aria-hidden=\"true\"><i class=\"fas fa-times-circle fa-2x\" style=\"color: red;\"></i></div>\n                    </div>\n               </div>\n            </div>\n\n            <div class=\"row\">\n                <div class=\"col-4\">\n                    <p [ngClass]=\"{'text-muted': statusForm.get('attachingWrittenForm').value == 'pause'}\">Attaching written form property</p>\n                </div>\n                <div class=\"col-8\">\n                    <div class=\"d-flex align-items-center\" *ngIf=\"statusForm.get('attachingWrittenForm').value == 'pause'\">\n                        <!-- <strong>Loading...</strong> -->\n                        <div class=\"mr-auto ml-auto\" aria-hidden=\"true\"><i class=\"fas fa-pause-circle fa-2x\" style=\"color: gray;\"></i></div>\n                    </div>\n                    <div class=\"d-flex align-items-center\" *ngIf=\"statusForm.get('attachingWrittenForm').value == 'pending'\">\n                        <!-- <strong>Loading...</strong> -->\n                        <div class=\"spinner-border mr-auto ml-auto\" role=\"status\" aria-hidden=\"true\"></div>\n                    </div>\n                    <div class=\"d-flex align-items-center\" *ngIf=\"statusForm.get('attachingWrittenForm').value == 'ok'\">\n                        <!-- <strong>Loading...</strong> -->\n                        <div class=\"mr-auto ml-auto\" aria-hidden=\"true\"><i class=\"fas fa-check-circle fa-2x\" style=\"color: green;\"></i></div>\n                    </div>\n                    <div class=\"d-flex align-items-center\" *ngIf=\"statusForm.get('attachingWrittenForm').value == 'error'\">\n                        <!-- <strong>Loading...</strong> -->\n                        <div class=\"mr-auto ml-auto\" aria-hidden=\"true\"><i class=\"fas fa-times-circle fa-2x\" style=\"color: red;\"></i></div>\n                    </div>\n               </div>\n            </div>\n\n            <div class=\"row\">\n                <div class=\"col-4\">\n                    <p [ngClass]=\"{'text-muted': statusForm.get('attachingFormType').value == 'pause'}\">Attaching type property</p>\n                </div>\n                <div class=\"col-8\">\n                    <div class=\"d-flex align-items-center\" *ngIf=\"statusForm.get('attachingFormType').value == 'pause'\">\n                        <!-- <strong>Loading...</strong> -->\n                        <div class=\"mr-auto ml-auto\" aria-hidden=\"true\"><i class=\"fas fa-pause-circle fa-2x\" style=\"color: gray;\"></i></div>\n                    </div>\n                    <div class=\"d-flex align-items-center\" *ngIf=\"statusForm.get('attachingFormType').value == 'pending'\">\n                        <!-- <strong>Loading...</strong> -->\n                        <div class=\"spinner-border mr-auto ml-auto\" role=\"status\" aria-hidden=\"true\"></div>\n                    </div>\n                    <div class=\"d-flex align-items-center\" *ngIf=\"statusForm.get('attachingFormType').value == 'ok'\">\n                        <!-- <strong>Loading...</strong> -->\n                        <div class=\"mr-auto ml-auto\" aria-hidden=\"true\"><i class=\"fas fa-check-circle fa-2x\" style=\"color: green;\"></i></div>\n                    </div>\n                    <div class=\"d-flex align-items-center\" *ngIf=\"statusForm.get('attachingFormType').value == 'error'\">\n                        <!-- <strong>Loading...</strong> -->\n                        <div class=\"mr-auto ml-auto\" aria-hidden=\"true\"><i class=\"fas fa-times-circle fa-2x\" style=\"color: red;\"></i></div>\n                    </div>\n               </div>\n            </div>\n\n            <div class=\"row\">\n                <div class=\"col-4\">\n                    <p [ngClass]=\"{'text-muted': statusForm.get('finish').value == 'pause'}\">Finish</p>\n                </div>\n                <div class=\"col-8\">\n                    <div class=\"d-flex align-items-center\" *ngIf=\"statusForm.get('finish').value == 'pause'\">\n                        <!-- <strong>Loading...</strong> -->\n                        <div class=\"mr-auto ml-auto\" aria-hidden=\"true\"><i class=\"fas fa-pause-circle fa-2x\" style=\"color: gray;\"></i></div>\n                    </div>\n                    <div class=\"d-flex align-items-center\" *ngIf=\"statusForm.get('finish').value == 'pending'\">\n                        <!-- <strong>Loading...</strong> -->\n                        <div class=\"spinner-border mr-auto ml-auto\" role=\"status\" aria-hidden=\"true\"></div>\n                    </div>\n                    <div class=\"d-flex align-items-center\" *ngIf=\"statusForm.get('finish').value == 'ok'\">\n                        <!-- <strong>Loading...</strong> -->\n                        <div class=\"mr-auto ml-auto\" aria-hidden=\"true\"><i class=\"fas fa-check-circle fa-2x\" style=\"color: green;\"></i></div>\n                    </div>\n                    <div class=\"d-flex align-items-center\" *ngIf=\"statusForm.get('finish').value == 'error'\">\n                        <!-- <strong>Loading...</strong> -->\n                        <div class=\"mr-auto ml-auto\" aria-hidden=\"true\"><i class=\"fas fa-times-circle fa-2x\" style=\"color: red;\"></i></div>\n                    </div>\n               </div>\n            </div>\n        </div>\n        <div class=\"modal-footer\">\n            <!-- <button type=\"button\" class=\"btn btn-outline-dark\" (click)=\"previousStep()\">Previous</button> -->\n            <button type=\"button\" class=\"btn btn-outline-dark\" (click)=\"modal.close('finish')\" [disabled]=\"statusForm.get('finish').value != 'ok'\">Close</button>\n        </div>\n    </form>\n    \n    \n</ng-template>","/*\n   Copyright 2021-2022  Istituto di Linguistica Computazionale \"A. Zampolli\", Consiglio Nazionale delle Ricerche, Pisa, Italy.\n \nThis file is part of EpiLexo.\n\nEpiLexo is free software: you can redistribute it and/or modify it under the terms of the GNU General Public License as published by the Free Software Foundation, either version 3 of the License, or (at your option) any later version.\n\nEpiLexo is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for more details.\n\nYou should have received a copy of the GNU General Public License along with EpiLexo. If not, see <https://www.gnu.org/licenses/>.\n*/\n\nimport { HttpClient, HttpHeaders } from '@angular/common/http';\nimport { Injectable } from '@angular/core';\nimport { BehaviorSubject, Observable } from 'rxjs';\nimport { timeout } from 'rxjs/operators';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class DocumentSystemService {\n\n  private baseUrl_document = \"/cash_demo/api/\"\n\n  private _epigraphyData: BehaviorSubject<object> = new BehaviorSubject(null);\n  private _epigraphyTextData: BehaviorSubject<string> = new BehaviorSubject(null);\n  private _epigraphyLeidenData: BehaviorSubject<any> = new BehaviorSubject(null);\n  private _epigraphyTranslationData: BehaviorSubject<any> = new BehaviorSubject(null);\n  private _metadataData : BehaviorSubject<object> = new BehaviorSubject(null);\n  private _triggerMetadataPanel : BehaviorSubject<boolean> = new BehaviorSubject(null);\n\n  epigraphyData$ = this._epigraphyData.asObservable();\n  epigraphyTextData$ = this._epigraphyTextData.asObservable();\n  epigraphyLeidenData$ = this._epigraphyLeidenData.asObservable();\n  epigraphyTranslationData$ = this._epigraphyTranslationData.asObservable();\n  metadataData$ = this._metadataData.asObservable();\n  triggerMetadataPanel$ = this._triggerMetadataPanel.asObservable();\n\n  constructor(private http: HttpClient) { }\n\n  sendToEpigraphyTab(object: object) {\n    this._epigraphyData.next(object)\n  } \n\n  sendTextToEpigraphyTab(string : string){\n    this._epigraphyTextData.next(string);\n  }\n\n  sendTranslationToEpigraphyTab(array : any){\n    this._epigraphyTranslationData.next(array);\n  }\n\n  sendLeidenToEpigraphyTab(string : any){\n    this._epigraphyLeidenData.next(string);\n  }\n\n  sendToMetadataPanel(object : object){\n    this._metadataData.next(object);\n  }\n\n  triggerMetadataPanel(bool: boolean){\n    this._triggerMetadataPanel.next(bool);\n  }\n\n  //GET /api/getDocumentSystem  ---> return document system\n  getDocumentSystem(): Observable<any> {\n    return this.http.get(this.baseUrl_document + \"public/getDocumentSystem?requestUUID=11\")\n  }\n\n  //POST /api/crud/addFolder --> add folder to document system\n  addFolder(parameters): Observable<any> {\n    return this.http.post(this.baseUrl_document + \"crud/addFolder\", parameters)\n  }\n\n  //POST /api/crud/removeFolder --> remove Folder folder from document system\n  removeFolder(parameters): Observable<any> {\n    return this.http.post(this.baseUrl_document + \"crud/removeFolder\", parameters)\n  }\n\n  //POST /api/crud/moveFolder --> move Folder to another folder\n  moveFolder(parameters): Observable<any> {\n    return this.http.post(this.baseUrl_document + \"crud/moveFolder\", parameters)\n  }\n\n  //POST /api/crud/renameFolder --> rename folder\n  renameFolder(parameters): Observable<any> {\n    return this.http.post(this.baseUrl_document + \"crud/renameFolder\", parameters)\n  }\n\n\n  //POST /api/crud/uploadFile --> upload text\n  uploadFile(parameters, element_id, request_uuid): Observable<any> {\n    return this.http.post(this.baseUrl_document + \"crud/uploadFile?requestUUID=\"+request_uuid+\"&element-id=\"+element_id+\"\", parameters)\n  }\n\n  //POST /api/crud/removeFile --> upload text\n  removeFile(parameters): Observable<any> {\n    return this.http.post(this.baseUrl_document + \"crud/removeFile\", parameters)\n  }\n\n  //POST /api/crud/renameFile --> upload text\n  renameFile(parameters): Observable<any> {\n    return this.http.post(this.baseUrl_document + \"crud/renameFile\", parameters)\n  }\n\n  //POST /api/crud/moveFileTo --> move file to another folder\n  moveFileTo(parameters): Observable<any> {\n    return this.http.post(this.baseUrl_document + \"crud/moveFileTo\", parameters)\n  }\n\n  //POST /api/crud/copyFileTo --> move file to another folder\n  copyFileTo(parameters): Observable<any> {\n    return this.http.post(this.baseUrl_document + \"crud/copyFileTo\", parameters)\n  }\n\n  //POST /api/crud/downloadFile --> move file to another folder\n  downloadFile(parameters): Observable<any> {\n    return this.http.post(this.baseUrl_document + \"crud/downloadFile\", parameters)\n  }\n\n  //POST /api/crud/updateMetadata --> move file to another folder\n  updateMetadata(parameters): Observable<any> {\n    return this.http.post(this.baseUrl_document + \"crud/updateMetadata\", parameters)\n  }\n  \n  //POST /api/crud/deleteMetadata --> move file to another folder\n  deleteMetadata(parameters): Observable<any> {\n    return this.http.post(this.baseUrl_document + \"crud/deleteMetadata\", parameters)\n  }\n\n  //POST /api/public/search --> move file to another folder\n  searchAttestations(formId): Observable<any> {\n    return this.http.post(this.baseUrl_document + \"public/search?query=\"+encodeURIComponent('[attestation=\"'+formId+'\"]'), null)\n  }\n\n  //POST /api/crud/createFile --> create file\n  createFile(parameters): Observable<any> {\n    return this.http.post(this.baseUrl_document + \"crud/createFile\", parameters)\n  }\n\n\n  getContent(nodeId) : Observable<any> {\n    return this.http.get(this.baseUrl_document + \"public/getcontent?requestUUID=11&nodeid=\"+nodeId);\n  }\n\n\n  testConvert(parameters) : Observable<any> {\n    return this.http.post('/leiden_itant/', parameters).pipe(\n      timeout(10000)\n    );\n  }\n\n  testConvertItAnt(parameters) : Observable<any> {\n    return this.http.post('/leiden_itant/', parameters).pipe(\n      timeout(10000)\n    );\n  }\n\n  updateFileMetadata(parameters, element_id, request_uuid): Observable<any> {\n    return this.http.post(this.baseUrl_document + \"crud/updateFileMetadata?requestUUID=\"+request_uuid+\"&element-id=\"+element_id+\"\", parameters)\n  }\n}\n","/*\n   Copyright 2021-2022  Istituto di Linguistica Computazionale \"A. Zampolli\", Consiglio Nazionale delle Ricerche, Pisa, Italy.\n \nThis file is part of EpiLexo.\n\nEpiLexo is free software: you can redistribute it and/or modify it under the terms of the GNU General Public License as published by the Free Software Foundation, either version 3 of the License, or (at your option) any later version.\n\nEpiLexo is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for more details.\n\nYou should have received a copy of the GNU General Public License along with EpiLexo. If not, see <https://www.gnu.org/licenses/>.\n*/\n\nimport { Component, ElementRef, OnDestroy, OnInit, Renderer2, ViewChild } from '@angular/core';\nimport { ExpanderService } from 'src/app/services/expander/expander.service';\nimport { LexicalEntriesService } from 'src/app/services/lexical-entries/lexical-entries.service';\n\nimport {\n  animate,\n  style,\n  transition,\n  trigger,\n  state\n} from \"@angular/animations\";\nimport { Subscription } from 'rxjs';\n\n@Component({\n  selector: 'app-synsem-tab',\n  templateUrl: './synsem-tab.component.html',\n  styleUrls: ['./synsem-tab.component.scss'],\n  animations: [\n    trigger('slideInOut', [\n      state('in', style({\n        height: 'calc(100vh - 17rem)',\n        \n      })),\n      state('out', style({\n        height: 'calc(50vh - 12.5rem)',\n      })),\n      transition('in => out', animate('400ms ease-in-out')),\n      transition('out => in', animate('400ms ease-in-out'))\n    ])\n  ]\n})\nexport class SynsemTabComponent implements OnInit, OnDestroy {\n\n  lock = 0;\n  object: any;\n  exp_trig = '';\n  lexicalEntryData : any;\n  isLexicalEntry = false;\n\n  expander_epigraphy_subscription : Subscription;\n  expander_edit_subscription : Subscription;\n\n  @ViewChild('expander') expander_body: ElementRef;\n\n  constructor(private lexicalService: LexicalEntriesService, private expand: ExpanderService, private rend : Renderer2) { }\n\n  ngOnInit(): void {\n   /*  this.lexicalService.coreData$.subscribe(\n      object => {\n        if(this.object != object){\n          this.lexicalEntryData = null;\n        }\n        this.object = object\n        \n        if(this.object != null){\n          if(this.object.lexicalEntry != undefined && this.object.sense == undefined){\n            this.isLexicalEntry = true;\n            this.lexicalEntryData = object;\n          }else if(this.object.form != undefined){\n            this.isLexicalEntry = false;\n            this.lexicalEntryData = null;\n            this.object = null;\n          }else if(this.object.sense != undefined){\n            this.isLexicalEntry = false;\n            this.lexicalEntryData = null;\n            this.object = null;\n          }\n        }\n      }\n    ); */\n    \n    this.expander_edit_subscription = this.expand.expEdit$.subscribe(\n      trigger => {\n        if(trigger){\n          let isEditExpanded = this.expand.isEditTabExpanded();\n          let isEpigraphyExpanded = this.expand.isEpigraphyTabExpanded();\n\n          if(!isEpigraphyExpanded){\n            this.exp_trig = 'in';\n            this.rend.setStyle(this.expander_body.nativeElement, 'height', 'calc(100vh - 17rem)')\n            this.rend.setStyle(this.expander_body.nativeElement, 'max-height', 'calc(100vh - 17rem)')\n          }else{\n            this.rend.setStyle(this.expander_body.nativeElement, 'height', 'calc(50vh - 12.5rem)');\n            this.rend.setStyle(this.expander_body.nativeElement, 'max-height', 'calc(50vh - 12.5rem)');\n            this.exp_trig = 'in';\n          }\n          \n        }else if(trigger==null){\n          return;\n        }else{\n          this.rend.setStyle(this.expander_body.nativeElement, 'height', 'calc(50vh - 12.5rem)');\n          this.rend.setStyle(this.expander_body.nativeElement, 'max-height', 'calc(50vh - 12.5rem)');\n          this.exp_trig = 'out';\n        }\n      }\n    );\n\n    this.expander_epigraphy_subscription = this.expand.expEpigraphy$.subscribe(\n      trigger => {\n        setTimeout(() => {\n          if(trigger){\n            this.exp_trig = 'in';\n            this.rend.setStyle(this.expander_body.nativeElement, 'height', 'calc(50vh - 12.5rem)')\n            this.rend.setStyle(this.expander_body.nativeElement, 'max-height', 'calc(50vh - 12.5rem)')\n          }else if(trigger==null){\n            return;\n          }else{\n            this.rend.setStyle(this.expander_body.nativeElement, 'max-height', 'calc(50vh - 12.5rem)');\n            this.exp_trig = 'out';\n          }\n        }, 100);\n        \n      }\n    );\n  }\n\n  changeStatus() {\n    if (this.lock < 2) {\n      this.lock++;\n    } else if (this.lock > 1) {\n      this.lock--;\n    }\n    setTimeout(() => {\n      //@ts-ignore\n      $('.locked-tooltip').tooltip({\n        trigger: 'hover'\n      });\n    }, 10);\n  }\n\n  ngOnDestroy(): void {\n      this.expander_edit_subscription.unsubscribe();\n      this.expander_epigraphy_subscription.unsubscribe();\n  }\n\n}\n","\n\n<div id=\"cardsAccordion\" class=\"accordion\" [hidden]=\"object == null\">\n    <div class=\"card my-2\">\n        <div class=\"card-header\">\n            <h5 class=\"mb-0 w-100 d-flex justify-content-between align-self-center\">\n                <div>\n                    <span class=\"btn\">\n                        CREATED BY foo ON 11/12/2020 15:15\n                    </span>\n                </div>\n                <div>\n                    <button class=\"btn btn-link\">\n                        <i class=\"fa fa-trash\"></i>\n                    </button>\n                    <button class=\"btn btn-link\" (click)=\"changeStatus()\">\n                        <i class=\"fa fa-circle\" *ngIf=\"lock==0\" style=\"color: red\"></i>\n                        <i class=\"fa fa-circle\" *ngIf=\"lock==1\" style=\"color: yellow\"></i>\n                        <i class=\"fa fa-circle locked-tooltip\" *ngIf=\"lock==2\" data-toggle=\"tooltip\"\n                            data-placement=\"bottom\" data-html=\"true\" title=\"Locked tooltip\" style=\"color:green;\"></i>\n                    </button>\n                </div>\n            </h5>\n        </div>\n        <div #expander [@slideInOut]=\"exp_trig\" class=\"card-body\">\n            <app-lexical-entry-synsem-form [lexData]=\"lexicalEntryData\" *ngIf=\"isLexicalEntry\"></app-lexical-entry-synsem-form>\n        </div>\n        <div class=\"card-footer text-muted\">\n            <div class=\"w-100 d-flex justify-content-between align-items-center\">\n                <div>\n                    <span>LAST UPDATE ON 15/12/2020 14:30 BY foo</span>\n                </div>\n                <div class=\"btn-group dropup dropleft\">\n                    <button class=\"btn btn-success\" type=\"button\" id=\"dropdownAddLemma\" data-toggle=\"dropdown\"\n                        aria-haspopup=\"true\" aria-expanded=\"false\"> <i class=\"fas fa-plus\"></i> </button>\n                    <div class=\"dropdown-menu dropdown-menu-right\" aria-labelledby=\"dropdownAddLemma\">\n                        <a class=\"dropdown-item\" href=\"#\">Add Form</a>\n                        <a class=\"dropdown-item\" href=\"#\">Add Sense</a>\n                        <a class=\"dropdown-item\" href=\"#\">Add Frame</a>\n                        <a class=\"dropdown-item\" href=\"#\">Add Lexical Concept</a>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n</div>","/*\n   Copyright 2021-2022  Istituto di Linguistica Computazionale \"A. Zampolli\", Consiglio Nazionale delle Ricerche, Pisa, Italy.\n \nThis file is part of EpiLexo.\n\nEpiLexo is free software: you can redistribute it and/or modify it under the terms of the GNU General Public License as published by the Free Software Foundation, either version 3 of the License, or (at your option) any later version.\n\nEpiLexo is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for more details.\n\nYou should have received a copy of the GNU General Public License along with EpiLexo. If not, see <https://www.gnu.org/licenses/>.\n*/\n\nimport { Component, ElementRef, OnDestroy, OnInit, Renderer2, ViewChild } from '@angular/core';\nimport { LexicalEntriesService } from '../../../../../services/lexical-entries/lexical-entries.service';\nimport { ExpanderService } from 'src/app/services/expander/expander.service';\n\nimport {\n  animate,\n  style,\n  transition,\n  trigger,\n  state\n} from \"@angular/animations\";\nimport { ToastrService } from 'ngx-toastr';\nimport { Subject, Subscription } from 'rxjs';\nimport { take, takeUntil } from 'rxjs/operators';\n\n\n@Component({\n  selector: 'app-decomposition-tab',\n  templateUrl: './decomposition-tab.component.html',\n  styleUrls: ['./decomposition-tab.component.scss'],\n  animations: [\n    trigger('slideInOut', [\n      state('in', style({\n        height: 'calc(100vh - 17rem)',\n\n      })),\n      state('out', style({\n        height: 'calc(50vh - 12.5rem)',\n      })),\n      transition('in => out', animate('400ms ease-in-out')),\n      transition('out => in', animate('400ms ease-in-out'))\n    ])\n  ]\n})\nexport class DecompositionTabComponent implements OnInit, OnDestroy {\n\n  lock = 0;\n  object: any;\n  exp_trig = '';\n\n  creationDate;\n  lastUpdate;\n\n  isLexicalEntry = false;\n  searchIconSpinner = false;\n\n  decompData: any;\n  destroy$: Subject<boolean> = new Subject();\n  core_data_subscription: Subscription;\n  decomp_data_subscription: Subscription;\n  expand_edit_subscription: Subscription;\n  expand_epigraphy_subscription: Subscription;\n\n  @ViewChild('expander') expander_body: ElementRef;\n\n  constructor(private toastr: ToastrService, private lexicalService: LexicalEntriesService, private expand: ExpanderService, private rend: Renderer2) { }\n\n  ngOnInit(): void {\n    /* this.core_data_subscription = this.lexicalService.coreData$.subscribe(\n      object => {\n        this.object = null;\n        if(this.object != object){\n          this.decompData = null;\n        }\n        this.object = object\n        \n        if(this.object != null){\n          if(this.object.lexicalEntry != undefined && this.object.sense == undefined){\n            this.isLexicalEntry = true;\n            this.decompData = object;\n\n            this.creationDate = object['creationDate'];\n            this.lastUpdate = object['lastUpdate']\n          }else if(this.object.form != undefined){\n            this.isLexicalEntry = false;\n            this.decompData = null;\n            this.object = null;\n          }else if(this.object.sense != undefined){\n            this.isLexicalEntry = false;\n            this.decompData = null;\n            this.object = null;\n          }\n        }\n      }\n    ); */\n\n    this.decomp_data_subscription = this.lexicalService.decompData$.subscribe(\n      object => {\n        this.object = null;\n        if (this.object != object) {\n          this.decompData = null;\n        }\n        this.object = object\n\n        if (this.object != null) {\n          if (this.object.lexicalEntry != undefined && this.object.sense == undefined) {\n            this.isLexicalEntry = true;\n            this.decompData = object;\n\n            this.creationDate = object['creationDate'];\n            this.lastUpdate = object['lastUpdate']\n          } else if (this.object.form != undefined) {\n            this.isLexicalEntry = false;\n            this.decompData = null;\n            this.object = null;\n          } else if (this.object.sense != undefined) {\n            this.isLexicalEntry = false;\n            this.decompData = null;\n            this.object = null;\n          }\n        }\n      }\n    );\n\n\n    this.expand_edit_subscription = this.expand.expEdit$.subscribe(\n      trigger => {\n        setTimeout(() => {\n          if (trigger) {\n            let isEditExpanded = this.expand.isEditTabExpanded();\n            let isEpigraphyExpanded = this.expand.isEpigraphyTabExpanded();\n\n            if (!isEpigraphyExpanded) {\n              this.exp_trig = 'in';\n              this.rend.setStyle(this.expander_body.nativeElement, 'height', 'calc(100vh - 17rem)')\n              this.rend.setStyle(this.expander_body.nativeElement, 'max-height', 'calc(100vh - 17rem)')\n            } else {\n              this.rend.setStyle(this.expander_body.nativeElement, 'height', 'calc(50vh - 12.5rem)');\n              this.rend.setStyle(this.expander_body.nativeElement, 'max-height', 'calc(50vh - 12.5rem)');\n              this.exp_trig = 'in';\n            }\n\n          } else if (trigger == null) {\n            return;\n          } else {\n            this.rend.setStyle(this.expander_body.nativeElement, 'height', 'calc(50vh - 12.5rem)');\n            this.rend.setStyle(this.expander_body.nativeElement, 'max-height', 'calc(50vh - 12.5rem)');\n            this.exp_trig = 'out';\n          }\n        }, 100);\n\n      }\n    );\n\n    this.expand_epigraphy_subscription = this.expand.expEpigraphy$.subscribe(\n      trigger => {\n        setTimeout(() => {\n          if (trigger) {\n            this.exp_trig = 'in';\n            this.rend.setStyle(this.expander_body.nativeElement, 'height', 'calc(50vh - 12.5rem)')\n            this.rend.setStyle(this.expander_body.nativeElement, 'max-height', 'calc(50vh - 12.5rem)')\n          } else if (trigger == null) {\n            return;\n          } else {\n            this.rend.setStyle(this.expander_body.nativeElement, 'max-height', 'calc(50vh - 12.5rem)');\n            this.exp_trig = 'out';\n          }\n        }, 100);\n\n      }\n    );\n  }\n\n  /* changeStatus() {\n    if (this.lock < 2) {\n      this.lock++;\n    } else if (this.lock > 1) {\n      this.lock--;\n    }\n\n    if(this.lock==2){\n      setTimeout(() => {\n        //@ts-ignore\n        $('.locked-tooltip').tooltip({\n          trigger: 'hover'\n        });\n      }, 10);\n    }else if(this.lock < 2){\n      setTimeout(() => {\n        //@ts-ignore\n        $('.locked-tooltip').tooltip('disable');\n      }, 10);\n    }\n    \n  } */\n\n  addNewForm() {\n    this.searchIconSpinner = true;\n    /* console.log(this.object) */\n    this.object['request'] = 'form'\n    if (this.isLexicalEntry) {\n      let lexicalId = this.object.lexicalEntry;\n      this.lexicalService.createNewForm(lexicalId).pipe(takeUntil(this.destroy$)).subscribe(\n        data => {\n          this.toastr.success('Form added correctly', '', {\n            timeOut: 5000,\n          });\n          console.log(data);\n          if (data['creator'] == this.object.creator) {\n            data['flagAuthor'] = false;\n          } else {\n            data['flagAuthor'] = true;\n          }\n          this.lexicalService.addSubElementRequest({ 'lex': this.object, 'data': data });\n          this.searchIconSpinner = false;\n        }, error => {\n          console.log(error)\n          this.toastr.error(error.error, 'Error', {\n            timeOut: 5000,\n          });\n          this.searchIconSpinner = false;\n        }\n      )\n    }\n\n  }\n\n  addNewSense() {\n    this.searchIconSpinner = true;\n    this.object['request'] = 'sense'\n    if (this.isLexicalEntry) {\n      let lexicalId = this.object.lexicalEntry;\n      this.lexicalService.createNewSense(lexicalId).pipe(takeUntil(this.destroy$)).subscribe(\n        data => {\n          if (data['creator'] == this.object.creator) {\n            data['flagAuthor'] = false;\n          } else {\n            data['flagAuthor'] = true;\n          }\n          this.lexicalService.addSubElementRequest({ 'lex': this.object, 'data': data });\n          this.searchIconSpinner = false;\n          this.toastr.success('Sense added correctly', '', {\n            timeOut: 5000,\n          });\n        }, error => {\n          this.searchIconSpinner = false;\n          this.toastr.error(error.error, 'Error', {\n            timeOut: 5000,\n          });\n\n        }\n      )\n    }/* else if(this.isSense){\n      let parentNodeInstanceName = this.object.parentNodeInstanceName;\n      this.object['lexicalEntry'] = parentNodeInstanceName\n      this.object['request'] = 'sense'\n      //console.log(this.object);\n      this.lexicalService.createNewSense(parentNodeInstanceName).subscribe(\n        data=>{\n          if(data['creator'] == this.object.creator){\n            data['flagAuthor'] = false;\n          }else{\n            data['flagAuthor'] = true;\n          }\n          this.lexicalService.addSubElementRequest({'lex' : this.object, 'data' : data});\n          this.searchIconSpinner = false;\n          this.toastr.success('Sense added correctly', '', {\n            timeOut: 5000,\n          });\n        },error=> {\n          this.searchIconSpinner = false;\n          this.toastr.error(error.error, 'Error', {\n            timeOut: 5000,\n          });\n        }\n      )\n    }else if(this.isForm){\n      let parentNodeInstanceName = this.object.parentNodeInstanceName;\n      this.object['lexicalEntry'] = parentNodeInstanceName\n      this.object['request'] = 'sense'\n      //console.log(this.object);\n      this.lexicalService.createNewSense(parentNodeInstanceName).subscribe(\n        data=>{\n          if(data['creator'] == this.object.creator){\n            data['flagAuthor'] = false;\n          }else{\n            data['flagAuthor'] = true;\n          }\n          this.lexicalService.addSubElementRequest({'lex' : this.object, 'data' : data});\n          this.searchIconSpinner = false;\n          this.toastr.success('Sense added correctly', '', {\n            timeOut: 5000,\n          });\n          //this.lexicalService.refreshLexEntryTree();\n        },error=> {\n          this.searchIconSpinner = false;\n          this.toastr.error(error.error, 'Error', {\n            timeOut: 5000,\n          });\n          //this.lexicalService.refreshLexEntryTree();\n        }\n      )\n    } */\n\n  }\n\n  addNewEtymology() {\n    this.searchIconSpinner = true;\n    this.object['request'] = 'etymology'\n    let parentNodeInstanceName = '';\n    if (this.object.lexicalEntry != undefined\n      && this.object.senseInstanceName == undefined) {\n      console.log(1)\n      parentNodeInstanceName = this.object.lexicalEntry;\n    }/* else if(this.object.formInstanceName != undefined){\n      parentNodeInstanceName = this.object.parentNodeInstanceName;\n      this.object['lexicalEntry'] = parentNodeInstanceName\n      console.log(2)\n    }else if(this.object.senseInstanceName != undefined){\n      parentNodeInstanceName = this.object.parentNodeInstanceName;\n      this.object['lexicalEntry'] = parentNodeInstanceName\n      console.log(3)\n    } */\n\n    console.log(parentNodeInstanceName)\n    this.lexicalService.createNewEtymology(parentNodeInstanceName).pipe(takeUntil(this.destroy$)).subscribe(\n      data => {\n        console.log(data)\n        if (data['creator'] == this.object.creator) {\n          data['flagAuthor'] = false;\n        } else {\n          data['flagAuthor'] = true;\n        }\n        this.lexicalService.addSubElementRequest({ 'lex': this.object, 'data': data });\n        this.searchIconSpinner = false;\n        this.toastr.success('Etymology added correctly', '', {\n          timeOut: 5000,\n        });\n      }, error => {\n        this.searchIconSpinner = false;\n      }\n    )\n\n  }\n\n  ngOnDestroy(): void {\n    //this.core_data_subscription.unsubscribe();\n    this.expand_edit_subscription.unsubscribe();\n    this.expand_epigraphy_subscription.unsubscribe();\n\n    this.destroy$.next(true);\n    this.destroy$.complete();\n  }\n\n}\n","\n\n<div id=\"cardsAccordion\" class=\"accordion\" [hidden]=\"object == null\">\n    <div class=\"card my-2\">\n        <div class=\"card-header\">\n            <h5 class=\"mb-0 w-100 d-flex justify-content-between align-self-center\">\n                <div>\n                    <span class=\"btn\" *ngIf=\"object != null\">\n                        CREATED BY {{object.creator}} ON {{creationDate | date :'dd/MM/yyyy hh:mm:ss'}}\n                    </span>\n                </div>\n                <div>\n                    <div class=\"spinner-border spinner-border-sm m-1\" role=\"status\" *ngIf=\"searchIconSpinner\">\n                        <span class=\"sr-only\">Loading...</span>\n                    </div>\n                    <!-- <button class=\"btn btn-link\">\n                        <i class=\"fa fa-trash\"></i>\n                    </button> -->\n                    <!-- <button class=\"btn btn-link\" (click)=\"changeStatus()\">\n                        <i class=\"fa fa-circle\" *ngIf=\"lock==0\" style=\"color: red\"></i>\n                        <i class=\"fa fa-circle\" *ngIf=\"lock==1\" style=\"color: yellow\"></i>\n                        <i class=\"fa fa-circle locked-tooltip\" *ngIf=\"lock==2\" data-toggle=\"tooltip\"\n                            data-placement=\"bottom\" data-html=\"true\" title=\"Locked tooltip\" style=\"color:green;\"></i>\n                    </button> -->\n                </div>\n            </h5>\n        </div>\n        <div #expander [@slideInOut]=\"exp_trig\" class=\"card-body\">\n            \n            <app-lexical-entry-decomp-form [decData]=\"decompData\" *ngIf=\"isLexicalEntry\"></app-lexical-entry-decomp-form>\n            \n        </div>\n        <div class=\"card-footer text-muted\">\n            <div class=\"w-100 d-flex justify-content-between align-items-center\">\n                <div *ngIf=\"object != null\">\n                    <span>LAST UPDATE ON {{lastUpdate | date :'dd/MM/yyyy hh:mm:ss'}} BY {{object.revisor}}</span>\n                </div>\n                <div class=\"btn-group dropup dropleft\">\n                    <button class=\"btn btn-success\" type=\"button\" id=\"dropdownAddLemma\" data-toggle=\"dropdown\"\n                        aria-haspopup=\"true\" aria-expanded=\"false\"> <i class=\"fas fa-plus\"></i> </button>\n                    <div class=\"dropdown-menu dropdown-menu-right\" aria-labelledby=\"dropdownAddLemma\">\n                        <button class=\"dropdown-item\" title=\"add new form\" (click)=\"addNewForm()\">Add Form</button>\n                        <button class=\"dropdown-item\" title=\"add new sense\" (click)=\"addNewSense()\">Add Sense</button>\n                        <button class=\"dropdown-item\" title=\"add new etymology\" (click)=\"addNewEtymology()\">Add Etymology</button>\n                        <!-- <button class=\"dropdown-item\" title=\"add new bibliography item\" (click)=\"showBiblioModal()\" disabled>Add Bibliography</button> -->\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n</div>","/*\n   Copyright 2021-2022  Istituto di Linguistica Computazionale \"A. Zampolli\", Consiglio Nazionale delle Ricerche, Pisa, Italy.\n \nThis file is part of EpiLexo.\n\nEpiLexo is free software: you can redistribute it and/or modify it under the terms of the GNU General Public License as published by the Free Software Foundation, either version 3 of the License, or (at your option) any later version.\n\nEpiLexo is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for more details.\n\nYou should have received a copy of the GNU General Public License along with EpiLexo. If not, see <https://www.gnu.org/licenses/>.\n*/\n\nimport { Component, OnInit } from '@angular/core';\n\n@Component({\n  selector: 'app-home-page',\n  templateUrl: './home-page.component.html',\n  styleUrls: ['./home-page.component.scss']\n})\nexport class HomePageComponent implements OnInit {\n\n  constructor() { }\n\n  ngOnInit(): void {\n  }\n\n}\n","\n\n<div class=\"cover-container d-flex w-100 p-3 mx-auto flex-column text-center\">\n\n    <div class=\"starter-template\">\n        <h3>Institute for Computational Linguistics (ILC)</h3>\n        <p class=\"lead\">\"A. Zampolli CNR - Pisa, Italy\"<br> <a href=\"http://www.ilc.cnr.it\" target=\"_blank\">www.ilc.cnr.it</a></p>\n        <img class=\"logo\" src=\"../../../assets/images/LexOIcon.png\" width=\"100\"/>\n        <h5 class=\"title\">epilexo v1.0</h5>\n        \n    </div>\n    <footer class=\"mastfoot\">\n        <div class=\"inner\">\n          <p>Institute for Computational Linguistics \"A. Zampolli\", Pisa <br/> <a href=\"https://www.ilc.cnr.it.com/\">http://ilc.cnr.it</a></p>\n        </div>\n    </footer>\n</div>\n","import { HttpClient, HttpHeaders } from '@angular/common/http';\nimport { Injectable } from '@angular/core';\nimport { KeycloakService } from 'keycloak-angular';\nimport { KeycloakProfile, KeycloakTokenParsed } from 'keycloak-js';\nimport { from, Observable } from 'rxjs';\nimport { environment } from 'src/environments/environment';\n\n@Injectable()\nexport class AuthService {\n\n  private baseUrl = environment.keycloak.issuer;\n  private realmId = environment.keycloak.realm;\n  private clientId = environment.keycloak.clientId;\n  \n\n\n  constructor(private keycloakService: KeycloakService, private http: HttpClient) {}\n\n  public getLoggedUser(): KeycloakTokenParsed | undefined {\n    try {\n      const userDetails: KeycloakTokenParsed | undefined = this.keycloakService.getKeycloakInstance()\n        .idTokenParsed;\n      return userDetails;\n    } catch (e) {\n      console.error(\"Exception\", e);\n      return undefined;\n    }\n  }\n\n  public isLoggedIn() : Promise<boolean> {\n    return this.keycloakService.isLoggedIn();\n  }\n\n  public loadUserProfile() : Promise<KeycloakProfile> {\n    return this.keycloakService.loadUserProfile();\n  }\n\n  public login() : void {\n    this.keycloakService.login();\n  }\n\n  public logout() : void {\n  \n    this.keycloakService.logout();\n  }\n\n  public redirectToProfile(): void {\n    this.keycloakService.getKeycloakInstance().accountManagement();\n  }\n\n  public getUsername(): any {\n    if(this.getLoggedUser() != undefined){\n      return this.getLoggedUser()['preferred_username'];\n    }else{\n      window.location.reload();\n      return null;\n    }\n    \n  }\n\n  public getCurrentUserRole(): string[] {\n    return this.keycloakService.getKeycloakInstance().realmAccess.roles;\n  }\n\n  public searchUser(search?): any {\n    let string = this.baseUrl + 'admin/realms/' + this.realmId + '/users';\n    if(search != undefined){\n      string += '?search='+search;\n    }\n    return this.http.get(string);\n  }\n\n  public getUserByUsername(username?): any {\n    let string = this.baseUrl + 'admin/realms/' + this.realmId + '/users';\n    if(username != undefined){\n      string += '?username='+username;\n    }\n    return this.http.get(string);\n  }\n\n\n  public getUserRoles(userId: string, clientId: string): any {\n    //let string = this.baseUrl + 'admin/realms/' + this.realmId + '/users/' + id + '/role-mappings/realm';\n    let string = this.baseUrl + 'admin/realms/' + this.realmId + '/users/'+ userId +'/role-mappings/clients/' + clientId;\n    return this.http.get(string)\n  }\n\n  public getAllClientsRoles(id: string): any {\n    let string = this.baseUrl + 'admin/realms/' + this.realmId  + '/clients/' + id + '/roles/';\n    return this.http.get(string)\n  }\n\n\n  public getClientsInfo(): any {\n    let string = this.baseUrl + 'admin/realms/' + this.realmId + '/clients/';\n    return this.http.get(string)\n  }\n\n  public getUserInfo(id): any {\n    let string = this.baseUrl + 'admin/realms/' + this.realmId + '/users/' + id;\n    return this.http.get(string);\n  }\n\n  public getUsersByRole(id, role_name){\n    \n    let string = this.baseUrl + 'admin/realms/' + this.realmId + '/clients/' + id + '/roles/' + role_name +'/users';\n    return this.http.get(string);\n  }\n\n  public createUser(parameters) {\n    let string = this.baseUrl +'admin/realms/' + this.realmId + '/users/';\n    return this.http.post(string, parameters)\n  }\n\n  public deleteUser(idUser : string) {\n    let string = this.baseUrl +'admin/realms/' + this.realmId + '/users/' + idUser;\n    return this.http.delete(string)\n  }\n\n  public updateUser(idUser : string, body) {\n    let string = this.baseUrl +'admin/realms/' + this.realmId + '/users/' + idUser;\n    return this.http.put(string, body)\n  }\n\n  public assignRolesToUser(userId, clientId, parameters) {\n    let string = this.baseUrl +'admin/realms/' + this.realmId + '/users/' + userId + '/role-mappings/clients/' + clientId ;\n    return this.http.post(string, parameters)\n  }\n\n  public deleteRolesToUser(userId, clientId, parameters) {\n    let options = { headers: new HttpHeaders().set('Content-Type', 'application/json'), body: parameters };\n    let string = this.baseUrl +'admin/realms/' + this.realmId + '/users/' + userId + '/role-mappings/clients/' + clientId ;\n    return this.http.delete(string, options)\n  }\n}","/*\n   Copyright 2021-2022  Istituto di Linguistica Computazionale \"A. Zampolli\", Consiglio Nazionale delle Ricerche, Pisa, Italy.\n \nThis file is part of EpiLexo.\n\nEpiLexo is free software: you can redistribute it and/or modify it under the terms of the GNU General Public License as published by the Free Software Foundation, either version 3 of the License, or (at your option) any later version.\n\nEpiLexo is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for more details.\n\nYou should have received a copy of the GNU General Public License along with EpiLexo. If not, see <https://www.gnu.org/licenses/>.\n*/\n\n// This file can be replaced during build by using the `fileReplacements` array.\n// `ng build --prod` replaces `environment.ts` with `environment.prod.ts`.\n// The list of file replacements can be found in `angular.json`.\n\nexport const environment = {\n  production: false,\n  keycloak: {\n    // Url of the Identity Provider\n    issuer: 'https://digitant.ilc.cnr.it/auth_demo/',\n\n    // Realm\n    realm: 'princnr',\n\n    // The SPA's id. \n    // The SPA is registerd with this id at the auth-server\n    clientId: 'princlient',\n  }\n};\n\n/*\n * For easier debugging in development mode, you can import the following file\n * to ignore zone related error stack frames such as `zone.run`, `zoneDelegate.invokeTask`.\n *\n * This import should be commented out in production mode because it will have a negative impact\n * on performance if an error is thrown.\n */\n// import 'zone.js/dist/zone-error';  // Included with Angular CLI.\n","<form [formGroup]=\"skosFilterForm\">\n  <div class=\"input-group col-md-12 mt-2 px-1\">\n    <input formControlName=\"search_text\" id=\"filterConcept\" name=\"search_text\" type=\"text\" class=\"form-control\"\n      placeholder=\"Search\" />\n    <div class=\"input-group-append\">\n      <span class=\"input-group-text loading_icon_append border-left-0\" id=\"basic-addon2\">\n        <div class=\"spinner-border spinner-border-sm m-1\" role=\"status\" *ngIf=\"searchIconSpinner\">\n          <span class=\"sr-only\">Loading...</span>\n        </div>\n      </span>\n    </div>\n    <div id=\"buttons-container\" class=\"input-group-append\">\n\n      <!-- <button class=\"btn btn-sm btn-secondary btn-block filter-button\" type=\"button\" value=\"Filter\" title=\"Filter\"\n        data-toggle=\"collapse\" data-target=\"#conceptFilterCollapse\" aria-expanded=\"false\"\n        aria-controls=\"conceptFilterCollapse\"><i class=\"fa fa-filter\"></i></button> -->\n      <button class=\"btn btn-sm btn-danger btn-block reset-button\" type=\"button\" value=\"Reset\" title=\"Reset\"\n        (click)=\"resetFields();\" style=\"border-top-right-radius: .25rem; border-bottom-right-radius: .25rem;\"><i\n          class=\"fa fa-times\"></i></button>\n      <button class=\"btn btn-sm btn-block counter-button\" type=\"button\"><span\n          class=\"font-weight-bold font-italic text-muted\">{{counter}}</span></button>\n    </div>\n  </div>\n\n  <div class=\"d-flex flex-wrap mt-3\">\n\n    <div class=\"col-md-6 col-sm-6\">\n      <div class=\"form-check\">\n        <input formControlName=\"search_mode\" class=\"form-check-input\" type=\"radio\" name=\"search_mode\" id=\"startsRadio\"\n          value=\"startsWith\">\n        <label class=\"form-check-label\" for=\"startsRadio\">\n          Starts\n        </label>\n      </div>\n    </div>\n    <div class=\"col-md-6 col-sm-6\">\n      <div class=\"form-check\">\n        <input formControlName=\"search_mode\" class=\"form-check-input\" type=\"radio\" name=\"search_mode\" id=\"containsRadio\"\n          value=\"contains\">\n        <label class=\"form-check-label\" for=\"containsRadio\">\n          Contains\n        </label>\n      </div>\n    </div>\n\n  </div>\n\n</form>\n\n<!-- <div class=\"d-flex flex-wrap mt-3 col-md-12\">\n    <div class=\"input-group justify-content-end\">\n      <div class=\"input-group-append\">\n        <button class=\"btn btn-light btn-block filter-button\" title=\"Add new child for selected node\"><i\n            class=\"fas fa-plus 2x\"></i></button>\n        <button class=\"btn btn-light btn-block reset-button\" type=\"button\" value=\"Reset\"\n          title=\"Add new sibling for selected node\"\n          style=\"border-top-right-radius: .25rem; border-bottom-right-radius: .25rem;\"><i\n            class=\"fas fa-user-plus 2x\"></i></button>\n        <button class=\"btn btn-light btn-block reset-button\" type=\"button\" value=\"Reset\" title=\"Delete selected node\"\n          style=\"border-top-right-radius: .25rem; border-bottom-right-radius: .25rem;\"><i\n            class=\"fas fa-times-circle 2x\"></i></button>\n  \n      </div>\n    </div>\n  </div> -->\n\n\n<div id=\"skos-tree\" class=\"col-md-12 mt-3 rounded border border-secondary tree-view\" infiniteScroll\n  [infiniteScrollDistance]=\"0.4\" [infiniteScrollThrottle]=\"150\" [fromRoot]=\"true\"\n  (scrolled)=\"onScrollDown(skosTree.treeModel)\">\n  <!-- [infiniteScrollContainer]=\"'.search-results'\" -->\n  <p *ngIf=\"show\">Nessun risultato</p>\n\n  <tree-root #skosTree [nodes]=\"skos_nodes\" [options]=\"options\" [focused]=\"true\" (activate)=\"onEvent($event)\"\n    (moveNode)=\"onMoveNode($event)\">\n    <ng-template #treeNodeTemplate let-node let-index=\"index\">\n\n      <div [contextMenu]=\"skosMenu\" [contextMenuSubject]=\"node.data\">\n        <span  *ngIf=\"node.data.conceptSet != undefined\">\n          <i class=\"fas fa-cubes fa-lg\"></i> <b class=\"ml-2\">{{ node.data.defaultLabel.split('#')[1] == undefined ? node.data.defaultLabel : node.data.defaultLabel.split('#')[1] }} </b>\n        </span>\n  \n        <span  *ngIf=\"node.data.lexicalConcept != undefined\">\n          <i class=\"fas fa-cube fa-lg\"></i> <span class=\"font-italic ml-2\">{{ node.data.defaultLabel.split('#')[1] == undefined ? node.data.defaultLabel : node.data.defaultLabel.split('#')[1] }} </span>\n        </span>\n      </div>\n     \n\n    </ng-template>\n    <ng-template #loadingTemplate let-loadingNode>\n      <div *ngIf=\"loadingNode.hasChildren\">\n        <div class=\"spinner-border spinner-border-sm m-1\" role=\"status\">\n          <span class=\"sr-only\">Loading...</span>\n        </div>\n      </div>\n    </ng-template>\n  </tree-root>\n\n  <context-menu>\n\n    <!-- FOLDER CONTEXT MENU -->\n    \n\n    <ng-template contextMenuItem let-item [visible]=\"isLexicalConcept\" (execute)=\"addLexicalConcept($event.item, 'lexicalConcept')\">\n      Add Lexical Concept (child)\n    </ng-template>\n\n\n    <ng-template contextMenuItem let-item [visible]=\"isLexicalConcept\" (execute)=\"deleteLexicalConcept($event.item)\">\n      Delete Lexical Concept\n\n     \n    </ng-template>\n    \n  </context-menu>\n</div>\n\n\n<ng-template #lexicalConceptRemoverModal let-modal *ngIf=\"nodeToRemove != null\">\n  <div class=\"modal-header\">\n    <h4 class=\"modal-title\" id=\"modal-basic-title\">Profile update</h4>\n    <button type=\"button\" class=\"close\" aria-label=\"Close\" (click)=\"modal.close('')\">\n      <span aria-hidden=\"true\">&times;</span>\n    </button>\n  </div>\n  <div class=\"modal-body\">\n    You want to delete only {{nodeToRemove.defaultLabel}} or ALL their children?\n\n    <form [formGroup]=\"processRequestForm\">\n      <div class=\"form-check\">\n        <input class=\"form-check-input\" type=\"radio\" formControlName=\"oneOrAll\" id=\"onlyOne\" value=\"one\" checked>\n        <label class=\"form-check-label\" for=\"onlyOne\">\n          Delete only {{nodeToRemove.defaultLabel}}\n        </label>\n      </div>\n      <div class=\"form-check\">\n        <input class=\"form-check-input\" type=\"radio\" formControlName=\"oneOrAll\" id=\"allChildren\" value=\"all\">\n        <label class=\"form-check-label\" for=\"allChildren\">\n          Delete {{nodeToRemove.defaultLabel}} and all their children\n        </label>\n      </div>\n    </form>\n    \n  </div>\n  <div class=\"modal-footer\">\n    <button type=\"button\" class=\"btn btn-outline-dark\" (click)=\"modal.close('')\">Cancel</button>\n    <button type=\"button\" class=\"btn btn-danger\" (click)=\"processRequest(); modal.close()\">Yes</button>\n  </div>\n</ng-template>","import { Component, ElementRef, OnDestroy, OnInit, ViewChild } from '@angular/core';\nimport { FormGroup, FormControl, FormBuilder } from '@angular/forms';\nimport { IActionMapping, TREE_ACTIONS, KEYS, ITreeState, ITreeOptions, TreeModel, TreeNode } from '@circlon/angular-tree-component';\nimport { NgbActiveModal, NgbModal, NgbModalRef } from '@ng-bootstrap/ng-bootstrap';\nimport { ContextMenuComponent } from 'ngx-contextmenu';\nimport { ToastrService } from 'ngx-toastr';\nimport { Subject } from 'rxjs';\nimport { debounceTime, takeUntil, tap, timeout } from 'rxjs/operators';\nimport { BibliographyService } from 'src/app/services/bibliography-service/bibliography.service';\nimport { ConceptService } from 'src/app/services/concept/concept.service';\nimport { ExpanderService } from 'src/app/services/expander/expander.service';\nimport { LexicalEntriesService } from 'src/app/services/lexical-entries/lexical-entries.service';\nimport { v4 } from 'uuid';\n\nconst actionMapping: IActionMapping = {\n  mouse: {\n    /* dblClick: (tree, node, $event) => {\n      if (node.hasChildren) {\n        TREE_ACTIONS.TOGGLE_EXPANDED(tree, node, $event);\n      }\n    }, */\n    click: (tree, node, $event) => {\n      $event.shiftKey\n        ? TREE_ACTIONS.TOGGLE_ACTIVE_MULTI(tree, node, $event)\n        : TREE_ACTIONS.TOGGLE_ACTIVE(tree, node, $event);\n\n      if (node.data.rename_mode) {\n        $event.preventDefault();\n      }/* else{\n        TREE_ACTIONS.TOGGLE_ACTIVE(tree, node, $event);\n      } */\n    },\n    expanderClick: (tree, node, $event) => {\n      if (node.data.rename_mode) {\n        $event.preventDefault();\n      } else {\n        //console.log(node);\n        TREE_ACTIONS.TOGGLE_EXPANDED(tree, node, $event);\n      }\n    }\n    /* contextMenu: (tree, node, $event) => {\n      //$event.preventDefault();\n      //alert(`context menu for ${node.data.name}`);\n      TREE_ACTIONS.TOGGLE_ACTIVE(tree, node, $event);\n    } */\n  },\n  keys: {\n    [KEYS.ENTER]: (tree, node, $event) => alert(`This is ${node.data.name}`)\n  }\n};\n\n\n@Component({\n  selector: 'app-skos-tree',\n  templateUrl: './skos-tree.component.html',\n  styleUrls: ['./skos-tree.component.scss']\n})\nexport class SkosTreeComponent implements OnInit, OnDestroy {\n\n  state!: ITreeState;\n  @ViewChild('skosTree') skosTree: any;\n  @ViewChild('lexicalConceptRemoverModal') lexicalConceptRemoverModal;\n  @ViewChild(ContextMenuComponent) public skosMenu: ContextMenuComponent;\n\n  selectedNodeId;\n  destroy$: Subject<boolean> = new Subject();\n\n\n\n  searchIconSpinner = false;\n  initialValues\n  skosFilterForm = new FormGroup({\n    search_text: new FormControl(null),\n    search_mode: new FormControl(null)\n  })\n\n  counter = 0;\n  skos_nodes = [];\n  show = false;\n  offset: number;\n  modalShow: boolean;\n  limit: any;\n\n  processRequestForm : FormGroup;\n\n  nodeToRemove : any;\n\n  options: ITreeOptions = {\n    getChildren: this.getChildren.bind(this),\n    actionMapping,\n    allowDrag: (node) => {\n      return node.data.conceptSet == undefined;\n    },\n    allowDrop: (element, { parent, index }) => {\n      // return true / false based on element, to.parent, to.index. e.g.\n      //console.log(element, parent, index, parent.data.type == 'folder')\n      return element.data.conceptSet == undefined;\n    },\n    getNodeClone: (node) => ({\n      ...node.data,\n      id: v4(),\n      name: `copy of ${node.data.name}`\n    })\n  };\n  \n  \n\n  constructor(private element: ElementRef,\n    private formBuilder: FormBuilder,\n    private lexicalService: LexicalEntriesService,\n    private conceptService: ConceptService,\n    private expander: ExpanderService,\n    private toastr: ToastrService,\n    private biblioService : BibliographyService,\n    private modalService: NgbModal,\n\n  ) { }\n\n  ngOnInit(): void {\n\n    this.processRequestForm = this.formBuilder.group(\n      {\n        oneOrAll : new FormControl('one'),\n      }\n    )\n    \n    this.skosFilterForm = this.formBuilder.group({\n      search_text: new FormControl(null),\n      search_mode: new FormControl('startsWith')\n    })\n    this.onChanges();\n    this.initialValues = this.skosFilterForm.value\n    this.loadTree();\n    this.conceptService.deleteSkosReq$.pipe(takeUntil(this.destroy$)).subscribe(\n      signal => {\n\n        if (signal != null) {\n          this.skosDeleteRequest(signal);\n        }\n\n      }\n    )\n\n    this.conceptService.addSubReq$.subscribe(\n      signal => {\n\n        if (signal != null) {\n          this.addSubElement(signal)\n        }\n      }\n    )\n  }\n\n\n  onChanges() {\n\n    this.skosFilterForm.valueChanges.pipe(debounceTime(500), takeUntil(this.destroy$)).subscribe(searchParams => {\n      console.log(searchParams)\n      this.searchFilter(searchParams)\n    })\n  }\n\n  onEvent = ($event: any) => {\n    console.log($event);\n\n    if ($event.eventName == 'activate' &&\n      $event.node.data.conceptSet != undefined /* &&\n      this.selectedNodeId != $event.node.data.conceptSet */) {\n\n      /* setTimeout(() => {\n        this.selectedNodeId = $event.node.data.conceptSet;\n        this.lexicalService.sendToCoreTab($event.node.data);\n        this.lexicalService.sendToRightTab($event.node.data);\n        this.lexicalService.updateCoreCard({ lastUpdate: $event.node.data['lastUpdate'], creationDate: $event.node.data['creationDate'] })\n        if (!this.expander.isEditTabOpen() && !this.expander.isEpigraphyTabOpen()) {\n          if (!this.expander.isEditTabExpanded() && !this.expander.isEpigraphyTabExpanded()) {\n\n            this.expander.expandCollapseEdit(true);\n            this.expander.openCollapseEdit(true);\n          }\n        } else if (!this.expander.isEditTabOpen() && this.expander.isEpigraphyTabOpen()) {\n          if (!this.expander.isEditTabExpanded() && this.expander.isEpigraphyTabExpanded()) {\n            this.expander.expandCollapseEpigraphy(false);\n            this.expander.openCollapseEdit(true)\n          }\n        }\n      }, 10); */\n    } else if ($event.eventName == 'activate' &&\n      $event.node.data.lexicalConcept != undefined /* &&\n      this.selectedNodeId != $event.node.data.lexicalConcept */) {\n\n      let instance = $event.node.data.lexicalConcept;\n      this.conceptService.getLexicalConceptData(instance).pipe(takeUntil(this.destroy$)).subscribe(\n        data=> {\n          this.selectedNodeId = data.lexicalConcept;\n          this.lexicalService.sendToCoreTab(data);\n          this.lexicalService.sendToRightTab(data);\n          console.log(data)\n          this.lexicalService.updateCoreCard({ lastUpdate: data['lastUpdate'], creationDate: $event.node.data['creationDate'] })\n          if (!this.expander.isEditTabOpen() && !this.expander.isEpigraphyTabOpen()) {\n            if (!this.expander.isEditTabExpanded() && !this.expander.isEpigraphyTabExpanded()) {\n\n              this.expander.expandCollapseEdit(true);\n              this.expander.openCollapseEdit(true);\n            }\n          } else if (!this.expander.isEditTabOpen() && this.expander.isEpigraphyTabOpen()) {\n            if (!this.expander.isEditTabExpanded() && this.expander.isEpigraphyTabExpanded()) {\n              this.expander.expandCollapseEpigraphy(false);\n              this.expander.openCollapseEdit(true)\n            }\n          }\n\n          if (data.note != undefined) {\n            if (data.note != \"\") {\n              this.lexicalService.triggerNotePanel(true);\n            } else {\n              this.lexicalService.triggerNotePanel(false);\n            }\n          }\n        },\n        \n        error=>{\n          console.log(error)\n        }\n      );\n    }\n  }\n\n  isConceptSet = (item: any): boolean => {\n    return item.conceptSet != undefined && item.conceptSet != '';\n  }\n\n  isLexicalConcept = (item: any): boolean => {\n    return item.lexicalConcept != undefined && item.lexicalConcept != '';\n  }\n\n  onMoveNode($event) {\n    console.log($event);\n    \n    if ($event != undefined) {\n      //console.log(evt);\n      \n\n      let node_source = $event.node.lexicalConcept;\n      let node_target = $event.to.parent.lexicalConcept;\n\n      let parameters = {\n        relation : \"http://www.w3.org/2004/02/skos/core#narrower\",\n        source : node_source,\n        target : node_target\n      }\n\n      if(node_target != undefined){\n        this.conceptService.updateSemanticRelation(parameters).pipe(takeUntil(this.destroy$)).subscribe(\n          next=>{\n            console.log(next);\n          },error=>{\n            console.log(error);\n            if(error.status == 200){\n              this.toastr.success('Lexical concept moved', '', {timeOut : 5000})\n            }else{\n              this.toastr.error(error.error, '', {timeOut : 5000})\n            }\n          },()=>{\n            console.log('complete')\n          }\n        )\n      }else{\n        let from_node = $event.from.parent.lexicalConcept;\n\n        let parameters = {\n          relation : \"http://www.w3.org/2004/02/skos/core#narrower\",\n          value : from_node,\n\n        }\n\n        if(from_node != undefined){\n          this.conceptService.deleteRelation(node_source, parameters).pipe(takeUntil(this.destroy$)).subscribe(\n            data=>{\n              console.log(data);\n              this.toastr.success('Lexical Concept moved', '', {timeOut : 5000})\n            },\n            error=>{\n              console.log(error);\n              if(error.status == 200){\n                this.toastr.success('Lexical Concept moved', '', {timeOut : 5000})\n              }else{\n                this.toastr.error('Error on moving Lexical Concept')\n              }\n            }\n          )\n        }\n        \n      }\n\n      \n    }\n\n  }\n\n  async loadTree() {\n    let conceptSets = []\n    let rootConceptSets = [];\n    let tmp = [];\n\n    /* try {\n      conceptSets = await this.conceptService.getConceptSets().toPromise().then(\n        response => response.list\n      );\n\n    } catch (error) {\n      console.log(error)\n    } */\n\n\n    try {\n      rootConceptSets = await this.conceptService.getRootLexicalConcepts().toPromise().then(\n        response => response.list\n      );\n\n    } catch (error) {\n      console.log(error)\n    }\n\n\n    /* if (conceptSets.length > 0) {\n      conceptSets.map(\n        element => element['hasChildren'] = true\n      )\n      this.skos_nodes = conceptSets;\n    } */\n\n    if (rootConceptSets.length > 0 && conceptSets.length == 0) {\n      rootConceptSets.map(\n        element => {\n          element['hasChildren'] = true,\n          element['children'] = undefined;\n        },\n      )\n\n      this.skos_nodes = rootConceptSets;\n    }\n\n    \n\n    this.counter = this.skos_nodes.length;\n  }\n\n  ngOnDestroy(): void {\n    this.destroy$.next(true);\n    this.destroy$.complete();\n  }\n\n  onScrollDown(treeModel: TreeModel) {\n\n\n    this.offset += 500;\n    this.modalShow = true;\n\n    //@ts-ignore\n    $(\"#lazyLoadingModal\").modal(\"show\");\n    $('.modal-backdrop').appendTo('.tree-view');\n    $('body').removeClass(\"modal-open\")\n    $('body').css(\"padding-right\", \"\");\n\n    let parameters = this.skosFilterForm.value;\n    parameters['offset'] = this.offset;\n    parameters['limit'] = this.limit;\n\n    /* this.lexicalService.getLexicalEntriesList(parameters).pipe(debounceTime(200), takeUntil(this.destroy$)).subscribe(\n      data => {\n        //@ts-ignore\n        $('#lazyLoadingModal').modal('hide');\n        $('.modal-backdrop').remove();\n        for (var i = 0; i < data['list'].length; i++) {\n          this.skos_nodes.push(data['list'][i]);\n        };\n        //this.counter = this.skos_nodes.length;\n        this.skosTree.treeModel.update();\n        this.updateTreeView();\n        this.modalShow = false;\n\n        setTimeout(() => {\n          //@ts-ignore\n          $('#lazyLoadingModal').modal('hide');\n          $('.modal-backdrop').remove();\n        }, 300);\n      },\n      error => {\n\n      }\n    ) */\n  }\n\n  updateTreeView() {\n\n\n    setTimeout(() => {\n      this.counter = this.skos_nodes.length;\n      this.skosTree.sizeChanged();\n\n    }, 1000);\n  }\n\n  resetFields() {\n    this.skosFilterForm.reset(this.initialValues, { emitEvent: false });\n    setTimeout(() => {\n      this.loadTree();\n      this.skosTree.treeModel.update();\n      this.updateTreeView();\n\n    }, 500);\n  }\n\n\n  searchFilter(newPar) {\n    \n    this.skos_nodes = [];\n\n    setTimeout(() => {\n      const viewPort_prova = this.element.nativeElement.querySelector('tree-viewport') as HTMLElement;\n      viewPort_prova.scrollTop = 0\n    }, 300);\n\n    let search_text = newPar.search_text != null ? newPar.search_text : '';\n    this.searchIconSpinner = true;\n    let parameters = {\n      text: search_text,\n      searchMode: newPar.search_mode,\n      labelType: \"prefLabel\",\n      author: \"\",\n      offset: 0,\n      limit: 500\n    }\n\n    this.conceptService.conceptFilter(parameters).pipe(takeUntil(this.destroy$)).subscribe(\n      data => {\n        console.log(data)\n\n        if (data.list.length > 0) {\n          let filter_lang = [];\n          filter_lang = data.list.filter(\n            element => element.language != 'null'\n          )\n\n          filter_lang.forEach(\n            el=> {\n              el['hasChildren'] = true;\n              el['children'] = [];\n            }\n          )\n\n          console.log(filter_lang)\n          this.skos_nodes = filter_lang;\n\n          \n          \n        } else{\n          this.skos_nodes = [];\n        }\n\n      }, error => {\n        console.log(error)\n        \n      }\n    )\n\n    \n    this.searchIconSpinner = false;\n\n\n  }\n\n  async getChildren(node: any) {\n    let newNodes: any;\n    if (node.data.conceptSet != undefined || node.data.lexicalConcept != undefined) {\n\n      try {\n        let instance = node.data.conceptSet != undefined ? node.data.conceptSet : node.data.lexicalConcept;\n\n        let data = await this.conceptService.getLexicalConcepts(instance).toPromise();\n        console.log(data)\n\n        newNodes = data['list'].map((c) => Object.assign({}, c));\n\n        if (Object.keys(newNodes).length > 0) {\n\n          for (const element of newNodes) {\n\n            element['children'] = undefined;\n            element['hasChildren'] = true;\n            \n\n          }\n          return newNodes;\n        } else {\n          this.toastr.info('No childs for this node', 'Info', { timeOut: 5000 });\n          \n          return newNodes;\n        }\n\n      } catch (error) {\n        console.log(error)\n        if (error.status != 200) {\n          this.toastr.error(\"Something went wrong, please check the log\", \"Error\", { timeOut: 5000 })\n        }\n      }\n\n\n\n    }\n\n  }\n\n \n\n  processRequest(){\n    \n    let request = this.processRequestForm.get('oneOrAll').value;\n    if(request == 'one'){\n      this.deleteLexicalConcept(this.nodeToRemove, true);\n    }else{\n      this.deleteLexicalConceptRecursive(this.nodeToRemove)\n      return;\n      \n    }\n  }\n  \n  deleteLexicalConceptRecursive(item){\n    \n    let lexicalConceptID = item.lexicalConcept;\n    this.searchIconSpinner = true;\n\n    this.conceptService.deleteLexicalConcept(lexicalConceptID, true).pipe(takeUntil(this.destroy$)).subscribe(\n      data=> {\n        console.log(data)\n      },error=>{\n        console.log(error);\n        if(error.status != 200){\n          this.toastr.error(error.error, 'Error', {\n            timeOut: 5000,\n          });\n        }else{\n          this.toastr.success(lexicalConceptID + ' and all his children deleted correctly', '', {\n            timeOut: 5000,\n          });\n          this.searchIconSpinner = false;\n          this.conceptService.deleteRequest(item);\n          this.lexicalService.sendToCoreTab(null);\n          this.lexicalService.sendToRightTab(null);\n          this.biblioService.sendDataToBibliographyPanel(null);\n\n          this.expander.expandCollapseEdit(false);\n          this.expander.openCollapseEdit(false)\n          if (this.expander.isEpigraphyOpen) {\n            this.expander.expandCollapseEpigraphy();\n          }\n          this.nodeToRemove = null;\n        }\n      }\n    )\n  }\n\n  deleteLexicalConcept(item, force?){\n    \n    let lexicalConceptID = item.lexicalConcept;\n    this.searchIconSpinner = true;\n\n    if(item.children != undefined && item.children.length > 0 && (force == undefined)){\n      this.nodeToRemove = item;\n      setTimeout(() => {\n        this.modalService.open(this.lexicalConceptRemoverModal, {centered: true})\n\n      }, 1000);\n      \n    }else if(item.children == undefined && (force == undefined)){\n      this.conceptService.getLexicalConcepts(lexicalConceptID).pipe(takeUntil(this.destroy$)).subscribe(\n        data=>{\n          console.log(data);\n          \n          if(data!= undefined){\n            if(data.list.length > 0){\n              this.nodeToRemove = item;\n              setTimeout(() => {\n                this.modalService.open(this.lexicalConceptRemoverModal, {centered: true})\n\n              }, 100);\n            }else{\n              this.conceptService.deleteLexicalConcept(lexicalConceptID).pipe(takeUntil(this.destroy$)).subscribe(\n                data=> {\n                  console.log(data)\n                },error=>{\n                  console.log(error);\n                  if(error.status != 200){\n                    this.toastr.error(error.error, 'Error', {\n                      timeOut: 5000,\n                    });\n                  }else{\n                    this.toastr.success(lexicalConceptID + 'deleted correctly', '', {\n                      timeOut: 5000,\n                    });\n                    this.searchIconSpinner = false;\n                    this.conceptService.deleteRequest(item);\n                    this.lexicalService.sendToCoreTab(null);\n                    this.lexicalService.sendToRightTab(null);\n                    this.biblioService.sendDataToBibliographyPanel(null);\n          \n                    this.expander.expandCollapseEdit(false);\n                    this.expander.openCollapseEdit(false)\n                    if (this.expander.isEpigraphyOpen) {\n                      this.expander.expandCollapseEpigraphy();\n                    }\n                  }\n                }\n              )\n            }\n          }\n          \n        },error=>{\n          console.log(error);\n          if(error.status == 200){\n            setTimeout(() => {\n              this.modalService.open(this.lexicalConceptRemoverModal, {centered: true})\n\n            }, 100);\n          }else{\n            this.toastr.error(error.error, 'Error', {timeOut : 5000})\n          }\n        }\n      )\n    }else{\n      this.conceptService.deleteLexicalConcept(lexicalConceptID).pipe(takeUntil(this.destroy$)).subscribe(\n        data=> {\n          console.log(data)\n        },error=>{\n          console.log(error);\n          if(error.status != 200){\n            this.toastr.error(error.error, 'Error', {\n              timeOut: 5000,\n            });\n          }else{\n            this.toastr.success(lexicalConceptID + 'deleted correctly', '', {\n              timeOut: 5000,\n            });\n            this.searchIconSpinner = false;\n            this.conceptService.deleteRequest(item);\n            this.lexicalService.sendToCoreTab(null);\n            this.lexicalService.sendToRightTab(null);\n            this.biblioService.sendDataToBibliographyPanel(null);\n  \n            this.expander.expandCollapseEdit(false);\n            this.expander.openCollapseEdit(false)\n            if (this.expander.isEpigraphyOpen) {\n              this.expander.expandCollapseEpigraphy();\n            }\n          }\n        }\n      )\n    }\n    \n  }\n\n  skosDeleteRequest(signal?) {\n\n\n\n    this.skosTree.treeModel.getNodeBy(x => {\n      if (signal.conceptSet != undefined && signal.lexicalConcept == undefined) {\n        if (x.data.conceptSet === signal.conceptSet) {\n\n          x.parent.data.children.splice(x.parent.data.children.indexOf(x.data), 1);\n\n          this.skosTree.treeModel.update()\n\n          setTimeout(() => {\n            this.counter = this.skosTree.treeModel.nodes.length;\n          }, 1000);\n\n          return true;\n        } else {\n          return false;\n        }\n      } else if (signal.lexicalConcept != undefined) {\n        if (x.data.lexicalConcept === signal.lexicalConcept) {\n\n          x.parent.data.children.splice(x.parent.data.children.indexOf(x.data), 1);\n\n          this.skosTree.treeModel.update()\n          setTimeout(() => {\n            this.counter = this.skosTree.treeModel.nodes.length;\n          }, 1000);\n\n          return true;\n        } else {\n          return false;\n        }\n\n      } else {\n        return false;\n      }\n    })\n\n\n  }\n\n  addSubElement(signal?) {\n\n    setTimeout(() => {\n      let instanceName;\n      let lex = signal.lex;\n      let data = signal.data;\n      console.log(lex)\n      console.log(data)\n      \n      this.skosTree.treeModel.getNodeBy(x => {\n        if (lex.lexicalConcept != undefined) {\n          if (x.data.lexicalConcept === lex.lexicalConcept) {\n            if (x.data.children == undefined) {\n              x.data.children = [];\n              x.data.children.push(data);\n              x.expand();\n              \n              this.skosTree.treeModel.update();\n              this.skosTree.treeModel.getNodeBy(y => {\n                if (y.data.lexicalConcept != undefined && y.data.lexicalConcept === data.lexicalConcept) {\n                  y.setActiveAndVisible();\n                }\n              })\n              \n              return true;\n            } else {\n              x.data.children.push(data);\n              x.expand();\n              this.skosTree.treeModel.update();\n              this.skosTree.treeModel.getNodeBy(y => {\n                if (y.data.lexicalConcept != undefined && y.data.lexicalConcept === data.lexicalConcept) {\n                  y.setActiveAndVisible();\n                }\n              })\n              return true;\n            }\n          } else {\n            return false;\n          }\n        } else {\n          return false;\n        }\n      })\n    }, 300);\n  }\n\n  addLexicalConcept(parentNode: any, type : string) {\n\n    if(parentNode){\n      let relation = \"http://www.w3.org/2004/02/skos/core#narrower\";\n      \n      this.conceptService.createNewLexicalConcept().pipe(takeUntil(this.destroy$)).subscribe(\n        data => {\n          console.log(data);\n          if (data != undefined) {\n            /* this.toastr.info('New Concept Set added', '', {\n              timeOut: 5000,\n            }); */\n            \n            let parameters = {\n              relation : relation,\n              source : data['lexicalConcept'],\n              target : parentNode['lexicalConcept']\n            }\n\n            data['hasChildren'] = true;  \n            \n            if(type == 'conceptSet'){\n              this.conceptService.updateSchemeProperty(parameters).pipe(takeUntil(this.destroy$)).subscribe(\n                data=> {\n                  console.log(data);\n                },error=>{\n                  console.log(error);\n                  if(error.status == 200){\n                    if(parentNode.children == undefined) parentNode.children = [];\n                    parentNode.children.push(data);\n                    this.toastr.success('Added Lexical Concept', '', {timeOut : 5000});\n                    this.skosTree.treeModel.update()\n                    this.skosTree.treeModel.getNodeBy(y => {\n                      if (y.data.lexicalConcept != undefined) {    \n                        if (y.data.lexicalConcept === data.lexicalConcept) {\n                          y.setActiveAndVisible();\n                          return true;\n                        } else {\n                          return false;\n                        }\n                      } else {\n                        return false;\n                      }\n                    })\n                    setTimeout(() => {\n                      this.counter = this.skosTree.treeModel.nodes.length;\n                    }, 1000);\n                  }\n                }\n              );\n            }else{\n              this.conceptService.updateSemanticRelation(parameters).pipe(takeUntil(this.destroy$)).subscribe(\n                data=> {\n                  console.log(data);\n                },error=>{\n                  console.log(error);\n                  if(error.status == 200){\n                    if(parentNode.children == undefined) parentNode.children = [];\n                    parentNode.children.push(data);\n                    this.toastr.success('Added Lexical Concept', '', {timeOut : 5000});\n                    this.skosTree.treeModel.update()\n                    this.skosTree.treeModel.getNodeBy(y => {\n                      if (y.data.lexicalConcept != undefined) {    \n                        if (y.data.lexicalConcept === data.lexicalConcept) {\n                          y.setActiveAndVisible();\n                          return true;\n                        } else {\n                          return false;\n                        }\n                      } else {\n                        return false;\n                      }\n                    })\n                    setTimeout(() => {\n                      this.counter = this.skosTree.treeModel.nodes.length;\n                    }, 1000);\n                  }\n                }\n              );\n            }\n            \n            \n\n            /* this.skos_nodes.push(data);\n            this.updateTreeView();\n            this.skosTree.treeModel.update();\n            this.skosTree.treeModel.getNodeById(data.id).setActiveAndVisible(); */\n          }\n  \n        }, error => {\n          console.log(error)\n          this.toastr.error('Error when creating new Concept Set', '', {\n            timeOut: 5000,\n          });\n        }\n      )\n\n      /* let parameters = {\n        relation : relation,\n        source : //nuovo lexical concept,\n        target : //conceptSet target\n      }\n      this.conceptService.updateSchemeProperty() */\n    }\n    \n  }\n\n  addNewConceptSet() {\n    this.conceptService.createNewConceptSet().pipe(takeUntil(this.destroy$)).subscribe(\n      data => {\n        console.log(data);\n        if (data != undefined) {\n          this.toastr.info('New Concept Set added', '', {\n            timeOut: 5000,\n          });\n          data['hasChildren'] = true;\n          this.skos_nodes.push(data);\n          this.updateTreeView();\n          this.skosTree.treeModel.update();\n          this.skosTree.treeModel.getNodeById(data.id).setActiveAndVisible();\n        }\n\n      }, error => {\n        console.log(error)\n        this.toastr.error('Error when creating new Concept Set', '', {\n          timeOut: 5000,\n        });\n      }\n    )\n  }\n\n}\n","/*\n   Copyright 2021-2022  Istituto di Linguistica Computazionale \"A. Zampolli\", Consiglio Nazionale delle Ricerche, Pisa, Italy.\n \nThis file is part of EpiLexo.\n\nEpiLexo is free software: you can redistribute it and/or modify it under the terms of the GNU General Public License as published by the Free Software Foundation, either version 3 of the License, or (at your option) any later version.\n\nEpiLexo is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for more details.\n\nYou should have received a copy of the GNU General Public License along with EpiLexo. If not, see <https://www.gnu.org/licenses/>.\n*/\n\nimport { HttpClient } from '@angular/common/http';\nimport { Component, OnInit, AfterViewInit, ViewChild, OnChanges, SimpleChanges, ElementRef, Input, OnDestroy } from '@angular/core';\nimport { AbstractControl, FormArray, FormBuilder, FormControl, FormGroup, ValidationErrors, ValidatorFn, Validators } from '@angular/forms';\nimport { NgbModal, NgbModalRef } from '@ng-bootstrap/ng-bootstrap';\nimport { KeycloakService } from 'keycloak-angular';\nimport { Subject } from 'rxjs';\nimport { debounceTime, takeUntil } from 'rxjs/operators';\nimport { AuthService } from 'src/app/services/auth/auth.service';\nimport { ConfirmedValidator } from './validator/password-match';\n\n@Component({\n  selector: 'app-profiles-table',\n  templateUrl: './profiles-table.component.html',\n  styleUrls: ['./profiles-table.component.scss']\n})\nexport class ProfilesTableComponent implements OnInit, OnChanges, OnDestroy {\n\n  message = '';\n  users = [];\n  private idClient;\n  private selected_idUser;\n  private modalRef: NgbModalRef;\n  private temporaryId: string;\n  public isPopulated = false;\n  public creationRequest = false;\n  public itsMe = null;\n\n  private initialValue: any;\n\n\n  selectedRoles = [];\n  filterSelectedRoles = [];\n  roles: any[] = [];\n  //rolesNames = ['ADMIN', 'USER', 'REVIEWER'];\n\n  @ViewChild('user_list') user_list: ElementRef;\n  @ViewChild('button_create') button_create: ElementRef;\n  @Input() isNotTheSameId: boolean;\n\n\n  userDetailForm = new FormGroup({\n    id: new FormControl(null),\n    username: new FormControl(null, Validators.required),\n    email: new FormControl(null, Validators.required),\n    password: new FormControl(null),\n    repeat_password: new FormControl(null),\n    roles: new FormArray([]),\n    enabled: new FormControl(null, Validators.required)\n  })\n  destroy$: Subject<boolean> = new Subject();\n  private search_subject: Subject<any> = new Subject();\n  roles_array: FormArray;\n\n  constructor(private httpClient: HttpClient, private auth: AuthService, private formBuilder: FormBuilder, private modalService: NgbModal, private keycloakService: KeycloakService) { }\n\n\n  ngOnInit(): void {\n\n    //this.keycloakService.isTokenExpired();\n    //this.keycloakService.updateToken(15);\n    this.userDetailForm = this.formBuilder.group({\n      id: new FormControl(null),\n      username: new FormControl(null, [Validators.required, Validators.minLength(3)]),\n      email: new FormControl(null, [Validators.required, Validators.minLength(3), Validators.pattern('^[a-z0-9._%+-]+@[a-z0-9.-]+\\\\.[a-z]{2,4}$')]),\n      password: new FormControl(null, [Validators.required, Validators.minLength(8)]),\n      repeat_password: new FormControl(null, [Validators.required]),\n      roles: [],\n      enabled: new FormControl(false, [Validators.required]),\n    }, { validator: ConfirmedValidator('password', 'repeat_password') });\n\n    this.auth.getClientsInfo().subscribe(\n      data => {\n        if (data != undefined && Array.isArray(data)) {\n          /* this.idClient = data[0].id; */\n          data.forEach(element => {\n            if (element.clientId == 'princlient') {\n              this.idClient = element.id;\n            }\n          })\n        }\n      },\n      error => { console.log(error) }\n    )\n\n\n    var checkIdTimer = setInterval((val) => {\n      try {\n        if (this.idClient != undefined) {\n\n          this.auth.getAllClientsRoles(this.idClient).subscribe(\n            data => {\n              let array = [];\n              data.forEach((element, i) => {\n                if (element.name.toUpperCase() == element.name) {\n                  array.push({ name: element.name, id: element.id });\n                };\n              });\n              console.log(array)\n              array.forEach((c, i) => {\n                this.roles.push({ id: i, name: c.name, role_id: c.id });\n              });\n\n\n              this.getUsersByRole(array);\n\n              // this.selectedRoles = ['ADMIN', 'USER']\n            },\n            error => { console.log(error) }\n          )\n\n          clearInterval(checkIdTimer)\n        } else {\n          clearInterval(checkIdTimer)\n        }\n\n      } catch (e) {\n        console.log(e)\n      }\n    }, 500)\n\n\n\n\n\n    /* this.rolesNames.forEach((c, i) => {\n      this.roles.push({ id: i, name: c });\n    }); */\n\n\n    this.auth.searchUser().subscribe(\n      data => {\n        //this.users = data;\n        if (data != undefined) {\n          Array.from(data).forEach((usr: any) => {\n            if (usr.username != undefined) {\n              if (usr.username != 'prinadmin') {\n                this.users.push(usr);\n              }\n            }\n          })\n        }\n      }, error => {\n        console.log(error)\n      }\n    )\n\n\n    this.search_subject.pipe(debounceTime(1000), takeUntil(this.destroy$)).subscribe(\n      data => {\n        this.searchUsers(data);\n      }\n    )\n\n\n  }\n\n  ngOnChanges(changes: SimpleChanges): void {\n    console.log(changes)\n  }\n\n  public getUsersByRole(roles_array) {\n\n    roles_array.forEach(element => {\n\n\n      this.auth.getUsersByRole(this.idClient, element.name).subscribe(\n        (data: any[]) => {\n          //console.log(element, data);\n\n          data.forEach(usr => {\n            this.users.filter(obj => {\n              if (obj.id == usr.id) {\n                obj[element.name] = true;\n                obj['haveRoles'] = true;\n              }\n            })\n          })\n\n        }, error => {\n          console.log(error)\n        }\n      )\n    });\n\n  }\n\n  searchUsers(data?) {\n    // console.log(data)\n    this.auth.searchUser(data).subscribe(\n      data => {\n        console.log(data);\n        this.users = data;\n\n        let array = [];\n\n        this.roles.forEach(\n          element => { array.push(element) }\n        )\n        this.getUsersByRole(array)\n      }, error => {\n        console.log(error)\n      }\n    )\n  }\n\n  triggerSearch(event?) {\n    if (event != undefined) {\n      let value = event.target.value;\n      this.search_subject.next(value);\n    }\n  }\n\n  ngOnDestroy(): void {\n    this.destroy$.next(true);\n    this.destroy$.complete();\n  }\n\n  userDetail(id) {\n    if (id != undefined) {\n      this.selected_idUser = id;\n\n      this.button_create.nativeElement.classList.remove('active');\n\n      this.auth.getUserInfo(id).subscribe(\n        responseUserInfo => {\n          //console.log(responseUserInfo);\n\n          this.auth.getUserRoles(this.selected_idUser, this.idClient).subscribe(\n            responseUserRoles => {\n              //console.log(responseUserRoles)\n\n              if (responseUserRoles != undefined && Array.isArray(responseUserRoles)) {\n                let filter = responseUserRoles.filter(element => element.name.toUpperCase() === element.name);\n\n                const extractRoleName = (obj) => {\n                  return obj.name;\n                }\n\n                let id = responseUserInfo.id;\n                let username = responseUserInfo.username;\n                let roles = filter.map(extractRoleName);\n                let enabled = responseUserInfo.enabled;\n                let email = responseUserInfo.email;\n                console.log(\"RUOLI\", roles);\n                this.populateForm(id, username, email, roles, enabled)\n              }\n            }, errorUserRoles => {\n              console.log(errorUserRoles)\n            }\n          )\n        }, error => {\n          console.log(error)\n        }\n      )\n    }\n  }\n\n  populateForm(id, username, email, roles, enabled) {\n\n\n    this.userDetailForm = this.formBuilder.group({\n      id: new FormControl(id),\n      username: new FormControl(username, [Validators.required, Validators.minLength(3)]),\n      email: new FormControl(email, [Validators.required, Validators.minLength(3), Validators.pattern('^[a-z0-9._%+-]+@[a-z0-9.-]+\\\\.[a-z]{2,4}$')]),\n      password: new FormControl(null),\n      repeat_password: new FormControl(null),\n      roles: [],\n      enabled: new FormControl(enabled, [Validators.required]),\n    }, { validator: ConfirmedValidator('password', 'repeat_password') });\n\n\n\n\n\n    this.selectedRoles = roles;\n    this.creationRequest = false;\n    this.isPopulated = true;\n\n    setTimeout(() => {\n      this.initialValue = this.userDetailForm.value;\n    }, 500);\n\n\n    this.itsMe = this.auth.getLoggedUser().sub == this.selected_idUser;\n\n\n  }\n\n  markAsTouched() {\n    this.userDetailForm.markAsTouched();\n  }\n\n  updateUser() {\n    if (this.userDetailForm.valid && !(JSON.stringify(this.initialValue) == JSON.stringify(this.userDetailForm.value))) {\n      let parameters = {\n        enabled: this.userDetailForm.get('enabled').value,\n        email: this.userDetailForm.get('email').value,\n        username: this.userDetailForm.get('username').value,\n      }\n      console.log(parameters);\n\n      this.auth.updateUser(this.selected_idUser, parameters).subscribe(\n        data => {\n          console.log(data);\n\n          if (JSON.stringify(this.initialValue.roles) != JSON.stringify(this.userDetailForm.get('roles').value)) {\n\n            /* if(this.selectedRoles.length == 0){\n              let object = [];\n              let obj = {};\n              this.roles.forEach(roles=>{\n                obj = {\n                  id : roles.role_id,\n                  name: roles.name\n                }\n                object.push(obj);\n\n                console.log(object)\n                this.auth.deleteRolesToUser(this.selected_idUser, this.idClient, object).subscribe(\n                  data=>{\n                    console.log(data);\n                    this.users.forEach(element => {\n                      if(element.id == this.selected_idUser){\n                        element[obj['name']] = false;\n                        element['haveRoles'] = false;\n                      }\n                    });\n\n                    this.userDetail(this.selected_idUser);\n                  },\n                  error=>{console.log(error)}\n                );\n\n                object = [];\n              })\n\n\n              \n            }else{\n\n              \n\n            } */\n\n\n            let initialRoles = this.initialValue.roles;\n            let updatedRoles = this.userDetailForm.get('roles').value;\n\n            let difference = updatedRoles.filter(x => !initialRoles.includes(x));\n            let removeDiff = initialRoles.filter(x => !updatedRoles.includes(x));\n\n            console.log(difference, removeDiff);\n\n            if (difference.length != 0) {\n              difference.forEach(element => {\n\n                let object = [];\n                let obj = {};\n                this.roles.forEach(roles => {\n                  if (element == roles.name) {\n                    obj = {\n                      id: roles.role_id,\n                      name: roles.name\n                    }\n\n                    object.push(obj);\n                    console.log(object)\n                    this.auth.assignRolesToUser(this.selected_idUser, this.idClient, object).subscribe(\n                      data => {\n                        console.log(data);\n                        this.users.forEach(element => {\n                          if (element.id == this.selected_idUser) {\n                            element[obj['name']] = true;\n                            element['haveRoles'] = true;\n                          }\n                        });\n                        this.userDetail(this.selected_idUser);\n                      },\n                      error => { console.log(error) }\n                    )\n\n                    object = [];\n\n                  }\n                })\n\n\n\n\n              });\n            } else if (removeDiff.length != 0) {\n              removeDiff.forEach(element => {\n                let object = [];\n                let obj = {};\n                this.roles.forEach(roles => {\n                  if (element == roles.name) {\n                    obj = {\n                      id: roles.role_id,\n                      name: roles.name\n                    }\n                    object.push(obj);\n\n                    console.log(object)\n                    this.auth.deleteRolesToUser(this.selected_idUser, this.idClient, object).subscribe(\n                      data => {\n                        console.log(data);\n                        this.users.forEach(element => {\n                          if (element.id == this.selected_idUser) {\n                            element[obj['name']] = false;\n                            element['haveRoles'] = false;\n                          }\n                        });\n\n                        this.userDetail(this.selected_idUser);\n                      },\n                      error => { console.log(error) }\n                    );\n\n                    object = [];\n                  }\n\n\n                })\n              });\n\n            }\n          }\n        },\n        error => {\n          console.log(error)\n        }\n      )\n    } else {\n      alert(\"No update. There are same info\")\n    }\n\n  }\n\n\n  registerUser() {\n    console.log(this.userDetailForm)\n    if (this.userDetailForm.valid) {\n      let parameters = {\n        /* id: this.temporaryId, */\n        enabled: this.userDetailForm.get('enabled').value,\n        email: this.userDetailForm.get('email').value,\n        username: this.userDetailForm.get('username').value,\n        credentials: [\n          {\n            type: \"password\",\n            value: this.userDetailForm.get('password').value,\n            temporary: false\n          }\n        ]\n      }\n\n      console.log(parameters);\n\n      this.auth.createUser(parameters).subscribe(\n        data => {\n          console.log(data);\n\n          this.auth.getUserByUsername(this.userDetailForm.get('username').value).subscribe(\n            data => {\n              console.log(data);\n              if (data != undefined) {\n\n                this.cleanActiveLinks();\n                data.forEach(newUser => {\n\n                  if (this.selectedRoles.length > 0) {\n\n\n                    this.selectedRoles.forEach(element => {\n\n                      let object = [];\n                      let obj = {};\n                      this.roles.forEach(roles => {\n                        if (element == roles.name) {\n                          obj = {\n                            id: roles.role_id,\n                            name: roles.name\n                          }\n\n                          object.push(obj);\n                        }\n                      })\n\n\n\n                      console.log(object)\n                      this.auth.assignRolesToUser(newUser.id, this.idClient, object).subscribe(\n                        data => {\n                          console.log(data);\n                          this.users.forEach(element => {\n                            if (element.id == newUser.id) {\n                              element[obj['name']] = true;\n                              element['haveRoles'] = true;\n                            }\n                          });\n                        },\n                        error => { console.log(error) }\n                      )\n                    });\n\n\n                  }\n\n\n\n                  this.users.push(newUser);\n\n                  this.userDetail(newUser.id);\n\n\n                  setTimeout(() => {\n                    this.activeNewUserLink(this.userDetailForm.get('username').value)\n                  }, 100);\n\n                });\n\n\n              }\n            },\n            error => {\n              console.log(error)\n            }\n          )\n        },\n        error => {\n          console.log(error)\n        }\n      )\n    }\n  }\n\n  resetForm() {\n    this.userDetailForm.reset();\n    this.userDetailForm.markAsUntouched();\n    this.userDetailForm.markAsPristine();\n  }\n\n  deleteUser() {\n    console.log(this.selected_idUser);\n\n    this.auth.deleteUser(this.selected_idUser).subscribe(\n      data => {\n        console.log(data)\n        let filtered = this.users.filter(\n          element => element.id != this.selected_idUser\n        )\n\n        this.users = filtered;\n\n        this.cleanActiveLinks();\n        this.userDetailForm.reset();\n        this.isPopulated = false;\n        this.creationRequest = false;\n\n        this.modalRef.close();\n      },\n      error => { console.log(error) }\n    )\n\n\n  }\n\n\n  /* addRoles(role){\n    this.rolesArray = this.userDetailForm.get('roles') as FormArray;\n    if(role == undefined){\n      this.rolesArray.push(this.createRoles());\n    }else{\n      this.rolesArray.push(this.createRoles(role));\n    }\n  } */\n\n\n  createNewUser() {\n\n    this.cleanActiveLinks();\n    this.selected_idUser = null;\n\n    const makeId = function makeid() {\n      var result = '';\n      var characters = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789';\n      var charactersLength = characters.length;\n      for (var i = 0; i < 9; i++) {\n        result += characters.charAt(Math.floor(Math.random() * charactersLength));\n      }\n\n      result += '-'\n\n      for (var j = 0; j < 5; j++) {\n        result += characters.charAt(Math.floor(Math.random() * charactersLength));\n      }\n\n      result += '-'\n\n      for (var l = 0; l < 5; l++) {\n        result += characters.charAt(Math.floor(Math.random() * charactersLength));\n      }\n\n      result += '-'\n\n      for (var m = 0; m < 13; m++) {\n        result += characters.charAt(Math.floor(Math.random() * charactersLength));\n      }\n\n      return result;\n    }\n\n    this.temporaryId = makeId();\n\n\n    this.userDetailForm = this.formBuilder.group({\n      id: new FormControl(this.temporaryId),\n      username: new FormControl(null, [Validators.required, Validators.minLength(3)]),\n      email: new FormControl(null, [Validators.required, Validators.minLength(3), Validators.pattern('^[a-z0-9._%+-]+@[a-z0-9.-]+\\\\.[a-z]{2,4}$')]),\n      password: new FormControl(null, [Validators.required, Validators.minLength(8)]),\n      repeat_password: new FormControl(null, [Validators.required]),\n      roles: [],\n      enabled: new FormControl(false, [Validators.required]),\n    }, { validator: ConfirmedValidator('password', 'repeat_password') });\n    this.creationRequest = true;\n    this.isPopulated = true;\n    this.selectedRoles = [];\n\n    this.itsMe = false;\n  }\n\n  cleanActiveLinks() {\n    var links = this.user_list.nativeElement.querySelectorAll('a')\n    links.forEach(element => {\n      if (element.classList.contains('active')) {\n        element.classList.remove('active');\n      }\n    });\n  }\n\n  activeNewUserLink(username) {\n    var links = this.user_list.nativeElement.querySelectorAll('a')\n    links.forEach(element => {\n      //      console.log(element.innerText, username)\n      if (element.innerText == username) {\n        element.classList.add('active');\n      }\n\n    });\n  }\n\n\n  findInvalidControls() {\n    const invalid = [];\n    const controls = this.userDetailForm.controls;\n    for (const name in controls) {\n      if (controls[name].invalid) {\n        invalid.push(name);\n      }\n    }\n\n\n    return invalid;\n  }\n\n  open(content) {\n\n    this.modalRef = this.modalService.open(content)\n  }\n\n  /* addTagFn(name) {\n    return { name: name, tag: true };\n  } */\n}\n","<div class=\"row h-100\">\n\n  <!-- USER LIST -->\n  <div class=\"col-lg-3 pb-3\">\n    <div class=\"card h-100\">\n      <div class=\"card-header d-flex justify-content-between\">\n        <div class=\"d-flex align-items-center\">\n          Users\n        </div>\n        <button #button_create type=\"button\" class=\"btn btn-primary btn-sm\" (click)=\"createNewUser()\" data-toggle=\"list\"\n          href=\"#user-detail\" role=\"tab\" aria-controls=\"home\"><i class=\"fas fa-plus-square\"></i> Create</button>\n\n      </div>\n      <div class=\"card-body\">\n\n        <!-- SEARCH BAR -->\n        <div class=\"input-group\">\n          <span class=\"input-group-prepend\">\n            <div class=\"input-group-text bg-transparent border-right-0\"><i class=\"fa fa-search\"></i></div>\n            <!-- <button class=\"btn btn-secondary btn-block filter-button\" type=\"button\" value=\"Filter\" title=\"Filter\"\n              data-toggle=\"collapse\" data-target=\"#filterUserCollapse\" aria-expanded=\"false\"\n              aria-controls=\"filterUserCollapse\"><i class=\"fa fa-filter\"></i></button> -->\n          </span>\n          <input class=\"form-control py-2 border-left-0 border\" type=\"text\" id=\"example-search-input\"\n            (keyup)=\"triggerSearch($event)\">\n        </div>\n\n        <!-- <div class=\"collapse multi-collapse\" id=\"filterUserCollapse\">\n          <div class=\"form-group row mt-3 \">\n            <label for=\"inputLabel\" class=\"col-lg-3 col-form-label\">Roles:</label>\n            <div class=\"input-group col-lg-9\">\n              <ng-select [multiple]=\"true\" [(ngModel)]=\"filterSelectedRoles\" [ngModelOptions]=\"{standalone: true}\">\n                <ng-option *ngFor=\"let role of roles\" [value]=\"role.name\">{{role.name}}</ng-option>\n              </ng-select>\n            </div>\n          </div>\n        </div> -->\n\n\n        <!-- USER-LIST -->\n        <div class=\"list-group mt-2 user-list\" id=\"list-tab\" role=\"tablist\" #user_list>\n          <a class=\"list-group-item list-group-item-action d-flex justify-content-between align-items-center\"\n            id=\"users-list\" data-toggle=\"list\" href=\"#user-detail\" role=\"tab\" aria-controls=\"home\"\n            *ngFor=\"let usr of users\" (click)=\"userDetail(usr.id)\">\n            {{usr.username}}\n            <span class=\"badge badge-primary badge-pill\" *ngIf=\"usr.haveRoles != undefined\">\n              <div class=\"d-flex justify-content-between align-items-center\">\n                <i class=\"fas fa-crown m-2\" *ngIf=\"usr.ADMIN\"></i>\n                <i class=\"fas fa-user m-2\" *ngIf=\"usr.USER\"></i>\n              </div>\n            </span>\n          </a>\n        </div>\n\n      </div>\n      <!-- <div class=\"card-footer text-muted\">\n        2 days ago\n      </div> -->\n    </div>\n  </div>\n\n  <!-- USER DETAILS -->\n\n\n  <div class=\"col-lg-9 pb-3\" [hidden]=\"!isPopulated\">\n    <div class=\"card h-100\">\n      <div class=\"card-header d-flex justify-content-between\">\n        <div class=\"d-flex align-items-center\">\n          User details\n        </div>\n\n      </div>\n      <div class=\"card-body\">\n\n        <div class=\"tab-content h-100\" id=\"nav-tabContent\">\n          <div class=\"tab-pane fade h-100\" id=\"user-detail\" role=\"tabpanel\" aria-labelledby=\"users-list\">\n\n            <form [formGroup]=\"userDetailForm\" class=\"h-100 d-flex flex-column\">\n              <div class=\"form-group row ml-2 mt-3 mr-2\" *ngIf=\"!creationRequest\">\n                <label for=\"inputLabel\" class=\"col-lg-3 col-form-label\">ID:</label>\n                <div class=\"input-group col-lg-9\">\n                  <input id=\"id\" formControlName=\"id\" name=\"id\" type=\"text\" class=\"form-control\" placeholder=\"\"\n                    disabled>\n                  <!-- <div class=\"invalid-feedback\" style=\"display: block;\">\n                        Please, insert at least three characters.\n                    </div> -->\n                </div>\n              </div>\n\n              <!-- {{creationRequest}} -->\n              <div class=\"form-group row ml-2 mt-3 mr-2\">\n                <label for=\"inputLabel\" class=\"col-lg-3 col-form-label\">Username:</label>\n                <div class=\"input-group col-lg-9\">\n                  <input id=\"username\" formControlName=\"username\" name=\"username\" type=\"text\" class=\"form-control\"\n                    placeholder=\"\" *ngIf=\"!creationRequest\" disabled>\n                  <input id=\"username\" formControlName=\"username\" name=\"username\" type=\"text\" class=\"form-control\"\n                    placeholder=\"\" *ngIf=\"creationRequest\">\n                  <div class=\"invalid-feedback\" style=\"display: block;\" *ngIf=\"userDetailForm.get('username').invalid\">\n                        Please insert at least 4 characters\n                    </div>\n                </div>\n              </div>\n\n              <div class=\"form-group row ml-2 mt-3 mr-2\">\n                <label for=\"inputLabel\" class=\"col-lg-3 col-form-label\">Email:</label>\n                <div class=\"input-group col-lg-9\">\n                  <input id=\"email\" formControlName=\"email\" name=\"email\" type=\"text\" class=\"form-control\" \n                    placeholder=\"\">\n                  <div class=\"invalid-feedback\" style=\"display: block;\" *ngIf=\"userDetailForm.get('email').invalid\">\n                        Please, insert a valid email address.\n                    </div>\n                </div>\n              </div>\n\n              <div class=\"form-group row ml-2 mt-3 mr-2\">\n                <label for=\"inputLabel\" class=\"col-lg-3 col-form-label\">Password:</label>\n                <div class=\"input-group col-lg-9\">\n                  <input id=\"password\" formControlName=\"password\" name=\"password\" type=\"password\" class=\"form-control\"\n                    placeholder=\"\">\n                  <div class=\"invalid-feedback\" style=\"display: block;\" *ngIf=\"userDetailForm.get('password').invalid\">\n                        Please, insert at least 8 characters.\n                    </div>\n                </div>\n              </div>\n\n              <div class=\"form-group row ml-2 mt-3 mr-2\">\n                <label for=\"inputLabel\" class=\"col-lg-3 col-form-label\">Repeat password:</label>\n                <div class=\"input-group col-lg-9\">\n                  <input id=\"repeat_password\" formControlName=\"repeat_password\" name=\"repeat_password\" type=\"password\"\n                    class=\"form-control\" placeholder=\"\">\n                  <div class=\"invalid-feedback\" style=\"display: block;\"  *ngIf=\"userDetailForm.get('repeat_password').invalid\">\n                        Password not matching.\n                    </div>\n                </div>\n              </div>\n\n              <div class=\"form-group row ml-2 mt-3 mr-2\">\n                <label for=\"inputLabel\" class=\"col-lg-3 col-form-label\">Roles:</label>\n                <div class=\"input-group col-lg-9\">\n                  <ng-select [multiple]=\"true\" formControlName=\"roles\" (change)=\"markAsTouched()\" [(ngModel)]=\"selectedRoles\" > <!-- [ngModelOptions]=\"{standalone: true}\" -->\n                    <ng-option *ngFor=\"let role of roles\" [value]=\"role.name\">{{role.name}}</ng-option>\n                    <!-- <ng-option [value]=\"'custom'\">Custom</ng-option> -->\n                  </ng-select>\n                </div>\n              </div>\n\n              <div class=\"form-group row ml-2 mt-3 mr-2\">\n                <label for=\"inputLabel\" class=\"col-lg-3 col-form-label\">Enabled:</label>\n                <div class=\"custom-control custom-switch col-lg-9\" style=\"padding-left: 3.25rem !important;\">\n                  <input type=\"checkbox\" class=\"custom-control-input\" id=\"customSwitch1\" formControlName=\"enabled\"\n                    name=\"enabled\">\n                  <label class=\"custom-control-label\" for=\"customSwitch1\"></label>\n                </div>\n              </div>\n              <div class=\"form-group row ml-2 mt-auto mr-2\">\n                <div class=\"col-lg-3\">\n                  <button type=\"button\" class=\"btn btn-danger\" (click)=\"open(deleteModal)\" *ngIf=\"!creationRequest && !itsMe\">Delete User</button>\n                </div>\n                \n                <!-- <label for=\"inputLabel\" class=\"col-lg-3 col-form-label\">Enabled:</label> -->\n                <!-- <div class=\"custom-control custom-switch col-lg-9\" style=\"padding-left: 3.25rem !important;\">\n                  <input type=\"checkbox\" class=\"custom-control-input\" id=\"customSwitch1\" formControlName=\"enabled\"\n                    name=\"enabled\">\n                  <label class=\"custom-control-label\" for=\"customSwitch1\"></label>\n                </div> -->\n              </div>\n\n              <div>\n                <!-- {{userDetailForm.value | json}} -->\n                <!-- {{initialValues.value}} -->\n                <!-- {{userDetailForm.valid | json}}\n                {{findInvalidControls() | json}} -->\n                \n              </div>\n            </form>\n\n          </div>\n        </div>\n\n      </div>\n      <div class=\"card-footer text-muted d-flex justify-content-end\">\n        <button class=\"btn btn-primary mr-2\" [disabled]=\"userDetailForm.invalid || userDetailForm.pristine\" (click)=\"registerUser()\" *ngIf=\"creationRequest\">\n          <i class=\"fas fa-save\"></i> \n          Register\n        </button>\n        <button class=\"btn btn-primary mr-2\" [disabled]=\"userDetailForm.invalid || userDetailForm.pristine\" (click)=\"updateUser()\" *ngIf=\"!creationRequest\">\n          <i class=\"fas fa-save\"></i> \n          Update\n        </button>\n        <button type=\"button\" class=\"btn btn-secondary\" (click)=\"resetForm()\" [disabled]=\"!creationRequest || !userDetailForm.touched\"><i class=\"fas fa-times\"></i> Cancel</button>\n      </div>\n    </div>\n  </div>\n\n</div>\n\n\n<ng-template #deleteModal let-modal>\n  <div class=\"modal-header\">\n      <h4 class=\"modal-title\" id=\"modal-basic-title\">Wizard</h4>\n      <button type=\"button\" class=\"close\" aria-label=\"Close\" (click)=\"modal.dismiss('Cross click')\">\n          <span aria-hidden=\"true\">&times;</span>\n      </button>\n  </div>\n\n  <div class=\"modal-body\">\n      Are you sure to delete this user?\n  </div>\n      \n  <div class=\"modal-footer\">\n      <button type=\"button\" class=\"btn btn-outline-dark\" >No</button>\n      <button type=\"button\" class=\"btn btn-outline-dark\" (click)=\"deleteUser()\">Yes</button>\n  </div>  \n  \n     \n  \n</ng-template>","/*\n   Copyright 2021-2022  Istituto di Linguistica Computazionale \"A. Zampolli\", Consiglio Nazionale delle Ricerche, Pisa, Italy.\n \nThis file is part of EpiLexo.\n\nEpiLexo is free software: you can redistribute it and/or modify it under the terms of the GNU General Public License as published by the Free Software Foundation, either version 3 of the License, or (at your option) any later version.\n\nEpiLexo is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for more details.\n\nYou should have received a copy of the GNU General Public License along with EpiLexo. If not, see <https://www.gnu.org/licenses/>.\n*/\n\nimport { HttpClient } from '@angular/common/http';\nimport { Injectable } from '@angular/core';\nimport { BehaviorSubject, Observable } from 'rxjs';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class AnnotatorService {\n  private baseUrl = \"/cash_demo/api/\"\n\n\n  constructor(private http: HttpClient) { }\n  \n  private _triggerSearch: BehaviorSubject<any> = new BehaviorSubject(null);\n  private _deleteAnnoRequest: BehaviorSubject<any> = new BehaviorSubject(null);\n  private _getIdText: BehaviorSubject<any> = new BehaviorSubject(null);\n\n  private arrayPanelFormsData = {};\n\n\n  triggerSearch$ = this._triggerSearch.asObservable();\n  deleteAnnoReq$ = this._deleteAnnoRequest.asObservable();\n  getIdText$ = this._getIdText.asObservable();\n\n  triggerSearch(string : string) {\n    this._triggerSearch.next(string)\n  } \n\n  deleteAnnotationRequest(id : number, node_id : number){\n    this._deleteAnnoRequest.next({id, node_id})\n  }\n\n  getIdText(object: any){\n    this._getIdText.next(object);\n  }\n\n  getPanelForm(id_annotation) : object{\n    return this.arrayPanelFormsData[id_annotation];\n  }\n\n  getAllPanelForms() : object {\n    return this.arrayPanelFormsData;\n  }\n\n  closePanelForm(id_annotation) : void {\n    this.arrayPanelFormsData[id_annotation] = undefined;\n  }\n\n  newPanelForm(id_annotation) : void {\n    this.arrayPanelFormsData[id_annotation] = {};\n    this.arrayPanelFormsData[id_annotation].data = undefined;\n    this.arrayPanelFormsData[id_annotation].isOpen = undefined;\n\n  }\n\n  getTokens(id: number) : Observable<any> {\n    return this.http.get(this.baseUrl + 'public/token?requestUUID=test123&nodeid='+id);\n  }\n\n  getText(id: number) : Observable<any> {\n    return this.http.get(this.baseUrl + 'public/gettext?requestUUID=test123&nodeid='+id);\n  }\n\n  addAnnotation(parameters : object, id : number) : Observable<any>{\n    return this.http.post(this.baseUrl + 'annotation?requestUUID=test123&nodeid='+id, parameters);\n  }\n\n  getAnnotation(id : number) : Observable<any>{\n    return this.http.get(this.baseUrl + 'public/annotation?requestUUID=test123&nodeid='+id);\n  }\n\n  deleteAnnotation(id: number) : Observable<any> {\n    return this.http.delete(this.baseUrl + 'annotate?requestUUID=test123&annotationID='+id);\n  }\n\n  updateAnnotation(annotation : object) : Observable<any>{\n    return this.http.put(this.baseUrl + 'annotation?requestUUID=test123', annotation);\n  }\n\n}\n","/*\n   Copyright 2021-2022  Istituto di Linguistica Computazionale \"A. Zampolli\", Consiglio Nazionale delle Ricerche, Pisa, Italy.\n \nThis file is part of EpiLexo.\n\nEpiLexo is free software: you can redistribute it and/or modify it under the terms of the GNU General Public License as published by the Free Software Foundation, either version 3 of the License, or (at your option) any later version.\n\nEpiLexo is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for more details.\n\nYou should have received a copy of the GNU General Public License along with EpiLexo. If not, see <https://www.gnu.org/licenses/>.\n*/\n\nimport { Component, ElementRef, OnDestroy, OnInit, Renderer2, ViewChild } from '@angular/core';\nimport { ExpanderService } from 'src/app/services/expander/expander.service';\nimport { LexicalEntriesService } from 'src/app/services/lexical-entries/lexical-entries.service';\n\nimport {\n  animate,\n  style,\n  transition,\n  trigger,\n  state\n} from \"@angular/animations\";\nimport { Subscription } from 'rxjs';\n\n@Component({\n  selector: 'app-vartrans-tab',\n  templateUrl: './vartrans-tab.component.html',\n  styleUrls: ['./vartrans-tab.component.scss'],\n  animations: [\n    trigger('slideInOut', [\n      state('in', style({\n        height: 'calc(100vh - 17rem)',\n        \n      })),\n      state('out', style({\n        height: 'calc(50vh - 12.5rem)',\n      })),\n      transition('in => out', animate('400ms ease-in-out')),\n      transition('out => in', animate('400ms ease-in-out'))\n    ])\n  ]\n})\nexport class VartransTabComponent implements OnInit, OnDestroy {\n\n  lock = 0;\n  object: any;\n  exp_trig = '';\n\n  lexicalEntryData : any;\n  senseData : any;\n\n  isLexicalEntry = false;\n  isSense = false;\n\n  expand_edit_subscription : Subscription; \n  expand_epi_subscription : Subscription;\n  @ViewChild('expander') expander_body: ElementRef;\n\n  constructor(private lexicalService: LexicalEntriesService, private expand: ExpanderService, private rend : Renderer2) { }\n\n  ngOnInit(): void {\n   \n    \n    this.expand_edit_subscription = this.expand.expEdit$.subscribe(\n      trigger => {\n        if(trigger){\n          let isEditExpanded = this.expand.isEditTabExpanded();\n          let isEpigraphyExpanded = this.expand.isEpigraphyTabExpanded();\n\n          if(!isEpigraphyExpanded){\n            this.exp_trig = 'in';\n            this.rend.setStyle(this.expander_body.nativeElement, 'height', 'calc(100vh - 17rem)')\n            this.rend.setStyle(this.expander_body.nativeElement, 'max-height', 'calc(100vh - 17rem)')\n          }else{\n            this.rend.setStyle(this.expander_body.nativeElement, 'height', 'calc(50vh - 12.5rem)');\n            this.rend.setStyle(this.expander_body.nativeElement, 'max-height', 'calc(50vh - 12.5rem)');\n            this.exp_trig = 'in';\n          }\n          \n        }else if(trigger==null){\n          return;\n        }else{\n          this.rend.setStyle(this.expander_body.nativeElement, 'height', 'calc(50vh - 12.5rem)');\n          this.rend.setStyle(this.expander_body.nativeElement, 'max-height', 'calc(50vh - 12.5rem)');\n          this.exp_trig = 'out';\n        }\n      }\n    );\n\n    this.expand_epi_subscription = this.expand.expEpigraphy$.subscribe(\n      trigger => {\n        setTimeout(() => {\n          if(trigger){\n            this.exp_trig = 'in';\n            this.rend.setStyle(this.expander_body.nativeElement, 'height', 'calc(50vh - 12.5rem)')\n            this.rend.setStyle(this.expander_body.nativeElement, 'max-height', 'calc(50vh - 12.5rem)')\n          }else if(trigger==null){\n            return;\n          }else{\n            this.rend.setStyle(this.expander_body.nativeElement, 'max-height', 'calc(50vh - 12.5rem)');\n            this.exp_trig = 'out';\n          }\n        }, 100);\n        \n      }\n    );\n  }\n\n  changeStatus() {\n    if (this.lock < 2) {\n      this.lock++;\n    } else if (this.lock > 1) {\n      this.lock--;\n    }\n    setTimeout(() => {\n      //@ts-ignore\n      $('.locked-tooltip').tooltip({\n        trigger: 'hover'\n      });\n    }, 10);\n  }\n\n  ngOnDestroy(): void {\n    this.expand_edit_subscription.unsubscribe();\n    this.expand_epi_subscription.unsubscribe();\n  }\n\n}\n","\n\n<div id=\"cardsAccordion\" class=\"accordion\" [hidden]=\"object == null\">\n    <div class=\"card my-2\">\n        <div class=\"card-header\">\n            <h5 class=\"mb-0 w-100 d-flex justify-content-between align-self-center\">\n                <div>\n                    <span class=\"btn\">\n                        CREATED BY foo ON 11/12/2020 15:15\n                    </span>\n                </div>\n                <div>\n                    <button class=\"btn btn-link\">\n                        <i class=\"fa fa-trash\"></i>\n                    </button>\n                    <button class=\"btn btn-link\" (click)=\"changeStatus()\">\n                        <i class=\"fa fa-circle\" *ngIf=\"lock==0\" style=\"color: red\"></i>\n                        <i class=\"fa fa-circle\" *ngIf=\"lock==1\" style=\"color: yellow\"></i>\n                        <i class=\"fa fa-circle locked-tooltip\" *ngIf=\"lock==2\" data-toggle=\"tooltip\"\n                            data-placement=\"bottom\" data-html=\"true\" title=\"Locked tooltip\" style=\"color:green;\"></i>\n                    </button>\n                </div>\n            </h5>\n        </div>\n        <div #expander [@slideInOut]=\"exp_trig\" class=\"card-body\">\n            <app-lexical-entry-vartrans-form [lexData]=\"lexicalEntryData\" *ngIf=\"isLexicalEntry\"></app-lexical-entry-vartrans-form>\n            <app-sense-vartrans-form [senseData]=\"senseData\" *ngIf=\"isSense\"></app-sense-vartrans-form>\n        </div>\n        <div class=\"card-footer text-muted\">\n            <div class=\"w-100 d-flex justify-content-between align-items-center\">\n                <div>\n                    <span>LAST UPDATE ON 15/12/2020 14:30 BY foo</span>\n                </div>\n                <div class=\"btn-group dropup dropleft\">\n                    <button class=\"btn btn-success\" type=\"button\" id=\"dropdownAddLemma\" data-toggle=\"dropdown\"\n                        aria-haspopup=\"true\" aria-expanded=\"false\"> <i class=\"fas fa-plus\"></i> </button>\n                    <div class=\"dropdown-menu dropdown-menu-right\" aria-labelledby=\"dropdownAddLemma\">\n                        <a class=\"dropdown-item\" href=\"#\">Add Form</a>\n                        <a class=\"dropdown-item\" href=\"#\">Add Sense</a>\n                        <a class=\"dropdown-item\" href=\"#\">Add Frame</a>\n                        <a class=\"dropdown-item\" href=\"#\">Add Lexical Concept</a>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n</div>","/*\n   Copyright 2021-2022  Istituto di Linguistica Computazionale \"A. Zampolli\", Consiglio Nazionale delle Ricerche, Pisa, Italy.\n \nThis file is part of EpiLexo.\n\nEpiLexo is free software: you can redistribute it and/or modify it under the terms of the GNU General Public License as published by the Free Software Foundation, either version 3 of the License, or (at your option) any later version.\n\nEpiLexo is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for more details.\n\nYou should have received a copy of the GNU General Public License along with EpiLexo. If not, see <https://www.gnu.org/licenses/>.\n*/\n\nimport { Component, ElementRef, OnDestroy, OnInit, Renderer2, ViewChild } from '@angular/core';\nimport { LexicalEntriesService } from '../../../../../services/lexical-entries/lexical-entries.service';\nimport { ExpanderService } from 'src/app/services/expander/expander.service';\nimport { ToastrService } from 'ngx-toastr';\n\nimport {\n  animate,\n  style,\n  transition,\n  trigger,\n  state\n} from \"@angular/animations\";\nimport { debounceTime, take, takeUntil } from 'rxjs/operators';\nimport { ModalComponent } from 'ng-modal-lib';\nimport { BibliographyService } from 'src/app/services/bibliography-service/bibliography.service';\nimport { Subject, Subscription } from 'rxjs';\nimport { ConceptService } from 'src/app/services/concept/concept.service';\n\n@Component({\n  selector: 'app-core-tab',\n  templateUrl: './core-tab.component.html',\n  styleUrls: ['./core-tab.component.scss'],\n  animations: [\n    trigger('slideInOut', [\n      state('in', style({\n        height: 'calc(100vh - 17rem)',\n\n      })),\n      state('out', style({\n        height: 'calc(50vh - 10rem)',\n      })),\n      transition('in => out', animate('400ms ease-in-out')),\n      transition('out => in', animate('400ms ease-in-out'))\n    ])\n  ]\n})\nexport class CoreTabComponent implements OnInit, OnDestroy {\n\n  lock = 0;\n  object: any;\n  exp_trig = '';\n\n  isLexicalEntry = false;\n  isForm = false;\n  isSense = false;\n  isLexicalConcept = false;\n  isEtymology = false;\n  isConceptSet = false;\n  searchIconSpinner = false;\n  goBack = false;\n\n  bibliography = [];\n  selectedItem;\n\n  selectedLexicalElement;\n\n  lexicalEntryData: any;\n  formData: any;\n  senseData: any;\n  lexicalConceptData: any;\n  conceptSetData : any;\n\n  lastUpdateDate: any;\n  creationDate: any;\n  creator: any;\n  revisor: any;\n\n  start = 0;\n  sortField = 'title';\n  direction = 'asc';\n  memorySort = { field: '', direction: '' }\n  queryTitle = '';\n  queryMode = 'titleCreatorYear';\n  destroy$: Subject<boolean> = new Subject();\n  core_data_subscription: Subscription;\n  expand_edit_subscription: Subscription;\n  expand_epi_subscription: Subscription;\n  update_core_card_subscription: Subscription;\n  spinner_subscription: Subscription;\n  search_subject_subscription: Subscription;\n  biblio_bootstrap_subscription: Subscription;\n\n  private searchSubject: Subject<any> = new Subject();\n\n  @ViewChild('expander') expander_body: ElementRef;\n  @ViewChild('addBibliography', { static: false }) modal: ModalComponent;\n  @ViewChild('table_body') tableBody: ElementRef;\n  @ViewChild('searchBiblio') searchBiblio: ElementRef;\n\n  constructor(private lexicalService: LexicalEntriesService, \n              private biblioService: BibliographyService, \n              private expand: ExpanderService, \n              private rend: Renderer2, \n              private toastr: ToastrService,\n              private conceptService : ConceptService) \n  { }\n\n  ngOnInit(): void {\n\n    this.core_data_subscription = this.lexicalService.coreData$.subscribe(\n      object => {\n        if (this.object != object) {\n          this.lexicalEntryData = null;\n          this.conceptSetData = null;\n          this.lexicalConceptData = null;\n          this.formData = null;\n          this.senseData = null;\n\n        }\n        this.object = object\n        /* console.log(this.object) */\n        if (this.object != null) {\n          setTimeout(() => {\n            //@ts-ignore\n            $('#coreTabModal').modal('hide');\n            $('.modal-backdrop').remove();\n            var timer = setInterval((val) => {\n              try {\n                //@ts-ignore\n                $('#coreTabModal').modal('hide');\n                if (!$('#coreTabModal').is(':visible')) {\n                  clearInterval(timer)\n                }\n\n              } catch (e) {\n                console.log(e)\n              }\n            }, 10)\n          }, 500);\n          this.creator = this.object.creator;\n          this.revisor = this.object.revisor;\n\n          if (this.object.lexicalEntry != undefined && this.object.sense == undefined && this.object.form == undefined) {\n            this.isLexicalEntry = true;\n            this.isForm = false;\n            this.isSense = false;\n            this.lexicalEntryData = object;\n            this.formData = null;\n            this.lexicalConceptData = null;\n            this.isLexicalConcept = false;\n            this.isConceptSet = false;\n          } else if (this.object.form != undefined && this.object.sense == undefined) {\n            this.isLexicalEntry = false;\n            this.isForm = true;\n            this.isSense = false;\n            this.formData = object;\n            this.lexicalEntryData = null;\n            this.lexicalConceptData = null;\n            this.isLexicalConcept = false;\n            this.isConceptSet = false;\n          } else if (this.object.sense != undefined) {\n            this.isLexicalEntry = false;\n            this.isForm = false;\n            this.isSense = true;\n            this.senseData = object;\n            this.formData = null;\n            this.lexicalEntryData = null;\n            this.lexicalConceptData = null;\n            this.isLexicalConcept = false;\n            this.isConceptSet = false;\n          } else if (this.object.lexicalConcept != undefined && this.object.sense == undefined) {\n            this.isLexicalEntry = false;\n            this.isForm = false;\n            this.isSense = false;\n            this.isLexicalConcept = true;\n            this.senseData = null;\n            this.formData = null;\n            this.lexicalEntryData = null;\n            this.lexicalConceptData = object;\n            this.isConceptSet = false;\n          } else if(this.object.conceptSet != undefined){\n            this.isConceptSet = true;\n            this.isLexicalEntry = false;\n            this.isForm = false;\n            this.isSense = false;\n            this.isLexicalConcept = false;\n            this.conceptSetData = object;\n            this.senseData = null;\n            this.formData = null;\n            this.lexicalEntryData = null;\n            this.lexicalConceptData = null;\n          }else if(this.object.lexicalConcept == undefined && this.object.etymology != undefined){\n            this.isEtymology = true;\n            this.isConceptSet = false;\n            this.isLexicalConcept = false;\n          }\n\n          this.creationDate = this.object.creationDate;\n          this.lastUpdateDate = this.object.lastUpdate;\n\n          switch (this.object.status) {\n            case 'working': {\n              this.lock = 0;\n              this.goBack = false;\n              setTimeout(() => {\n                //@ts-ignore\n                $('.locked-tooltip').tooltip('disable');\n              }, 10);\n              break;\n            }\n            case 'completed': {\n              this.lock = 1;\n              this.goBack = false;\n              setTimeout(() => {\n                //@ts-ignore\n                $('.locked-tooltip').tooltip('disable');\n              }, 10);\n              break;\n            }\n            case 'reviewed': {\n              this.lock = 2;\n              this.goBack = true;\n              setTimeout(() => {\n                //@ts-ignore\n                $('.locked-tooltip').tooltip('enable');\n                //@ts-ignore\n                $('.locked-tooltip').tooltip({\n                  trigger: 'hover'\n                });\n              }, 50);\n              break;\n            }\n          }\n\n        }\n      }\n    );\n\n    this.expand_edit_subscription = this.expand.expEdit$.subscribe(\n      trigger => {\n        /* console.log(\"trigger core-tab: \", trigger) */\n        setTimeout(() => {\n          if (trigger) {\n            let isEditExpanded = this.expand.isEditTabExpanded();\n            let isEpigraphyExpanded = this.expand.isEpigraphyTabExpanded();\n\n            /* console.log(isEditExpanded);\n            console.log(isEpigraphyExpanded) */\n\n\n            if (!isEpigraphyExpanded) {\n              this.exp_trig = 'in';\n              this.rend.setStyle(this.expander_body.nativeElement, 'height', 'calc(100vh - 17rem)')\n              this.rend.setStyle(this.expander_body.nativeElement, 'max-height', 'calc(100vh - 17rem)')\n            } else {\n              this.rend.setStyle(this.expander_body.nativeElement, 'height', 'calc(50vh - 10rem)');\n              this.rend.setStyle(this.expander_body.nativeElement, 'max-height', 'calc(50vh - 10rem)');\n              this.exp_trig = 'in';\n            }\n\n\n\n          } else if (trigger == null) {\n            return;\n          } else {\n            this.rend.setStyle(this.expander_body.nativeElement, 'height', 'calc(50vh - 10rem)');\n            this.rend.setStyle(this.expander_body.nativeElement, 'max-height', 'calc(50vh - 10rem)');\n            this.exp_trig = 'out';\n          }\n        }, 100);\n\n      }\n    );\n\n    this.expand_epi_subscription = this.expand.expEpigraphy$.subscribe(\n      trigger => {\n        setTimeout(() => {\n          if (trigger) {\n            this.exp_trig = 'in';\n            this.rend.setStyle(this.expander_body.nativeElement, 'height', 'calc(50vh - 10rem)')\n            this.rend.setStyle(this.expander_body.nativeElement, 'max-height', 'calc(50vh - 10rem)')\n          } else if (trigger == null) {\n            return;\n          } else {\n            this.rend.setStyle(this.expander_body.nativeElement, 'max-height', 'calc(50vh - 10rem)');\n            this.exp_trig = 'out';\n          }\n        }, 100);\n\n      }\n    );\n\n    this.update_core_card_subscription = this.lexicalService.updateCoreCardReq$.subscribe(\n      data => {\n        console.log(data)\n        if (data != null) {\n          this.lastUpdateDate = data['lastUpdate']\n          if (data['creationDate'] != undefined) {\n            this.creationDate = data['creationDate']\n          }\n        }\n      }\n    )\n\n    this.spinner_subscription = this.lexicalService.spinnerAction$.subscribe(\n      data => {\n        if (data == 'on') {\n          this.searchIconSpinner = true;\n        } else {\n          this.searchIconSpinner = false;\n        }\n      },\n      error => {\n\n      }\n    )\n\n    this.search_subject_subscription = this.searchSubject.pipe(debounceTime(1000), takeUntil(this.destroy$)).subscribe(\n      data => {\n        this.queryTitle = data.query;\n        data.queryMode ? this.queryMode = 'everything' : this.queryMode = 'titleCreatorYear';\n        this.searchBibliography(this.queryTitle, this.queryMode);\n      }\n    )\n\n    //@ts-ignore\n    $(\"#biblioModal\").modal(\"show\");\n    $('.modal-backdrop').appendTo('.ui-modal');\n    //@ts-ignore\n    $('#biblioModal').modal({ backdrop: 'static', keyboard: false })\n\n    $('.modal-backdrop').css('height', 'inherit');\n    $('body').removeClass(\"modal-open\")\n    $('body').css(\"padding-right\", \"\");\n\n    this.biblio_bootstrap_subscription = this.biblioService.bootstrapData(this.start, this.sortField, this.direction).subscribe(\n      data => {\n        this.memorySort = { field: this.sortField, direction: this.direction }\n        this.bibliography = data;\n        this.bibliography.forEach(element => {\n          element['selected'] = false;\n        })\n\n\n        //@ts-ignore\n        $('#biblioModal').modal('hide');\n        $('.modal-backdrop').remove();\n      }, error => {\n        console.log(error)\n      }\n    )\n  }\n\n  changeStatus() {\n\n    //console.log(this.goBack)\n\n    if (!this.goBack) {\n      this.lock++;\n      if (this.lock == 2) {\n        this.goBack = true;\n      }\n    } else if (this.goBack) {\n      this.lock--;\n      if (this.lock == 0) {\n        this.goBack = false;\n      }\n    }\n\n    this.searchIconSpinner = true;\n    let lexicalId = this.object.lexicalEntry;\n    //console.log(this.lock)\n    switch (this.lock) {\n      case 0: {\n        let parameters = {\n          relation: \"http://www.w3.org/2003/06/sw-vocab-status/ns#term_status\",\n          value: \"working\"\n        }\n        this.lexicalService.updateLexicalEntry(lexicalId, parameters).pipe(takeUntil(this.destroy$)).subscribe(\n          data => {\n            this.searchIconSpinner = false;\n            data['request'] = 0;\n            this.lexicalService.updateCoreCard(data)\n            this.lexicalService.refreshAfterEdit(data);\n            setTimeout(() => {\n              //@ts-ignore\n              $('.locked-tooltip').tooltip('disable');\n            }, 10);\n          },\n          error => {\n            this.searchIconSpinner = false;\n            const data = this.object;\n            data['request'] = 0;\n            data['new_status'] = 'working'\n            this.lexicalService.refreshAfterEdit(data);\n            this.lexicalService.updateCoreCard({ lastUpdate: error.error.text })\n            setTimeout(() => {\n              //@ts-ignore\n              $('.locked-tooltip').tooltip('disable');\n            }, 10);\n          }\n        )\n      }; break;\n      case 1: {\n        let parameters = {\n          relation: \"http://www.w3.org/2003/06/sw-vocab-status/ns#term_status\",\n          value: \"completed\"\n        }\n        this.lexicalService.updateLexicalEntry(lexicalId, parameters).pipe(takeUntil(this.destroy$)).subscribe(\n          data => {\n\n            this.searchIconSpinner = false;\n            data['request'] = 0;\n            this.lexicalService.updateCoreCard(data)\n            this.lexicalService.refreshAfterEdit(data);\n            setTimeout(() => {\n              //@ts-ignore\n              $('.locked-tooltip').tooltip('disable');\n            }, 10);\n          },\n          error => {\n            this.searchIconSpinner = false;\n            if(error.status == 200){\n              const data = this.object;\n              data['request'] = 0;\n              data['new_status'] = 'completed'\n              this.lexicalService.refreshAfterEdit(data);\n              this.lexicalService.updateCoreCard({ lastUpdate: error.error.text })\n              setTimeout(() => {\n                //@ts-ignore\n                $('.locked-tooltip').tooltip('disable');\n              }, 10);\n\n              this.toastr.success('Status changed correctly', '', {timeOut: 5000})\n            }else{\n              this.toastr.error(error.error, 'Error', {timeOut: 5000})\n            }\n            \n          }\n        )\n      }; break;\n      case 2: {\n        let parameters = {\n          relation: \"http://www.w3.org/2003/06/sw-vocab-status/ns#term_status\",\n          value: \"reviewed\"\n        }\n        this.lexicalService.updateLexicalEntry(lexicalId, parameters).pipe(takeUntil(this.destroy$)).subscribe(\n          data => {\n            this.searchIconSpinner = false;\n            data['request'] = 0;\n            data['new_status'] = 'reviewed'\n            this.lexicalService.updateCoreCard(data)\n            this.lexicalService.refreshAfterEdit(data);\n            setTimeout(() => {\n              //@ts-ignore\n              $('.locked-tooltip').tooltip('enable');\n              //@ts-ignore\n              $('.locked-tooltip').tooltip({\n                trigger: 'hover'\n              });\n            }, 50);\n          },\n          error => {\n\n            this.searchIconSpinner = false;\n            const data = this.object;\n            data['request'] = 0;\n            data['new_status'] = 'reviewed'\n            this.lexicalService.refreshAfterEdit(data);\n            this.lexicalService.updateCoreCard({ lastUpdate: error.error.text })\n            setTimeout(() => {\n              //@ts-ignore\n              $('.locked-tooltip').tooltip('enable');\n              //@ts-ignore\n              $('.locked-tooltip').tooltip({\n                trigger: 'hover'\n              });\n            }, 50);\n          }\n        )\n      }; break;\n    }\n\n  }\n\n  deleteConceptSet(){\n    this.searchIconSpinner = true;\n    let conceptSetId = this.object.conceptSet\n    this.conceptService.deleteConceptSet(conceptSetId).pipe(takeUntil(this.destroy$)).subscribe(\n      data => {\n        //console.log(data)\n        this.searchIconSpinner = false;\n        this.conceptService.deleteRequest(this.object);\n        this.conceptSetData = null;\n        this.isConceptSet = false;\n        this.object = null;\n        this.lexicalService.sendToCoreTab(null);\n        this.lexicalService.sendToRightTab(null);\n        this.biblioService.sendDataToBibliographyPanel(null);\n\n        this.expand.expandCollapseEdit(false);\n        this.expand.openCollapseEdit(false)\n        if (this.expand.isEpigraphyOpen) {\n          this.expand.expandCollapseEpigraphy();\n        }\n        \n      }, error => {\n        //console.log(error)\n        this.searchIconSpinner = false;\n        \n        \n\n        if(error.status != 200){\n          this.toastr.error(error.error, 'Error', {\n            timeOut: 5000,\n          });\n        }else{\n          this.toastr.success(conceptSetId + 'deleted correctly', '', {\n            timeOut: 5000,\n          });\n          this.searchIconSpinner = false;\n          this.conceptService.deleteRequest(this.object);\n          this.conceptSetData = null;\n          this.isConceptSet = false;\n          this.object = null;\n          this.lexicalService.sendToCoreTab(null);\n          this.lexicalService.sendToRightTab(null);\n          this.biblioService.sendDataToBibliographyPanel(null);\n\n          this.expand.expandCollapseEdit(false);\n          this.expand.openCollapseEdit(false)\n          if (this.expand.isEpigraphyOpen) {\n            this.expand.expandCollapseEpigraphy();\n          }\n        }\n\n        \n      }\n    )\n  }\n\n  deleteLexicalConcept(){\n    this.searchIconSpinner = true;\n    let lexicalConceptID = this.object.lexicalConcept;\n\n    this.conceptService.deleteLexicalConcept(lexicalConceptID).pipe(takeUntil(this.destroy$)).subscribe(\n      data=> {\n        console.log(data)\n      },error=>{\n        console.log(error);\n        if(error.status != 200){\n          this.toastr.error(error.error, 'Error', {\n            timeOut: 5000,\n          });\n        }else{\n          this.toastr.success(lexicalConceptID + 'deleted correctly', '', {\n            timeOut: 5000,\n          });\n          this.searchIconSpinner = false;\n          this.conceptService.deleteRequest(this.object);\n          this.conceptSetData = null;\n          this.isConceptSet = false;\n          this.object = null;\n          this.lexicalService.sendToCoreTab(null);\n          this.lexicalService.sendToRightTab(null);\n          this.biblioService.sendDataToBibliographyPanel(null);\n\n          this.expand.expandCollapseEdit(false);\n          this.expand.openCollapseEdit(false)\n          if (this.expand.isEpigraphyOpen) {\n            this.expand.expandCollapseEpigraphy();\n          }\n        }\n      }\n    )\n  }\n\n  deleteLexicalEntry() {\n    this.searchIconSpinner = true;\n    let lexicalId = this.object.lexicalEntry\n    this.lexicalService.deleteLexicalEntry(lexicalId).pipe(takeUntil(this.destroy$)).subscribe(\n      data => {\n        //console.log(data)\n        this.searchIconSpinner = false;\n        this.lexicalService.deleteRequest(this.object);\n        this.lexicalEntryData = null;\n        this.isLexicalEntry = false;\n        this.object = null;\n        this.lexicalService.refreshLangTable();\n        this.lexicalService.refreshFilter({ request: true })\n        this.lexicalService.sendToCoreTab(null);\n        this.lexicalService.sendToRightTab(null);\n        this.biblioService.sendDataToBibliographyPanel(null);\n\n        this.expand.expandCollapseEdit(false);\n        this.expand.openCollapseEdit(false)\n        if (this.expand.isEpigraphyOpen) {\n          this.expand.expandCollapseEpigraphy();\n        }\n        this.toastr.success(lexicalId + 'deleted correctly', '', {\n          timeOut: 5000,\n        });\n      }, error => {\n        //console.log(error)\n        this.searchIconSpinner = false;\n        \n        \n\n        if(error.status != 200){\n          this.toastr.error(error.error, 'Error', {\n            timeOut: 5000,\n          });\n        }else{\n          this.toastr.success(lexicalId + 'deleted correctly', '', {\n            timeOut: 5000,\n          });\n        }\n\n        this.searchIconSpinner = false;\n        this.lexicalService.deleteRequest(this.object);\n        this.lexicalEntryData = null;\n        this.isLexicalEntry = false;\n        this.object = null;\n        this.lexicalService.refreshLangTable();\n        this.lexicalService.refreshFilter({ request: true })\n        this.lexicalService.sendToCoreTab(null);\n        this.lexicalService.sendToRightTab(null);\n        this.biblioService.sendDataToBibliographyPanel(null);\n\n        this.expand.expandCollapseEdit(false);\n        this.expand.openCollapseEdit(false)\n        if (this.expand.isEpigraphyOpen) {\n          this.expand.expandCollapseEpigraphy();\n        }\n      }\n    )\n  }\n\n  deleteForm() {\n    this.searchIconSpinner = true;\n    let lexicalId = this.object.form;\n    this.lexicalService.deleteForm(lexicalId).pipe(takeUntil(this.destroy$)).subscribe(\n      data => {\n        this.searchIconSpinner = false;\n        this.lexicalService.sendToCoreTab(null)\n        this.lexicalService.deleteRequest(this.object);\n        this.isForm = false;\n        this.object = null;\n        this.toastr.success(lexicalId + 'deleted correctly', '', {\n          timeOut: 5000,\n        });\n      }, error => {\n        console.log(error)\n        this.searchIconSpinner = false;\n        this.lexicalService.deleteRequest(this.object);\n        if (error.status != 200) {\n          this.toastr.error(error.message, 'Error', { timeOut: 5000 })\n        }else {\n          this.toastr.success(lexicalId + 'deleted correctly', '', {\n            timeOut: 5000,\n          });\n        }\n        this.lexicalService.sendToCoreTab(null)\n\n      }\n    )\n  }\n\n  deleteSense() {\n    this.searchIconSpinner = true;\n    let lexicalId = this.object.sense;\n\n    this.lexicalService.deleteSense(lexicalId).pipe(takeUntil(this.destroy$)).subscribe(\n      data => {\n        console.log(data)\n        /* this.searchIconSpinner = false;\n        this.lexicalService.deleteRequest(this.object);\n        this.isSense = false;\n        this.object = null;\n        this.lexicalService.sendToCoreTab(null)\n\n        this.toastr.success(lexicalId + 'deleted correctly', '', {\n          timeOut: 5000,\n        }); */\n      }, error => {\n        console.log(error)\n        if(error.status == 200){\n          this.searchIconSpinner = false;\n          this.toastr.success(lexicalId + 'deleted correctly', '', {\n            timeOut: 5000,\n          });\n          this.lexicalService.deleteRequest(this.object);\n          this.lexicalService.sendToCoreTab(null)\n\n        }else{\n          this.toastr.error('Error on deleting' + lexicalId, '', {\n            timeOut: 5000,\n          });\n        }\n        \n      }\n    )\n  }\n\n  addNewForm() {\n    this.searchIconSpinner = true;\n    /* console.log(this.object) */\n    this.object['request'] = 'form'\n    if (this.isLexicalEntry) {\n      let lexicalId = this.object.lexicalEntry;\n      this.lexicalService.createNewForm(lexicalId).pipe(takeUntil(this.destroy$)).subscribe(\n        data => {\n          this.toastr.success('Form added correctly', '', {\n            timeOut: 5000,\n          });\n          console.log(data);\n          if (data['creator'] == this.object.creator) {\n            data['flagAuthor'] = false;\n          } else {\n            data['flagAuthor'] = true;\n          }\n          this.lexicalService.addSubElementRequest({ 'lex': this.object, 'data': data });\n          this.searchIconSpinner = false;\n        }, error => {\n          console.log(error)\n          this.toastr.error(error.error, 'Error', {\n            timeOut: 5000,\n          });\n          this.searchIconSpinner = false;\n        }\n      )\n    } else if (this.isForm) {\n      let parentNodeInstanceName = this.object.parentNodeInstanceName;\n      //console.log(this.object);\n      this.object['request'] = 'form';\n      this.object['lexicalEntry'] = parentNodeInstanceName\n      this.lexicalService.createNewForm(parentNodeInstanceName).pipe(takeUntil(this.destroy$)).subscribe(\n        data => {\n          if (data['creator'] == this.object.creator) {\n            data['flagAuthor'] = false;\n          } else {\n            data['flagAuthor'] = true;\n          }\n          this.lexicalService.addSubElementRequest({ 'lex': this.object, 'data': data });\n          this.searchIconSpinner = false;\n          this.toastr.success('Form added correctly', '', {\n            timeOut: 5000,\n          });\n        }, error => {\n          //console.log(error)\n          this.searchIconSpinner = false;\n          this.toastr.error(error.error, 'Error', {\n            timeOut: 5000,\n          });\n        }\n      )\n    } else if (this.isSense) {\n      let parentNodeInstanceName = this.object.parentNodeInstanceName;\n      this.object['request'] = 'form';\n      this.object['lexicalEntry'] = parentNodeInstanceName\n      //console.log(this.object);\n      this.lexicalService.createNewForm(parentNodeInstanceName).pipe(takeUntil(this.destroy$)).subscribe(\n        data => {\n          if (data['creator'] == this.object.creator) {\n            data['flagAuthor'] = false;\n          } else {\n            data['flagAuthor'] = true;\n          }\n          this.lexicalService.addSubElementRequest({ 'lex': this.object, 'data': data });\n          this.searchIconSpinner = false;\n          this.toastr.success('Form added correctly', '', {\n            timeOut: 5000,\n          });\n        }, error => {\n          this.toastr.error(error.error, 'Error', {\n            timeOut: 5000,\n          });\n          this.searchIconSpinner = false;\n        }\n      )\n    }\n\n  }\n\n  addLexicalConcept(){\n    this.searchIconSpinner = true;\n    this.object['request'] = 'lexicalConcept';\n\n    this.conceptService.createNewLexicalConcept().pipe(takeUntil(this.destroy$)).subscribe(\n      data=>{\n        if (data['creator'] == this.object.creator) {\n          data['flagAuthor'] = false;\n        } else {\n          data['flagAuthor'] = true;\n        }\n\n        let parameters = {\n          relation : \"http://www.w3.org/2004/02/skos/core#narrower\",\n          source : data['lexicalConcept'],\n          target : this.object['lexicalConcept']\n        }\n        this.conceptService.updateSemanticRelation(parameters).pipe(takeUntil(this.destroy$)).subscribe(\n          data=> {\n            console.log(data);\n          },error=>{\n            console.log(error);\n            if(error.status == 200){\n              data['children'] = undefined;\n              data['hasChildren'] = true;\n              this.conceptService.addSubElementRequest({ 'lex': this.object, 'data': data });\n              this.searchIconSpinner = false;\n              this.toastr.success('Lexical Concept added correctly', '', {\n                timeOut: 5000,\n              });\n            }else{\n              this.toastr.error(error.error, 'Error', {\n                timeOut: 5000,\n              });\n            }\n          }\n        );\n\n      },error=> {\n        this.searchIconSpinner = false;\n        this.toastr.error(error.error, 'Error', {\n          timeOut: 5000,\n        });\n      }\n    )\n  }\n\n  addNewSense() {\n    this.searchIconSpinner = true;\n    this.object['request'] = 'sense'\n    if (this.isLexicalEntry) {\n      let lexicalId = this.object.lexicalEntry;\n      this.lexicalService.createNewSense(lexicalId).pipe(takeUntil(this.destroy$)).subscribe(\n        data => {\n          if (data['creator'] == this.object.creator) {\n            data['flagAuthor'] = false;\n          } else {\n            data['flagAuthor'] = true;\n          }\n          this.lexicalService.addSubElementRequest({ 'lex': this.object, 'data': data });\n          this.searchIconSpinner = false;\n          this.toastr.success('Sense added correctly', '', {\n            timeOut: 5000,\n          });\n        }, error => {\n          this.searchIconSpinner = false;\n          this.toastr.error(error.error, 'Error', {\n            timeOut: 5000,\n          });\n\n        }\n      )\n    } else if (this.isSense) {\n      let parentNodeInstanceName = this.object.parentNodeInstanceName;\n      this.object['lexicalEntry'] = parentNodeInstanceName\n      this.object['request'] = 'sense'\n      //console.log(this.object);\n      this.lexicalService.createNewSense(parentNodeInstanceName).pipe(takeUntil(this.destroy$)).subscribe(\n        data => {\n          if (data['creator'] == this.object.creator) {\n            data['flagAuthor'] = false;\n          } else {\n            data['flagAuthor'] = true;\n          }\n          this.lexicalService.addSubElementRequest({ 'lex': this.object, 'data': data });\n          this.searchIconSpinner = false;\n          this.toastr.success('Sense added correctly', '', {\n            timeOut: 5000,\n          });\n        }, error => {\n          this.searchIconSpinner = false;\n          this.toastr.error(error.error, 'Error', {\n            timeOut: 5000,\n          });\n        }\n      )\n    } else if (this.isForm) {\n      let parentNodeInstanceName = this.object.parentNodeInstanceName;\n      this.object['lexicalEntry'] = parentNodeInstanceName\n      this.object['request'] = 'sense'\n      //console.log(this.object);\n      this.lexicalService.createNewSense(parentNodeInstanceName).pipe(takeUntil(this.destroy$)).subscribe(\n        data => {\n          if (data['creator'] == this.object.creator) {\n            data['flagAuthor'] = false;\n          } else {\n            data['flagAuthor'] = true;\n          }\n          this.lexicalService.addSubElementRequest({ 'lex': this.object, 'data': data });\n          this.searchIconSpinner = false;\n          this.toastr.success('Sense added correctly', '', {\n            timeOut: 5000,\n          });\n          //this.lexicalService.refreshLexEntryTree();\n        }, error => {\n          this.searchIconSpinner = false;\n          this.toastr.error(error.error, 'Error', {\n            timeOut: 5000,\n          });\n          //this.lexicalService.refreshLexEntryTree();\n        }\n      )\n    }\n\n  }\n\n  addNewEtymology() {\n    this.searchIconSpinner = true;\n    this.object['request'] = 'etymology'\n    let parentNodeInstanceName = '';\n    if (this.object.lexicalEntry != undefined\n      && this.object.sense == undefined && this.object.form == undefined) {\n      console.log(1)\n      parentNodeInstanceName = this.object.lexicalEntry;\n    } else if (this.object.form != undefined) {\n      parentNodeInstanceName = this.object.parentNodeInstanceName;\n      this.object['lexicalEntry'] = parentNodeInstanceName\n      console.log(2)\n    } else if (this.object.sense != undefined) {\n      parentNodeInstanceName = this.object.parentNodeInstanceName;\n      this.object['lexicalEntry'] = parentNodeInstanceName\n      console.log(3)\n    }\n\n    console.log(parentNodeInstanceName)\n    this.lexicalService.createNewEtymology(parentNodeInstanceName).pipe(takeUntil(this.destroy$)).subscribe(\n      data => {\n        console.log(data)\n        if (data['creator'] == this.object.creator) {\n          data['flagAuthor'] = false;\n        } else {\n          data['flagAuthor'] = true;\n        }\n        this.lexicalService.addSubElementRequest({ 'lex': this.object, 'data': data });\n        this.searchIconSpinner = false;\n        this.toastr.success('Etymology added correctly', '', {\n          timeOut: 5000,\n        });\n      }, error => {\n        this.searchIconSpinner = false;\n      }\n    )\n\n  }\n\n  showBiblioModal() {\n    this.modal.show();\n  }\n\n  addBibliographyItem(item?) {\n    //@ts-ignore\n    $(\"#biblioModal\").modal(\"show\");\n    $('.modal-backdrop').appendTo('.ui-modal');\n    //@ts-ignore\n    $('#biblioModal').modal({ backdrop: 'static', keyboard: false })\n\n    $('.modal-backdrop').css('height', 'inherit');\n    $('body').removeClass(\"modal-open\")\n    $('body').css(\"padding-right\", \"\");\n\n    let instance = '';\n    if (this.object.lexicalEntry != undefined\n      && this.object.sense == undefined\n      && this.object.form == undefined) {\n      instance = this.object.lexicalEntry;\n    } else if (this.object.form != undefined) {\n      instance = this.object.form;\n    } else if (this.object.sense != undefined) {\n      instance = this.object.sense;\n    }\n\n    if (item != undefined) {\n\n      let id = item.data.key != undefined ? item.data.key : '';\n      let title = item.data.title.replace(\"\\\"\", '') != undefined ? item.data.title : '';\n      let author;\n\n      item.data.creators.forEach(element => {\n        if (element.creatorType == 'author') {\n          author = element.lastName + ' ' + element.firstName;\n          return true;\n        } else {\n          return false;\n        }\n      });\n      author = author != undefined ? author : ''\n      let date = item.data.date != undefined ? item.data.date : '';\n      let url = item.data.url != undefined ? item.data.url : ''\n      let seeAlsoLink = '';\n\n      let parameters = {\n        id: id,\n        title: title,\n        author: author,\n        date: date,\n        url: url,\n        seeAlsoLink: seeAlsoLink\n      }\n      console.log(instance, parameters)\n      this.lexicalService.addBibliographyData(instance, parameters).pipe(takeUntil(this.destroy$)).subscribe(\n        data => {\n          console.log(data);\n          setTimeout(() => {\n            //@ts-ignore\n            $('#biblioModal').modal('hide');\n            $('.modal-backdrop').remove();\n            this.toastr.success('Item added, check bibliography panel', '', {\n              timeOut: 5000,\n            });\n            this.biblioService.triggerPanel(data)\n            setTimeout(() => {\n              this.modal.hide();\n            }, 10);\n          }, 300);\n          this.biblioService.sendDataToBibliographyPanel(data);\n        }, error => {\n          console.log(error)\n          if (typeof (error.error) == 'string' && error.error.length < 1000) {\n            this.toastr.error(error.error, '', {\n              timeOut: 5000,\n            });\n          } else {\n            this.toastr.error(error.statusText, '', {\n              timeOut: 5000,\n            });\n          }\n\n          setTimeout(() => {\n            //@ts-ignore\n            $('#biblioModal').modal('hide');\n            $('.modal-backdrop').remove();\n\n            setTimeout(() => {\n              this.modal.hide();\n            }, 10);\n          }, 300);\n\n        }\n      )\n    }\n\n  }\n\n  checkIfCreatorExist(item?) {\n    return item.some(element => element.creatorType === 'author')\n  }\n\n  triggerSearch(evt, query, queryMode) {\n    if (evt.key != 'Control' && evt.key != 'Shift' && evt.key != 'Alt') {\n      this.searchSubject.next({ query, queryMode })\n    }\n  }\n\n  searchBibliography(query?: string, queryMode?: any) {\n    this.start = 0;\n    this.selectedItem = null;\n    //@ts-ignore\n    $(\"#biblioModal\").modal(\"show\");\n    $('.modal-backdrop').appendTo('.table-body');\n    //@ts-ignore\n    $('#biblioModal').modal({ backdrop: 'static', keyboard: false })\n    $('body').removeClass(\"modal-open\")\n    $('body').css(\"padding-right\", \"\");\n    this.tableBody.nativeElement.scrollTop = 0;\n    if (this.queryTitle != '') {\n      this.biblioService.filterBibliography(this.start, this.sortField, this.direction, this.queryTitle, this.queryMode).pipe(takeUntil(this.destroy$)).subscribe(\n        data => {\n          console.log(data);\n          this.bibliography = [];\n          data.forEach(element => {\n            this.bibliography.push(element)\n          });\n          //@ts-ignore\n          $('#biblioModal').modal('hide');\n          $('.modal-backdrop').remove();\n        },\n        error => {\n          console.log(error)\n        }\n      )\n    } else {\n      this.biblioService.filterBibliography(this.start, this.sortField, this.direction, this.queryTitle, this.queryMode).pipe(takeUntil(this.destroy$)).subscribe(\n        data => {\n          console.log(data);\n          this.bibliography = [];\n          data.forEach(element => {\n            this.bibliography.push(element)\n          });\n          //@ts-ignore\n          $('#biblioModal').modal('hide');\n          $('.modal-backdrop').remove();\n        },\n        error => {\n          console.log(error)\n        }\n      )\n    }\n  }\n\n  onScrollDown() {\n    //@ts-ignore\n    $(\"#biblioModal\").modal(\"show\");\n    $('.modal-backdrop').appendTo('.table-body');\n    //@ts-ignore\n    $('#biblioModal').modal({ backdrop: 'static', keyboard: false })\n    $('.modal-backdrop').appendTo('.table-body');\n    $('body').removeClass(\"modal-open\")\n    $('body').css(\"padding-right\", \"\");\n\n    this.start += 25;\n\n    if (this.queryTitle != '') {\n      this.biblioService.filterBibliography(this.start, this.sortField, this.direction, this.queryTitle, this.queryMode).pipe(takeUntil(this.destroy$)).subscribe(\n        data => {\n          console.log(data)\n          //@ts-ignore\n          $('#biblioModal').modal('hide');\n          $('.modal-backdrop').remove();\n          data.forEach(element => {\n            this.bibliography.push(element)\n          });\n        }, error => {\n          console.log(error)\n        }\n      )\n    } else {\n      this.biblioService.filterBibliography(this.start, this.sortField, this.direction, this.queryTitle, this.queryMode).pipe(takeUntil(this.destroy$)).subscribe(\n        data => {\n\n          data.forEach(element => {\n            this.bibliography.push(element)\n          });\n\n          //@ts-ignore\n          $('#biblioModal').modal('hide');\n          $('.modal-backdrop').remove();\n        }, error => {\n          console.log(error)\n        }\n      );\n    }\n\n\n  }\n\n  selectItem(evt, i) {\n    /* console.log(evt, i); */\n    if (evt.shiftKey) {\n\n    }\n    this.bibliography.forEach(element => {\n      if (element.key == i.key) {\n        element.selected = !element.selected;\n        element.selected ? this.selectedItem = element : this.selectedItem = null;\n        return true;\n      } else {\n        element.selected = false;\n        return false;\n      }\n    })\n\n  }\n\n  sortBibliography(evt?, val?) {\n\n\n    if (this.memorySort.field == val) {\n      if (this.direction == 'asc') {\n        this.direction = 'desc'\n        this.memorySort.direction = 'desc';\n      } else {\n        this.direction = 'asc';\n        this.memorySort.direction = 'asc';\n      }\n    } else {\n      this.sortField = val;\n      this.direction = 'asc';\n      this.memorySort = { field: this.sortField, direction: this.direction };\n    }\n\n    //@ts-ignore\n    $(\"#biblioModal\").modal(\"show\");\n    $('.modal-backdrop').appendTo('.table-body');\n    //@ts-ignore\n    $('#biblioModal').modal({ backdrop: 'static', keyboard: false })\n    $('.modal-backdrop').appendTo('.table-body');\n    $('body').removeClass(\"modal-open\")\n    $('body').css(\"padding-right\", \"\");\n    this.start = 0;\n    this.tableBody.nativeElement.scrollTop = 0;\n\n    this.biblioService.filterBibliography(this.start, this.sortField, this.direction, this.queryTitle, this.queryMode).pipe(takeUntil(this.destroy$)).subscribe(\n      data => {\n        console.log(data)\n        this.bibliography = [];\n        //@ts-ignore\n        $('#biblioModal').modal('hide');\n        $('.modal-backdrop').remove();\n        data.forEach(element => {\n          this.bibliography.push(element)\n        });\n      }, error => {\n        console.log(error)\n      }\n    )\n\n  }\n\n  onCloseModal() {\n    this.selectedItem = null;\n    this.start = 0;\n    this.sortField = 'title';\n    this.direction = 'asc';\n    this.tableBody.nativeElement.scrollTop = 0;\n    this.memorySort = { field: this.sortField, direction: this.direction }\n    this.biblioService.bootstrapData(this.start, this.sortField, this.direction).pipe(takeUntil(this.destroy$)).subscribe(\n      data => {\n        this.bibliography = data;\n        this.bibliography.forEach(element => {\n          element['selected'] = false;\n        })\n\n\n      }, error => {\n        console.log(error)\n      }\n    );\n  }\n\n  ngOnDestroy(): void {\n    this.core_data_subscription.unsubscribe();\n    this.expand_edit_subscription.unsubscribe();\n    this.expand_epi_subscription.unsubscribe();\n    this.update_core_card_subscription.unsubscribe();\n    this.spinner_subscription.unsubscribe();\n    this.search_subject_subscription.unsubscribe();\n    this.biblio_bootstrap_subscription.unsubscribe();\n\n    this.destroy$.next(true);\n    this.destroy$.complete();\n  }\n}\n","\n<div id=\"cardsAccordion\" class=\"accordion\" [hidden]=\"object == null\">\n\n    <div class=\"card my-2\">\n        <div class=\"card-header\">\n            <h5 class=\"mb-0 w-100 d-flex justify-content-between align-self-center\">\n                <div>\n                    <span class=\"btn\" *ngIf=\"object != null\">\n                        <span *ngIf=\"isLexicalEntry\">\n                            Lexical Entry\n                        </span>\n                        <span *ngIf=\"isSense\">\n                            Sense\n                        </span>\n                        <span *ngIf=\"isForm\">\n                            Form\n                        </span>\n                        <span *ngIf=\"isEtymology\">\n                            Etymology\n                        </span>\n                        <span *ngIf=\"isConceptSet\">\n                            Concept Set\n                        </span>\n                        <span *ngIf=\"isLexicalConcept\">\n                            Lexical Concept\n                        </span>\n                        CREATED BY {{creator}} ON {{creationDate | date :'dd/MM/yyyy hh:mm:ss'}}\n                    </span>\n                </div>\n                <div>\n                    <div class=\"spinner-border spinner-border-sm m-1\" role=\"status\" *ngIf=\"searchIconSpinner\">\n                        <span class=\"sr-only\">Loading...</span>\n                    </div>\n                    <button class=\"btn btn-link\" *ngIf=\"isLexicalEntry\" (click)=\"removeElementModal.show()\">\n                        <i class=\"fa fa-trash\"></i>\n                    </button>\n                    <button class=\"btn btn-link\" *ngIf=\"isForm\" title=\"delete form\" (click)=\"removeElementModal.show()\">\n                        <i class=\"fa fa-trash\"></i>\n                    </button>\n                    <button class=\"btn btn-link\" *ngIf=\"isSense\" title=\"delete sense\"\n                        (click)=\"removeElementModal.show()\">\n                        <i class=\"fa fa-trash\"></i>\n                    </button>\n                    <button class=\"btn btn-link\" *ngIf=\"isConceptSet\" title=\"delete conceptSet\"\n                        (click)=\"removeElementModal.show()\">\n                        <i class=\"fa fa-trash\"></i>\n                    </button>\n                    <button class=\"btn btn-link\" *ngIf=\"isLexicalConcept\" title=\"delete lexical Concept\"\n                        (click)=\"removeElementModal.show()\">\n                        <i class=\"fa fa-trash\"></i>\n                    </button>\n                    <button class=\"btn btn-link\" (click)=\"changeStatus()\" *ngIf=\"isLexicalEntry\">\n                        <i class=\"fa fa-circle\" [hidden]=\"lock!=0\" style=\"color: red\"></i>\n                        <i class=\"fa fa-circle\" [hidden]=\"lock!=1\" style=\"color: yellow\"></i>\n                        <i class=\"fa fa-circle locked-tooltip\" [hidden]=\"lock!=2\" data-toggle=\"tooltip\"\n                            data-placement=\"bottom\" data-html=\"true\" title=\"Locked tooltip\" style=\"color:green;\"></i>\n                    </button>\n                </div>\n            </h5>\n        </div>\n        <div #expander [@slideInOut]=\"exp_trig\" class=\"card-body core-tab-body\">\n            \n            <div id=\"coreTabModal\" class=\"modal fade\" role=\"dialog\">\n                <div class=\"modal-dialog\">\n\n                    <!-- Modal content-->\n                    <div class=\"modal-content\">\n                        <div class=\"modal-body\">\n                            <div class=\"d-flex justify-content-center\">\n                                <div class=\"spinner-border\" role=\"status\">\n                                    <span class=\"sr-only\">Loading...</span>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n\n                </div>\n            </div>\n            <app-lexical-entry-core-form [lexData]=\"lexicalEntryData\" *ngIf=\"isLexicalEntry\"></app-lexical-entry-core-form>\n            <app-form-core-form [formData]=\"formData\" *ngIf=\"isForm\"></app-form-core-form>\n            <app-sense-core-form [senseData]=\"senseData\" *ngIf=\"isSense\"></app-sense-core-form>\n            <app-lexical-concept-form [lexicalConceptData]=\"lexicalConceptData\" *ngIf=\"isLexicalConcept\"></app-lexical-concept-form>\n            <app-concept-set-core-form [conceptSetData]=\"conceptSetData\" *ngIf=\"isConceptSet\"></app-concept-set-core-form>\n        </div>\n        <div class=\"card-footer text-muted\">\n            <div class=\"w-100 d-flex justify-content-between align-items-center\">\n                <div *ngIf=\"object != null\">\n                    <span class=\"pl-2\">LAST UPDATE ON {{lastUpdateDate | date :'dd/MM/yyyy hh:mm:ss'}}</span>\n                </div>\n                <div class=\"btn-group dropup dropleft\">\n                    <button class=\"btn btn-success\" type=\"button\" id=\"dropdownAddLemma\" data-toggle=\"dropdown\"\n                        aria-haspopup=\"true\" aria-expanded=\"false\"> <i class=\"fas fa-plus\"></i> </button>\n                    <div class=\"dropdown-menu dropdown-menu-right\" aria-labelledby=\"dropdownAddLemma\">\n                        <button class=\"dropdown-item\" *ngIf=\"!isConceptSet && !isLexicalConcept\" title=\"add new form\" (click)=\"addNewForm()\">Add Form</button>\n                        <button class=\"dropdown-item\" *ngIf=\"!isConceptSet && !isLexicalConcept\" title=\"add new sense\" (click)=\"addNewSense()\">Add Sense</button>\n                        <button class=\"dropdown-item\" *ngIf=\"!isConceptSet && !isLexicalConcept\" title=\"add new etymology\" (click)=\"addNewEtymology()\">Add Etymology</button>\n                        <button class=\"dropdown-item\" *ngIf=\"!isConceptSet && !isLexicalConcept\" title=\"add new bibliography item\" (click)=\"showBiblioModal()\">Add Bibliography</button>\n                        <button class=\"dropdown-item\" *ngIf=\"isConceptSet\" title=\"add new Lexical Concept (child)\" (click)=\"addLexicalConcept()\">Add Lexical Concept (child)</button>\n                        <button class=\"dropdown-item\" *ngIf=\"isLexicalConcept\" title=\"add new Lexical Concept (child)\" (click)=\"addLexicalConcept()\">Add Lexical Concept (child)</button>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n</div>\n\n<app-modal #removeElementModal class=\"remove_element_modal\">\n    <ng-container class=\"app-modal-header\"></ng-container>\n    <ng-container class=\"app-modal-body\">\n        <div class=\"card\">\n            <div class=\"card-body\" *ngIf=\"object != null\">\n                <div class=\"form-group row ml-2 mt-3 mr-2\" *ngIf=\"isLexicalEntry\">\n                    <label for=\"inputLabel\" class=\"col-lg-12 col-form-label\"\n                        style=\"font-size: 12px; text-align: center\">Are you sure to delete {{object.label}}?</label>\n                </div>\n                <div class=\"form-group row ml-2 mt-3 mr-2\" *ngIf=\"isForm\">\n                    <label for=\"inputLabel\" class=\"col-lg-12 col-form-label\"\n                        style=\"font-size: 12px; text-align: center\">Are you sure to delete\n                        {{object.label[0]['propertyValue']}}?</label>\n                </div>\n                <div class=\"form-group row ml-2 mt-3 mr-2\" *ngIf=\"isSense\">\n                    <label for=\"inputLabel\" class=\"col-lg-12 col-form-label\"\n                        style=\"font-size: 12px; text-align: center\">Are you sure to delete\n                        {{object.sense}}?</label>\n                </div>\n                <div class=\"form-group row ml-2 mt-3 mr-2\" *ngIf=\"isConceptSet\">\n                    <label for=\"inputLabel\" class=\"col-lg-12 col-form-label\"\n                        style=\"font-size: 12px; text-align: center\">Are you sure to delete\n                        {{object.conceptSet}}?</label>\n                </div>\n                <div class=\"form-group row ml-2 mt-3 mr-2\" *ngIf=\"isLexicalConcept\">\n                    <label for=\"inputLabel\" class=\"col-lg-12 col-form-label\"\n                        style=\"font-size: 12px; text-align: center\">Are you sure to delete\n                        {{object.lexicalConcept}}?</label>\n                </div>\n                <div class=\"form-group row ml-2 mt-3 mr-2 justify-content-md-center\">\n                    <div class=\"input-group col-lg-5 justify-content-md-center\"\n                        style=\"align-items: center; text-align: center;\">\n                        <div class=\"input-group-append ml-2\" *ngIf=\"isLexicalEntry\">\n                            <button class=\"btn btn-success\" type=\"button\"\n                                (click)=\"deleteLexicalEntry(); removeElementModal.hide()\"><i\n                                    class=\"fas fa-check\"></i></button>\n                        </div>\n                        <div class=\"input-group-append ml-2\" *ngIf=\"isConceptSet\">\n                            <button class=\"btn btn-success\" type=\"button\"\n                                (click)=\"deleteConceptSet(); removeElementModal.hide()\"><i\n                                    class=\"fas fa-check\"></i></button>\n                        </div>\n                        <div class=\"input-group-append ml-2\" *ngIf=\"isLexicalConcept\">\n                            <button class=\"btn btn-success\" type=\"button\"\n                                (click)=\"deleteLexicalConcept(); removeElementModal.hide()\"><i\n                                    class=\"fas fa-check\"></i></button>\n                        </div>\n                        <div class=\"input-group-append ml-2\" *ngIf=\"isForm\">\n                            <button class=\"btn btn-success\" type=\"button\"\n                                (click)=\"deleteForm(); removeElementModal.hide()\"><i class=\"fas fa-check\"></i></button>\n                        </div>\n                        <div class=\"input-group-append ml-2\" *ngIf=\"isSense\">\n                            <button class=\"btn btn-success\" type=\"button\"\n                                (click)=\"deleteSense(); removeElementModal.hide()\"><i class=\"fas fa-check\"></i></button>\n                        </div>\n                        <div class=\"input-group-append ml-2\">\n                            <button class=\"btn btn-danger\" type=\"button\" (click)=\"removeElementModal.hide()\"><i\n                                    class=\"fas fa-times\"></i></button>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </ng-container>\n</app-modal>\n\n<app-modal #addBibliography class=\"biblio_modal\" [backdrop]=\"false\" [inViewport]=\"true\" (closeModal)=\"onCloseModal()\">\n\n    <ng-container class=\"app-modal-header\">\n        <img src=\"../../../../../../assets/images/zotero_logo.png\">\n        <span class=\"ml-2 biblio-header-title\">Library: PRIN Italia Antica</span>\n    </ng-container>\n\n    <ng-container class=\"app-modal-body\">\n        <!-- SEARCH BAR -->\n        <div class=\"w-25 pt-1 pb-1\">\n            <div class=\"input-group mb-3\" *ngIf=\"{switch : false}; let variable\">\n                <div class=\"input-group-prepend\">\n                    <button class=\"btn btn-outline-secondary dropdown-toggle\" type=\"button\" data-toggle=\"dropdown\"\n                        aria-haspopup=\"true\" aria-expanded=\"false\"><i class=\"fa fa-search\"></i></button>\n                    <div class=\"dropdown-menu\">\n                        <a [class.disable_click_fire]=\"!variable.switch\" class=\"dropdown-item\" style=\"cursor: pointer;\"\n                            (click)=\"variable.switch = false; searchBibliography(searchBiblio.value, variable.switch);\">Normal</a>\n                        <a [class.disable_click_fire]=\"variable.switch\" class=\"dropdown-item\" style=\"cursor: pointer;\"\n                            (click)=\"variable.switch = true; searchBibliography(searchBiblio.value, variable.switch);\">Full\n                            Text</a>\n                    </div>\n                </div>\n                <input #searchBiblio (keyup)=\"triggerSearch($event, searchBiblio.value, variable.switch)\" type=\"text\"\n                    class=\"form-control\" aria-label=\"Text input with dropdown button\"\n                    [placeholder]=\"variable.switch ?'Title, creator, year + Full Text' : 'Title, creator, year'\"\n                    style=\"font-size: 12px;\">\n            </div>\n\n        </div>\n        <!-- {{'start: '+start + ' sortField: '+ sortField + ' direction: '+ direction + ' queryTitle: '+ queryTitle + ' queryMode: '+ queryMode}} -->\n\n        <!-- SKELETON CONTAINER -->\n        <div class=\"container-fluid\">\n            <div class=\"row\">\n                <div class=\"col-md-8 pl-0\">\n\n\n                    <!-- TABLE -->\n                    <div class=\"table-responsive table-body\">\n                        <div id=\"biblioModal\" class=\"modal fade\" role=\"dialog\">\n                            <div class=\"modal-dialog\">\n\n                                <!-- Modal content-->\n                                <div class=\"modal-content\">\n                                    <div class=\"modal-body\">\n                                        <div class=\"d-flex justify-content-center\">\n                                            <div class=\"spinner-border\" role=\"status\">\n                                                <span class=\"sr-only\">Loading...</span>\n                                            </div>\n                                        </div>\n                                    </div>\n                                </div>\n\n                            </div>\n                        </div>\n                        \n                        <table class=\"table table-striped table-hover\" [hidden]=\"bibliography.length == 0\">\n                            <thead>\n                                <tr>\n                                    <th scope=\"col\" style=\"width: 50%; cursor: pointer;\" (click)=\"sortBibliography($event, 'title')\">\n                                        <span>Title</span>\n                                        <span class=\"float-right\">\n                                            <i class=\"fas fa-sort-up\" *ngIf=\"direction == 'asc' && sortField == 'title'\"></i>\n                                            <i class=\"fas fa-sort-down\" *ngIf=\"direction == 'desc' && sortField == 'title'\"></i>\n                                        </span>\n                                    </th>\n                                    <th scope=\"col\" style=\"width: 30%; cursor: pointer;\" (click)=\"sortBibliography($event, 'creator')\">\n                                        <span>Creator</span>\n                                        <span class=\"float-right\">\n                                            <i class=\"fas fa-sort-up\" *ngIf=\"direction == 'asc' && sortField == 'creator'\"></i>\n                                            <i class=\"fas fa-sort-down\" *ngIf=\"direction == 'desc' && sortField == 'creator'\"></i>\n                                        </span>\n                                    </th>\n                                    <th scope=\"col\" style=\"width: 20%; cursor: pointer;\" (click)=\"sortBibliography($event, 'date')\">\n                                        <span>Date</span>\n                                        <span class=\"float-right\">\n                                            <i class=\"fas fa-sort-up\" *ngIf=\"direction == 'asc' && sortField == 'date'\"></i>\n                                            <i class=\"fas fa-sort-down\" *ngIf=\"direction == 'desc' && sortField == 'date'\"></i>\n                                        </span>\n                                    </th>\n                                </tr>\n                            </thead>\n                            <tbody #table_body infiniteScroll [infiniteScrollDistance]=\"0.4\"\n                                [infiniteScrollThrottle]=\"150\" [scrollWindow]=\"false\" (scrolled)=\"onScrollDown()\">\n\n\n                                <tr *ngFor=\"let item of bibliography\" (click)=\"selectItem($event, item)\"\n                                    [ngClass]=\"item?.selected ? 'selected' : ''\" style=\"cursor: pointer;\">\n                                    <td style=\"width: 50%\">\n                                        <span *ngIf=\"item.data.itemType == 'book'\" class=\"pl-1 pr-1\">\n                                            <i class=\"fas fa-book\"></i>\n                                        </span>\n                                        <span *ngIf=\"item.data.itemType == 'bookSection'\" class=\"pl-1 pr-1\">\n                                            <i class=\"fas fa-book-open\"></i>\n                                        </span>\n                                        <span *ngIf=\"item.data.itemType == 'journalArticle'\" class=\"pl-1 pr-1\">\n                                            <i class=\"far fa-newspaper\"></i>\n                                        </span>\n                                        <span *ngIf=\"item.data.itemType == 'note'\" class=\"pl-1 pr-1\">\n                                            <i class=\"far fa-clipboard\"></i>\n                                        </span>\n                                        <span *ngIf=\"item.data.itemType == 'attachment'\" class=\"pl-1 pr-1\">\n                                            <i class=\"fas fa-paperclip\"></i>\n                                        </span>\n                                        <span *ngIf=\"item.data.itemType == 'conferencePaper'\" class=\"pl-1 pr-1\">\n                                            <i class=\"fas fa-chalkboard-teacher\"></i>\n                                        </span>\n                                        <span\n                                            *ngIf=\"item.data.title != undefined && item.data.title != ''\">{{item.data.title |titlecase}}</span>\n                                        <span *ngIf=\"item.data.title == undefined || item.data.title == ''\"\n                                            class=\"font-italic\">No title</span>\n                                    </td>\n                                    <td style=\"width: 30%\">\n                                        <span *ngIf=\"item.data.creators != undefined\">\n                                            <span *ngFor=\"let author of item.data.creators; let i = index\">\n                                                <span *ngIf=\"author.creatorType == 'author'\">\n                                                    {{author.lastName | titlecase}} {{author.firstName | titlecase}} \n                                                </span>\n                                            </span>\n                                            <span *ngIf=\"!checkIfCreatorExist(item.data.creators)\"\n                                                class=\"font-italic\">No data</span>\n                                        </span>\n                                        <span *ngIf=\"item.data.creators == undefined\" class=\"font-italic\">No data</span>\n                                    </td>\n                                    <td style=\"width: 20%\">\n                                        <span *ngIf=\"item.data.date != undefined && item.data.date != ''\">\n                                            {{item.data.date | titlecase}}\n                                        </span>\n                                        <span *ngIf=\"item.data.date == undefined || item.data.date == ''\"\n                                            class=\"font-italic\">\n                                            No info\n                                        </span>\n                                    </td>\n                                </tr>\n                            </tbody>\n                        </table>\n                        <p class=\"font-italic text-muted no-results\" *ngIf=\"bibliography.length == 0\">No results</p>\n                    </div>\n\n\n                </div>\n                <div class=\"col-md-4\" style=\"font-size: 14px;\">\n                    <div class=\"row\">\n                        <div class=\"col-md-12 item-description\"\n                            style=\"height: calc(100vh - 37rem); overflow: auto; font-size: 13px;\">\n                            <div *ngIf=\"!selectedItem\">\n                                <div class=\"row\">\n                                    <div class=\"col-md-12\">\n                                        <p class=\"text-muted text-center align-middle mb-1 font-italic\">\n                                            No item selected\n                                        </p>\n                                    </div>\n                                </div>\n                            </div>\n                            <div *ngIf=\"selectedItem\">\n                                <div class=\"row\"\n                                    *ngIf=\"selectedItem.data.itemType != '' && selectedItem.data.itemType != undefined\">\n                                    <div class=\"col-md-4 left\" style=\"text-align: right;\">\n                                        <p class=\"text-muted font-weight-bold mb-1\">\n                                            Item type\n                                        </p>\n                                    </div>\n                                    <div class=\"col-md-8 right\" style=\"text-align: left;\">\n                                        <p class=\"font-weight-normal mb-1\">\n                                            {{selectedItem.data.itemType | titlecase}}\n                                        </p>\n                                    </div>\n                                </div>\n                                <div class=\"row\"\n                                    *ngIf=\"selectedItem.data.title != '' && selectedItem.data.title != undefined\">\n                                    <div class=\"col-md-4 left\" style=\"text-align: right;\">\n                                        <p class=\"text-muted font-weight-bold mb-1\">\n                                            Title\n                                        </p>\n                                    </div>\n                                    <div class=\"col-md-8 right\" style=\"text-align: left;\">\n                                        <p class=\"font-weight-normal mb-1\">\n                                            {{selectedItem.data.title | titlecase}}\n                                        </p>\n                                    </div>\n                                </div>\n                                <div class=\"row\"\n                                    *ngIf=\"selectedItem.data.creators != undefined && selectedItem.data.creators.length > 0 && checkIfCreatorExist(selectedItem.data.creators)\">\n                                    <div class=\"col-md-4 left\" style=\"text-align: right;\">\n                                        <p class=\"text-muted font-weight-bold mb-1\">\n                                            Author\n                                        </p>\n                                    </div>\n                                    <div class=\"col-md-8 right\" style=\"text-align: left;\">\n                                        <span *ngFor=\"let author of selectedItem.data.creators\">\n                                            <span *ngIf=\"author.creatorType == 'author'\">\n                                                <p class=\"font-weight-normal mb-1\">\n                                                    {{author.firstName | titlecase}} {{author.lastName | titlecase}}\n                                                </p>\n                                            </span>\n                                        </span>\n                                    </div>\n                                </div>\n                                <div class=\"row\"\n                                    *ngIf=\"selectedItem.data.creators != undefined && selectedItem.data.creators.length > 0\">\n                                    <div class=\"col-md-4 left\" style=\"text-align: right;\">\n                                        <p class=\"text-muted font-weight-bold mb-1\">\n                                            Editor\n                                        </p>\n                                    </div>\n                                    <div class=\"col-md-8 right\" style=\"text-align: left;\">\n                                        <span *ngFor=\"let editor of selectedItem.data.creators\">\n                                            <span *ngIf=\"editor.creatorType == 'editor'\">\n                                                <p class=\"font-weight-normal mb-1\">\n                                                    {{editor.firstName | titlecase}} {{editor.lastName | titlecase}}\n                                                </p>\n                                            </span>\n                                        </span>\n                                    </div>\n                                </div>\n                                <div class=\"row\"\n                                    *ngIf=\"selectedItem.data.publicationTitle != '' && selectedItem.data.publicationTitle != undefined\">\n                                    <div class=\"col-md-4 left\" style=\"text-align: right;\">\n                                        <p class=\"text-muted font-weight-bold mb-1\">\n                                            Publication\n                                        </p>\n                                    </div>\n                                    <div class=\"col-md-8 right\" style=\"text-align: left;\">\n                                        <p class=\"font-weight-normal mb-1\">\n                                            {{selectedItem.data.publicationTitle | titlecase}}\n                                        </p>\n                                    </div>\n                                </div>\n                                <div class=\"row\"\n                                    *ngIf=\"selectedItem.data.publisher != '' && selectedItem.data.publisher != undefined\">\n                                    <div class=\"col-md-4 left\" style=\"text-align: right;\">\n                                        <p class=\"text-muted font-weight-bold mb-1\">\n                                            Publisher\n                                        </p>\n                                    </div>\n                                    <div class=\"col-md-8 right\" style=\"text-align: left;\">\n                                        <p class=\"font-weight-normal mb-1\">\n                                            {{selectedItem.data.publisher | titlecase}}\n                                        </p>\n                                    </div>\n                                </div>\n                                <div class=\"row\"\n                                    *ngIf=\"selectedItem.data.issue != '' && selectedItem.data.issue != undefined\">\n                                    <div class=\"col-md-4 left\" style=\"text-align: right;\">\n                                        <p class=\"text-muted font-weight-bold mb-1\">\n                                            Issue\n                                        </p>\n                                    </div>\n                                    <div class=\"col-md-8 right\" style=\"text-align: left;\">\n                                        <p class=\"font-weight-normal mb-1\">\n                                            {{selectedItem.data.issue | titlecase}}\n                                        </p>\n                                    </div>\n                                </div>\n                                <div class=\"row\"\n                                    *ngIf=\"selectedItem.data.pages != '' && selectedItem.data.pages != undefined\">\n                                    <div class=\"col-md-4 left\" style=\"text-align: right;\">\n                                        <p class=\"text-muted font-weight-bold mb-1\">\n                                            Pages\n                                        </p>\n                                    </div>\n                                    <div class=\"col-md-8 right\" style=\"text-align: left;\">\n                                        <p class=\"font-weight-normal mb-1\">\n                                            {{selectedItem.data.pages | titlecase }}\n                                        </p>\n                                    </div>\n                                </div>\n                                <div class=\"row\"\n                                    *ngIf=\"selectedItem.data.place != '' && selectedItem.data.place != undefined\">\n                                    <div class=\"col-md-4 left\" style=\"text-align: right;\">\n                                        <p class=\"text-muted font-weight-bold mb-1\">\n                                            Place\n                                        </p>\n                                    </div>\n                                    <div class=\"col-md-8 right\" style=\"text-align: left;\">\n                                        <p class=\"font-weight-normal mb-1\">\n                                            {{selectedItem.data.place | titlecase }}\n                                        </p>\n                                    </div>\n                                </div>\n                                <div class=\"row\"\n                                    *ngIf=\"selectedItem.data.date != '' && selectedItem.data.pages != date\">\n                                    <div class=\"col-md-4 left\" style=\"text-align: right;\">\n                                        <p class=\"text-muted font-weight-bold mb-1\">\n                                            Date\n                                        </p>\n                                    </div>\n                                    <div class=\"col-md-8 right\" style=\"text-align: left;\">\n                                        <p class=\"font-weight-normal mb-1\">\n                                            {{selectedItem.data.date | titlecase}}\n                                        </p>\n                                    </div>\n                                </div>\n                                <div class=\"row\"\n                                    *ngIf=\"selectedItem.data.journalAbbreviation != '' && selectedItem.data.journalAbbreviation != undefined\">\n                                    <div class=\"col-md-4 left\" style=\"text-align: right;\">\n                                        <p class=\"text-muted font-weight-bold mb-1\">\n                                            Journal Abbr\n                                        </p>\n                                    </div>\n                                    <div class=\"col-md-8 right\" style=\"text-align: left;\">\n                                        <p class=\"font-weight-normal mb-1\">\n                                            {{selectedItem.data.journalAbbreviation | titlecase}}\n                                        </p>\n                                    </div>\n                                </div>\n                                <div class=\"row\"\n                                    *ngIf=\"selectedItem.data.DOI != '' && selectedItem.data.DOI != undefined\">\n                                    <div class=\"col-md-4 left\" style=\"text-align: right;\">\n                                        <p class=\"text-muted font-weight-bold mb-1\">\n                                            <a class=\"text-muted\" href=\"{{'https://doi.org/'+selectedItem.data.DOI}}\"\n                                                target=\"_blank\">DOI <i class=\"fas fa-external-link-alt\"></i></a>\n                                        </p>\n                                    </div>\n                                    <div class=\"col-md-8 right\" style=\"text-align: left;\">\n                                        <p class=\"font-weight-normal mb-1\">\n                                            {{selectedItem.data.DOI | titlecase}}\n                                        </p>\n                                    </div>\n                                </div>\n                                <div class=\"row\"\n                                    *ngIf=\"selectedItem.data.ISSN != '' && selectedItem.data.ISSN != undefined\">\n                                    <div class=\"col-md-4 left\" style=\"text-align: right;\">\n                                        <p class=\"text-muted font-weight-bold mb-1\">\n                                            ISSN\n                                        </p>\n                                    </div>\n                                    <div class=\"col-md-8 right\" style=\"text-align: left;\">\n                                        <p class=\"font-weight-normal mb-1\">\n                                            {{selectedItem.data.ISSN | titlecase}}\n                                        </p>\n                                    </div>\n                                </div>\n                                <div class=\"row\"\n                                    *ngIf=\"selectedItem.data.url != '' && selectedItem.data.url != undefined\">\n                                    <div class=\"col-md-4 left\" style=\"text-align: right;\">\n                                        <p class=\"text-muted font-weight-bold mb-1\">\n                                            <a class=\"text-muted\" href=\"{{selectedItem.data.url}}\" target=\"_blank\">URL\n                                                <i class=\"fas fa-external-link-alt\"></i></a>\n                                        </p>\n                                    </div>\n                                    <div class=\"col-md-8 right\" style=\"text-align: left;\">\n                                        <p class=\"font-weight-normal mb-1\">\n                                            {{selectedItem.data.url}}\n                                        </p>\n                                    </div>\n                                </div>\n                                <div class=\"row\"\n                                    *ngIf=\"selectedItem.data.accessDate != '' && selectedItem.data.accessDate != undefined\">\n                                    <div class=\"col-md-4 left\" style=\"text-align: right;\">\n                                        <p class=\"text-muted font-weight-bold mb-1\">\n                                            Accessed\n                                        </p>\n                                    </div>\n                                    <div class=\"col-md-8 right\" style=\"text-align: left;\">\n                                        <p class=\"font-weight-normal mb-1\">\n                                            {{selectedItem.data.accessDate}}\n                                        </p>\n                                    </div>\n                                </div>\n                            </div>\n\n                        </div>\n                    </div>\n                    <div class=\"row\">\n                        <div class=\"col-md-12\" style=\"height: calc(40vh - 10rem); overflow: auto; font-size: 13px;\">\n                            <div *ngIf=\"!selectedItem\">\n                                <div class=\"row\">\n                                    <div class=\"col-md-12\">\n                                        <p class=\"text-muted text-center align-middle mb-1 font-italic\">\n                                            No item selected\n                                        </p>\n                                    </div>\n                                </div>\n                            </div>\n                            <div\n                                *ngIf=\"selectedItem && (selectedItem.data.abstractNote == '' || selectedItem.data.abstractNote == undefined)\">\n                                <div class=\"row\">\n                                    <div class=\"col-md-12\">\n                                        <p class=\"text-muted text-center align-middle mb-1 font-italic\">\n                                            No info\n                                        </p>\n                                    </div>\n                                </div>\n                            </div>\n                            <div\n                                *ngIf=\"selectedItem && (selectedItem.data.abstractNote != '' && selectedItem.data.abstractNote != undefined)\">\n                                <p class=\"text-muted font-weight-bold\">\n                                    Abstract\n                                </p>\n                                <p class=\"font-weight-normal\">\n                                    {{selectedItem.data.abstractNote}}\n                                </p>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n            <div class=\"row\">\n                <div class=\"col-md-12 d-flex justify-content-end\">\n                    <button class=\"btn btn-secondary w-25\" [disabled]=\"!selectedItem\" (click)=\"addBibliographyItem(selectedItem)\">Save</button>\n                    <!-- <button class=\"btn btn-secondary\" (click)=\"addBibliography.hide()\">Close</button> -->\n                </div>\n            </div>\n        </div>\n    </ng-container>\n\n    <ng-container class=\"app-modal-footer\">\n    </ng-container>\n</app-modal>","/*\n   Copyright 2021-2022  Istituto di Linguistica Computazionale \"A. Zampolli\", Consiglio Nazionale delle Ricerche, Pisa, Italy.\n \nThis file is part of EpiLexo.\n\nEpiLexo is free software: you can redistribute it and/or modify it under the terms of the GNU General Public License as published by the Free Software Foundation, either version 3 of the License, or (at your option) any later version.\n\nEpiLexo is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for more details.\n\nYou should have received a copy of the GNU General Public License along with EpiLexo. If not, see <https://www.gnu.org/licenses/>.\n*/\n\nimport { Component, Input, OnDestroy, OnInit, SimpleChanges } from '@angular/core';\nimport { Subject, Subscription } from 'rxjs';\nimport { LexicalEntriesService } from 'src/app/services/lexical-entries/lexical-entries.service';\n\nimport { FormBuilder, FormGroup, FormArray, FormControl } from '@angular/forms';\nimport { debounceTime, takeUntil } from 'rxjs/operators';\n\n@Component({\n  selector: 'app-lexical-entry-vartrans-form',\n  templateUrl: './lexical-entry-vartrans-form.component.html',\n  styleUrls: ['./lexical-entry-vartrans-form.component.scss']\n})\nexport class LexicalEntryVartransFormComponent implements OnInit, OnDestroy {\n\n  switchInput = false;\n  subscription: Subscription;\n  object: any;\n  peopleLoading = false;\n  counter = 0;\n  componentRef: any;\n\n  destroy$ : Subject<boolean> = new Subject();\n\n  @Input() lexData : any;\n\n  vartransForm = new FormGroup({\n    label: new FormControl(''),\n    translatableAs: new FormArray([this.createTranslatableAs()]),\n    lexicalRelationDirect: new FormArray([this.createLexicalRelationDirect()]),\n    lexicalRelationIndirect: new FormArray([this.createLexicalRelationIndirect()])\n  })\n\n  translatableAs: FormArray;\n  lexicalRelationDirect: FormArray;\n  lexicalRelationIndirect: FormArray;\n  lexicalRelationIndirectSub : FormArray;\n\n  constructor( private lexicalService: LexicalEntriesService, private formBuilder: FormBuilder) {\n  }\n\n  ngOnInit() {\n    \n    this.vartransForm = this.formBuilder.group({\n      label: '',\n      translatableAs: this.formBuilder.array([this.createTranslatableAs()]),\n      lexicalRelationDirect: this.formBuilder.array([this.createLexicalRelationDirect()]),\n      lexicalRelationIndirect: this.formBuilder.array([])\n    })\n    this.onChanges();\n    this.loadPeople();\n    this.triggerTooltip();\n  }\n\n  ngOnChanges(changes: SimpleChanges) {\n    setTimeout(()=> {\n      if(this.object != changes.lexData.currentValue){\n        if(this.lexicalRelationIndirect != null){\n          this.lexicalRelationIndirect.clear();\n        }\n      }\n      this.loadPeople();\n      this.object = changes.lexData.currentValue;\n      if(this.object != null){\n        this.vartransForm.get('label').setValue(this.object.label, {emitEvent:false});\n        this.addLexicalRelationIndirect();\n      }\n      this.triggerTooltip();\n  }, 10)\n  }\n\n  triggerTooltip(){\n    setTimeout(() => {\n      //@ts-ignore\n      $('.vartrans-tooltip').tooltip({\n        trigger : 'hover'\n      });\n    }, 500);\n  }\n\n  private loadPeople() {\n    /* this.peopleLoading = true;\n    this.dataService.getPeople().subscribe(x => {\n      this.people = x;\n      this.peopleLoading = false;\n    }); */\n  }\n\n  onChanges(): void {\n    this.vartransForm.valueChanges.pipe(debounceTime(200), takeUntil(this.destroy$)).subscribe(searchParams => {\n      /* //console.log(searchParams) */\n    })\n  }\n\n  createTranslatableAs(): FormGroup {\n    return this.formBuilder.group({\n      entity: ''\n    })\n  }\n\n  addTranslatableAs() {\n    this.translatableAs = this.vartransForm.get('translatableAs') as FormArray;\n    this.translatableAs.push(this.createTranslatableAs());\n    this.triggerTooltip();\n  }\n\n  removeTranslatableAs(index) {\n    this.translatableAs = this.vartransForm.get('translatableAs') as FormArray;\n    this.translatableAs.removeAt(index);\n  }\n\n  addLexicalRelationDirect() {\n    this.lexicalRelationDirect = this.vartransForm.get('lexicalRelationDirect') as FormArray;\n    this.lexicalRelationDirect.push(this.createLexicalRelationDirect());\n    this.triggerTooltip();\n  }\n\n  removeLexicalRelationDirect(index) {\n    this.lexicalRelationDirect = this.vartransForm.get('lexicalRelationDirect') as FormArray;\n    this.lexicalRelationDirect.removeAt(index);\n  }\n\n  addLexicalRelationIndirect() {\n    this.lexicalRelationIndirect = this.vartransForm.get('lexicalRelationIndirect') as FormArray;\n    this.lexicalRelationIndirect.push(this.createLexicalRelationIndirect());\n    this.triggerTooltip();\n  }\n\n  removeLexicalRelationIndirect(index) {\n    this.lexicalRelationIndirect = this.vartransForm.get('lexicalRelationIndirect') as FormArray;\n    this.lexicalRelationIndirect.removeAt(index);\n  }\n\n  addLexicalRelationIndirectSub(index) {\n    const control = (<FormArray>this.vartransForm.controls['lexicalRelationIndirect']).at(index).get('sub_rel') as FormArray;\n    control.insert(index, this.createSubLexicalRelationIndirect())\n    this.triggerTooltip();\n  }\n\n  removeLexicalRelationIndirectSub(index, iy) {\n    const control = (<FormArray>this.vartransForm.controls['lexicalRelationIndirect']).at(index).get('sub_rel') as FormArray;\n    control.removeAt(iy);\n  }\n\n  createLexicalRelationDirect(): FormGroup {\n    return this.formBuilder.group({\n      relation: '',\n      entity: ''\n    })\n  }\n\n  createLexicalRelationIndirect(): FormGroup {\n    return this.formBuilder.group({\n      a_entity: '',\n      relation: '',\n      b_entity: '',\n      sub_rel: new FormArray([])\n    })\n  }\n\n  createSubLexicalRelationIndirect(): FormGroup {\n    return this.formBuilder.group({\n      sub_relation: 'eee',\n      sub_entity: ''\n    })\n  }\n\n  ngOnDestroy(): void {\n    this.destroy$.next(true);\n    this.destroy$.complete();\n  }\n}\n","\n\n<form [formGroup]=\"vartransForm\" *ngIf=\"object!=null\">\n    <div class=\"form-group row ml-2 mt-3 mr-2\">\n        <label for=\"inputLabel\" class=\"col-xl-3 col-form-label\">Label:</label>\n        <div class=\"input-group col-xl-5\">\n            <input formControlName=\"label\" name=\"label\" type=\"text\" class=\"form-control\" placeholder=\"\">\n        </div>\n    </div>\n    \n    <!-- TRANSLATABLE AS -->\n    <div class=\"form-group row ml-2 mt-3 mr-2\">\n        <div class=\"input-group col-xl-12\">\n            <div class=\"card\">\n                <span class=\"text-id\"><b>TRANSLATABLE AS</b></span>\n                <a class=\"pointer\" (click)=\"addTranslatableAs()\"><span class=\"collapse-icon\"><i class=\"fa fa-plus-square\"></i></span></a>\n\n                <div class=\"card-body\">\n                    <div class=\"form-group row ml-2 mt-3 mr-2\" formArrayName=\"translatableAs\" *ngFor=\"let trans of vartransForm.get('translatableAs')['controls']; let i = index\">\n                        <div class=\"input-group col-xl-9\" *ngIf=\"{switch : false}; let variable\" [formGroupName]=\"i\">\n                            <ng-select formControlName=\"entity\" name=\"entity\" [items]=\"people\" bindValue=\"name\" bindLabel=\"name\" placeholder=\"Search entity\" appendTo=\"body\"\n                                [loading]=\"peopleLoading\" *ngIf=\"!variable.switch\">\n                            </ng-select>\n                            <input formControlName=\"entity\" name=\"entity\" type=\"text\" class=\"form-control\" placeholder=\"Insert URI\" *ngIf=\"variable.switch\">\n                            <div class=\"input-group-append ml-3 form-check\">\n                                <input class=\"form-check-input vartrans-tooltip\" type=\"checkbox\" (change)=\"variable.switch=!variable.switch\" data-toggle=\"tooltip\" data-placement=\"bottom\" data-trigger=\"hover\" title=\"Clicca per inserire un URI manualmente\">\n                            </div>\n                            <div class=\"input-group-append ml-2\">\n                                <button class=\"btn btn-primary\" type=\"button\"><i\n                                        class=\"fa fa-external-link-alt\" (click)=\"modalRoot.show()\"></i></button>\n                                        <app-modal #modalRoot class=\"modal-demo\" [maximizable]=\"true\" [backdrop]=\"false\">\n                                            <ng-container class=\"app-modal-header\">Demo modal</ng-container>\n                                            <ng-container class=\"app-modal-body\">\n                                                <h3>MODAL DIALOG</h3>\n                                                <p>Lorem Ipsum is simply dummy text of the printing and typesetting industry.\n                                                    Lorem Ipsum has been the industrys standard dummy text ever since the 1500s.</p>\n                                            </ng-container>\n                                            <ng-container class=\"app-modal-footer\">\n                                                <button type=\"button\" class=\"button button3\" (click)=\"modalRoot.hide()\">Delete</button>\n                                                <button type=\"button\" class=\"button button1\" (click)=\"modalRoot.hide()\">Save</button>\n                                                <button type=\"button\" class=\"button button2\" style=\"float: right;\"\n                                                    (click)=\"modalRoot.hide()\">Close\n                                                </button>\n                                            </ng-container>\n                                        </app-modal>\n                            </div>\n                            <div class=\"input-group-append ml-2\">\n                                <button (click)=\"removeTranslatableAs(i)\" class=\"btn btn-danger\" type=\"button\"><i class=\"fa fa-trash-alt\"></i></button>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n\n    <!-- LEXICAL RELATION DIRECT -->\n    <div class=\"form-group row ml-2 mt-3 mr-2\">\n        <div class=\"input-group col-xl-12\">\n            <div class=\"card\">\n                <span class=\"text-id\"><b>LEXICAL RELATION</b><span class=\"badge badge-primary ml-2\">DIRECT</span></span>\n                <a (click)=\"addLexicalRelationDirect()\" class=\"pointer\"><span class=\"collapse-icon\"><i class=\"fa fa-plus-square\"></i></span></a>\n\n                <div class=\"card-body\">\n                    <div class=\"form-group row ml-2 mt-3 mr-2\" formArrayName=\"lexicalRelationDirect\" *ngFor=\"let direct of vartransForm.get('lexicalRelationDirect')['controls']; let i = index\">\n                        <div class=\"col-xl-5\" [formGroupName]=\"i\">\n                            <select class=\"form-control\" formControlName=\"relation\" name=\"relation\">\n                                <option>Relations...</option>\n                                <option>...</option>\n                            </select>\n                        </div>\n                        <div class=\"input-group col-xl-7\" *ngIf=\"{switch : false}; let variable\" [formGroupName]=\"i\">\n                            <ng-select formControlName=\"entity\" name=\"entity\" [items]=\"people\" bindValue=\"name\" bindLabel=\"name\" placeholder=\"Search entity\" appendTo=\"body\"\n                                [loading]=\"peopleLoading\" *ngIf=\"!variable.switch\">\n                            </ng-select>\n                            <input formControlName=\"entity\" name=\"entity\" type=\"text\" class=\"form-control\" placeholder=\"Insert URI\" *ngIf=\"variable.switch\">\n                            <div class=\"input-group-append ml-3 form-check\">\n                                <input class=\"form-check-input vartrans-tooltip\" type=\"checkbox\" (change)=\"variable.switch=!variable.switch\" data-toggle=\"tooltip\" data-placement=\"bottom\" data-trigger=\"hover\" title=\"Clicca per inserire un URI manualmente\">\n                            </div>\n                            <div class=\"input-group-append ml-2\">\n                                <button class=\"btn btn-primary\" type=\"button\"><i\n                                        class=\"fa fa-external-link-alt\" (click)=\"modalRoot.show()\"></i></button>\n                                <app-modal #modalRoot class=\"modal-demo\" [maximizable]=\"true\" [backdrop]=\"false\">\n                                    <ng-container class=\"app-modal-header\">Demo modal</ng-container>\n                                    <ng-container class=\"app-modal-body\">\n                                        <h3>MODAL DIALOG</h3>\n                                        <p>Lorem Ipsum is simply dummy text of the printing and typesetting industry.\n                                            Lorem Ipsum has been the industrys standard dummy text ever since the 1500s.</p>\n                                    </ng-container>\n                                    <ng-container class=\"app-modal-footer\">\n                                        <button type=\"button\" class=\"button button3\" (click)=\"modalRoot.hide()\">Delete</button>\n                                        <button type=\"button\" class=\"button button1\" (click)=\"modalRoot.hide()\">Save</button>\n                                        <button type=\"button\" class=\"button button2\" style=\"float: right;\"\n                                            (click)=\"modalRoot.hide()\">Close\n                                        </button>\n                                    </ng-container>\n                                </app-modal>\n                            </div>\n                            <div class=\"input-group-append ml-2\">\n                                <button (click)=\"removeLexicalRelationDirect(i)\" class=\"btn btn-danger\" type=\"button\"><i class=\"fa fa-trash-alt\"></i></button>\n                            </div>\n                        </div>\n                    </div>\n                   \n                </div>\n            </div>\n        </div>\n    </div>\n\n\n    <!-- LEXICAL RELATION INDIRECT -->\n    <div class=\"form-group row ml-2 mt-3 mr-2\">\n        <div class=\"input-group col-xl-12\">\n            <div class=\"card\">\n                <span class=\"text-id\"><b>LEXICAL RELATION</b><span class=\"badge badge-primary ml-2\">INDIRECT</span></span>\n                <a class=\"pointer\" (click)=\"addLexicalRelationIndirect()\"><span class=\"collapse-icon\"><i class=\"fa fa-plus-square\"></i></span></a>\n                <div class=\"card-body\">\n                    <div formArrayName=\"lexicalRelationIndirect\">\n                        <div *ngFor=\"let indirect of vartransForm['controls'].lexicalRelationIndirect['controls']; let i = index\">\n                            <div [formGroupName]=\"i\">\n                                <div class=\"form-group row ml-2 mt-3 mr-2\">\n                                    <div class=\"col-xl-3\">\n                                        <input type=\"text\" class=\"form-control\" formControlName=\"a_entity\" name=\"a_entity\">\n                                    </div>\n                                    <div class=\"col-xl-3\">\n                                        <select class=\"form-control\" formControlName=\"relation\" name=\"relation\">\n                                            <option>Relation</option>\n                                            <option>...</option>\n                                        </select>\n                                    </div>\n                                    <div class=\"input-group col-xl-6\" *ngIf=\"{switch : false}; let variable\">\n                                        <ng-select formControlName=\"b_entity\" name=\"b_entity\" [items]=\"people\" class=\"resizeNgSelect\" bindValue=\"name\" bindLabel=\"name\" placeholder=\"Search entity\" appendTo=\"body\"\n                                            [loading]=\"peopleLoading\" *ngIf=\"!variable.switch\">\n                                        </ng-select>\n                                        <input formControlName=\"b_entity\" name=\"b_entity\" type=\"text\" class=\"form-control\" placeholder=\"Insert URI\" *ngIf=\"variable.switch\">\n                                        <div class=\"input-group-append ml-3 form-check\">\n                                            <input class=\"form-check-input vartrans-tooltip\" type=\"checkbox\" (change)=\"variable.switch=!variable.switch\" data-toggle=\"tooltip\" data-placement=\"bottom\" data-trigger=\"hover\" title=\"Clicca per inserire un URI manualmente\">\n                                        </div>\n                                        <div class=\"input-group-append ml-2\">\n                                            <button class=\"btn btn-primary\" type=\"button\"><i\n                                                    class=\"fa fa-external-link-alt\"></i></button>\n                                        </div>\n                                        <div class=\"input-group-append ml-2\">\n                                            <button (click)=\"removeLexicalRelationIndirect(i)\" class=\"btn btn-danger\" type=\"button\"><i class=\"fa fa-trash-alt\"></i></button>\n                                        </div>\n                                        <div class=\"input-group-append ml-2\">\n                                            <button (click)=\"addLexicalRelationIndirectSub(i)\" class=\"btn btn-outline-primary\" type=\"button\"><i class=\"fa fa-plus\"></i></button>\n                                        </div>\n                                    </div>\n                                </div>\n                                <div formArrayName=\"sub_rel\">\n                                    <div *ngFor=\"let sub of indirect['controls'].sub_rel['controls']; let j = index\">\n                                        <div [formGroupName]=\"j\">\n                                            <div class=\"form-group row ml-2 mt-3 mr-2\">\n                                                <div class=\"col-xl-3\" ></div>\n                                                <div class=\"col-xl-3\">\n                                                    <select class=\"form-control\" formControlName=\"sub_relation\" name=\"sub_relation\">\n                                                        <option>{{sub.value['sub_relation']}}</option>\n                                                        <option>...</option>\n                                                    </select>\n                                                </div>\n                                                <div class=\"input-group col-xl-6\" *ngIf=\"{switch : false}; let variable\">\n                                                    <ng-select formControlName=\"sub_entity\" name=\"sub_entity\" [items]=\"people\" class=\"resizeNgSelect\" bindLabel=\"name\" bindValue=\"name\" placeholder=\"Search entity\" appendTo=\"body\"\n                                                        [loading]=\"peopleLoading\" *ngIf=\"!variable.switch\">\n                                                    </ng-select>\n                                                    <input formControlName=\"sub_entity\" name=\"sub_entity\" type=\"text\" class=\"form-control\" id=\"inputDenotes\" placeholder=\"Insert URI\" *ngIf=\"variable.switch\">\n                                                    <div class=\"input-group-append ml-3 form-check\">\n                                                        <input class=\"form-check-input vartrans-tooltip\" type=\"checkbox\" (change)=\"variable.switch=!variable.switch\" data-toggle=\"tooltip\" data-placement=\"bottom\" data-trigger=\"hover\" title=\"Clicca per inserire un URI manualmente\">\n                                                    </div>\n                                                    <div class=\"input-group-append ml-2\">\n                                                        <button class=\"btn btn-primary\" type=\"button\"><i\n                                                                class=\"fa fa-external-link-alt\"></i></button>\n                                                    </div>\n                                                    <div class=\"input-group-append ml-2\">\n                                                        <button (click)=\"removeLexicalRelationIndirectSub(i, j)\" class=\"btn btn-danger\" type=\"button\"><i class=\"fa fa-trash-alt\"></i></button>\n                                                    </div>\n                                                    <div class=\"input-group-append ml-2\">\n                                                        <button  class=\"btn btn-outline-primary invisible\" type=\"button\"><i class=\"fa fa-plus\"></i></button>\n                                                    </div>\n                                                </div>\n                                            </div>\n                                        </div>\n                                    </div>\n                                </div>\n                            </div>\n                        </div>  \n                    </div>           \n                </div>\n            </div>\n        </div>\n    </div>\n</form>","/*\n   Copyright 2021-2022  Istituto di Linguistica Computazionale \"A. Zampolli\", Consiglio Nazionale delle Ricerche, Pisa, Italy.\n \nThis file is part of EpiLexo.\n\nEpiLexo is free software: you can redistribute it and/or modify it under the terms of the GNU General Public License as published by the Free Software Foundation, either version 3 of the License, or (at your option) any later version.\n\nEpiLexo is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for more details.\n\nYou should have received a copy of the GNU General Public License along with EpiLexo. If not, see <https://www.gnu.org/licenses/>.\n*/\n\nimport { Component, OnDestroy, OnInit } from '@angular/core';\nimport { FormControl, FormGroup, Validators } from '@angular/forms';\nimport { Subject, Subscription } from 'rxjs';\nimport { debounceTime, take, takeUntil } from 'rxjs/operators';\nimport { LexicalEntriesService } from 'src/app/services/lexical-entries/lexical-entries.service';\nimport { ToastrService } from 'ngx-toastr';\n\n@Component({\n  selector: 'app-language-manager',\n  templateUrl: './language-manager.component.html',\n  styleUrls: ['./language-manager.component.scss']\n})\nexport class LanguageManagerComponent implements OnInit, OnDestroy {\n\n  languageList = [];\n  editLangArray = [];\n  isValid = false;\n  loadingService = false;\n  removeMessage;\n  destroy$ : Subject<boolean> = new Subject();\n  linkedLexicalEntries : string;\n\n  private subject: Subject<any> = new Subject();\n  /* public urlRegex = /(^|\\s)((https?:\\/\\/.+))/ */\n\n  editLangForm = new FormGroup({\n    description: new FormControl(''),\n    lexvo : new FormControl('', [Validators.required, Validators.minLength(3)]),\n    label: new FormControl('', [Validators.required, Validators.minLength(2), Validators.maxLength(3)])\n  })\n\n  refresh_lang_table_subscription : Subscription;\n  subject_subscription : Subscription;\n\n  constructor(private lexicalService: LexicalEntriesService, private toastr: ToastrService) { }\n\n\n  ngOnInit(): void {\n\n    /* this.loadLangData(); */\n\n    /*  this.onChanges(); */\n    this.refresh_lang_table_subscription = this.lexicalService.refreshLangTable$.subscribe(\n      data => {\n        /* //console.log(\"refresh\"); */\n        this.loadLangData();\n      }, error => {\n        //console.log(\"no refresh\")\n      }\n    )\n\n    this.subject_subscription = this.subject.pipe(debounceTime(1000), takeUntil(this.destroy$)).subscribe(\n      data => {\n        this.onEditLanguage(data)\n      }\n    )\n  }\n\n\n  loadLangData() {\n    this.lexicalService.getLexiconLanguages().pipe(takeUntil(this.destroy$)).subscribe(\n      data => {\n        /* //console.log(data) */\n        this.languageList = data;\n      }, error => {\n        //console.log(error)\n      }\n    )\n  }\n\n  onSubmit(inputValue: string) {\n    //console.log(inputValue.match(/^[A-Za-z]{2,3}$/))\n    if (inputValue.match(/^[A-Za-z]{2,3}$/)) {\n      this.isValid = true;\n      this.loadingService = true;\n      \n      this.lexicalService.createNewLanguage(inputValue).pipe(takeUntil(this.destroy$)).subscribe(\n        data => {\n          console.log(data)\n          this.loadingService = false;\n          this.lexicalService.refreshFilter({request: true});\n          this.lexicalService.updateLangSelect({request: true});\n          this.lexicalService.refreshLangTable();\n          this.toastr.info('Language '+ data['label'] + ' created', '', {\n            timeOut: 5000,\n          });\n\n        }, error => {\n          console.log(error)\n          this.loadingService = false;\n          this.lexicalService.refreshLangTable();\n          this.lexicalService.refreshFilter({request: true});\n          this.lexicalService.updateLangSelect({request: true});\n        }\n      )\n    } else {\n      this.isValid = false;\n    }\n  }\n\n  triggerEdit(i, v) {\n    this.subject.next({ i, v })\n  }\n\n  onEditLanguage(data) {\n    \n    if(data['v'].trim() != ''){\n      if (data['i'] == \"description\") {\n        let langId = this.editLangArray['language'];\n        let parameters = {\n          relation: 'http://purl.org/dc/terms/description',\n          value: data['v']\n        }\n  \n        this.lexicalService.updateLanguage(langId, parameters).pipe(takeUntil(this.destroy$)).subscribe(\n          data => {\n            console.log(data)\n            this.lexicalService.refreshLangTable();\n            this.lexicalService.refreshFilter({request : true})\n          }, error => {\n            console.log(error)\n            this.lexicalService.refreshLangTable();\n            this.lexicalService.refreshFilter({request : true})\n            if(error.status == 200){\n              this.toastr.info('Description for '+langId+' updated', '', {\n                timeOut: 5000,\n              });\n            }else{\n              this.toastr.error(error.error, 'Error', {\n                timeOut: 5000,\n              });\n            }\n          }\n        )\n      } else if (data['i'] == \"lexvo\") {\n        //console.log(data)\n        let langId = this.editLangArray['language'];\n        let parameters = {\n          relation: 'http://purl.org/dc/terms/language',\n          value: data['v']\n        }\n  \n        this.lexicalService.updateLanguage(langId, parameters).pipe(takeUntil(this.destroy$)).subscribe(\n          data => {\n            console.log(data)\n            this.lexicalService.refreshLangTable();\n            this.lexicalService.refreshFilter({request : true})\n          }, error => {\n            console.log(error)\n            this.lexicalService.refreshLangTable();\n            this.lexicalService.refreshFilter({request : true})\n            if(error.status == 200){\n              this.toastr.info('Description for '+langId+' updated', '', {\n                timeOut: 5000,\n              });\n            }else{\n              this.toastr.error(error.error, 'Error', {\n                timeOut: 5000,\n              });\n            }\n          }\n        )\n      }else if (data['i'] == \"label\") {\n        if(this.editLangForm.get('label').valid){\n          let langId = this.editLangArray['language'];\n          let parameters = {\n            relation: 'http://www.w3.org/ns/lemon/lime#language',\n            value: data['v']\n          }\n    \n          this.lexicalService.updateLanguage(langId, parameters).pipe(takeUntil(this.destroy$)).subscribe(\n            data => {\n              console.log(data)\n              this.lexicalService.refreshLangTable();\n            }, error => {\n              console.log(error)\n              this.lexicalService.refreshLangTable();\n              if(error.status == 200){\n                this.toastr.info('Description for '+langId+' updated', '', {\n                  timeOut: 5000,\n                });\n              }else{\n                this.toastr.error(error.error, 'Error', {\n                  timeOut: 5000,\n                });\n              }\n            }\n          )\n        }else{\n          this.toastr.error('Not valid string for label field', 'Error', {\n            timeOut: 5000,\n          });\n        }\n        \n      }\n    }else{\n      this.toastr.error(\"Don't insert empty value\", 'Error', {\n        timeOut: 5000,\n      });\n    }\n    \n  }\n\n  editLang(index) {\n    this.editLangArray = this.languageList[index]\n    this.editLangForm.get('description').setValue(this.editLangArray['description'], { eventEmit: false })\n    this.editLangForm.get('lexvo').setValue(this.editLangArray['lexvo'], { eventEmit: false })\n    this.editLangForm.get('label').setValue(this.editLangArray['label'], { eventEmit: false })\n    //console.log(this.editLangArray)\n  }\n\n  checkEditValid(index) {\n    return this.editLangForm.get(index).valid;\n  }\n\n  removeLang(index) {\n    this.removeMessage = this.languageList[index]['language']\n  }\n\n  async showLinkedLexicalEntries(index){\n    this.linkedLexicalEntries = '';\n    console.log(this.languageList[index]);\n    let lexvo = this.languageList[index].lexvo != '' ? this.languageList[index].lexvo : this.languageList[index].label;\n\n    let parameters = {\n      text: '',\n      searchMode: \"startsWith\",\n      type: \"\",\n      pos: \"\",\n      formType: \"entry\",\n      author: \"\",\n      lang: lexvo,\n      status: \"\",\n      offset: 0,\n      limit: 500\n  }\n\n    let filtered_lex_entries = await this.lexicalService.getLexicalEntriesList(parameters).toPromise();\n\n    filtered_lex_entries.list.forEach(element => {\n      this.linkedLexicalEntries += element.lexicalEntry + '\\n';\n    });\n\n    document.getElementById('lexical-entries-linked-list').innerHTML = this.linkedLexicalEntries;\n  }\n\n  deleteLangRequest(){\n    let langId = this.removeMessage;\n    this.lexicalService.deleteLanguage(langId).pipe(takeUntil(this.destroy$)).subscribe(\n      data=>{\n        console.log(data);\n        this.lexicalService.refreshLangTable();\n        this.lexicalService.refreshFilter({request : true})\n        this.toastr.info('Language ' +langId+' removed', '', {\n          timeOut: 5000,\n        });\n      },error=>{\n        console.log(error);\n        this.lexicalService.refreshLangTable();\n        this.lexicalService.refreshFilter({request : true})\n        this.toastr.error(error.error, 'Error', {\n          timeOut: 5000,\n        });\n      }\n    )\n  }\n\n  ngOnDestroy(): void {\n      this.refresh_lang_table_subscription.unsubscribe();\n      this.subject_subscription.unsubscribe();\n\n      this.destroy$.next(true);\n      this.destroy$.complete();\n  }\n\n}\n","\n\n<div class=\"card\">\n    <span class=\"text-id\"><b>LANGUAGE LIST</b></span>\n    <a class=\"pointer\" (click)=\"addLanguageModal.show()\"><span class=\"collapse-icon\"><i\n                class=\"fa fa-plus-square\"></i></span></a>\n    <div class=\"card-body\">\n        <div class=\"form-group row ml-3 mt-3 mr-3 mb-0\">\n            <table class=\"table table_language table-bordered  table-hover\">\n                <thead>\n                    <tr>\n                        <th scope=\"col\">#</th>\n                        <th scope=\"col\">Label</th>\n                        <th scope=\"col\">Creator</th>\n                        <th scope=\"col\">Description</th>\n                        <th scope=\"col\">Entries</th>\n                        <th scope=\"col\">Actions</th>\n                    </tr>\n                </thead>\n                <tbody>\n                    <tr *ngFor=\"let lang of languageList; let i = index\">\n                        <th scope=\"row\">{{i+1}}</th>\n                        <td>{{lang['label']}}</td>\n                        <td>{{lang['creator'] != \"\" ? lang['creator'] : '<'+'empty'+'>'}}</td>\n                        <td>{{lang['description'] != \"\" ? (lang['description'] | slice:0:50) +'...' : '<'+'empty'+'>'}}\n                        </td>\n                        <td>{{lang['entries']}}</td>\n                        <td>\n                            <span><button class=\"btn btn-primary mr-1\" (click)=\"editLang(i); editLangModal.show()\"><i\n                                        class=\"fas fa-edit\"></i></button></span>\n                            <span><button class=\"btn btn-danger ml-1\" (click)=\"removeLang(i); removeLangModal.show()\"><i\n                                        class=\"fas fa-trash-alt\"></i></button></span>\n                            <span>\n                                <button class=\"btn btn-secondary ml-1\" (click)=\"showLinkedLexicalEntries(i); lexEntryModal.show()\" alt=\"show linked entries\">\n                                    <i class=\"fas fa-eye\"></i>\n                                </button>\n                            </span>\n                        </td>\n                    </tr>\n                </tbody>\n            </table>\n        </div>\n    </div>\n</div>\n\n<app-modal #removeLangModal class=\"remove_languages_modal\">\n    <ng-container class=\"app-modal-header\"></ng-container>\n    <ng-container class=\"app-modal-body\">\n        <div class=\"card\">\n            <div class=\"card-body\">\n                <div class=\"form-group row ml-2 mt-3 mr-2\">\n                    <label for=\"inputLabel\" class=\"col-lg-12 col-form-label\" style=\"font-size: 12px; text-align: center\">Are you sure to delete {{removeMessage}}?</label>\n                </div>\n                <div class=\"form-group row ml-2 mt-3 mr-2 justify-content-md-center\">\n                    <div class=\"input-group col-lg-5 justify-content-md-center\" style=\"align-items: center; text-align: center;\">\n                        <div class=\"input-group-append ml-2\">\n                            <button class=\"btn btn-success\" type=\"button\" (click)=\"deleteLangRequest(); removeLangModal.hide()\"><i\n                                    class=\"fas fa-check\"></i></button>\n                        </div>\n                        <div class=\"input-group-append ml-2\">\n                            <button class=\"btn btn-danger\" type=\"button\" (click)=\"removeLangModal.hide()\"><i\n                                    class=\"fas fa-times\"></i></button>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </ng-container>\n</app-modal>\n\n<app-modal #lexEntryModal class=\"lex_entry_modal\">\n    <ng-container class=\"app-modal-header\"></ng-container>\n    <ng-container class=\"app-modal-body\">\n        <div class=\"card\" *ngIf=\"editLangArray\">\n            <span class=\"text-id\"><b>LEXICAL ENTRIES</b></span>\n            <!-- <a class=\"pointer\" (click)=\"addLanguageModal.show()\"><span class=\"collapse-icon\"><i\n                        class=\"fa fa-plus-square\"></i></span></a> -->\n            <div class=\"card-body\">\n                <textarea id=\"lexical-entries-linked-list\" class=\"w-100\" cols=\"30\" rows=\"10\" readonly [hidden]=\"linkedLexicalEntries == ''\"></textarea>\n            </div>\n        </div>\n    </ng-container>\n</app-modal>\n\n\n<app-modal #editLangModal class=\"edit_languages_modal\" >\n    <ng-container class=\"app-modal-header\"></ng-container>\n    <ng-container class=\"app-modal-body\">\n        <div class=\"card\" *ngIf=\"editLangArray\">\n            <span class=\"text-id\"><b>LANGUAGE EDITOR</b></span>\n            <!-- <a class=\"pointer\" (click)=\"addLanguageModal.show()\"><span class=\"collapse-icon\"><i\n                        class=\"fa fa-plus-square\"></i></span></a> -->\n            <div class=\"card-body\">\n                <form [formGroup]=\"editLangForm\">\n                    <div *ngFor=\"let item of editLangArray | keyvalue\">\n                        <div class=\"form-group row ml-2 mt-3 mr-2\" *ngIf=\"item.key == 'description' || item.key == 'label' || item.key == 'lexvo'\">\n                            <label for=\"inputLabel\" class=\"col-lg-3 col-form-label\" style=\"font-size: 12px;\">{{item.key}}</label>\n                            <div class=\"input-group col-lg-9\" style=\"align-items: center;\">\n                                <input #inputLang type=\"text\" class=\"form-control\" placeholder=\"\" [value]=\"item.value\" [formControlName]=\"item.key\" [name]=\"item.key\" (keyup)=\"triggerEdit(item.key, inputLang.value)\">\n                                <div class=\"invalid-feedback\" *ngIf=\"!checkEditValid(item.key)\" style=\"display: block; font-size: 9px;\">\n                                    Invalid Field\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                </form>\n            </div>\n        </div>\n    </ng-container>\n</app-modal>\n\n\n\n\n<app-modal #addLanguageModal class=\"add_languages_modal\">\n    <ng-container class=\"app-modal-header\"></ng-container>\n    <ng-container class=\"app-modal-body\">\n        <div class=\"card\">\n            <div class=\"card-body\">\n                <div class=\"form-group row ml-2 mt-3 mr-2\">\n                    <label for=\"inputLabel\" class=\"col-lg-5 col-form-label\" style=\"font-size: 12px;\">Insert a language\n                        code (max 2-3 chars):</label>\n                    <div class=\"input-group col-lg-7\" style=\"align-items: center;\">\n                        <input #inputAddLanguage id=\"label\" type=\"text\" class=\"form-control\" placeholder=\"\" #langValue>\n                        <div class=\"input-group-append ml-2\">\n                            <button class=\"btn btn-success\" type=\"button\" (click)=\"onSubmit(langValue.value); addLanguageModal.hide()\"\n                            [disabled]=\"inputAddLanguage.value.length < 2 || inputAddLanguage.value.length > 3\"><i\n                                    class=\"fas fa-check\"></i></button>\n                        </div>\n                        <div class=\"spinner-border spinner-border-sm m-1\" role=\"status\" *ngIf=\"loadingService\">\n                            <span class=\"sr-only\">Loading...</span>\n                        </div>\n                        <div class=\"invalid-feedback\" *ngIf=\"!isValid\" style=\"display: block; font-size: 9px;\">\n                            Please, insert at least three characters.\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </ng-container>\n</app-modal>","/*\n   Copyright 2021-2022  Istituto di Linguistica Computazionale \"A. Zampolli\", Consiglio Nazionale delle Ricerche, Pisa, Italy.\n \nThis file is part of EpiLexo.\n\nEpiLexo is free software: you can redistribute it and/or modify it under the terms of the GNU General Public License as published by the Free Software Foundation, either version 3 of the License, or (at your option) any later version.\n\nEpiLexo is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for more details.\n\nYou should have received a copy of the GNU General Public License along with EpiLexo. If not, see <https://www.gnu.org/licenses/>.\n*/\n\nimport { HttpClient } from '@angular/common/http';\nimport { Injectable } from '@angular/core';\nimport { BehaviorSubject, Observable } from 'rxjs';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class BibliographyService {\n\n  constructor(private http: HttpClient) { }\n\n\n  private baseUrl = \"https://api.zotero.org/groups/2552746/items\";\n  \n  private _addBiblioItem: BehaviorSubject<any> = new BehaviorSubject(null);\n  private _triggerPanel: BehaviorSubject<object> = new BehaviorSubject(null);\n  addBiblioReq$ = this._addBiblioItem.asObservable();\n  triggerPanel$ = this._triggerPanel.asObservable();\n\n  sendDataToBibliographyPanel(object: any) {\n    this._addBiblioItem.next(object)\n  }\n\n  triggerPanel(object: object) {\n    this._triggerPanel.next(object)\n  } \n\n  bootstrapData(start? : number, sortField? : string, direction? : string) : Observable<any> {\n    return this.http.get(this.baseUrl + '?limit=25&start='+start+'&sort='+sortField+'&direction='+direction+'&v=3');\n  }\n\n  filterBibliography(start? : number, sortField? : string, direction? : string, query?, queryMode?) : Observable<any> {\n    return this.http.get(this.baseUrl + '?limit=25&q='+query+'&qmode='+queryMode+'&start='+start+'&sort='+sortField+'&direction='+direction+'&v=3');\n  }\n\n}\n","/*\n   Copyright 2021-2022  Istituto di Linguistica Computazionale \"A. Zampolli\", Consiglio Nazionale delle Ricerche, Pisa, Italy.\n \nThis file is part of EpiLexo.\n\nEpiLexo is free software: you can redistribute it and/or modify it under the terms of the GNU General Public License as published by the Free Software Foundation, either version 3 of the License, or (at your option) any later version.\n\nEpiLexo is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for more details.\n\nYou should have received a copy of the GNU General Public License along with EpiLexo. If not, see <https://www.gnu.org/licenses/>.\n*/\n\nimport { Component, Input, OnDestroy, OnInit, SimpleChanges } from '@angular/core';\nimport { Subject, Subscription } from 'rxjs';\nimport { LexicalEntriesService } from 'src/app/services/lexical-entries/lexical-entries.service';\n\nimport { FormBuilder, FormGroup, FormArray, FormControl } from '@angular/forms';\nimport { debounceTime, takeUntil } from 'rxjs/operators';\n\n@Component({\n  selector: 'app-lexical-entry-synsem-form',\n  templateUrl: './lexical-entry-synsem-form.component.html',\n  styleUrls: ['./lexical-entry-synsem-form.component.scss']\n})\nexport class LexicalEntrySynsemFormComponent implements OnInit, OnDestroy {\n\n  switchInput = false;\n  subscription: Subscription;\n  object: any;\n  peopleLoading = false;\n  counter = 0;\n  componentRef: any;\n  destroy$ : Subject<boolean> = new Subject();\n\n  @Input() lexData: any;\n\n  synsemForm = new FormGroup({\n    label: new FormControl(''),\n    frames: new FormArray([this.createFrame()])\n  })\n\n  frameArray: FormArray;\n\n  constructor(private lexicalService: LexicalEntriesService, private formBuilder: FormBuilder) {\n  }\n\n  ngOnInit() {\n\n    this.synsemForm = this.formBuilder.group({\n      label: '',\n      frames: this.formBuilder.array([])\n    })\n    this.onChanges();\n    this.loadPeople();\n    this.triggerTooltip();\n  }\n\n  ngOnChanges(changes: SimpleChanges) {\n    setTimeout(() => {\n      if (this.object != changes.lexData.currentValue) {\n        if (this.frameArray != null) {\n          this.frameArray.clear();\n        }\n      }\n      this.loadPeople();\n      this.object = changes.lexData.currentValue;\n      if (this.object != null) {\n        this.synsemForm.get('label').setValue(this.object.label, { emitEvent: false });\n\n      }\n      this.triggerTooltip();\n    }, 10)\n  }\n\n  triggerTooltip() {\n    setTimeout(() => {\n      //@ts-ignore\n      $('.vartrans-tooltip').tooltip({\n        trigger: 'hover'\n      });\n    }, 500);\n  }\n\n  private loadPeople() {\n    /* this.peopleLoading = true;\n    this.dataService.getPeople().subscribe(x => {\n      this.people = x;\n      this.peopleLoading = false;\n    }); */\n  }\n\n  onChanges(): void {\n    this.synsemForm.valueChanges.pipe(debounceTime(200), takeUntil(this.destroy$)).subscribe(searchParams => {\n      //console.log(searchParams)\n    })\n  }\n\n  addFrame() {\n    this.frameArray = this.synsemForm.get('frames') as FormArray;\n    this.frameArray.push(this.createFrame());\n  }\n\n  addArg(index){\n    const control = (<FormArray>this.synsemForm.controls['frames']).at(index).get('args') as FormArray;\n    control.push(this.createArg());\n  }\n\n  addForm(ix, iy){\n    const control = ((<FormArray>this.synsemForm.controls['frames']).at(ix).get('args') as FormArray).at(iy).get('form') as FormArray;\n    control.push(this.createForm());\n  }\n\n  removeArg(ix, iy){\n    const control = (<FormArray>this.synsemForm.controls['frames']).at(ix).get('args') as FormArray;\n    control.removeAt(iy);\n  }\n\n  removeForm(ix, iy, iz){\n    const control = ((<FormArray>this.synsemForm.controls['frames']).at(ix).get('args') as FormArray).at(iy).get('form') as FormArray;\n    control.removeAt(iz);\n  }\n\n  removeFrame(index) {\n    this.frameArray = this.synsemForm.get('frames') as FormArray;\n    this.frameArray.removeAt(index);\n  }\n\n  createFrame(): FormGroup {\n    return this.formBuilder.group({\n      label: '',\n      type: '',\n      example: '',\n      args: new FormArray([])\n    })\n  }\n\n  createArg() : FormGroup {\n    return this.formBuilder.group({\n      label: '',\n      type: '',\n      marker: '',\n      optional: false,\n      form: new FormArray([])\n    })\n  }\n\n  createForm() : FormGroup {\n    return this.formBuilder.group({\n      form_label: ''\n    })\n  }\n\n  ngOnDestroy(): void {\n    this.destroy$.next(true);\n    this.destroy$.complete();\n  }\n}\n","\n\n<form [formGroup]=\"synsemForm\" *ngIf=\"object!=null\">\n    <div class=\"form-group row ml-2 mt-3 mr-2\">\n        <label for=\"inputLabel\" class=\"col-xl-3 col-form-label\">Label:</label>\n        <div class=\"input-group col-xl-5\">\n            <input formControlName=\"label\" name=\"label\" type=\"text\" class=\"form-control\" placeholder=\"\">\n        </div>\n        <div class=\"input-group-append\">\n            <div class=\"input-group-append ml-2\">\n                <button (click)=\"addFrame()\" class=\"btn btn-outline-primary\" type=\"button\"><i class=\"fa fa-plus\"></i></button>\n            </div>\n        </div>\n    </div>\n    \n    <!-- FRAME -->\n    <div formArrayName=\"frames\">\n        <div *ngFor=\"let frame of synsemForm['controls'].frames['controls']; let i = index\">\n            <div [formGroupName]=\"i\">\n                <div class=\"form-group row ml-2 mt-3 mr-2\">\n                    <div class=\"input-group col-xl-12\">\n                        <div class=\"card\">\n                            <span class=\"text-id\"><b>FRAME</b></span>\n                            <a class=\"pointer\" (click)=\"addArg(i)\"><span class=\"add-icon\"><i class=\"fa fa-plus-square\"></i></span></a>\n                            <a class=\"pointer\" (click)=\"removeFrame(i)\"><span class=\"trash-icon\"><i class=\"fa fa-trash\"></i></span></a>\n                            <div class=\"card-body\">\n                                <div class=\"form-group row ml-2 mt-3 mr-2\">\n                                    <label for=\"inputLabel\" class=\"col-lg-3 col-form-label\">Label:</label>\n                                    <div class=\"input-group col-lg-5\">\n                                        <input formControlName=\"label\" name=\"label\" type=\"text\" class=\"form-control\" placeholder=\"\">\n                                    </div>\n                                </div>\n                                <div class=\"form-group row ml-2 mt-3 mr-2\">\n                                    <label for=\"inputType\" class=\"col-lg-3 col-form-label\">Type:</label>\n                                    <div class=\"col-lg-5\">\n                                        <select formControlName=\"type\" name=\"type\" class=\"form-control\">\n                                            <option [value]=\"object.type\">{{object.type}}</option>\n                                        </select>\n                                    </div>\n                                </div>\n                                <div class=\"form-group row ml-2 mt-3 mr-2\">\n                                    <label for=\"inputLanguage\" class=\"col-lg-3 col-form-label\">Example:</label>\n                                    <div class=\"col-lg-8\">\n                                        <input formControlName=\"example\" name=\"example\" type=\"text\" class=\"form-control\" placeholder=\"\">\n                                    </div>\n                                </div>\n\n                                <!-- ARGS -->\n                                <div formArrayName=\"args\">\n                                    <div *ngFor=\"let a of frame['controls'].args['controls']; let j = index\">\n                                        <div [formGroupName]=\"j\">\n                                            <div class=\"form-group row ml-2 mt-3 mr-2\">\n                                                <div class=\"input-group col-xl-12\">\n                                                    <div class=\"card\">\n                                                        <span class=\"text-id\"><span class=\"badge badge-primary ml-2\">ARG#{{j+1}}</span></span>\n                                                        <a class=\"pointer\" (click)=\"addForm(i, j)\"><span class=\"add-icon\"><i class=\"fa fa-plus-square\"></i></span></a>\n                                                        <a class=\"pointer\" (click)=\"removeArg(i, j)\"><span class=\"trash-icon\"><i class=\"fa fa-trash\"></i></span></a>\n                                                        <div class=\"card-body\">\n                                                            <div class=\"form-group row ml-2 mt-3 mr-2\">\n                                                                <label class=\"col-lg-3 col-form-label\">Label:</label>\n                                                                <div class=\"input-group col-lg-5\">\n                                                                    <input formControlName=\"label\" name=\"label\" type=\"text\" class=\"form-control\" placeholder=\"\">\n                                                                </div>\n                                                            </div>\n                                                            <div class=\"form-group row ml-2 mt-3 mr-2\">\n                                                                <label for=\"inputType\" class=\"col-lg-3 col-form-label\">Type:</label>\n                                                                <div class=\"col-lg-5\">\n                                                                    <select formControlName=\"type\" name=\"type\" class=\"form-control\">\n                                                                        <option [value]=\"object.type\">{{object.type}}</option>\n                                                                    </select>\n                                                                </div>\n                                                            </div>\n                                                            <div class=\"form-group row ml-2 mt-3 mr-2\">\n                                                                <label class=\"col-lg-3 col-form-label\">Marker:</label>\n                                                                <div class=\"col-lg-5\">\n                                                                    <input formControlName=\"marker\" name=\"marker\" type=\"text\" class=\"form-control\" placeholder=\"\">\n                                                                </div>\n                                                            </div>\n                                                            <div class=\"form-group row ml-2 mt-3 mr-2\">\n                                                                <label class=\"col-lg-3 col-form-label\">Optional:</label>        \n                                                                <div class=\"input-group col-lg-7 ml-3\">\n                                                                    <div class=\"input-group-append ml-2\" style=\"align-items: center;\">\n                                                                        <input formControlName=\"optional\" name=\"optional\" class=\"form-check-input\" type=\"checkbox\">\n                                                                    </div>\n                                                                </div>\n                                                            </div>\n\n                                                            <div class=\"form-group row ml-2 mt-3 mr-2\" *ngIf=\"a['controls'].form['controls'].length > 0\" style=\"align-items:baseline;\">\n                                                                <label class=\"col-lg-3 col-form-label\">Form:</label>\n\n                                                                <!-- FORM -->\n                                                                <div formArrayName=\"form\" class=\"col-lg-9\" style=\"max-height: 15vh;overflow: auto;\">\n                                                                    <div *ngFor=\"let form of a['controls'].form['controls']; let k = index\">\n                                                                        <div [formGroupName]=\"k\">\n                                                                            <div class=\"form-group row ml-2 mt-3 mr-2\">\n                                                                                <div class=\"input-group\" *ngIf=\"{switch : false}; let variable\">\n                                                                                    <ng-select formControlName=\"form_label\" name=\"form_label\" [items]=\"people\" class=\"resizeNgSelect\" bindLabel=\"name\" bindValue=\"name\" placeholder=\"Search entity\" appendTo=\"body\"\n                                                                                        [loading]=\"peopleLoading\" *ngIf=\"!variable.switch\">\n                                                                                    </ng-select>\n                                                                                    <input formControlName=\"form_label\" name=\"form_label\" type=\"text\" class=\"form-control\" id=\"inputDenotes\" placeholder=\"Insert URI\" *ngIf=\"variable.switch\">\n                                                                                    <div class=\"input-group-append ml-3 form-check\">\n                                                                                        <input class=\"form-check-input vartrans-tooltip\" type=\"checkbox\" (change)=\"variable.switch=!variable.switch\" data-toggle=\"tooltip\" data-placement=\"bottom\" data-trigger=\"hover\" title=\"Clicca per inserire un URI manualmente\">\n                                                                                    </div>\n                                                                                    <div class=\"input-group-append ml-2\">\n                                                                                        <button class=\"btn btn-primary\" type=\"button\"><i\n                                                                                                class=\"fa fa-external-link-alt\"></i></button>\n                                                                                    </div>\n                                                                                    <div class=\"input-group-append ml-2\">\n                                                                                        <button (click)=\"removeForm(i, j, k)\" class=\"btn btn-danger\" type=\"button\"><i class=\"fa fa-trash-alt\"></i></button>\n                                                                                    </div>\n                                                                                    \n                                                                                </div>\n                                                                            </div>  \n                                                                        </div>\n                                                                    </div>\n                                                                </div>\n                                                            </div>\n                                                        </div>\n                                                    </div>\n                                                </div>\n                                            </div>\n                                        </div>\n                                    </div>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n    \n</form>","import { FormGroup } from '@angular/forms';\n    \nexport function ConfirmedValidator(controlName: string, matchingControlName: string){\n    return (formGroup: FormGroup) => {\n        const control = formGroup.controls[controlName];\n        const matchingControl = formGroup.controls[matchingControlName];\n        if (matchingControl.errors && !matchingControl.errors.confirmedValidator) {\n            return;\n        }\n        if (control.value !== matchingControl.value) {\n            matchingControl.setErrors({ confirmedValidator: true });\n        } else {\n            matchingControl.setErrors(null);\n        }\n    }\n}","/*\n   Copyright 2021-2022  Istituto di Linguistica Computazionale \"A. Zampolli\", Consiglio Nazionale delle Ricerche, Pisa, Italy.\n \nThis file is part of EpiLexo.\n\nEpiLexo is free software: you can redistribute it and/or modify it under the terms of the GNU General Public License as published by the Free Software Foundation, either version 3 of the License, or (at your option) any later version.\n\nEpiLexo is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for more details.\n\nYou should have received a copy of the GNU General Public License along with EpiLexo. If not, see <https://www.gnu.org/licenses/>.\n*/\n\nimport { HttpClient } from '@angular/common/http';\nimport { Injectable } from '@angular/core';\nimport { BehaviorSubject, Observable, of } from 'rxjs';\nimport { map, shareReplay } from 'rxjs/operators';\nimport { AuthService } from '../auth/auth.service';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class ConceptService {\n\n  private baseUrl = \"/LexO-backend-itant_demo/service/\"\n  private key = \"PRINitant19\";\n  private author = \"\";\n  private lexicalIRI = 'http://lexica/mylexicon#';\n  private lexicalPrefix = 'lex'\n\n  private _deleteConceptSetReq: BehaviorSubject<any> = new BehaviorSubject(null);\n  private _addSubElementReq: BehaviorSubject<any> = new BehaviorSubject(null);\n\n  deleteSkosReq$ = this._deleteConceptSetReq.asObservable();\n  addSubReq$ = this._addSubElementReq.asObservable();\n\n  constructor(private http: HttpClient, private auth: AuthService) { }\n\n  addSubElementRequest(request?: any){\n    this._addSubElementReq.next(request);\n  }\n\n  getLexicalIRI(){\n    return this.lexicalIRI;\n  }\n\n  deleteRequest(request? : any) {\n    this._deleteConceptSetReq.next(request);\n  }\n\n  getConceptSets(): Observable<any> {\n    return this.http.get(this.baseUrl + \"lexicon/data/conceptSets\");\n  }\n\n  getRootLexicalConcepts(): Observable<any> {\n    return this.http.get(this.baseUrl + \"lexicon/data/lexicalConcepts?id=root\");\n  }\n\n  getLexicalConcepts(instance : string): Observable<any> {\n    return this.http.get(this.baseUrl + \"lexicon/data/lexicalConcepts?id=\"+encodeURIComponent(instance));\n  }\n\n  getLexicalConceptData(instance : string) : Observable<any>{\n    return this.http.get(this.baseUrl + \"lexicon/data/lexicalConcept?id=\"+encodeURIComponent(instance));\n  }\n\n  createNewConceptSet(): Observable<any> {\n    this.author = this.auth.getUsername();\n    return this.http.get(this.baseUrl + \"lexicon/creation/conceptSet?key=\"+this.key+\"&author=\"+this.author+\"&prefix=\"+encodeURIComponent(this.lexicalPrefix)+\"&baseIRI=\"+encodeURIComponent(this.lexicalIRI));\n  }\n\n  createNewLexicalConcept(): Observable<any> {\n    this.author = this.auth.getUsername();\n    return this.http.get(this.baseUrl + \"lexicon/creation/lexicalConcept?key=\"+this.key+\"&author=\"+this.author+\"&prefix=\"+encodeURIComponent(this.lexicalPrefix)+\"&baseIRI=\"+encodeURIComponent(this.lexicalIRI));\n  }\n\n\n  linkLexicalConceptTo(parameters) : Observable<any> {\n    return this.http.post(this.baseUrl + \"lexicon/creation/lexicalConcept?key=\"+this.key, parameters);\n  }\n\n  deleteConceptSet(conceptSetID) : Observable<any> {\n    return this.http.get(this.baseUrl + \"lexicon/delete/conceptSet?key=\"+this.key + \"&id=\"+encodeURIComponent(conceptSetID));\n  }\n\n  deleteLexicalConcept(lexicalConceptID, recursive?) : Observable<any> {\n    if(recursive == undefined){\n      return this.http.get(this.baseUrl + \"lexicon/delete/lexicalConcept?key=\"+this.key + \"&id=\"+encodeURIComponent(lexicalConceptID)+\"&recursive=false\");\n    }else{\n      return this.http.get(this.baseUrl + \"lexicon/delete/lexicalConcept?key=\"+this.key + \"&id=\"+encodeURIComponent(lexicalConceptID)+\"&recursive=true\");\n    }\n  }\n\n  updateSkosLabel(parameters) : Observable<any> {\n    return this.http.post(this.baseUrl + \"skos/updateLexicalLabel?key=\"+this.key, parameters);\n  }\n\n  updateSchemeProperty(parameters) : Observable<any> {\n    return this.http.post(this.baseUrl + \"skos/updateSchemeProperty?key=\"+this.key, parameters);\n  }\n\n  updateSemanticRelation(parameters) : Observable<any> {\n    return this.http.post(this.baseUrl + \"skos/updateSemanticRelation?key=\"+this.key, parameters);\n  }\n\n  updateNoteProperty(parameters) : Observable<any> {\n    return this.http.post(this.baseUrl + \"skos/updateNoteProperty?key=\"+this.key, parameters);\n  }\n\n  deleteRelation(instance, parameters) : Observable<any> {\n    return this.http.post(this.baseUrl + \"lexicon/delete/relation?key=\"+this.key+\"&id=\"+encodeURIComponent(instance), parameters);\n  }\n\n  conceptFilter(parameters: any): Observable<any> {\n    return this.http.post(this.baseUrl + \"lexicon/data/filteredLexicalConcepts\", parameters);\n  }\n}\n","/*\n   Copyright 2021-2022  Istituto di Linguistica Computazionale \"A. Zampolli\", Consiglio Nazionale delle Ricerche, Pisa, Italy.\n \nThis file is part of EpiLexo.\n\nEpiLexo is free software: you can redistribute it and/or modify it under the terms of the GNU General Public License as published by the Free Software Foundation, either version 3 of the License, or (at your option) any later version.\n\nEpiLexo is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for more details.\n\nYou should have received a copy of the GNU General Public License along with EpiLexo. If not, see <https://www.gnu.org/licenses/>.\n*/\n\nimport { Component, OnInit } from '@angular/core';\n\n@Component({\n  selector: 'app-login-page',\n  templateUrl: './login-page.component.html',\n  styleUrls: ['./login-page.component.scss']\n})\nexport class LoginPageComponent implements OnInit {\n\n  constructor() { }\n\n  ngOnInit(): void {\n  }\n\n}\n","\n\n<div class=\"text-center\">\n    <form class=\"form-signin\">\n      <img class=\"mb-4\" src=\"../../../assets/images/LexOIcon.png\" alt=\"\" width=\"120\" >\n      <h1 class=\"h3 mb-3 font-weight-normal\">Please sign in</h1>\n      <label for=\"inputEmail\" class=\"sr-only\">Email address</label>\n      <input type=\"email\" id=\"inputEmail\" class=\"form-control\" placeholder=\"Email address\" required autofocus>\n      <label for=\"inputPassword\" class=\"sr-only\">Password</label>\n      <input type=\"password\" id=\"inputPassword\" class=\"form-control\" placeholder=\"Password\" required>\n      <div class=\"checkbox mb-3\">\n        <label>\n          <input type=\"checkbox\" value=\"remember-me\"> Remember me\n        </label>\n      </div>\n      <button class=\"btn btn-lg btn-primary btn-block\" type=\"submit\">Sign in</button>\n      <p class=\"mt-5 mb-3 text-muted\">&copy; 2020</p>\n    </form>\n</div>","/*\n   Copyright 2021-2022  Istituto di Linguistica Computazionale \"A. Zampolli\", Consiglio Nazionale delle Ricerche, Pisa, Italy.\n \nThis file is part of EpiLexo.\n\nEpiLexo is free software: you can redistribute it and/or modify it under the terms of the GNU General Public License as published by the Free Software Foundation, either version 3 of the License, or (at your option) any later version.\n\nEpiLexo is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for more details.\n\nYou should have received a copy of the GNU General Public License along with EpiLexo. If not, see <https://www.gnu.org/licenses/>.\n*/\n\nimport { Component } from '@angular/core';\n\n@Component({\n  selector: 'app-root',\n  templateUrl: './app.component.html',\n  styleUrls: ['./app.component.scss']\n})\nexport class AppComponent {\n  title = 'epilexo';\n}\n","\n\n<app-navbar></app-navbar>\n<router-outlet></router-outlet>","/*\n   Copyright 2021-2022  Istituto di Linguistica Computazionale \"A. Zampolli\", Consiglio Nazionale delle Ricerche, Pisa, Italy.\n \nThis file is part of EpiLexo.\n\nEpiLexo is free software: you can redistribute it and/or modify it under the terms of the GNU General Public License as published by the Free Software Foundation, either version 3 of the License, or (at your option) any later version.\n\nEpiLexo is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for more details.\n\nYou should have received a copy of the GNU General Public License along with EpiLexo. If not, see <https://www.gnu.org/licenses/>.\n*/\n\nimport { Component, Input, OnDestroy, OnInit, QueryList, SimpleChanges, ViewChildren } from '@angular/core';\nimport { FormArray, FormBuilder, FormControl, FormGroup } from '@angular/forms';\nimport { NgSelectComponent } from '@ng-select/ng-select';\nimport { ToastrService } from 'ngx-toastr';\nimport { Subject, Subscription } from 'rxjs';\nimport { debounceTime, pairwise, startWith, takeUntil } from 'rxjs/operators';\nimport { LexicalEntriesService } from 'src/app/services/lexical-entries/lexical-entries.service';\nimport { LilaService } from 'src/app/services/lila/lila.service';\n\n@Component({\n  selector: 'app-etymology-form',\n  templateUrl: './etymology-form.component.html',\n  styleUrls: ['./etymology-form.component.scss']\n})\nexport class EtymologyFormComponent implements OnInit, OnDestroy {\n\n  @Input() etymData: any;\n  @ViewChildren('etyLink') etyLinkList: QueryList<NgSelectComponent>;\n  switchInput = false;\n  subscription: Subscription;\n  object: any;\n  peopleLoading = false;\n  counter = 0;\n  componentRef: any;\n\n  subject_cognates_subscription: Subscription;\n  subject_etylink_subscription: Subscription;\n  subject_etylink_input_subscription: Subscription;\n  subject_cognates_input_subscription: Subscription;\n  subject_etylink_note_subscription: Subscription;\n  subject_etylink_label_subscription: Subscription;\n\n\n\n  etyForm = new FormGroup({\n    label: new FormControl(''),\n    author: new FormControl(''),\n    confidence: new FormControl(null),\n    etylink: new FormArray([this.createEtyLink()]),\n    cognates: new FormArray([this.createCognate()]),\n    isEtymon: new FormControl(false),\n    isCognate: new FormControl(false)\n  })\n\n  etyLinkArray: FormArray;\n  cognatesArray: FormArray;\n\n  private subject_cognates: Subject<any> = new Subject();\n  private subject_cognates_input: Subject<any> = new Subject();\n  private subject_etylink: Subject<any> = new Subject();\n  private subject_etylink_input: Subject<any> = new Subject();\n  private etylink_note_subject: Subject<any> = new Subject();\n  private etylink_label_subject: Subject<any> = new Subject();\n  searchResults = [];\n  filterLoading = false;\n\n  memoryLinks = [];\n  memoryConfidence = null;\n\n  destroy$ : Subject<boolean> = new Subject();\n\n  constructor(private lexicalService: LexicalEntriesService,\n    private formBuilder: FormBuilder,\n    private toastr: ToastrService,\n    private lilaService: LilaService) { }\n\n  ngOnInit(): void {\n\n    this.etyForm = this.formBuilder.group({\n      label: '',\n      author: '',\n      confidence: false,\n      etylink: this.formBuilder.array([]),\n      cognates: this.formBuilder.array([]),\n      isEtymon: false,\n      isCognate: false\n    })\n    this.onChanges();\n    this.triggerTooltip();\n\n    \n\n    this.subject_cognates_subscription = this.subject_cognates.pipe(debounceTime(1000), takeUntil(this.destroy$)).subscribe(\n      data => {\n        if (data != null) {\n          this.onSearchFilter(data)\n\n        }\n      }\n    )\n\n    this.subject_etylink_subscription = this.subject_etylink.pipe(debounceTime(1000), takeUntil(this.destroy$)).subscribe(\n      data => {\n        if (data != null) {\n          this.onSearchFilter(data)\n\n        }\n      }\n    )\n\n    this.subject_etylink_input_subscription = this.subject_etylink_input.pipe(debounceTime(1000), takeUntil(this.destroy$)).subscribe(\n      data => {\n        console.log(data)\n        if (data != null) {\n          let value = data['value'];\n          let index = data['i'];\n          this.onChangeEtylink(value, index)\n        }\n\n      }\n    )\n\n    this.subject_cognates_input_subscription = this.subject_cognates_input.pipe(debounceTime(1000), takeUntil(this.destroy$)).subscribe(\n      data => {\n        this.onSearchFilter(data)\n      }\n    )\n\n    this.subject_etylink_note_subscription = this.etylink_note_subject.pipe(debounceTime(1000), takeUntil(this.destroy$)).subscribe(\n      data => {\n        this.onChangeEtylinkNote(data)\n      }\n    )\n\n    this.subject_etylink_label_subscription = this.etylink_label_subject.pipe(debounceTime(1000), takeUntil(this.destroy$)).subscribe(\n      data => {\n        this.onChangeEtylinkLabel(data)\n      }\n    )\n  }\n\n\n  triggerTooltip() {\n    setTimeout(() => {\n      //@ts-ignore\n      $('.vartrans-tooltip').tooltip({\n        trigger: 'hover'\n      });\n    }, 500);\n  }\n\n  ngOnChanges(changes: SimpleChanges) {\n\n    if (this.object != changes.etymData.currentValue) {\n      if (this.etyLinkArray != undefined || this.cognatesArray != undefined) {\n        this.etyLinkArray.clear();\n        //this.cognatesArray.clear();\n\n        this.memoryLinks = [];\n        this.memoryConfidence = null;\n      }\n    }\n    this.object = changes.etymData.currentValue;\n    console.log(this.object)\n    if (this.object != null) {\n      this.etyForm.get('label').setValue(this.object.etymology.label, { emitEvent: false });\n      this.etyForm.get('author').setValue(this.object.etymology.hypothesisOf, { emitEvent: false });\n      if (this.object.etymology.confidence == 0) {\n        this.etyForm.get('confidence').setValue(true, { emitEvent: false });\n      } else {\n        this.etyForm.get('confidence').setValue(false, { emitEvent: false });\n      }\n\n      if(typeof(this.object.type) == 'string'){\n        if(this.object.type == 'Cognate'){\n          this.etyForm.get('isCognate').setValue(true, { emitEvent: false })\n\n        }else{\n          this.etyForm.get('isCognate').setValue(false, { emitEvent: false })\n\n        }\n      }else{\n        let isCognate = this.object.type.find(element => element == 'Cognate');\n        if (isCognate) {\n          this.etyForm.get('isCognate').setValue(true, { emitEvent: false })\n        } else {\n          this.etyForm.get('isCognate').setValue(false, { emitEvent: false })\n        }\n      }\n      \n      \n      let isEtymon = this.object.type.find(element => element == 'Etymon');\n      if (isEtymon) {\n        this.etyForm.get('isEtymon').setValue(true, { emitEvent: false })\n      } else {\n        this.etyForm.get('isEtymon').setValue(false, { emitEvent: false })\n      }\n\n      if (this.object.etyLinks != undefined) {\n        if (this.object.etyLinks.length != 0) {\n          this.object.etyLinks.forEach(element => {\n            let lex_entity = element.etySourceLabel == '' ? element.etySource : element.etySourceLabel;\n            let label = element.label == '' ? element.etySourceLabel : element.label;\n            let ety_type = element.etyLinkType;\n            let ety_source = element.etySource;\n            let ety_target = element.etyTarget;\n            let note = element.note;\n            let external_iri = element.externalIRI;\n            this.addEtyLink(lex_entity, label, ety_type, ety_source, ety_target, note, external_iri);\n            this.memoryLinks.push(element);\n            /* console.log(element) */\n          });\n        }\n      }\n    }\n    this.triggerTooltip();\n\n  }\n\n\n  onChanges(): void {\n   \n    this.etyForm.get('confidence').valueChanges.pipe(debounceTime(100), startWith(this.etyForm.get('confidence').value), pairwise(), takeUntil(this.destroy$)).subscribe(([prev, next]: [any, any]) => {\n      this.lexicalService.spinnerAction('on');\n      let etyId = this.object.etymology.etymology;\n\n      this.etyForm.get('confidence').setValue(next, { emitEvent: false });\n\n      let oldValue = prev ? 0 : 1;\n      let newValue = next ? 0 : 1;\n      let parameters = {\n       /*  type: \"confidence\", */\n        relation: 'http://www.lexinfo.net/ontology/3.0/lexinfo#confidence',\n        value: newValue\n      };\n\n\n      if (this.memoryConfidence != null) parameters['currentValue'] = oldValue;\n      this.memoryConfidence = oldValue;\n\n      this.lexicalService.updateEtymology(etyId, parameters).pipe(takeUntil(this.destroy$)).subscribe(\n        data => { },\n        error => {\n          if (error.status == 200) this.toastr.success('Confidence updated', '', { timeOut: 5000 })\n          if (error.status != 200) this.toastr.error(error.error, '', { timeOut: 5000 })\n        }\n      )\n\n    });\n\n\n    this.etyForm.get(\"label\").valueChanges.pipe(debounceTime(1000), takeUntil(this.destroy$)).subscribe(\n      updatedLabel => {\n        if (updatedLabel.length > 2 && updatedLabel.trim() != '') {\n          this.updateLabel(updatedLabel);\n        }\n      }\n    )\n\n    this.etyForm.get(\"author\").valueChanges.pipe(debounceTime(1000), takeUntil(this.destroy$)).subscribe(\n      updateAuthor => {\n\n        this.updateAuthor(updateAuthor)\n      }\n    )\n  }\n\n\n  async updateLabel(updatedLabel : string){\n    this.lexicalService.spinnerAction('on');\n    let etyId = this.object.etymology.etymology;\n    let parameters = {\n      relation: 'http://www.w3.org/2000/01/rdf-schema#label',\n      value: updatedLabel\n    }\n\n    try {\n      let update_label_req = await this.lexicalService.updateEtymology(etyId, parameters).toPromise();\n      update_label_req['request'] = 0;\n      update_label_req['new_label'] = updatedLabel\n      this.lexicalService.refreshAfterEdit(update_label_req);\n      this.lexicalService.spinnerAction('off');\n      this.toastr.success('Label updated', '', { timeOut: 5000 })\n    } catch (error) {\n      let data = this.object.etymology;\n      data['request'] = 0;\n      data['new_label'] = updatedLabel;\n      this.lexicalService.refreshAfterEdit(data);\n      this.lexicalService.spinnerAction('off');\n      //this.lexicalService.updateLexCard({ lastUpdate: error.error.text })\n      if (error.status == 200) {\n        this.toastr.success('Label updated', '', { timeOut: 5000 })\n\n      } else {\n        this.toastr.error(error.error, 'Error', { timeOut: 5000 })\n\n      }\n    }\n    \n  }\n\n  async updateAuthor(updateAuthor){\n    this.lexicalService.spinnerAction('on');\n    let etyId = this.object.etymology.etymology;\n    let parameters = {\n      relation: 'http://www.w3.org/2000/01/rdf-schema#comment',\n      value: updateAuthor\n    }\n    try {\n      let update_author_req = await this.lexicalService.updateEtymology(etyId, parameters).toPromise();\n      this.lexicalService.spinnerAction('off');\n      this.toastr.success('Author updated', '', { timeOut: 5000 })\n    } catch (error) {\n      this.lexicalService.spinnerAction('off');\n      this.lexicalService.updateCoreCard({ lastUpdate: error.error.text })\n      if (error.status == 200) {\n        this.toastr.success('Label updated', '', { timeOut: 5000 })\n\n      } else {\n        this.toastr.error(error.error, 'Error', { timeOut: 5000 })\n\n      }\n    }\n    \n  }\n\n  async onChangeEtylinkNote(data) {\n    console.log(data)\n    if (data != undefined) {\n\n      let newValue = data.evt.target.value;\n      let currentValue;\n      let index = data?.index;\n\n      let oldValue = this.memoryLinks[index].note;\n\n      let instanceName = this.object.etyLinks[index].etymologicalLink;\n\n\n      let parameters = {\n        relation: 'http://www.w3.org/2004/02/skos/core#note',\n        value: newValue,\n        currentValue: oldValue\n      };\n\n      console.log(parameters)\n\n      try {\n        let change_etylink_note_req = await this.lexicalService.updateEtylink(instanceName, parameters).toPromise();\n        console.log(change_etylink_note_req);\n        this.lexicalService.spinnerAction('off');\n        this.memoryLinks[index].note = newValue\n        this.toastr.success('EtyLink note updated', '', { timeOut: 5000 })\n      } catch (error) {\n        this.lexicalService.spinnerAction('off');\n        this.memoryLinks[index].note = newValue\n        if (error.status == 200) {\n          this.toastr.success('Label updated', '', { timeOut: 5000 })\n\n        } else {\n          this.toastr.error(error.error, 'Error', { timeOut: 5000 })\n\n        }\n      }\n    }\n  }\n\n  async onChangeEtylinkLabel(data) {\n    console.log(data)\n    if (data != undefined) {\n\n      let newValue = data.evt.target.value;\n      let currentValue;\n      let index = data?.index;\n\n      let oldValue = this.memoryLinks[index].note;\n\n      let instanceName = this.object.etyLinks[index].etymologicalLink;\n\n\n      let parameters = {\n        relation: 'http://www.w3.org/2000/01/rdf-schema#label',\n        value: newValue,\n        currentValue: oldValue\n      };\n\n      console.log(parameters)\n      try {\n        let change_etylink_label_req = await this.lexicalService.updateEtylink(instanceName, parameters).toPromise();\n        console.log(change_etylink_label_req)\n        this.lexicalService.spinnerAction('off');\n        //this.lexicalService.updateLexCard(this.object)\n        this.memoryLinks[index].note = newValue\n        this.toastr.success('EtyLink label updated', '', { timeOut: 5000 })\n\n      } catch (error) {\n        this.lexicalService.spinnerAction('off');\n        this.memoryLinks[index].note = newValue;\n        if(error.status != 200){\n          this.toastr.error(error.error, 'Error', { timeOut: 5000 })\n\n        }else{\n          this.toastr.success('Ok', '', {timeOut: 4000})\n        }\n      }\n    }\n  }\n\n  async onChangeEtylinkType(index, evt) {\n    console.log(index, evt.target.value)\n    this.etyLinkArray = this.etyForm.get('etylink') as FormArray;\n    let selectedValues, etymId;\n    selectedValues = evt.target.value;\n\n    if (this.object.etymology.etymology != undefined) {\n      etymId = this.object.etyLinks[index].etymologicalLink;\n    }\n\n    if (selectedValues != null) {\n\n      //let oldValue = this.memoryLinks[index].etySource;\n      let parameters = {\n        relation: \"http://lari-datasets.ilc.cnr.it/lemonEty#etyLinkType\",\n        value: selectedValues,\n      }\n      console.log(parameters);\n\n      try {\n        let change_etylink_type_req = await this.lexicalService.updateEtylink(etymId, parameters).toPromise();\n      } catch (error) {\n        if (error.status == 200) {\n          this.toastr.success('Etylink type updated', '', { timeOut: 5000 })\n          //this.lexicalService.updateLexCard({ lastUpdate: error.error.text })\n        } else {\n          this.toastr.error(error.error, 'Error', { timeOut: 5000 })\n        }\n      }\n    }\n  }\n\n  async onChangeEtylink(etyLink, index) {\n    console.log(etyLink.selectedItems)\n    this.etyLinkArray = this.etyForm.get('etylink') as FormArray;\n    let selectedValues, etymId, etySourceLabel, instanceName;\n\n    if (!this.etyLinkArray.at(index).get('lila').value) {\n      if (etyLink.selectedItems != undefined) {\n        if (etyLink.selectedItems.length != 0) {\n          selectedValues = etyLink.selectedItems[0].value.lexicalEntry;\n          etySourceLabel = etyLink.selectedItems[0].value.label;\n          instanceName = etyLink.selectedItems[0].value.lexicalEntry;\n        }\n      } else if (etyLink != \"\") {\n        selectedValues = etyLink;\n        etySourceLabel = '';\n        instanceName = etyLink;\n      }\n    } else {\n      selectedValues = etyLink.selectedItems[0].value.lexicalEntry;\n      etySourceLabel = etyLink.selectedItems[0].value.label;\n      instanceName = etyLink.selectedItems[0].value.lexicalEntry;\n    }\n\n\n    //console.log(index);\n    //console.log(this.object.etyLinks[index])\n    if (this.object.etymology.etymology != undefined) {\n      etymId = this.object.etyLinks[index].etymologicalLink;\n    }\n\n    let existOrNot = this.memoryLinks.some(element => element.etySource == instanceName);\n\n    if (typeof (etyLink) != 'string' && !existOrNot) {\n      if (selectedValues != null && etyLink?.selectedItems[0]?.value.new_etymon == undefined) {\n\n        let oldValue = this.memoryLinks[index].etySource;\n        let parameters = {\n          type: \"etyLink\",\n          relation: \"http://lari-datasets.ilc.cnr.it/lemonEty#etySource\",\n          value: selectedValues,\n          currentValue: oldValue\n        }\n\n        console.log(parameters)\n\n        try {\n          let change_etylink_req = await this.lexicalService.updateLinguisticRelation(etymId, parameters).toPromise();\n        } catch (error) {\n          if (error.status == 200) {\n            this.memoryLinks[index]['etySourceLabel'] = etySourceLabel;\n            this.etyLinkArray.at(index).patchValue({ label: etySourceLabel });\n            this.etyLinkArray.at(index).patchValue({ etySource: instanceName });\n            //this.lexicalService.updateLexCard({ lastUpdate: error.error.text }) TODO: inserire updater per decomposition e etymology\n            this.toastr.success('Etylink source updated', '', { timeOut: 5000 })\n          } else {\n            this.toastr.error(error.error, 'Error', { timeOut: 5000 })\n          }\n        }\n      } else if (etyLink.selectedItems[0].value.new_etymon) {\n\n        let label_new_lexical_entry = etyLink.selectedItems[0].value.name;\n        try {\n          let new_lexical_entry_req = this.lexicalService.newLexicalEntry().toPromise();\n          console.log(new_lexical_entry_req);\n\n          let lexical_entry = new_lexical_entry_req['lexicalEntry'];\n          let lexical_entry_in = new_lexical_entry_req['lexicalEntry'];\n          this.memoryLinks[index]['etySourceLabel'] = etySourceLabel;\n          this.etyLinkArray.at(index).patchValue({ lex_entity: label_new_lexical_entry });\n          this.etyLinkArray.at(index).patchValue({ etySource: lexical_entry });\n\n          let parameters = {\n            relation: 'http://www.w3.org/2000/01/rdf-schema#label',\n            value: label_new_lexical_entry\n          }\n          console.log(parameters);\n\n          try {\n            let change_lex_entry_label_req = await this.lexicalService.updateLexicalEntry(lexical_entry_in, parameters).toPromise();\n\n          } catch (error) {\n            this.lexicalService.spinnerAction('off');\n            this.lexicalService.spinnerAction('off');\n\n            parameters = {\n              relation: 'http://lari-datasets.ilc.cnr.it/lemonEty#etyLinkType',\n              value: 'Etymon'\n            }\n            \n            try {\n              let apply_etymon_type_req = await this.lexicalService.updateLexicalEntry(lexical_entry_in, parameters).toPromise();\n            } catch (error) {\n              let oldValue = this.memoryLinks[index].etySource;\n              let parameters = {\n                type: \"etyLink\",\n                relation: \"http://lari-datasets.ilc.cnr.it/lemonEty#etySource\",\n                value: lexical_entry_in,\n                currentValue: oldValue\n              }\n              this.lexicalService.refreshFilter({ request: true });\n\n              try {\n                let change_etysource_req = await this.lexicalService.updateLinguisticRelation(etymId, parameters).toPromise(); \n              } catch (error) {\n                if (error.status == 200) {\n                  this.toastr.success('New etymon created', '', { timeOut: 5000 })\n                  ////this.lexicalService.updateLexCard({ lastUpdate: error.error.text }) TODO: inserire updater per decomposition e etymology\n                }else{\n                  console.log(error)\n                  this.toastr.error(\"Something went wrong, check the log\", \"Error\", {timeOut : 5000})\n                }\n              }\n            }\n          }\n\n        } catch (error) {\n          if(error.status != 200){\n            console.log(error)\n            this.toastr.error(\"Something went wrong, check the log\", \"Error\", {timeOut : 5000})\n          }\n        }\n      \n        //      cambiare tipo lexical entry in etymon\n        //      cambiare label lexical entry\n      }\n    } else if (typeof (etyLink) == 'string' && !existOrNot) {\n      let oldValue = this.memoryLinks[index].etySource;\n      let parameters = {\n        type: \"etyLink\",\n        relation: \"http://lari-datasets.ilc.cnr.it/lemonEty#etySource\",\n        value: selectedValues,\n        currentValue: oldValue\n      }\n\n      console.log(parameters)\n\n      try {\n        let change_etylink_source = await this.lexicalService.updateLinguisticRelation(etymId, parameters).toPromise();\n      } catch (error) {\n        if (error.status == 200) {\n          this.memoryLinks[index]['etySourceLabel'] = etySourceLabel;\n          this.etyLinkArray.at(index).patchValue({ label: etySourceLabel });\n          this.etyLinkArray.at(index).patchValue({ etySource: instanceName });\n          //this.lexicalService.updateLexCard({ lastUpdate: error.error.text }) TODO: inserire updater per decomposition e etymology\n          this.toastr.success('Etylink source updated', '', { timeOut: 5000 })\n        } else {\n          this.toastr.error(error.error, 'Error', { timeOut: 5000 })\n        }\n      }\n      \n    } else if (existOrNot) {\n      this.toastr.error('This etymon already exist, please choose an another etymon', 'Error', {\n        timeOut: 5000\n      })\n    }\n\n\n  }\n\n  createNewEtymon(name) {\n    return new Promise((resolve) => {\n      // Simulate backend call.\n      setTimeout(() => {\n        resolve({ id: 5, name: name, new_etymon: true });\n      }, 1000);\n    })\n  }\n\n  addCognate() {\n    this.cognatesArray = this.etyForm.get('cognates') as FormArray;\n    this.cognatesArray.push(this.createCognate());\n\n  }\n\n  debounceEtylinkLabel(evt, index) {\n    this.lexicalService.spinnerAction('on');\n    this.etylink_label_subject.next({ evt, index })\n  }\n\n  debounceEtylinkNote(evt, index) {\n    this.lexicalService.spinnerAction('on');\n    this.etylink_note_subject.next({ evt, index })\n  }\n\n  addEtyLink(le?, l?, elt?, es?, et?, n?, el?) {\n    this.etyLinkArray = this.etyForm.get('etylink') as FormArray;\n    this.etyLinkArray.push(this.createEtyLink(le, l, elt, es, et, n, el));\n  }\n\n  addNewEtyLink() {\n    this.etyLinkArray = this.etyForm.get('etylink') as FormArray;\n    this.etyLinkArray.push(this.createEtyLink());\n    let index = this.etyLinkArray.length - 1;\n\n    let etyId = this.object.etymology.etymology;\n    let lexId = this.object.parentNodeInstanceName;\n\n    console.log(etyId, lexId)\n\n    this.lexicalService.createNewEtylink(lexId, etyId).subscribe(\n      data => {\n        console.log(data);\n        if (data != null) {\n          let etyTarget = data['etyTarget']\n          let etyType = data['etyLinkType']\n          this.etyLinkArray.at(index).patchValue({ etyTarget: etyTarget });\n          this.etyLinkArray.at(index).patchValue({ etyLinkType: etyType });\n          this.object.etyLinks[index] = data;\n          this.memoryLinks[index] = data;\n          this.toastr.success('New etylink added', '', { timeOut: 5000 })\n        }\n      }, error => {\n        console.log(error)\n        this.toastr.error(error.error, 'Error', { timeOut: 5000 })\n      }\n    )\n  }\n\n  removeEtyLink(index) {\n    this.etyLinkArray = this.etyForm.get('etylink') as FormArray;\n    let etyLinkId = this.memoryLinks[index]['etymologicalLink']\n    \n    this.lexicalService.deleteEtylink(etyLinkId).pipe(takeUntil(this.destroy$)).subscribe(\n      data=>{\n        console.log(data)\n      },error=>{\n        if(error.status == 200){\n          this.toastr.success('Etylink removed', '', { timeOut: 5000 });\n          this.etyLinkArray.removeAt(index);\n          this.memoryLinks.splice(index, 1)\n        }else{\n          this.toastr.error(error.error, 'Error', { timeOut: 5000 })\n        }\n      }\n    );\n    \n  \n    \n      \n    \n    \n  }\n\n  removeCognate(index) {\n    this.etyLinkArray = this.etyForm.get('cognates') as FormArray;\n    this.etyLinkArray.removeAt(index);\n\n  }\n\n  createRelation() {\n    return this.formBuilder.group({\n      trait: '',\n      value: ''\n    })\n  }\n\n  createEtyLink(le?, l?, elt?, es?, et?, n?, el?) {\n    if (le != undefined) {\n      return this.formBuilder.group({\n        lex_entity: new FormControl(le),\n        label: new FormControl(l),\n        etyLinkType: new FormControl(elt),\n        etySource: new FormControl(es),\n        etyTarget: new FormControl(et),\n        note: new FormControl(n),\n        external_iri: new FormControl(el),\n        lila: false\n      })\n    } else {\n      return this.formBuilder.group({\n        lex_entity: new FormControl(null),\n        label: new FormControl(null),\n        etyLinkType: new FormControl(null),\n        etySource: new FormControl(null),\n        etyTarget: new FormControl(null),\n        note: new FormControl(null),\n        external_iri: new FormControl(null),\n        lila: false\n      })\n    }\n\n  }\n\n\n  createCognate() {\n    return this.formBuilder.group({\n      cognate: new FormControl(null),\n      label: new FormControl(null)\n    })\n  }\n\n  triggerCognates(evt) {\n    if (evt.target != undefined) {\n      this.subject_cognates.next(evt.target.value)\n    }\n  }\n\n  triggerCognatesInput(evt, i) {\n    if (evt.target != undefined) {\n      let value = evt.target.value;\n      this.subject_cognates_input.next({ value, i })\n    }\n  }\n\n  triggerEtylink(evt, index) {\n    if (evt.target != undefined) {\n      this.subject_etylink.next({ value: evt.target.value, index: index })\n    }\n  }\n\n  triggerEtylinkInput(evt, i) {\n    if (evt.target != undefined) {\n      let value = evt.target.value;\n      this.subject_etylink_input.next({ value, i })\n    }\n  }\n\n  deleteData() {\n    this.searchResults = [];\n  }\n\n  async onSearchFilter(data) {\n    console.log(data)\n    this.filterLoading = true;\n    this.searchResults = [];\n\n    let value = data.value;\n    let index = data.index;\n\n    this.etyLinkArray = this.etyForm.get('etylink') as FormArray;\n    let isLilaActived = this.etyLinkArray.at(index).get('lila').value;\n\n    if (!isLilaActived) {\n      let parameters = {\n        text: value,\n        searchMode: \"startsWith\",\n        type: \"etymon\",\n        pos: \"\",\n        formType: \"entry\",\n        author: \"\",\n        lang: \"\",\n        status: \"\",\n        offset: 0,\n        limit: 500\n      }\n      console.log(parameters)\n\n      try {\n        let search_req = await this.lexicalService.getLexicalEntriesList(parameters).toPromise();\n        this.searchResults = search_req['list']\n        this.filterLoading = false;\n      } catch (error) {\n        if(error.status != 200){\n          this.toastr.error(\"Something went wrong, check the log\", \"Error\", {timeOut : 5000})\n          this.filterLoading = false;\n        }\n      }\n\n      \n\n    } else {\n\n      try {\n        let query_etymon_req = await this.lilaService.queryEtymon(value).toPromise();\n        if (query_etymon_req.list.length > 0) {\n          const map = query_etymon_req.list.map(element => (\n            {\n              label: element[2]?.value,\n              language: element[1]?.value,\n              lexicalEntry: element[0]?.value\n            })\n          )\n\n          this.searchResults = map;\n          console.log(this.searchResults)\n        }\n      } catch (error) {\n        console.log(error)\n      }\n      \n    }\n\n\n\n\n  }\n\n  ngOnDestroy(): void {\n    this.subject_cognates_subscription.unsubscribe();\n    this.subject_etylink_subscription.unsubscribe();\n    this.subject_etylink_input_subscription.unsubscribe();\n    this.subject_cognates_input_subscription.unsubscribe();\n    this.subject_etylink_note_subscription.unsubscribe();\n    this.subject_etylink_label_subscription.unsubscribe();\n\n    this.destroy$.next(true);\n    this.destroy$.complete();\n  }\n\n\n}\n","\n\n<form [formGroup]=\"etyForm\" *ngIf=\"object != null\"> <!-- *ngIf=\"object!=null\" -->\n    <div class=\"form-group row ml-2 mt-3 mr-2\">\n        <label for=\"inputLabel\" class=\"col-xl-3 col-form-label\">Label:</label>\n        <div class=\"input-group col-xl-7\">\n            <input formControlName=\"label\" name=\"label\" type=\"text\" class=\"form-control\" placeholder=\"\">\n            <div class=\"input-group-append\">\n                <div class=\"input-group-append ml-2\">\n                    <div class=\"dropdown\">\n                        <button class=\"btn btn-outline-primary\" type=\"button\" (click)=\"addNewEtyLink()\">\n                            <i class=\"fa fa-plus\"></i>\n                        </button>\n                        <!-- <div class=\"dropdown-menu\" aria-labelledby=\"dropdownMenuButton\">\n                          <a class=\"dropdown-item\" (click)=\"addCognate()\" style=\"cursor: pointer;\">Add Cognates</a>\n                          <a class=\"dropdown-item\"  style=\"cursor: pointer;\">Add EtyLink</a>\n                        </div> -->\n                      </div>\n                </div>\n            </div>\n        </div>\n    </div>\n\n    <div class=\"form-group row ml-2 mt-3 mr-2\">\n        <label for=\"inputLabel\" class=\"col-xl-3 col-form-label\">Author: </label>\n        <div class=\"input-group col-xl-7\">\n            <input formControlName=\"author\" name=\"author\" type=\"text\" class=\"form-control\" placeholder=\"\">\n        </div>\n    </div>\n\n    <div class=\"form-group row ml-2 mt-3 mr-2\">\n        <label for=\"inputLabel\" class=\"col-xl-3 col-form-label\">Uncertain:</label>\n        <div class=\"input-group col-xl-7\">\n            <input formControlName=\"confidence\" name=\"confidence\" type=\"checkbox\" > <!-- [checked]=\"etyForm.get('confidence').value == 0\" -->\n        </div>\n    </div>\n\n    <!-- ETY LINK -->\n    <div formArrayName=\"etylink\">\n        <div *ngFor=\"let etyLink of etyForm['controls'].etylink['controls']; let i = index\">\n            <div [formGroupName]=\"i\">\n                <div class=\"form-group row ml-2 mt-3 mr-2\">\n                    <div class=\"input-group col-xl-12\">\n                        <div class=\"card\">\n                            <span class=\"text-id\"><b>ETY LINK {{i+1}}</b></span>\n                            <!-- <a class=\"pointer\" (click)=\"addRelation(i)\"><span class=\"add-icon\"><i class=\"fa fa-plus-square\"></i></span></a> -->\n                            <a class=\"pointer\" (click)=\"removeEtyLink(i)\"><span class=\"trash-icon\"><i class=\"fa fa-trash\"></i></span></a>\n                            <div class=\"card-body\" *ngIf=\"{external : etyLink.get('external_iri').value }; let variable\">\n\n                                <!-- ETYMON / LEXENT -->\n                                <div class=\"col-xl-12\">\n                                    <div class=\"d-xl-flex\" style=\"align-items: center;\">\n                                        <label class=\"col-xl-3 col-form-label\">Etymon:</label>\n                                        <div class=\"col-xl-9\">\n                                            <div class=\"form-group row ml-2 mt-3 mr-2\">\n                                                <div class=\"input-group\" >\n                                                    <ng-select *ngIf=\"!etyLink.get('lila').value && !variable.external\" #etyLink [addTag]=\"createNewEtymon\" (change)=\"onChangeEtylink(etyLink, i)\" formControlName=\"lex_entity\" name=\"lex_entity\" [items]=\"searchResults\" class=\"resizeNgSelect\" bindLabel=\"label\" bindValue=\"label\" placeholder=\"Search entity\" appendTo=\"body\"\n                                                         (keyup)=\"triggerEtylink($event, i)\" bindValue=\"label\" class=\"resizeNgSelect\" [items]=\"searchResults\"\n                                                        bindLabel=\"label\" placeholder=\"Search entity\" appendTo=\"body\" (focus)=\"deleteData()\">\n                                                    </ng-select>\n                                                    <ng-select *ngIf=\"etyLink.get('lila').value && !variable.external\" #etyLink  [addTag]=\"false\" (change)=\"onChangeEtylink(etyLink, i)\" formControlName=\"lex_entity\" name=\"lex_entity\" [items]=\"searchResults\" class=\"resizeNgSelect\" bindLabel=\"label\" bindValue=\"label\" placeholder=\"Search entity\" appendTo=\"body\"\n                                                         (keyup)=\"triggerEtylink($event, i)\" bindValue=\"label\" class=\"resizeNgSelect\" [items]=\"searchResults\"\n                                                        bindLabel=\"label\" placeholder=\"Search entity\" appendTo=\"body\" (focus)=\"deleteData()\">\n                                                    </ng-select>\n                                                    <input (keyup)=\"triggerEtylinkInput($event, i)\" formControlName=\"lex_entity\" name=\"lex_entity\" type=\"text\" class=\"form-control\" id=\"inputDenotes\" placeholder=\"Insert URI\" *ngIf=\"variable.external\">\n                                                   \n                                                    <div class=\"input-group-append ml-2\" *ngIf=\"!variable.external \">\n                                                        <div class=\"btn-group-toggle\" data-toggle=\"buttons\" placement=\"top\" ngbTooltip=\"Enable LiLa endpoint\" title=\"Enable LiLa endpoint\" >\n                                                            <label class=\"btn btn-secondary\" >\n                                                              <input type=\"checkbox\" autocomplete=\"off\" autocomplete=\"off\" formControlName=\"lila\" name=\"lila\" style=\"border-radius: .3rem;\" > \n                                                                <!-- <img src=\"../../../../../../../assets/images/graphql.png\" alt=\"Avatar\" class=\"image\" style=\"height: 20px;\"> -->\n                                                                <i class=\"fas fa-project-diagram\"></i>\n                                                            </label>\n                                                        </div>\n                                                    </div>\n                                                    <div class=\"input-group-append ml-2\" *ngIf=\"etyLink.get('external_iri').value && etyLink.get('etySource').value != ''\">\n                                                        <a [href]=\"etyLink.get('etySource').value\" target=\"_blank\" class=\"btn btn-primary\" type=\"button\"><i\n                                                                class=\"fa fa-external-link-alt\"></i></a>\n                                                    </div>\n                                                    <div class=\"input-group-append ml-3 form-check\">\n                                                        <input class=\"form-check-input vartrans-tooltip\" formControlName=\"external_iri\" name=\"external_iri\" type=\"checkbox\" (change)=\"variable.external=!variable.external;\" container=\"body\" placement=\"top\" ngbTooltip=\"Insert URL manually\" title=\"Clicca per inserire un URI manualmente\">\n                                                    </div>\n                                                    \n                                                </div>\n                                            </div>                                                  \n                                        </div>\n                                    </div>\n                                </div>\n                                \n                                <!-- LABEL / WRITTEN FORM -->\n                                <div class=\"col-xl-12\" *ngIf=\"variable.external\">\n                                    <div class=\"d-xl-flex\">\n                                        <label class=\"col-xl-3 col-form-label\">Label:</label>\n                                        <div class=\"col-xl-9\">\n                                            <div class=\"form-group row ml-2 mr-2\">\n                                                <div class=\"input-group\" *ngIf=\"{switch : false}; let variable\">\n                                                    \n                                                    <input (keyup)=\"debounceEtylinkLabel($event, i)\" formControlName=\"label\" name=\"label\" type=\"text\" class=\"form-control\">\n                                                    <div class=\"input-group-append ml-3 form-check invisible\">\n                                                        \n                                                    </div>\n                                                </div>\n                                            </div>                                                  \n                                        </div>\n                                    </div>\n                                </div>\n\n                                <!-- ETYLINK TYPE -->\n                                <div class=\"col-xl-12\">\n                                    <div class=\"d-xl-flex\">\n                                        <label class=\"col-xl-3 col-form-label\">EtyLink Type:</label>\n                                        <div class=\"col-xl-9\">\n                                            <div class=\"form-group row ml-2 mr-2\">\n                                                <div class=\"input-group\" *ngIf=\"{switch : false}; let variable\">\n                                                    <select id=\"typeSelect\" formControlName=\"etyLinkType\" name=\"etyLinkType\" class=\"form-control\" (change)=\"onChangeEtylinkType(i, $event)\">\n                                                        <option [selected]=\"etyLink.get('etyLinkType').value == 'inheritance'\" value=\"inheritance\">\n                                                            inheritance\n                                                        </option>\n                                                        <option [selected]=\"etyLink.get('etyLinkType').value == 'borrowing'\" value=\"borrowing\">\n                                                            borrowing\n                                                        </option>\n                                                    </select>\n                                                    <!-- <input formControlName=\"etyLinkType\" name=\"etyLinkType\" type=\"text\" class=\"form-control\"> -->\n                                                    <div class=\"input-group-append ml-3 form-check invisible\">\n                                                        \n                                                    </div>\n                                                </div>\n                                            </div>                                                  \n                                        </div>\n                                    </div>\n                                </div>\n\n                                <!-- ETY SOURCE -->\n                                <div class=\"col-xl-12\">\n                                    <div class=\"d-xl-flex\">\n                                        <label class=\"col-xl-3 col-form-label text-muted\">EtySource:</label>\n                                        <div class=\"col-xl-9\">\n                                            <div class=\"form-group row ml-2 mr-2\">\n                                                <div class=\"input-group\" *ngIf=\"{switch : false}; let variable\">\n                                                    \n                                                    <input formControlName=\"etySource\" name=\"etySource\" type=\"text\" class=\"form-control\" readonly>\n                                                    <div class=\"input-group-append ml-3 form-check invisible\">\n                                                        \n                                                    </div>\n                                                </div>\n                                            </div>                                                  \n                                        </div>\n                                    </div>\n                                </div>\n\n                                <!-- ETY TARGET -->\n                                <div class=\"col-xl-12\">\n                                    <div class=\"d-xl-flex\">\n                                        <label class=\"col-xl-3 col-form-label text-muted\">EtyTarget:</label>\n                                        <div class=\"col-xl-9\">\n                                            <div class=\"form-group row ml-2 mr-2\">\n                                                <div class=\"input-group\" *ngIf=\"{switch : false}; let variable\">\n                                                    \n                                                    <input formControlName=\"etyTarget\" name=\"etyTarget\" type=\"text\" class=\"form-control\" readonly>\n                                                    <div class=\"input-group-append ml-3 form-check invisible\">\n                                                        \n                                                    </div>\n                                                </div>\n                                            </div>                                                  \n                                        </div>\n                                    </div>\n                                </div>   \n\n                                <!-- NOTE -->\n                                <div class=\"col-xl-12\">\n                                    <div class=\"d-xl-flex\">\n                                        <label class=\"col-xl-3 col-form-label\">Note:</label>\n                                        <div class=\"col-xl-9\">\n                                            <div class=\"form-group row ml-2 mr-2\">\n                                                <div class=\"input-group\" *ngIf=\"{switch : false}; let variable\">\n                                                    \n                                                    <textarea (keyup)=\"debounceEtylinkNote($event, i)\" formControlName=\"note\" name=\"note\" type=\"text\" class=\"form-control\" style=\"resize: none;\"></textarea>\n                                                    <div class=\"input-group-append ml-3 form-check invisible\" >\n                                                        \n                                                    </div>\n                                                </div>\n                                            </div>                                                  \n                                        </div>\n                                    </div>\n                                </div>                               \n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n\n\n    <!-- COGNATES -->\n    <div formArrayName=\"cognates\">\n        <div *ngFor=\"let sub of etyForm['controls'].cognates['controls']; let i = index\">\n            <div [formGroupName]=\"i\">\n                <div class=\"form-group row ml-2 mt-3 mr-2\">\n                    <div class=\"input-group col-xl-12\">\n                        <div class=\"card\">\n                            <span class=\"text-id\"><b>COGNATE {{i+1}}</b></span>\n                            <!-- <a class=\"pointer\" (click)=\"addSubtermElement(i)\"><span class=\"add-icon\"><i class=\"fa fa-plus-square\"></i></span></a> -->\n                            <a class=\"pointer\" (click)=\"removeCognate(i)\"><span class=\"trash-icon\"><i class=\"fa fa-trash\"></i></span></a>\n                            <div class=\"card-body\">\n\n                                <!-- COGNATE -->\n                                <div class=\"col-xl-12\">\n                                    <div class=\"d-xl-flex\" style=\"align-items: center;\">\n                                        <label class=\"col-xl-3 col-form-label\">Cognate:</label>\n                                        <div class=\"col-xl-9\">\n                                            <div class=\"form-group row ml-2 mt-3 mr-2\">\n                                                <div class=\"input-group\" *ngIf=\"{switch : false}; let variable\">\n                                                    <ng-select formControlName=\"cognate\" name=\"cognate\" [items]=\"searchResults\" class=\"resizeNgSelect\" bindLabel=\"label\" bindValue=\"label\" placeholder=\"Search entity\" appendTo=\"body\"\n                                                         *ngIf=\"!variable.switch\" (keyup)=\"triggerCognates($event)\" bindValue=\"label\" class=\"resizeNgSelect\" [items]=\"searchResults\"\n                                                        bindLabel=\"label\" placeholder=\"Search entity\" appendTo=\"body\" (focus)=\"deleteData()\">\n                                                    </ng-select>\n                                                    <input (keyup)=\"triggerCognatesInput($event, i)\" formControlName=\"cognate\" name=\"cognate\" type=\"text\" class=\"form-control\" id=\"inputDenotes\" placeholder=\"Insert URI\" *ngIf=\"variable.switch\">\n                                                    <div class=\"input-group-append ml-3 form-check\">\n                                                        <input class=\"form-check-input vartrans-tooltip\" type=\"checkbox\" (change)=\"variable.switch=!variable.switch\" data-toggle=\"tooltip\" data-placement=\"bottom\" data-trigger=\"hover\" title=\"Clicca per inserire un URI manualmente\">\n                                                    </div>\n                                                    <!-- <div class=\"input-group-append ml-2\">\n                                                        <button class=\"btn btn-primary\" type=\"button\"><i\n                                                                class=\"fa fa-external-link-alt\"></i></button>\n                                                    </div> -->\n                                                </div>\n                                            </div>                                                  \n                                        </div>\n                                    </div>\n                                </div>\n\n                                <!-- LABEL / WRITTEN FORM -->\n                                <div class=\"col-xl-12\">\n                                    <div class=\"d-xl-flex\">\n                                        <label class=\"col-xl-3 col-form-label\">Label / Written Form:</label>\n                                        <div class=\"col-xl-9\">\n                                            <div class=\"form-group row ml-2 mr-2\">\n                                                <div class=\"input-group\" *ngIf=\"{switch : false}; let variable\">\n                                                    \n                                                    <input formControlName=\"label\" name=\"label\" type=\"text\" class=\"form-control\">\n                                                    <div class=\"input-group-append ml-3 form-check invisible\">\n                                                        \n                                                    </div>\n                                                </div>\n                                            </div>                                                  \n                                        </div>\n                                    </div>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n</form>","/*\n   Copyright 2021-2022  Istituto di Linguistica Computazionale \"A. Zampolli\", Consiglio Nazionale delle Ricerche, Pisa, Italy.\n \nThis file is part of EpiLexo.\n\nEpiLexo is free software: you can redistribute it and/or modify it under the terms of the GNU General Public License as published by the Free Software Foundation, either version 3 of the License, or (at your option) any later version.\n\nEpiLexo is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for more details.\n\nYou should have received a copy of the GNU General Public License along with EpiLexo. If not, see <https://www.gnu.org/licenses/>.\n*/\n\nimport { Component, ElementRef, OnDestroy, OnInit, ViewChild } from '@angular/core';\nimport { Subscription } from 'rxjs';\nimport { BibliographyService } from 'src/app/services/bibliography-service/bibliography.service';\nimport { DocumentSystemService } from 'src/app/services/document-system/document-system.service';\nimport { LexicalEntriesService } from 'src/app/services/lexical-entries/lexical-entries.service';\n\n@Component({\n  selector: 'app-lexicon-page',\n  templateUrl: './lexicon-page.component.html',\n  styleUrls: ['./lexicon-page.component.scss']\n})\nexport class LexiconPageComponent implements OnInit, OnDestroy {\n  subscription: Subscription;\n  metadata_subscr : Subscription;\n  object: any;\n  @ViewChild('accordion') accordion: ElementRef; \n\n  constructor(private documentService : DocumentSystemService, private lexicalService: LexicalEntriesService, private biblioService : BibliographyService) { }\n\n  notes = '';\n  link = [];\n  bibliography = [];\n  attestation : any;\n  metadata : any;\n\n  note_panel_subscription : Subscription;\n  trigger_att_panel_subscription : Subscription;\n  trigger_biblio_panel_subscription : Subscription;\n  attestation_panel_subscription : Subscription;\n  medatata_panel_subscription : Subscription;\n  trigger_metatada_panel_subscription : Subscription;\n  right_panel_subscription : Subscription;\n\n  ngOnInit(): void {\n\n    this.note_panel_subscription = this.lexicalService.triggerNotePanel$.subscribe(\n      boolean => {\n        setTimeout(() => {\n          if(boolean != null){\n            if(boolean){\n              let a_link = this.accordion.nativeElement.querySelectorAll('a[data-target=\"#noteCollapse\"]');\n              let collapse_container = this.accordion.nativeElement.querySelectorAll('div[aria-labelledby=\"noteHeading\"]');\n              let item_collapse = this.accordion.nativeElement.querySelectorAll('[id^=\"collapse-\"]');\n              a_link.forEach(element => {\n                if(element.classList.contains(\"collapsed\")){\n                  element.classList.remove('collapsed')\n                }else{\n                  //element.classList.add('collapsed')\n                }\n              })\n  \n              collapse_container.forEach(element => {\n                if(element.classList.contains(\"show\")){\n                  //element.classList.remove('collapsed')\n                }else{\n                  element.classList.add('show')\n                }\n              })\n  \n              item_collapse.forEach(element => {\n                if(element == item_collapse[item_collapse.length-1]){\n                  element.classList.add('show')\n                }else{\n                  element.classList.remove('show')\n                }\n              });\n            }else{\n              setTimeout(() => {\n                let a_link = this.accordion.nativeElement.querySelectorAll('a[data-target=\"#noteCollapse\"]');\n                a_link.forEach(element => {\n                  element.classList.add('collapsed')\n                  \n                })\n  \n                let collapse_container = this.accordion.nativeElement.querySelectorAll('div[aria-labelledby=\"noteHeading\"]');\n                collapse_container.forEach(element => {\n                  console.log(element)\n                  if(element.classList.contains(\"show\")){\n                    element.classList.remove('show')\n                  }\n                })\n              }, 100);\n              \n            }\n          }\n        }, 100);\n        \n      }\n    )\n\n    this.trigger_att_panel_subscription = this.lexicalService.triggerAttestationPanel$.subscribe(\n      boolean => {\n        setTimeout(() => {\n          if(boolean != undefined){\n            //console.log(boolean)\n            if(boolean){\n              let a_link = this.accordion.nativeElement.querySelectorAll('a[data-target=\"#attestationCollapse\"]');\n              let collapse_container = this.accordion.nativeElement.querySelectorAll('div[aria-labelledby=\"attestationHeading\"]');\n              let item_collapse = this.accordion.nativeElement.querySelectorAll('[id^=\"collapse-\"');\n              a_link.forEach(element => {\n                if(element.classList.contains(\"collapsed\")){\n                  element.classList.remove('collapsed')\n                }else{\n                  //element.classList.add('collapsed')\n                }\n              })\n  \n              collapse_container.forEach(element => {\n                if(element.classList.contains(\"show\")){\n                  //element.classList.remove('collapsed')\n                }else{\n                  element.classList.add('show')\n                }\n              })\n  \n              /* item_collapse.forEach(element => {\n                if(element == item_collapse[item_collapse.length-1]){\n                  element.classList.add('show')\n                }else{\n                  element.classList.remove('show')\n                }\n              }); */\n            }else{\n              setTimeout(() => {\n                let a_link = this.accordion.nativeElement.querySelectorAll('a[data-target=\"#attestationCollapse\"]');\n                a_link.forEach(element => {\n                  element.classList.add('collapsed')\n                  \n                })\n  \n                let collapse_container = this.accordion.nativeElement.querySelectorAll('div[aria-labelledby=\"attestationHeading\"]');\n                collapse_container.forEach(element => {\n                  //console.log(element)\n                  if(element.classList.contains(\"show\")){\n                    element.classList.remove('show')\n                  }\n                })\n              }, 100);\n              \n            }\n          }\n        }, 100);\n        \n      }\n    )\n\n    this.trigger_biblio_panel_subscription = this.biblioService.triggerPanel$.subscribe(\n      object => {\n        if(object != undefined){\n          let a_link = this.accordion.nativeElement.querySelectorAll('a[data-target=\"#bibliographyCollapse\"]');\n          let collapse_container = this.accordion.nativeElement.querySelectorAll('div[aria-labelledby=\"bibliographyHeading\"]');\n          let item_collapse = this.accordion.nativeElement.querySelectorAll('[id^=\"collapse-\"');\n          a_link.forEach(element => {\n            if(element.classList.contains(\"collapsed\")){\n              element.classList.remove('collapsed')\n            }else{\n              //element.classList.add('collapsed')\n            }\n          })\n\n          collapse_container.forEach(element => {\n            if(element.classList.contains(\"show\")){\n              //element.classList.remove('collapsed')\n            }else{\n              element.classList.add('show')\n            }\n          })\n\n          item_collapse.forEach(element => {\n            if(element == item_collapse[item_collapse.length-1]){\n              element.classList.add('show')\n            }else{\n              element.classList.remove('show')\n            }\n          });\n        }\n        \n      }\n    )\n\n    this.attestation_panel_subscription = this.lexicalService.attestationPanelData$.subscribe(\n      data => {\n       // console.log(data)\n        if(data != null){\n          if(Array.isArray(data)){\n            this.attestation = data;\n          }else{\n            this.attestation = [data];\n          }\n        }else{\n          this.attestation = null;\n        }\n      }\n    );\n\n    this.medatata_panel_subscription = this.documentService.metadataData$.subscribe(\n      data => {\n        console.log(data);\n        if(data != null){\n          this.metadata = data;\n        }else{\n          this.metadata = null;\n        }\n      }\n    )\n\n    this.trigger_metatada_panel_subscription = this.documentService.triggerMetadataPanel$.subscribe(\n      boolean => {\n        setTimeout(() => {\n          console.log(boolean)\n          if(boolean != null){\n            if(boolean){\n              let a_link = this.accordion.nativeElement.querySelectorAll('a[data-target=\"#metadataCollapse\"]');\n              let collapse_container = this.accordion.nativeElement.querySelectorAll('div[aria-labelledby=\"metadataHeading\"]');\n              let item_collapse = this.accordion.nativeElement.querySelectorAll('[id^=\"collapse-\"');\n              a_link.forEach(element => {\n                if(element.classList.contains(\"collapsed\")){\n                  element.classList.remove('collapsed')\n                }else{\n                  //element.classList.add('collapsed')\n                }\n              })\n  \n              collapse_container.forEach(element => {\n                if(element.classList.contains(\"show\")){\n                  //element.classList.remove('collapsed')\n                }else{\n                  element.classList.add('show')\n                }\n              })\n  \n              item_collapse.forEach(element => {\n                if(element == item_collapse[item_collapse.length-1]){\n                  element.classList.add('show')\n                }else{\n                  element.classList.remove('show')\n                }\n              });\n            }else{\n              setTimeout(() => {\n                let a_link = this.accordion.nativeElement.querySelectorAll('a[data-target=\"#metadataCollapse\"]');\n                a_link.forEach(element => {\n                  element.classList.add('collapsed')\n                  \n                })\n  \n                let collapse_container = this.accordion.nativeElement.querySelectorAll('div[aria-labelledby=\"metadataHeading\"]');\n                collapse_container.forEach(element => {\n//                  console.log(element)\n                  if(element.classList.contains(\"show\")){\n                    element.classList.remove('show')\n                  }\n                })\n              }, 100);\n              \n            }\n          }\n        }, 100);\n        \n      }\n    )\n\n    this.right_panel_subscription = this.lexicalService.rightPanelData$.subscribe(\n      object => {\n        this.object = object;\n        /* console.log(this.object) */\n        if(this.object !=null){\n          if(this.object.etymology != undefined){\n            this.notes = this.object['etymology'];\n            this.link = this.object['etymology'];\n            this.bibliography = this.object['etymology'];\n          }else{\n            this.notes = this.object;\n            this.link = this.object;\n            this.bibliography = this.object;\n          }\n        }else{\n          this.notes = null;\n          this.link = null;\n          this.bibliography = null;\n        }\n      }\n    );\n  }\n\n  ngOnDestroy(): void {\n    this.medatata_panel_subscription.unsubscribe();\n    this.note_panel_subscription.unsubscribe();\n    this.trigger_biblio_panel_subscription.unsubscribe();\n    this.trigger_att_panel_subscription.unsubscribe();\n    this.medatata_panel_subscription.unsubscribe();\n    this.attestation_panel_subscription.unsubscribe();\n    this.trigger_metatada_panel_subscription.unsubscribe();\n    this.right_panel_subscription.unsubscribe();\n  }\n}\n","\n\n<div class=\"container-fluid\">\n\t<div class=\"row\" >\n\t\t<div class=\"col-md-9\">\n\t\t\t<app-lexicon-panel></app-lexicon-panel>\n\t\t</div>\n\t\t<div class=\"col-md-3 \">\n\t\t\t<div class=\"container-fluid p-1\">\n\t\t\t\t<div id=\"accordion\" #accordion>\n\t\t\t\t\t<app-note-panel [noteData]=\"notes\"></app-note-panel>\n\t\t\t\t\t<app-link-panel [linkData]=\"link\"></app-link-panel>\n\t\t\t\t\t<app-bibliography-panel [biblioData]=\"bibliography\" id=\"bibliographyPanel\"></app-bibliography-panel>\n\t\t\t\t\t<app-attestation-panel [attestationData]=\"attestation\"></app-attestation-panel>\n\t\t\t\t\t<app-metadata-panel [metadataData]=\"metadata\"></app-metadata-panel>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</div>","/*\n   Copyright 2021-2022  Istituto di Linguistica Computazionale \"A. Zampolli\", Consiglio Nazionale delle Ricerche, Pisa, Italy.\n \nThis file is part of EpiLexo.\n\nEpiLexo is free software: you can redistribute it and/or modify it under the terms of the GNU General Public License as published by the Free Software Foundation, either version 3 of the License, or (at your option) any later version.\n\nEpiLexo is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for more details.\n\nYou should have received a copy of the GNU General Public License along with EpiLexo. If not, see <https://www.gnu.org/licenses/>.\n*/\n\nexport interface LexicalEntryRequest {\n  text: string,\n  searchMode: searchModeEnum,\n  type: typeEnum | string,\n  pos: string,\n  formType: formTypeEnum | string,\n  author: string,\n  lang: string,\n  status: string,\n  offset: number,\n  limit: number\n}\n\nexport enum searchModeEnum {\n  equals = \"equals\",\n  startsWith = \"startsWith\",\n  contains = \"contains\",\n  endsWith = \"endsWith\"\n}\n\nexport enum typeEnum {\n  word = \"word\",\n  multi = \"multi-word expression\",\n  affix = \"affix\"\n}\n\nexport enum formTypeEnum {\n  flexed = \"flexed\",\n  entry = \"entry\"\n}","/*\n   Copyright 2021-2022  Istituto di Linguistica Computazionale \"A. Zampolli\", Consiglio Nazionale delle Ricerche, Pisa, Italy.\n \nThis file is part of EpiLexo.\n\nEpiLexo is free software: you can redistribute it and/or modify it under the terms of the GNU General Public License as published by the Free Software Foundation, either version 3 of the License, or (at your option) any later version.\n\nEpiLexo is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for more details.\n\nYou should have received a copy of the GNU General Public License along with EpiLexo. If not, see <https://www.gnu.org/licenses/>.\n*/\n\nimport { DatePipe } from '@angular/common';\nimport { ChangeDetectionStrategy, Component, ElementRef, HostListener, OnDestroy, OnInit, Renderer2, ViewChild } from '@angular/core';\nimport { FormGroup, FormControl, Validators, FormArray, FormBuilder, ValidatorFn, AbstractControl } from '@angular/forms';\nimport { TreeNode, TreeModel, TREE_ACTIONS, KEYS, IActionMapping, ITreeOptions } from '@circlon/angular-tree-component';\nimport { ModalComponent } from 'ng-modal-lib';\nimport { ContextMenuComponent } from 'ngx-contextmenu';\nimport { ToastrService } from 'ngx-toastr';\nimport { Subject } from 'rxjs';\nimport { debounceTime, take, takeUntil } from 'rxjs/operators';\nimport { AnnotatorService } from 'src/app/services/annotator/annotator.service';\nimport { DocumentSystemService } from 'src/app/services/document-system/document-system.service';\nimport { ExpanderService } from 'src/app/services/expander/expander.service';\nimport { LexicalEntriesService } from 'src/app/services/lexical-entries/lexical-entries.service';\nimport { v4 } from 'uuid';\n\n\n\nconst actionMapping: IActionMapping = {\n  mouse: {\n    /* dblClick: (tree, node, $event) => {\n      if (node.hasChildren) {\n        TREE_ACTIONS.TOGGLE_EXPANDED(tree, node, $event);\n      }\n    }, */\n    click: (tree, node, $event) => {\n      $event.shiftKey\n        ? TREE_ACTIONS.TOGGLE_ACTIVE_MULTI(tree, node, $event)\n        : TREE_ACTIONS.TOGGLE_ACTIVE(tree, node, $event);\n      \n      if(node.data.rename_mode){\n        $event.preventDefault();\n      }/* else{\n        TREE_ACTIONS.TOGGLE_ACTIVE(tree, node, $event);\n      } */\n    },\n    expanderClick: (tree, node, $event) => {\n      if(node.data.rename_mode){\n        $event.preventDefault();\n      }else{\n        //console.log(node);\n        TREE_ACTIONS.TOGGLE_EXPANDED(tree, node, $event);\n      }\n    }\n    /* contextMenu: (tree, node, $event) => {\n      //$event.preventDefault();\n      //alert(`context menu for ${node.data.name}`);\n      TREE_ACTIONS.TOGGLE_ACTIVE(tree, node, $event);\n    } */\n  },\n  keys: {\n    [KEYS.ENTER]: (tree, node, $event) => alert(`This is ${node.data.name}`)\n  }\n};\n\n\n\n@Component({\n  selector: 'app-text-tree',\n  templateUrl: './text-tree.component.html',\n  styleUrls: ['./text-tree.component.scss'],\n  providers: [DatePipe],\n})\n\nexport class TextTreeComponent implements OnInit, OnDestroy {\n  @ViewChild('metadata_tags') metadata_tags_element: any;\n  @ViewChild('treeText') treeText: any;\n  @ViewChild(ContextMenuComponent) public basicMenu: ContextMenuComponent;\n  \n  @HostListener('document:click', ['$event'])\n  clickout(event : MouseEvent) {\n    if(this.renameNode_input != undefined){\n      if(this.renameNode_input.nativeElement.contains(event.target)) {\n        console.log(\"clicked inside\");\n        event.stopPropagation();\n      } else {\n        console.log(\"clicked outside\");\n        \n        var that = this;\n\n        setTimeout(() => {\n          //@ts-ignore\n          $('.input-tooltip').tooltip('hide');\n          setTimeout(() => {\n            that.treeText.treeModel.getNodeBy(\n              item => {\n                item.data.rename_mode = false;\n              }\n            )\n          }, 100);\n        }, 300);\n      }\n    }\n  }\n  \n  show = false;\n  nodes = [];\n\n  renameNodeSelected : any;\n  validName = null;\n  searchIconSpinner = false;\n  searchIconSpinner_input = false;\n  selectedFileToCopy : any;\n  selectedFileToCopyArray : any;\n  selectedNodeId;\n  selectedEpidocId;\n\n  storeTempRemoveFile_data : any;\n\n  memoryMetadata = [];\n  metadataForm = new FormGroup({\n    element_id : new FormControl(null),\n    metadata_array: new FormArray([], [Validators.required]),\n  })\n  \n  \n  metadata_array: FormArray;\n  metadata_search : FormArray;\n  destroy$ : Subject<boolean> = new Subject();\n  \n  options: ITreeOptions = {\n    actionMapping,\n    allowDrag: (node) => node.isLeaf,\n    allowDrop: (element, { parent, index }) => {\n      // return true / false based on element, to.parent, to.index. e.g.\n      //console.log(element, parent, index, parent.data.type == 'folder')\n      return parent.data.type == 'directory';\n    },\n    getNodeClone: (node) => ({\n      ...node.data,\n      id: v4(),\n      name: `copy of ${node.data.name}`\n    })\n  };\n\n  \n/*   @ViewChild('renameFolderInput') renameFolder_input:ElementRef; \n  @ViewChild('renameFileInput') renameFile_input:ElementRef;  */\n  @ViewChild('uploadFile') uploadFile_input:ElementRef; \n  @ViewChild('updateFileMetadata') updateFileMetadata_input:ElementRef; \n  @ViewChild('renameNodeInput') renameNode_input:ElementRef; \n  /* @ViewChild('renameFolderModel', {static: false}) renameFolderModal: ModalComponent; */\n  @ViewChild('editMetadata', {static: false}) editMetadataModal: ModalComponent;\n  \n  date = this.datePipe.transform(new Date(), 'yyyy-MM-ddThh:mm');\n  counter = 0;\n\n  textFilterForm = new FormGroup({\n    search_text : new FormControl(null),\n    search_mode : new FormControl(null),\n    import_date : new FormControl(this.date),\n    date_mode : new FormControl(''),\n    /* metadata_array : new FormArray([this.createMetadataItemSearch()]) */\n  })\n\n  initialValues;\n\n  \n  \n  constructor(private lexicalService: LexicalEntriesService, private annotatorService : AnnotatorService, private expander : ExpanderService, private element: ElementRef, private documentService: DocumentSystemService, private renderer: Renderer2, private formBuilder: FormBuilder, private datePipe:DatePipe, private toastr: ToastrService) { }\n\n  ngOnInit(): void {\n    this.loadTree();\n    \n    this.textFilterForm = this.formBuilder.group({\n      search_text : new FormControl(null),\n      search_mode : new FormControl('start'),\n      import_date : new FormControl(this.date),\n      date_mode : new FormControl('until'),\n      metadata_array : new FormArray([])\n    })\n\n    this.onChanges();\n    \n    this.metadataForm = this.formBuilder.group({\n      element_id : new FormControl(null),\n      name : new FormControl(null),\n      metadata_array: new FormArray([], [Validators.required]),\n    });\n\n    this.initialValues = this.textFilterForm.value\n  }\n\n  onChanges() {\n    this.textFilterForm.valueChanges.pipe(debounceTime(500), takeUntil(this.destroy$)).subscribe(searchParams => {\n      console.log(searchParams)\n      this.searchFilter(searchParams)\n    })\n  }\n  \n  onEvent = ($event: any) => {\n    console.log($event);\n\n    if ($event.eventName == 'activate' && $event.node.data.type != 'directory' && this.selectedNodeId != $event.node.data['element-id']) {\n      this.selectedNodeId = $event.node.data['element-id'];\n      this.selectedEpidocId = $event.node.data.metadata['itAnt_ID'];\n      //@ts-ignore\n      $(\"#epigraphyTabModal\").modal(\"show\");\n      $('.modal-backdrop').appendTo('.epigraphy-tab-body');\n      //@ts-ignore\n      $('#epigraphyTabModal').modal({backdrop: 'static', keyboard: false})  \n      $('body').removeClass(\"modal-open\")\n      $('body').css(\"padding-right\", \"\");\n\n\n      if(this.selectedEpidocId == undefined){\n        if($event.node.data.name != undefined || $event.node.data.name != ''){\n          this.selectedEpidocId = $event.node.data.name;\n        }else{\n          this.selectedEpidocId = 'Unnamed'\n        }\n      }\n      \n\n      this.documentService.getContent(this.selectedNodeId).pipe(takeUntil(this.destroy$)).subscribe(\n        data=>{\n\n          //console.log(\"XML\", data)\n          let text = data.text;\n          let object = {\n            xmlString : text\n          }\n\n          let xmlDom = new DOMParser().parseFromString(text, \"text/xml\");\n\n          this.annotatorService.getTokens(this.selectedNodeId).pipe(takeUntil(this.destroy$)).subscribe(\n            data => {\n    \n              console.log(data)\n              let element_id = this.selectedNodeId;\n              let tokens = data.tokens;\n\n\n              this.documentService.sendToEpigraphyTab({\n                tokens : tokens,\n                element_id : element_id,\n                epidoc_id : this.selectedEpidocId,\n                xmlDoc : xmlDom\n              })\n\n    \n              if(!this.expander.isEditTabOpen() && !this.expander.isEpigraphyTabOpen()){\n                if(!this.expander.isEditTabExpanded() && !this.expander.isEpigraphyTabExpanded()){\n                  \n                  this.expander.expandCollapseEpigraphy(true);\n                  this.expander.openCollapseEpigraphy(true);\n                }\n              }else if(this.expander.isEditTabOpen() && !this.expander.isEpigraphyTabOpen()){\n                if(this.expander.isEditTabExpanded() && !this.expander.isEpigraphyTabExpanded()){\n                  this.expander.openCollapseEpigraphy(true);\n                  this.expander.expandCollapseEdit(false);\n                }\n              }\n    \n              let metadata = $event.node.data.metadata;\n              metadata['path'] = $event.node.data.path;\n              metadata['element-id'] = $event.node.data['element-id'];\n              if(metadata != undefined && Object.keys(metadata).length > 5){\n                this.documentService.sendToMetadataPanel(metadata);\n                this.documentService.triggerMetadataPanel(true)\n              }else{\n                this.documentService.sendToMetadataPanel(null);\n                this.documentService.triggerMetadataPanel(false)\n              }\n            },\n            error => {\n              console.log(error)\n            }\n          );\n\n          this.documentService.sendLeidenToEpigraphyTab(null);\n          this.documentService.testConvert(object).pipe(takeUntil(this.destroy$)).subscribe(\n            data=>{\n              //console.log(\"TEST\", data);\n              \n              if(data != undefined){\n                try {\n                  let raw = data.xml;\n                  let HTML =  new DOMParser().parseFromString(raw, \"text/html\");\n                  console.log(HTML)\n\n                  let domNodes = new DOMParser().parseFromString(raw, \"text/html\").querySelectorAll('#edition #edition .textpart');\n                  let childNodes = [];\n                  if(Array.from(domNodes).length > 1){\n                    Array.from(domNodes).forEach(childNode=> {\n                      Array.from(childNode.childNodes).forEach(subChild => {\n                        Array.from(subChild.childNodes).forEach(x => {\n                          childNodes.push(x)\n                        })\n                      })\n                    })\n                  }else{\n                    childNodes = Array.from(new DOMParser().parseFromString(raw, \"text/html\").querySelectorAll('#edition .textpart')[0].childNodes[0].childNodes);\n                  }\n                  \n                  \n                  \n                  let leidenLines = []; \n\n                  for(var i = 0; i < childNodes.length; i++){\n                    let node = childNodes[i];\n\n                    if(node.nodeName == 'A' || node.nodeName == 'BR'){\n                      \n                      let string = '';\n                      //console.log(\"LINE BREAK: \" + i)\n                      for(var j = i; j < childNodes.length; j++){\n\n                        let textNode = childNodes[j];\n                        \n                        if(textNode.nodeName == '#text' && textNode.nodeValue.trim() != ''){\n\n                          string += textNode.nodeValue;\n\n                          if(j == childNodes.length-1){\n                            leidenLines.push(string);\n                            break;\n                          }\n\n                          //console.log(textNode.nodeValue)\n                        }else if((textNode.nodeName == 'BR' || textNode?.id?.toLowerCase().includes('face'))&& i != j){\n                          leidenLines.push(string)\n                          \n                          i = j-1;\n                          break;\n                        }\n\n                        if(j == childNodes.length-1 && string != ''){\n                          leidenLines.push(string);\n                          break;\n                        }\n                      }\n                    }\n                  }\n\n                  this.documentService.sendLeidenToEpigraphyTab(leidenLines);\n\n\n                  let translations = new DOMParser().parseFromString(raw, \"text/html\").querySelectorAll('#translation');\n                  let translationArray = [];            \n                  translations.forEach(element=>{\n                    let childNodes = element.childNodes;\n                    let string = '';\n                    childNodes.forEach((child : any) =>{\n                      if(child.nodeName == 'P'){\n                        \n                        string += child.innerHTML;\n                      }\n                    })\n                    translationArray.push(string)\n                  })\n                  \n                  this.documentService.sendTranslationToEpigraphyTab(translationArray);\n                  this.annotatorService.getIdText(this.selectedEpidocId);\n                } catch (error) {\n                  console.log(error)\n                  \n                }\n              } \n            },error =>{\n              console.log(\"ERROR TEST\", error)\n              this.documentService.sendLeidenToEpigraphyTab(null);\n              this.documentService.sendTranslationToEpigraphyTab(null);\n            }\n          )\n\n        },error=>{\n          console.log(error)\n        }\n      )\n\n      \n      \n      \n      \n\n      /* this.annotatorService.getText(this.selectedNodeId).subscribe(\n        data=>{\n          console.log(data);\n          if(data != undefined){\n            this.documentService.sendTextToEpigraphyTab(data.text);\n          }\n        },\n        error=>{\n          if(error.status == 200){\n            if(error.error.text != \"\"){\n              this.documentService.sendTextToEpigraphyTab(error.error.text);\n            }  \n          }\n          console.log(error)\n        }\n      ) */\n\n      \n    \n    }\n  }\n\n  \n\n  onMoveNode($event) {\n    console.log($event);\n    let node_type = $event.node.type;\n    let target_type = $event.to.parent.type;\n    if(node_type === 'directory' && target_type === 'directory'){\n      this.moveFolder($event)\n    }else if(node_type === 'file' && target_type === 'directory'){\n      this.moveFile($event)\n    }\n    \n  }\n\n  loadTree(){\n    this.documentService.getDocumentSystem().subscribe(\n      data => {\n        console.log(data);\n\n        if(data['documentSystem'].length != 0){\n          //console.log(\"CIAO\")\n          this.nodes = data['documentSystem'];\n          setTimeout(() => {\n            this.treeText.treeModel.getNodeBy(\n              item => {\n                item.data.rename_mode = false;\n              }\n            )\n          }, 100);\n        }\n        \n        \n        this.counter = data['results'];\n      },\n      error => {\n        console.log(error)\n      }\n    )\n  }\n\n  \n\n  isFolder = (item : any) : boolean =>{\n    if(item.type != undefined){\n      return item.type == 'directory' && (this.treeText.treeModel.activeNodes.length == 1 || this.treeText.treeModel.activeNodes.length == 0);\n    }else{\n      return false\n    }\n  }\n\n  isFile = (item : any) : boolean =>{\n    if(item.type != undefined){\n      return item.type == 'file' && (this.treeText.treeModel.activeNodes.length == 1 || this.treeText.treeModel.activeNodes.length == 0);\n    }else{\n      return false\n    }\n  }\n\n  enableMetadata = (item : any) : boolean => {\n    return (item.type == 'file' || item.type == 'folder') && (this.treeText.treeModel.activeNodes.length == 1 || this.treeText.treeModel.activeNodes.length == 0);\n  }\n\n  multipleSelection = (item : any): boolean =>{\n    //console.log(this.treeText.treeModel.activeNodes)\n    return this.treeText.treeModel.activeNodes.length > 1;\n  }\n\n  noRoot(item : any){\n    return item.name != 'root';\n  }\n\n  isFolderMultiple = (item : any) : boolean => {\n    if(this.selectedFileToCopyArray != undefined){\n      return item.type == 'directory' && this.selectedFileToCopyArray.length > 1;\n    }else{\n      return false;\n    }\n  }\n\n  pasteElementsReq = (item : any) : boolean => {\n    if(this.selectedFileToCopyArray != undefined){\n      return this.selectedFileToCopyArray.length > 1;\n    }else{\n      return false;\n    }\n    \n  }\n\n  pasteElements(item){\n    console.log(item)\n    let target_element_id = item['element-id']\n    if(this.selectedFileToCopyArray != undefined){\n      this.selectedFileToCopyArray.forEach((element : any) => {\n        if(element.data.type == 'file'){\n\n          let parameters = {\n            \"requestUUID\": \"string\",\n            \"user-id\": 0,\n            \"element-id\": element?.data['element-id'],\n            \"target-id\": target_element_id\n          }\n\n          this.documentService.copyFileTo(parameters).pipe(takeUntil(this.destroy$)).subscribe(\n            data=>{\n              console.log(data);\n              //this.nodes = data['documentSystem'];\n              this.toastr.info('File '+ element?.data?.name +' copied', '', {\n                timeOut: 5000,\n              });\n              this.treeText.treeModel.getNodeBy(x => {\n                if(x.data['element-id'] === target_element_id){\n                  console.log('entrato')\n                  x.expand();\n      \n                  let node = {\n                    children : element?.data.children,\n                    \"element-id\" : element?.data['element-id']+123213,\n                    id : element?.data?.id+1232312,\n                    metadata : element?.data?.metadata,\n                    name : element?.data?.name,\n                    path : element?.data?.path,\n                    rename_mode : false,\n                    type : element?.data?.type\n                  }\n                  \n                  x.data.children.push(node)\n                    setTimeout(() => {\n                      this.counter = this.nodes.length;\n                      this.updateTreeView();\n                      this.treeText.treeModel.update();\n                      //this.treeText.treeModel.getNodeById(node.id).setActiveAndVisible();\n                    }, 100);\n                  }\n                })              \n      \n                this.treeText.treeModel.update()\n              \n                this.selectedFileToCopyArray = null;\n            },error=>{\n              //console.log(error)\n              this.selectedFileToCopyArray = null;\n            }\n          )\n        }else{\n          this.toastr.error('You can\\'t copy folder, please select only files or move entire folder', 'Error', {\n            timeOut: 5000\n          })\n        }\n      });\n    }\n  }\n\n  copyElements(){\n    this.selectedFileToCopy = null;\n    this.selectedFileToCopyArray = this.treeText.treeModel.activeNodes;\n  }\n  \n  removeElements(){\n    let selected_elements = Array.from(this.treeText.treeModel.activeNodes);\n    selected_elements.forEach(\n      (elements : any) => {\n        try {\n          let data_node = elements.data;\n          let parameters = {\n            \"requestUUID\" : \"string\",\n            \"user-id\" : 0,\n            \"element-id\" : data_node['element-id'],\n          }\n\n          if(data_node.type == 'file'){\n            this.documentService.removeFile(parameters).pipe(takeUntil(this.destroy$)).subscribe(\n              data=>{\n                console.log(data);\n                this.toastr.info('File '+ data_node.name +' deleted', '', {\n                  timeOut: 5000,\n                });\n                \n                //this.nodes = data['documentSystem'];\n                this.lexicalService.sendToAttestationPanel(null);\n                this.documentService.sendToEpigraphyTab(null)\n                this.expander.expandCollapseEpigraphy(false);\n                this.expander.openCollapseEpigraphy(false);\n\n                if(this.expander.isEditOpen){\n                  this.expander.expandCollapseEdit(true);\n                }\n      \n                this.documentService.sendToMetadataPanel(null)\n                \n                /* expandedNodes.forEach( (node: TreeNode) => {\n                \n                  setTimeout(() => {\n                    this.treeText.treeModel.getNodeBy(x => {\n                      if(x.data['element-id'] === node.data['element-id']){\n                        x.expand()\n                      }\n                    })              \n                  }, 300);\n                }) */\n      \n                this.treeText.treeModel.getNodeBy(x => {\n                  if(x.data['element-id'] === data_node['element-id']){\n                    x.parent.data.children.splice(x.parent.data.children.indexOf(x.data), 1)\n                  }\n                })\n      \n                this.treeText.treeModel.update()\n      \n                setTimeout(() => {\n                  console.log(this.nodes)\n                  this.counter = this.nodes.length;\n                }, 100);\n                \n                \n              },error=>{\n                console.log(error)\n                if(typeof(error.error) == 'string'){\n                  this.toastr.info(error.error, '', {\n                    timeOut: 5000,\n                  });\n                }\n                \n              }\n            )\n          }else if(data_node.type == 'directory'){\n            this.documentService.removeFolder(parameters).pipe(takeUntil(this.destroy$)).subscribe(\n              data=>{\n                console.log(data);\n                \n                this.toastr.info('Folder ' + data_node.name + ' removed correctly', 'Info', {\n                  timeOut: 5000\n                })\n      \n                this.treeText.treeModel.getNodeBy(x => {\n                  if(x.data['element-id'] === data_node['element-id']){\n                    x.parent.data.children.splice(x.parent.data.children.indexOf(x.data), 1)\n                  }\n                })\n      \n                this.treeText.treeModel.update()\n      \n                setTimeout(() => {\n                  console.log(this.nodes)\n                  this.counter = this.nodes.length;\n                }, 100);\n                \n                \n              },error=>{\n                console.log(error)\n                this.toastr.error('Something went wront ', 'Error', {\n                  timeOut: 5000\n                })\n                if(typeof(error.error) == 'string'){\n                  this.toastr.info(error.error, '', {\n                    timeOut: 5000,\n                  });\n                }\n              }\n            )\n          }\n\n          \n        } catch (error) {\n          \n        }\n        \n\n      }\n    )\n  }\n\n  createNewFile(evt){\n    if(evt != undefined){\n      console.log(evt)\n      let element_id = evt['element-id'];\n      let parameters = {\n        requestUUID : \"string\",\n        \"user-id\" : 0,\n        \"element-id\" : element_id,\n        filename : \"new_file\"+Math.floor(Math.random() * (99999 - 10) + 10)\n      }\n\n      this.documentService.createFile(parameters).pipe(takeUntil(this.destroy$)).subscribe(\n        data =>{\n          console.log(data)\n          this.treeText.treeModel.getNodeBy(x => {\n            if(x.data['element-id'] === element_id){\n              x.expand()\n              \n              this.toastr.info('New file added', '', {\n                timeOut: 5000,\n              });\n              console.log(x)\n              x.data.children.push(data.node)\n              setTimeout(() => {\n                this.counter = this.nodes.length;\n                this.updateTreeView();\n                this.treeText.treeModel.update();\n                this.treeText.treeModel.getNodeById(data.node.id).setActiveAndVisible();\n              }, 100);\n              \n            }\n          })\n        },error=> {\n          console.log(error)\n        }\n      )\n    }\n  }\n  \n\n  addFolder(evt){\n    if(evt != undefined){\n      let element_id = evt['element-id'];\n      let parameters = {\n        \"requestUUID\" : \"string\",\n        \"user-id\" : 0,\n        \"element-id\" : element_id\n      }\n      \n      const expandedNodes = this.treeText.treeModel.expandedNodes;\n      \n      this.documentService.addFolder(parameters).pipe(takeUntil(this.destroy$)).subscribe(\n        data=>{\n          console.log(data)\n          this.toastr.info('New folder added', '', {\n            timeOut: 5000,\n          });\n          this.treeText.treeModel.getNodeBy(x => {\n            if(x.data['element-id'] === element_id){\n              x.expand()\n\n              let element_id_new_node = data.node['element-id'];\n              let id_new_node = Math.floor(Math.random() * (9728157429307 - 1728157429307) + 1728157429307);\n              let new_node = {\n                \"children\" : [],\n                \"element-id\" : element_id_new_node,\n                \"id\" : id_new_node,\n                \"metadata\" : {},\n                \"path\" : \"\",\n                \"name\" : data.node.name,\n                \"type\" : \"directory\",\n                \"rename_mode\" : false\n              }\n              console.log(x)\n              x.data.children.push(new_node);\n              \n              setTimeout(() => {\n                this.updateTreeView();\n                this.treeText.treeModel.update();\n                this.treeText.treeModel.getNodeById(id_new_node).setActiveAndVisible();\n              }, 100);\n              \n            }\n          }) \n          \n        },error=>{\n          console.log(error)\n        }\n      )\n    }\n  }\n\n  addFile(evt){\n    console.log(evt)\n    let element_id = this.uploadFile_input.nativeElement['element-id'];\n    this.selectedFileToCopy = null;\n    let file_name, parameters;\n\n    if(evt.target.files != undefined){\n      if(evt.target.files.length == 1){\n        file_name = evt.target.files[0].name;\n        parameters = {\n          \"requestUUID\" : \"string\",\n          \"user-id\" : 0,\n          \"element-id\" : element_id,\n          \"file-name\" : file_name\n        }\n        const formData = new FormData();\n        formData.append('file', evt.target.files[0])\n        this.documentService.uploadFile(formData, element_id, 11).pipe(takeUntil(this.destroy$)).subscribe(\n          data=>{\n            console.log(data)\n           \n            this.treeText.treeModel.getNodeBy(x => {\n              if(x.data['element-id'] === element_id){\n                x.expand()\n                \n                this.toastr.info('New file added', '', {\n                  timeOut: 5000,\n                });\n                console.log(x)\n                x.data.children.push(data.node)\n                setTimeout(() => {\n                  this.counter = this.nodes.length;\n                  this.updateTreeView();\n                  this.treeText.treeModel.update();\n                  this.treeText.treeModel.getNodeById(data.node.id).setActiveAndVisible();\n                }, 100);\n                \n              }\n            })    \n            \n            \n            \n          },error=>{\n            console.log(error);\n            if(error.status != 200){\n              if(error.error != undefined){\n                this.toastr.error('Change the name of file, there are some files with the same name', 'Error', {timeOut: 5000})\n              }\n            }\n          }\n        )\n      }else{\n        let files_array = evt.target.files;\n        Array.from(files_array).forEach((element : any) => {\n\n          file_name = element.name;\n          parameters = {\n            \"requestUUID\": \"string\",\n            \"user-id\": 0,\n            \"element-id\": element_id,\n            \"file-name\": file_name\n          }\n\n          const formData = new FormData();\n          formData.append('file', element);\n\n          this.documentService.uploadFile(formData, element_id, 11).pipe(takeUntil(this.destroy$)).subscribe(\n            data => {\n              console.log(data)\n              this.treeText.treeModel.getNodeBy(x => {\n                if(x.data['element-id'] === element_id){\n                  x.expand()\n                  \n                  this.toastr.info('New file added', '', {\n                    timeOut: 5000,\n                  });\n                  console.log(x)\n                  x.data.children.push(data.node)\n                  setTimeout(() => {\n                    this.counter = this.nodes.length;\n                    this.updateTreeView();\n                    this.treeText.treeModel.update();\n                    this.treeText.treeModel.getNodeById(data.node.id).setActiveAndVisible();\n                  }, 100);\n                  \n                }\n              })\n\n\n\n            }, error => {\n              console.log(error);\n              this.toastr.error('Error when adding new file', '', {\n                timeOut: 5000,\n              });\n            }\n          )\n        });\n      }\n    }\n        \n    console.log(parameters)\n    const expandedNodes = this.treeText.treeModel.expandedNodes;\n    \n  }\n\n  updateFileMetadataHandler(evt){\n    console.log(evt)\n    let element_id = this.updateFileMetadata_input.nativeElement['element-id'];\n\n    this.treeText.treeModel.getNodeBy(x => {\n      if(x.data['element-id'] === element_id){\n        //console.log(x)\n        if(x.parent.data['element-id'] == undefined){\n          element_id = 0;\n        } \n      }\n    })    \n\n    if(evt.target.files != undefined){\n      \n      const formData = new FormData();\n      formData.append('file', evt.target.files[0])\n      this.documentService.updateFileMetadata(formData, element_id, 11).pipe(takeUntil(this.destroy$)).subscribe(\n        data=>{\n          console.log(data)\n          let metadata = data.node.metadata;\n          metadata['path'] = data.node.path;\n          metadata['element-id'] = data.node['element-id'];\n          if(metadata != undefined && Object.keys(metadata).length > 5){\n            this.documentService.sendToMetadataPanel(metadata);\n            this.documentService.triggerMetadataPanel(true)\n          }else{\n            this.documentService.sendToMetadataPanel(null);\n            this.documentService.triggerMetadataPanel(false)\n          }\n          this.toastr.info('Metadata file updated', 'Info', {timeOut : 5000})\n          this.treeText.treeModel.getNodeBy(x => {\n            if(x.data['element-id'] === this.updateFileMetadata_input.nativeElement['element-id']){\n              \n              //this.treeText.treeModel.getNodeById(data.node['element-id']).setActiveAndVisible();\n              x.setActiveAndVisible();\n            }\n          })    \n          \n          \n          \n        },error=>{\n          console.log(error);\n          if(error.status != 200){\n            if(error.error != undefined){\n              this.toastr.error('Change the name of file, there are some files with the same name', 'Error', {timeOut: 5000})\n            }\n          }\n        }\n      )\n      \n    }\n        \n    \n    \n  }\n\n  triggerUploader(evt){\n    let element_id = evt['element-id']\n    this.renderer.setProperty(this.uploadFile_input.nativeElement, 'element-id', element_id)\n    this.uploadFile_input.nativeElement.click();\n    \n  }\n\n  triggerFileMetadataUploader(evt){\n    let element_id = evt['element-id']\n    this.renderer.setProperty(this.updateFileMetadata_input.nativeElement, 'element-id', element_id)\n    this.updateFileMetadata_input.nativeElement.click();\n    \n  }\n\n  copyFile(evt){\n    console.log(evt);\n    this.selectedFileToCopy = evt;\n    this.selectedFileToCopyArray = null;\n  }\n\n  pasteFile(evt){\n    console.log(evt)\n    let element_id_target = evt['element-id'];\n    let element_id_source = this.selectedFileToCopy['element-id'];\n    let parameters = {\n      \"requestUUID\": \"string\",\n      \"user-id\": 0,\n      \"element-id\": element_id_source,\n      \"target-id\": element_id_target\n    }\n            \n    this.documentService.copyFileTo(parameters).pipe(takeUntil(this.destroy$)).subscribe(\n      data=>{\n        console.log(data);\n        //this.nodes = data['documentSystem'];\n        this.toastr.info('File '+ evt['name'] +' copied', '', {\n          timeOut: 5000,\n        });\n        this.treeText.treeModel.getNodeBy(x => {\n          if(x.data['element-id'] === element_id_target){\n            console.log('entrato')\n            x.expand();\n\n            let node = {\n              children : this.selectedFileToCopy.children,\n              \"element-id\" : this.selectedFileToCopy['element-id'],\n              id : this.selectedFileToCopy.id+1232312,\n              metadata : this.selectedFileToCopy.metadata,\n              name : this.selectedFileToCopy.name,\n              path : '',\n              rename_mode : false,\n              type : this.selectedFileToCopy.type\n            }\n            \n            x.data.children.push(node)\n              setTimeout(() => {\n                this.counter = this.nodes.length;\n                this.updateTreeView();\n                this.treeText.treeModel.update();\n                this.treeText.treeModel.getNodeById(node.id).setActiveAndVisible();\n              }, 100);\n            }\n          })              \n\n          this.treeText.treeModel.update()\n        \n          this.selectedFileToCopy = null;\n      },error=>{\n        //console.log(error)\n        this.selectedFileToCopy = null;\n      }\n    )\n    \n\n  }\n\n  downloadFile(evt){\n    console.log(evt)\n    let element_id = evt['element-id'];\n    let parameters = {\n      \"requestUUID\": \"string\",\n      \"user-id\": 0,\n      \"element-id\": element_id,\n    }\n            \n    this.documentService.downloadFile(parameters).pipe(takeUntil(this.destroy$)).subscribe(\n      data=>{\n        console.log(data);\n        this.toastr.info('File '+ evt['name'] +' downloaded', '', {\n          timeOut: 5000,\n        });\n        \n      },error=>{\n        //console.log(error)\n      }\n    )\n  }\n\n  storeTempDeleteFile(evt){\n    this.storeTempRemoveFile_data = evt;\n  }\n\n  deleteTempData(){\n    this.storeTempRemoveFile_data = null;\n  }\n  \n  removeFile(){\n    let evt = this.storeTempRemoveFile_data;\n    this.selectedFileToCopy = null;\n    this.storeTempRemoveFile_data = null;\n    if(evt != undefined){\n      let element_id = evt['element-id'];\n      let parameters = {\n        \"requestUUID\" : \"string\",\n        \"user-id\" : 0,\n        \"element-id\" : element_id,\n      }\n\n\n      const expandedNodes = this.treeText.treeModel.expandedNodes;\n\n      this.documentService.removeFile(parameters).pipe(takeUntil(this.destroy$)).subscribe(\n        data=>{\n          console.log(data);\n          this.toastr.info('File '+ evt['name'] +' deleted', '', {\n            timeOut: 5000,\n          });\n          \n          //this.nodes = data['documentSystem'];\n          this.lexicalService.sendToAttestationPanel(null);\n          this.documentService.sendToEpigraphyTab(null)\n          this.expander.expandCollapseEpigraphy(false);\n          this.expander.openCollapseEpigraphy(false);\n\n          this.documentService.sendToMetadataPanel(null)\n\n          if(this.expander.isEditOpen){\n            this.expander.expandCollapseEdit();\n          }\n          \n          /* expandedNodes.forEach( (node: TreeNode) => {\n          \n            setTimeout(() => {\n              this.treeText.treeModel.getNodeBy(x => {\n                if(x.data['element-id'] === node.data['element-id']){\n                  x.expand()\n                }\n              })              \n            }, 300);\n          }) */\n\n          this.treeText.treeModel.getNodeBy(x => {\n            if(x.data['element-id'] === element_id){\n              x.parent.data.children.splice(x.parent.data.children.indexOf(x.data), 1)\n            }\n          })\n\n          this.treeText.treeModel.update()\n\n          setTimeout(() => {\n            console.log(this.nodes)\n            this.counter = this.nodes.length;\n          }, 100);\n          \n          \n        },error=>{\n          console.log(error)\n          if(typeof(error.error) == 'string'){\n            this.toastr.info(error.error, '', {\n              timeOut: 5000,\n            });\n          }\n          \n        }\n      )\n    }\n  }\n  \n\n\n  removeFolder(evt){\n    if(evt != undefined){\n      let element_id = evt['element-id'];\n      let parameters = {\n        \"requestUUID\" : \"string\",\n        \"user-id\" : 0,\n        \"element-id\" : element_id\n      }\n      this.toastr.info('Folder '+ evt['name'] +' deleted', '', {\n        timeOut: 5000,\n      });\n      const expandedNodes = this.treeText.treeModel.expandedNodes;\n\n      this.documentService.removeFolder(parameters).pipe(takeUntil(this.destroy$)).subscribe(\n        data=>{\n          console.log(data);\n          \n          //this.nodes = data['documentSystem'];\n          /* expandedNodes.forEach( (node: TreeNode) => {\n          \n            setTimeout(() => {\n              this.treeText.treeModel.getNodeBy(x => {\n                if(x.data['element-id'] === node.data['element-id']){\n                  x.expand()\n                }\n              })              \n            }, 300);\n          }) */\n\n          this.treeText.treeModel.getNodeBy(x => {\n            if(x.data['element-id'] === element_id){\n              x.parent.data.children.splice(x.parent.data.children.indexOf(x.data), 1)\n            }\n          })\n\n          this.treeText.treeModel.update()\n\n          setTimeout(() => {\n            console.log(this.nodes)\n            this.counter = this.nodes.length;\n          }, 100);\n          \n          \n        },error=>{\n          console.log(error)\n          if(typeof(error.error) == 'string'){\n            this.toastr.info(error.error, '', {\n              timeOut: 5000,\n            });\n          }\n        }\n      )\n    }\n  }\n\n  moveFolder(evt){\n    if(evt != undefined){\n      //console.log(evt);\n      let element_id = evt.node['element-id'];\n      let target_id = evt.to.parent['element-id'];\n      let parameters = {\n        \"requestUUID\": \"string\",\n        \"user-id\": 0,\n        \"element-id\": element_id,\n        \"target-id\": target_id\n      }\n            \n      \n      this.documentService.moveFolder(parameters).pipe(takeUntil(this.destroy$)).subscribe(\n        data=>{\n          this.toastr.info('Folder '+ evt.node['name'] +' moved', '', {\n            timeOut: 5000,\n          });\n          /* //console.log(data); */\n        },error=>{\n          console.log(error)\n        }\n      )\n    }\n  }\n\n  moveFile(evt){\n    if(evt != undefined){\n      console.log(evt);\n      let element_id = evt.node['element-id'];\n      let target_id = evt.to.parent['element-id'];\n      let parameters = {\n        \"requestUUID\": \"string\",\n        \"user-id\": 0,\n        \"element-id\": element_id,\n        \"target-id\": target_id\n      }\n            \n      \n      this.documentService.moveFileTo(parameters).pipe(takeUntil(this.destroy$)).subscribe(\n        data=>{\n          console.log(data);\n          this.toastr.info('File '+ evt.node['name'] +' moved', '', {\n            timeOut: 5000,\n          });\n          \n        },error=>{\n          //console.log(error)\n        }\n      )\n    }\n  }\n\n  renameNode(evt){\n    setTimeout(() => {\n      this.renameNode_input.nativeElement.focus();\n      //@ts-ignore\n      $('.input-tooltip').tooltip({\n          trigger: 'hover'\n      });\n    }, 300);\n    console.log(evt)\n    \n    this.treeText.treeModel.getNodeBy(\n      node => {\n        if(node.data['element-id'] == evt['element-id']){\n          node.data.rename_mode = true;\n          \n        }else{\n          node.data.rename_mode = false;\n        }\n      }\n    )\n  }\n\n  onRenamingNode(evt, node, new_value){\n    console.log(evt, node);\n    setTimeout(() => {\n      //@ts-ignore\n      $('.input-tooltip').tooltip({\n          trigger: 'hover'\n      });\n    }, 300);\n    switch(evt.key){\n      case 'Enter' : this.updateNodeName(node, new_value); break;\n      case 'Escape': this.exitRenamingMode(); break;\n      default: console.log(evt)\n    }\n    \n  }\n\n  updateNodeName(node, new_value){\n    this.searchIconSpinner_input = true;\n    let node_type = node.data.type;\n\n    if(new_value.match(/^[A-Za-z-_0-9. ]{3,}$/)){\n      let element_id = node.data['element-id'];\n      let parameters = {\n        \"requestUUID\": \"string\",\n        \"user-id\": 0,\n        \"element-id\": element_id,\n        \"rename-string\": new_value\n      }\n\n      if(node_type == 'directory'){\n        \n        this.documentService.renameFolder(parameters).pipe(takeUntil(this.destroy$)).subscribe(\n          data=> {\n            //console.log(data);\n            this.toastr.info('Folder '+ node.data.name +' renamed', '', {\n              timeOut: 5000,\n            });\n            setTimeout(() => {\n              this.treeText.treeModel.getNodeBy(x => {\n                if(x.data['element-id'] === element_id){\n                  x.data.name = new_value;\n                }\n              })              \n            }, 300);\n            this.searchIconSpinner_input = false;\n            this.renameNode_input.nativeElement.value = '';\n            var that = this;\n\n            setTimeout(() => {\n              //@ts-ignore\n              $('.input-tooltip').tooltip('hide');\n              setTimeout(() => {\n                that.treeText.treeModel.getNodeBy(\n                  item => {\n                    item.data.rename_mode = false;\n                  }\n                )\n              }, 100);\n            }, 100);\n          },error=>{\n            console.log(error)\n            var that = this;\n\n            setTimeout(() => {\n              //@ts-ignore\n              $('.input-tooltip').tooltip('hide');\n              setTimeout(() => {\n                that.treeText.treeModel.getNodeBy(\n                  item => {\n                    item.data.rename_mode = false;\n                  }\n                )\n              }, 100);\n            }, 100);\n          }\n        )\n\n      }else if(node_type == 'file'){\n        this.documentService.renameFile(parameters).pipe(takeUntil(this.destroy$)).subscribe(\n          data=> {\n            this.toastr.info('File renamed', '', {\n              timeOut: 5000,\n            });\n            //console.log(data);\n            setTimeout(() => {\n              this.treeText.treeModel.getNodeBy(x => {\n                if(x.data['element-id'] === element_id){\n                  x.data.name = new_value;\n                }\n              })              \n            }, 300);\n            this.searchIconSpinner_input = false;\n            this.renameNode_input.nativeElement.value = '';\n            var that = this;\n\n            setTimeout(() => {\n              //@ts-ignore\n              $('.input-tooltip').tooltip('hide');\n              setTimeout(() => {\n                that.treeText.treeModel.getNodeBy(\n                  item => {\n                    item.data.rename_mode = false;\n                  }\n                )\n              }, 100);\n            }, 100);\n          },error=>{\n            console.log(error)\n            var that = this;\n\n            setTimeout(() => {\n              //@ts-ignore\n              $('.input-tooltip').tooltip('hide');\n              setTimeout(() => {\n                that.treeText.treeModel.getNodeBy(\n                  item => {\n                    item.data.rename_mode = false;\n                  }\n                )\n              }, 100);\n            }, 100);\n          }\n        )\n      }\n    }\n    \n  }\n\n  exitRenamingMode(){\n    var that = this;\n\n    setTimeout(() => {\n      //@ts-ignore\n      $('.input-tooltip').tooltip('hide');\n      setTimeout(() => {\n        \n        that.searchIconSpinner_input = false;\n        that.treeText.treeModel.getNodeBy(\n          item => {\n            item.data.rename_mode = false;\n          }\n        )\n      }, 100);\n    }, 300);\n  }\n\n  saveMetadata(){\n    console.log(this.metadata_array.value)\n    let element_id = this.metadataForm.get('element_id').value;\n    let name = this.metadataForm.get('name').value;\n    let parameters = {\n      \"requestUUID\": \"string\",\n      \"metadata\": {},\n      \"user-id\": 0,\n      \"element-id\": element_id\n    };\n    \n    this.metadata_array.value.forEach(element => {\n      parameters.metadata[element.key] = element.value\n    });\n\n    const expandedNodes = this.treeText.treeModel.expandedNodes;\n\n    this.documentService.updateMetadata(parameters).pipe(takeUntil(this.destroy$)).subscribe(\n      data=> {\n        this.toastr.info('Metadata updated for ' + name + ' node' , '', {\n          timeOut: 5000,\n        });\n        //console.log(data);\n        this.nodes = data['documentSystem'];\n        expandedNodes.forEach( (node: TreeNode) => {\n          \n          setTimeout(() => {\n            this.treeText.treeModel.getNodeBy(x => {\n              if(x.data['element-id'] === node.data['element-id']){\n                x.setActiveAndVisible()\n              }\n            })              \n          }, 300);\n        })\n      },error =>{\n        console.log(error)\n      }\n    )\n  }\n\n  removeMetadataItem(index){\n    this.metadata_array = this.metadataForm.get('metadata_array') as FormArray;\n    let name = this.metadata_array.at(index).get('key').value;\n    this.toastr.info('Metadata deleted for ' + name + ' node' , '', {\n      timeOut: 5000,\n    });\n    this.memoryMetadata.splice(index, 1)\n    this.metadata_array.removeAt(index);\n    this.metadataForm.markAsTouched();\n    \n  }\n\n  addMetadata(k?, v?){\n    this.metadata_array = this.metadataForm.get('metadata_array') as FormArray;\n\n    if (k == undefined) {\n      this.metadata_array.push(this.createMetadataItem());\n    } else {\n      this.metadata_array.push(this.createMetadataItem(k, v));\n    }\n  }\n\n  onCloseRemoveMetadata(){\n    this.selectedFileToCopy = null;\n  }\n\n  deleteMetadata(){\n    let element_id = this.selectedFileToCopy['element-id'];\n    let name = this.selectedFileToCopy['name'];\n    let parameters = {\n      \"requestUUID\": \"string\",\n      \"user-id\": 0,\n      \"element-id\": element_id\n    }\n    \n    const expandedNodes = this.treeText.treeModel.expandedNodes;\n\n    this.documentService.deleteMetadata(parameters).pipe(takeUntil(this.destroy$)).subscribe(\n      data=> {\n        //console.log(data);\n        this.toastr.info('Metadata deleted for ' + name + ' node' , '', {\n          timeOut: 5000,\n        });\n        this.nodes = data['documentSystem'];\n        expandedNodes.forEach( (node: TreeNode) => {\n          \n          setTimeout(() => {\n            this.treeText.treeModel.getNodeBy(x => {\n              if(x.data['element-id'] === node.data['element-id']){\n                x.setActiveAndVisible()\n              }\n            })              \n          }, 300);\n        })\n      },error =>{\n        console.log(error)\n      }\n    )\n  }\n\n  onCloseModal(){\n    this.metadataForm.markAsUntouched();\n    this.metadata_array.clear();\n    this.memoryMetadata = [];\n  }\n\n  populateMetadata(item : any){\n    let element_id = item['element-id'];\n    let name = item['name'];\n    this.metadataForm.get('name').setValue(name, {emitEvent : false})\n    this.metadataForm.get('element_id').setValue(element_id, {emitEvent : false});\n    this.editMetadataModal.show();\n\n    this.metadata_array = this.metadataForm.get('metadata_array') as FormArray;\n    this.metadata_array.clear();\n    this.memoryMetadata = [];\n\n    if(Object.keys(item.metadata).length != 0){\n      for (const [key, value] of Object.entries(item.metadata)) {\n        console.log(`${key}: ${value}`);\n        this.addMetadata(key, value)\n      }\n    }else{\n      null;\n    }\n    \n  }\n\n  createMetadataItem(k?, v?){\n    if(k != undefined){\n      return this.formBuilder.group({\n        key: new FormControl(k, [Validators.required, Validators.minLength(0)]),\n        value: new FormControl(v, [Validators.required, Validators.minLength(0)])\n      })\n    }else{\n      return this.formBuilder.group({\n        key: new FormControl('', [Validators.required, Validators.minLength(0), this.uniqueIdValidator.bind(this)]),\n        value: new FormControl('', [Validators.required, Validators.minLength(0)])\n      })\n    }\n  }\n\n  uniqueIdValidator(control: FormControl) {\n    /* console.log(control)\n    console.log(this.metadata_array) */\n    if(control.value != ''){\n      if (this.metadata_array.value.find(item => item.key === control.value)) {\n        return { duplicate: true };\n      } else {\n        return null;\n      }\n    }else{\n      return null\n    }\n    \n  }\n\n  updateTreeView() {\n    setTimeout(() => {\n      //@ts-ignore\n      $('.input-tooltip').tooltip({\n          trigger: 'hover'\n      });\n    }, 300);\n    \n    setTimeout(() => {\n      this.treeText.sizeChanged();\n      //@ts-ignore\n      $('.lexical-tooltip').tooltip();\n    }, 1000);\n  }\n\n  resetFields(){\n    \n    this.textFilterForm.reset(this.initialValues, {emitEvent : false});\n    setTimeout(() => {\n      this.loadTree();\n      this.treeText.treeModel.update();\n      this.updateTreeView();\n      \n    }, 500);  \n    \n  }\n\n  searchFilter(newPar) {\n    \n    setTimeout(() => {\n      const viewPort_prova = this.element.nativeElement.querySelector('tree-viewport') as HTMLElement;\n      viewPort_prova.scrollTop = 0\n    }, 300);\n\n    let parameters = [];\n\n    \n\n    //let search_text = newPar.search_text != null ? newPar.search_text : '';\n    //let date_pipe = this.datePipe.transform(newPar.import_date, 'yyyy-MM-ddThh:mm:ss.zzzZ')\n    this.searchIconSpinner = true;\n    /* let parameters = {\n      \"requestUUID\" : \"string\",\n      \"contains\" : newPar.search_mode == 'contains' ? true : false,\n      \"metadata\" : {},\n      \"search-text\": search_text,\n      \"start-with\" : newPar.search_mode == 'start' ? true : false,\n      \"user-id\": 0,\n      \"import-date\": date_pipe,\n      \"exact-date\": newPar.date_mode == 'exact' ? true : false,\n      \"from-date\":  newPar.date_mode == 'from' ? true : false,\n      \"util-date\":  newPar.date_mode == 'until' ? true : false\n    }; */\n    \n    console.log(parameters)\n    \n    /* this.documentService.searchFiles(newPar).pipe(takeUntil(this.destroy$)).subscribe(\n      data => {\n        if(data['files'].length > 0){\n          this.show = false;\n        }else {\n          this.show = true;\n        }\n        this.nodes = data['files'];\n        this.counter = data['results'];\n        this.treeText.treeModel.update();\n        this.updateTreeView();\n        this.searchIconSpinner = false;\n        \n      },\n      error => {\n        console.log(error)\n        this.searchIconSpinner = false;\n\n        this.toastr.error('Error on search text', 'Error', {\n          timeOut : 5000\n        })\n      }\n    ) */\n  }\n\n  addTagFn(name) {\n    return { name: name, tag: true };\n  }\n\n  triggerMetadata(){\n    console.log(this.metadata_tags_element.selectedItems)\n  }\n\n  ngOnDestroy(): void {\n      \n  this.destroy$.next(true);\n  this.destroy$.complete();\n  }\n\n}\n\n","<form [formGroup]=\"textFilterForm\">\n  <div class=\"input-group col-md-12 mt-2 p-0\">\n    <input formControlName=\"search_text\" id=\"filterLexicalEntry\" name=\"search_text\" type=\"text\" class=\"form-control\"\n      placeholder=\"Search\" />\n    <div class=\"input-group-append\">\n      <span class=\"input-group-text loading_icon_append\" id=\"basic-addon2\">\n        <div class=\"spinner-border spinner-border-sm m-1\" role=\"status\" *ngIf=\"searchIconSpinner\">\n          <span class=\"sr-only\">Loading...</span>\n        </div>\n      </span>\n    </div>\n    <div id=\"buttons-container\" class=\"input-group-append\">\n      <button class=\"btn btn-sm btn-secondary btn-block filter-button\" type=\"button\" value=\"Filter\" title=\"Filter\"\n        data-toggle=\"collapse\" data-target=\"#metadataFilterCollapse\" aria-expanded=\"false\"\n        aria-controls=\"metadataFilterCollapse\"><i class=\"fa fa-filter\"></i></button>\n      <button class=\"btn btn-sm btn-danger btn-block reset-button\" type=\"button\" value=\"Reset\" title=\"Reset\"\n        (click)=\"resetFields();\" style=\"border-top-right-radius: .25rem; border-bottom-right-radius: .25rem;\"><i\n          class=\"fa fa-times\"></i></button>\n      <button class=\"btn btn-sm btn-block counter-button\" type=\"button\"><span\n          class=\"font-weight-bold font-italic text-muted\">{{counter}}</span></button>\n    </div>\n  </div>\n\n  <!-- <div class=\"d-flex flex-wrap mt-3\">\n    <div class=\"col-md-6 col-sm-3\">\n      <div class=\"form-check\">\n        <input formControlName=\"search_mode\" class=\"form-check-input\" type=\"radio\" name=\"search_mode\" id=\"startRadio\"\n          value=\"start\">\n        <label class=\"form-check-label\" for=\"startRadio\">\n          Starts\n        </label>\n      </div>\n    </div>\n    <div class=\"col-md-6 col-sm-3\">\n      <div class=\"form-check\">\n        <input formControlName=\"search_mode\" class=\"form-check-input\" type=\"radio\" name=\"search_mode\" id=\"containsRadio\"\n          value=\"contains\">\n        <label class=\"form-check-label\" for=\"containsRadio\">\n          Contains\n        </label>\n      </div>\n    </div>\n  </div> -->\n\n  <!-- <div class=\"collapse multi-collapse\" id=\"metadataFilterCollapse\">\n\n    <div class=\"d-flex flex-wrap mt-3\">\n      <div class=\"col-md-12\">\n        <div class=\"form-group row\">\n          <label for=\"inputEmail3\" class=\"col-sm-4 col-form-label\">Date mode:</label>\n          <div class=\"col-sm-8\">\n            <select formControlName=\"date_mode\" class=\"form-control\" name=\"date_mode\">\n              <option value=\"exact\">Exact</option>\n              <option value=\"from\">From</option>\n              <option value=\"until\">Until</option>\n            </select>\n          </div>\n        </div>\n      </div>\n    </div>\n\n    <div class=\"d-flex flex-wrap\">\n      <div class=\"col-md-12\">\n        <input formControlName=\"import_date\" type=\"datetime-local\" class=\"form-control\" name=\"import_date\" value=\"date\"\n          min=\"2018-06-07T00:00\" [max]=\"date\">\n      </div>\n    </div>\n\n    <div class=\"d-flex flex-wrap mt-3\">\n      <div class=\"col-md-12\">\n        <ng-select #metadata_tags [items]=\"[]\" [addTag]=\"true\" [multiple]=\"true\" [selectOnTab]=\"true\"\n          placeholder=\"Insert metadata tags\" (change)=\"triggerMetadata()\" [isOpen]=\"false\">\n        </ng-select>\n\n      </div>\n    </div>\n  </div> -->\n</form>\n\n\n<div class=\"col-md-12 mt-3 rounded border border-secondary tree-view\">\n  <p *ngIf=\"show\">Nessun risultato</p>\n  <tree-root #treeText [nodes]=\"nodes\" [options]=\"options\" [focused]=\"true\" (activate)=\"onEvent($event)\"\n    (moveNode)=\"onMoveNode($event)\">\n    <ng-template #treeNodeTemplate let-node let-index=\"index\">\n\n      <div *ngIf=\"node.data.rename_mode\" class=\"input-group\">\n        <input autofocus #renameNodeInput class=\"form-control\" type=\"text\" [value]=\"node.data.name\"\n          (keyup)=\"onRenamingNode($event, node, renameNodeInput.value)\"\n          style=\"height: 22px; border-right: transparent;\" />\n        <div class=\"input-group-append input-tooltip\" data-toggle=\"tooltip\" data-placement=\"top\" data-html=\"true\"\n          title=\"Click enter to rename; Click ESC to exit\">\n          <span class=\"input-group-text\"><i class=\"fas fa-question\"></i></span>\n        </div>\n        <div class=\"input-group-append\">\n          <span class=\"input-group-text loading_icon_append\">\n            <div class=\"spinner-border spinner-border-sm m-1\" role=\"status\" *ngIf=\"searchIconSpinner_input\">\n              <span class=\"sr-only\">Loading...</span>\n            </div>\n          </span>\n        </div>\n      </div>\n      <div *ngIf=\"!node.data.rename_mode\">\n        <i class=\"far fa-folder\" *ngIf=\"node.data.type == 'directory' && !node.isExpanded\"></i>\n        <i class=\"far fa-folder-open\" *ngIf=\"node.data.type == 'directory' && node.isExpanded\"></i>\n        <i class=\"far fa-file-alt\" *ngIf=\"node.data.type == 'file'\"></i>\n        <span [contextMenu]=\"basicMenu\" [contextMenuSubject]=\"node.data\">\n          {{ node.data.name }}\n        </span>\n      </div>\n\n    </ng-template>\n  </tree-root>\n  <context-menu>\n\n    <!-- FOLDER CONTEXT MENU -->\n    <ng-template contextMenuItem let-item [visible]=\"isFolder \" (execute)=\"triggerUploader($event.item)\">\n      Add File\n    </ng-template>\n    <ng-template contextMenuItem divider=\"true\" [visible]=\"isFolder\"></ng-template>\n    <ng-template contextMenuItem let-item [visible]=\"isFolder \" (execute)=\"createNewFile($event.item)\">\n      Create new empty File\n    </ng-template>\n    <ng-template contextMenuItem divider=\"true\" [visible]=\"isFolder\"></ng-template>\n    <ng-template contextMenuItem let-item [visible]=\"isFolder \" (execute)=\"addFolder($event.item)\">\n      Add Folder\n    </ng-template>\n    <ng-template contextMenuItem let-item [visible]=\"isFolder \" [enabled]=\"noRoot\"\n      (execute)=\"removeFolder($event.item)\">\n      Delete Folder\n    </ng-template>\n    <ng-template contextMenuItem let-item [visible]=\"isFolder \" [enabled]=\"noRoot\" (execute)=\"renameNode($event.item)\">\n      <span>Rename Folder</span> <!-- (click)=\"renameFolderModel.show();\" -->\n    </ng-template>\n\n    <ng-template contextMenuItem let-item [visible]=\"multipleSelection\" (execute)=\"copyElements()\">\n      Copy Elements\n    </ng-template>\n    <ng-template contextMenuItem let-item [visible]=\"isFolderMultiple\" (execute)=\"pasteElements($event.item)\">\n      Paste Elements\n    </ng-template>\n    <ng-template contextMenuItem divider=\"true\" [visible]=\"multipleSelection\"></ng-template>\n    <ng-template contextMenuItem let-item [visible]=\"multipleSelection\" (execute)=\"removeElements()\">\n      Delete Elements\n    </ng-template>\n\n\n    <!--     <ng-template contextMenuItem divider=\"multipleSelection\" [visible]=\"multipleSelection\"></ng-template>\n -->\n    <!-- FILE CONTEXT MENU -->\n    <ng-template contextMenuItem let-item [visible]=\"isFile\" (execute)=\"copyFile($event.item)\">\n      Copy File\n    </ng-template>\n    <ng-template contextMenuItem let-item [visible]=\"isFolder && selectedFileToCopy != null\"\n      (execute)=\"pasteFile($event.item)\">\n      Paste File\n    </ng-template>\n    <ng-template contextMenuItem let-item [visible]=\"isFile\" (execute)=\"renameNode($event.item)\">\n      <span>Rename File</span> <!-- (click)=\"renameFileModel.show();\" -->\n    </ng-template>\n    <ng-template contextMenuItem let-item [visible]=\"isFile\"\n      (execute)=\"removeTextModal.show('ciao'); storeTempDeleteFile($event.item)\">\n      Delete File\n    </ng-template>\n    <ng-template contextMenuItem divider=\"isFile\" [visible]=\"isFile\"></ng-template>\n    <ng-template contextMenuItem let-item [visible]=\"isFile\" (execute)=\"downloadFile($event.item)\">\n      Download File\n    </ng-template>\n    <ng-template contextMenuItem let-item [visible]=\"isFile \" (execute)=\"triggerFileMetadataUploader($event.item)\">\n      Update Document (metadata only)\n    </ng-template>\n\n    <!-- <ng-template contextMenuItem [visible]=\"enableMetadata\" divider=\"true\"></ng-template> -->\n    <!-- METADATA -->\n    <!-- <ng-template contextMenuItem let-item [visible]=\"enableMetadata\"  (execute)=\"populateMetadata($event.item)\">\n      <span (click)=\"editMetadata.show();\">Edit Metadata</span>\n    </ng-template> -->\n    <!-- <ng-template contextMenuItem let-item  [visible]=\"enableMetadata\" (execute)=\"copyFile($event.item)\">\n      <span (click)=\"removeMetadataModal.show();\"> Delete Metadata</span>\n    </ng-template> -->\n  </context-menu>\n</div>\n\n<app-modal #removeTextModal class=\"languages_modal\">\n  <ng-container class=\"app-modal-header\">Language Manager</ng-container>\n  <ng-container class=\"app-modal-body\">\n    <div class=\"card\">\n      <div class=\"card-body\">\n        <div class=\"form-group row ml-2 mt-3 mr-2\">\n          <label for=\"inputLabel\" class=\"col-lg-12 col-form-label\" style=\"font-size: 12px; text-align: center\">If you delete this text you will lose ALL linked annotations. Are you sure to delete this file?\n          </label>\n        </div>\n        <div class=\"form-group row ml-2 mt-3 mr-2 justify-content-md-center\">\n          <div class=\"input-group col-lg-5 justify-content-md-center\" style=\"align-items: center; text-align: center;\">\n            <div class=\"input-group-append ml-2\">\n              <button class=\"btn btn-success\" type=\"button\" (click)=\"removeFile(); removeTextModal.hide()\"><i\n                  class=\"fas fa-check\"></i></button>\n            </div>\n            <div class=\"input-group-append ml-2\">\n              <button class=\"btn btn-danger\" type=\"button\" (click)=\"deleteTempData(); removeTextModal.hide()\"><i\n                  class=\"fas fa-times\"></i></button>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n    \n\n  </ng-container>\n</app-modal>\n<input #uploadFile type=\"file\" onclick=\"this.value = null\" accept=\".xml\" hidden (change)=\"addFile($event)\" multiple>\n<input #updateFileMetadata type=\"file\" onclick=\"this.value = null\" accept=\".xml\" hidden (change)=\"updateFileMetadataHandler($event)\">\n\n<!-- <app-modal #renameFolderModel class=\"add_languages_modal\">\n  <ng-container class=\"app-modal-header\"></ng-container>\n  <ng-container class=\"app-modal-body\">\n    <div class=\"card\">\n      <div class=\"card-body\">\n        <div class=\"form-group row ml-2 mt-3 mr-2\">\n          <label for=\"inputLabel\" class=\"col-lg-5 col-form-label\" style=\"font-size: 12px;\">Rename Folder:</label>\n          <div class=\"input-group col-lg-7\" style=\"align-items: center;\">\n            <input type=\"text\" class=\"form-control\" placeholder=\"\" #renameFolderInput>\n            <div class=\"input-group-append ml-2\">\n              <button class=\"btn btn-success\" type=\"button\" (click)=\"renameFolder(renameFolderInput.value);\"><i\n                  class=\"fas fa-check\"></i></button>\n            </div>\n            \n            <div class=\"invalid-feedback\" [hidden]=\"validName\" style=\"display: block; font-size: 9px;\">\n              Please, insert at least three characters.\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  </ng-container>\n</app-modal>\n\n<app-modal #renameFileModel class=\"add_languages_modal\">\n  <ng-container class=\"app-modal-header\"></ng-container>\n  <ng-container class=\"app-modal-body\">\n    <div class=\"card\">\n      <div class=\"card-body\">\n        <div class=\"form-group row ml-2 mt-3 mr-2\">\n          <label for=\"inputLabel\" class=\"col-lg-5 col-form-label\" style=\"font-size: 12px;\">Rename File:</label>\n          <div class=\"input-group col-lg-7\" style=\"align-items: center;\">\n            <input type=\"text\" class=\"form-control\" placeholder=\"\" #renameFileInput>\n            <div class=\"input-group-append ml-2\">\n              <button class=\"btn btn-success\" type=\"button\" (click)=\"renameFile(renameFileInput.value);\"><i\n                  class=\"fas fa-check\"></i></button>\n            </div>\n          \n            <div class=\"invalid-feedback\" [hidden]=\"validName\" style=\"display: block; font-size: 9px;\">\n              Please, insert at least three characters.\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  </ng-container>\n</app-modal> -->\n\n<app-modal #editMetadata class=\"add_languages_modal\" [inViewport]=\"true\" (closeModal)=\"onCloseModal()\">\n  <ng-container class=\"app-modal-header\"></ng-container>\n  <ng-container class=\"app-modal-body\">\n    <form [formGroup]=\"metadataForm\">\n      <div class=\"form-group row ml-2 mt-3 mr-2 justify-content-between\">\n        <button class=\"btn btn-primary\" (click)=\"addMetadata()\">Add Metadata <i class=\"fas fa-plus\"></i></button>\n        <button class=\"btn btn-success\" (click)=\"saveMetadata()\"\n          [disabled]=\"!metadataForm.touched || !metadataForm.valid\">Save Metadata <i class=\"fas fa-plus\"></i></button>\n      </div>\n\n      <div class=\"card\">\n        <div class=\"card-body\">\n          <div formArrayName=\"metadata_array\">\n            <div *ngFor=\"let metadata_item of metadataForm.get('metadata_array')['controls']; let i = index\">\n              <div [formGroupName]=\"i\">\n\n\n\n                <div class=\"d-flex my-2\">\n                  <div class=\"col-md-5\">\n                    <input formControlName=\"key\" name=\"key\" type=\"text\" class=\"form-control\"\n                      placeholder=\"Insert metadata key\">\n                    <div class=\"invalid-feedback\" [hidden]=\"!metadata_item.get('key').invalid\"\n                      style=\"display: block; font-size: 9px;\">\n\n                      <span *ngIf=\"!metadata_item.get('key').hasError('duplicate')\">\n                        Invalid field\n                      </span>\n                      <span *ngIf=\"metadata_item.get('key').hasError('duplicate')\">\n                        Duplicate field\n                      </span>\n                    </div>\n                  </div>\n                  <div class=\"input-group col-md-7\">\n                    <input formControlName=\"value\" name=\"value\" type=\"text\" class=\"form-control\"\n                      placeholder=\"Insert metadata value\">\n\n                    <div class=\"input-group-append ml-2\">\n                      <button class=\"btn btn-danger\" type=\"button\" (click)=\"removeMetadataItem(i)\"\n                        style=\"border-radius: 0.25rem;\">\n                        <i class=\"fa fa-trash\"></i>\n                      </button>\n                    </div>\n                    <div class=\"invalid-feedback\" [hidden]=\"!metadata_item.get('value').invalid\"\n                      style=\"display: block; font-size: 9px;\">\n                      Invalid field\n                    </div>\n                  </div>\n                </div>\n              </div>\n            </div>\n\n            <div class=\"form-group row ml-2 mt-3 mr-2\"\n              *ngIf=\"metadataForm.get('metadata_array')['controls'].length == 0\">\n              <label for=\"inputLabel\" class=\"col-lg-5 col-form-label font-italic\" style=\"font-size: 12px;\">No\n                metadata</label>\n            </div>\n\n          </div>\n\n        </div>\n      </div>\n    </form>\n\n  </ng-container>\n</app-modal>\n\n<app-modal #removeMetadataModal class=\"remove_languages_modal\" [inViewport]=\"true\"\n  (closeModal)=\"onCloseRemoveMetadata()\">\n  <ng-container class=\"app-modal-header\"></ng-container>\n  <ng-container class=\"app-modal-body\">\n    <div class=\"card\">\n      <div class=\"card-body\">\n        <div class=\"form-group row ml-2 mt-3 mr-2\">\n          <label for=\"inputLabel\" class=\"col-lg-12 col-form-label\" style=\"font-size: 12px; text-align: center\">Are you\n            sure to delete the metadata of {{selectedFileToCopy?.name}}?</label>\n        </div>\n        <div class=\"form-group row ml-2 mt-3 mr-2 justify-content-md-center\">\n          <div class=\"input-group col-lg-5 justify-content-md-center\" style=\"align-items: center; text-align: center;\">\n            <div class=\"input-group-append ml-2\">\n              <button class=\"btn btn-success\" type=\"button\" (click)=\"deleteMetadata(); removeMetadataModal.hide()\"><i\n                  class=\"fas fa-check\"></i></button>\n            </div>\n            <div class=\"input-group-append ml-2\">\n              <button class=\"btn btn-danger\" type=\"button\" (click)=\"removeMetadataModal.hide()\"><i\n                  class=\"fas fa-times\"></i></button>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  </ng-container>\n</app-modal>","/*\n   Copyright 2021-2022  Istituto di Linguistica Computazionale \"A. Zampolli\", Consiglio Nazionale delle Ricerche, Pisa, Italy.\n \nThis file is part of EpiLexo.\n\nEpiLexo is free software: you can redistribute it and/or modify it under the terms of the GNU General Public License as published by the Free Software Foundation, either version 3 of the License, or (at your option) any later version.\n\nEpiLexo is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for more details.\n\nYou should have received a copy of the GNU General Public License along with EpiLexo. If not, see <https://www.gnu.org/licenses/>.\n*/\n\nimport { Component, Input, OnDestroy, OnInit, SimpleChanges } from '@angular/core';\nimport { FormArray, FormBuilder, FormControl, FormGroup } from '@angular/forms';\nimport { NgSelectComponent } from '@ng-select/ng-select';\nimport { ToastrService } from 'ngx-toastr';\nimport { Subject, Subscription } from 'rxjs';\nimport { debounceTime, takeUntil } from 'rxjs/operators';\nimport { LexicalEntriesService } from 'src/app/services/lexical-entries/lexical-entries.service';\n\n@Component({\n  selector: 'app-lexical-entry-decomp-form',\n  templateUrl: './lexical-entry-decomp-form.component.html',\n  styleUrls: ['./lexical-entry-decomp-form.component.scss']\n})\nexport class LexicalEntryDecompFormComponent implements OnInit, OnDestroy {\n\n  @Input() decData: any;\n  private subterm_subject: Subject<any> = new Subject();\n  private ext_subterm_subject: Subject<any> = new Subject();\n  private corresponds_subject: Subject<any> = new Subject();\n  private update_component_subject: Subject<any> = new Subject();\n  switchInput = false;\n  subscription: Subscription;\n  object: any;\n  searchResults = [];\n  peopleLoading = false;\n  counter = 0;\n  componentRef: any;\n\n  subtermDisabled = false;\n  memorySubterm = [];\n  memoryComponent = [];\n  memoryValues = [];\n\n  decompForm = new FormGroup({\n    label: new FormControl(''),\n    component: new FormArray([this.createComponent()]),\n    subterm: new FormArray([this.createSubtermComponent()])\n  })\n\n  componentArray: FormArray;\n  subtermArray: FormArray;\n  destroy$ : Subject<boolean> = new Subject();\n  staticMorpho = [];\n  morphologyData = [];\n  valueTraits = [];\n\n  disableAddTraits = [];\n\n  change_decomp_label_subscription: Subscription;\n  subterm_subject_subscription: Subscription;\n  ext_subterm_subject_subscription: Subscription;\n  corresponds_subject_subscription: Subscription;\n  update_component_subject_subscription: Subscription;\n\n  constructor(private lexicalService: LexicalEntriesService, private formBuilder: FormBuilder, private toastr: ToastrService) { }\n\n  ngOnInit(): void {\n\n    this.decompForm = this.formBuilder.group({\n      label: '',\n      component: this.formBuilder.array([]),\n      subterm: this.formBuilder.array([]),\n    })\n    this.triggerTooltip();\n    this.loadMorphologyData();\n\n    this.change_decomp_label_subscription = this.lexicalService.changeDecompLabel$.subscribe(\n      data => {\n        if (data != null) {\n          this.decompForm.get('label').setValue(data, { emitEvent: false });\n        }\n      }\n    )\n\n    this.subterm_subject_subscription = this.subterm_subject.pipe(debounceTime(1000), takeUntil(this.destroy$)).subscribe(\n      data => {\n        this.onSearchFilter(data)\n      }\n    )\n\n    this.ext_subterm_subject_subscription = this.ext_subterm_subject.pipe(debounceTime(1000), takeUntil(this.destroy$)).subscribe(\n      data => {\n        this.onChangeSubterm(data)\n      }\n    )\n\n    this.corresponds_subject_subscription = this.corresponds_subject.pipe(debounceTime(1000), takeUntil(this.destroy$)).subscribe(\n      data => {\n        this.onSearchFilter(data)\n      }\n    )\n\n    this.update_component_subject_subscription = this.update_component_subject.pipe(debounceTime(1000), takeUntil(this.destroy$)).subscribe(\n      data => {\n        this.onChanges(data)\n      }\n    )\n  }\n\n  triggerTooltip() {\n    setTimeout(() => {\n      //@ts-ignore\n      $('.vartrans-tooltip').tooltip({\n        trigger: 'hover'\n      });\n    }, 500);\n  }\n\n  async loadMorphologyData() {\n    try {\n      let get_morpho_data = await this.lexicalService.getMorphologyData().toPromise();\n      console.log(get_morpho_data)\n      this.morphologyData = get_morpho_data;\n    } catch (error) {\n      console.log(error);\n      if (error.status != 200) {\n        this.toastr.error(\"Error on getting morphology data, please check the log\", \"Error\", { timeOut: 5000 })\n      }\n    }\n  }\n\n  ngOnChanges(changes: SimpleChanges) {\n    setTimeout(() => {\n      if (this.object != changes.decData.currentValue) {\n        if (this.componentArray != null || this.subtermArray != null) {\n          if (this.componentArray != undefined) {\n            this.componentArray.clear();\n\n          }\n\n          if (this.subtermArray != undefined) {\n            this.subtermArray.clear();\n          }\n\n          this.subtermDisabled = false;\n          this.memorySubterm = [];\n          this.memoryComponent = [];\n          /* this.morphologyData = []; */\n          /* this.staticMorpho = []; */\n          this.valueTraits = [];\n          this.memoryValues = [];\n        }\n      }\n      /* this.loadPeople(); */\n      this.object = changes.decData.currentValue;\n      if (this.object != null) {\n        this.decompForm.get('label').setValue(this.object.label, { emitEvent: false });\n        if (this.object.lexicalEntryInstanceName != undefined && this.object.sense == undefined) {\n          let lexId = this.object.lexicaleEntryInstanceName;\n          this.getSubterms(lexId);\n          this.getConstituents(lexId);\n        }\n      }\n      this.triggerTooltip();\n    }, 10)\n  }\n\n  async getSubterms(lexId) {\n    try {\n      let get_subterms_req = await this.lexicalService.getSubTerms(this.object.lexicalEntryInstanceName).toPromise();\n      if (get_subterms_req != undefined) {\n        Array.from(get_subterms_req).forEach((element: any) => {\n          this.addSubterm(element.lexicalEntryInstanceName, element.label, element.language);\n          this.memorySubterm.push(element);\n        })\n      }\n    } catch (error) {\n      console.log(error);\n      if (error.status != 200) {\n        this.toastr.error(\"Something went wrong on get subterms, please check the log\", \"Error\", { timeOut: 5000 })\n      }\n    }\n  }\n\n  async getConstituents(lexId) {\n\n    try {\n      let get_constituents_req = await this.lexicalService.getConstituents(this.object.lexicalEntryInstanceName).toPromise();\n      for (const element of get_constituents_req) {\n        try {\n          let get_corresponds_to_req = await this.lexicalService.getCorrespondsTo(element.componentInstanceName).toPromise();\n          console.log(get_corresponds_to_req);\n          let corr;\n          if (get_corresponds_to_req != undefined) {\n            corr = get_corresponds_to_req.lexicalEntryInstanceName;\n          }\n          element.corresponds_to = corr;\n          this.addComponent(element, Array.from(get_corresponds_to_req).indexOf(element));\n        } catch (error) {\n\n        }\n      }\n\n    } catch (error) {\n      console.log(error);\n      if (error.status != 200) {\n        this.toastr.error(\"Something went wrong on getting costituents, please check the log\", \"Error\", { timeOut: 5000 })\n      }\n    }\n  }\n\n  async onChanges(data) {\n    let fieldType = '';\n    console.log(data)\n    if (data != undefined) {\n\n      let newValue = data.v.target.value;\n      let currentValue;\n      let index = data?.i;\n\n\n      let oldValue = '';\n      fieldType = data['f']\n      if (fieldType == 'note') {\n        oldValue = this.memoryComponent[index]['note'];\n      } else if (fieldType == 'label') {\n        oldValue = this.memoryComponent[index]['label'];\n      } else if (fieldType == 'confidence') {\n        oldValue = this.memoryComponent[index]['confidence'];\n      }\n\n      //this.biblioArray = this.bibliographyForm.get('bibliography') as FormArray;\n      let instanceName = this.memoryComponent[index].componentInstanceName;\n      let parameters;\n\n      if (oldValue == '' || oldValue == null) {\n        parameters = {\n          type: \"decomp\",\n          relation: fieldType,\n          value: newValue\n        }\n      } else {\n        parameters = {\n          type: \"decomp\",\n          relation: fieldType,\n          value: newValue,\n          currentValue: oldValue\n        }\n      }\n\n      if (fieldType == 'confidence' && oldValue == \"-1\") {\n        if (newValue == 'true') {\n          newValue = 0;\n        } else if (newValue == 'false') {\n          newValue = -1;\n        }\n        parameters = {\n          type: \"confidence\",\n          relation: fieldType,\n          value: newValue\n        }\n      } else if (fieldType == 'confidence' && oldValue != \"-1\") {\n        if (newValue == 'true') {\n          newValue = 0;\n        } else if (newValue == 'false') {\n          newValue = -1;\n        }\n        parameters = {\n          type: \"confidence\",\n          relation: fieldType,\n          value: newValue,\n          currentValue: oldValue\n        }\n      }\n      //console.log(this.componentArray.at(index))\n      console.log(parameters)\n\n      try {\n        let update_comp_req = await this.lexicalService.updateGenericRelation(instanceName, parameters).toPromise();\n        console.log(update_comp_req);\n        this.lexicalService.spinnerAction('off');\n        //this.lexicalService.updateLexCard(this.object);\n        this.toastr.success('Component updated', '', {\n          timeOut: 5000,\n        });\n\n        if (fieldType == 'note') {\n          this.memoryComponent[index]['note'] = newValue;\n        } else if (fieldType == 'label') {\n          this.memoryComponent[index]['label'] = newValue;\n        } else if (fieldType == 'confidence') {\n          this.memoryComponent[index]['confidence'] = newValue;\n        }\n      } catch (error) {\n        this.lexicalService.spinnerAction('off');\n        if (error.status == 200) {\n          this.toastr.success('Component item updated', '', {\n            timeOut: 5000,\n          });\n          if (fieldType == 'note') {\n            this.memoryComponent[index]['note'] = newValue;\n            (<FormArray>this.decompForm.controls['component']).at(index).get('note').setValue(newValue, { emitEvent: false });\n          } else if (fieldType == 'label') {\n            this.memoryComponent[index]['label'] = newValue;\n            (<FormArray>this.decompForm.controls['component']).at(index).get('label').setValue(newValue, { emitEvent: false });\n          } else if (fieldType == 'confidence') {\n            this.memoryComponent[index]['confidence'] = newValue;\n            (<FormArray>this.decompForm.controls['component']).at(index).get('confidence').setValue(newValue, { emitEvent: false });\n          }\n        } else {\n          this.toastr.error(error.error, 'Error', {\n            timeOut: 5000,\n          });\n        }\n      }\n    }\n  }\n\n\n\n  async onChangeValue(i, j) {\n    this.lexicalService.spinnerAction('on');\n    const control = (<FormArray>this.decompForm.controls['component']).at(i).get('relation') as FormArray;\n\n    const trait = control.at(j).get('trait').value;\n    const value = control.at(j).get('value').value;\n\n    if (trait != '' && value != '') {\n      let parameters;\n      if (this.memoryValues[i][j] == \"\") {\n        parameters = {\n          type: \"morphology\",\n          relation: trait,\n          value: value\n        }\n      }\n\n      let compId = this.memoryComponent[i].componentInstanceName;\n\n      if (this.memoryComponent[i].morphology[j] != trait && this.memoryComponent[i].morphology[j] != '') {\n        let delete_old_param = {\n          type: 'morphology',\n          relation: this.memoryComponent[i].morphology[j],\n          value: this.memoryValues[i][j][0]\n        }\n\n        parameters = {\n          type: \"morphology\",\n          relation: trait,\n          value: value,\n        };\n\n        try {\n          let delete_req = await this.lexicalService.deleteLinguisticRelation(compId, delete_old_param).toPromise();\n\n          try {\n            let change_morpho_value_req = await this.lexicalService.updateLinguisticRelation(compId, parameters).toPromise();\n            //console.log(data)\n            change_morpho_value_req['request'] = 0;\n            this.lexicalService.refreshAfterEdit(change_morpho_value_req);\n            this.lexicalService.spinnerAction('off');\n            this.lexicalService.refreshFilter({ request: true })\n            //this.lexicalService.updateLexCard(data)\n\n            this.memoryComponent[i].morphology[j] = trait\n            control.at(j).patchValue({ trait: trait, value: value })\n            this.disableAddTraits[i] = false;\n            setTimeout(() => {\n\n              let traitDescription = '';\n              this.morphologyData.filter(x => {\n                if (x.propertyId == trait) {\n                  x.propertyValues.filter(y => {\n                    if (y.valueId == value) {\n                      traitDescription = y.valueDescription;\n                      return true;\n                    } else {\n                      return false;\n                    }\n                  })\n                  return true;\n                } else {\n                  return false;\n                }\n              })\n\n              //@ts-ignore\n              $('.trait-tooltip').tooltip({\n                trigger: 'hover'\n              });\n\n\n            }, 1000);\n          } catch (error) {\n            this.lexicalService.refreshAfterEdit({ request: 0, label: this.object.label });\n            this.lexicalService.spinnerAction('off');\n            this.lexicalService.refreshFilter({ request: true })\n            //this.lexicalService.updateLexCard({ lastUpdate: error.error.text })\n\n            this.memoryComponent[i].morphology[j] = trait\n            control.at(j).patchValue({ trait: trait, value: value })\n            this.disableAddTraits[i] = false;\n            setTimeout(() => {\n\n              let traitDescription = '';\n              this.morphologyData.filter(x => {\n                if (x.propertyId == trait) {\n                  x.propertyValues.filter(y => {\n                    if (y.valueId == value) {\n                      traitDescription = y.valueDescription;\n                      return true;\n                    } else {\n                      return false;\n                    }\n                  })\n                  return true;\n                } else {\n                  return false;\n                }\n              })\n\n\n\n              //@ts-ignore\n              $('.trait-tooltip').tooltip({\n                trigger: 'hover'\n              });\n              if (typeof (error.error) != 'object') {\n                this.toastr.error(error.error, 'Error', {\n                  timeOut: 5000,\n                });\n              } else {\n                this.toastr.success('Morphotraits changed correctly for ' + compId, '', {\n                  timeOut: 5000,\n                });\n              }\n\n            }, 1000);\n          }\n\n        } catch (error) {\n          console.log(error);\n          if(error.status != 200){\n            this.toastr.error(\"Something went wrong on updating components, please check the log\", \"Error\", {timeOut : 5000})\n          }\n        }\n\n      } else if (this.memoryComponent[i].morphology[j] == trait && this.memoryComponent[i].morphology[j] != '') {\n        parameters = {\n          type: \"morphology\",\n          relation: trait,\n          value: value,\n          currentValue: this.memoryValues[i][j][0]\n        }\n        try {\n          let change_morpho_value_req = await this.lexicalService.updateLinguisticRelation(compId, parameters).toPromise();\n          change_morpho_value_req['request'] = 0;\n          this.lexicalService.refreshAfterEdit(change_morpho_value_req);\n          this.lexicalService.spinnerAction('off');\n          this.lexicalService.refreshFilter({ request: true })\n          //this.lexicalService.updateLexCard(data)\n\n          this.memoryComponent[i].morphology[j] = trait\n          control.at(j).patchValue({ trait: trait, value: value })\n          this.disableAddTraits[i] = false;\n          setTimeout(() => {\n\n            let traitDescription = '';\n            this.morphologyData.filter(x => {\n              if (x.propertyId == trait) {\n                x.propertyValues.filter(y => {\n                  if (y.valueId == value) {\n                    traitDescription = y.valueDescription;\n                    return true;\n                  } else {\n                    return false;\n                  }\n                })\n                return true;\n              } else {\n                return false;\n              }\n            })\n\n            //@ts-ignore\n            $('.trait-tooltip').tooltip({\n              trigger: 'hover'\n            });\n\n\n          }, 1000);\n        } catch (error) {\n          console.log(error)\n          if(error.status == 200){\n            this.lexicalService.refreshAfterEdit({ request: 0, label: this.object.label });\n            this.lexicalService.spinnerAction('off');\n            this.lexicalService.refreshFilter({ request: true })\n            //this.lexicalService.updateLexCard({ lastUpdate: error.error.text })\n\n            this.memoryComponent[i].morphology[j] = trait\n            control.at(j).patchValue({ trait: trait, value: value })\n            this.disableAddTraits[i] = false;\n            setTimeout(() => {\n\n              let traitDescription = '';\n              this.morphologyData.filter(x => {\n                if (x.propertyId == trait) {\n                  x.propertyValues.filter(y => {\n                    if (y.valueId == value) {\n                      traitDescription = y.valueDescription;\n                      return true;\n                    } else {\n                      return false;\n                    }\n                  })\n                  return true;\n                } else {\n                  return false;\n                }\n              })\n\n\n\n              //@ts-ignore\n              $('.trait-tooltip').tooltip({\n                trigger: 'hover'\n              });\n              if (typeof (error.error) != 'object') {\n                this.toastr.error(error.error, 'Error', {\n                  timeOut: 5000,\n                });\n              } else {\n                this.toastr.success('Morphotraits changed correctly for ' + compId, '', {\n                  timeOut: 5000,\n                });\n              }\n\n            }, 1000);\n          }else{\n            this.toastr.error(\"Error on updating components, please check the log\", \"Error\", {timeOut : 5000})\n          }\n        }\n        \n\n      } else if (this.memoryComponent[i].morphology[j] == '') {\n        console.log(parameters)\n\n        try {\n          let update_comp_req = await this.lexicalService.updateLinguisticRelation(compId, parameters).toPromise();\n          update_comp_req['request'] = 0;\n          this.lexicalService.refreshAfterEdit(update_comp_req);\n          this.lexicalService.spinnerAction('off');\n          this.lexicalService.refreshFilter({ request: true })\n          //this.lexicalService.updateLexCard(data)\n\n          this.memoryComponent[i].morphology[j] = trait\n          control.at(j).patchValue({ trait: trait, value: value })\n          this.disableAddTraits[i] = false;\n          setTimeout(() => {\n\n            let traitDescription = '';\n            this.morphologyData.filter(x => {\n              if (x.propertyId == trait) {\n                x.propertyValues.filter(y => {\n                  if (y.valueId == value) {\n                    traitDescription = y.valueDescription;\n                    return true;\n                  } else {\n                    return false;\n                  }\n                })\n                return true;\n              } else {\n                return false;\n              }\n            })\n\n            //@ts-ignore\n            $('.trait-tooltip').tooltip({\n              trigger: 'hover'\n            });\n\n\n          }, 1000);\n        } catch (error) {\n          if(error.status == 200){\n            this.lexicalService.refreshAfterEdit({ request: 0, label: this.object.label });\n            this.lexicalService.spinnerAction('off');\n            this.lexicalService.refreshFilter({ request: true })\n            //this.lexicalService.updateLexCard({ lastUpdate: error.error.text })\n\n            this.memoryComponent[i].morphology[j] = trait\n            control.at(j).patchValue({ trait: trait, value: value })\n            this.disableAddTraits[i] = false;\n            setTimeout(() => {\n\n              let traitDescription = '';\n              this.morphologyData.filter(x => {\n                if (x.propertyId == trait) {\n                  x.propertyValues.filter(y => {\n                    if (y.valueId == value) {\n                      traitDescription = y.valueDescription;\n                      return true;\n                    } else {\n                      return false;\n                    }\n                  })\n                  return true;\n                } else {\n                  return false;\n                }\n              })\n\n\n\n              //@ts-ignore\n              $('.trait-tooltip').tooltip({\n                trigger: 'hover'\n              });\n              if (typeof (error.error) != 'object') {\n                this.toastr.error(error.error, 'Error', {\n                  timeOut: 5000,\n                });\n              } else {\n                this.toastr.success('Morphotraits changed correctly for ' + compId, '', {\n                  timeOut: 5000,\n                });\n              }\n\n            }, 1000);\n          }else{\n            this.toastr.error(\"Error on updating components, please check the log\", \"Error\", {timeOut : 5000})\n          }\n        }\n        \n      }\n    } else {\n      this.lexicalService.spinnerAction('off');\n      this.disableAddTraits[i] = false;\n    }\n  }\n\n  onChangeTrait(evt, i, j) {\n\n    if (evt.target != undefined) {\n      setTimeout(() => {\n        const control = (<FormArray>this.decompForm.controls['component']).at(i).get('relation') as FormArray;\n        //const trait = control.at(j).get('trait').value;\n        //const value = control.at(j).get('value').value;\n        //this.componentArray = this.decompForm.get('component') as FormArray;\n        control.at(j).patchValue({ trait: evt.target.value, value: \"\" });\n        if (evt.target.value != '') {\n          let arrayValues = this.morphologyData.filter(x => {\n            return x['propertyId'] == evt.target.value;\n          })['0']['propertyValues'];\n          this.valueTraits[i][j] = arrayValues;\n          //this.memoryComponent[i].morphology[j] = evt.target.value;\n          //this.memoryValues[i][j] = \"\";\n        } else {\n          this.memoryValues.splice(i, 1);\n          let arrayValues = [];\n          this.valueTraits[i][j] = arrayValues\n          this.memoryComponent[i]['morphology'][j].splice(j, 1)\n        }\n      }, 500);\n    } else {\n\n      var that = this;\n      var timer = setInterval((val) => {\n\n        try {\n          var arrayValues = this.morphologyData.filter(x => {\n            return x['propertyId'] == evt;\n          })['0']['propertyValues'];\n          this.valueTraits[i][j] = arrayValues;\n          this.memoryComponent[i].morphology[j].push(evt);\n          clearInterval(timer)\n        } catch (e) {\n          console.log(e)\n        }\n\n\n      }, 500)\n\n    }\n  }\n\n  addSubterm(e?, label?, lang?) {\n    this.subtermArray = this.decompForm.get('subterm') as FormArray;\n\n    if (e != undefined) {\n      this.subtermArray.push(this.createSubtermComponent(e, label, lang));\n      this.subtermDisabled = false;\n    } else {\n      this.subtermArray.push(this.createSubtermComponent());\n      this.subtermDisabled = true;\n    }\n\n\n  }\n\n  async addComponent(element?, index?) {\n\n    if (this.object.lexicalEntryInstanceName != undefined && element == undefined) {\n      let instance = this.object.lexicalEntryInstanceName;\n      this.object['request'] = 'constituent';\n\n      try{\n        let create_comp_req = await this.lexicalService.createComponent(instance).toPromise();\n        console.log(create_comp_req)\n\n        let compId = create_comp_req.componentInstanceName;\n        let componentURI = create_comp_req.component;\n        let creator = create_comp_req.creator;\n        let label = '';\n        let creationDate = create_comp_req.creationDate;\n        let lastUpdate = create_comp_req.lastUpdate;\n        let morphology = create_comp_req.morphology;\n        let note = '';\n        let position = create_comp_req.position;\n\n        let confidence = create_comp_req.confidence;\n\n        this.lexicalService.addSubElementRequest({ 'lex': this.object, 'data': create_comp_req });\n\n        this.componentArray = this.decompForm.get('component') as FormArray;\n        this.componentArray.push(this.createComponent(compId, componentURI, confidence, creator, label, creationDate, lastUpdate, [], note, position));\n\n        create_comp_req['morphology'] = [];\n        this.memoryComponent.push(create_comp_req)\n\n        this.toastr.success('Component created correctly', 'Success', {\n          timeOut: 5000\n        })\n      }catch(error){\n        console.log(error);\n\n        if(error.status != 200){\n          this.toastr.error('Something went wrong', 'Error', {\n            timeOut: 5000\n          })\n        }\n        \n      }\n    } else if (element != undefined) {\n      let compId = element.componentInstanceName;\n      let componentURI = element.component;\n      let creator = element.creator;\n      let label = element.label;\n      let creationDate = element.creationDate;\n      let lastUpdate = element.lastUpdate;\n      let note = element.note;\n      let position = element.position;\n      let corr_to = element.corresponds_to;\n      let confidence = element.confidence;\n\n      this.componentArray = this.decompForm.get('component') as FormArray;\n      this.componentArray.push(this.createComponent(compId, componentURI, confidence, creator, label, creationDate, lastUpdate, [], note, position, corr_to));\n\n      let morphology = element.morphology;\n      element.morphology = [];\n\n      this.memoryComponent.push(element)\n\n      if (morphology.length > 0) {\n        this.addRelation(index, morphology);\n      }\n\n\n    }\n  }\n\n  async removeComponent(index) {\n    this.componentArray = this.decompForm.get('component') as FormArray;\n    const control = this.componentArray.at(index);\n\n    if (control != null) {\n      let idComp = control.get('id').value;\n\n      try {\n        let delete_comp_req = await this.lexicalService.deleteComponent(idComp).toPromise();\n        console.log(delete_comp_req)\n        this.lexicalService.deleteRequest({ componentInstanceName: idComp });\n        this.toastr.info('Component ' + idComp + ' deleted', 'Info', {\n          timeOut: 5000\n        })\n      } catch (error) {\n        if(error.status != 200){\n          console.log(error);\n          this.lexicalService.deleteRequest({ componentInstanceName: idComp });\n          this.toastr.error('Something went wrong, please check the log', 'Error', {\n            timeOut: 5000\n          })\n        }\n      }\n    }\n\n\n\n    this.memoryComponent.splice(index, 1)\n    this.componentArray.removeAt(index);\n  }\n\n  addRelation(index, morphologyArray?) {\n\n    if (morphologyArray == undefined) {\n      this.memoryComponent[index].morphology.push('');\n\n      if (this.valueTraits[index] == undefined) {\n        this.valueTraits[index] = [];\n        this.valueTraits[index].push([])\n      } else {\n        this.valueTraits[index].push([])\n      }\n\n      if (this.memoryValues[index] == undefined) {\n        this.memoryValues[index] = [];\n        this.memoryValues[index].push([]);\n      } else {\n        this.memoryValues[index].push([]);\n      }\n\n      if (this.disableAddTraits[index] == undefined) {\n        this.disableAddTraits[index] = true;\n      } else {\n        this.disableAddTraits[index] = true;\n      }\n\n\n      const control = (<FormArray>this.decompForm.controls['component']).at(index).get('relation') as FormArray;\n      control.push(this.createRelation());\n    } else {\n\n      morphologyArray.forEach(element => {\n        this.memoryComponent[index].morphology.push(element.trait);\n\n        if (this.valueTraits[index] == undefined) {\n          this.valueTraits[index] = [];\n          var timer1 = setInterval((val) => {\n\n            try {\n              var arrayValues = this.morphologyData.filter(x => {\n                return x['propertyId'] == element.trait;\n              })['0']['propertyValues'];\n              this.valueTraits[index].push(arrayValues);\n              clearInterval(timer1)\n            } catch (e) {\n              console.log(e)\n            }\n\n\n          }, 500)\n\n\n\n\n        } else {\n          var timer2 = setInterval((val) => {\n\n            try {\n              var arrayValues = this.morphologyData.filter(x => {\n                return x['propertyId'] == element.trait;\n              })['0']['propertyValues'];\n              this.valueTraits[index].push(arrayValues);\n              clearInterval(timer2)\n            } catch (e) {\n              console.log(e)\n            }\n\n\n          }, 500)\n\n        }\n\n        if (this.memoryValues[index] == undefined) {\n          this.memoryValues[index] = [];\n          this.memoryValues[index].push([element.value]);\n        } else {\n          this.memoryValues[index].push([element.value]);\n        }\n\n        if (this.disableAddTraits[index] == undefined) {\n          this.disableAddTraits[index] = false;\n        } else {\n          this.disableAddTraits[index] = false;\n        }\n\n\n        const control = (<FormArray>this.decompForm.controls['component']).at(index).get('relation') as FormArray;\n        control.push(this.createRelation(element.trait, element.value));\n      });\n\n    }\n\n\n\n\n  }\n\n  async removeRelation(ix, iy) {\n    const control = (<FormArray>this.decompForm.controls['component']).at(ix).get('relation') as FormArray;\n    const trait = control.at(iy).get('trait').value;\n    const value = control.at(iy).get('value').value;\n    if (trait != '' && value != '') {\n\n      let compId = this.memoryComponent[ix].componentInstanceName;;\n\n      let parameters = {\n        type: 'morphology',\n        relation: trait,\n        value: value\n      }\n\n      //console.log(parameters)\n\n      try {\n        let delete_linguistic_rel_req = await this.lexicalService.deleteLinguisticRelation(compId, parameters);\n        this.lexicalService.refreshAfterEdit({ request: 0, label: this.object.label });\n        this.lexicalService.spinnerAction('off');\n        this.lexicalService.refreshFilter({ request: true })\n      } catch (error) {\n        if(error.status == 200){\n          this.lexicalService.refreshAfterEdit({ request: 0, label: this.object.label });\n          this.lexicalService.spinnerAction('off');\n          this.lexicalService.refreshFilter({ request: true })\n          //this.lexicalService.updateLexCard({ lastUpdate: error.error.text })\n          \n          this.toastr.success('Element removed correctly for ' + compId, '', {\n            timeOut: 5000,\n          });\n        }else{\n          this.toastr.error(error.error, 'Error', {\n            timeOut: 5000,\n          });\n        }\n      }\n      \n    } else {\n      this.disableAddTraits[ix] = false;\n    }\n\n\n    this.memoryComponent[ix].morphology.splice(iy, 1);\n    this.valueTraits[ix].splice(iy, 1);\n    this.memoryValues[ix].splice(iy, 1);\n    control.removeAt(iy);\n\n\n  }\n\n\n\n  triggerSubterm(evt) {\n    console.log(evt)\n    if (evt.target != undefined) {\n\n      this.subterm_subject.next(evt.target.value)\n    }\n  }\n\n  triggerCorrespondsTo(evt) {\n    console.log(evt)\n    if (evt.target != undefined) {\n\n      this.corresponds_subject.next(evt.target.value)\n    }\n  }\n\n  async removeSubterm(index) {\n\n\n    if (this.object.lexicalEntryInstanceName != undefined) {\n      this.subtermArray = this.decompForm.get('subterm') as FormArray;\n\n      let entity = this.subtermArray.at(index).get('entity').value;\n      let lexId = this.object.lexicalEntryInstanceName;\n\n      let parameters = {\n        relation: \"subterm\",\n        value: entity\n      }\n\n      try {\n        let delete_linguistic_rel_req = await this.lexicalService.deleteLinguisticRelation(lexId, parameters).toPromise();\n        console.log(delete_linguistic_rel_req);\n        this.toastr.info('Subterm removed correctly', 'Info', {\n          timeOut: 5000\n        })\n        this.lexicalService.deleteRequest({ subtermInstanceName: entity, parentNode: this.object.lexicaleEntryInstanceName });\n      } catch (error) {\n        console.log(error)\n        if(error.status == 200){\n          this.toastr.info('Subterm removed correctly', 'Info', {\n            timeOut: 5000\n          })\n          this.lexicalService.deleteRequest({ subtermInstanceName: entity, parentNode: this.object.lexicaleEntryInstanceName });\n        }else{\n          this.toastr.error(\"Something went wrong, please check the log\", \"Error\", {timeOut : 5000})\n        }\n      }\n      \n    }\n\n    this.subtermArray.removeAt(index);\n    this.memorySubterm.splice(index, 1);\n    this.subtermDisabled = false;\n  }\n\n  createRelation(t?, v?) {\n    if (t == undefined) {\n      return this.formBuilder.group({\n        trait: '',\n        value: ''\n      })\n    } else {\n      return this.formBuilder.group({\n        trait: t,\n        value: v\n      })\n    }\n\n  }\n\n  /* removeSubtermComponent(ix, iy) {\n    const control = (<FormArray>this.decompForm.controls['component']).at(ix).get('sub_term') as FormArray;\n    control.removeAt(iy);\n  } */\n\n  removeCorrespondsToComponent(ix, iy) {\n    const control = (<FormArray>this.decompForm.controls['component']).at(ix).get('corresponds_to') as FormArray;\n    control.removeAt(iy);\n  }\n\n  createComponent(compId?, componentURI?, confidence?, creator?, label?, creationDate?, lastUpdate?, morphology?, note?, position?, corr_to?) {\n    if (compId == undefined) {\n      return this.formBuilder.group({\n        id: new FormControl(''),\n        uri: new FormControl(''),\n        confidence: new FormControl(null),\n        creator: new FormControl(''),\n        label: new FormControl(''),\n        creationDate: new FormControl(''),\n        lastUpdate: new FormControl(''),\n        relation: new FormArray([]),\n        note: new FormControl(''),\n        corresponds_to: new FormControl(''),\n        position: new FormControl('')\n      })\n    } else {\n      return this.formBuilder.group({\n        id: new FormControl(compId),\n        uri: new FormControl(componentURI),\n        confidence: new FormControl(confidence),\n        creator: new FormControl(creator),\n        label: new FormControl(label),\n        creationDate: new FormControl(creationDate),\n        lastUpdate: new FormControl(lastUpdate),\n        relation: new FormArray([]),\n        note: new FormControl(note),\n        corresponds_to: new FormControl(corr_to),\n        position: new FormControl(position)\n      })\n    }\n\n  }\n\n  createSubtermComponent(e?, l?, lang?) {\n    if (e != undefined) {\n      return this.formBuilder.group({\n        entity: e,\n        label: l,\n        language: lang\n      })\n    } else {\n      return this.formBuilder.group({\n        entity: '',\n        label: '',\n        language: ''\n      })\n    }\n\n  }\n\n\n\n  handleSubterm(evt, i) {\n\n    if (evt instanceof NgSelectComponent) {\n      if (evt.selectedItems.length > 0) {\n        console.log(evt.selectedItems[0])\n        let label = evt.selectedItems[0]['value']['lexicalEntryInstanceName'];\n        this.onChangeSubterm({ name: label, i: i, object: evt.selectedItems[0]['value'] })\n      }\n    } else {\n      let label = evt.target.value;\n      this.ext_subterm_subject.next({ name: label, i: i })\n    }\n  }\n\n  handleCorrespondsTo(evt, i) {\n\n    if (evt instanceof NgSelectComponent) {\n      if (evt.selectedItems.length > 0) {\n        console.log(evt.selectedItems[0])\n        let label = evt.selectedItems[0]['value']['lexicalEntryInstanceName'];\n        this.onChangeCorrespondsTo({ name: label, i: i })\n      }\n    } /* else {\n        let label = evt.target.value;\n        this.Subterm_subject.next({ name: label, i: i })\n    } */\n  }\n\n  debounceKeyup(evt, index, field) {\n    this.update_component_subject.next({ v: evt, i: index, f: field })\n  }\n\n  async onChangeSubterm(data) {\n    var index = data['i'];\n    this.subtermArray = this.decompForm.get(\"subterm\") as FormArray;\n    if (this.memorySubterm[index] == undefined) {\n      const newValue = data['name']\n      const parameters = {\n        type: \"decomp\",\n        relation: \"subterm\",\n        value: newValue\n      }\n      console.log(parameters)\n\n      this.object['request'] = 'subterm'\n      let lexId = this.object.lexicalEntryInstanceName;\n\n      try {\n        let change_subterm_req = await this.lexicalService.updateLinguisticRelation(lexId, parameters).toPromise();\n        console.log(change_subterm_req);\n        this.lexicalService.spinnerAction('off');\n        /* data['request'] = 0;\n        this.lexicalService.refreshAfterEdit(data); */\n        //this.lexicalService.updateLexCard(data) TODO: inserire updater per decomp qua\n        this.memorySubterm[index] = change_subterm_req;\n\n        this.subtermArray.at(index).patchValue({ entity: change_subterm_req.object.label, label: change_subterm_req['label'], language: change_subterm_req['language'] })\n        this.subtermDisabled = false;\n\n        this.lexicalService.addSubElementRequest({ 'lex': this.object, 'data': change_subterm_req });\n      } catch (error) {\n        this.lexicalService.spinnerAction('off');\n        if (error.status == 200) {\n\n          this.toastr.success('Subterm changed correctly for ' + lexId, '', {\n            timeOut: 5000,\n          });\n\n          this.subtermDisabled = false;\n          this.memorySubterm[index] = this.object;\n          data['request'] = 'subterm';\n          this.subtermArray.at(index).patchValue({ entity: newValue, label: data.object.label, language: data.object.language })\n          this.lexicalService.addSubElementRequest({ 'lex': this.object, 'data': data['object'] });\n          //this.lexicalService.updateLexCard({ lastUpdate: error.error.text })\n\n        } else {\n          this.toastr.error(error.error, 'Error', {\n            timeOut: 5000,\n          });\n\n        }\n      }\n    \n    } else {\n      const oldValue = this.memorySubterm[index]['lexicalEntryInstanceName']\n      const newValue = data['name']\n      const parameters = {\n        type: \"decomp\",\n        relation: \"subterm\",\n        value: newValue,\n        currentValue: oldValue\n      }\n\n      let lexId = this.object.lexicalEntryInstanceName;\n      console.log(parameters);\n\n      try {\n        let change_subterm_req = await this.lexicalService.updateLinguisticRelation(lexId, parameters).toPromise();\n        console.log(change_subterm_req);\n        this.lexicalService.spinnerAction('off');\n        change_subterm_req['request'] = 0;\n        this.lexicalService.refreshAfterEdit(change_subterm_req);\n      } catch (error) {\n        console.log(error)\n        const data = this.object;\n        data['request'] = 0;\n\n\n        \n        this.lexicalService.spinnerAction('off');\n        if (error.status == 200) {\n          this.toastr.success('Label changed correctly for ' + lexId, '', {\n            timeOut: 5000,\n          });\n        } else {\n          this.toastr.error(error.error, 'Error', {\n            timeOut: 5000,\n          });\n        }\n      }\n\n     \n      this.memorySubterm[index] = data;\n    }\n\n\n  }\n\n\n  async onChangeCorrespondsTo(data) {\n    var index = data['i'];\n    this.subtermArray = this.decompForm.get(\"subterm\") as FormArray;\n    if (this.memoryComponent[index].corresponds_to == undefined) {\n      const newValue = data['name']\n      const parameters = {\n        type: \"decomp\",\n        relation: \"correspondsTo\",\n        value: newValue\n      }\n      console.log(parameters)\n      let compId = this.memoryComponent[index].componentInstanceName;\n\n      try {\n        let change_corr_req = this.lexicalService.updateLinguisticRelation(compId, parameters).toPromise();\n        console.log(change_corr_req);\n        this.lexicalService.spinnerAction('off');\n      } catch (error) {\n        this.lexicalService.spinnerAction('off');\n        if (error.status == 200) {\n          this.toastr.success('CorrespondsTo changed correctly for ' + compId, '', {\n            timeOut: 5000,\n          });\n\n        } else {\n          this.toastr.error(error.error, 'Error', {\n            timeOut: 5000,\n          });\n\n        }\n      }\n      \n      \n      this.memoryComponent[index].corresponds_to = data;\n\n\n    } else {\n      const oldValue = this.memoryComponent[index].corresponds_to\n      const newValue = data['name']\n      const parameters = {\n        type: \"decomp\",\n        relation: \"correspondsTo\",\n        value: newValue,\n        currentValue: oldValue\n      }\n\n      let compId = this.memoryComponent[index].componentInstanceName;\n      console.log(parameters)\n      try {\n        let change_corr_req = this.lexicalService.updateLinguisticRelation(compId, parameters).toPromise();\n        console.log(change_corr_req);\n        this.lexicalService.spinnerAction('off');\n      } catch (error) {\n        this.lexicalService.spinnerAction('off');\n        if (error.status == 200) {\n          this.toastr.success('CorrespondsTo changed correctly for ' + compId, '', {\n            timeOut: 5000,\n          });\n\n        } else {\n          this.toastr.error(error.error, 'Error', {\n            timeOut: 5000,\n          });\n\n        }\n      }\n      this.memoryComponent[index].corresponds_to = data;\n    }\n\n\n  }\n\n  async onSearchFilter(data) {\n    this.searchResults = [];\n\n    if (this.object.lexicalEntryInstanceName != undefined) {\n      let parameters = {\n        text: data,\n        searchMode: \"startsWith\",\n        type: \"\",\n        pos: \"\",\n        formType: \"entry\",\n        author: \"\",\n        lang: \"\",\n        status: \"\",\n        offset: 0,\n        limit: 500\n      }\n\n      /* && data.length >= 3 */\n      try {\n        let search_filter_req = await this.lexicalService.getLexicalEntriesList(parameters).toPromise();\n        console.log(data)\n        this.searchResults = data['list'];\n      } catch (error) {\n        console.log(error)\n      }\n    } else {\n    }\n\n  }\n\n  deleteData() {\n    this.searchResults = [];\n  }\n\n  ngOnDestroy(): void {\n    this.change_decomp_label_subscription.unsubscribe();\n    this.subterm_subject_subscription.unsubscribe();\n    this.ext_subterm_subject_subscription.unsubscribe();\n    this.corresponds_subject_subscription.unsubscribe();\n    this.update_component_subject_subscription.unsubscribe();\n\n    this.destroy$.next(true);\n    this.destroy$.complete();\n  }\n}\n","\n\n<form [formGroup]=\"decompForm\" *ngIf=\"object!=null\">\n    <div class=\"form-group row ml-2 mt-3 mr-2\">\n        <label for=\"inputLabel\" class=\"col-xl-3 col-form-label\">Label:</label>\n        <div class=\"input-group col-xl-5\">\n            <input formControlName=\"label\" name=\"label\" type=\"text\" class=\"form-control\" placeholder=\"\" disabled>\n            <div class=\"input-group-append\">\n                <div class=\"input-group-append ml-2\">\n                    <div class=\"dropdown\">\n                        <button class=\"btn btn-outline-primary\" type=\"button\" id=\"dropdownMenuButton\" data-toggle=\"dropdown\" aria-haspopup=\"true\" aria-expanded=\"false\">\n                            <i class=\"fa fa-plus\"></i>\n                        </button>\n                        <div class=\"dropdown-menu\" aria-labelledby=\"dropdownMenuButton\">\n                          <!-- <a class=\"dropdown-item\" (click)=\"addSubterm()\" [class.disabled]=\"subtermDisabled\" style=\"cursor: pointer;\">Sub Term</a> -->\n                          <a class=\"dropdown-item\" (click)=\"addComponent()\" style=\"cursor: pointer;\">Component</a>\n                        </div>\n                      </div>\n                </div>\n            </div>\n        </div>\n    </div>\n\n    <!-- COMPONENT -->\n    <div formArrayName=\"component\">\n        <div *ngFor=\"let comp of decompForm['controls'].component['controls']; let i = index\">\n            <div [formGroupName]=\"i\">\n                <div class=\"form-group row ml-2 mt-3 mr-2\">\n                    <div class=\"input-group col-xl-12\">\n                        <div class=\"card\">\n                            <span class=\"text-id\"><b>COMPONENT</b></span>\n                            <!-- <a class=\"pointer\" (click)=\"addRelation(i)\"><span class=\"add-icon\"><i class=\"fa fa-plus-square\"></i></span></a> -->\n                            <a class=\"pointer\" (click)=\"removeComponent(i)\"><span class=\"trash-icon\"><i class=\"fa fa-trash\"></i></span></a>\n                            <div class=\"card-body\">\n\n                                <div class=\"form-group row ml-2 mt-3 mr-2\">\n                                    <label for=\"inputLabel\" class=\"col-lg-3 col-form-label\">Label:</label>\n                                    <div class=\"input-group col-lg-8\">\n                                        <input id=\"label\" (keyup)=\"debounceKeyup($event, i, 'label')\" formControlName=\"label\" name=\"label\" type=\"text\" class=\"form-control\" placeholder=\"\"\n                                            required>\n                                        <!-- <div class=\"invalid-feedback\" *ngIf=\"emptyLabelFlag\" style=\"display: block;\">\n                                            Please, insert at least three characters.\n                                        </div> -->\n                                    </div>\n                                </div>\n\n                                <div class=\"form-group row ml-2 mr-2\">\n                                    <label for=\"inputLabel\" class=\"col-lg-3 col-form-label\">Note:</label>\n                                    <div class=\"input-group col-lg-8\">\n                                        <!-- <input id=\"note\"  formControlName=\"note\" name=\"note\" type=\"text\" class=\"form-control\" placeholder=\"\"> -->\n                                        <textarea (keyup)=\"debounceKeyup($event, i, 'note')\" formControlName=\"note\" name=\"note\" class=\"form-control\" style=\"resize: none;\"></textarea>\n                                    </div>\n                                </div>  \n\n                                <div class=\"form-group row ml-2 mt-3 mr-2\" *ngIf=\"{confidence : comp.get('confidence').value >= 0}; let variable\">\n                                    <div class=\"col-lg-3\">\n                                        <label for=\"uncertainBox\">Uncertain</label>\n                                    </div>\n                                    <div class=\"col-lg-3 input-group uncertain\">\n                                        <input formControlName=\"confidence\" name=\"confidence\" type=\"checkbox\" >\n                                        <!-- <input *ngIf=\"variable.confidence\" id=\"attributes\"  step=\"0.1\" formControlName=\"confidence\" name=\"confidence\" type=\"number\" min=\"0\" max=\"1\" class=\"form-control\" placeholder=\"No info\" [value]=\"coreForm.get('confidence').value\">\n                                        <button type=\"button\" class=\"btn btn-secondary btn-sm ml-2\" *ngIf=\"!variable.confidence\" (click)=\"variable.confidence = !variable.confidence\"><i class=\"fas fa-plus\"></i></button>\n                                        <button type=\"button\" class=\"btn btn-secondary btn-sm ml-2\" *ngIf=\"variable.confidence\" (click)=\"variable.confidence = !variable.confidence; applyUncertain()\"><i class=\"fas fa-minus\"></i></button> -->\n                                    </div>\n                                </div>\n\n                                <!-- CORRESPONDS TO -->\n                                <div class=\"form-group row ml-2 mt-3 mr-2\">\n                                    <label for=\"inputLabel\" class=\"col-lg-3 col-form-label\">Corresponds To:</label>\n                                    <div class=\"input-group col-lg-9\">\n                                        <ng-select #select_corresponds_to formControlName=\"corresponds_to\" name=\"corresponds_to\" [dropdownPosition]=\"'top'\"\n                                        (keyup)=\"triggerCorrespondsTo($event)\" (change)=\"handleCorrespondsTo(select_corresponds_to, i)\"\n                                        [items]=\"searchResults\" bindValue=\"label\" (focus)=\"deleteData()\" bindLabel=\"label\"\n                                        placeholder=\"Search lexical entry\" appendTo=\"body\">\n                                            <ng-template ng-option-tmp let-item=\"item\" let-search=\"searchTerm\">\n                                                <div>\n                                                    <span>{{item.label}} </span><span style=\"color: blue;\">@{{item.language}}</span>\n                                                </div>\n\n                                            </ng-template>\n                                        </ng-select>\n                                        <!-- <input formControlName=\"entity\" name=\"entity\" type=\"text\" class=\"form-control\" id=\"inputDenotes\" placeholder=\"Insert URI\" *ngIf=\"variable.switch\"> -->\n                                        <!-- <div class=\"input-group-append ml-3 form-check\">\n                                            <input class=\"form-check-input vartrans-tooltip\" type=\"checkbox\" (change)=\"variable.switch=!variable.switch\" data-toggle=\"tooltip\" data-placement=\"bottom\" data-trigger=\"hover\" title=\"Clicca per inserire un URI manualmente\">\n                                        </div> -->\n                                        <div class=\"input-group-append ml-2\">\n                                            <button class=\"btn btn-primary\" type=\"button\"><i\n                                                    class=\"fa fa-external-link-alt\"></i></button>\n                                        </div>\n                                        <!-- <div class=\"input-group-append ml-2\">\n                                            <button (click)=\"removeCorrespondsToComponent(i, j)\" class=\"btn btn-danger\" type=\"button\"><i class=\"fa fa-trash-alt\"></i></button>\n                                        </div> -->\n                                        <div class=\"input-group-append ml-2\">\n                                            <button (click)=\"addRelation(i)\" [ngClass]=\"{no_pointer: disableAddTraits[i]}\" class=\"btn btn-outline-primary\" type=\"button\">\n                                                <i class=\"fa fa-plus\"></i>\n                                            </button>\n                                        </div>\n                                    </div>\n                                </div>\n\n                              \n            \n                                <ng-container formArrayName=\"relation\"\n                                    *ngFor=\"let sub of comp['controls'].relation['controls']; let j = index\">\n                                    <div class=\"d-flex my-2\" *ngIf=\"j +1 > staticMorpho.length\">\n                                        <div class=\"col-md-4\" [formGroupName]=\"j\">\n                                            <select class=\"form-control selectTrait\" formControlName=\"trait\" name=\"trait\"\n                                                style=\"font-size: 12px;\" (change)=\"onChangeTrait($event, i, j)\">\n                                                <option value=\"\">Select a trait...</option>\n                                                <option *ngFor=\"let mt of morphologyData\"\n                                                    [selected]=\"sub.value['trait'] === mt.propertyId\"\n                                                    [disabled]=\"memoryComponent[i].morphology.indexOf(mt.propertyId) > -1 \">{{mt.propertyId}}</option>\n                                            </select>\n                                            <div class=\"invalid-feedback\" *ngIf=\"sub.get('trait').invalid\"\n                                                style=\"display: block;\">\n                                                Please, don't leave this field blank\n                                            </div>\n                                        </div>\n                                        <!-- {{valueTraits | json}} -->\n                                        <div class=\"input-group col-md-8\" [formGroupName]=\"j\">\n                                            <!-- {{valueTraits | json}} {{i}} {{j}} -->\n                                            <select class=\"form-control selectTrait\" formControlName=\"value\" name=\"value\"\n                                                style=\"font-size:12px;\" (change)=\"onChangeValue(i, j)\">\n                                                <option value=\"\">Select a value...</option>\n                                                <option *ngFor=\"let item of valueTraits[i][j];\" [attr.data-index]=\"j\"\n                                                    [selected]=\"sub.value['value'] === item.valueId\">{{item.valueId}}</option>\n                                            </select>\n                                            <div (click)=\"removeRelation(i, j)\" class=\"input-group-append ml-2\"> <button\n                                                    class=\"btn btn-danger\" type=\"button\"\n                                                    style=\"font-size: 12px; border-radius: .25rem;\"><i\n                                                        class=\"fa fa-trash-alt\"></i></button>\n                                            </div>\n                                            <div class=\"invalid-feedback\" *ngIf=\"sub.get('value').invalid\"\n                                                style=\"display: block;\">\n                                                Please, don't leave this field blank\n                                            </div>\n                                        </div>\n                                    </div>\n            \n                                </ng-container>\n                                \n                                <!-- <div formArrayName=\"relation\" class=\"col-xl-12\">\n                                    <div *ngFor=\"let sub of comp['controls'].relation['controls']; let j = index\">\n                                        <div [formGroupName]=\"j\" class=\"d-xl-flex\" style=\"align-items: center;\">\n                                            <div class=\"form-group row ml-2 mt-2 mr-2 w-100\">\n                                                <div class=\"col-xl-6\">\n                                                    <select class=\"form-control\" formControlName=\"trait\" name=\"trait\">\n                                                        <option>Trait...</option>\n                                                        <option>...</option>\n                                                    </select>\n                                                </div>\n                                                <div class=\"input-group col-xl-6\" *ngIf=\"{switch : false}; let variable\">\n                                                    <select class=\"form-control\" formControlName=\"value\" name=\"value\" style=\"border-top-right-radius: .25rem; border-bottom-right-radius: .25rem;\">\n                                                        <option>Relations...</option>\n                                                        <option>...</option>\n                                                    </select>\n                                                    <div class=\"input-group-append ml-2\">\n                                                        <button (click)=\"removeRelation(i, j)\" class=\"btn btn-danger\" type=\"button\"><i class=\"fa fa-trash-alt\"></i></button>\n                                                    </div>\n                                                </div>\n                                            </div>                                                 \n                                        </div>\n                                    </div>\n                                </div> -->\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n\n\n    <!-- SUB-TERM -->\n    \n        \n    <div class=\"form-group row ml-2 mt-3 mr-2\">\n        <div class=\"input-group col-xl-12\">\n            <div class=\"card\">\n                <span class=\"text-id\"><b>SUBTERM</b></span>\n                <a class=\"pointer\" (click)=\"addSubterm()\"><span class=\"add-icon\" [class.disabled]=\"subtermDisabled\"><i class=\"fa fa-plus-square\"></i></span></a>\n                <!-- <a class=\"pointer\" (click)=\"removeSubterm(i)\"><span class=\"trash-icon\"><i class=\"fa fa-trash\"></i></span></a> -->\n                <div class=\"card-body\">\n\n                    \n            \n                    <!-- SUB-TERM -->\n                    <div formArrayName=\"subterm\" class=\"col-xl-12\">\n                        <div *ngFor=\"let sub of decompForm['controls'].subterm['controls']; let i = index\">\n                            <div [formGroupName]=\"i\" class=\"d-xl-flex\" style=\"align-items: center;\">\n                                <div class=\"form-group row ml-2 mt-2 mr-2 w-100\">\n                                    <div class=\"input-group\" *ngIf=\"{switch : false}; let variable\">\n                                        <ng-select #select_subterm formControlName=\"label\" *ngIf=\"!variable.switch\" name=\"label\" [dropdownPosition]=\"'top'\"\n                                                (keyup)=\"triggerSubterm($event)\" (change)=\"handleSubterm(select_subterm, i)\"\n                                                [items]=\"searchResults\" bindValue=\"label\" (focus)=\"deleteData()\" bindLabel=\"label\"\n                                                placeholder=\"Search lexical entries\" appendTo=\"body\">\n                                                <ng-template ng-option-tmp let-item=\"item\" let-search=\"searchTerm\">\n                                                    <div>\n                                                        <span>{{item.label}} </span><span style=\"color: blue;\">@{{item.language}}</span>\n                                                    </div>\n\n                                                </ng-template>\n                                            </ng-select>\n                                        <input (keyup)=\"handleSubterm($event, i)\" formControlName=\"entity\" name=\"entity\" type=\"text\" class=\"form-control\" id=\"inputDenotes\" placeholder=\"Insert URI\" *ngIf=\"variable.switch\">\n                                        <div class=\"input-group-append ml-3 form-check\">\n                                            <input class=\"form-check-input vartrans-tooltip\" type=\"checkbox\" (change)=\"variable.switch=!variable.switch\" data-toggle=\"tooltip\" data-placement=\"bottom\" data-trigger=\"hover\" title=\"Clicca per inserire un URI manualmente\">\n                                        </div>\n                                        <!-- <div class=\"input-group-append ml-2\">\n                                            <button class=\"btn btn-primary\" type=\"button\"><i\n                                                    class=\"fa fa-external-link-alt\"></i></button>\n                                        </div> -->\n                                        <div class=\"input-group-append ml-2\">\n                                            <button (click)=\"removeSubterm(i)\" class=\"btn btn-danger\" type=\"button\"><i class=\"fa fa-trash-alt\"></i></button>\n                                        </div>\n                                       <!--  <div class=\"input-group-append ml-2\">\n                                            <button  class=\"btn btn-outline-primary invisible\" type=\"button\"><i class=\"fa fa-plus\"></i></button>\n                                        </div> -->\n                                    </div>\n                                </div>                                                  \n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n           \n    \n</form>","/*\n   Copyright 2021-2022  Istituto di Linguistica Computazionale \"A. Zampolli\", Consiglio Nazionale delle Ricerche, Pisa, Italy.\n \nThis file is part of EpiLexo.\n\nEpiLexo is free software: you can redistribute it and/or modify it under the terms of the GNU General Public License as published by the Free Software Foundation, either version 3 of the License, or (at your option) any later version.\n\nEpiLexo is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for more details.\n\nYou should have received a copy of the GNU General Public License along with EpiLexo. If not, see <https://www.gnu.org/licenses/>.\n*/\n\nimport { Component, OnInit } from '@angular/core';\n\n@Component({\n  selector: 'app-dictionary-tab',\n  templateUrl: './dictionary-tab.component.html',\n  styleUrls: ['./dictionary-tab.component.scss']\n})\nexport class DictionaryTabComponent implements OnInit {\n\n  constructor() { }\n\n  ngOnInit(): void {\n  }\n\n}\n","\n\n<div class=\"card container-fluid\">\n\t<div class=\"card-body row\">\n\t\t<div class=\"col-md-12 text-right\">\n            <a href=\"#\"><i class=\"fa fa-unlock fa-2x\"></i></a>\n\t\t</div>\n\t</div>\n\t<div class=\"row\">\n\t\t<div class=\"col-md-12 dictionary-body\">\n            <ul>\n                <li>Lorem ipsum dolor sit amet, consectetuer adipiscing elit.</li>\n                <li>Aliquam tincidunt mauris eu risus.</li>\n                <li>Vestibulum auctor dapibus neque.</li>\n                <li>Nunc dignissim risus id metus.</li>\n                <li>Cras ornare tristique elit.</li>\n                <li>Vivamus vestibulum ntulla nec ante.</li>\n                <li>Praesent placerat risus quis eros.</li>\n                <li>Fusce pellentesque suscipit nibh.</li>\n                <li>Integer vitae libero ac risus egestas placerat.</li>\n                <li>Vestibulum commodo felis quis tortor.</li>\n                <li>Ut aliquam sollicitudin leo.</li>\n                <li>Cras iaculis ultricies nulla.</li>\n                <li>Donec quis dui at dolor tempor interdum.</li>\n            </ul>\n\t\t</div>\n\t</div>\n</div>","/*\n   Copyright 2021-2022  Istituto di Linguistica Computazionale \"A. Zampolli\", Consiglio Nazionale delle Ricerche, Pisa, Italy.\n \nThis file is part of EpiLexo.\n\nEpiLexo is free software: you can redistribute it and/or modify it under the terms of the GNU General Public License as published by the Free Software Foundation, either version 3 of the License, or (at your option) any later version.\n\nEpiLexo is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for more details.\n\nYou should have received a copy of the GNU General Public License along with EpiLexo. If not, see <https://www.gnu.org/licenses/>.\n*/\n\nimport { BrowserModule } from '@angular/platform-browser';\nimport { APP_INITIALIZER, NgModule } from '@angular/core';\nimport { TreeModule } from '@circlon/angular-tree-component';\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\nimport { InfiniteScrollModule } from 'ngx-infinite-scroll';\nimport { AngularEditorModule } from '@kolkov/angular-editor'\nimport { NgSelectModule } from '@ng-select/ng-select';\nimport { ContextMenuModule } from 'ngx-contextmenu';\nimport { ToastrModule } from 'ngx-toastr';\nimport { initializer } from '../app/services/initializer/app-init';\nimport { KeycloakService, KeycloakAngularModule } from 'keycloak-angular';\n\n\n\n\nimport { AppRoutingModule } from './app-routing.module';\nimport { AppComponent } from './app.component';\nimport { NavbarComponent } from './components/navbar/navbar.component';\nimport { LexiconPageComponent } from './views/lexicon-page/lexicon-page.component';\nimport { LoginPageComponent } from './views/login-page/login-page.component';\nimport { PageNotFoundComponent } from './views/page-not-found/page-not-found.component';\nimport { HomePageComponent } from './views/home-page/home-page.component';\nimport { ProfilePageComponent } from './views/profile-page/profile-page.component';\nimport { LexiconPanelComponent } from './components/lexicon-panel/lexicon-panel.component';\nimport { NotePanelComponent } from './components/note-panel/note-panel.component';\nimport { LinkPanelComponent } from './components/link-panel/link-panel.component';\nimport { SearchPageComponent } from './views/search-page/search-page.component';\nimport { DataSearchFormComponent } from './components/data-search-form/data-search-form.component';\nimport { BrowserAnimationsModule } from '@angular/platform-browser/animations';\nimport { DocumentSystemTreeComponent } from './components/lexicon-panel/document-system-tree/document-system-tree.component';\nimport { TextTreeComponent } from './components/lexicon-panel/document-system-tree/text-tree/text-tree.component';\nimport { TextDetailComponent } from './components/lexicon-panel/text-detail/text-detail.component';\nimport { EpigraphyDetailComponent } from './components/lexicon-panel/text-detail/epigraphy-detail/epigraphy-detail.component';\nimport { EditDetailComponent } from './components/lexicon-panel/text-detail/edit-detail/edit-detail.component';\nimport { EpigraphyTabComponent } from './components/lexicon-panel/text-detail/epigraphy-detail/epigraphy-tab/epigraphy-tab.component';\nimport { DictionaryTabComponent } from './components/lexicon-panel/text-detail/edit-detail/dictionary-tab/dictionary-tab.component';\nimport { LexicalEntryTreeComponent } from './components/lexicon-panel/document-system-tree/lexical-entry-tree/lexical-entry-tree.component';\nimport { CoreTabComponent } from './components/lexicon-panel/text-detail/edit-detail/core-tab/core-tab.component';\nimport { VartransTabComponent } from './components/lexicon-panel/text-detail/edit-detail/vartrans-tab/vartrans-tab.component';\nimport { SynsemTabComponent } from './components/lexicon-panel/text-detail/edit-detail/synsem-tab/synsem-tab.component';\nimport { DecompositionTabComponent } from './components/lexicon-panel/text-detail/edit-detail/decomposition-tab/decomposition-tab.component';\nimport { ProfilesTableComponent } from './components/profiles-table/profiles-table.component';\nimport { HttpClientModule } from '@angular/common/http';\nimport { BibliographyPanelComponent } from './components/bibliography-panel/bibliography-panel.component';\nimport { AttestationPanelComponent } from './components/attestation-panel/attestation-panel.component';\nimport { LexicalEntryCoreFormComponent } from './components/lexicon-panel/text-detail/edit-detail/core-tab/lexical-entry-core-form/lexical-entry-core-form.component';\nimport { ModalModule } from 'ng-modal-lib';\nimport { SeeAlsoComponent } from './components/link-panel/see-also/see-also.component';\nimport { SameAsComponent } from './components/link-panel/same-as/same-as.component';\nimport { LexicalEntryVartransFormComponent } from './components/lexicon-panel/text-detail/edit-detail/vartrans-tab/lexical-entry-vartrans-form/lexical-entry-vartrans-form.component';\nimport { LexicalEntrySynsemFormComponent } from './components/lexicon-panel/text-detail/edit-detail/synsem-tab/lexical-entry-synsem-form/lexical-entry-synsem-form.component';\nimport { FormCoreFormComponent } from './components/lexicon-panel/text-detail/edit-detail/core-tab/form-core-form/form-core-form.component';\nimport { LexicalEntryDecompFormComponent } from './components/lexicon-panel/text-detail/edit-detail/decomposition-tab/lexical-entry-decomp-form/lexical-entry-decomp-form.component';\nimport { SenseCoreFormComponent } from './components/lexicon-panel/text-detail/edit-detail/core-tab/sense-core-form/sense-core-form.component';\nimport { SenseVartransFormComponent } from './components/lexicon-panel/text-detail/edit-detail/vartrans-tab/sense-vartrans-form/sense-vartrans-form.component';\nimport { LexicalConceptFormComponent } from './components/lexicon-panel/text-detail/edit-detail/core-tab/lexical-concept-form/lexical-concept-form.component';\nimport { LanguageManagerComponent } from './components/lexicon-panel/document-system-tree/language-manager/language-manager.component';\nimport { EtymologyTabComponent } from './components/lexicon-panel/text-detail/edit-detail/etymology-tab/etymology-tab.component';\nimport { EtymologyFormComponent } from './components/lexicon-panel/text-detail/edit-detail/etymology-tab/etymology-form/etymology-form.component';\nimport { MetadataPanelComponent } from './components/metadata-panel/metadata-panel.component';\nimport { EpigraphyFormComponent } from './components/lexicon-panel/text-detail/epigraphy-detail/epigraphy-tab/epigraphy-form/epigraphy-form.component';\nimport { NgbModule } from '@ng-bootstrap/ng-bootstrap';\nimport { SearchFormComponent } from './components/lexicon-panel/text-detail/epigraphy-detail/epigraphy-tab/epigraphy-form/search-form/search-form.component';\nimport { AuthService } from './services/auth/auth.service';;\nimport { UnauthorizedPageComponent } from './views/unauthorized-page/unauthorized-page/unauthorized-page.component';\n\nimport { ConceptSetCoreFormComponent } from './components/lexicon-panel/text-detail/edit-detail/core-tab/concept-set-core-form/concept-set-core-form.component';\n\nimport { FormPanelComponent } from './components/attestation-panel/form-panel/form-panel.component'\nimport { CognatePanelComponent } from './components/lexicon-panel/text-detail/edit-detail/core-tab/lexical-entry-core-form/cognate-panel/cognate-panel.component';;\nimport { SkosTreeComponent } from './components/lexicon-panel/document-system-tree/skos-tree/skos-tree.component';\n\n@NgModule({\n  declarations: [\n    AppComponent,\n    NavbarComponent,\n    LexiconPageComponent,\n    LoginPageComponent,\n    PageNotFoundComponent,\n    HomePageComponent,\n    ProfilePageComponent,\n    LexiconPanelComponent,\n    NotePanelComponent,\n    LinkPanelComponent,\n    SearchPageComponent,\n    DataSearchFormComponent,\n    DocumentSystemTreeComponent,\n    TextTreeComponent,\n    TextDetailComponent,\n    EpigraphyDetailComponent,\n    EditDetailComponent,\n    EpigraphyTabComponent,\n    DictionaryTabComponent,\n    LexicalEntryTreeComponent,\n    CoreTabComponent,\n    VartransTabComponent,\n    SynsemTabComponent,\n    DecompositionTabComponent,\n    ProfilesTableComponent,\n    BibliographyPanelComponent,\n    AttestationPanelComponent,\n    LexicalEntryCoreFormComponent,\n    SeeAlsoComponent,\n    SameAsComponent,\n    LexicalEntryVartransFormComponent,\n    LexicalEntrySynsemFormComponent,\n    FormCoreFormComponent,\n    LexicalEntryDecompFormComponent,\n    SenseCoreFormComponent,\n    SenseVartransFormComponent,\n    LexicalConceptFormComponent,\n    LanguageManagerComponent,\n    EtymologyTabComponent,\n    EtymologyFormComponent,\n    MetadataPanelComponent,\n    EpigraphyFormComponent,\n    SearchFormComponent,\n    UnauthorizedPageComponent ,\n    FormPanelComponent,\n    CognatePanelComponent,\n    SkosTreeComponent\n,\n    ConceptSetCoreFormComponent  ],\n  imports: [\n    ContextMenuModule.forRoot({useBootstrap4: true}),\n    BrowserModule,\n    BrowserAnimationsModule,\n    AppRoutingModule,\n    TreeModule,\n    InfiniteScrollModule,\n    HttpClientModule,\n    AngularEditorModule,\n    NgSelectModule,\n    ModalModule,\n    NgbModule,\n    FormsModule,\n    KeycloakAngularModule,\n    ReactiveFormsModule,\n    ToastrModule.forRoot()\n  ],\n  providers: [\n    { \n      provide: APP_INITIALIZER, \n      useFactory: initializer, \n      deps: [ KeycloakService ], \n      multi: true\n    },\n    AuthService\n  ],\n  bootstrap: [AppComponent]\n})\nexport class AppModule { }","/*\n   Copyright 2021-2022  Istituto di Linguistica Computazionale \"A. Zampolli\", Consiglio Nazionale delle Ricerche, Pisa, Italy.\n \nThis file is part of EpiLexo.\n\nEpiLexo is free software: you can redistribute it and/or modify it under the terms of the GNU General Public License as published by the Free Software Foundation, either version 3 of the License, or (at your option) any later version.\n\nEpiLexo is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for more details.\n\nYou should have received a copy of the GNU General Public License along with EpiLexo. If not, see <https://www.gnu.org/licenses/>.\n*/\n\nimport { Component, Input, OnChanges, OnInit, SimpleChanges } from '@angular/core';\nimport { DocumentSystemService } from 'src/app/services/document-system/document-system.service';\n\n@Component({\n  selector: 'app-metadata-panel',\n  templateUrl: './metadata-panel.component.html',\n  styleUrls: ['./metadata-panel.component.scss']\n})\nexport class MetadataPanelComponent implements OnInit, OnChanges {\n\n  object : any;\n  @Input() metadataData: any;\n\n  constructor(private documentService : DocumentSystemService) { }\n\n  ngOnInit(): void {\n  }\n\n  ngOnChanges(changes: SimpleChanges) { \n    console.log(changes)\n    if(changes.metadataData.currentValue != null){\n      this.object = changes.metadataData.currentValue;\n\n      if(changes.metadataData.currentValue != this.object){\n        this.object = null;\n      }\n\n      this.object = changes.metadataData.currentValue;\n    }else{\n      this.object = null;\n      this.documentService.triggerMetadataPanel(false);\n    }\n    \n  }\n\n  isArray(val): boolean { return Array.isArray(val); }\n\n  isNumber(val): boolean { return typeof val == 'number'; }\n\n  isObject(val): boolean { return typeof val === 'object' && !Array.isArray(val); }\n\n  isLink(val) : boolean { \n    const re = /((http|https):\\/\\/)(([\\w.-]*)\\.([\\w]*))/;\n    return val.match(re); \n  }\n\n}\n","<div class=\"card\">\n    <div class=\"card-header\" id=\"metadataHeading\">\n        <h5 class=\"mb-0\">\n            <a class=\"btn btn-link w-100 d-flex align-self-center collapsed\" data-toggle=\"collapse\"\n                data-target=\"#metadataCollapse\" aria-expanded=\"true\" aria-controls=\"metadataCollapse\">\n                Metadata Panel<i class=\"fa ml-auto\"></i>\n            </a>\n        </h5>\n    </div>\n    <div id=\"metadataCollapse\" class=\"collapse\" aria-labelledby=\"metadataHeading\">\n        <div class=\"card-body\">\n            <ul class=\"nav nav-tabs\" id=\"myTab\" role=\"tablist\" *ngIf=\"object != null\">\n                <li class=\"nav-item\">\n                    <a class=\"nav-link active\" id=\"edition-tab\" data-toggle=\"tab\" href=\"#edition\" role=\"tab\"\n                        aria-controls=\"edition\" aria-selected=\"true\">Edition</a>\n                </li>\n                <li>\n                    <a class=\"nav-link\" id=\"epigraphy-tab\" data-toggle=\"tab\" href=\"#epigraphy_metadata\" role=\"tab\"\n                        aria-controls=\"epigraphy_metadata\" aria-selected=\"false\">Epigraphy</a>\n                </li>\n                <li>\n                    <a class=\"nav-link\" id=\"other-tab\" data-toggle=\"tab\" href=\"#other_metadata\" role=\"tab\"\n                        aria-controls=\"other_metadata\" aria-selected=\"false\">Text</a>\n                </li>\n            </ul>\n            <div class=\"tab-content\" id=\"myTabContent\" *ngIf=\"object != null\">\n                <div class=\"tab-pane fade show active\" id=\"edition\" role=\"tabpanel\" aria-labelledby=\"file-tab\">\n                    <div class=\"card epi_body\">\n                        <span class=\"text-id\">EDITION</span>\n\n                        <div class=\"card-body\">\n\n                            <div class=\"container\">\n                                <div class=\"row\" *ngIf=\"object.title != undefined || object?.title != ''\">\n                                    <div class=\"col-xl-4 col-lg-12 p-1\">\n                                        <b>Title:</b>\n                                    </div>\n                                    <div class=\"col-xl-8 col-lg-12 p-1\">\n                                        <span>{{object.title}}</span>\n                                    </div>\n                                </div>\n                                <div class=\"row\"\n                                    *ngIf=\"object['element-id'] != undefined || object['element-id'] != ''\">\n                                    <div class=\"col-xl-4 col-lg-12 p-1\">\n                                        <b>Id:</b>\n                                    </div>\n                                    <div class=\"col-xl-8 col-lg-12 p-1\">\n                                        <span>{{object['element-id']}}</span>\n                                    </div>\n                                </div>\n                                <div class=\"row\" *ngIf=\"object.editor != undefined || object?.editor != ''\">\n                                    <div class=\"col-xl-4 col-lg-12 p-1\">\n                                        <b>Editor:</b>\n                                    </div>\n                                    <div class=\"col-xl-8 col-lg-12 p-1\">\n                                        <span>{{object.editor}}</span>\n                                    </div>\n                                </div>\n                                <div class=\"row\" *ngIf=\"object.authority != undefined || object?.authority != ''\">\n                                    <div class=\"col-xl-4 col-lg-12 p-1\">\n                                        <b>Authority:</b>\n                                    </div>\n                                    <div class=\"col-xl-8 col-lg-12 p-1\">\n                                        <span>{{object.authority}}</span>\n                                    </div>\n                                </div>\n                                <div class=\"row\" *ngIf=\"object.license != undefined || object?.license != ''\">\n                                    <div class=\"col-xl-4 col-lg-12 p-1\">\n                                        <b>License:</b>\n                                    </div>\n                                    <div class=\"col-xl-8 col-lg-12 p-1\">\n                                        <div class=\"col-12 p-0\" *ngFor=\"let subprop of object.license | keyvalue\">\n                                            <a [href]=\"subprop?.value\" target=\"_blank\"\n                                                *ngIf=\"isLink(subprop?.value)\">{{subprop?.value}}</a>\n                                            <span *ngIf=\"!isLink(subprop?.value)\">{{subprop?.value}}</span>\n                                        </div>\n                                    </div>\n                                </div>\n                            </div>\n\n                        </div>\n                    </div>\n\n                </div>\n\n                <div class=\"tab-pane fade\" id=\"epigraphy_metadata\" role=\"tabpanel\" aria-labelledby=\"epigraphy-tab\">\n                    <div class=\"card epi_body\">\n                        <span class=\"text-id\">EPIGRAPHY</span>\n\n                        <div class=\"card-body\">\n\n\n                            <div class=\"container\">\n                                <div class=\"row\" *ngIf=\"object?.itAnt_ID != undefined && object?.itAnt_ID != ''\">\n                                    <div class=\"col-xl-4 col-lg-12 p-1\">\n                                        <b>ItAnt ID:</b>\n                                    </div>\n                                    <div class=\"col-xl-8 col-lg-12 p-1\">\n                                        <span>{{object.itAnt_ID}}</span>\n                                    </div>\n                                </div>\n\n                                <div class=\"row\"\n                                    *ngIf=\"object?.inscriptionTitle != undefined && object?.inscriptionTitle != ''\">\n                                    <div class=\"col-xl-4 col-lg-12 p-1\">\n                                        <b>Inscription Title:</b>\n                                    </div>\n                                    <div class=\"col-xl-8 col-lg-12 p-1\">\n                                        <span>{{object.inscriptionTitle}}</span>\n                                    </div>\n                                </div>\n                                <div class=\"row\"\n                                    *ngIf=\"object?.inscriptionType != undefined && object?.inscriptionType != ''\">\n                                    <div class=\"col-xl-4 col-lg-12 p-1\">\n                                        <b>Inscription Type:</b>\n                                    </div>\n                                    <div class=\"col-xl-8 col-lg-12 p-1\">\n                                        <span>{{object.inscriptionType}}</span>\n                                    </div>\n                                </div>\n                                <div class=\"row\" *ngIf=\"object?.summary != undefined && object?.summary != ''\">\n                                    <div class=\"col-xl-4 col-lg-12 p-1\">\n                                        <b>Summary:</b>\n                                    </div>\n                                    <div class=\"col-xl-8 col-lg-12 p-1\">\n                                        <span>{{object.summary}}</span>\n                                    </div>\n                                </div>\n                                <div class=\"row\" *ngIf=\"object?.trismegistos?.trismegistosID_url!= undefined\">\n                                    <div class=\"col-xl-4 col-lg-12 p-1\">\n                                        <b>Trismegistos ID:</b>\n                                    </div>\n                                    <div class=\"col-xl-8 col-lg-12 p-1\">\n                                        <a target=\"_blank\" [href]=\"'//'+object?.trismegistos?.trismegistosID_url\">\n                                            {{object?.trismegistos?.trismegistosID}}\n                                        </a>\n                                    </div>\n                                </div>\n                                <div class=\"row\"\n                                    *ngIf=\"object?.traditionalIDs != undefined && object?.traditionalIDs != ''\">\n                                    <div class=\"col-xl-4 col-lg-12 p-1\">\n                                        <b>Traditional IDs:</b>\n                                    </div>\n                                    <div class=\"col-xl-8 col-lg-12 p-1\" *ngIf=\"isArray(object?.traditionalIDs)\">\n                                        <p class=\"m-0\" *ngFor=\"let other_id of object.traditionalIDs\">\n                                            <a target=\"_blank\" [href]=\"other_id.traditionalID_URL\">\n                                                {{other_id.traditionalID}}\n                                            </a>\n                                        </p>\n                                    </div>\n                                    <div class=\"col-xl-8 col-lg-12 p-1\" *ngIf=\"isObject(object?.traditionalIDs)\">\n                                        <p class=\"m-0\" *ngFor=\"let sub of object?.traditionalIDs| keyvalue\">\n                                            <a target=\"_blank\" [href]=\"sub.traditionalID_URL\">\n                                                {{sub.traditionalID}}\n                                            </a>\n                                        </p>\n                                    </div>\n                                </div>\n                                <div class=\"row\"\n                                    *ngIf=\"object?.originalPlace != undefined && object?.originalPlace != ''\">\n                                    <div class=\"col-xl-4 col-lg-12 p-1\">\n                                        <b>Original Place:</b>\n                                    </div>\n                                    <div class=\"col-xl-8 col-lg-12 p-1\">\n                                        <a *ngIf=\"object?.originalPlace?.ancientNameUrl != ''\" target=\"_blank\"\n                                            [href]=\"object?.originalPlace?.ancientNameUrl\">\n                                            {{object?.originalPlace?.ancientName}}\n                                        </a>\n                                        <span *ngIf=\"object?.originalPlace?.ancientNameUrl == ''\">\n                                            {{object?.originalPlace?.ancientName}}\n                                        </span>\n                                    </div>\n                                </div>\n                                <div class=\"row\"\n                                    *ngIf=\"object?.support?.objectType_conceptUrl != undefined && object?.support?.objectType_conceptUrl != ''\">\n                                    <div class=\"col-xl-4 col-lg-12 p-1\">\n                                        <b>Original Type:</b>\n                                    </div>\n                                    <div class=\"col-xl-8 col-lg-12 p-1\">\n                                        <a *ngIf=\"object?.support?.objectType_conceptUrl != ''\" target=\"_blank\"\n                                            [href]=\"object?.support?.objectType_conceptUrl\">\n                                            {{object?.support?.objectType}}\n                                        </a>\n                                        <span\n                                            *ngIf=\"object?.support?.objectType_conceptUrl == ''\">{{object?.support?.objectType}}</span>\n                                    </div>\n                                </div>\n                                <div class=\"row\" *ngIf=\"object?.condition != undefined && object?.condition != ''\">\n                                    <div class=\"col-xl-4 col-lg-12 p-1\">\n                                        <b>Condition:</b>\n                                    </div>\n                                    <div class=\"col-xl-8 col-lg-12 p-1\">\n                                        <span>{{object.condition}}</span>\n                                    </div>\n                                </div>\n                                <div class=\"row\"\n                                    *ngIf=\"object?.conservationInstitution != undefined && object?.conservationInstitution != ''\">\n                                    <div class=\"col-xl-4 col-lg-12 p-1\">\n                                        <b>Conservation Institution:</b>\n                                    </div>\n                                    <div class=\"col-xl-8 col-lg-12 p-1\">\n                                        <a *ngIf=\"object?.conservationInstitution?.URL != ''\" target=\"_blank\"\n                                            [href]=\"object?.conservationInstitution?.URL\">\n                                            {{object?.conservationInstitution?.name}}</a>\n                                        <span *ngIf=\"object?.conservationInstitution?.URL == ''\">\n                                            {{object?.conservationInstitution?.name}}\n                                        </span>\n                                    </div>\n                                </div>\n\n                                <div class=\"row\"\n                                    *ngIf=\"object?.dateOfOrigin != undefined && object?.dateOfOrigin != ''\">\n                                    <div class=\"col-xl-4 col-lg-12 p-1\">\n                                        <b>Date of Origin:</b>\n                                    </div>\n                                    <div class=\"col-xl-8 col-lg-12 p-1\">\n                                        <span>{{object.dateOfOrigin}}</span>\n                                    </div>\n                                </div>\n\n                                <div class=\"row\"\n                                    *ngIf=\"object?.dateOfOriginNotBefore != undefined && object?.dateOfOriginNotBefore != ''\">\n                                    <div class=\"col-xl-4 col-lg-12 p-1\">\n                                        <b>Date of Origin not Before:</b>\n                                    </div>\n                                    <div class=\"col-xl-8 col-lg-12 p-1\">\n                                        <span>{{object.dateOfOriginNotBefore}}</span>\n                                    </div>\n                                </div>\n\n                                <div class=\"row\"\n                                    *ngIf=\"object?.dateOfOriginNotAfter != undefined && object?.dateOfOriginNotAfter != ''\">\n                                    <div class=\"col-xl-4 col-lg-12 p-1\">\n                                        <b>Date of Origin not After:</b>\n                                    </div>\n                                    <div class=\"col-xl-8 col-lg-12 p-1\">\n                                        <span>{{object.dateOfOriginNotAfter}}</span>\n                                    </div>\n                                </div>\n\n                                <div class=\"row\"\n                                    *ngIf=\"object?.datingCertainty != undefined && object?.datingCertainty != ''\">\n                                    <div class=\"col-xl-4 col-lg-12 p-1\">\n                                        <b>Dating Certainty:</b>\n                                    </div>\n                                    <div class=\"col-xl-8 col-lg-12 p-1\">\n                                        <span>{{object.datingCertainty}}</span>\n                                    </div>\n                                </div>\n\n\n                                <div class=\"row\" *ngIf=\"object?.decoration != undefined && object?.decoration != ''\">\n                                    <div class=\"col-xl-4 col-lg-12 p-1\">\n                                        <b>Decoration:</b>\n                                    </div>\n                                    <div class=\"col-xl-8 col-lg-12 p-1\">\n                                        <span>{{object.decoration}}</span>\n                                    </div>\n                                </div>\n\n                                <div class=\"row\"\n                                    *ngIf=\"object?.detailedFindSpot != undefined && object?.detailedFindSpot != ''\">\n                                    <div class=\"col-xl-4 col-lg-12 p-1\">\n                                        <b>Detailed Find Spot:</b>\n                                    </div>\n                                    <div class=\"col-xl-8 col-lg-12 p-1\">\n                                        <span>{{object.detailedFindSpot}}</span>\n                                    </div>\n                                </div>\n\n                                <div class=\"row\" *ngIf=\"object?.discoveryYear != undefined\">\n                                    <div class=\"col-xl-4 col-lg-12 p-1\">\n                                        <b>Discovery Year:</b>\n                                    </div>\n                                    <div class=\"col-xl-8 col-lg-12 p-1\">\n                                        <span *ngFor=\"let sub of object?.discoveryYear| keyvalue\">\n                                            <p *ngIf=\"sub?.value != ''\">\n                                                <span class=\"text-italic\">{{sub?.key}}:</span>\n                                                <span *ngIf=\"!isLink(sub?.value)\">{{sub?.value}}</span>\n                                                <a [href]=\"sub?.value\" target=\"_blank\"\n                                                    *ngIf=\"isLink(sub?.value)\">{{sub?.value}}</a>\n                                            </p>\n                                        </span>\n                                    </div>\n                                </div>\n\n                                <div class=\"row\" *ngIf=\"object?.layoutNotes != undefined && object?.layoutNotes != ''\">\n                                    <div class=\"col-xl-4 col-lg-12 p-1\">\n                                        <b>Layout Notes:</b>\n                                    </div>\n                                    <div class=\"col-xl-8 col-lg-12 p-1\">\n                                        <span>{{object.layoutNotes}}</span>\n                                    </div>\n                                </div>\n\n\n                                <div class=\"row\" *ngIf=\"object?.modernFindSpotName != undefined && \n                                                        object?.modernFindSpotName != ''\">\n                                    <div class=\"col-xl-4 col-lg-12 p-1\">\n                                        <b>Modern Findspot Name:</b>\n                                    </div>\n                                    <div class=\"col-xl-8 col-lg-12 p-1\">\n                                        <a *ngIf=\"object?.modernFindSpotName?.URL != ''\" target=\"_blank\"\n                                            [href]=\"object?.modernFindSpotNameUri\">\n                                            {{object?.modernFindSpotName}}</a>\n                                        <span *ngIf=\"object?.modernFindSpotName == ''\">\n                                            {{object?.modernFindSpotName?.name}}\n                                        </span>\n                                    </div>\n                                </div>\n\n                                <div class=\"row\"\n                                    *ngIf=\"object?.opistography != undefined && object?.opistography != ''\">\n                                    <div class=\"col-xl-4 col-lg-12 p-1\">\n                                        <b>Opistography:</b>\n                                    </div>\n                                    <div class=\"col-xl-8 col-lg-12 p-1\">\n                                        <span>{{object.opistography}}</span>\n                                    </div>\n                                </div>\n\n                                <div class=\"row\"\n                                    *ngIf=\"object?.paleographicNotes != undefined && object?.paleographicNotes != ''\">\n                                    <div class=\"col-xl-4 col-lg-12 p-1\">\n                                        <b>Paleographic Notes:</b>\n                                    </div>\n                                    <div class=\"col-xl-8 col-lg-12 p-1\">\n                                        <span>{{object.paleographicNotes}}</span>\n                                    </div>\n                                </div>\n\n                                <div class=\"row\" *ngIf=\"object?.settlement != undefined && object?.settlement != ''\">\n                                    <div class=\"col-xl-4 col-lg-12 p-1\">\n                                        <b>Settlement:</b>\n                                    </div>\n                                    <div class=\"col-xl-8 col-lg-12 p-1\">\n                                        <a *ngIf=\"object?.settlement?.placeOfConservationExternalReference != ''\"\n                                            target=\"_blank\"\n                                            [href]=\"object?.settlement?.placeOfConservationExternalReference\">\n                                            {{object?.settlement?.placeOfConservation}}</a>\n                                        <span *ngIf=\"object?.settlement?.placeOfConservationExternalReference == ''\">\n                                            {{object?.settlement?.placeOfConservation}}\n                                        </span>\n                                    </div>\n                                </div>\n\n                                <div class=\"row\"\n                                    *ngIf=\"object?.support?.material_conceptUrl != undefined && object?.support?.material_conceptUrl != ''\">\n                                    <div class=\"col-xl-4 col-lg-12 p-1\">\n                                        <b>Material:</b>\n                                    </div>\n                                    <div class=\"col-xl-8 col-lg-12 p-1\">\n                                        <a *ngIf=\"object?.support?.material_conceptUrl != ''\" target=\"_blank\"\n                                            [href]=\"object?.support?.material_conceptUrl\">\n                                            {{object?.support?.material}}</a>\n                                        <span *ngIf=\"object?.support?.material_conceptUrl == ''\">\n                                            {{object?.support?.material}}\n                                        </span>\n                                    </div>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n                <div class=\"tab-pane fade\" id=\"other_metadata\" role=\"tabpanel\" aria-labelledby=\"other-tab\">\n                    <div class=\"card epi_body\">\n                        <span class=\"text-id\">TEXT</span>\n                       \n                        <div class=\"card-body\">\n                           \n                            <div class=\"container\">\n                                <div class=\"row\" *ngIf=\"object?.autopsy != undefined && object?.autopsy != ''\">\n                                    <div class=\"col-xl-4 col-lg-12 p-1\">\n                                        <b>Autopsy:</b>\n                                    </div>\n                                    <div class=\"col-xl-8 col-lg-12 p-1\">\n                                        <span>{{object.autopsy}}</span>\n                                    </div>\n                                </div>\n\n                                <div class=\"row\"\n                                    *ngIf=\"object?.autopsyAuthor != undefined && object?.autopsyAuthor != ''\">\n                                    <div class=\"col-xl-4 col-lg-12 p-1\">\n                                        <b>Autopsy Author:</b>\n                                    </div>\n                                    <div class=\"col-xl-8 col-lg-12 p-1\">\n                                        <span>{{object.autopsyAuthor}}</span>\n                                    </div>\n                                </div>\n\n                                <div class=\"row\" *ngIf=\"object?.language != undefined\">\n                                    <div class=\"col-xl-4 col-lg-12 p-1\">\n                                        <b>Language:</b>\n                                    </div>\n                                    <div class=\"col-xl-8 col-lg-12 p-1\">\n                                        <span *ngFor=\"let sub of object?.language\">\n                                            <p *ngIf=\"sub?.source != ''\">\n                                                <a [href]=\"sub?.source\" target=\"_blank\"\n                                                    *ngIf=\"isLink(sub?.source)\">{{sub?.ident}}</a>\n                                            </p>\n                                        </span>\n                                    </div>\n                                </div>\n\n                                <div class=\"row\"\n                                    *ngIf=\"object?.bodytextpart?.ductus != undefined && object?.bodytextpart?.ductus != ''\">\n                                    <div class=\"col-xl-4 col-lg-12 p-1\">\n                                        <b>Ductus:</b>\n                                    </div>\n                                    <div class=\"col-xl-8 col-lg-12 p-1\">\n                                        <span>{{object.bodytextpart?.ductus}}</span>\n                                    </div>\n                                </div>\n\n                                <div class=\"row\"\n                                    *ngIf=\"object?.wordDivisionType != undefined && object?.wordDivisionType != ''\">\n                                    <div class=\"col-xl-4 col-lg-12 p-1\">\n                                        <b>Word Division Type:</b>\n                                    </div>\n                                    <div class=\"col-xl-8 col-lg-12 p-1\">\n                                        <span>{{object.wordDivisionType}}</span>\n                                    </div>\n                                </div>\n\n                                <div class=\"row\"\n                                    *ngIf=\"object?.writingSystem != undefined && object?.writingSystem != ''\">\n                                    <div class=\"col-xl-4 col-lg-12 p-1\">\n                                        <b>Writing System:</b>\n                                    </div>\n                                    <div class=\"col-xl-8 col-lg-12 p-1\">\n                                        <span>{{object.writingSystem}}</span>\n                                    </div>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n</div>","/*\n   Copyright 2021-2022  Istituto di Linguistica Computazionale \"A. Zampolli\", Consiglio Nazionale delle Ricerche, Pisa, Italy.\n \nThis file is part of EpiLexo.\n\nEpiLexo is free software: you can redistribute it and/or modify it under the terms of the GNU General Public License as published by the Free Software Foundation, either version 3 of the License, or (at your option) any later version.\n\nEpiLexo is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for more details.\n\nYou should have received a copy of the GNU General Public License along with EpiLexo. If not, see <https://www.gnu.org/licenses/>.\n*/\n\nimport { Component, ElementRef, OnDestroy, OnInit, ViewChild } from '@angular/core';\nimport { Subscription } from 'rxjs';\nimport { ExpanderService } from 'src/app/services/expander/expander.service';\nimport { LexicalEntriesService } from 'src/app/services/lexical-entries/lexical-entries.service';\n\n@Component({\n  selector: 'app-edit-detail',\n  templateUrl: './edit-detail.component.html',\n  styleUrls: ['./edit-detail.component.scss']\n})\nexport class EditDetailComponent implements OnInit, OnDestroy {\n\n  object : any;\n  showTrigger = false;\n  hideEtymology = true;\n  hideDecomp = true;\n  hideDictionary = true;\n  @ViewChild('navtabs') navtabs: ElementRef; \n  @ViewChild('navcontent') navcontent: ElementRef; \n\n  expand_edit_subscription : Subscription;\n  expand_epi_subscription : Subscription;\n  core_data_subscription : Subscription;\n  decomp_data_subscription : Subscription;\n  etymology_data_subscription : Subscription;\n\n  constructor(private lexicalService: LexicalEntriesService, private exp : ExpanderService) { }\n\n  ngOnInit(): void {\n    \n    this.object = null;\n    this.expand_edit_subscription = this.exp.openEdit$.subscribe(\n      boolean => {\n        if(boolean){\n          setTimeout(() => {\n            var text_detail = document.querySelectorAll('#text-dettaglio');\n            text_detail.forEach(element => {\n              if(!element.classList.contains('show')){\n                element.classList.add('show')\n              }\n            })\n            let a_link = document.querySelectorAll('a[data-target=\"#text-dettaglio\"]');\n            a_link.forEach(element => {\n              if(element.classList.contains(\"collapsed\")){\n                element.classList.remove('collapsed')\n              }else{\n                //element.classList.add('collapsed')\n              }\n            })\n           }, 100);\n        }\n      }\n    )\n\n    this.core_data_subscription = this.lexicalService.coreData$.subscribe(\n      object => {\n        if(object != null){\n          if(object['lexicalEntry'] != undefined ||\n             object['form'] != undefined ||\n             object['sense'] != undefined ||\n             object['etymology'] != undefined ||\n             object['conceptSet'] != undefined ||\n             object['lexicalConcept'] != undefined){\n               setTimeout(() => {\n                var navTabLinks = this.navtabs.nativeElement.querySelectorAll('a')\n                this.object = object;\n                navTabLinks.forEach(element => {\n                  /* //console.log(element) */\n                  if(element.text == 'Core'){\n                    element.classList.add('active');\n                    this.hideDecomp = true;\n                    this.hideEtymology = true;\n                  }else{\n                    element.classList.remove('active')\n                    //console.log(element.id)\n                  }\n                });\n    \n                \n    \n                var navContent = this.navcontent.nativeElement.querySelectorAll('.tab-pane');\n                \n                navContent.forEach(element => {\n                  \n                  if(element.id == 'core'){\n                    element.classList.add('active')\n                    element.classList.add('show')\n                    /* console.log(\"picchio\");\n                    console.log(element) */\n                  }else{\n                    \n                    element.classList.remove('active')\n                    element.classList.remove('show')\n                    /* console.log(\"picchio21\")\n                    console.log(element) */\n                  }\n                });\n               }, 100);\n            \n\n          }else {\n            this.object = null;\n          }\n        }\n      }\n    );\n    \n    this.decomp_data_subscription = this.lexicalService.decompData$.subscribe(\n      object => {\n        if(object != null){\n          setTimeout(() => {\n            var navTabLinks = this.navtabs.nativeElement.querySelectorAll('a')\n            this.object = object;\n            navTabLinks.forEach(element => {\n              /* //console.log(element) */\n              if(element.text == 'Decomposition'){\n                element.classList.add('active')\n                this.hideDecomp = false;\n                this.hideEtymology = true;\n              }else{\n                element.classList.remove('active')\n                //console.log(element.id)\n              }\n            });\n\n            \n\n            var navContent = this.navcontent.nativeElement.querySelectorAll('.tab-pane');\n            \n            navContent.forEach(element => {\n              \n              if(element.id == 'decomposition'){\n                element.classList.add('active')\n                element.classList.add('show')\n                /* console.log(\"picchio\");\n                console.log(element) */\n              }else{\n                \n                element.classList.remove('active')\n                element.classList.remove('show')\n                /* console.log(\"picchio21\")\n                console.log(element) */\n              }\n            });\n           }, 100);\n        }else{\n          this.object = null;\n        }\n      }\n    )\n    \n\n    this.etymology_data_subscription = this.lexicalService.etymologyData$.subscribe(\n      object => {\n        if(object != null){\n          if(object['etymology']['etymology'] != undefined){\n            this.object = object;\n            var navTabLinks = this.navtabs.nativeElement.querySelectorAll('a')\n            \n            navTabLinks.forEach(element => {\n              //console.log(element.text)\n              if(element.text == 'Etymology'){\n                /* console.log(\"aggiungo active a:\") */\n                element.classList.add('active');\n                this.hideEtymology = false;\n                this.hideDecomp = true;\n              }else{\n                element.classList.remove('active')\n                /* console.log(\"tolgo active a:\") */\n              }\n            });\n            var navContent = this.navcontent.nativeElement.querySelectorAll('.tab-pane');\n            \n            navContent.forEach(element => {\n              //console.log(element.id)\n              if(element.id == 'etymology'){\n                element.classList.add('active')\n                element.classList.add('show')\n              }else{\n                element.classList.remove('active')\n                element.classList.remove('show')\n                //console.log(element.id)\n              }\n            });\n            \n          }else {\n            this.object = null;\n          }\n        }\n      }\n    );\n  }\n\n  triggerExpansionEdit(){\n \n    setTimeout(() => {\n\n      if(this.exp.isEditTabOpen() && !this.exp.isEpigraphyTabOpen()){\n        if(this.exp.isEditTabExpanded() && !this.exp.isEpigraphyTabExpanded()){\n          this.exp.openCollapseEdit();\n          this.exp.expandCollapseEdit();\n        }\n      }else if(!this.exp.isEditTabOpen() && !this.exp.isEpigraphyTabOpen()){\n        if(!this.exp.isEditTabExpanded() && !this.exp.isEpigraphyTabExpanded()){\n          this.exp.openCollapseEdit();\n          this.exp.expandCollapseEdit();\n        }\n      }else if(this.exp.isEditTabOpen() && this.exp.isEpigraphyTabOpen()){\n        this.exp.openCollapseEdit();\n        this.exp.expandCollapseEpigraphy(true);\n      }else if(!this.exp.isEditTabOpen() && this.exp.isEpigraphyTabOpen()){\n        if(!this.exp.isEditTabExpanded() && this.exp.isEpigraphyTabExpanded()){\n          this.exp.expandCollapseEpigraphy(false);\n          this.exp.openCollapseEdit(true)\n        }\n        \n      }\n      \n    }, 200);\n  }\n\n  ngOnDestroy(): void {\n      this.core_data_subscription.unsubscribe();\n      //this.expand_epi_subscription.unsubscribe();\n      this.decomp_data_subscription.unsubscribe();\n      this.expand_edit_subscription.unsubscribe();\n      this.etymology_data_subscription.unsubscribe();\n  }\n\n}\n","\n\n<div class=\"card\">\n    <div class=\"card-header\">\n        <ul class=\"nav nav-tabs\" id=\"editDictTab\" role=\"tablist\" #navtabs [ngClass]=\"{'disabled': object === null}\">\n            <li class=\"nav-item\">\n                <a class=\"nav-link\" id=\"core-tab\" data-toggle=\"tab\" href=\"#core\" role=\"tab\" aria-controls=\"core\" aria-selected=\"true\">Core</a>\n            </li>\n            <!-- <li class=\"nav-item\">\n                <a class=\"nav-link\" id=\"vartrans-tab\" data-toggle=\"tab\" href=\"#vartrans\" role=\"tab\" aria-controls=\"vartrans\" aria-selected=\"true\">Vartrans</a>\n            </li>\n            <li class=\"nav-item\">\n                <a class=\"nav-link\" id=\"synsem-tab\" data-toggle=\"tab\" href=\"#synsem\" role=\"tab\" aria-controls=\"synsem\" aria-selected=\"true\">Synsem</a>\n            </li> -->\n            <li class=\"nav-item\" [hidden]=\"hideDecomp\">\n                <a class=\"nav-link\" id=\"decomposition-tab\" data-toggle=\"tab\" href=\"#decomposition\" role=\"tab\" aria-controls=\"decomposition\" aria-selected=\"true\">Decomposition</a>\n            </li>\n            <li class=\"nav-item\" [hidden]=\"hideEtymology\">\n                <a class=\"nav-link\" id=\"etymology-tab\" data-toggle=\"tab\" href=\"#etymology\" role=\"tab\" aria-controls=\"etymology\" aria-selected=\"true\">Etymology</a>\n            </li>\n            <li class=\"nav-item\" [hidden]=\"hideDictionary\">\n                <a class=\"nav-link\" id=\"dictionary-tab\" data-toggle=\"tab\" href=\"#dictionary\" role=\"tab\" aria-controls=\"dictionary\" aria-selected=\"false\">Dictionary</a>\n            </li>\n            <h5 class=\"ml-auto mb-0\">\n                <a class=\"btn btn-link w-100 d-flex align-self-center\" (click)=\"triggerExpansionEdit();\" data-toggle=\"collapse\" data-target=\"#text-dettaglio\" aria-expanded=\"false\" aria-controls=\"text-dettaglio\">\n                    <i class=\"fa ml-auto\"></i>\n                </a>\n            </h5>\n        </ul>\n        \n    </div>\n    <div id=\"text-dettaglio\" class=\"collapse show\" aria-labelledby=\"headingOne\" ><!--  data-parent=\"#epigraphy-accordion\" -->\n        <div class=\"card-body\">\n            <div class=\"tab-content\" id=\"tab-content\" #navcontent>\n                <div class=\"tab-pane fade\" id=\"core\" role=\"tabpanel\" aria-labelledby=\"core-tab\">\n                    <app-core-tab></app-core-tab>\n                </div>\n                <!-- <div class=\"tab-pane fade\" id=\"vartrans\" role=\"tabpanel\" aria-labelledby=\"vartrans-tab\">\n                    <app-vartrans-tab></app-vartrans-tab>\n                </div>\n                <div class=\"tab-pane fade\" id=\"synsem\" role=\"tabpanel\" aria-labelledby=\"synsem-tab\">\n                    <app-synsem-tab></app-synsem-tab>\n                </div> -->\n                <div class=\"tab-pane fade\" id=\"decomposition\" role=\"tabpanel\" aria-labelledby=\"decomposition-tab\">\n                    <app-decomposition-tab></app-decomposition-tab>\n                </div>\n                <div class=\"tab-pane fade\" id=\"etymology\" role=\"tabpanel\" aria-labelledby=\"etymology-tab\">\n                    <app-etymology-tab></app-etymology-tab>\n                </div>\n                <div class=\"tab-pane fade\" id=\"dictionary\" role=\"tabpanel\" aria-labelledby=\"dictionary-tab\">\n                    <app-dictionary-tab></app-dictionary-tab>\n                </div>\n            </div>\n        </div>\n    </div>\n   \n</div>","/*\n   Copyright 2021-2022  Istituto di Linguistica Computazionale \"A. Zampolli\", Consiglio Nazionale delle Ricerche, Pisa, Italy.\n \nThis file is part of EpiLexo.\n\nEpiLexo is free software: you can redistribute it and/or modify it under the terms of the GNU General Public License as published by the Free Software Foundation, either version 3 of the License, or (at your option) any later version.\n\nEpiLexo is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for more details.\n\nYou should have received a copy of the GNU General Public License along with EpiLexo. If not, see <https://www.gnu.org/licenses/>.\n*/\n\nimport { Injectable } from '@angular/core';\nimport { BehaviorSubject } from 'rxjs';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class ExpanderService {\n  \n  isEpigraphyExpanded = false;\n  isEditExpanded = false;\n\n  isEditOpen = false;\n  isEpigraphyOpen = false;\n\n  private _openEdit : BehaviorSubject<boolean> = new BehaviorSubject(null);\n  private _openEpigraphy : BehaviorSubject<boolean> = new BehaviorSubject(null);\n  private _expandEpigraphy: BehaviorSubject<boolean> = new BehaviorSubject(null);\n  private _expandEdit: BehaviorSubject<boolean> = new BehaviorSubject(null);\n  expEpigraphy$ = this._expandEpigraphy.asObservable();\n  expEdit$ = this._expandEdit.asObservable();\n  openEdit$ = this._openEdit.asObservable();\n  openEpigraphy$ = this._openEpigraphy.asObservable();\n\n  constructor() { }\n\n  expandCollapseEpigraphy(trigger?){\n    if(trigger != undefined){\n      this.isEpigraphyExpanded = trigger;\n      this._expandEpigraphy.next(this.isEpigraphyExpanded)\n    }else{\n      this.isEpigraphyExpanded = !this.isEpigraphyExpanded;\n      this._expandEpigraphy.next(this.isEpigraphyExpanded)\n    }\n  }\n  \n  expandCollapseEdit(trigger?){\n    if(trigger != undefined){\n      this.isEditExpanded = trigger;\n      this._expandEdit.next(this.isEditExpanded)\n    }else{\n      this.isEditExpanded = !this.isEditExpanded;\n      this._expandEdit.next(this.isEditExpanded)\n    }\n  }\n\n  openCollapseEdit(trigger?){\n    if(trigger != undefined){\n      this.isEditOpen = trigger;\n      this._openEdit.next(trigger);\n    }else{\n      this.isEditOpen = !this.isEditOpen\n      this._openEdit.next(this.isEditOpen);\n    }\n  }\n\n  openCollapseEpigraphy(trigger?){\n    if(trigger != undefined){\n      this.isEpigraphyOpen = trigger;\n      this._openEpigraphy.next(trigger)\n    }else{\n      this.isEpigraphyOpen = !this.isEpigraphyOpen\n      this._openEpigraphy.next(this.isEpigraphyOpen)\n    }\n  }\n\n  isEditTabExpanded(){\n    return this.isEditExpanded;\n  }\n\n  isEpigraphyTabExpanded(){\n    return this.isEpigraphyExpanded;\n  }\n\n  isEditTabOpen(){\n    return this.isEditOpen;\n  }\n\n  isEpigraphyTabOpen(){\n    return this.isEpigraphyOpen;\n  }\n\n}\n","/*\n   Copyright 2021-2022  Istituto di Linguistica Computazionale \"A. Zampolli\", Consiglio Nazionale delle Ricerche, Pisa, Italy.\n \nThis file is part of EpiLexo.\n\nEpiLexo is free software: you can redistribute it and/or modify it under the terms of the GNU General Public License as published by the Free Software Foundation, either version 3 of the License, or (at your option) any later version.\n\nEpiLexo is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for more details.\n\nYou should have received a copy of the GNU General Public License along with EpiLexo. If not, see <https://www.gnu.org/licenses/>.\n*/\n\nimport { AfterViewInit, ApplicationRef, Component, ComponentFactoryResolver, ComponentRef, ContentChild, ElementRef, HostListener, Injector, Input, OnDestroy, OnInit, QueryList, Renderer2, SimpleChanges, TemplateRef, ViewChild, ViewChildren } from '@angular/core';\nimport { FormGroup, FormControl, Validators, FormArray, FormBuilder } from '@angular/forms';\nimport { NavigationEnd, Router } from '@angular/router';\nimport { NgbPopover, NgbPopoverConfig } from '@ng-bootstrap/ng-bootstrap';\nimport { NgSelectComponent } from '@ng-select/ng-select';\nimport { ToastrService } from 'ngx-toastr';\nimport { Subject, Subscription } from 'rxjs';\nimport { debounceTime, filter, takeUntil } from 'rxjs/operators';\nimport { AnnotatorService } from 'src/app/services/annotator/annotator.service';\nimport { DocumentSystemService } from 'src/app/services/document-system/document-system.service';\nimport { ExpanderService } from 'src/app/services/expander/expander.service';\nimport { LexicalEntriesService } from 'src/app/services/lexical-entries/lexical-entries.service';\nimport { SearchFormComponent } from './search-form/search-form.component';\ndeclare var $: JQueryStatic;\n\n@Component({\n  selector: 'app-epigraphy-form',\n  templateUrl: './epigraphy-form.component.html',\n  styleUrls: ['./epigraphy-form.component.scss']\n})\nexport class EpigraphyFormComponent implements OnInit, OnDestroy {\n\n  @Input() epiData: any;\n  object: any;\n  tokenArray: FormArray;\n  textEpigraphy = '';\n  leidenLines: any;\n\n  epigraphy_text_subscription: Subscription;\n  leiden_subscription: Subscription;\n  translation_subscription: Subscription;\n  delete_annotation_subscription: Subscription;\n\n  private bind_subject: Subject<any> = new Subject();\n  searchResults = [];\n  memoryForms = [];\n\n  selectedPopover = {\n    htmlNodeName: '',\n    tokenId: ''\n  };\n\n  spanSelection;\n\n  data: object;\n  sel_t: object;\n  message: string;\n  isOpen = false;\n  bind = this;\n  @ViewChildren('span_modal') spanPopovers: QueryList<any>;\n  @ViewChild('search_form') searchForm: SearchFormComponent;\n\n  //@ViewChild('span_modal') spanPopover: ElementRef;\n\n\n\n  epigraphyForm = new FormGroup({\n    tokens: new FormArray([this.createToken()]),\n  })\n\n\n  multiWordMode = false;\n  annotationArray = [];\n  token_annotationArray = [];\n  epidoc_annotation_array = [];\n  leiden_array = [];\n  translation_array = [];\n\n  fileId;\n\n  isEmptyFile = false;\n\n  destroy$: Subject<boolean> = new Subject();\n\n  @HostListener('document:mouseup', ['$event'])\n  onMouseUp(event): void {\n    setTimeout(() => {\n      try {\n        let evtPath = Array.from(event.path);\n        let isMultiwordRequest = false;\n        evtPath.some((element: HTMLElement) => {\n          //console.log(element)\n          if (element.classList != undefined) {\n            if (element.classList.contains('ok-button')) {\n              isMultiwordRequest = true;\n              return true;\n            } else {\n              isMultiwordRequest\n              return false;\n            }\n          } else {\n            return false;\n          }\n        })\n\n\n        let event_el;\n\n        if (isMultiwordRequest) {\n          let multiWordArray = Array.from(document.getElementsByClassName('multiword'));\n          multiWordArray.forEach(element => {\n            let children = Array.from(element.children);\n            children.forEach(subchild => {\n              if (subchild.classList.contains('multiword-button')) {\n                event_el = element.children\n                subchild.remove();\n              }\n            })\n          });\n          document.querySelectorAll('.multiword').forEach(element => {\n            this.renderer.removeClass(element, 'multiword');\n            this.renderer.addClass(element, 'multiword-span-' + 1);\n\n            let prev = element.previousElementSibling;\n            let next = element.nextElementSibling;\n\n            if (prev != undefined) {\n              if (prev.classList != undefined) {\n                let classNames = prev.className;\n                let matchTest = /(^|\\s)(multiword-span-\\d)(\\s|$)/.test(classNames)\n                if (matchTest) {\n                  this.renderer.addClass(element, 'border-left-0')\n                }\n              }\n            } else if (next != undefined) {\n              if (next.classList != undefined) {\n                let classNames = next.className;\n                let matchTest = /(^|\\s)(multiword-span-\\d)(\\s|$)/.test(classNames)\n                if (matchTest) {\n                  this.renderer.addClass(element, 'border-right-0')\n                }\n              }\n            }\n          })\n\n          let position_popover;\n\n          Array.from(event_el).forEach(\n            (element: HTMLElement) => {\n              position_popover = element.getAttribute('position');\n              return;\n            }\n          )\n\n          this.message = '';\n\n          this.spanPopovers.toArray()[position_popover - 1].open();\n\n          let popover_id = this.spanPopovers.toArray()[position_popover - 1]._ngbPopoverWindowId;\n          this.selectedPopover.tokenId = (position_popover - 1).toString();\n          this.annotatorService.triggerSearch(null);\n          this.selectedPopover.htmlNodeName = popover_id;\n          let multiwordSpan = Array.from(document.querySelectorAll(\"[class*=multiword-span-]\"));\n          let spansArray = [];\n          multiwordSpan.forEach(element => {\n            let children = Array.from(element.children);\n            children.forEach(\n              span => {\n                let position = parseInt(span.getAttribute('position'));\n                let object = {\n                  start: this.object[position - 1].begin,\n                  end: this.object[position - 1].end\n                }\n\n                spansArray.push(object)\n              }\n            )\n          })\n\n          console.log(spansArray);\n          this.spanSelection = spansArray;\n\n\n        } else {\n          if (!this.multiWordMode) {\n\n            //console.log(document.querySelectorAll('.token'))\n            document.querySelectorAll('.multiword').forEach(element => {\n              this.renderer.removeClass(element, 'multiword')\n              this.renderer.removeClass(element, 'border-right-0');\n            });\n          }\n        }\n      } catch (error) {\n        console.log(error)\n      }\n\n    }, 10);\n  }\n\n  @HostListener('document:mousedown', ['$event'])\n  onGlobalClick(event): void {\n\n    setTimeout(() => {\n\n      //PREVENIRE CHE I POPOVER SI CHIUDANO SE CLICCATI FUORI DAL COMPONENTE\n      let index = this.selectedPopover.tokenId\n\n      //SE IL CLICK AVVIENE FUORI QUESTO COMPONENTE, L'EVENTUALE POPOVER DEVE RESTARE APERTO, \n      //SE SI CLICCA QUESTO COMPONENTE IL POPOVER VA CHIUSO E RIATTIVATO L'AUTOCLOSE\n      if (index != '') {\n        //console.log(this.config)\n        let popover = this.spanPopovers.toArray()[index];\n        /*  if (popover.isOpen()) {\n           //console.log(popover.isOpen())\n           //console.log(popover)\n           //popover.autoClose = false;\n         } */\n      }\n\n\n\n    }, 17);\n\n    setTimeout(() => {\n      /* console.log(event.path) */\n      try {\n        let evtPath = Array.from(event.path)\n        //console.log(this.selectedPopover.htmlNodeName)\n\n        let htmlNode = document.getElementById(this.selectedPopover.htmlNodeName)\n        console.log\n        let tokenId = this.selectedPopover.tokenId;\n        if (evtPath.includes(htmlNode)) {\n\n        } else {\n          if (this.object != null) {\n            this.object.forEach(element => {\n              //console.log(element.position != tokenId)\n              if (element.position != tokenId) {\n\n                element.editing = false;\n\n                this.selectedPopover.htmlNodeName = '';\n                this.selectedPopover.tokenId = ''\n              }\n            });\n          }\n\n\n          let parentMarkElement = document.getElementsByClassName('token-' + tokenId)[0];\n          //console.log(document.getElementsByClassName('token-'+tokenId))\n          if (parentMarkElement != null) {\n            let i = 0;\n            Array.from(parentMarkElement.childNodes).forEach(\n              element => {\n                //              console.log(element)\n                let textMarkElement = element.textContent;\n                let prev, next;\n                if (element['classList'] != undefined) {\n\n                  if (element['classList'].contains('mark') || element['classList'].contains('mark_test')) {\n\n                    prev = Array.from(parentMarkElement.childNodes)[i - 1];\n                    next = Array.from(parentMarkElement.childNodes)[i];\n\n                    if (next == element) {\n                      next = Array.from(parentMarkElement.childNodes)[i + 1];\n                    }\n\n                    if (prev != undefined) {\n                      if (prev.nodeName == '#text') {\n                        textMarkElement = prev.textContent += textMarkElement;\n                        prev.remove();\n                      }\n                    }\n\n                    if (next != undefined) {\n                      if (next.nodeName == '#text') {\n                        textMarkElement += next.textContent;\n                        next.remove()\n                      }\n                    }\n\n                    const text = this.renderer.createText(textMarkElement)\n\n                    this.renderer.insertBefore(parentMarkElement, text, element)\n                    //this.renderer.removeChild(parentMarkElement, element);\n\n                    element.remove();\n\n\n                  }\n                }\n\n                i++;\n              }\n            );\n\n          }\n\n        }\n      }\n      catch (e) {\n        console.log(e)\n      }\n\n    }, 17);\n\n  }\n\n\n\n  @HostListener('window:keydown', ['$event'])\n  enableMultiword(event: KeyboardEvent) {\n    /* console.log(event) */\n    if (event.altKey && event.ctrlKey) {\n      this.multiWordMode = true;\n      if (this.object != undefined) {\n        this.object.forEach(element => {\n          element.editing = false;\n          this.selectedPopover.htmlNodeName = '';\n          this.selectedPopover.tokenId = ''\n        });\n      }\n\n    } else if (event.code == 'Escape') {\n\n      let htmlNode = document.getElementById(this.selectedPopover.htmlNodeName)\n      let tokenId = this.selectedPopover.tokenId;\n\n      if (this.object != undefined) {\n        this.object.forEach(element => {\n          if (element.id != tokenId) {\n\n            element.editing = false;\n\n            this.selectedPopover.htmlNodeName = '';\n            this.selectedPopover.tokenId = ''\n          }\n        });\n\n        let parentMarkElement = document.getElementsByClassName('token-' + tokenId)[0];\n        if (parentMarkElement != null) {\n          let i = 0;\n          Array.from(parentMarkElement.children).forEach(\n            element => {\n              console.log(element)\n              if (element.classList.contains('mark')) {\n\n                let textMarkElement = element.textContent;\n                const text = this.renderer.createText(textMarkElement)\n                //parentMarkElement.textContent = parentMarkElement.textContent.trim();\n                //let innerText = parentMarkElement.textContent;\n                this.renderer.insertBefore(parentMarkElement, text, element)\n                this.renderer.removeChild(parentMarkElement, element);\n                //parentMarkElement.insertBefore(text, parentMarkElement.childNodes[i+1]);\n                //let children = parentMarkElement.children;\n                //parentMarkElement.textContent = innerText\n                i++;\n                return;\n              }\n              i++;\n            }\n          );\n\n        }\n      }\n\n\n\n\n    }\n  }\n\n  @HostListener('window:keyup', ['$event'])\n  disableMultiword(event: KeyboardEvent) {\n    if (!event.altKey && !event.ctrlKey) {\n      this.multiWordMode = false;\n    }\n  }\n\n  constructor(private router: Router, private annotatorService: AnnotatorService, private expander: ExpanderService, private renderer: Renderer2, private documentService: DocumentSystemService, private formBuilder: FormBuilder, private toastr: ToastrService, private lexicalService: LexicalEntriesService, private config: NgbPopoverConfig) {\n    /* this.router.events.pipe(filter(e => e instanceof NavigationEnd)).subscribe((val) => {\n      setTimeout(() => {\n        this.lexicalService.sendToCoreTab(null);\n        this.documentService.sendToEpigraphyTab(null)\n        this.documentService.sendTextToEpigraphyTab(null);\n        this.expander.openCollapseEdit(false);\n        this.expander.openCollapseEpigraphy(false);\n        this.expander.expandCollapseEpigraphy(false);\n        this.expander.expandCollapseEdit(false)\n      }, 1000);\n      \n    }) */\n  }\n\n\n  ngOnInit(): void {\n\n    /* this.config.autoClose = false */\n\n\n    this.epigraphyForm = this.formBuilder.group({\n      tokens: this.formBuilder.array([this.createToken()])\n    })\n\n    this.epigraphy_text_subscription = this.documentService.epigraphyTextData$.subscribe(\n      data => {\n        if (data != null) {\n          this.textEpigraphy = data;\n        } else {\n          this.textEpigraphy = '';\n        }\n      }, error => {\n        console.log(error)\n      }\n    )\n\n    this.leiden_subscription = this.documentService.epigraphyLeidenData$.subscribe(\n      data => {\n        console.log(data)\n        if (data != null) {\n          this.leidenLines = data;\n\n\n        } else {\n          this.leidenLines = [];\n        }\n      }, error => {\n        console.log(error)\n      }\n    )\n\n    this.translation_subscription = this.documentService.epigraphyTranslationData$.subscribe(\n      data => {\n        console.log(data)\n        if (data != null) {\n          this.translation_array = data;\n\n\n        } else {\n          this.translation_array = [];\n        }\n      }, error => {\n        console.log(error)\n      }\n    )\n\n\n\n    this.bind_subject.pipe(debounceTime(100), takeUntil(this.destroy$)).subscribe(\n      data => {\n        /* console.log(data) */\n        this.bindSelection(data.popover, data.evt, data.i);\n      }\n    )\n\n    this.delete_annotation_subscription = this.annotatorService.deleteAnnoReq$.subscribe(\n      data => {\n\n        let localArray = [];\n        if (data != null) {\n\n\n          this.annotationArray = this.annotationArray.filter(\n            element => {\n              return element.id != data.id\n            }\n          )\n          //console.log(this.annotationArray)\n\n          if (this.object != undefined) {\n            this.object.forEach(element => {\n              if (element.id == data.node_id) {\n                /* let position = element.position;\n  \n                let elementHTML = document.getElementsByClassName('token-'+(position-1))[0]\n                this.renderer.removeClass(elementHTML, 'annotation'); */\n\n                let start = element.begin;\n                let end = element.end;\n\n                this.annotationArray.forEach(element => {\n                  if (element.spans[0].start >= start && element.spans[0].end <= end) {\n                    localArray.push(element);\n                  }\n                })\n\n                console.log(localArray, localArray.length);\n\n                if (localArray.length == 0) {\n                  let position = element.position;\n                  let elementHTML = document.getElementsByClassName('token-' + (position - 1))[0]\n                  this.renderer.removeClass(elementHTML, 'annotation');\n                }\n              }\n            });\n          }\n\n        }\n      }\n    )\n\n  }\n\n\n  ngOnChanges(changes: SimpleChanges) {\n    setTimeout(() => {\n      if (changes.epiData.currentValue != null) {\n        if (this.object != changes.epiData.currentValue) {\n          this.tokenArray = this.epigraphyForm.get('tokens') as FormArray;\n          this.tokenArray.clear();\n          this.spanSelection = null;\n          this.annotationArray = [];\n          this.epidoc_annotation_array = [];\n        }\n\n        this.object = changes.epiData.currentValue['tokens'];\n        this.getAnnotations(changes);\n\n      } else {\n        this.object = null;\n      }\n\n\n\n    }, 10)\n\n  }\n\n  async getAnnotations(changes) {\n\n    let element_id = changes.epiData.currentValue['element_id']\n    this.fileId = changes.epiData.currentValue['epidoc_id']\n    let xmlDoc = changes.epiData.currentValue['xmlDoc']\n    console.log(this.object)\n\n    if (this.object.length == 0) {\n      this.isEmptyFile = true;\n      console.log(\"FILE VUOTO\")\n    } else {\n      this.isEmptyFile = false;\n      console.log(\"FILE NON VUOTO\")\n    }\n\n    //console.log(this.object)\n\n    try {\n      let get_anno_req = await this.annotatorService.getAnnotation(element_id).toPromise();\n      console.log(get_anno_req);\n\n      if (get_anno_req.annotations != undefined) {\n        get_anno_req.annotations.forEach(element => {\n          //console.log(element)\n          if (element.layer == 'attestation') {\n            if (element.attributes.bibliography == undefined) {\n              element.attributes['bibliography'] = [];\n            }\n\n            if (!Array.isArray(element.attributes.bibliography)) {\n              let tmp_arr = [];\n              tmp_arr.push(element.attributes['bibliography']);\n              element.attributes['bibliography'] = tmp_arr;\n            }\n\n\n            if (Array.isArray(element.attributes['bibliography'])) {\n              Array.from(element.attributes['bibliography']).forEach(element => {\n\n                if (element['note'] == undefined) {\n                  element['note'] = \"\";\n                }\n\n                if (element['textualRef'] == undefined) {\n                  element['textualRef'] = \"\";\n                }\n              });\n            }\n\n            if (this.isEmptyFile) {\n              element['empty_file'] = this.isEmptyFile;\n              if (element.attributes.leiden == undefined) {\n                element.attributes.leiden = '';\n              }\n            } else {\n              element['empty_file'] = this.isEmptyFile;\n            }\n            this.annotationArray.push(element);\n          } else if (element.layer == 'epidoc') {\n            this.epidoc_annotation_array.push(element);\n          }\n        });\n\n        if (this.annotationArray.length > 0) {\n          if (this.object != null) {\n            for (const element of this.object) {\n              let startElement = element.begin;\n              let endElement = element.end;\n\n              \n              for (const annotation of this.annotationArray) {\n\n                \n                  if (annotation.spans.length == 1) {\n                    let startAnnotation = annotation.spans[0].start;\n                    let endAnnotation = annotation.spans[0].end;\n  \n                    if (startAnnotation >= startElement && endAnnotation <= endElement) {\n                      let positionElement = element.position;\n                      let elementHTML = document.getElementsByClassName('token-' + (positionElement - 1))[0]\n                      var that = this;\n  \n                      let xmlNode = xmlDoc.querySelectorAll('[*|id=\\'' + element.xmlid + '\\']')[0].outerHTML;\n                      let object = {\n                        xmlString: xmlNode\n                      }\n\n                      if (elementHTML != undefined) {\n                        that.renderer.addClass(elementHTML, 'annotation');\n                      }\n                      \n                      if(annotation.attributes.leiden == undefined){\n                        try {\n                          let convert_to_leiden = await this.documentService.testConvertItAnt(object).toPromise();\n                          console.log(convert_to_leiden);\n                          let raw = convert_to_leiden['xml'];\n                          let bodyResponse = new DOMParser().parseFromString(raw, \"text/html\").body;\n                          let leidenToken = '';\n                          bodyResponse.childNodes.forEach(\n                            x => {\n                              if (x.nodeName != undefined) {\n                                if (x.nodeName == '#text') {\n                                  leidenToken += x.nodeValue.replace('\\n', '');\n                                }\n                              }\n                            }\n                          )\n    \n                          //TODO: check leiden\n                          if (leidenToken != '') {\n                            annotation.attributes['leiden'] = leidenToken;\n                          } else {\n                            annotation.attributes['leiden'] = '';\n                          }\n                          \n                        } catch (error) {\n    \n                        }\n                      }\n                      \n  \n  \n  \n  \n                    }\n                  }\n                \n                \n              }\n            }\n\n            this.lexicalService.triggerAttestationPanel(true);\n            this.lexicalService.sendToAttestationPanel(this.annotationArray);\n          }\n        } else {\n          this.annotationArray = [];\n          this.lexicalService.triggerAttestationPanel(false);\n          this.lexicalService.sendToAttestationPanel(null);\n        }\n      } else {\n        this.annotationArray = [];\n        this.epidoc_annotation_array = [];\n        this.lexicalService.triggerAttestationPanel(null);\n        this.lexicalService.sendToAttestationPanel(null);\n      }\n    } catch (error) {\n      if (error.status != 200) {\n        this.toastr.error(\"Something went wrong\", \"Error\", { timeOut: 5000 })\n      }\n    }\n  }\n\n\n  createToken(token?) {\n    if (token != undefined) {\n      return this.formBuilder.group({\n        entity: new FormControl(token)\n      })\n    } else {\n      return this.formBuilder.group({\n        entity: new FormControl('')\n      })\n    }\n  }\n\n  enterCell(evt, i) {\n    //console.log(\"enter cell \" + i);\n    //console.log(evt);\n    if (evt.target.innerText != '.' && evt.target.innerText != ':' && evt.target.innerText != '') {\n      let parentNode = evt.target.parentElement\n      if (parentNode != undefined) {\n        let classNames = parentNode.className;\n        let matchTest = /(^|\\s)(multiword-span-\\d)(\\s|$)/.test(classNames)\n        if (matchTest) {\n\n        } else {\n          this.object[i]['selected'] = true;\n\n          if (window.getSelection) {\n            if (window.getSelection().empty) {  // Chrome\n              window.getSelection().empty();\n            } else if (window.getSelection().removeAllRanges) {  // Firefox\n              window.getSelection().removeAllRanges();\n            }\n          }\n        }\n      }\n    }\n\n\n\n\n  }\n\n  leavingCell(evt, i) {\n    //console.log(\"leaving cell \" + i);\n    this.object[i]['selected'] = false;\n\n  }\n\n  deleteSelection(popover, evt, i) {\n    setTimeout(() => {\n\n    }, 10);\n    let popoverHtml = popover._elementRef.nativeElement;\n    //console.log(popoverHtml.querySelectorAll('.annotation'))\n    if (popoverHtml.querySelectorAll('.annotation').length > 0) {\n\n    } else {\n      popoverHtml.textContent = popoverHtml.textContent.trim();\n    }\n\n\n  }\n\n  triggerBind(popover, evt, i) {\n    if (!this.multiWordMode) {\n      if (evt.target.innerText != '.' && evt.target.innerText != ':' && evt.target.innerText != '') {\n        this.bind_subject.next({ popover, evt, i })\n      }\n\n    } else {\n      //console.log(\"multiword mode\", i)\n      console.log(popover);\n      this.multiWordCreator(popover, evt, i);\n    }\n  }\n\n\n  multiWordCreator(popover, evt, i) {\n    let span = popover._elementRef.nativeElement.parentNode.parentNode.childNodes[i];\n    let prevSibling, nextSibling;\n    prevSibling = popover._elementRef.nativeElement.parentNode.previousSibling;\n    nextSibling = popover._elementRef.nativeElement.parentNode.nextSibling;\n\n\n\n    if (span.classList.contains('multiword')) {\n      this.renderer.removeClass(span, 'multiword')\n      if (prevSibling != null) {\n        if (prevSibling.classList.contains('multiword')) {\n          this.renderer.removeClass(prevSibling, 'border-right-0')\n        }\n      }\n      if (nextSibling != null) {\n        if (nextSibling.classList != undefined) {\n          if (nextSibling.classList.contains('multiword')) {\n            this.renderer.removeClass(span, 'border-right-0')\n          }\n        }\n\n      }\n      let multiWordArray = Array.from(document.getElementsByClassName('multiword'));\n      multiWordArray.forEach(element => {\n        let children = Array.from(element.children);\n        children.forEach(subchild => {\n          if (subchild.classList.contains('multiword-button')) {\n            subchild.remove();\n          }\n        })\n      });\n\n      if (multiWordArray.length > 1) {\n        console.log(multiWordArray[multiWordArray.length - 1])\n        this.createDynamicButtons(multiWordArray[multiWordArray.length - 1]);\n      }\n\n\n    } else {\n      this.renderer.addClass(span, 'multiword');\n      if (prevSibling != null) {\n        if (prevSibling.classList.contains('multiword')) {\n          this.renderer.addClass(prevSibling, 'border-right-0');\n        }\n      }\n      if (nextSibling != null) {\n        if (nextSibling.classList != undefined) {\n          if (nextSibling.classList.contains('multiword')) {\n            this.renderer.addClass(span, 'border-right-0')\n          }\n        }\n      }\n      let multiWordArray = Array.from(document.getElementsByClassName('multiword'));\n      multiWordArray.forEach(element => {\n        let children = Array.from(element.children);\n        children.forEach(subchild => {\n          if (subchild.classList.contains('multiword-button')) {\n            subchild.remove();\n          }\n        })\n      });\n\n      if (multiWordArray.length > 1) {\n        this.createDynamicButtons(span);\n      } else if (multiWordArray.length == 1) {\n        multiWordArray.forEach(element => {\n          let children = Array.from(element.children);\n          children.forEach(subchild => {\n            if (subchild.classList.contains('multiword-button')) {\n              subchild.remove();\n            }\n          })\n        });\n      }\n    }\n\n  }\n\n  createDynamicButtons(span) {\n    let div = this.renderer.createElement('div');\n    this.renderer.addClass(div, 'multiword-button');\n    let okButton = this.renderer.createElement('button');\n    let leaveButton = this.renderer.createElement('button');\n\n    let okIcon = this.renderer.createElement('i');\n    this.renderer.addClass(okIcon, 'fas');\n    this.renderer.addClass(okIcon, 'fa-check');\n\n    let leaveIcon = this.renderer.createElement('i');\n    this.renderer.addClass(leaveIcon, 'fas');\n    this.renderer.addClass(leaveIcon, 'fa-times');\n\n    this.renderer.appendChild(okButton, okIcon);\n    this.renderer.appendChild(leaveButton, leaveIcon);\n    this.renderer.setStyle(okButton, 'position', 'absolute');\n    this.renderer.setStyle(okButton, 'top', '-1.5rem');\n    this.renderer.setStyle(okIcon, 'font-size', '10px');\n    this.renderer.setStyle(okIcon, 'width', '10px');\n\n    this.renderer.addClass(okButton, 'ok-button');\n    this.renderer.addClass(leaveButton, 'no-button')\n\n    this.renderer.setStyle(leaveButton, 'position', 'absolute');\n    this.renderer.setStyle(leaveButton, 'top', '-1.5rem');\n    this.renderer.setStyle(leaveIcon, 'font-size', '10px');\n    this.renderer.setStyle(leaveIcon, 'width', '10px');\n    this.renderer.setStyle(leaveButton, 'left', '1.5rem');\n\n    this.renderer.appendChild(div, okButton)\n    this.renderer.appendChild(div, leaveButton)\n    this.renderer.appendChild(span, div);\n  }\n\n  populateLocalAnnotation(tokenData) {\n    this.token_annotationArray = [];\n    //console.log(anno)\n    this.annotationArray.forEach(\n      annotation => {\n        //console.log(annotation)\n        let start_token, end_token;\n        if (!this.isEmptyFile) {\n          start_token = tokenData.begin;\n          end_token = tokenData.end;\n        } else {\n          start_token = tokenData.spans[0].start;\n          end_token = tokenData.spans[0].end;\n        }\n\n        annotation.spans.forEach(element => {\n          if (element.start >= start_token && element.end <= end_token) {\n            this.token_annotationArray.push(annotation);\n          }\n        });\n\n\n      }\n    )\n    if (this.token_annotationArray.length > 0) {\n      this.lexicalService.triggerAttestationPanel(true);\n      this.lexicalService.sendToAttestationPanel(this.token_annotationArray)\n    }\n  }\n\n  bindSelection(popover, evt, i) {\n\n    console.log(this.object[i])\n    this.token_annotationArray = [];\n    this.annotationArray.forEach(\n      annotation => {\n\n        let start_token = this.object[i].begin;\n        let end_token = this.object[i].end;\n\n        //console.log(annotation.spans)\n\n        if (annotation.spans.length == 1) {\n          annotation.spans.forEach(element => {\n            if (element.start >= start_token && element.end <= end_token) {\n              this.token_annotationArray.push(annotation);\n            }\n          });\n        } else {\n\n        }\n      }\n    )\n\n    if (this.token_annotationArray.length > 0) {\n      this.lexicalService.triggerAttestationPanel(true)\n      this.lexicalService.sendToAttestationPanel(this.token_annotationArray);\n    } else {\n      this.lexicalService.triggerAttestationPanel(false)\n      this.lexicalService.sendToAttestationPanel(null);\n    }\n\n    //console.log(evt)\n    setTimeout(() => {\n\n      this.message = '';\n      this.object[i]['editing'] = true;\n      this.message = window.getSelection().toString();\n      if (this.selectedPopover.htmlNodeName == '') {\n        this.selectedPopover.htmlNodeName = popover._ngbPopoverWindowId;\n        this.selectedPopover.tokenId = i;\n      }\n      else if (popover._ngbPopoverWindowId != this.selectedPopover) {\n        this.selectedPopover.htmlNodeName = popover._ngbPopoverWindowId\n        this.selectedPopover.tokenId = i\n        this.object.forEach(element => {\n          if (element.id != i + 1) {\n            //console.log(element)\n            element.editing = false;\n          } else {\n            //console.log(element)\n            element.editing = true;\n          }\n        });\n      }\n\n      if (popover.isOpen()) {\n\n      } else if (!popover.isOpen()) {\n        popover.open()\n      }\n\n      let popoverHtml = popover._elementRef.nativeElement;\n      let innerText = popoverHtml.innerText;\n      let selection = document.getSelection();\n      let anchorNode = selection.anchorNode;\n      let focusNode = selection.focusNode;\n      let isThereMark, areThereAnnotations;\n      //isThereMark = popoverHtml.querySelectorAll('.mark').length > 0;\n      //areThereAnnotations = popoverHtml.querySelectorAll('.annotation').length > 0;\n\n      if (anchorNode != null && focusNode != null) {\n        let anchorNodeParent = selection.anchorNode.parentNode;\n        let focusNodeParent = selection.focusNode.parentNode;\n\n        if (anchorNodeParent == focusNodeParent && this.message != '') { /* && !areThereAnnotations */\n          //SE SELEZIONO UNA PARTE DEL TOKEN\n\n          if (selection.anchorNode.textContent.trim().length == innerText.length && this.message != innerText) { //!isThereMark && \n\n            let anchorOffset = selection.anchorOffset;\n            let focusOffset = selection.focusOffset;\n\n\n            if (anchorOffset > focusOffset) {\n              let tmp = anchorOffset;\n              anchorOffset = focusOffset;\n              focusOffset = tmp;\n            }\n\n            //console.log(innerText.substring(anchorOffset, focusOffset))\n            console.log(anchorOffset)\n            console.log(focusOffset);\n\n            popoverHtml.innerText = \"\";\n\n            const span = this.renderer.createElement('span');\n            const l_text = this.renderer.createText(innerText.substring(0, anchorOffset))\n            const text = this.renderer.createText(this.message);\n            const r_text = this.renderer.createText(innerText.substring(focusOffset, innerText.length))\n\n\n            /* console.log(\"l_text:\", l_text)\n            console.log(\"text:\", text)\n            console.log(\"r_text:\", r_text) */\n\n\n            this.renderer.appendChild(span, text)\n            this.renderer.appendChild(popoverHtml, span);\n            this.renderer.addClass(span, 'mark'),\n              this.renderer.setAttribute(span, 'startoffset', anchorOffset.toString());\n            this.renderer.setAttribute(span, 'endoffset', focusOffset.toString())\n\n            if (l_text.textContent != \"\") {\n              this.renderer.insertBefore(popoverHtml, l_text, span);\n            }\n\n            if (r_text.textContent != \"\") {\n              this.renderer.appendChild(popoverHtml, r_text);\n            }\n            //console.log(popoverHtml.childNodes)\n            this.spanSelection = {}\n            this.spanSelection['start'] = this.object[i].begin + anchorOffset;\n            this.spanSelection['end'] = this.object[i].begin + focusOffset;\n            this.annotatorService.triggerSearch(this.message);\n          } else if (selection.anchorNode.textContent.trim().length == innerText.length && this.message == innerText) {\n            this.message = '';\n            this.annotatorService.triggerSearch(innerText);\n          }\n        }\n        //SE SELEZIONO L'INTERO TOKEN\n\n        else if (this.message == '') {\n          this.annotatorService.triggerSearch(innerText);\n          this.spanSelection = {}\n          this.spanSelection['start'] = 0;\n          this.spanSelection['end'] = 0;\n        }\n\n      }\n\n\n\n\n      let parentNode = evt.target.parentElement;\n      let classNames = parentNode.className;\n\n      if (/(^|\\s)(multiword-span-\\d)(\\s|$)/.test(classNames)) {\n        let multiwordSpan = Array.from(document.querySelectorAll(\"[class*=multiword-span-]\"));\n        let text = '';\n        multiwordSpan.forEach(element => {\n          console.log(element)\n          text += element.textContent + ' ';\n        })\n        //this.annotatorService.triggerSearch(text);\n      }\n    }, 10);\n\n  }\n\n  triggerEmptySearch() {\n    this.annotatorService.triggerSearch('');\n  }\n\n  async deleteAnnotation(annotation, index, token) {\n    let anno_id = annotation.id;\n    let token_position = token.position;\n\n    try {\n      let delete_anno_req = await this.annotatorService.deleteAnnotation(anno_id).toPromise();\n      console.log(delete_anno_req);\n\n      this.token_annotationArray.splice(index, 1)\n      this.annotationArray.splice(index, 1);\n      this.lexicalService.triggerAttestationPanel(false)\n    } catch (error) {\n      if (error.status == 200) {\n        this.token_annotationArray.splice(index, 1)\n        this.annotationArray.splice(index, 1);\n      } else {\n        this.toastr.error(\"Something went wront, check the log\", \"Error\", { timeOut: 5000 })\n      }\n    }\n\n\n  }\n\n\n  showAllAnnotations() {\n    this.lexicalService.triggerAttestationPanel(true)\n    this.lexicalService.sendToAttestationPanel(this.annotationArray);\n  }\n\n  replaceBetween(origin, startIndex, endIndex, insertion) {\n    return origin.substring(0, startIndex) + insertion + origin.substring(endIndex);\n  }\n\n\n  ngOnDestroy() {\n    this.epigraphy_text_subscription.unsubscribe();\n    this.leiden_subscription.unsubscribe();\n    this.translation_subscription.unsubscribe();\n    this.delete_annotation_subscription.unsubscribe();\n    this.destroy$.next(true);\n    this.destroy$.complete();\n  }\n}\n\n","\n\n<div class=\"card\">\n    <div class=\"card-body\">\n        <div class=\"form-group row ml-2 mt-3 mr-2 showall\" *ngIf=\"annotationArray.length != 0\">\n            <button class=\"btn btn-light btn-lg\" (click)=\"showAllAnnotations()\" title=\"Show all annotations\"><i\n                    class=\"fas fa-eye\"></i></button>\n        </div>\n    \n        <div class=\"form-group row ml-2 mt-3 mr-2\" *ngIf=\"object != null && object.length != 0\">\n            <h6>Linker</h6>\n        \n        </div>\n        \n        <div class=\"form-group row ml-2 mt-3 mr-2 empty\" *ngIf=\"isEmptyFile\">\n            <h6 class=\"mr-2\">Add attestation</h6>\n        \n            <button #button_modal=\"ngbPopover\" type=\"button\" class=\"btn btn-outline-secondary token mb-2\"  container=\"body\"  popoverTitle=\"Pop title\" \n            [autoClose]=\"'outside'\" [ngbPopover]=\"tokenPopover\" [placement]=\"'bottom'\"  popoverClass=\"token_modal\" (click)=\"triggerEmptySearch()\">\n            <i class=\"fa fa-plus\"></i>\n            </button>\n        \n            <ng-template #tokenPopover>\n        \n                <div class=\"card\">\n                    <div class=\"card-header\">\n                        <p>Add a form:</p>\n                       \n                    </div>\n                    <div class=\"card-body\">\n                        <app-search-form [bind]=\"bind\" #search_form></app-search-form>\n                        \n                      \n                    </div>\n        \n                </div>\n        \n        \n            </ng-template>\n        \n        </div>\n        \n        \n        \n        <form [formGroup]=\"epigraphyForm\" *ngIf=\"object != null && object.length != 0\">\n        \n            <div class=\"form-group row ml-2 mt-3 mr-2 panel\">\n        \n                <div *ngFor=\"let token of object; let i = index\" class=\"panel-body\">\n                    <!-- {{multiWordMode && (token.text == '' || token.text == '.' || token.text == ':')}} -->\n                    <span #span_modal=\"ngbPopover\" \n                        [attr.position]=\"token.position\"\n                        [ngClass]=\"{'unselectable': !token.selected, 'selected' : token.selected, 'editing' : token.editing}\"\n                        class=\"token token-{{i}} p-2\" style=\"display: block\" container=\"body\" [triggers]=\"manual\"\n                        [placement]=\"'bottom'\" [popoverTitle]=\"token.value\" [animation]=\"false\" [autoClose]=\"'outside'\"\n                        [disablePopover]=\"multiWordMode || (token.text == '' || token.text == '.' || token.text == ':')\" [ngbPopover]=\"tokenPopover\" (mouseenter)=\"enterCell($event, i)\"\n                        (mouseleave)=\"leavingCell($event, i)\" popoverClass=\"token_modal\"\n                        (mousedown)=\"deleteSelection(span_modal, $event, i)\" (mouseup)=\"triggerBind(span_modal, $event, i);\">\n                        {{token.text}}\n                    </span>\n        \n        \n        \n        \n                    <!-- ################## POPOVER TEMPLATE ################# -->\n                    <ng-template #tokenPopover>\n                       \n        \n                        <div class=\"card\">\n                            <div class=\"card-header\">\n                                <p>Add a form:</p>\n                               \n                            </div>\n                            <div class=\"card-body\">\n                                <app-search-form [bind]=\"bind\" #search_form></app-search-form>\n                                \n        \n                            </div>\n        \n                        </div>\n        \n        \n                    </ng-template>\n                </div>\n        \n        \n            </div>\n        \n        \n        \n        </form>\n    </div>\n    \n</div>\n\n\n\n<div class=\"card mt-2\" *ngIf=\"leidenLines.length != 0\">\n    <div class=\"card-body\">\n        <div class=\"form-group row ml-2 mt-3 mr-2\" *ngIf=\"object != null && object.length != 0\">\n            <h6>Inscription</h6>\n        </div>\n        \n        <div class=\"form-group row ml-2 mt-3 mr-2 leiden_raw p-2\" *ngIf=\"object != null && object.length != 0\" style=\"font-family: 'NewAthena';\">\n            <ol class=\"pl-3\">\n                <li *ngFor=\"let line of leidenLines; let i = index\">\n                    {{line}}\n                </li>\n            </ol>\n        </div>\n    </div>\n</div>\n\n\n<div class=\"card mt-2\" *ngIf=\"translation_array.length != 0\">\n    <div class=\"card-body\">\n        <div class=\"form-group row ml-2 mt-3 mr-2\" *ngIf=\"object != null && object.length != 0\">\n            <h6>Translation</h6>\n        </div>\n        \n        <div class=\"form-group row ml-2 mt-3 mr-2 leiden_raw p-2\" *ngIf=\"object != null && object.length != 0\">\n            <div class=\"row align-items-baseline\">\n                <div class=\"col-6 border-right\">\n                   {{translation_array[0]}}\n                </div>\n                <div class=\"col-6\">\n                    {{translation_array[1]}}\n                </div>\n            </div>\n        </div>\n    </div>\n</div>\n\n\n\n<!-- <div class=\"form-group row ml-2 mt-3 mr-2 panel\" *ngIf=\"object != null && object.length != 0\">\n\n    <span class=\"token overflow-auto p-2\">{{textEpigraphy}}</span>\n</div> -->\n\n<!-- <div class=\"form-group row ml-2 mt-3 mr-2 panel\" *ngIf=\"object != null && object.length != 0\">\n    <h5>Leiden:</h5>\n</div> -->\n\n<!-- <div [innerHTML]=\"htmlLeiden\" class=\"form-group row ml-2 mt-3 mr-2 p-2 panel leiden_raw\">\n        \n</div> -->\n\n","import { Component, Input, OnDestroy, OnInit, SimpleChanges } from '@angular/core';\nimport { FormBuilder, FormControl, FormGroup, Validators } from '@angular/forms';\nimport { ToastrService } from 'ngx-toastr';\nimport { Subject } from 'rxjs';\nimport { debounceTime, pairwise, startWith, takeUntil } from 'rxjs/operators';\nimport { ConceptService } from 'src/app/services/concept/concept.service';\nimport { LexicalEntriesService } from 'src/app/services/lexical-entries/lexical-entries.service';\n\n@Component({\n  selector: 'app-concept-set-core-form',\n  templateUrl: './concept-set-core-form.component.html',\n  styleUrls: ['./concept-set-core-form.component.scss']\n})\nexport class ConceptSetCoreFormComponent implements OnInit, OnDestroy {\n\n  @Input() conceptSetData: any;\n  object : any;\n\n  destroy$: Subject<boolean> = new Subject();\n\n  constructor(private formBuilder: FormBuilder,\n              private conceptService : ConceptService,\n              private lexicalService : LexicalEntriesService,\n              private toastr : ToastrService) { }\n\n  conceptSetForm = new FormGroup({\n    defaultLabel : new FormControl('', [Validators.required])\n  })\n\n  ngOnInit(): void {\n    this.conceptSetForm = this.formBuilder.group({\n      defaultLabel : '',\n    })\n\n    this.onChanges();\n  }\n\n  onChanges() {\n    this.conceptSetForm.get('defaultLabel').valueChanges.pipe(debounceTime(1000), startWith(this.conceptSetForm.get('defaultLabel').value), pairwise(), takeUntil(this.destroy$)).subscribe(([prev, next]: [any, any]) => {\n      if(next != '') {\n        let parameters = {\n          relation: \"http://www.w3.org/2004/02/skos/core#prefLabel\",\n          source: this.object.conceptSet,\n          target: next,\n          oldTarget: prev == '' ? this.object.defaultLabel : prev,\n          targetLanguage: this.object.language,\n          oldTargetLanguage : this.object.language\n        }\n\n\n        this.conceptService.updateSkosLabel(parameters).pipe(takeUntil(this.destroy$)).subscribe(\n          data=> {\n            console.log(data)\n          }, error=> {\n            console.log(error);\n            if (error.status != 200) {\n              this.toastr.error(error.error, 'Error', {\n                  timeOut: 5000,\n              });\n            } else {\n              const data = this.object;\n              data['request'] = 0;\n              data['new_label'] = next;\n              this.lexicalService.refreshAfterEdit(data);\n              this.lexicalService.spinnerAction('off');\n              this.lexicalService.updateCoreCard({ lastUpdate: error.error.text });\n              //this.lexicalService.changeDecompLabel(next)\n              this.toastr.success('Label changed correctly for ' + this.object.conceptSet, '', {\n                  timeOut: 5000,\n              });\n            }\n          }\n        )\n      }\n    })\n  }\n\n  ngOnChanges(changes: SimpleChanges) {\n    setTimeout(() => {\n      if (this.object != changes.conceptSetData.currentValue) {\n        //logica varia\n      }\n      this.object = changes.conceptSetData.currentValue;\n\n\n      if (this.object != null) {\n\n        let defaultLabel = this.object.defaultLabel;\n        this.conceptSetForm.get('defaultLabel').setValue(defaultLabel, {emitEvent : false});\n        \n      }\n\n\n    }, 10)\n\n  }\n\n  ngOnDestroy(): void {\n    this.destroy$.next(true);\n    this.destroy$.complete();\n  }\n\n}\n","<form [formGroup]=\"conceptSetForm\" *ngIf=\"object != null\">\n    <div class=\"form-group row ml-2 mt-3 mr-2\">\n        <label for=\"inputLabel\" class=\"col-lg-3 col-form-label\">Label:</label>\n        <div class=\"input-group col-lg-7\">\n            <input formControlName=\"defaultLabel\" name=\"defaultLabel\" type=\"text\" class=\"form-control\" placeholder=\"\" required>\n            <div class=\"input-group-append\">\n                <span class=\"input-group-text\" id=\"basic-addon2\" style=\"font-size: .75rem; font-weight: 900;\">@{{object.language}}</span>\n            </div>\n            <div class=\"invalid-feedback\" *ngIf=\"conceptSetForm.get('defaultLabel').invalid\" style=\"display: block;\">\n                Invalid field.\n            </div>\n        </div>\n    </div>\n</form>","/*\n   Copyright 2021-2022  Istituto di Linguistica Computazionale \"A. Zampolli\", Consiglio Nazionale delle Ricerche, Pisa, Italy.\n \nThis file is part of EpiLexo.\n\nEpiLexo is free software: you can redistribute it and/or modify it under the terms of the GNU General Public License as published by the Free Software Foundation, either version 3 of the License, or (at your option) any later version.\n\nEpiLexo is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for more details.\n\nYou should have received a copy of the GNU General Public License along with EpiLexo. If not, see <https://www.gnu.org/licenses/>.\n*/\n\nimport { Component, ElementRef, OnDestroy, OnInit, ViewChild } from '@angular/core';\nimport { Subscription } from 'rxjs';\nimport { DocumentSystemService } from 'src/app/services/document-system/document-system.service';\nimport { ExpanderService } from 'src/app/services/expander/expander.service';\n\n@Component({\n  selector: 'app-epigraphy-detail',\n  templateUrl: './epigraphy-detail.component.html',\n  styleUrls: ['./epigraphy-detail.component.scss']\n})\nexport class EpigraphyDetailComponent implements OnInit, OnDestroy {\n\n  @ViewChild('navTabsEpigraphy') navtabs: ElementRef; \n  @ViewChild('navContentEpigraphy') navcontent: ElementRef; \n\n  object : any;\n  subscription : Subscription;\n\n  open_epigraphy_subscription : Subscription;\n  constructor(private documentService: DocumentSystemService, private exp : ExpanderService) { }\n\n  ngOnInit(): void {\n    this.open_epigraphy_subscription = this.exp.openEpigraphy$.subscribe(\n      boolean => {\n        if(boolean){\n          setTimeout(() => {\n            var text_detail = document.querySelectorAll('#epigraphy-dettaglio');\n            text_detail.forEach(element => {\n              if(!element.classList.contains('show')){\n                element.classList.add('show')\n              }\n            })\n            let a_link = document.querySelectorAll('a[data-target=\"#epigraphy-dettaglio\"]');\n            a_link.forEach(element => {\n              if(element.classList.contains(\"collapsed\")){\n                element.classList.remove('collapsed')\n              }else{\n                //element.classList.add('collapsed')\n              }\n            })\n           }, 100);\n        }\n      }\n    )\n\n    this.subscription = this.documentService.epigraphyData$.subscribe(\n      object => {\n       /*  console.log(object) */\n        if(object != null){\n          setTimeout(() => {\n            var navTabLinks = this.navtabs.nativeElement.querySelectorAll('a')\n            this.object = object;\n            /* console.log(this.object) */\n            navTabLinks.forEach(element => {\n              /* //console.log(element) */\n              if(element.text == 'Epigraphy'){\n                element.classList.add('active')\n              }else{\n                element.classList.remove('active')\n                //console.log(element.id)\n              }\n            });\n\n            var navContent = this.navcontent.nativeElement.querySelectorAll('.tab-pane');\n            \n            navContent.forEach(element => {\n              \n              if(element.id == 'epigraphy'){\n                element.classList.add('active')\n                element.classList.add('show')\n              }else{\n                \n                element.classList.remove('active')\n                element.classList.remove('show')\n                //console.log(element)\n              }\n            });\n          }, 200);\n          \n        }else{\n          this.object = null;\n          setTimeout(() => {\n            var navTabLinks = this.navtabs.nativeElement.querySelectorAll('a')\n            this.object = object;\n            /* console.log(this.object) */\n            navTabLinks.forEach(element => {\n              /* //console.log(element) */\n              if(element.text == 'Epigraphy'){\n                element.classList.remove('active')\n              }\n            });\n\n            var navContent = this.navcontent.nativeElement.querySelectorAll('.tab-pane');\n            \n            navContent.forEach(element => {\n              \n              if(element.id == 'epigraphy'){\n                element.classList.remove('active')\n                element.classList.remove('show')\n              }\n            });\n          }, 200);\n        }\n      }\n    );\n  }\n\n  triggerExpansionEpigraphy(){\n\n\n    setTimeout(() => {\n      if(!this.exp.isEditTabOpen() && this.exp.isEpigraphyTabOpen()){\n        if(!this.exp.isEditTabExpanded() && this.exp.isEpigraphyTabExpanded()){\n          this.exp.openCollapseEpigraphy();\n          this.exp.expandCollapseEpigraphy();\n        }\n      }else if(!this.exp.isEditTabOpen() && !this.exp.isEpigraphyTabOpen()){\n        if(!this.exp.isEditTabExpanded() && !this.exp.isEpigraphyTabExpanded()){\n          this.exp.openCollapseEpigraphy();\n          this.exp.expandCollapseEpigraphy();\n        }\n      }else if(this.exp.isEditTabOpen() && this.exp.isEpigraphyTabOpen()){\n        this.exp.openCollapseEpigraphy();\n        this.exp.expandCollapseEdit(true);\n      }else if(this.exp.isEditTabOpen() && !this.exp.isEpigraphyTabOpen()){\n        if(this.exp.isEditTabExpanded() && !this.exp.isEpigraphyTabExpanded()){\n          this.exp.expandCollapseEdit(false);\n          this.exp.openCollapseEpigraphy(true)\n        }\n        \n      }\n    }, 200);\n  }\n\n  ngOnDestroy(): void {\n    this.subscription.unsubscribe();\n    this.open_epigraphy_subscription.unsubscribe();\n  }\n}\n","\n\n<!-- <div id=\"epigraphy-accordion\">\n--> <div class=\"card\">\n        <div class=\"card-header\" id=\"headingOne\" style=\"text-align: right;\">\n            <ul class=\"nav nav-tabs\" id=\"editDictTab\" #navTabsEpigraphy role=\"tablist\" [ngClass]=\"{'disabled': object === null}\">\n                <li class=\"nav-item\">\n                    <a class=\"nav-link\" id=\"epigraphy-tab\" data-toggle=\"tab\" href=\"#epigraphy\" role=\"tab\" aria-controls=\"epigraphy\" aria-selected=\"true\">Epigraphy</a>\n                </li>\n                \n                <h5 class=\"ml-auto mb-0\">\n                    <a class=\"btn btn-link w-100 d-flex align-self-center\" (click)=\"triggerExpansionEpigraphy();\" data-toggle=\"collapse\" data-target=\"#epigraphy-dettaglio\" aria-expanded=\"false\" aria-controls=\"epigraphy-dettaglio\">\n                        <i class=\"fa ml-auto\"></i>\n                    </a>\n                </h5>\n            </ul>\n            <!-- <h5 class=\"ml-auto mb-0\">\n                <a class=\"btn btn-link w-100 d-flex align-self-center\" (click)=\"triggerExpansionEpigraphy();\" data-toggle=\"collapse\" data-target=\"#epigraphy-dettaglio\" aria-expanded=\"true\" aria-controls=\"epigraphy-dettaglio\">\n                    <i class=\"fa ml-auto\"></i>\n                </a>\n            </h5> -->\n            \n        </div>\n        <div id=\"epigraphy-dettaglio\" class=\"collapse show\" aria-labelledby=\"headingOne\" > <!-- data-parent=\"#epigraphy-accordion\" -->\n            <div class=\"card-body\">\n                <div class=\"tab-content\" id=\"myTabContent\" #navContentEpigraphy>\n                    <!--  <div class=\"tab-pane fade show active\" id=\"epigraphy\" role=\"tabpanel\" aria-labelledby=\"epigraphy-tab\">\n                        <app-epigraphy-tab></app-epigraphy-tab>\n                    </div> -->\n                    <div class=\"tab-pane fade show active\" id=\"epigraphy\" role=\"tabpanel\" aria-labelledby=\"epigraphy-tab\">\n                        <app-epigraphy-tab></app-epigraphy-tab>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n<!-- </div> -->","/*\n   Copyright 2021-2022  Istituto di Linguistica Computazionale \"A. Zampolli\", Consiglio Nazionale delle Ricerche, Pisa, Italy.\n \nThis file is part of EpiLexo.\n\nEpiLexo is free software: you can redistribute it and/or modify it under the terms of the GNU General Public License as published by the Free Software Foundation, either version 3 of the License, or (at your option) any later version.\n\nEpiLexo is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for more details.\n\nYou should have received a copy of the GNU General Public License along with EpiLexo. If not, see <https://www.gnu.org/licenses/>.\n*/\n\nimport { Component, ElementRef, OnDestroy, OnInit, Renderer2, ViewChild } from '@angular/core';\nimport { LexicalEntriesService } from 'src/app/services/lexical-entries/lexical-entries.service';\nimport { ToastrService } from 'ngx-toastr';\nimport { DocumentSystemService } from 'src/app/services/document-system/document-system.service';\nimport { TreeNode } from '@circlon/angular-tree-component';\nimport { ExpanderService } from 'src/app/services/expander/expander.service';\nimport {saveAs as importedSaveAs} from \"file-saver\";\nimport { Subject, Subscription } from 'rxjs';\nimport { take, takeUntil } from 'rxjs/operators';\nimport { ConceptService } from 'src/app/services/concept/concept.service';\n\n\n@Component({\n  selector: 'app-document-system-tree',\n  templateUrl: './document-system-tree.component.html',\n  styleUrls: ['./document-system-tree.component.scss'],\n})\n\nexport class DocumentSystemTreeComponent implements OnInit, OnDestroy {\n\n  switcher = false;\n  @ViewChild('lexTree') lexTree: any;\n  @ViewChild('textTree') textTree: any;\n  @ViewChild('conceptTree') conceptTree: any;\n  @ViewChild('skosTree') skosTree: any;\n  @ViewChild('accordion') accordion: ElementRef; \n  destroy$ : Subject<boolean> = new Subject();\n  refresh_after_edit_subscription : Subscription;\n  trigger_lex_tree_subscription : Subscription;\n\n  constructor(private exp: ExpanderService, \n              private lexicalService: LexicalEntriesService, \n              private toastr: ToastrService, \n              private renderer: Renderer2, \n              private documentService: DocumentSystemService,\n              private conceptService : ConceptService) { }\n\n  ngOnInit(): void {\n    this.refresh_after_edit_subscription = this.refresh_after_edit_subscription = this.lexicalService.refreshAfterEdit$.subscribe(\n      data => {\n        this.refreshAfterEdit(data);\n      }\n    )\n\n\n    this.trigger_lex_tree_subscription = this.lexicalService.triggerLexicalEntryTree$.subscribe(\n      (data:any)=> {\n        setTimeout(() => {\n          if(data != null){\n            if(data.request){\n\n              this.updateTreeParent();\n              \n              let lex = {\n                request : 'form',\n                lexicalEntry : data.data.lexicalEntry,\n\n              }\n              \n              this.lexTree.parameters['text'] = data.data.lexicalEntryLabel;\n              this.lexTree.lexicalEntriesFilter(this.lexTree.parameters);\n              \n\n              setTimeout(() => {\n                this.lexicalService.addSubElementRequest({'lex' : lex, 'data' : data.data});\n\n              }, 500);\n\n              let a_link = this.accordion.nativeElement.querySelectorAll('button[data-target=\"#lexicalCollapse\"]');\n              let collapse_container = this.accordion.nativeElement.querySelectorAll('div[aria-labelledby=\"lexicalHeading\"]');\n              a_link.forEach(element => {\n                if(element.classList.contains(\"collapsed\")){\n                  element.classList.remove('collapsed')\n                }else{\n                  //element.classList.add('collapsed')\n                }\n              })\n  \n              collapse_container.forEach(element => {\n                if(element.classList.contains(\"show\")){\n                  //element.classList.remove('collapsed')\n                }else{\n                  element.classList.add('show')\n                }\n              })\n\n              let a_link_epigraphy = this.accordion.nativeElement.querySelectorAll('button[data-target=\"#epigraphyCollapse\"]');\n              let collapse_container_epigraphy = this.accordion.nativeElement.querySelectorAll('div[aria-labelledby=\"epigraphyHeading\"]');\n              a_link.forEach(element => {\n                if(!element.classList.contains(\"collapse\")){\n                  element.classList.add('collapsed')\n                }\n              })\n  \n              collapse_container_epigraphy.forEach(element => {\n                if(element.classList.contains(\"show\")){\n                  element.classList.remove('show')\n                }else{\n                  //element.classList.add('show')\n                }\n              })\n  \n              \n            }else{\n              setTimeout(() => {\n                let a_link = this.accordion.nativeElement.querySelectorAll('a[data-target=\"#lexicalCollapse\"]');\n                a_link.forEach(element => {\n                  element.classList.add('collapsed')\n                  \n                })\n  \n                let collapse_container = this.accordion.nativeElement.querySelectorAll('div[aria-labelledby=\"lexicalHeading\"]');\n                collapse_container.forEach(element => {\n                  console.log(element)\n                  if(element.classList.contains(\"show\")){\n                    element.classList.remove('show')\n                  }\n                })\n              }, 100);\n              \n            }\n          }\n        }, 100);\n      },error=> {\n        console.log(error)\n      }\n    )\n  }\n\n  updateTreeParent() {\n    this.lexTree.updateTreeView();\n  }\n\n  switchLabel() {\n    this.lexTree.labelView = !this.lexTree.labelView;\n    this.lexTree.idView = !this.lexTree.idView;\n    this.switcher = !this.switcher;\n  }\n\n  lexEdit(data) {\n\n    var that = this;\n    let instanceName = '';\n    if (data['lexicalEntry'] != undefined && data['form'] == undefined && data['sense'] == undefined) {\n      instanceName = data['lexicalEntry']\n    } else if (data['form'] != undefined) {\n      instanceName = data['form']\n    } else if (data['sense'] != undefined) {\n      instanceName = data['sense']\n    } else if (data['etymology'] != undefined) {\n      instanceName = data['etymology']\n    };\n    if (data['new_note'] != undefined) {\n\n      \n      setTimeout(() => {\n        this.lexTree.lexicalEntryTree.treeModel.getNodeBy(\n          function (x) {\n            if (data['lexicalEntry'] != undefined && data['form'] == undefined && data['sense'] == undefined) {\n              if (x.data.lexicalEntry == instanceName) {\n\n                x.data.note = data['new_note']\n                that.lexTree.lexicalEntryTree.treeModel.update();\n                that.lexTree.updateTreeView();\n\n                //console.log(x)\n                //@ts-ignore\n                $('.note_' + x.data.id).attr('data-original-title', data['new_note']);\n\n                data['new_note'] = undefined;\n                return true;\n              } else {\n                return false;\n              }\n            } else if (data['form'] != undefined) {\n\n              if (x.data.form == instanceName) {\n                x.data.note = data['new_note']\n                that.lexTree.lexicalEntryTree.treeModel.update();\n                that.lexTree.updateTreeView();\n                data['new_note'] = undefined;\n                return true;\n              } else {\n                return false;\n              }\n            } else if (data['sense'] != undefined) {\n\n              if (x.data.sense == instanceName) {\n                x.data.note = data['new_note']\n                that.lexTree.lexicalEntryTree.treeModel.update();\n                that.lexTree.updateTreeView();\n                data['new_note'] = undefined;\n                return true;\n              } else {\n                return false;\n              }\n            }\n            else if (data['etymology'] != undefined) {\n\n              if (x.data.etymology == instanceName) {\n                x.data.note = data['new_note']\n                that.lexTree.lexicalEntryTree.treeModel.update();\n                that.lexTree.updateTreeView();\n                data['new_note'] = undefined;\n                return true;\n              } else {\n                return false;\n              }\n            }\n            else {\n              return false;\n            }\n          }\n        );\n      }, 500);\n    } else if (data['new_label'] != undefined) {\n      //console.log(\"cambio label cambio tutto\")\n      //console.log(data)\n      let instanceName = '';\n      if (data['lexicalEntry'] != undefined && data['form'] == undefined) {\n        instanceName = data['lexicalEntry']\n      } else if (data['form'] != undefined) {\n        instanceName = data['form']\n      } else if (data['sense'] != undefined) {\n        instanceName = data['sense']\n      } else if (data['etymology'] != undefined) {\n        instanceName = data['etymology']\n      } else if (data['conceptSet'] != undefined){\n        instanceName = data['conceptSet']\n      }else if (data['lexicalConcept'] != undefined){\n        instanceName = data['lexicalConcept']\n      };\n      \n      setTimeout(() => {\n        if(data['conceptSet'] == undefined && data['lexicalConcept'] == undefined){\n          this.lexTree.lexicalEntryTree.treeModel.getNodeBy(\n            function (x) {\n              if (data['lexicalEntry'] != undefined) {\n                if (x.data.lexicalEntry == instanceName) {\n                  x.data.label = data['new_label']\n                  //x.setActiveAndVisible()\n                  x.scrollIntoView();\n                  data['new_label'] = undefined\n                  return true;\n                } else {\n                  return false;\n                }\n              } else if (data['form'] != undefined) {\n  \n                if (x.data.form == instanceName) {\n                  x.data.label = data['new_label']\n                  //x.setActiveAndVisible()\n                  x.scrollIntoView();\n                  data['new_label'] = undefined\n                  return true;\n                } else {\n                  return false;\n                }\n              } else if (data['sense'] != undefined) {\n  \n                if (x.data.sense == instanceName) {\n                  x.data.label = data['new_label']\n                  //x.setActiveAndVisible()\n                  x.scrollIntoView();\n                  data['new_label'] = undefined\n                  return true;\n                } else {\n                  return false;\n                }\n              } else if (data['etymology'] != undefined) {\n  \n                if (x.data.etymology == instanceName) {\n                  x.data.label = data['new_label']\n                  //x.setActiveAndVisible()\n                  x.scrollIntoView();\n                  data['new_label'] = undefined\n                  return true;\n                } else {\n                  return false;\n                }\n              }\n              else {\n                return false;\n              }\n            }\n          );\n        }else{\n          this.skosTree.skosTree.treeModel.getNodeBy(\n            function (x) {\n              if (data['conceptSet'] != undefined) {\n                if (x.data.conceptSet == instanceName) {\n                  x.data.defaultLabel = data['new_label']\n                  //x.setActiveAndVisible()\n                  x.scrollIntoView();\n                  data['new_label'] = undefined\n                  return true;\n                } else {\n                  return false;\n                }\n              } else if (data['lexicalConcept'] != undefined) {\n  \n                if (x.data.lexicalConcept == instanceName) {\n                  x.data.defaultLabel = data['new_label']\n                  //x.setActiveAndVisible()\n                  x.scrollIntoView();\n                  data['new_label'] = undefined\n                  return true;\n                } else {\n                  return false;\n                }\n              }\n              else {\n                return false;\n              }\n            }\n          );\n        }\n        \n      }, 500);\n    } else if (data['new_type'] != undefined) {\n      //console.log(\"cambio type cambio tutto\")\n      let instanceName = '';\n      if (data['lexicalEntry'] != undefined) {\n        instanceName = data['lexicalEntry']\n      } else if (data['form'] != undefined) {\n        instanceName = data['form']\n      } else if (data['sense'] != undefined) {\n        instanceName = data['sense']\n      };\n      setTimeout(() => {\n        this.lexTree.lexicalEntryTree.treeModel.getNodeBy(\n          function (x) {\n            if (data['lexicalEntry'] != undefined) {\n              if (x.data.lexicalEntry == instanceName) {\n                x.data.type = data['new_type']\n                //x.setActiveAndVisible()\n                x.scrollIntoView();\n                data['new_type'] = undefined\n                return true;\n\n              } else {\n                return false;\n              }\n            } else if (data['form'] != undefined) {\n\n              if (x.data.form == instanceName) {\n                x.data.type = data['new_type']\n                //x.setActiveAndVisible()\n                x.scrollIntoView();\n                data['new_type'] = undefined\n                return true;\n              } else {\n                return false;\n              }\n            } else if (data['sense'] != undefined) {\n\n              if (x.data.seame == instanceName) {\n                x.data.type = data['new_type']\n                //x.setActiveAndVisible()\n                x.scrollIntoView();\n                data['new_type'] = undefined\n                return true;\n              } else {\n                return false;\n              }\n            }\n            else {\n              return false;\n            }\n          }\n        );\n      }, 500);\n    } else if (data['new_lang'] != undefined) {\n      //console.log(\"cambio lang cambio tutto\")\n      let instanceName = '';\n      if (data['lexicalEntry'] != undefined) {\n        instanceName = data['lexicalEntry']\n      } else if (data['form'] != undefined) {\n        instanceName = data['form']\n      } else if (data['sense'] != undefined) {\n        instanceName = data['sense']\n      };\n      setTimeout(() => {\n        this.lexTree.lexicalEntryTree.treeModel.getNodeBy(\n          function (x) {\n            if (data['lexicalEntry'] != undefined) {\n              if (x.data.lexicalEntry == instanceName) {\n                x.data.language = data['new_lang']\n                //x.setActiveAndVisible()\n                x.scrollIntoView();\n                data['new_lang'] = undefined\n                return true;\n              } else {\n                return false;\n              }\n            } else if (data['form'] != undefined) {\n\n              if (x.data.form == instanceName) {\n                x.data.language = data['new_lang']\n                //x.setActiveAndVisible()\n                x.scrollIntoView();\n                data['new_lang'] = undefined\n                return true;\n              } else {\n                return false;\n              }\n            } else if (data['sense'] != undefined) {\n\n              if (x.data.seame == instanceName) {\n                x.data.language = data['new_lang']\n                //x.setActiveAndVisible()\n                x.scrollIntoView();\n                data['new_lang'] = undefined\n                return true;\n              } else {\n                return false;\n              }\n            }\n            else {\n              return false;\n            }\n          }\n        );\n      }, 500);\n    } else if (data['new_pos'] != undefined) {\n      //console.log(\"cambio pos cambio tutto\")\n      let instanceName = '';\n      if (data['lexicalEntry'] != undefined) {\n        instanceName = data['lexicalEntry']\n      } else if (data['form'] != undefined) {\n        instanceName = data['form']\n      } else if (data['sense'] != undefined) {\n        instanceName = data['sense']\n      };\n      setTimeout(() => {\n        this.lexTree.lexicalEntryTree.treeModel.getNodeBy(\n          function (x) {\n            if (data['lexicalEntry'] != undefined) {\n              if (x.data.lexicalEntry == instanceName) {\n                x.data.pos = data['new_pos'].split('#')[1]\n                //x.setActiveAndVisible()\n                x.scrollIntoView();\n                data['new_pos'] = undefined\n                return true;\n              } else {\n                return false;\n              }\n            } else if (data['form'] != undefined) {\n\n              if (x.data.form == instanceName) {\n                x.data.pos = data['new_pos'].split('#')[1]\n                //x.setActiveAndVisible()\n                x.scrollIntoView();\n                data['new_pos'] = undefined\n                return true;\n              } else {\n                return false;\n              }\n            } else if (data['sense'] != undefined) {\n\n              if (x.data.sense == instanceName) {\n                x.data.pos = data['new_pos'].split('#')[1]\n                //x.setActiveAndVisible()\n                x.scrollIntoView();\n                data['new_pos'] = undefined\n                return true;\n              } else {\n                return false;\n              }\n            }\n            else {\n              return false;\n            }\n          }\n        );\n      }, 500);\n    } else if (data['new_status'] != undefined){\n      setTimeout(() => {\n        this.lexTree.lexicalEntryTree.treeModel.getNodeBy(\n          function (x) {\n            if (data['lexicalEntry'] != undefined && data['form'] == undefined && data['sense'] == undefined) {\n              if (x.data.lexicalEntry == instanceName) {\n\n                x.data.status = data['new_status']\n                that.lexTree.lexicalEntryTree.treeModel.update();\n                that.lexTree.updateTreeView();\n\n                \n\n                return true;\n              } else {\n                return false;\n              }\n            } \n            else {\n              return false;\n            }\n          }\n        );\n      }, 500);\n    }\n\n  }\n\n  changeSenseDefinition(data) {\n    var that = this;\n    setTimeout(() => {\n      that.lexTree.lexicalEntryTree.treeModel.getNodeBy(\n        function (x) {\n          if (x.data.sense != undefined) {\n            if (x.data.sense == data['sense']) {\n              \n              x.data.definition = data['new_definition'] != '' ? data['new_definition'] : 'no definition';\n              that.lexTree.lexicalEntryTree.treeModel.update();\n              that.lexTree.updateTreeView();\n              return true;\n            } else {\n              return false;\n            }\n\n          } else {\n            return false;\n          }\n        }\n      );\n    }, 500);\n  }\n\n  changeFormLabel(data) {\n    var that = this;\n    setTimeout(() => {\n      this.lexTree.lexicalEntryTree.treeModel.getNodeBy(\n        function (x) {\n          if (x.data.form != undefined) {\n            if (x.data.form == data['form']) {\n              x.data.label = data['new_label'];\n              that.lexTree.lexicalEntryTree.treeModel.update();\n              that.lexTree.updateTreeView();\n              return true;\n            } else {\n              return false;\n            }\n\n          } else {\n            return false;\n          }\n        }\n      );\n    }, 500);\n  }\n\n\n\n  changeFormType(data) {\n    var that = this;\n    //console.log(\"prova\")\n    setTimeout(() => {\n      this.lexTree.lexicalEntryTree.treeModel.getNodeBy(\n        function (x) {\n          if (x.data.form != undefined) {\n            if (x.data.form == data['form']) {\n              x.data.type = data['new_type'];\n              //console.log(x.data.note)\n              that.lexTree.lexicalEntryTree.treeModel.update();\n              that.lexTree.updateTreeView();\n              return true;\n            } else {\n              return false;\n            }\n\n          } else {\n            return false;\n          }\n        }\n      );\n    }, 500);\n  }\n\n  refreshAfterEdit(data) {\n    // 0 -> lexEdit: quando creo una nuova lexical entry\n    // 3 -> quando devo cambiare solo la label di una forma\n    // 5 -> quando devo cambiare il tipo di una forma\n    // 6 -> quando devo cambiare definizione a un senso\n    if (data != null) {\n      setTimeout(() => {\n        switch (data['request']) {\n          case 0: this.lexEdit(data); break;\n          case 3: this.changeFormLabel(data); break;\n          case 5: this.changeFormType(data); break;\n          case 6: this.changeSenseDefinition(data); break;\n        }\n      }, 100);\n    }\n\n\n  }\n\n  triggerLoad() {\n    this.lexicalService.refreshLangTable();\n  }\n\n  newLexicalEntry() {\n\n    this.lexicalService.newLexicalEntry().pipe(takeUntil(this.destroy$)).subscribe(\n      data => {\n        console.log(data);\n        let newLexEntryLabel = data['label'];\n        let parameters = this.lexTree.getParameters();\n        this.lexTree.lexicalEntriesFilter(parameters);\n        \n        this.toastr.success(data['lexicalEntry'] + ' added correctly', '', {\n          timeOut: 5000,\n        });\n\n        setTimeout(() => {\n          \n          //parameters['text'] = newLexEntryLabel\n          this.lexTree.lexicalEntryTree.treeModel.update();\n          this.lexTree.updateTreeView();\n          \n\n          setTimeout(() => {\n            this.lexTree.lexicalEntryTree.treeModel.getNodeBy(\n              function (x) {\n                if (x.data.lexicalEntry == data['lexicalEntry']) {\n                  x.setActiveAndVisible()\n                  return true;\n                } else {\n                  return false;\n                }\n              }\n            );\n          }, 500);\n        }, 200);\n      },\n      error => {\n        console.log(error);\n        this.toastr.error(error.error, 'Error', {\n          timeOut: 5000,\n        });\n      }\n    )\n  }\n\n  createNewFile(){\n    let element_id = 0;\n    let parameters = {\n      requestUUID : \"string\",\n      \"user-id\" : 0,\n      \"element-id\" : element_id,\n      filename : \"new_file\"+Math.floor(Math.random() * (99999 - 10) + 10)\n    }\n\n    this.documentService.createFile(parameters).pipe(takeUntil(this.destroy$)).subscribe(\n      data =>{\n        console.log(data)\n        this.textTree.treeText.treeModel.nodes.push(data.node);\n        this.textTree.counter = this.textTree.treeText.treeModel.nodes.length\n        this.textTree.treeText.treeModel.update();\n        this.toastr.info('New file added', '', {\n          timeOut: 5000,\n        });\n        this.textTree.treeText.treeModel.getNodeById(data.node.id).setActiveAndVisible();\n      },error=> {\n        console.log(error)\n      }\n    )\n  }\n\n\n  addNewFile(evt?) {\n    let element_id = 0;\n    console.log(evt.target.files)\n    let parameters, file_name;\n\n    if (evt.target.files != undefined) {\n      if (evt.target.files.length == 1) {\n        file_name = evt.target.files[0].name;\n        parameters = {\n          \"requestUUID\": \"string\",\n          \"user-id\": 0,\n          \"element-id\": element_id,\n          \"file-name\": file_name\n        }\n        const formData = new FormData();\n        formData.append('file', evt.target.files[0]);\n\n        this.documentService.uploadFile(formData, element_id, 11).pipe(takeUntil(this.destroy$)).subscribe(\n          data => {\n            console.log(data)\n\n            this.toastr.info('New file added', '', {\n              timeOut: 5000,\n            });\n            setTimeout(() => {\n\n              this.textTree.treeText.treeModel.nodes.push(data.node);\n              this.textTree.counter = this.textTree.treeText.treeModel.nodes.length\n              //console.log(this.textTree.treeText.treeModel.nodes.length)\n              //this.textTree.treeText.treeModel.updateTreeView();\n              this.textTree.treeText.treeModel.update();\n              this.textTree.treeText.treeModel.getNodeById(data.node.id).setActiveAndVisible();\n\n            }, 500);\n\n\n          }, error => {\n            console.log(error);\n            this.toastr.error('Error when adding new file', '', {\n              timeOut: 5000,\n            });\n          }\n        )\n      } else {\n\n        let files_array = Array.from(evt.target.files);\n        files_array.forEach((element : any) => {\n\n          file_name = element.name;\n          parameters = {\n            \"requestUUID\": \"string\",\n            \"user-id\": 0,\n            \"element-id\": element_id,\n            \"file-name\": file_name\n          }\n\n          const formData = new FormData();\n          formData.append('file', element);\n\n          this.documentService.uploadFile(formData, element_id, 11).pipe(takeUntil(this.destroy$)).subscribe(\n            data => {\n              console.log(data)\n\n              this.toastr.info('New file added', '', {\n                timeOut: 5000,\n              });\n              setTimeout(() => {\n\n                this.textTree.treeText.treeModel.nodes.push(data.node);\n                this.textTree.counter = this.textTree.treeText.treeModel.nodes.length\n                //console.log(this.textTree.treeText.treeModel.nodes.length)\n                //this.textTree.treeText.treeModel.updateTreeView();\n                this.textTree.treeText.treeModel.update();\n                this.textTree.treeText.treeModel.getNodeById(data.node.id).setActiveAndVisible();\n\n              }, 500);\n\n\n            }, error => {\n              console.log(error);\n              this.toastr.error('Error when adding new file', '', {\n                timeOut: 5000,\n              });\n            }\n          )\n        });\n      }\n    }\n\n    console.log(evt);\n  }\n\n  addNewFolder() {\n\n    let element_id = 0;\n    let parameters = {\n      \"requestUUID\": \"string\",\n      \"user-id\": 0,\n      \"element-id\": element_id\n    }\n\n\n    this.documentService.addFolder(parameters).pipe(takeUntil(this.destroy$)).subscribe(\n      data => {\n        console.log(data)\n        let id_new_node = 243;\n        /* let new_node = {\n          \"children\" : [],\n          \"element-id\" : id_new_node,\n          \"id\" : Math.floor(Math.random() * (99999 - 10) + 10),\n          \"metadata\" : {},\n          \"path\" : \"\",\n          \"name\" : \"new-folder_\"+ Math.floor(Math.random() * (99999 - 10) + 10),\n          \"type\" : \"directory\"\n        } */\n        if (data.node != undefined) {\n          this.toastr.info('New folder added', '', {\n            timeOut: 5000,\n          });\n          this.textTree.nodes.push(data.node);\n          this.textTree.updateTreeView();\n          this.textTree.treeText.treeModel.update();\n        }\n\n      }, error => {\n        console.log(error);\n        this.toastr.error('Error when creating new folder', '', {\n          timeOut: 5000,\n        });\n      }\n    )\n\n  }\n\n  exportLexicon(){\n    let parameters = {\n      \"fileName\": \"export\",\n      \"format\": \"turtle\",\n      \"inferred\": false\n    }\n\n    this.lexicalService.exportLexicon(parameters).pipe(takeUntil(this.destroy$)).subscribe(\n      data=> {\n        console.log(data);\n        var blob = new Blob([data], { type: 'text/turtle' });\n        var url = window.URL.createObjectURL(blob);\n        importedSaveAs(blob,\"file_name.txt\");\n       // window.open(url); \n        \n      }, error=> {\n        console.log(error);\n        \n      }\n    )\n  }\n\n  /* downloadFile(data: any) {\n    const blob = new Blob([data], { type: 'text/turtle' });\n    const url= window.URL.createObjectURL(blob);\n    window.open(url);\n  } */\n\n  addNewConceptSet(){\n    this.conceptService.createNewConceptSet().pipe(takeUntil(this.destroy$)).subscribe(\n      data=>{\n        console.log(data);\n        if (data != undefined) {\n          this.toastr.info('New Concept Set added', '', {\n            timeOut: 5000,\n          });\n          data['hasChildren'] = true;\n          this.skosTree.nodes.push(data);\n          this.skosTree.updateTreeView();\n          this.skosTree.skosTree.treeModel.update();\n          this.skosTree.skosTree.treeModel.getNodeById(data.id).setActiveAndVisible();\n        }\n       \n      },error=> {\n        console.log(error)\n        this.toastr.error('Error when creating new Concept Set', '', {\n          timeOut: 5000,\n        });\n      }\n    )\n  }\n\n  addNewLexicalConcept(){\n    this.conceptService.createNewLexicalConcept().pipe(takeUntil(this.destroy$)).subscribe(\n      data=>{\n        console.log(data);\n        if (data != undefined) {\n          this.toastr.info('New Lexical Concept added', '', {\n            timeOut: 5000,\n          });\n          data['hasChildren'] = true;\n          \n          this.skosTree.skos_nodes.push(data);\n          this.skosTree.updateTreeView();\n          this.skosTree.skosTree.treeModel.update();\n\n          setTimeout(() => {\n            this.skosTree.skosTree.treeModel.getNodeBy(element=>{\n              if(element.data.lexicalConcept == data.lexicalConcept){\n                element.setActiveAndVisible();\n              }\n            })  \n          }, 300);\n          \n        }\n       \n      },error=> {\n        console.log(error)\n        this.toastr.error('Error when creating new Concept Set', '', {\n          timeOut: 5000,\n        });\n      }\n    )\n  }\n\n  ngOnDestroy(): void {\n      this.refresh_after_edit_subscription.unsubscribe();\n      this.trigger_lex_tree_subscription.unsubscribe();\n      this.destroy$.next(true);\n      this.destroy$.complete();\n  }\n}\n","\n\n<div id=\"tree-accordion\" #accordion>\n\n\n    <!-- EPIGRAFI -->\n    <div class=\"card\">\n        <div class=\"card-header\" id=\"epigraphyHeading\">\n            <h5 class=\"mb-0 d-flex justify-content-between align-items-center\">\n                <button class=\"btn btn-link collapsed\" data-toggle=\"collapse\" data-target=\"#epigraphyCollapse\" aria-expanded=\"false\"\n                    aria-controls=\"epigraphyCollapse\">\n                    <i class=\"fa\"></i> Inscriptions\n                </button>\n                <div class=\"icons-container dropdown\">\n                    <button container=\"body\" placement=\"right\" ngbTooltip=\"Add new file / folder / empty file\" class=\"btn btn-link\" type=\"button\" id=\"textTreeActionDropdown\" data-toggle=\"dropdown\" aria-haspopup=\"true\" aria-expanded=\"false\"><i class=\"fa fa-plus\"></i></button>\n                    <!-- <button class=\"btn btn-link\"><i class=\"fa fa-file-import\"></i></button>\n                    <button class=\"btn btn-link\"><i class=\"fa fa-download\"></i></button>\n                    <button class=\"btn btn-link\" title=\"Language\"><i class=\"fa fa-globe-americas\"></i></button> -->\n                    <div class=\"dropdown-menu\" aria-labelledby=\"textTreeActionDropdown\">\n                        <a class=\"dropdown-item\" (click)=\"addFile.click()\" style=\"cursor: pointer;\">Add new file</a>\n                        <input #addFile type=\"file\" onclick=\"this.value = null\" accept=\".xml\" hidden (change)=\"addNewFile($event)\" multiple>\n                        <a class=\"dropdown-item\" (click)=\"addNewFolder()\" style=\"cursor: pointer;\">Add new folder</a>\n                        <div class=\"dropdown-divider\"></div>\n                        <a class=\"dropdown-item\" (click)=\"createNewFile()\" style=\"cursor: pointer;\">Create empty file</a>\n                    </div>\n                </div>\n               \n            </h5>\n        </div>\n        <div id=\"epigraphyCollapse\" class=\"collapse\" aria-labelledby=\"epigraphyHeading\" data-parent=\"#tree-accordion\">\n            <div class=\"card-body\">\n                <app-text-tree #textTree></app-text-tree>\n            </div>\n        </div>\n    </div>\n\n    <!-- LEXICAL ENTRIES -->\n    <div class=\"card\">\n        <div class=\"card-header\" id=\"lexicalHeading\">\n            <h5 class=\"mb-0 d-flex flex-wrap justify-content-between align-items-center\">\n                <button class=\"btn btn-link\" data-toggle=\"collapse\" data-target=\"#lexicalCollapse\"\n                    aria-expanded=\"true\" aria-controls=\"lexicalCollapse\" (click)=\"updateTreeParent()\">\n                    <i class=\"fa\"></i> Lexicon\n                </button>\n                <div class=\"icons-container\">\n                    <button placement=\"bottom\" [ngbTooltip]=\"switcher ? 'Enable label view' : 'Disable label view'\"\n                        [ngStyle]=\"switcher ? {'background-color': '#007bff', 'color': 'rgb(247 247 247)'} : {'background-color': 'transparent', 'color': '#007bff'}\"\n                        class=\"btn btn-link\" title=\"Switch to label view\"\n                        (click)=\"switchLabel(); updateTreeParent();\"><i class=\"fas fa-tag\"></i></button>\n                    <button placement=\"bottom\" ngbTooltip=\"Add new lexical entry\" class=\"btn btn-link\" title=\"Add new lexical entry\" (click)=\"newLexicalEntry()\"><i\n                            class=\"fa fa-plus\"></i></button>\n                    <button placement=\"bottom\" ngbTooltip=\"Export entire lexicon\" class=\"btn btn-link\" title=\"Export\" (click)=\"exportLexicon();\"><i class=\"fa fa-file-import\"></i></button>\n                    <!-- <button class=\"btn btn-link\" title=\"Download\"><i class=\"fa fa-download\"></i></button> -->\n                    <button placement=\"bottom\" ngbTooltip=\"Open language manager\" class=\"btn btn-link\" title=\"Edit Languages\" (click)=\"selectLanguageModal.show(); triggerLoad();\"><i\n                            class=\"fas fa-flag-usa\"></i></button>\n\n                    <app-modal #selectLanguageModal class=\"languages_modal\">\n                        <ng-container class=\"app-modal-header\">Language Manager</ng-container>\n                        <ng-container class=\"app-modal-body\">\n\n                            <app-language-manager></app-language-manager>\n\n                        </ng-container>\n                    </app-modal>\n                </div>\n            </h5>\n        </div>\n        <div id=\"lexicalCollapse\" class=\"collapse show\" aria-labelledby=\"lexicalHeading\" data-parent=\"#tree-accordion\">\n            <div class=\"card-body\">\n                <app-lexical-entry-tree #lexTree></app-lexical-entry-tree>\n            </div>\n        </div>\n    </div>\n\n    <!-- ONTOLOGY -->\n    <!-- <div class=\"card\">\n        <div class=\"card-header\" id=\"headingFour\">\n            <h5 class=\"mb-0 d-flex flex-wrap justify-content-between align-items-center\">\n                <button class=\"btn btn-link collapsed\" data-toggle=\"collapse\" data-target=\"#ontologia\"\n                    aria-expanded=\"false\" aria-controls=\"ontologia\">\n                    <i class=\"fa\"></i> Ontology\n                </button>\n                <div class=\"icons-container\">\n                    <button class=\"btn btn-link\"><i class=\"fa fa-plus\"></i></button>\n                    <button class=\"btn btn-link\"><i class=\"fa fa-file-import\"></i></button>\n                    <button class=\"btn btn-link\"><i class=\"fa fa-download\"></i></button>\n                    <button class=\"btn btn-link\" title=\"Language\"><i class=\"fa fa-globe-americas\"></i></button>\n                </div>\n            </h5>\n        </div>\n        <div id=\"ontologia\" class=\"collapse\" aria-labelledby=\"headingFour\" data-parent=\"#tree-accordion\">\n            <div class=\"card-body\">\n                <app-concept-tree #conceptTree></app-concept-tree>\n            </div>\n        </div>\n    </div> -->\n\n    <!-- SKOS -->\n    <div class=\"card\">\n        <div class=\"card-header\" id=\"headingSkos\">\n            <h5 class=\"mb-0 d-flex flex-wrap justify-content-between align-items-center\">\n                <button class=\"btn btn-link collapsed\" data-toggle=\"collapse\" data-target=\"#skos\"\n                    aria-expanded=\"false\" aria-controls=\"skos\">\n                    <i class=\"fa\"></i> Lexical Concept\n                </button>\n                \n                <div class=\"icons-container dropdown\">\n                    <button container=\"body\" placement=\"right\" ngbTooltip=\"Show actions\" class=\"btn btn-link\" type=\"button\" id=\"skosTreeDropdown\" data-toggle=\"dropdown\" aria-haspopup=\"true\" aria-expanded=\"false\"><i class=\"fa fa-plus\"></i></button>\n                    <div class=\"dropdown-menu\" aria-labelledby=\"skosTreeDropdown\">\n                        <!-- <a class=\"dropdown-item\" style=\"cursor: pointer;\" (click)=\"addNewConceptSet()\">Add new Concept Set</a> -->\n                        <a class=\"dropdown-item\" style=\"cursor: pointer;\" (click)=\"addNewLexicalConcept()\">Add new Lexical Concept</a>\n                    </div>\n                </div>\n                \n            </h5>\n        </div>\n        <div id=\"skos\" class=\"collapse\" aria-labelledby=\"headingSkos\" data-parent=\"#tree-accordion\">\n            <div class=\"card-body\">\n                <app-skos-tree #skosTree></app-skos-tree>\n            </div>\n        </div>\n    </div>\n</div>","/*\n   Copyright 2021-2022  Istituto di Linguistica Computazionale \"A. Zampolli\", Consiglio Nazionale delle Ricerche, Pisa, Italy.\n \nThis file is part of EpiLexo.\n\nEpiLexo is free software: you can redistribute it and/or modify it under the terms of the GNU General Public License as published by the Free Software Foundation, either version 3 of the License, or (at your option) any later version.\n\nEpiLexo is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for more details.\n\nYou should have received a copy of the GNU General Public License along with EpiLexo. If not, see <https://www.gnu.org/licenses/>.\n*/\n\nimport { Component, Input, OnDestroy, OnInit, SimpleChanges } from '@angular/core';\nimport { FormArray, FormBuilder, FormControl, FormGroup } from '@angular/forms';\nimport { LexicalEntriesService } from 'src/app/services/lexical-entries/lexical-entries.service';\nimport { ToastrService } from 'ngx-toastr';\nimport { BibliographyService } from 'src/app/services/bibliography-service/bibliography.service';\nimport { debounceTime, take, takeUntil } from 'rxjs/operators';\nimport { Subject, Subscription } from 'rxjs';\n\n\n@Component({\n  selector: 'app-bibliography-panel',\n  templateUrl: './bibliography-panel.component.html',\n  styleUrls: ['./bibliography-panel.component.scss']\n})\nexport class BibliographyPanelComponent implements OnInit, OnDestroy {\n\n  @Input() biblioData: any[];\n  bibliographyData: any[];\n  object: any;\n  countElement = 0;\n  loadingSynchro = [];\n  bibliographyForm = new FormGroup({\n    bibliography: new FormArray([this.createBibliography()]),\n  })\n  biblioArray: FormArray;\n  memoryNote = [];\n  memoryTextualRef = [];\n  destroy$ : Subject<boolean> = new Subject();\n  private subject: Subject<any> = new Subject();\n\n  add_biblio_req_subscription : Subscription;\n  subject_subscription : Subscription;\n\n  constructor(private lexicalService: LexicalEntriesService, private biblioService: BibliographyService, private formBuilder: FormBuilder, private toastr: ToastrService) { }\n\n  ngOnInit(): void {\n    this.bibliographyForm = this.formBuilder.group({\n      bibliography: this.formBuilder.array([])\n    })\n\n    this.add_biblio_req_subscription = this.biblioService.addBiblioReq$.subscribe(\n      incomingBiblio => {\n        if (incomingBiblio != null) {\n\n          let id = incomingBiblio.id != undefined ? incomingBiblio.id : '';\n          let title = incomingBiblio.title != undefined ? incomingBiblio.title : '';\n          let author = incomingBiblio.author != undefined ? incomingBiblio.author : '';\n          let date = incomingBiblio.date != undefined ? incomingBiblio.date : '';\n          let note = incomingBiblio.note != undefined ? incomingBiblio.note : '';\n          let textualReference = incomingBiblio.textualReference != undefined ? incomingBiblio.textualReference : '';\n          this.bibliographyData.push(incomingBiblio)\n          this.addBibliographyElement(id, title, author, date, note, textualReference);\n          this.memoryNote.push(note)\n          this.memoryTextualRef.push(textualReference)\n          this.countElement++;\n        } else {\n          this.object = null;\n          this.bibliographyData = null;\n        }\n      }\n    )\n\n    this.subject_subscription= this.subject.pipe(debounceTime(1000), takeUntil(this.destroy$)).subscribe(\n      data => {\n        this.onChanges(data)\n      }\n    )\n  }\n\n\n  ngOnChanges(changes: SimpleChanges) {\n\n    if (changes.biblioData.currentValue != undefined) {\n      this.object = changes.biblioData.currentValue;\n      this.bibliographyData = [];\n      this.countElement = 0;\n      this.memoryNote = [];\n      this.memoryTextualRef = [];\n      this.biblioArray = this.bibliographyForm.get('bibliography') as FormArray;\n      this.biblioArray.clear();\n\n      if (this.object.lexicalEntry != undefined && this.object.form == undefined) {\n        let lexId = this.object.lexicalEntry;\n        this.lexicalService.getBibliographyData(lexId).pipe(takeUntil(this.destroy$)).subscribe(\n          data => {\n            console.log(data);\n            if (data != []) {\n              let count = 0;\n              data.forEach(element => {\n                this.bibliographyData.push(element);\n\n                this.addBibliographyElement(element.id, element.title, element.author, element.date, element.note, element.textualReference)\n                this.memoryNote[count] = element.note;\n                this.memoryTextualRef[count] = element.textualReference\n                count++;\n                this.countElement++;\n              });\n\n              /* this.bibliographyData['parentNodeLabel']= this.object['lexicalEntry'];\n              this.bibliographyData['lexicalEntry']= this.object['lexicalEntry']; */\n            }\n\n\n\n          }, error => {\n\n            if(error.status == 200){\n\n            }else{\n              this.toastr.error(error.error, 'Error', {\n                timeOut: 5000,\n              });\n            }\n            \n\n          }\n        )\n\n      } else if (this.object.form != undefined) {\n        let formId = this.object.form;\n        this.lexicalService.getBibliographyData(formId).pipe(takeUntil(this.destroy$)).subscribe(\n          data => {\n            console.log(data);\n            let count = 0;\n            data.forEach(element => {\n              this.bibliographyData.push(element);\n\n              this.addBibliographyElement(element.id, element.title, element.author, element.date, element.note, element.textualReference)\n              this.memoryNote[count] = element.note;\n              this.memoryTextualRef[count] = element.textualReference\n              count++;\n              this.countElement++;\n            });\n\n            this.bibliographyData['parentNodeLabel'] = this.object['form'];\n            this.bibliographyData['form'] = this.object['form'];\n          }, error => {\n            this.toastr.error(error.error, 'Error', {\n              timeOut: 5000,\n            });\n            console.log(error);\n\n          }\n        )\n\n      } else if (this.object.sense != undefined) {\n        let senseId = this.object.sense;\n        this.lexicalService.getBibliographyData(senseId).pipe(takeUntil(this.destroy$)).subscribe(\n          data => {\n            console.log(data);\n            let count = 0;\n            data.forEach(element => {\n              this.bibliographyData.push(element);\n\n              this.addBibliographyElement(element.id, element.title, element.author, element.date, element.note, element.textualReference)\n              this.memoryNote[count] = element.note;\n              this.memoryTextualRef[count] = element.textualReference\n              count++;\n              this.countElement++;\n            });\n\n            this.bibliographyData['parentNodeLabel'] = this.object['sense'];\n            this.bibliographyData['sense'] = this.object['sense'];\n          }, error => {\n            this.toastr.error(error.error, 'Error', {\n              timeOut: 5000,\n            });\n            console.log(error);\n\n          }\n        )\n      } else if (this.object.etymology != undefined) {\n        let etymId = this.object.etymology;\n        this.lexicalService.getBibliographyData(etymId).pipe(takeUntil(this.destroy$)).subscribe(\n          data => {\n            console.log(data);\n            let count = 0;\n            data.forEach(element => {\n              this.bibliographyData.push(element);\n\n              this.addBibliographyElement(element.id, element.title, element.author, element.date, element.note, element.textualReference)\n              this.memoryNote[count] = element.note;\n              this.memoryTextualRef[count] = element.textualReference\n              count++;\n              this.countElement++;\n            });\n\n            this.bibliographyData['parentNodeLabel'] = this.object['etymology'];\n            this.bibliographyData['etymology'] = this.object['etymology'];\n          }, error => {\n            this.toastr.error(error.error, 'Error', {\n              timeOut: 5000,\n            });\n            console.log(error);\n\n          }\n        )\n      }\n    } else {\n      this.countElement = 0;\n      this.bibliographyData = null;\n    }\n  }\n\n  debounceKeyup(evt, index, field) {\n    this.lexicalService.spinnerAction('on');\n    this.subject.next({ evt, index, field })\n  }\n\n\n  onChanges(data) {\n    let fieldType = '';\n    console.log(data)\n    if (data != undefined) {\n\n      let newValue = data.evt.target.value;\n      let currentValue;\n      let index = data?.index;\n\n      let oldValue = '';\n      fieldType = data['field']\n      if (fieldType == 'http://www.w3.org/2004/02/skos/core#note') {\n        oldValue = this.memoryNote[index];\n      } else if (fieldType == 'http://www.w3.org/2000/01/rdf-schema#label') {\n        oldValue = this.memoryTextualRef[index];\n      }\n\n\n      let instanceName = this.bibliographyData[index].bibliography;\n\n\n      let parameters;\n\n      if (oldValue == '') {\n        parameters = {\n          type: \"bibliography\",\n          relation: fieldType,\n          value: newValue\n        }\n      } else {\n        parameters = {\n          type: \"bibliography\",\n          relation: fieldType,\n          value: newValue,\n          currentValue: oldValue\n        }\n      }\n\n\n\n      console.log(this.biblioArray.at(index))\n      console.log(parameters)\n\n      this.lexicalService.updateGenericRelation(instanceName, parameters).pipe(takeUntil(this.destroy$)).subscribe(\n        data => {\n          console.log(data);\n          this.lexicalService.spinnerAction('off');\n          this.lexicalService.updateCoreCard(this.object);\n          this.toastr.success('Bibliography item updated', '', {\n            timeOut: 5000,\n          });\n        }, error => {\n          console.log(error);\n          this.lexicalService.updateCoreCard({ lastUpdate: error.error.text })\n          this.lexicalService.spinnerAction('off');\n          if (error.status == 200) {\n            this.toastr.success('Bibliography item updated', '', {\n              timeOut: 5000,\n            });\n          } else {\n            this.toastr.error(error.error, 'Error', {\n              timeOut: 5000,\n            });\n          }\n\n        }\n      )\n\n\n      if (fieldType == 'http://www.w3.org/2004/02/skos/core#note') {\n        this.memoryNote[index] = newValue;\n      } else if (fieldType == 'http://www.w3.org/2000/01/rdf-schema#label') {\n        this.memoryTextualRef[index] = newValue;\n      }\n\n\n\n    }\n  }\n\n  removeItem(index) {\n    this.biblioArray = this.bibliographyForm.get('bibliography') as FormArray;\n    this.countElement--;\n\n    let instanceName = this.bibliographyData[index].bibliography;\n\n    this.lexicalService.removeBibliographyItem(instanceName).pipe(takeUntil(this.destroy$)).subscribe(\n      data => {\n        console.log(data)\n        this.lexicalService.updateCoreCard(this.object);\n        this.toastr.success('Element removed', '', {\n          timeOut: 5000,\n        });\n      }, error => {\n        console.log(error)\n        this.lexicalService.updateCoreCard({ lastUpdate: error.error.text })\n        if(error.status == 200){\n          this.toastr.success('Element removed', '', {\n            timeOut: 5000,\n          });\n        }else{\n          this.toastr.error(error.error, 'Error', {\n            timeOut: 5000,\n          });\n        }\n        \n      }\n    )\n\n\n    this.biblioArray.removeAt(index);\n    this.bibliographyData.splice(index, 1);\n    this.memoryNote.splice(index, 1)\n    this.memoryTextualRef.splice(index, 1)\n\n  }\n\n\n  addBibliographyElement(i?, t?, a?, d?, n?, l?) {\n    this.biblioArray = this.bibliographyForm.get('bibliography') as FormArray;\n    if (t == undefined) {\n      this.biblioArray.push(this.createBibliography());\n    } else {\n      this.biblioArray.push(this.createBibliography(i, t, a, d, n, l));\n    }\n  }\n\n  createBibliography(i?, t?, a?, d?, n?, l?) {\n    if (t == undefined) {\n      return this.formBuilder.group({\n        id: new FormControl(null),\n        title: new FormControl(null),\n        author: new FormControl(null),\n        date: new FormControl(null),\n        note: new FormControl(null),\n        textualReference: new FormControl(null)\n      })\n    } else {\n      return this.formBuilder.group({\n        id: new FormControl(i),\n        title: new FormControl(t),\n        author: new FormControl(a),\n        date: new FormControl(d),\n        note: new FormControl(n),\n        textualReference: new FormControl(l)\n      })\n    }\n  }\n\n  synchronizeBibliography(id, i) {\n    console.log(id)\n    this.loadingSynchro[i] = true;\n    let lexId = '';\n    if (this.object.lexicalEntry != undefined\n      && this.object.sense == undefined && this.object.form == undefined) {\n      console.log(1)\n      lexId = this.object.lexicalEntry;\n    } else if (this.object.form != undefined) {\n      lexId = this.object.form;\n      console.log(2)\n    } else if (this.object.sense != undefined) {\n      lexId = this.object.sense;\n      console.log(3)\n    } else if (this.object.etymology != undefined) {\n      lexId = this.object.etymology;\n    }\n\n    this.lexicalService.synchronizeBibliographyItem(lexId, id).pipe(debounceTime(500), takeUntil(this.destroy$)).subscribe(\n      data => {\n        console.log(data);\n        this.loadingSynchro[i] = false;\n      }, error => {\n        console.log(error);\n        if (error.status == 200) {\n          this.lexicalService.updateCoreCard({ lastUpdate: error.error.text })\n          this.toastr.success('Item n' + id + ' synchronized', '')\n        }\n        this.loadingSynchro[i] = false;\n      }\n    );\n  }\n\n  ngOnDestroy(): void {\n      this.add_biblio_req_subscription.unsubscribe();\n      this.subject_subscription.unsubscribe();\n      this.destroy$.next(true);\nthis.destroy$.complete();\n  }\n}\n","\n\n<div class=\"card\">\n    <div class=\"card-header\" id=\"bibliographyHeading\">\n        <h5 class=\"mb-0\">\n            <a class=\"btn btn-link w-100 d-flex align-self-center collapsed\" data-toggle=\"collapse\"\n                data-target=\"#bibliographyCollapse\" aria-expanded=\"true\" aria-controls=\"bibliographyCollapse\">\n                Bibliography Panel\n                <span *ngIf=\"countElement > 0\">&nbsp;({{countElement}})</span>\n                <i class=\"fa ml-auto\"></i>\n            </a>\n        </h5>\n    </div>\n    <div id=\"bibliographyCollapse\" class=\"collapse\" aria-labelledby=\"bibliographyHeading\">\n\n        <div class=\"card-body\">\n            <div id=\"accordion\">\n            <!----- FORM ----->\n            <form [formGroup]=\"bibliographyForm\" *ngIf=\"object!=null\"> <!--  -->\n                <div formArrayName=\"bibliography\">\n                    <div *ngFor=\"let biblio of bibliographyForm['controls'].bibliography['controls']; let i = index\">\n                        <div [formGroupName]=\"i\">\n                            <div class=\"form-group row ml-2 mt-3 mr-2\">\n                                <div class=\"input-group col-xl-12 p-0\">\n                                    \n                                    <div class=\"card\">\n                                        <a class=\"biblioCollapse\" data-toggle=\"collapse\" [attr.data-target]=\"'#collapse-'+i\" aria-expanded=\"true\" [attr.aria-controls]=\"'#collapse-'+i\"><span class=\"text-id pointer\"><b>{{biblio.get(\"author\").value}} - {{biblio.get(\"date\").value}} ({{biblio.get(\"title\").value != undefined ? (biblio.get(\"title\").value | slice:0:10) +'...' : ''}})</b></span></a>\n                                        <span *ngIf=\"bibliographyData != undefined\" class=\"icons-container\">\n                                            <!-- {{bibliographyData[i]['url'] | json}} -->\n                                            <span><a target=\"_blank\" class=\"pointer text-primary\" (click)=\"synchronizeBibliography(biblio.get('id').value, i)\"><span class=\"synchro-icon\"><i class=\"fas fa-sync-alt\" *ngIf=\"!loadingSynchro[i]\"></i> <i class=\"fas fa-sync fa-spin\" *ngIf=\"loadingSynchro[i]\"></i></span></a></span>\n                                            <span ><a href=\"https://www.zotero.org/groups/2552746/prin_italia_antica/items/{{bibliographyData[i]['id']}}/library\" target=\"_blank\" class=\"pointer text-primary\"><span class=\"external-icon\"><i class=\"fas fa-external-link-alt\"></i></span></a></span>\n                                            <span><a *ngIf=\"bibliographyData[i]['url'] != ''\" [href]=\"bibliographyData[i]['url']\" target=\"_blank\" class=\"pointer text-primary\"><span class=\"download-icon\"><i class=\"fas fa-download\"></i></span></a></span>\n                                        </span>\n                                        \n                                        <a class=\"pointer\" (click)=\"removeItem(i)\"><span class=\"trash-icon\"><i class=\"fa fa-trash text-danger\"></i></span></a> \n                                        \n                                        <div [id]=\"'collapse-'+i\" class=\"collapse\" data-parent=\"#accordion\">\n                                            <div class=\"card-body\">\n                                                <div class=\"form-group row ml-2 mr-2 mb-0\">\n                                                    <label for=\"inputLabel\" class=\"col-lg-4 col-form-label\">Title:</label>\n                                                    <div class=\"input-group col-lg-8 pl-0\">\n                                                        <input id=\"title\" formControlName=\"title\" name=\"title\" type=\"text\" class=\"form-control\" placeholder=\"\" disabled>\n                                                    </div>\n                                                </div>           \n                                                <div class=\"form-group row ml-2 mr-2 mb-0\">\n                                                    <label for=\"inputLabel\" class=\"col-lg-4 col-form-label\">Author:</label>\n                                                    <div class=\"input-group col-lg-8 pl-0\">\n                                                        <input id=\"author\"  formControlName=\"author\" name=\"author\" type=\"text\" class=\"form-control\" placeholder=\"\" disabled>\n                                                    </div>\n                                                </div>   \n                                                <div class=\"form-group row ml-2 mr-2 mb-0\">\n                                                    <label for=\"inputLabel\" class=\"col-lg-4 col-form-label\">Date:</label>\n                                                    <div class=\"input-group col-lg-8 pl-0\">\n                                                        <input id=\"date\"  formControlName=\"date\" name=\"date\" type=\"text\" class=\"form-control\" placeholder=\"\" disabled>\n                                                    </div>\n                                                </div>\n                                                <div class=\"form-group row ml-2 mr-2\">\n                                                    <label for=\"inputLabel\" class=\"col-lg-4 col-form-label\">Note:</label>\n                                                    <div class=\"input-group col-lg-8 pl-0\">\n                                                        <!-- <input id=\"note\"  formControlName=\"note\" name=\"note\" type=\"text\" class=\"form-control\" placeholder=\"\"> -->\n                                                        <textarea (keyup)=\"debounceKeyup($event, i, 'http://www.w3.org/2004/02/skos/core#note')\" formControlName=\"note\" name=\"note\" class=\"form-control\" style=\"resize: none;\"></textarea>\n                                                    </div>\n                                                </div>  \n                                                <div class=\"form-group row ml-2 mr-2\">\n                                                    <label for=\"inputLabel\" class=\"col-lg-4 col-form-label\">Page(s):</label>\n                                                    <div class=\"input-group col-lg-8 pl-0\">\n                                                        <!-- <input id=\"note\"  formControlName=\"note\" name=\"note\" type=\"text\" class=\"form-control\" placeholder=\"\"> -->\n                                                        <textarea (keyup)=\"debounceKeyup($event, i, 'http://www.w3.org/2000/01/rdf-schema#label')\" formControlName=\"textualReference\" name=\"textualReference\" class=\"form-control\" style=\"resize: none;\"></textarea>\n                                                    </div>\n                                                </div>     \n                                            </div>\n                                        </div>                                            \n                                    </div>\n                                    \n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </form>\n            </div>\n           \n        </div>\n    </div>\n</div>","import { KeycloakService } from 'keycloak-angular';\nimport { environment } from '../../../environments/environment';\n \nexport function initializer(keycloak: KeycloakService): () => Promise<any> {\n    return (): Promise<void> => {\n        return new Promise(async (resolve, reject) => {\n          try {\n            await keycloak.init({\n                config: {\n                    url: environment.keycloak.issuer,\n                    realm: environment.keycloak.realm,\n                    clientId: environment.keycloak.clientId\n                },\n              loadUserProfileAtStartUp: false,\n              enableBearerInterceptor: true,\n              bearerPrefix: 'Bearer',\n              initOptions: {\n                onLoad: 'check-sso',\n                checkLoginIframe: true\n              },\n              bearerExcludedUrls: [\n                'api.zotero.org'\n              ]\n            });\n            resolve();\n          } catch (error) {\n            reject(error);\n          }\n        });\n      };\n}","/*\n   Copyright 2021-2022  Istituto di Linguistica Computazionale \"A. Zampolli\", Consiglio Nazionale delle Ricerche, Pisa, Italy.\n \nThis file is part of EpiLexo.\n\nEpiLexo is free software: you can redistribute it and/or modify it under the terms of the GNU General Public License as published by the Free Software Foundation, either version 3 of the License, or (at your option) any later version.\n\nEpiLexo is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for more details.\n\nYou should have received a copy of the GNU General Public License along with EpiLexo. If not, see <https://www.gnu.org/licenses/>.\n*/\n\nimport { Component, HostListener, Input, OnChanges, OnDestroy, OnInit, SimpleChanges } from '@angular/core';\nimport { AngularEditorConfig } from '@kolkov/angular-editor';\nimport { ToastrService } from 'ngx-toastr';\nimport { Subject, Subscription } from 'rxjs';\nimport { debounceTime, takeUntil } from 'rxjs/operators';\nimport { ConceptService } from 'src/app/services/concept/concept.service';\nimport { LexicalEntriesService } from 'src/app/services/lexical-entries/lexical-entries.service';\n\n@Component({\n  selector: 'app-note-panel',\n  templateUrl: './note-panel.component.html',\n  styleUrls: ['./note-panel.component.scss']\n})\nexport class NotePanelComponent implements OnInit, OnChanges, OnDestroy {\n\n  @Input() noteData: string;\n  object: any;\n  private subject: Subject<string> = new Subject();\n\n  note_subscription: Subscription;\n  lex_entry_update_subscription: Subscription;\n  form_update_subscription: Subscription;\n  sense_update_subscription: Subscription;\n  etymology_update_subscription: Subscription;\n\n  destroy$ : Subject<boolean> = new Subject();\n\n  @HostListener('window:keyup', ['$event'])\n  keyEvent(event: KeyboardEvent) {\n    /* //console.log(event) */\n    event.preventDefault();\n    event.stopPropagation();\n    return;\n  }\n\n  htmlContent: '';\n  editorConfig: AngularEditorConfig = {\n    editable: true,\n    spellcheck: true,\n    height: 'auto',\n    minHeight: '0',\n    maxHeight: '150px',\n    width: 'auto',\n    minWidth: '0',\n    translate: 'yes',\n    enableToolbar: true,\n    showToolbar: true,\n    placeholder: 'Enter text here...',\n    defaultParagraphSeparator: '',\n    customClasses: [\n      {\n        name: 'quote',\n        class: 'quote',\n      },\n      {\n        name: 'redText',\n        class: 'redText'\n      },\n      {\n        name: 'titleText',\n        class: 'titleText',\n        tag: 'h1',\n      },\n    ],\n    uploadUrl: 'v1/image',\n    uploadWithCredentials: false,\n    sanitize: true,\n    toolbarPosition: 'top',\n    toolbarHiddenButtons: [\n      [\n        'undo',\n        'redo',\n        'strikeThrough',\n        'justifyLeft',\n        'justifyCenter',\n        'justifyRight',\n        'justifyFull',\n        'indent',\n        'outdent',\n        'insertUnorderedList',\n        'insertOrderedList',\n        'heading',\n        'fontName'\n      ],\n      [\n        'fontSize',\n        'textColor',\n        'backgroundColor',\n        'customClasses',\n        'link',\n        'unlink',\n        'insertImage',\n        'insertVideo',\n        'insertHorizontalRule',\n        'toggleEditorMode'\n      ]\n    ]\n  };\n  constructor(private lexicalService: LexicalEntriesService, \n              private toastr: ToastrService,\n              private conceptService : ConceptService) { }\n\n  ngOnInit(): void {\n    this.editorConfig.editable = false;\n\n\n    this.subject.pipe(debounceTime(1000), takeUntil(this.destroy$)).subscribe(\n      newNote => {\n        if (this.noteData != null) {\n          this.lexicalService.spinnerAction('on');\n          console.log(this.object)\n          //console.log(this.object)\n          if (this.object.lexicalEntry != undefined && this.object.form == undefined && this.object.sense == undefined) {\n            var lexId = this.object.lexicalEntry;\n            var parameters = {\n              relation: \"http://www.w3.org/2004/02/skos/core#note\",\n              value: newNote\n            }\n            this.lexicalService.updateLexicalEntry(lexId, parameters).pipe(takeUntil(this.destroy$)).subscribe(\n              data => {\n                //console.log(data);\n                data['request'] = 0;\n                data['new_note'] = newNote;\n                this.lexicalService.refreshAfterEdit(data);\n                this.lexicalService.spinnerAction('off');\n                this.toastr.success('Note updated', '', {\n                  timeOut: 5000,\n                });\n              },\n              error => {\n                //console.log(error);\n                const data = this.object;\n                data['request'] = 0;\n                data['new_note'] = newNote;\n                this.lexicalService.refreshAfterEdit(data);\n                this.lexicalService.updateCoreCard({ lastUpdate: error.error.text })\n                this.lexicalService.spinnerAction('off');\n                if(error.status != 200){\n                  this.toastr.error(error.error, '', {\n                    timeOut: 5000,\n                  });\n                }else if(error.status == 200){\n                  this.toastr.success('Note updated', '', {\n                    timeOut: 5000,\n                  });\n                }\n                \n              }\n            )\n          } else if (this.object.form != undefined) {\n            var formId = this.object.form;\n            var parameters = {\n              relation: \"http://www.w3.org/2004/02/skos/core#note\",\n              value: newNote\n            }\n            this.lexicalService.updateForm(formId, parameters).pipe(takeUntil(this.destroy$)).subscribe(\n              data => {\n                //console.log(data);\n                data['request'] = 0;\n                data['new_note'] = newNote;\n                this.lexicalService.refreshAfterEdit(data);\n                this.lexicalService.spinnerAction('off');\n                this.toastr.success('Note updated', '', {\n                  timeOut: 5000,\n                });\n              },\n              error => {\n                //console.log(error);\n                const data = this.object;\n                data['request'] = 0;\n                data['new_note'] = newNote;\n                this.lexicalService.refreshAfterEdit(data);\n                this.lexicalService.updateCoreCard({ lastUpdate: error.error.text })\n                this.lexicalService.spinnerAction('off');\n                this.toastr.success('Note updated', '', {\n                  timeOut: 5000,\n                });\n              }\n            )\n          } else if (this.object.sense != undefined) {\n            var senseId = this.object.sense;\n            var parameters = {\n              relation: \"http://www.w3.org/2004/02/skos/core#note\",\n              value: newNote\n            }\n            this.lexicalService.updateSense(senseId, parameters).pipe(takeUntil(this.destroy$)).subscribe(\n              data => {\n                //console.log(data);\n                data['request'] = 0;\n                data['new_note'] = newNote;\n                this.lexicalService.refreshAfterEdit(data);\n                this.lexicalService.spinnerAction('off');\n                this.toastr.success('Note updated', '', {\n                  timeOut: 5000,\n                });\n              },\n              error => {\n                //console.log(error);\n                const data = this.object;\n                data['request'] = 0;\n                data['new_note'] = newNote;\n                this.lexicalService.refreshAfterEdit(data);\n                this.lexicalService.updateCoreCard({ lastUpdate: error.error.text })\n                this.lexicalService.spinnerAction('off');\n                this.toastr.success('Note updated', '', {\n                  timeOut: 5000,\n                });\n              }\n            )\n          } else if (this.object.etymology != undefined) {\n            var etymId = this.object.etymology;\n            var parameters = {\n              relation: \"http://www.w3.org/2004/02/skos/core#note\",\n              value: newNote\n            }\n            this.lexicalService.updateEtymology(etymId, parameters).pipe(takeUntil(this.destroy$)).subscribe(\n              data => {\n                //console.log(data);\n                data['request'] = 0;\n                data['new_note'] = newNote;\n                this.lexicalService.refreshAfterEdit(data);\n                this.lexicalService.spinnerAction('off');\n                this.toastr.success('Note updated', '', {\n                  timeOut: 5000,\n                });\n              },\n              error => {\n                //console.log(error);\n                const data = this.object;\n                data['request'] = 0;\n                data['new_note'] = newNote;\n                this.lexicalService.refreshAfterEdit(data);\n                this.lexicalService.updateCoreCard({ lastUpdate: error.error.text })\n                this.lexicalService.spinnerAction('off');\n                if(error.status == 200){\n                  this.toastr.success('Note updated', '', {\n                    timeOut: 5000,\n                  });\n                }\n                \n              }\n            )\n          }else if(this.object.lexicalConcept !=undefined){\n            let lexicalConceptID = this.object.lexicalConcept;\n\n            let parameters = {\n              relation: \"http://www.w3.org/2004/02/skos/core#note\",\n              source: this.object.lexicalConcept,\n              target: newNote,\n              oldTarget: this.object.note ,\n              targetLanguage: this.object.language,\n              oldTargetLanguage : this.object.language\n            }\n    \n    \n            this.conceptService.updateNoteProperty(parameters).pipe(takeUntil(this.destroy$)).subscribe(\n              data=> {\n                console.log(data)\n              }, error=> {\n                console.log(error);\n                \n                //this.lexicalService.changeDecompLabel(next)\n                if (error.status != 200) {\n                    this.toastr.error(error.error, 'Error', {\n                        timeOut: 5000,\n                    });\n                } else {\n                  \n                  this.lexicalService.spinnerAction('off');\n                  this.lexicalService.updateCoreCard({ lastUpdate: error.error.text });\n                  this.toastr.success('Definition changed correctly for ' + this.object.lexicalConcept, '', {\n                      timeOut: 5000,\n                  });\n\n                  this.object.note = newNote;\n                }\n              }\n            )\n\n          } \n        }\n      }\n    )\n\n    this.lexicalService.deleteReq$.pipe(takeUntil(this.destroy$)).subscribe(\n      data => {\n        this.editorConfig.editable = false;\n        this.noteData = null;\n        this.object = null;\n      }\n    )\n  }\n\n  ngOnChanges(changes: SimpleChanges) {\n\n    if (changes.noteData.currentValue == null) {\n      this.editorConfig.editable = false;\n      this.noteData = null;\n      this.object = null;\n    } else {\n      this.editorConfig.editable = true;\n      this.noteData = changes.noteData.currentValue.note;\n      /* if(changes.noteData.currentValue.lexicalConcept){\n        this.noteData = '';\n      } */\n      this.object = changes.noteData.currentValue;\n    }\n\n    /* //console.log(changes) */\n\n  }\n\n  onChanges(evt) {\n    if (evt.key != \"Control\" && evt.key != 'Alt' && evt.key != 'Shift') {\n      this.subject.next(this.noteData);\n    }\n\n  }\n\n  ngOnDestroy(): void {\n   \n    this.destroy$.next(true);\n    this.destroy$.complete();\n  }\n\n}\n","\n\n<div class=\"card\">\n    <div class=\"card-header\" id=\"noteHeading\">\n        <h5 class=\"mb-0\">\n            <a class=\"btn btn-link w-100 d-flex align-self-center collapsed\" data-toggle=\"collapse\" data-target=\"#noteCollapse\" aria-expanded=\"true\" aria-controls=\"noteCollapse\">\n                Note Panel<i class=\"fa ml-auto\"></i>\n            </a>\n        </h5>\n    </div>\n    <div id=\"noteCollapse\" class=\"collapse\" aria-labelledby=\"noteHeading\">\n        <div class=\"card-body\">\n           <angular-editor *ngIf=\"noteData != null\" [placeholder]=\"'Enter text here...'\" [(ngModel)]=\"noteData\" [config]=\"editorConfig\" (keyup)=\"onChanges($event)\" readonly></angular-editor>\n        </div>\n    </div>\n</div>\n","/*\n   Copyright 2021-2022  Istituto di Linguistica Computazionale \"A. Zampolli\", Consiglio Nazionale delle Ricerche, Pisa, Italy.\n \nThis file is part of EpiLexo.\n\nEpiLexo is free software: you can redistribute it and/or modify it under the terms of the GNU General Public License as published by the Free Software Foundation, either version 3 of the License, or (at your option) any later version.\n\nEpiLexo is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for more details.\n\nYou should have received a copy of the GNU General Public License along with EpiLexo. If not, see <https://www.gnu.org/licenses/>.\n*/\n\nimport { HttpClient } from '@angular/common/http';\nimport { Injectable } from '@angular/core';\nimport { BehaviorSubject, Observable } from 'rxjs';\nimport { shareReplay } from 'rxjs/operators';\n\nimport { AuthService } from '../auth/auth.service';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class LexicalEntriesService {\n\n  private arrayPanelFormsData = {};\n\n  private _coreFormData: BehaviorSubject<object> = new BehaviorSubject(null);\n  private _attestationPanelData: BehaviorSubject<object> = new BehaviorSubject(null);\n  private _etymologyData: BehaviorSubject<object> = new BehaviorSubject(null);\n  private _rightPanelData: BehaviorSubject<object> = new BehaviorSubject(null);\n  private _deleteLexicalEntryReq: BehaviorSubject<any> = new BehaviorSubject(null);\n  private _addSubElementReq: BehaviorSubject<any> = new BehaviorSubject(null);\n  private _updateCoreCardReq: BehaviorSubject<object> = new BehaviorSubject(null);\n  private _spinnerAction: BehaviorSubject<string> = new BehaviorSubject(null);\n  private _refreshLanguageTable: BehaviorSubject<object> = new BehaviorSubject(null);\n  private _refreshAfterEdit : BehaviorSubject<object> = new BehaviorSubject(null);\n  private _refreshFilter : BehaviorSubject<object> = new BehaviorSubject(null);\n  private _updateLangSelect : BehaviorSubject<object> = new BehaviorSubject(null);\n  private _triggerNotePanel : BehaviorSubject<boolean> = new BehaviorSubject(null);\n  private _triggerAttestationPanel : BehaviorSubject<boolean> = new BehaviorSubject(null);\n  private _changeDecompLabel : BehaviorSubject<string> = new BehaviorSubject(null);\n  private _decompData : BehaviorSubject<object> = new BehaviorSubject(null);\n  private _refreshLinkCounter: BehaviorSubject<string> = new BehaviorSubject(null);\n  private _triggerLexicalEntryTree : BehaviorSubject<object> = new BehaviorSubject(null);\n  private _triggerSameAs : BehaviorSubject<object> = new BehaviorSubject(null);\n\n  morphologyData;\n\n  private baseUrl = \"/LexO-backend-itant_demo/service/\"\n  private key = \"PRINitant19\";\n  private author = \"\";\n  private bibliographyIRI = 'http://lexica/mylexicon/bibliography#'\n  private lexicalIRI = 'http://lexica/mylexicon#';\n  private lexicalPrefix = 'lex'\n\n  coreData$ = this._coreFormData.asObservable();\n  decompData$ = this._decompData.asObservable();\n  attestationPanelData$ = this._attestationPanelData.asObservable();\n  etymologyData$ = this._etymologyData.asObservable();\n  rightPanelData$ = this._rightPanelData.asObservable();\n  deleteReq$ = this._deleteLexicalEntryReq.asObservable();\n  addSubReq$ = this._addSubElementReq.asObservable();\n  updateCoreCardReq$ = this._updateCoreCardReq.asObservable();\n  spinnerAction$ = this._spinnerAction.asObservable();\n  refreshLangTable$ = this._refreshLanguageTable.asObservable();\n  refreshAfterEdit$ = this._refreshAfterEdit.asObservable();\n  refreshFilter$ = this._refreshFilter.asObservable();\n  updateLangSelect$ = this._updateLangSelect.asObservable();\n  triggerNotePanel$ = this._triggerNotePanel.asObservable();\n  triggerAttestationPanel$ = this._triggerAttestationPanel.asObservable();\n  changeDecompLabel$ = this._changeDecompLabel.asObservable();\n  refreshLinkCounter$ = this._refreshLinkCounter.asObservable();\n  triggerLexicalEntryTree$ = this._triggerLexicalEntryTree.asObservable();\n  triggerSameAs$ = this._triggerSameAs.asObservable();\n\n  constructor(private http: HttpClient, private auth: AuthService) { }\n\n  refreshLinkCounter(value:string){\n    this._refreshLinkCounter.next(value);\n  }\n\n  sendToCoreTab(object: object) {\n    this._coreFormData.next(object)\n  } \n\n  sendToDecompTab(object: object){\n    this._decompData.next(object);\n  }\n  \n  sendToAttestationPanel(object: object) {\n    this._attestationPanelData.next(object)\n  } \n\n  changeDecompLabel(string:string){\n    this._changeDecompLabel.next(string);\n  }\n  \n\n  sendToRightTab(object: object) {\n    this._rightPanelData.next(object);\n  }\n\n  sendToEtymologyTab(object: object) {\n    this._etymologyData.next(object);\n  }\n\n  deleteRequest(request? : any) {\n    this._deleteLexicalEntryReq.next(request);\n  }\n\n  addSubElementRequest(request?: any){\n    this._addSubElementReq.next(request);\n  }\n\n  updateCoreCard(object: object) {\n    this._updateCoreCardReq.next(object)\n  }\n\n  spinnerAction(string: string) {\n    this._spinnerAction.next(string)\n  }\n\n  refreshLangTable(){\n    this._refreshLanguageTable.next(null);\n  }\n\n  refreshAfterEdit(object: object){\n    this._refreshAfterEdit.next(object);\n  }\n\n  refreshFilter(object: object){\n    this._refreshFilter.next(object);\n  }\n\n  updateLangSelect(object: object){\n    this._updateLangSelect.next(object);\n  }\n\n  triggerNotePanel(bool: boolean){\n    this._triggerNotePanel.next(bool);\n  }\n\n  triggerAttestationPanel(bool: boolean){\n    this._triggerAttestationPanel.next(bool);\n  }\n\n  triggerLexicalEntryTree(object : object){\n    this._triggerLexicalEntryTree.next(object);\n  }\n\n  triggerSameAs(object : object){\n    this._triggerSameAs.next(object);\n  }\n\n  //POST: /lexicon/lexicalEntries ---> get lexical entries list\n  getLexicalEntriesList(parameters: any): Observable<any> {\n    return this.http.post(this.baseUrl + \"lexicon/data/lexicalEntries\", parameters);\n  }\n\n  //POST: /lexicon/lexicalSenses ---> get lexical entries list\n  getLexicalSensesList(parameters: any): Observable<any> {\n    return this.http.post(this.baseUrl + \"lexicon/data/filteredSenses\", parameters);\n  }\n\n  //POST: /lexicon/data/forms ---> get form list\n  getFormList(parameters: any): Observable<any> {\n    return this.http.post(this.baseUrl + \"lexicon/data/filteredForms\", parameters);\n  }\n\n  //GET /lexicon/data/{id}/elements --> get elements of lexical entry\n  getLexEntryElements(instance: string): Observable<any> {\n    return this.http.get(this.baseUrl + \"lexicon/data/elements?key=lexodemo&id=\" + encodeURIComponent(instance));\n  }\n\n  //GET /lexicon/data/{id}/lexicalEntry --> get specific aspect (morphology, syntax, ...) associated with a given lexical entry\n  getLexEntryData(instance: string): Observable<any> {\n    return this.http.get(`${this.baseUrl}lexicon/data/lexicalEntry?key=${this.key}&aspect=core&id=${encodeURIComponent(instance)}`).pipe(\n      shareReplay()\n    );\n  }\n\n  //GET /lexicon/data/{id}/lexicalEntryLinguisticRelation --> This method returns the relations with other lexical entities according to the input type\n  getLexEntryLinguisticRelation(lexId: string, property: string): Observable<any> {\n    return this.http.get(`${this.baseUrl}lexicon/data/linguisticRelation?key=${this.key}&id=${encodeURIComponent(lexId)}&property=${property}`);\n  }\n\n  //GET /lexicon/data/{id}/lexicalEntryLinguisticRelation --> This method returns the relations with other lexical entities according to the input type\n  getLexEntryGenericRelation(lexId: string, property: string): Observable<any> {\n    return this.http.get(`${this.baseUrl}lexicon/data/genericRelation?key=${this.key}&id=${encodeURIComponent(lexId)}&property=${property}`);\n  }\n\n\n  //GET /lexicon/data/{id}/forms --> get forms of lexical entry\n  getLexEntryForms(instance: string): Observable<any> {\n    return this.http.get(this.baseUrl + \"lexicon/data/forms?key=lexodemo&id=\"+encodeURIComponent(instance));\n  }\n\n\n  //GET /lexicon/data/{id}/form --> get data about a single form \n  getFormData(formId: string, aspect: string): Observable<any> {\n    return this.http.get(this.baseUrl + \"lexicon/data/form?key=\" + this.key + \"&aspect=\" + aspect + \"&id=\" + encodeURIComponent(formId))\n  }\n\n  getOntolexRepresentations(): Observable<any> {\n    return this.http.get(this.baseUrl + \"ontolex/data/representation\")\n  }\n\n  getLexinfoRepresentations(): Observable<any> {\n    return this.http.get(this.baseUrl + \"lexinfo/data/representation\")\n  }\n\n\n  //GET /lexicon/data/{id}/lexicalSense --> get data about a single form \n  getSenseData(senseId: string, aspect: string): Observable<any> {\n    return this.http.get(this.baseUrl + \"lexicon/data/lexicalSense?key=\" + this.key + \"&aspect=\" + aspect + \"&id=\" + encodeURIComponent(senseId))\n  }\n\n  //GET /lexicon/data/{id}/senses --> get list of senses of a lexical entry\n  getSensesList(instance: any): Observable<any> {\n    return this.http.get(this.baseUrl + \"lexicon/data/senses?key=lexodemo&id=\"+encodeURIComponent(instance));\n  }\n\n  //GET /lexicon/data/languages --> Lexicon languages list\n  getLexiconLanguages(): Observable<any> {\n    return this.http.get(this.baseUrl + \"lexicon/data/languages\");\n  }\n\n  //GET /lexicon/statistics/languages --> get languages list for lexical entries menu filter search\n  getLanguages(): Observable<any> {\n    return this.http.get(this.baseUrl + \"lexicon/statistics/languages?key=\" + this.key + \"\");\n  }\n\n  //GET /lexicon/types --> get types list\n  getTypes(): Observable<any> {\n    return this.http.get(this.baseUrl + \"lexicon/statistics/types?key=\" + this.key + \"\");\n  }\n\n  //GET /lexicon/authors --> get authors list\n  getAuthors(): Observable<any> {\n    return this.http.get(this.baseUrl + \"lexicon/statistics/authors?key=\" + this.key + \"\");\n  }\n\n  //GET /lexicon/pos --> get pos list\n  getPos(): Observable<any> {\n    return this.http.get(this.baseUrl + \"lexicon/statistics/pos?key=\" + this.key + \"\");\n  }\n\n  //GET /lexicon/states --> get states list\n  getStatus(): Observable<any> {\n    return this.http.get(this.baseUrl + \"lexicon/statistics/status?key=\" + this.key + \"\");\n  }\n\n   //GET /lexicon/namespaces --> get namespaces list\n   getNamespaces(): Observable<any> {\n    return this.http.get(this.baseUrl + \"lexicon/statistics/namespaces?key=\" + this.key + \"\");\n  }\n\n\n  //GET /lexicon/creation/lexicalEntry --> create new lexical entry\n  newLexicalEntry(): Observable<any> {\n    this.author = this.auth.getUsername();\n    return this.http.get(this.baseUrl + \"lexicon/creation/lexicalEntry?key=\" + this.key + \"&author=\" + this.author + \"&prefix=\" + this.lexicalPrefix + \"&baseIRI=\" + encodeURIComponent(this.lexicalIRI));\n  }\n\n\n  //GET /lexicon/delete/{id}/lexicalEntry --> delete lexical entry\n  deleteLexicalEntry(lexId): Observable<any> {\n    return this.http.get(this.baseUrl + \"lexicon/delete/lexicalEntry?key=\" + this.key + \"&id=\" + encodeURIComponent(lexId));\n  }\n\n  //GET /lexicon/delete/{id}/form --> delete lexical entry\n  deleteForm(lexId): Observable<any> {\n    return this.http.get(this.baseUrl + \"lexicon/delete/form?key=\" + this.key + \"&id=\" + encodeURIComponent(lexId));\n  }\n\n  //GET /lexicon/delete/{id}/lexicalSense --> delete lexical entry\n  deleteSense(lexId): Observable<any> {\n    return this.http.get(this.baseUrl + \"lexicon/delete/lexicalSense?key=\" + this.key + \"&id=\" + encodeURIComponent(lexId));\n  }\n\n  //GET  /lexicon/delete/{id}/language  --> Lexicon language deletion\n  deleteLanguage(langId): Observable<any> {\n    return this.http.get(this.baseUrl + \"lexicon/delete/language?key=\" + this.key + \"&id=\" + encodeURIComponent(langId));\n  }\n\n  //POST  /lexicon/delete/{id}/linguisticRelation  --> delete linguistic relation\n  deleteLinguisticRelation(lexId, parameters): Observable<any> {\n    return this.http.post(this.baseUrl + \"lexicon/delete/relation?key=\" + this.key + \"&id=\" + encodeURIComponent(lexId), parameters);\n  }\n\n  //POST /lexicon/update/{id}/lexicalEntry --> lexical entry update\n  updateLexicalEntry(lexId, parameters): Observable<any> {\n    this.author = this.auth.getUsername();\n    return this.http.post(this.baseUrl + \"lexicon/update/lexicalEntry?key=\" + this.key + \"&author=\" + this.author + \"&id=\" + encodeURIComponent(lexId), parameters);\n  }\n\n\n  //POST /lexicon/update/{id}/linguisticRelation --> linguistic Relation update for Core\n  updateLinguisticRelation(lexId, parameters): Observable<any> {\n    this.author = this.auth.getUsername();\n    return this.http.post(this.baseUrl + \"lexicon/update/linguisticRelation?key=\" + this.key + \"&user=\" + this.author + \"&id=\" + encodeURIComponent(lexId), parameters);\n  }\n\n  //POST /lexicon/update/{id}/genericRelation --> Generic relation update\n  updateGenericRelation(lexId, parameters) : Observable<any> {\n    this.author = this.auth.getUsername();\n    return this.http.post(this.baseUrl + \"lexicon/update/genericRelation?key=\" + this.key + \"&user=\" + this.author + \"&id=\" + encodeURIComponent(lexId), parameters);\n  }\n\n  //POST /lexicon/update/{id}/form --> update form values\n  updateForm(formId, parameters): Observable<any> {\n    this.author = this.auth.getUsername();\n    return this.http.post(this.baseUrl + \"lexicon/update/form?key=\" + this.key + \"&id=\" + encodeURIComponent(formId), parameters);\n  }\n\n  //POST /lexicon/update/{id}/lexicalSense --> update form values\n  updateSense(senseId, parameters): Observable<any> {\n    this.author = this.auth.getUsername();\n    return this.http.post(this.baseUrl + \"lexicon/update/lexicalSense?key=\" + this.key + \"&id=\" + encodeURIComponent(senseId), parameters);\n  }\n\n  //GET  /lexinfo/data/morphology --> get data about morphology\n  getMorphologyData() : Observable<object[]> {\n    return this.http.get<object[]>(this.baseUrl + \"lexinfo/data/morphology\");\n  }\n\n  ///GET /ontolex/data/formType --> get data about form types\n  getFormTypes(): Observable<any> {\n    return this.http.get(this.baseUrl + \"ontolex/data/formType\");\n  }\n\n  ///GET /ontolex/data/lexicalEntryType --> get data about lexicalEntry types\n  getLexEntryTypes(): Observable<object[]> {\n    return this.http.get<object[]>(this.baseUrl + \"ontolex/data/lexicalEntryType\");\n  }\n\n\n  //GET /lexicon/creation/form --> create new form\n  createNewForm(lexId): Observable<any> {\n    this.author = this.auth.getUsername();\n    return this.http.get(this.baseUrl + \"lexicon/creation/form?lexicalEntryID=\"+ encodeURIComponent(lexId)  +\"&key=\" + this.key + \"&author=\" + this.author + \"&prefix=\" + this.lexicalPrefix + \"&baseIRI=\" + encodeURIComponent(this.lexicalIRI));\n  }\n\n  //GET /lexicon/creation/lexicalSense --> create new sense\n  createNewSense(lexId): Observable<any> {\n    this.author = this.auth.getUsername();\n    return this.http.get(this.baseUrl + \"lexicon/creation/lexicalSense?lexicalEntryID=\"+ encodeURIComponent(lexId)  +\"&key=\" + this.key + \"&author=\" + this.author + \"&prefix=\" + this.lexicalPrefix + \"&baseIRI=\" + encodeURIComponent(this.lexicalIRI));\n  }\n\n  //GET /lexicon/creation/language --> create new language\n  createNewLanguage(langId): Observable<any> {\n    this.author = this.auth.getUsername();\n    return this.http.get(this.baseUrl + \"lexicon/creation/language?key=\" + this.key + \"&lang=\"+ langId +\"&author=\" + this.author + \"&prefix=\" + this.lexicalPrefix + \"&baseIRI=\" +encodeURIComponent(this.lexicalIRI));\n  }\n\n  //POST /lexicon/update/{id}/language --> update language\n  updateLanguage(langId, parameters): Observable<any> {\n    this.author = this.auth.getUsername();\n    return this.http.post(this.baseUrl + \"lexicon/update/language?key=\" + this.key + \"&id=\" + encodeURIComponent(langId), parameters);\n  }\n  \n\n  //BIBLIOGRAPHY\n  getBibliographyData(instance: string) : Observable<any> {\n    return this.http.get(this.baseUrl + \"lexicon/data/bibliography?key=lexodemo&id=\"+encodeURIComponent(instance));\n  }\n\n  addBibliographyData(instance : string, parameters){\n    this.author = this.auth.getUsername();\n    return this.http.post(this.baseUrl + \"lexicon/creation/bibliography?id=\" + encodeURIComponent(instance) + \"&key=\"+ this.key +\"&author=\"+this.author+\"&prefix=lexbib&baseIRI=\" + encodeURIComponent(this.bibliographyIRI), parameters);\n  }\n\n  removeBibliographyItem(instance: string) {\n    return this.http.get(this.baseUrl + \"lexicon/delete/bibliography?key=PRINitant19&id=\"+encodeURIComponent(instance));\n  }\n\n  synchronizeBibliographyItem(lexId : string, itemKey : string) : Observable<any> {\n    this.author = this.auth.getUsername();\n    return this.http.post(this.baseUrl + \"lexicon/update/synchronizeBibliography?id=\"+encodeURIComponent(lexId)+\"&key=PRINitant19&author=\"+this.author+\"&itemKey=\"+itemKey,{})\n  }\n\n\n  //ETYMOLOGY\n  createNewEtymology(instance: string) : Observable<any>{\n    this.author = this.auth.getUsername();\n    return this.http.get(this.baseUrl + \"lexicon/creation/etymology?lexicalEntryID=\"+ encodeURIComponent(instance) +\"&key=\"+this.key+\"&author=\"+this.author+\"&prefix=\" + this.lexicalPrefix + \"&baseIRI=\" + encodeURIComponent(this.lexicalIRI));\n  }\n\n  getEtymologies(instance: string) : Observable<any> {\n    return this.http.get(this.baseUrl + \"lexicon/data/etymologies?key=\"+this.key+\"&id=\"+encodeURIComponent(instance));\n  }\n\n  getEtymologyData(instance: string)  : Observable<any> {\n    return this.http.get(this.baseUrl + \"lexicon/data/etymology?key=\"+this.key+ \"&id=\" + encodeURIComponent(instance));\n  }\n\n  updateEtymology(etymId, parameters): Observable<any> {\n    this.author = this.auth.getUsername();\n    return this.http.post(this.baseUrl + \"lexicon/update/etymology?key=\" + this.key + \"&id=\" + encodeURIComponent(etymId), parameters);\n  }\n\n  createNewEtylink(lexInstance: string, etymInstance : string) : Observable<any>{\n    this.author = this.auth.getUsername();\n    return this.http.get(this.baseUrl + \"lexicon/creation/etymologicalLink?lexicalEntryID=\"+encodeURIComponent(lexInstance)+\"&etymologyID=\"+encodeURIComponent(etymInstance)+\"&key=\"+this.key+\"&author=\"+this.author+\"&prefix=\" + this.lexicalPrefix + \"&baseIRI=\" + encodeURIComponent(this.lexicalIRI));\n  }\n\n  deleteEtymology(etymInstance : string) : Observable<any>{\n    this.author = this.auth.getUsername();\n    return this.http.get(this.baseUrl + \"lexicon/delete/etymology?key=\"+this.key+\"&author=\"+this.author+\"&id=\" + encodeURIComponent(etymInstance));\n  }\n\n  updateEtylink(etymId, parameters): Observable<any> {\n    this.author = this.auth.getUsername();\n    return this.http.post(this.baseUrl + \"lexicon/update/etymologicalLink?key=\" + this.key + \"&id=\" + encodeURIComponent(etymId), parameters);\n  }\n\n  deleteEtylink(etyLinkInstance: string) : Observable<any>{\n    this.author = this.auth.getUsername();\n    return this.http.get(this.baseUrl + \"lexicon/delete/etymologicalLink?key=\"+this.key+\"&author=\"+this.author+\"&id=\" + encodeURIComponent(etyLinkInstance));\n  }\n\n  //DECOMP\n  getSubTerms(lexicalEntityID: string) : Observable<any>{\n    return this.http.get(this.baseUrl + \"lexicon/data/subTerms?key=\"+this.key+\"&id=\"+encodeURIComponent(lexicalEntityID));\n  }\n\n  getConstituents(lexicalEntityID: string) : Observable<any>{\n    return this.http.get(this.baseUrl + \"lexicon/data/\"+lexicalEntityID+\"/constituents?key=\"+this.key);\n  }\n\n  createComponent(lexicalEntityID : string) : Observable<any>{\n    this.author = this.auth.getUsername();\n    return this.http.get(this.baseUrl + \"lexicon/creation/component?id=\"+lexicalEntityID+\"&key=\"+this.key+\"&author=\"+this.author+\"\");\n  }\n\n  deleteComponent(compId : string) : Observable<any>{\n    return this.http.get(this.baseUrl + \"lexicon/delete/\"+compId+\"/component?key=\"+this.key);\n  }\n\n  getCorrespondsTo(compId: string) : Observable<any>{\n    return this.http.get(this.baseUrl + \"lexicon/data/\"+compId+\"/correspondsTo?key=\"+this.key);\n  }\n\n  exportLexicon(body : object) : Observable<any> {\n    return this.http.post(this.baseUrl + \"export/lexicon\", body, { responseType: 'text'});\n  } \n\n  getPanelCognate(cogInstanceName, lexInstanceName) : object{\n    return this.arrayPanelFormsData[cogInstanceName+'-'+lexInstanceName];\n  }\n\n  newPanelForm(cogInstanceName, lexInstanceName) : void {\n    this.arrayPanelFormsData[cogInstanceName+'-'+lexInstanceName] = {};\n    this.arrayPanelFormsData[cogInstanceName+'-'+lexInstanceName].data = undefined;\n    this.arrayPanelFormsData[cogInstanceName+'-'+lexInstanceName].isOpen = undefined;\n\n  }\n\n  closePanelForm(cogInstanceName, lexInstanceName) : void {\n    this.arrayPanelFormsData[cogInstanceName+'-'+lexInstanceName] = undefined;\n  }\n\n  getAllPanelForms() : object {\n    return this.arrayPanelFormsData;\n  }\n}","import { Component, OnInit } from '@angular/core';\n\n@Component({\n  selector: 'app-unauthorized-page',\n  templateUrl: './unauthorized-page.component.html',\n  styleUrls: ['./unauthorized-page.component.scss']\n})\nexport class UnauthorizedPageComponent implements OnInit {\n\n  constructor() { }\n\n  ngOnInit(): void {\n  }\n\n}\n","<p>unauthorized-page works!</p>\n","/*\n   Copyright 2021-2022  Istituto di Linguistica Computazionale \"A. Zampolli\", Consiglio Nazionale delle Ricerche, Pisa, Italy.\n \nThis file is part of EpiLexo.\n\nEpiLexo is free software: you can redistribute it and/or modify it under the terms of the GNU General Public License as published by the Free Software Foundation, either version 3 of the License, or (at your option) any later version.\n\nEpiLexo is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for more details.\n\nYou should have received a copy of the GNU General Public License along with EpiLexo. If not, see <https://www.gnu.org/licenses/>.\n*/\n\nimport { Component, OnDestroy, OnInit } from '@angular/core';\nimport { ActivatedRoute, Router } from '@angular/router';\nimport { NgbModal } from '@ng-bootstrap/ng-bootstrap';\nimport { KeycloakEventType, KeycloakService } from 'keycloak-angular';\nimport { Subscription } from 'rxjs';\nimport { AuthService } from 'src/app/services/auth/auth.service';\n\n@Component({\n  selector: 'app-navbar',\n  templateUrl: './navbar.component.html',\n  styleUrls: ['./navbar.component.scss']\n})\nexport class NavbarComponent implements OnInit, OnDestroy {\n \n  username : string;\n  userRoles;\n\n  kc_subscriber : Subscription;\n\n  constructor(private route: ActivatedRoute, \n              private router: Router, \n              private keycloakService: KeycloakService, \n              private auth : AuthService,\n              private modalService : NgbModal) { }\n\n  ngOnInit(): void {\n    if(this.auth.getLoggedUser() != undefined){\n      if(this.auth.getLoggedUser()['preferred_username'] != undefined){\n        this.username = this.auth.getLoggedUser()['preferred_username'];\n      }\n    }\n    \n    \n    this.userRoles = this.auth.getCurrentUserRole();\n\n    this.kc_subscriber = this.keycloakService.keycloakEvents$.subscribe({\n      next: (e) => {\n        // console.log(e)\n        if (e.type == KeycloakEventType.OnTokenExpired) {\n          this.keycloakService.updateToken(20);\n        }\n      }\n    });\n  }\n\n  logout(){\n    this.auth.logout();\n  }\n\n\n  isAdmin = () => {\n    let admin = (element) => element == 'ADMIN';\n    console.log(this.userRoles.some(admin))\n  }\n\n  ngOnDestroy(): void {\n      this.kc_subscriber.unsubscribe();\n  }\n\n  getDateNow() {\n    return new Date();\n  }\n}\n","\n\n<nav class=\"navbar navbar-expand-lg navbar-light bg-light\">\n    <!-- <a class=\"navbar-brand\" href=\"#\">Navbar</a> -->\n    <button class=\"navbar-toggler\" type=\"button\" data-toggle=\"collapse\" data-target=\"#navbarSupportedContent\"\n        aria-controls=\"navbarSupportedContent\" aria-expanded=\"false\" aria-label=\"Toggle navigation\">\n        <span class=\"navbar-toggler-icon\"></span>\n    </button>\n    <div class=\"d-flex-md d-flex-xs d-lg-none\">\n        <ul class=\"navbar-nav flex-row\">\n            <div class=\"dropdown mr-2\">\n                <button class=\"btn btn-light dropdown-toggle\" type=\"button\" id=\"dropdownMenuButton\" data-toggle=\"dropdown\" aria-haspopup=\"true\" aria-expanded=\"false\">\n                    <!-- <img src=\"https://s3.eu-central-1.amazonaws.com/bootstrapbaymisc/blog/24_days_bootstrap/fox.jpg\" width=\"24\" height=\"24\" class=\"rounded-circle\"> -->\n                </button>\n                <div class=\"dropdown-menu\" aria-labelledby=\"dropdownMenuButton\">\n                    <a class=\"dropdown-item\"><i class=\"fa fa-power-off\" aria-hidden=\"true\" (click)=\"logout()\"></i> Logout</a>\n                </div>\n            </div>\n        </ul>\n    </div>\n    <div class=\"collapse navbar-collapse\" id=\"navbarSupportedContent\">\n        <ul class=\"navbar-nav mr-auto\">\n            <!-- <li class=\"nav-item\">\n                <a class=\"nav-link disabled\" routerLink=\"home\" routerLinkActive=\"active\">\n                    <i class=\"fa fa-home\" aria-hidden=\"true\"></i>\n                </a>\n            </li> -->\n            <li class=\"nav-item d-flex align-items-center\" *ngIf=\"isAdmin\">\n                <a class=\"nav-link\" routerLink=\"user\" routerLinkActive=\"active\">\n                    <i class=\"fa fa-user\"></i>\n                    <span class=\"d-flex-xs d-lg-none ml-2\">User Admin</span>\n                </a>\n                \n            </li>\n            <li class=\"nav-item\">\n                <a class=\"nav-link\" routerLink=\"lexicon\" routerLinkActive=\"active\">\n                    <i class=\"fa fa-edit\"></i>\n                    <span class=\"d-flex-xs d-lg-none ml-2\">Lexicon Editor</span>\n                </a>\n            </li>\n           <!--  <li class=\"nav-item\">\n                <a class=\"nav-link disabled\" routerLink=\"search\" routerLinkActive=\"active\">\n                    <i class=\"fa fa-search\" aria-hidden=\"true\"></i>\n                    <span class=\"d-flex-xs d-lg-none ml-2\">Search Page</span>\n                </a>\n            </li> -->\n        </ul>\n        <ul class=\"navbar-nav ml-auto d-none d-xs-none d-sm-none d-lg-flex align-items-center\">\n            <div class=\"dropdown mr-2\">\n                <!-- <a placement=\"bottom\" ngbTooltip=\"Send help request\" class=\"btn btn-light\" type=\"button\" target=\"_blank\" [href]=\"'mailto:mmallia92@gmail.com?subject=Ticket '+(getDateNow() | date : 'M/d/yy hh:mm a')+'&body=Please describe the steps to reproduce the error&cc=vquochi@gmail.com;andrea.bellandi@gmail.com'\">\n                    <i class=\"fas fa-question-circle\"></i>\n                    \n                </a> -->\n\n    \n                <button class=\"btn btn-light dropdown-toggle\" type=\"button\" id=\"dropdownMenuButton\"\n                    data-toggle=\"dropdown\" aria-haspopup=\"true\" aria-expanded=\"false\">\n                    {{username}}\n                    \n                </button>\n                <div class=\"dropdown-menu\" aria-labelledby=\"dropdownMenuButton\">\n                    <a class=\"dropdown-item pointer\" (click)=\"logout()\"><i class=\"fa fa-power-off\" aria-hidden=\"true\"></i> Logout</a>\n                </div>\n            </div>\n        </ul>\n    </div>\n</nav>","/*\n   Copyright 2021-2022  Istituto di Linguistica Computazionale \"A. Zampolli\", Consiglio Nazionale delle Ricerche, Pisa, Italy.\n \nThis file is part of EpiLexo.\n\nEpiLexo is free software: you can redistribute it and/or modify it under the terms of the GNU General Public License as published by the Free Software Foundation, either version 3 of the License, or (at your option) any later version.\n\nEpiLexo is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for more details.\n\nYou should have received a copy of the GNU General Public License along with EpiLexo. If not, see <https://www.gnu.org/licenses/>.\n*/\n\nimport { Component, ElementRef, Input, NgZone, OnDestroy, OnInit, Renderer2, ViewChild } from '@angular/core';\nimport { LexicalEntriesService } from '../../../../../services/lexical-entries/lexical-entries.service';\nimport { ExpanderService } from 'src/app/services/expander/expander.service';\n\nimport {\n  animate,\n  style,\n  transition,\n  trigger,\n  state\n} from \"@angular/animations\";\n\nimport { ToastrService } from 'ngx-toastr';\nimport { BibliographyService } from 'src/app/services/bibliography-service/bibliography.service';\nimport { ModalComponent } from 'ng-modal-lib';\nimport { Subject, Subscription } from 'rxjs';\nimport { debounceTime, takeUntil } from 'rxjs/operators';\n\n@Component({\n  selector: 'app-etymology-tab',\n  templateUrl: './etymology-tab.component.html',\n  styleUrls: ['./etymology-tab.component.scss'],\n  animations: [\n    trigger('slideInOut', [\n      state('in', style({\n        height: 'calc(100vh - 17rem)',\n\n      })),\n      state('out', style({\n        height: 'calc(50vh - 12.5rem)',\n      })),\n      transition('in => out', animate('400ms ease-in-out')),\n      transition('out => in', animate('400ms ease-in-out'))\n    ])\n  ]\n})\nexport class EtymologyTabComponent implements OnInit, OnDestroy {\n\n  lock = 0;\n  object: any;\n  exp_trig = '';\n\n  isLexicalEntry = false;\n  isForm = false;\n  isSense = false;\n  isLexicalConcept = false;\n  searchIconSpinner = false;\n  goBack = false;\n  isEtymology = false;\n\n\n\n  lastUpdateDate: any;\n  creationDate: any;\n  creator: any;\n  revisor: any;\n\n  lexicalEntryData: any;\n  formData: any;\n  senseData: any;\n  lexicalConceptData: any;\n  bibliography = [];\n\n  start = 0;\n  sortField = 'title';\n  direction = 'asc';\n  memorySort = { field: '', direction: '' }\n  queryTitle = '';\n  queryMode = 'titleCreatorYear';\n\n  private searchSubject: Subject<any> = new Subject();\n  selectedItem;\n\n  @ViewChild('expander') expander_body: ElementRef;\n  @Input() etymologyData: any;\n  @ViewChild('addBibliography', { static: false }) modal: ModalComponent;\n  @ViewChild('table_body') tableBody: ElementRef;\n\n  etymology_data_subscription: Subscription;\n  expand_edit_subscription: Subscription;\n  expand_epigraphy_subscription: Subscription;\n  spinner_subscription: Subscription;\n  search_subject_subscription: Subscription;\n  bootstrap_bibliography_subscription: Subscription;\n\n  destroy$ : Subject<boolean> = new Subject();\n  constructor(private lexicalService: LexicalEntriesService, private biblioService: BibliographyService, private expand: ExpanderService, private rend: Renderer2, private toastr: ToastrService) { }\n\n  ngOnInit(): void {\n\n    this.etymology_data_subscription = this.lexicalService.etymologyData$.subscribe(\n      object => {\n        if (this.object != object) {\n          this.etymologyData = null;\n          this.isForm = false;\n          this.isLexicalConcept = false;\n          this.isLexicalEntry = false;\n        }\n        this.object = object\n        //console.log(this.object)\n        if (this.object != null) {\n          this.creationDate = this.object.etymology.creationDate;\n          this.lastUpdateDate = this.object.etymology.lastUpdate;\n          this.creator = this.object['etymology'].creator;\n          this.revisor = this.object.revisor;\n          this.etymologyData = object;\n          this.isEtymology = true;\n          setTimeout(() => {\n            //@ts-ignore\n            $('#etymologyTabModal').modal('hide');\n            $('.modal-backdrop').remove();\n            var timer = setInterval((val) => {\n              try {\n                //@ts-ignore\n                $('#etymologyTabModal').modal('hide');\n                if (!$('#etymologyTabModal').is(':visible')) {\n                  clearInterval(timer)\n                }\n\n              } catch (e) {\n                console.log(e)\n              }\n            }, 10)\n          }, 500);\n        }\n      }\n    );\n\n    this.expand_edit_subscription = this.expand.expEdit$.subscribe(\n      trigger => {\n        setTimeout(() => {\n          if (trigger) {\n            let isEditExpanded = this.expand.isEditTabExpanded();\n            let isEpigraphyExpanded = this.expand.isEpigraphyTabExpanded();\n\n            if (!isEpigraphyExpanded) {\n              this.exp_trig = 'in';\n              this.rend.setStyle(this.expander_body.nativeElement, 'height', 'calc(100vh - 17rem)')\n              this.rend.setStyle(this.expander_body.nativeElement, 'max-height', 'calc(100vh - 17rem)')\n            } else {\n              this.rend.setStyle(this.expander_body.nativeElement, 'height', 'calc(50vh - 12.5rem)');\n              this.rend.setStyle(this.expander_body.nativeElement, 'max-height', 'calc(50vh - 12.5rem)');\n              this.exp_trig = 'in';\n            }\n\n          } else if (trigger == null) {\n            return;\n          } else {\n            this.rend.setStyle(this.expander_body.nativeElement, 'height', 'calc(50vh - 12.5rem)');\n            this.rend.setStyle(this.expander_body.nativeElement, 'max-height', 'calc(50vh - 12.5rem)');\n            this.exp_trig = 'out';\n          }\n        }, 100);\n\n      }\n    );\n\n    this.expand_epigraphy_subscription = this.expand.expEpigraphy$.subscribe(\n      trigger => {\n        setTimeout(() => {\n          if (trigger) {\n            this.exp_trig = 'in';\n            this.rend.setStyle(this.expander_body.nativeElement, 'height', 'calc(50vh - 12.5rem)')\n            this.rend.setStyle(this.expander_body.nativeElement, 'max-height', 'calc(50vh - 12.5rem)')\n          } else if (trigger == null) {\n            return;\n          } else {\n            this.rend.setStyle(this.expander_body.nativeElement, 'max-height', 'calc(50vh - 12.5rem)');\n            this.exp_trig = 'out';\n          }\n        }, 100);\n\n      }\n    );\n\n    this.lexicalService.updateCoreCardReq$.subscribe(\n      data => {\n        console.log(data)\n        if (data != null) {\n          this.lastUpdateDate = data['lastUpdate']\n          if (data['creationDate'] != undefined) {\n            this.creationDate = data['creationDate']\n          }\n        }\n      }\n    )\n\n    this.spinner_subscription = this.lexicalService.spinnerAction$.subscribe(\n      data => {\n        if (data == 'on') {\n          this.searchIconSpinner = true;\n        } else {\n          this.searchIconSpinner = false;\n        }\n      },\n      error => {\n\n      }\n    )\n\n    this.search_subject_subscription = this.searchSubject.pipe(debounceTime(1000), takeUntil(this.destroy$)).subscribe(\n      data => {\n        this.queryTitle = data.query;\n        data.queryMode ? this.queryMode = 'everything' : this.queryMode = 'titleCreatorYear';\n        this.searchBibliography(this.queryTitle, this.queryMode);\n      }\n    )\n\n    //@ts-ignore\n    $(\"#biblioModalEtym\").modal(\"show\");\n    $('.modal-backdrop').appendTo('.ui-modal');\n    //@ts-ignore\n    $('#biblioModalEtym').modal({ backdrop: 'static', keyboard: false })\n\n    $('.modal-backdrop').css('height', 'inherit');\n    $('body').removeClass(\"modal-open\")\n    $('body').css(\"padding-right\", \"\");\n\n    this.bootstrap_bibliography_subscription = this.biblioService.bootstrapData(this.start, this.sortField, this.direction).subscribe(\n      data => {\n        this.memorySort = { field: this.sortField, direction: this.direction }\n        this.bibliography = data;\n        this.bibliography.forEach(element => {\n          element['selected'] = false;\n        })\n\n\n        //@ts-ignore\n        $('#biblioModalEtym').modal('hide');\n        $('.modal-backdrop').remove();\n      }, error => {\n        console.log(error)\n      }\n    )\n  }\n\n  async deleteEtymology() {\n    this.searchIconSpinner = true;\n    let etymId = this.object.etymology.etymology;\n\n    try {\n      let delete_etym_req = await this.lexicalService.deleteEtymology(etymId).toPromise();\n      this.searchIconSpinner = false;\n      this.lexicalService.deleteRequest(this.object);\n      this.lexicalEntryData = null;\n      this.isLexicalEntry = false;\n      this.object = null;\n      this.lexicalService.refreshLangTable();\n      this.lexicalService.refreshFilter({ request: true })\n      this.lexicalService.sendToCoreTab(null);\n      this.lexicalService.sendToRightTab(null);\n      this.biblioService.sendDataToBibliographyPanel(null);\n      this.toastr.success(etymId + ' deleted correctly', '', {\n        timeOut: 5000,\n      });\n    } catch (error) {\n      console.log(error);\n      if(error.status == 200){\n        this.searchIconSpinner = false;\n        this.lexicalService.deleteRequest(this.object);\n        this.lexicalEntryData = null;\n        this.isLexicalEntry = false;\n        this.object = null;\n        this.lexicalService.refreshLangTable();\n        this.lexicalService.refreshFilter({ request: true })\n        this.lexicalService.sendToCoreTab(null);\n        this.lexicalService.sendToRightTab(null);\n        this.biblioService.sendDataToBibliographyPanel(null);\n        this.toastr.success(etymId + ' deleted correctly', '', {\n          timeOut: 5000,\n        });\n      }else{\n        this.toastr.success(error.error, '', {\n          timeOut: 5000,\n        });\n      }\n    }\n  }\n\n  async addNewEtymology() {\n    this.searchIconSpinner = true;\n    this.object['request'] = 'etymology'\n\n    let parentNodeInstanceName = this.object.parentNodeInstanceName;\n    this.object['lexicalEntry'] = parentNodeInstanceName\n    this.object['request'] = 'etymology'\n\n    console.log(this.object, parentNodeInstanceName);\n\n    try {\n      let create_etymon_req = await this.lexicalService.createNewEtymology(parentNodeInstanceName).toPromise();\n      create_etymon_req['label'] = 'Etymology of: ' + this.object['parentNodeLabel'];\n      if (create_etymon_req['creator'] == this.object.creator) {\n        create_etymon_req['flagAuthor'] = false;\n      } else {\n        create_etymon_req['flagAuthor'] = true;\n      }\n      this.lexicalService.addSubElementRequest({ 'lex': this.object, 'data': create_etymon_req });\n      this.searchIconSpinner = false;\n      this.toastr.success(create_etymon_req['etymology'] + ' added correctly', '', {\n        timeOut: 5000,\n      });\n    } catch (error) {\n      console.log(error)\n      this.searchIconSpinner = false;\n    }\n\n  }\n\n  showBiblioModal() {\n    this.modal.show();\n  }\n\n  checkIfCreatorExist(item?) {\n    return item.some(element => element.creatorType === 'author')\n  }\n\n  async searchBibliography(query?: string, queryMode?: any) {\n    this.start = 0;\n    this.selectedItem = null;\n    //@ts-ignore\n    $(\"#biblioModalEtym\").modal(\"show\");\n    $('.modal-backdrop').appendTo('.table-body');\n    //@ts-ignore\n    $('#biblioModalEtym').modal({ backdrop: 'static', keyboard: false })\n    $('body').removeClass(\"modal-open\")\n    $('body').css(\"padding-right\", \"\");\n    console.log(query, queryMode)\n    this.tableBody.nativeElement.scrollTop = 0;\n    if (this.queryTitle != '') {\n\n      try {\n        let filter_bibliography_req = await this.biblioService.filterBibliography(this.start, this.sortField, this.direction, this.queryTitle, this.queryMode).toPromise();\n        console.log(filter_bibliography_req);\n        this.bibliography = [];\n        filter_bibliography_req.forEach(element => {\n          this.bibliography.push(element)\n        });\n        setTimeout(() => {\n          //@ts-ignore\n          $('#biblioModalEtym').modal('hide');\n          $('.modal-backdrop').remove();\n        }, 100);\n      } catch (error) {\n        console.log(error)\n      }\n\n    } else {\n\n      try {\n        let filter_bibliography_req = await this.biblioService.filterBibliography(this.start, this.sortField, this.direction, this.queryTitle, this.queryMode).toPromise();\n        console.log(filter_bibliography_req);\n        this.bibliography = [];\n        filter_bibliography_req.forEach(element => {\n          this.bibliography.push(element)\n        });\n        //@ts-ignore\n        $('#biblioModalEtym').modal('hide');\n        $('.modal-backdrop').remove();\n      } catch (error) {\n        console.log(error)\n      }\n    }\n  }\n\n  triggerSearch(evt, query, queryMode) {\n    if (evt.key != 'Control' && evt.key != 'Shift' && evt.key != 'Alt') {\n      this.searchSubject.next({ query, queryMode })\n    }\n  }\n\n  async onScrollDown() {\n    //@ts-ignore\n    $(\"#biblioModalEtym\").modal(\"show\");\n    $('.modal-backdrop').appendTo('.table-body');\n    //@ts-ignore\n    $('#biblioModalEtym').modal({ backdrop: 'static', keyboard: false })\n    $('.modal-backdrop').appendTo('.table-body');\n    $('body').removeClass(\"modal-open\")\n    $('body').css(\"padding-right\", \"\");\n\n    this.start += 25;\n\n    if (this.queryTitle != '') {\n      try {\n        let filter_bibliography_req = await this.biblioService.filterBibliography(this.start, this.sortField, this.direction, this.queryTitle, this.queryMode).toPromise();\n        console.log(filter_bibliography_req)\n        //@ts-ignore\n        $('#biblioModalEtym').modal('hide');\n        $('.modal-backdrop').remove();\n        filter_bibliography_req.forEach(element => {\n          this.bibliography.push(element)\n        });\n      } catch (error) {\n        console.log(error)\n      }\n\n    } else {\n      try {\n        let filter_bibliography_req = await this.biblioService.filterBibliography(this.start, this.sortField, this.direction, this.queryTitle, this.queryMode).toPromise();\n        filter_bibliography_req.forEach(element => {\n          this.bibliography.push(element)\n        });\n\n        //@ts-ignore\n        $('#biblioModalEtym').modal('hide');\n        $('.modal-backdrop').remove();\n      } catch (error) {\n        console.log(error)\n      }\n    }\n\n\n  }\n\n  selectItem(evt, i) {\n    /* console.log(evt, i); */\n    if (evt.shiftKey) {\n\n    }\n    this.bibliography.forEach(element => {\n      if (element.key == i.key) {\n        element.selected = !element.selected;\n        element.selected ? this.selectedItem = element : this.selectedItem = null;\n        return true;\n      } else {\n        element.selected = false;\n        return false;\n      }\n    })\n\n  }\n\n  async sortBibliography(evt?, val?) {\n\n\n    if (this.memorySort.field == val) {\n      if (this.direction == 'asc') {\n        this.direction = 'desc'\n        this.memorySort.direction = 'desc';\n      } else {\n        this.direction = 'asc';\n        this.memorySort.direction = 'asc';\n      }\n    } else {\n      this.sortField = val;\n      this.direction = 'asc';\n      this.memorySort = { field: this.sortField, direction: this.direction };\n    }\n\n    //@ts-ignore\n    $(\"#biblioModalEtym\").modal(\"show\");\n    $('.modal-backdrop').appendTo('.table-body');\n    //@ts-ignore\n    $('#biblioModalEtym').modal({ backdrop: 'static', keyboard: false })\n    $('.modal-backdrop').appendTo('.table-body');\n    $('body').removeClass(\"modal-open\")\n    $('body').css(\"padding-right\", \"\");\n    this.start = 0;\n    this.tableBody.nativeElement.scrollTop = 0;\n\n    try {\n      let filter_bibliography_req = await this.biblioService.filterBibliography(this.start, this.sortField, this.direction, this.queryTitle, this.queryMode).toPromise();\n      filter_bibliography_req.forEach(element => {\n        this.bibliography.push(element)\n      });\n\n      //@ts-ignore\n      $('#biblioModalEtym').modal('hide');\n      $('.modal-backdrop').remove();\n    } catch (error) {\n      console.log(error)\n    }\n\n  }\n\n  async addNewForm() {\n    this.searchIconSpinner = true;\n    /* console.log(this.object) */\n    this.object['request'] = 'form'\n\n    let parentNodeInstanceName = this.object.parentNodeInstanceName;\n    this.object['request'] = 'form';\n    this.object['lexicalEntry'] = parentNodeInstanceName\n    //console.log(this.object);\n\n    try {\n      let create_new_form_req = await this.lexicalService.createNewForm(parentNodeInstanceName).toPromise();\n      if (create_new_form_req['creator'] == this.object.creator) {\n        create_new_form_req['flagAuthor'] = false;\n      } else {\n        create_new_form_req['flagAuthor'] = true;\n      }\n      this.lexicalService.addSubElementRequest({ 'lex': this.object, 'data': create_new_form_req });\n      this.searchIconSpinner = false;\n      this.toastr.success(create_new_form_req['form'] + ' added correctly', '', {\n        timeOut: 5000,\n      });\n    } catch (error) {\n      console.log(error);\n      if (error.status != 200) {\n        this.searchIconSpinner = false;\n        this.toastr.error('Something goes wrong', 'Error', {\n          timeOut: 5000,\n        });\n      }\n    }\n  }\n\n  async addNewSense() {\n    this.searchIconSpinner = true;\n    this.object['request'] = 'sense'\n\n    let parentNodeInstanceName = this.object.parentNodeInstanceName;\n    this.object['lexicalEntry'] = parentNodeInstanceName\n    this.object['request'] = 'sense'\n    console.log(this.object);\n\n    try {\n      let create_new_sense = await this.lexicalService.createNewSense(parentNodeInstanceName).toPromise();\n      if (create_new_sense['creator'] == this.object.creator) {\n        create_new_sense['flagAuthor'] = false;\n      } else {\n        create_new_sense['flagAuthor'] = true;\n      }\n      this.lexicalService.addSubElementRequest({ 'lex': this.object, 'data': create_new_sense });\n      this.searchIconSpinner = false;\n      this.toastr.success(create_new_sense['sense'] + ' added correctly', '', {\n        timeOut: 5000,\n      });\n    } catch (error) {\n      console.log(error);\n      if (error.status != 200) {\n        this.searchIconSpinner = false;\n        //this.lexicalService.refreshLexEntryTree();\n        this.toastr.error(error.error, 'Error', {\n          timeOut: 5000,\n        });\n      }\n    }\n\n  }\n\n  async addBibliographyItem(item?) {\n    //@ts-ignore\n    $(\"#biblioModalEtym\").modal(\"show\");\n    $('.modal-backdrop').appendTo('.ui-modal');\n    //@ts-ignore\n    $('#biblioModalEtym').modal({ backdrop: 'static', keyboard: false })\n\n    $('.modal-backdrop').css('height', 'inherit');\n    $('body').removeClass(\"modal-open\")\n    $('body').css(\"padding-right\", \"\");\n\n    let instance = this.object.etymology.etymology;\n    console.log(this.object)\n\n    if (item != undefined) {\n\n      let id = item.data.key != undefined ? item.data.key : '';\n      let title = item.data.title != undefined ? item.data.title : '';\n      let author;\n\n      item.data.creators.forEach(element => {\n        if (element.creatorType == 'author') {\n          author = element.lastName + ' ' + element.firstName;\n          return true;\n        } else {\n          return false;\n        }\n      });\n      author = author != undefined ? author : ''\n      let date = item.data.date != undefined ? item.data.date : '';\n      let url = item.data.url != undefined ? item.data.url : ''\n      let seeAlsoLink = '';\n\n      let parameters = {\n        id: id,\n        title: title,\n        author: author,\n        date: date,\n        url: url,\n        seeAlsoLink: seeAlsoLink\n      }\n      console.log(instance, parameters);\n\n      try {\n        let add_biblio_data = await this.lexicalService.addBibliographyData(instance, parameters).toPromise();\n        setTimeout(() => {\n          //@ts-ignore\n          $('#biblioModalEtym').modal('hide');\n          $('.modal-backdrop').remove();\n          this.toastr.success('Item added, check bibliography panel', '', {\n            timeOut: 5000,\n          });\n          this.biblioService.triggerPanel(add_biblio_data)\n          setTimeout(() => {\n            this.modal.hide();\n          }, 10);\n        }, 300);\n        this.biblioService.sendDataToBibliographyPanel(add_biblio_data);\n      } catch (error) {\n        if (error.status != 200) {\n          console.log(error)\n          this.toastr.error(error.error, 'Error', {\n            timeOut: 5000,\n          });\n          setTimeout(() => {\n            //@ts-ignore\n            $('#biblioModalEtym').modal('hide');\n            $('.modal-backdrop').remove();\n          }, 300);\n        }\n      }\n\n    }\n\n  }\n\n  onCloseModal() {\n    this.selectedItem = null;\n    this.start = 0;\n    this.sortField = 'title';\n    this.direction = 'asc';\n    this.tableBody.nativeElement.scrollTop = 0;\n    this.memorySort = { field: this.sortField, direction: this.direction }\n    this.biblioService.bootstrapData(this.start, this.sortField, this.direction).subscribe(\n      data => {\n        this.bibliography = data;\n        this.bibliography.forEach(element => {\n          element['selected'] = false;\n        })\n\n\n      }, error => {\n        console.log(error)\n      }\n    );\n  }\n\n  ngOnDestroy(): void {\n    this.etymology_data_subscription.unsubscribe();\n    this.expand_edit_subscription.unsubscribe();\n    this.expand_epigraphy_subscription.unsubscribe();\n    this.spinner_subscription.unsubscribe();\n    this.search_subject_subscription.unsubscribe();\n    this.bootstrap_bibliography_subscription.unsubscribe();\n    this.destroy$.next(true);\n    this.destroy$.complete();\n  }\n}\n","\n\n<div id=\"cardsAccordion\" class=\"accordion\" [hidden]=\"object == null\"> <!-- [hidden]=\"object == null\" -->\n    <div class=\"card my-2\">\n        <div class=\"card-header p-0\">\n            <h5 class=\"mb-0 w-100 d-flex justify-content-between align-self-center\">\n                <div>\n                    <span class=\"btn\" *ngIf=\"object != null\"> <!-- *ngIf=\"object != null\" -->\n                        CREATED BY {{creator}} ON {{creationDate | date :'dd/MM/yyyy hh:mm:ss'}}\n                    </span>\n                </div>\n                <div>\n                    <div class=\"spinner-border spinner-border-sm m-1\" role=\"status\" *ngIf=\"searchIconSpinner\">\n                        <span class=\"sr-only\">Loading...</span>\n                    </div>\n                    <button class=\"btn btn-link\" (click)=\"deleteEtymology()\">\n                        <i class=\"fa fa-trash\"></i>\n                    </button>\n                </div>\n            </h5>\n        </div>\n        <div #expander [@slideInOut]=\"exp_trig\" class=\"card-body etym-tab-body\">\n            <div id=\"etymologyTabModal\" class=\"modal fade\" role=\"dialog\">\n                <div class=\"modal-dialog\">\n\n                    <!-- Modal content-->\n                    <div class=\"modal-content\">\n                        <div class=\"modal-body\">\n                            <div class=\"d-flex justify-content-center\">\n                                <div class=\"spinner-border\" role=\"status\">\n                                    <span class=\"sr-only\">Loading...</span>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n\n                </div>\n            </div>\n            <app-etymology-form [etymData]=\"etymologyData\"></app-etymology-form>\n\n        </div>\n        <div class=\"card-footer text-muted p-0\">\n            <div class=\"w-100 d-flex justify-content-between align-items-center\">\n                <div > <!-- *ngIf=\"object != null\" -->\n                    <span class=\"pl-2\">LAST UPDATE ON {{lastUpdateDate | date :'dd/MM/yyyy hh:mm:ss'}}</span>\n                </div>\n                <div class=\"btn-group dropup dropleft\">\n                    <button class=\"btn btn-success\" type=\"button\" id=\"dropdownAddLemma\" data-toggle=\"dropdown\"\n                        aria-haspopup=\"true\" aria-expanded=\"false\"> <i class=\"fas fa-plus\"></i> </button>\n                    <div class=\"dropdown-menu dropdown-menu-right\" aria-labelledby=\"dropdownAddLemma\">\n                        <button class=\"dropdown-item\" title=\"add new form\" (click)=\"addNewForm()\">Add Form</button>\n                        <button class=\"dropdown-item\" (click)=\"addNewSense()\">Add Sense</button>\n                        <button class=\"dropdown-item\" (click)=\"addNewEtymology()\">Add Etymology</button>\n                        <button class=\"dropdown-item\" (click)=\"showBiblioModal()\">Add Bibliography</button>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n</div>\n\n\n<app-modal #addBibliography class=\"biblio_modal\" [backdrop]=\"false\" [inViewport]=\"true\" (closeModal)=\"onCloseModal()\">\n\n    <ng-container class=\"app-modal-header\">\n        <img src=\"../../../../../../assets/images/zotero_logo.png\">\n        <span class=\"ml-2 biblio-header-title\">Library: PRIN Italia Antica</span>\n    </ng-container>\n\n    <ng-container class=\"app-modal-body\">\n        <!-- SEARCH BAR -->\n        <div class=\"w-25 pt-1 pb-1\">\n            <div class=\"input-group mb-3\" *ngIf=\"{switch : false}; let variable\">\n                <div class=\"input-group-prepend\">\n                    <button class=\"btn btn-outline-secondary dropdown-toggle\" type=\"button\" data-toggle=\"dropdown\"\n                        aria-haspopup=\"true\" aria-expanded=\"false\"><i class=\"fa fa-search\"></i></button>\n                    <div class=\"dropdown-menu\">\n                        <a [class.disable_click_fire]=\"!variable.switch\" class=\"dropdown-item\" style=\"cursor: pointer;\"\n                            (click)=\"variable.switch = false; searchBibliography(searchBiblio.value, variable.switch);\">Normal</a>\n                        <a [class.disable_click_fire]=\"variable.switch\" class=\"dropdown-item\" style=\"cursor: pointer;\"\n                            (click)=\"variable.switch = true; searchBibliography(searchBiblio.value, variable.switch);\">Full\n                            Text</a>\n                    </div>\n                </div>\n                <input #searchBiblio (keyup)=\"triggerSearch($event, searchBiblio.value, variable.switch)\" type=\"text\"\n                    class=\"form-control\" aria-label=\"Text input with dropdown button\"\n                    [placeholder]=\"variable.switch ?'Title, creator, year + Full Text' : 'Title, creator, year'\"\n                    style=\"font-size: 12px;\">\n            </div>\n\n        </div>\n        <!-- {{'start: '+start + ' sortField: '+ sortField + ' direction: '+ direction + ' queryTitle: '+ queryTitle + ' queryMode: '+ queryMode}} -->\n\n        <!-- SKELETON CONTAINER -->\n        <div class=\"container-fluid\">\n            <div class=\"row\">\n                <div class=\"col-md-8 pl-0\">\n\n\n                    <!-- TABLE -->\n                    <div class=\"table-responsive table-body\">\n                        <div id=\"biblioModalEtym\" class=\"modal fade\" role=\"dialog\">\n                            <div class=\"modal-dialog\">\n\n                                <!-- Modal content-->\n                                <div class=\"modal-content\">\n                                    <div class=\"modal-body\">\n                                        <div class=\"d-flex justify-content-center\">\n                                            <div class=\"spinner-border\" role=\"status\">\n                                                <span class=\"sr-only\">Loading...</span>\n                                            </div>\n                                        </div>\n                                    </div>\n                                </div>\n\n                            </div>\n                        </div>\n                        \n                        <table class=\"table table-striped table-hover\" [hidden]=\"bibliography.length == 0\">\n                            <thead>\n                                <tr>\n                                    <th scope=\"col\" style=\"width: 50%; cursor: pointer;\" (click)=\"sortBibliography($event, 'title')\">\n                                        <span>Title</span>\n                                        <span class=\"float-right\">\n                                            <i class=\"fas fa-sort-up\" *ngIf=\"direction == 'asc' && sortField == 'title'\"></i>\n                                            <i class=\"fas fa-sort-down\" *ngIf=\"direction == 'desc' && sortField == 'title'\"></i>\n                                        </span>\n                                    </th>\n                                    <th scope=\"col\" style=\"width: 30%; cursor: pointer;\" (click)=\"sortBibliography($event, 'creator')\">\n                                        <span>Creator</span>\n                                        <span class=\"float-right\">\n                                            <i class=\"fas fa-sort-up\" *ngIf=\"direction == 'asc' && sortField == 'creator'\"></i>\n                                            <i class=\"fas fa-sort-down\" *ngIf=\"direction == 'desc' && sortField == 'creator'\"></i>\n                                        </span>\n                                    </th>\n                                    <th scope=\"col\" style=\"width: 20%; cursor: pointer;\" (click)=\"sortBibliography($event, 'date')\">\n                                        <span>Date</span>\n                                        <span class=\"float-right\">\n                                            <i class=\"fas fa-sort-up\" *ngIf=\"direction == 'asc' && sortField == 'date'\"></i>\n                                            <i class=\"fas fa-sort-down\" *ngIf=\"direction == 'desc' && sortField == 'date'\"></i>\n                                        </span>\n                                    </th>\n                                </tr>\n                            </thead>\n                            <tbody #table_body infiniteScroll [infiniteScrollDistance]=\"0.4\"\n                                [infiniteScrollThrottle]=\"150\" [scrollWindow]=\"false\" (scrolled)=\"onScrollDown()\">\n\n\n                                <tr *ngFor=\"let item of bibliography\" (click)=\"selectItem($event, item)\"\n                                    [ngClass]=\"item?.selected ? 'selected' : ''\" style=\"cursor: pointer;\">\n                                    <td style=\"width: 50%\">\n                                        <span *ngIf=\"item.data.itemType == 'book'\" class=\"pl-1 pr-1\">\n                                            <i class=\"fas fa-book\"></i>\n                                        </span>\n                                        <span *ngIf=\"item.data.itemType == 'bookSection'\" class=\"pl-1 pr-1\">\n                                            <i class=\"fas fa-book-open\"></i>\n                                        </span>\n                                        <span *ngIf=\"item.data.itemType == 'journalArticle'\" class=\"pl-1 pr-1\">\n                                            <i class=\"far fa-newspaper\"></i>\n                                        </span>\n                                        <span *ngIf=\"item.data.itemType == 'note'\" class=\"pl-1 pr-1\">\n                                            <i class=\"far fa-clipboard\"></i>\n                                        </span>\n                                        <span *ngIf=\"item.data.itemType == 'attachment'\" class=\"pl-1 pr-1\">\n                                            <i class=\"fas fa-paperclip\"></i>\n                                        </span>\n                                        <span *ngIf=\"item.data.itemType == 'conferencePaper'\" class=\"pl-1 pr-1\">\n                                            <i class=\"fas fa-chalkboard-teacher\"></i>\n                                        </span>\n                                        <span\n                                            *ngIf=\"item.data.title != undefined && item.data.title != ''\">{{item.data.title |titlecase}}</span>\n                                        <span *ngIf=\"item.data.title == undefined || item.data.title == ''\"\n                                            class=\"font-italic\">No title</span>\n                                    </td>\n                                    <td style=\"width: 30%\">\n                                        <span *ngIf=\"item.data.creators != undefined\">\n                                            <span *ngFor=\"let author of item.data.creators; let i = index\">\n                                                <span *ngIf=\"author.creatorType == 'author'\">\n                                                    {{author.lastName | titlecase}} {{author.firstName | titlecase}} \n                                                </span>\n                                            </span>\n                                            <span *ngIf=\"!checkIfCreatorExist(item.data.creators)\"\n                                                class=\"font-italic\">No data</span>\n                                        </span>\n                                        <span *ngIf=\"item.data.creators == undefined\" class=\"font-italic\">No data</span>\n                                    </td>\n                                    <td style=\"width: 20%\">\n                                        <span *ngIf=\"item.data.date != undefined && item.data.date != ''\">\n                                            {{item.data.date | titlecase}}\n                                        </span>\n                                        <span *ngIf=\"item.data.date == undefined || item.data.date == ''\"\n                                            class=\"font-italic\">\n                                            No info\n                                        </span>\n                                    </td>\n                                </tr>\n                            </tbody>\n                        </table>\n                        <p class=\"font-italic text-muted no-results\" *ngIf=\"bibliography.length == 0\">No results</p>\n                    </div>\n\n\n                </div>\n                <div class=\"col-md-4\" style=\"font-size: 14px;\">\n                    <div class=\"row\">\n                        <div class=\"col-md-12 item-description\"\n                            style=\"height: calc(100vh - 37rem); overflow: auto; font-size: 13px;\">\n                            <div *ngIf=\"!selectedItem\">\n                                <div class=\"row\">\n                                    <div class=\"col-md-12\">\n                                        <p class=\"text-muted text-center align-middle mb-1 font-italic\">\n                                            No item selected\n                                        </p>\n                                    </div>\n                                </div>\n                            </div>\n                            <div *ngIf=\"selectedItem\">\n                                <div class=\"row\"\n                                    *ngIf=\"selectedItem.data.itemType != '' && selectedItem.data.itemType != undefined\">\n                                    <div class=\"col-md-4 left\" style=\"text-align: right;\">\n                                        <p class=\"text-muted font-weight-bold mb-1\">\n                                            Item type\n                                        </p>\n                                    </div>\n                                    <div class=\"col-md-8 right\" style=\"text-align: left;\">\n                                        <p class=\"font-weight-normal mb-1\">\n                                            {{selectedItem.data.itemType | titlecase}}\n                                        </p>\n                                    </div>\n                                </div>\n                                <div class=\"row\"\n                                    *ngIf=\"selectedItem.data.title != '' && selectedItem.data.title != undefined\">\n                                    <div class=\"col-md-4 left\" style=\"text-align: right;\">\n                                        <p class=\"text-muted font-weight-bold mb-1\">\n                                            Title\n                                        </p>\n                                    </div>\n                                    <div class=\"col-md-8 right\" style=\"text-align: left;\">\n                                        <p class=\"font-weight-normal mb-1\">\n                                            {{selectedItem.data.title | titlecase}}\n                                        </p>\n                                    </div>\n                                </div>\n                                <div class=\"row\"\n                                    *ngIf=\"selectedItem.data.creators != undefined && selectedItem.data.creators.length > 0 && checkIfCreatorExist(selectedItem.data.creators)\">\n                                    <div class=\"col-md-4 left\" style=\"text-align: right;\">\n                                        <p class=\"text-muted font-weight-bold mb-1\">\n                                            Author\n                                        </p>\n                                    </div>\n                                    <div class=\"col-md-8 right\" style=\"text-align: left;\">\n                                        <span *ngFor=\"let author of selectedItem.data.creators\">\n                                            <span *ngIf=\"author.creatorType == 'author'\">\n                                                <p class=\"font-weight-normal mb-1\">\n                                                    {{author.firstName | titlecase}} {{author.lastName | titlecase}}\n                                                </p>\n                                            </span>\n                                        </span>\n                                    </div>\n                                </div>\n                                <div class=\"row\"\n                                    *ngIf=\"selectedItem.data.creators != undefined && selectedItem.data.creators.length > 0\">\n                                    <div class=\"col-md-4 left\" style=\"text-align: right;\">\n                                        <p class=\"text-muted font-weight-bold mb-1\">\n                                            Editor\n                                        </p>\n                                    </div>\n                                    <div class=\"col-md-8 right\" style=\"text-align: left;\">\n                                        <span *ngFor=\"let editor of selectedItem.data.creators\">\n                                            <span *ngIf=\"editor.creatorType == 'editor'\">\n                                                <p class=\"font-weight-normal mb-1\">\n                                                    {{editor.firstName | titlecase}} {{editor.lastName | titlecase}}\n                                                </p>\n                                            </span>\n                                        </span>\n                                    </div>\n                                </div>\n                                <div class=\"row\"\n                                    *ngIf=\"selectedItem.data.publicationTitle != '' && selectedItem.data.publicationTitle != undefined\">\n                                    <div class=\"col-md-4 left\" style=\"text-align: right;\">\n                                        <p class=\"text-muted font-weight-bold mb-1\">\n                                            Publication\n                                        </p>\n                                    </div>\n                                    <div class=\"col-md-8 right\" style=\"text-align: left;\">\n                                        <p class=\"font-weight-normal mb-1\">\n                                            {{selectedItem.data.publicationTitle | titlecase}}\n                                        </p>\n                                    </div>\n                                </div>\n                                <div class=\"row\"\n                                    *ngIf=\"selectedItem.data.publisher != '' && selectedItem.data.publisher != undefined\">\n                                    <div class=\"col-md-4 left\" style=\"text-align: right;\">\n                                        <p class=\"text-muted font-weight-bold mb-1\">\n                                            Publisher\n                                        </p>\n                                    </div>\n                                    <div class=\"col-md-8 right\" style=\"text-align: left;\">\n                                        <p class=\"font-weight-normal mb-1\">\n                                            {{selectedItem.data.publisher | titlecase}}\n                                        </p>\n                                    </div>\n                                </div>\n                                <div class=\"row\"\n                                    *ngIf=\"selectedItem.data.issue != '' && selectedItem.data.issue != undefined\">\n                                    <div class=\"col-md-4 left\" style=\"text-align: right;\">\n                                        <p class=\"text-muted font-weight-bold mb-1\">\n                                            Issue\n                                        </p>\n                                    </div>\n                                    <div class=\"col-md-8 right\" style=\"text-align: left;\">\n                                        <p class=\"font-weight-normal mb-1\">\n                                            {{selectedItem.data.issue | titlecase}}\n                                        </p>\n                                    </div>\n                                </div>\n                                <div class=\"row\"\n                                    *ngIf=\"selectedItem.data.pages != '' && selectedItem.data.pages != undefined\">\n                                    <div class=\"col-md-4 left\" style=\"text-align: right;\">\n                                        <p class=\"text-muted font-weight-bold mb-1\">\n                                            Pages\n                                        </p>\n                                    </div>\n                                    <div class=\"col-md-8 right\" style=\"text-align: left;\">\n                                        <p class=\"font-weight-normal mb-1\">\n                                            {{selectedItem.data.pages | titlecase }}\n                                        </p>\n                                    </div>\n                                </div>\n                                <div class=\"row\"\n                                    *ngIf=\"selectedItem.data.place != '' && selectedItem.data.place != undefined\">\n                                    <div class=\"col-md-4 left\" style=\"text-align: right;\">\n                                        <p class=\"text-muted font-weight-bold mb-1\">\n                                            Place\n                                        </p>\n                                    </div>\n                                    <div class=\"col-md-8 right\" style=\"text-align: left;\">\n                                        <p class=\"font-weight-normal mb-1\">\n                                            {{selectedItem.data.place | titlecase }}\n                                        </p>\n                                    </div>\n                                </div>\n                                <div class=\"row\"\n                                    *ngIf=\"selectedItem.data.date != '' && selectedItem.data.pages != date\">\n                                    <div class=\"col-md-4 left\" style=\"text-align: right;\">\n                                        <p class=\"text-muted font-weight-bold mb-1\">\n                                            Date\n                                        </p>\n                                    </div>\n                                    <div class=\"col-md-8 right\" style=\"text-align: left;\">\n                                        <p class=\"font-weight-normal mb-1\">\n                                            {{selectedItem.data.date | titlecase}}\n                                        </p>\n                                    </div>\n                                </div>\n                                <div class=\"row\"\n                                    *ngIf=\"selectedItem.data.journalAbbreviation != '' && selectedItem.data.journalAbbreviation != undefined\">\n                                    <div class=\"col-md-4 left\" style=\"text-align: right;\">\n                                        <p class=\"text-muted font-weight-bold mb-1\">\n                                            Journal Abbr\n                                        </p>\n                                    </div>\n                                    <div class=\"col-md-8 right\" style=\"text-align: left;\">\n                                        <p class=\"font-weight-normal mb-1\">\n                                            {{selectedItem.data.journalAbbreviation | titlecase}}\n                                        </p>\n                                    </div>\n                                </div>\n                                <div class=\"row\"\n                                    *ngIf=\"selectedItem.data.DOI != '' && selectedItem.data.DOI != undefined\">\n                                    <div class=\"col-md-4 left\" style=\"text-align: right;\">\n                                        <p class=\"text-muted font-weight-bold mb-1\">\n                                            <a class=\"text-muted\" href=\"{{'https://doi.org/'+selectedItem.data.DOI}}\"\n                                                target=\"_blank\">DOI <i class=\"fas fa-external-link-alt\"></i></a>\n                                        </p>\n                                    </div>\n                                    <div class=\"col-md-8 right\" style=\"text-align: left;\">\n                                        <p class=\"font-weight-normal mb-1\">\n                                            {{selectedItem.data.DOI | titlecase}}\n                                        </p>\n                                    </div>\n                                </div>\n                                <div class=\"row\"\n                                    *ngIf=\"selectedItem.data.ISSN != '' && selectedItem.data.ISSN != undefined\">\n                                    <div class=\"col-md-4 left\" style=\"text-align: right;\">\n                                        <p class=\"text-muted font-weight-bold mb-1\">\n                                            ISSN\n                                        </p>\n                                    </div>\n                                    <div class=\"col-md-8 right\" style=\"text-align: left;\">\n                                        <p class=\"font-weight-normal mb-1\">\n                                            {{selectedItem.data.ISSN | titlecase}}\n                                        </p>\n                                    </div>\n                                </div>\n                                <div class=\"row\"\n                                    *ngIf=\"selectedItem.data.url != '' && selectedItem.data.url != undefined\">\n                                    <div class=\"col-md-4 left\" style=\"text-align: right;\">\n                                        <p class=\"text-muted font-weight-bold mb-1\">\n                                            <a class=\"text-muted\" href=\"{{selectedItem.data.url}}\" target=\"_blank\">URL\n                                                <i class=\"fas fa-external-link-alt\"></i></a>\n                                        </p>\n                                    </div>\n                                    <div class=\"col-md-8 right\" style=\"text-align: left;\">\n                                        <p class=\"font-weight-normal mb-1\">\n                                            {{selectedItem.data.url}}\n                                        </p>\n                                    </div>\n                                </div>\n                                <div class=\"row\"\n                                    *ngIf=\"selectedItem.data.accessDate != '' && selectedItem.data.accessDate != undefined\">\n                                    <div class=\"col-md-4 left\" style=\"text-align: right;\">\n                                        <p class=\"text-muted font-weight-bold mb-1\">\n                                            Accessed\n                                        </p>\n                                    </div>\n                                    <div class=\"col-md-8 right\" style=\"text-align: left;\">\n                                        <p class=\"font-weight-normal mb-1\">\n                                            {{selectedItem.data.accessDate}}\n                                        </p>\n                                    </div>\n                                </div>\n                            </div>\n\n                        </div>\n                    </div>\n                    <div class=\"row\">\n                        <div class=\"col-md-12\" style=\"height: calc(40vh - 10rem); overflow: auto; font-size: 13px;\">\n                            <div *ngIf=\"!selectedItem\">\n                                <div class=\"row\">\n                                    <div class=\"col-md-12\">\n                                        <p class=\"text-muted text-center align-middle mb-1 font-italic\">\n                                            No item selected\n                                        </p>\n                                    </div>\n                                </div>\n                            </div>\n                            <div\n                                *ngIf=\"selectedItem && (selectedItem.data.abstractNote == '' || selectedItem.data.abstractNote == undefined)\">\n                                <div class=\"row\">\n                                    <div class=\"col-md-12\">\n                                        <p class=\"text-muted text-center align-middle mb-1 font-italic\">\n                                            No info\n                                        </p>\n                                    </div>\n                                </div>\n                            </div>\n                            <div\n                                *ngIf=\"selectedItem && (selectedItem.data.abstractNote != '' && selectedItem.data.abstractNote != undefined)\">\n                                <p class=\"text-muted font-weight-bold\">\n                                    Abstract\n                                </p>\n                                <p class=\"font-weight-normal\">\n                                    {{selectedItem.data.abstractNote}}\n                                </p>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n            <div class=\"row\">\n                <div class=\"col-md-12 d-flex justify-content-end\">\n                    <button class=\"btn btn-secondary w-25\" [disabled]=\"!selectedItem\" (click)=\"addBibliographyItem(selectedItem)\">Save</button>\n                    <!-- <button class=\"btn btn-secondary\" (click)=\"addBibliography.hide()\">Close</button> -->\n                </div>\n            </div>\n        </div>\n    </ng-container>\n\n    <ng-container class=\"app-modal-footer\">\n    </ng-container>\n</app-modal>","/*\n   Copyright 2021-2022  Istituto di Linguistica Computazionale \"A. Zampolli\", Consiglio Nazionale delle Ricerche, Pisa, Italy.\n \nThis file is part of EpiLexo.\n\nEpiLexo is free software: you can redistribute it and/or modify it under the terms of the GNU General Public License as published by the Free Software Foundation, either version 3 of the License, or (at your option) any later version.\n\nEpiLexo is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for more details.\n\nYou should have received a copy of the GNU General Public License along with EpiLexo. If not, see <https://www.gnu.org/licenses/>.\n*/\n\nimport { Component, OnInit } from '@angular/core';\n\n@Component({\n  selector: 'app-text-detail',\n  templateUrl: './text-detail.component.html',\n  styleUrls: ['./text-detail.component.scss']\n})\nexport class TextDetailComponent implements OnInit {\n\n  constructor() { }\n\n  ngOnInit(): void {\n  }\n\n}\n","\n\n<div id=\"epigraphy-accordion\">\n\n<app-epigraphy-detail></app-epigraphy-detail>\n<app-edit-detail></app-edit-detail>\n\n</div>","import { Injectable } from '@angular/core';\nimport { ActivatedRouteSnapshot, RouterStateSnapshot, UrlTree, Router } from '@angular/router';\nimport { KeycloakAuthGuard, KeycloakService } from 'keycloak-angular';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class AuthGuard extends KeycloakAuthGuard {\n  \n  constructor(\n    protected readonly router: Router,\n    protected readonly keycloak: KeycloakService\n  ) {\n    super(router, keycloak);\n  }\n  \n  async isAccessAllowed(\n    route: ActivatedRouteSnapshot,\n    state: RouterStateSnapshot): Promise<boolean | UrlTree> {\n    \n    if (!this.authenticated) {\n      await this.keycloak.login({\n        redirectUri: window.location.origin + \"/epilexo_demo/\" + state.url, /* aggiungere '/epilexo/' in produzione */\n      });\n    }\n\n    const requiredRoles = route.data.roles;\n    if (!(requiredRoles instanceof Array) || requiredRoles.length === 0) {\n      return true;\n    } else {\n      if (!this.roles || this.roles.length === 0) {\n        return false;\n      }\n    }\n    if (!requiredRoles.every((role) => this.roles.includes(role))) {\n      this.router.navigate(['/']);\n    }\n    return requiredRoles.every((role) => this.roles.includes(role));\n  }\n}","/*\n   Copyright 2021-2022  Istituto di Linguistica Computazionale \"A. Zampolli\", Consiglio Nazionale delle Ricerche, Pisa, Italy.\n \nThis file is part of EpiLexo.\n\nEpiLexo is free software: you can redistribute it and/or modify it under the terms of the GNU General Public License as published by the Free Software Foundation, either version 3 of the License, or (at your option) any later version.\n\nEpiLexo is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for more details.\n\nYou should have received a copy of the GNU General Public License along with EpiLexo. If not, see <https://www.gnu.org/licenses/>.\n*/\n\nimport { trigger, state, style, transition, animate } from '@angular/animations';\nimport { Component, ElementRef, OnDestroy, OnInit, Renderer2, ViewChild } from '@angular/core';\nimport * as Recogito from '@recogito/recogito-js';\nimport { Subscription } from 'rxjs';\nimport { DocumentSystemService } from 'src/app/services/document-system/document-system.service';\nimport { ExpanderService } from 'src/app/services/expander/expander.service';\n\n\n@Component({\n  selector: 'app-epigraphy-tab',\n  templateUrl: './epigraphy-tab.component.html',\n  styleUrls: ['./epigraphy-tab.component.scss'],\n  animations: [\n    trigger('slideInOut', [\n      state('in', style({\n        height: 'calc(100vh - 15rem)',\n        \n      })),\n      state('out', style({\n        height: 'calc(50vh - 10rem)',\n      })),\n      transition('in => out', animate('400ms ease-in-out')),\n      transition('out => in', animate('400ms ease-in-out'))\n    ])\n  ]\n})\n\nexport class EpigraphyTabComponent implements OnInit, OnDestroy {\n  exp_trig = '';\n  name: any;\n  revisor:any;\n  object : any;\n  epigraphyData: any;\n\n  subscription: Subscription;\n  expand_epi_subscription : Subscription;\n  expand_edit_subscription : Subscription;\n  @ViewChild('expanderEpigraphy') expander_body: ElementRef;\n\n  constructor(private documentService: DocumentSystemService, private expand : ExpanderService, private rend: Renderer2) { }\n\n  ngOnInit(): void {\n\n    this.subscription = this.documentService.epigraphyData$.subscribe(\n      object => {\n        if(this.object != object){\n          this.epigraphyData = null; \n        }\n\n        console.log(object)\n\n        if(object!=null){\n          this.object = object\n\n          this.epigraphyData = this.object;\n          if(this.object != null){\n            setTimeout(() => {\n              //@ts-ignore\n              $('#epigraphyTabModal').modal('hide');\n              $('.modal-backdrop').remove();\n              var timer = setInterval((val)=>{                 \n                try{\n                    //@ts-ignore\n                    $('#epigraphyTabModal').modal('hide');\n                    if(!$('#epigraphyTabModal').is(':visible')){\n                      clearInterval(timer)\n                    }\n                    \n                }catch(e){\n                    console.log(e)\n                }    \n              }, 10)\n            }, 500);\n             \n            \n          }\n        }else{\n          this.epigraphyData = null;\n        }\n        \n      },error => {},\n     \n    );\n    \n   \n\n    this.expand_epi_subscription = this.expand.expEpigraphy$.subscribe(\n      trigger => {\n        setTimeout(() => {\n         // console.log(\"trigger epigraphy-tab: \", trigger)\n          if(trigger){\n            let isEditExpanded = this.expand.isEditTabExpanded();\n            let isEpigraphyExpanded = this.expand.isEpigraphyTabExpanded();\n         //   console.log(isEditExpanded, isEpigraphyExpanded)\n            \n            if(!isEditExpanded){\n              \n              this.rend.setStyle(this.expander_body.nativeElement, 'height', 'calc(100vh - 15rem)')\n              this.exp_trig = 'in';\n              this.rend.setStyle(this.expander_body.nativeElement, 'max-height', 'calc(100vh - 15rem)');\n            }else{\n              \n              this.rend.setStyle(this.expander_body.nativeElement, 'height', 'calc(50vh - 10rem)');\n              this.exp_trig = 'in';\n              this.rend.setStyle(this.expander_body.nativeElement, 'max-height', 'calc(50vh - 10rem)');\n              \n            }\n            \n            \n          }else if(trigger==null){\n            return;\n          }else{\n            this.rend.setStyle(this.expander_body.nativeElement, 'height', 'calc(50vh - 10rem)');\n            this.rend.setStyle(this.expander_body.nativeElement, 'max-height', 'calc(50vh - 10rem)');\n            this.exp_trig = 'out';\n          }\n        }, 100);\n        \n      }\n    );\n\n    this.expand_edit_subscription = this.expand.expEdit$.subscribe(\n      trigger => {\n        setTimeout(() => {\n          if(trigger){\n            this.exp_trig = 'in';\n            this.rend.setStyle(this.expander_body.nativeElement, 'height', 'calc(50vh - 10rem)')\n            this.rend.setStyle(this.expander_body.nativeElement, 'max-height', 'calc(50vh - 10rem)')\n          }else if(trigger==null){\n            return;\n          }else{\n            this.rend.setStyle(this.expander_body.nativeElement, 'max-height', 'calc(50vh - 10rem)');\n            this.exp_trig = 'out';\n          }\n        }, 100);\n        \n      }\n    );\n  }\n\n  ngOnDestroy(): void {\n    this.subscription.unsubscribe();\n    this.expand_edit_subscription.unsubscribe();\n    this.expand_epi_subscription.unsubscribe();\n  }\n\n}\n","\n\n\n\n<div id=\"cardsAccordion\" class=\"accordion\" [hidden]=\"object == null\">\n    <div class=\"card my-2\">\n        <div class=\"card-header\">\n            <h5 class=\"mb-0 w-100 d-flex justify-content-between align-self-center\">\n                <div>\n                    <span class=\"btn\" *ngIf=\"object != null\">\n                        <!-- <span *ngIf=\"isLexicalEntry\">\n                            Lexical Entry\n                        </span>\n                        <span *ngIf=\"isSense\">\n                            Sense\n                        </span>\n                        <span *ngIf=\"isForm\">\n                            Form\n                        </span> -->\n                        <!-- CREATED BY {{creator}} ON {{creationDate | date :'dd/MM/yyyy hh:mm:ss'}} -->\n\t\t\t\t\t\t{{name}}\n                    </span>\n                </div>\n                <div>\n                   <!--  <div class=\"spinner-border spinner-border-sm m-1\" role=\"status\" *ngIf=\"searchIconSpinner\">\n                        <span class=\"sr-only\">Loading...</span>\n                    </div> -->\n                    <!-- <button class=\"btn btn-link\" *ngIf=\"isLexicalEntry\" (click)=\"removeElementModal.show()\">\n                        <i class=\"fa fa-trash\"></i>\n                    </button>\n                    <button class=\"btn btn-link\" *ngIf=\"isForm\" title=\"delete form\" (click)=\"removeElementModal.show()\">\n                        <i class=\"fa fa-trash\"></i>\n                    </button>\n                    <button class=\"btn btn-link\" *ngIf=\"isSense\" title=\"delete sense\"\n                        (click)=\"removeElementModal.show()\">\n                        <i class=\"fa fa-trash\"></i>\n                    </button> -->\n                    <!-- <button class=\"btn btn-link\" (click)=\"changeStatus()\" *ngIf=\"isLexicalEntry\">\n                        <i class=\"fa fa-circle\" [hidden]=\"lock!=0\" style=\"color: red\"></i>\n                        <i class=\"fa fa-circle\" [hidden]=\"lock!=1\" style=\"color: yellow\"></i>\n                        <i class=\"fa fa-circle locked-tooltip\" [hidden]=\"lock!=2\" data-toggle=\"tooltip\"\n                            data-placement=\"bottom\" data-html=\"true\" title=\"Locked tooltip\" style=\"color:green;\"></i>\n                    </button> -->\n                </div>\n            </h5>\n        </div>\n        <div #expanderEpigraphy [@slideInOut]=\"exp_trig\" class=\"card-body epigraphy-tab-body\">\n            \n            <div id=\"epigraphyTabModal\" class=\"modal fade\" role=\"dialog\">\n                <div class=\"modal-dialog\">\n\n                    <!-- Modal content-->\n                    <div class=\"modal-content\">\n                        <div class=\"modal-body\">\n                            <div class=\"d-flex justify-content-center\">\n                                <div class=\"spinner-border\" role=\"status\">\n                                    <span class=\"sr-only\">Loading...</span>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n\n                </div>\n            </div>\n\t\t\t<app-epigraphy-form [epiData]=\"epigraphyData\"></app-epigraphy-form>\n            <!-- <app-lexical-entry-core-form [lexData]=\"lexicalEntryData\" *ngIf=\"isLexicalEntry\">\n            </app-lexical-entry-core-form>\n            <app-form-core-form [formData]=\"formData\" *ngIf=\"isForm\"></app-form-core-form>\n            <app-sense-core-form [senseData]=\"senseData\" *ngIf=\"isSense\"></app-sense-core-form>\n            <app-lexical-concept-form [lexicalConceptData]=\"lexicalConceptData\" *ngIf=\"isLexicalConcept\">\n            </app-lexical-concept-form> -->\n        </div>\n        <div class=\"card-footer text-muted\">\n            <div class=\"w-100 d-flex justify-content-between align-items-center\">\n                <!-- <div *ngIf=\"object != null\">\n                    <span>LAST UPDATE ON {{lastUpdateDate | date :'dd/MM/yyyy hh:mm:ss'}}</span>\n                </div> -->\n                <!-- <div class=\"btn-group dropup dropleft\">\n                    <button class=\"btn btn-success\" type=\"button\" id=\"dropdownAddLemma\" data-toggle=\"dropdown\"\n                        aria-haspopup=\"true\" aria-expanded=\"false\"> <i class=\"fas fa-plus\"></i> </button>\n                    <div class=\"dropdown-menu dropdown-menu-right\" aria-labelledby=\"dropdownAddLemma\">\n                        <button class=\"dropdown-item\" title=\"add new form\" (click)=\"addNewForm()\">Add Form</button>\n                        <button class=\"dropdown-item\" (click)=\"addNewSense()\">Add Sense</button>\n                        <button class=\"dropdown-item\" (click)=\"addNewEtymology()\">Add Etymology</button>\n                        <button class=\"dropdown-item\" (click)=\"showBiblioModal()\">Add Bibliography</button>\n                    </div>\n                </div> -->\n            </div>\n        </div>\n    </div>\n</div>","/*\n   Copyright 2021-2022  Istituto di Linguistica Computazionale \"A. Zampolli\", Consiglio Nazionale delle Ricerche, Pisa, Italy.\n \nThis file is part of EpiLexo.\n\nEpiLexo is free software: you can redistribute it and/or modify it under the terms of the GNU General Public License as published by the Free Software Foundation, either version 3 of the License, or (at your option) any later version.\n\nEpiLexo is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for more details.\n\nYou should have received a copy of the GNU General Public License along with EpiLexo. If not, see <https://www.gnu.org/licenses/>.\n*/\n\nimport { Component, OnInit } from '@angular/core';\n\n@Component({\n  selector: 'app-page-not-found',\n  templateUrl: './page-not-found.component.html',\n  styleUrls: ['./page-not-found.component.scss']\n})\nexport class PageNotFoundComponent implements OnInit {\n\n  constructor() { }\n\n  ngOnInit(): void {\n  }\n\n}\n","\n\n<p>page-not-found works!</p>\n","/*\n   Copyright 2021-2022  Istituto di Linguistica Computazionale \"A. Zampolli\", Consiglio Nazionale delle Ricerche, Pisa, Italy.\n \nThis file is part of EpiLexo.\n\nEpiLexo is free software: you can redistribute it and/or modify it under the terms of the GNU General Public License as published by the Free Software Foundation, either version 3 of the License, or (at your option) any later version.\n\nEpiLexo is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for more details.\n\nYou should have received a copy of the GNU General Public License along with EpiLexo. If not, see <https://www.gnu.org/licenses/>.\n*/\n\nimport { Component, EventEmitter, Input, OnDestroy, OnInit, Output, SimpleChanges } from '@angular/core';\nimport { FormArray, FormBuilder, FormGroup } from '@angular/forms';\nimport { Subject, Subscription } from 'rxjs';\nimport { debounceTime, takeUntil } from 'rxjs/operators';\nimport { LexicalEntriesService } from 'src/app/services/lexical-entries/lexical-entries.service';\nimport { ToastrService } from 'ngx-toastr';\n\n@Component({\n  selector: 'app-see-also',\n  templateUrl: './see-also.component.html',\n  styleUrls: ['./see-also.component.scss']\n})\nexport class SeeAlsoComponent implements OnInit, OnDestroy {\n\n  @Input() seeAlsoData: any[] | any;\n\n  private subject: Subject<any> = new Subject();\n  private subject_input: Subject<any> = new Subject();\n\n  subscription: Subscription;\n  object: any;\n  peopleLoading = false;\n\n  destroy$: Subject<boolean> = new Subject();\n\n  isSense;\n  isForm;\n  isLexEntry;\n  isLexicalConcept;\n\n  searchResults: [];\n  memorySeeAlso = [];\n  filterLoading = false;\n  disableSeeAlso = false;\n\n  seeAlsoForm = new FormGroup({\n    seeAlsoArray: new FormArray([this.createSeeAlsoEntry()])\n  })\n\n  seeAlsoArray: FormArray;\n\n  search_filter_subscriber: Subscription;\n  search_by_input_subscriber: Subscription;\n\n  constructor(private formBuilder: FormBuilder, private lexicalService: LexicalEntriesService, private toastr: ToastrService) {\n  }\n\n  ngOnInit() {\n    this.seeAlsoForm = this.formBuilder.group({\n      seeAlsoArray: this.formBuilder.array([])\n    })\n\n    this.onChanges();\n    /* //console.log(this.seeAlsoForm) */\n    this.search_filter_subscriber = this.subject.pipe(debounceTime(1000), takeUntil(this.destroy$)).subscribe(\n      data => {\n        console.log(data)\n        this.onSearchFilter(data)\n      }\n    )\n\n    this.search_by_input_subscriber = this.subject_input.pipe(debounceTime(1000), takeUntil(this.destroy$)).subscribe(\n      data => {\n        this.onChangeSeeAlsoByInput(data['value'], data['i'])\n      }\n    )\n    this.triggerTooltip();\n  }\n\n\n  triggerTooltip() {\n    setTimeout(() => {\n      //@ts-ignore\n      $('.see-also-tooltip').tooltip({\n        trigger: 'hover'\n      });\n    }, 500);\n  }\n\n  ngOnChanges(changes: SimpleChanges) {\n    setTimeout(() => {\n      if (changes.seeAlsoData.currentValue != null) {\n        this.object = changes.seeAlsoData.currentValue;\n        this.seeAlsoArray = this.seeAlsoForm.get('seeAlsoArray') as FormArray;\n        this.seeAlsoArray.clear();\n        this.memorySeeAlso = [];\n        this.disableSeeAlso = false;\n        //console.log(this.object)\n\n        this.object.array.forEach(element => {\n          if (element.label != '') {\n            this.addSeeAlsoEntry(element.label, element.inferred, element.entity, element.linkType)\n            this.memorySeeAlso.push(element.entity)\n          } else {\n            this.addSeeAlsoEntry(element.entity, element.inferred, element.entity, element.linkType)\n            this.memorySeeAlso.push(element.entity)\n          }\n\n\n        });\n\n        if (this.object.lexicalEntry != undefined) {\n          this.isLexEntry = true;\n          this.isForm = false;\n          this.isSense = false;\n          this.isLexicalConcept = false;\n        } else if (this.object.form != undefined) {\n          this.isLexEntry = false;\n          this.isForm = true;\n          this.isSense = false;\n          this.isLexicalConcept = false;\n        } else if (this.object.sense != undefined) {\n          this.isLexEntry = false;\n          this.isForm = false;\n          this.isSense = true;\n          this.isLexicalConcept = false;\n        } else if (this.object.lexicalConcept != undefined) {\n          this.isLexEntry = false;\n          this.isForm = false;\n          this.isSense = false;\n          this.isLexicalConcept = true;\n        }\n\n      } else {\n        this.object = null;\n      }\n    }, 10);\n\n  }\n\n  async onChangeSeeAlsoByInput(value, index) {\n\n    if (value.trim() != \"\") {\n      var selectedValues = value;\n      var lexicalElementId = '';\n      if (this.object.lexicalEntry != undefined && this.object.form == undefined && this.object.sense == undefined) {\n        lexicalElementId = this.object.lexicalEntry;\n      } else if (this.object.form != undefined) {\n        lexicalElementId = this.object.form;\n      } else if (this.object.sense != undefined) {\n        lexicalElementId = this.object.sense;\n      } else if (this.object.etymology != undefined) {\n        lexicalElementId = this.object.etymology;\n      } else if (this.object.lexicalConcept != undefined) {\n        lexicalElementId = this.object.lexicalConcept;\n      }\n\n      console.log(this.object)\n\n      if (this.memorySeeAlso[index] == \"\" || this.memorySeeAlso[index] == undefined) {\n        let parameters = {\n          type: \"reference\",\n          relation: \"http://www.w3.org/2000/01/rdf-schema#seeAlso\",\n          value: selectedValues\n        }\n        try {\n          let data = await this.lexicalService.updateGenericRelation(lexicalElementId, parameters).toPromise();\n        } catch (e) {\n          console.log(e)\n          if (e.status == 200) {\n            this.memorySeeAlso.push(selectedValues)\n            this.toastr.success('SeeAlso updated', '', {\n              timeOut: 5000,\n            });\n          } else {\n            this.toastr.error(e.error, 'Error', {\n              timeOut: 5000,\n            });\n          }\n        }\n      } else {\n        let oldValue = this.memorySeeAlso[index];\n        let parameters = {\n          type: \"reference\",\n          relation: \"http://www.w3.org/2000/01/rdf-schema#seeAlso\",\n          value: selectedValues,\n          currentValue: oldValue\n        }\n        console.log(parameters)\n        try {\n          let data = await this.lexicalService.updateGenericRelation(lexicalElementId, parameters).toPromise();\n        } catch (e) {\n          if (e.status == 200) {\n            this.memorySeeAlso.push(selectedValues)\n            this.toastr.success('SeeAlso updated', '', {\n              timeOut: 5000,\n            });\n          } else {\n            this.toastr.error(e.error, 'Error', {\n              timeOut: 5000,\n            });\n          }\n        }\n\n      }\n    }\n    this.disableSeeAlso = false;\n\n\n  }\n\n  async onChangeSeeAlso(seeAlso, index) {\n    //console.log(seeAlso.selectedItems)\n    this.disableSeeAlso = false;\n    if (seeAlso.selectedItems.length != 0) {\n      var selectedValues = seeAlso.selectedItems[0].value.lexicalEntry;\n      var lexicalElementId = '';\n      if (this.object.lexicalEntry != undefined) {\n        lexicalElementId = this.object.lexicalEntry;\n      } else if (this.object.form != undefined) {\n        lexicalElementId = this.object.form;\n      } else if (this.object.sense != undefined) {\n        lexicalElementId = this.object.sense;\n      } else if (this.object.etymology != undefined) {\n        lexicalElementId = this.object.etymology;\n      }\n\n      if (this.memorySeeAlso[index] == undefined) {\n        let parameters = {\n          type: \"reference\",\n          relation: \"http://www.w3.org/2000/01/rdf-schema#seeAlso\",\n          value: selectedValues\n        }\n        console.log(parameters)\n\n        try {\n          let data = await this.lexicalService.updateGenericRelation(lexicalElementId, parameters).toPromise();\n        } catch (e) {\n          if (e.status == 200) {\n            this.memorySeeAlso[index] = selectedValues\n            this.lexicalService.refreshLinkCounter('+1')\n            this.toastr.success('SeeAlso updated', '', {\n              timeOut: 5000,\n            });\n          } else {\n            this.toastr.error(e.error, 'Error', {\n              timeOut: 5000,\n            });\n          }\n        }\n\n      } else {\n        let oldValue = this.memorySeeAlso[index];\n        let parameters = {\n          type: \"reference\",\n          relation: \"http://www.w3.org/2000/01/rdf-schema#seeAlso\",\n          value: selectedValues,\n          currentValue: oldValue\n        }\n        console.log(parameters)\n        try {\n          let data = await this.lexicalService.updateGenericRelation(lexicalElementId, parameters).toPromise();\n        } catch (e) {\n          if (e.status == 200) {\n            this.memorySeeAlso[index] = selectedValues\n            this.lexicalService.refreshLinkCounter('+1')\n            this.toastr.success('SeeAlso updated', '', {\n              timeOut: 5000,\n            });\n          } else {\n            this.toastr.error(e.error, 'Error', {\n              timeOut: 5000,\n            });\n          }\n        }\n\n      }\n\n    }\n\n\n  }\n\n  deleteData() {\n    this.searchResults = [];\n  }\n\n\n\n  onSearchFilter(data) {\n    this.filterLoading = true;\n    this.searchResults = [];\n    console.log(this.object)\n    if (this.object.lexicalEntry != undefined && this.object.form == undefined && this.object.sense == undefined) {\n      let parameters = {\n        text: data,\n        searchMode: \"startsWith\",\n        type: \"\",\n        pos: \"\",\n        formType: \"entry\",\n        author: \"\",\n        lang: \"\",\n        status: \"\",\n        offset: 0,\n        limit: 500\n      }\n      //console.log(data.length)\n      this.lexicalService.getLexicalEntriesList(parameters).pipe(takeUntil(this.destroy$)).subscribe(\n        data=> {\n          console.log(data)\n          if(data){\n            let filter_lang = data.list;\n            \n            filter_lang.forEach(element => {\n              element['label_lang'] = element.label + \"@\" + element.language;\n            });\n            console.log(filter_lang);\n            this.searchResults = data.list;\n          }\n        }, error=> { \n          console.log(error)\n        } \n      )\n      \n      \n\n\n    } else if (this.object.form != undefined) {\n      let lexId = this.object.parentInstanceName;\n      let parameters = {\n        text: data,\n        searchMode: \"startsWith\",\n        representationType: \"writtenRep\",\n        author: \"\",\n        offset: 0,\n        limit: 500\n      }\n      this.lexicalService.getFormList(parameters).pipe(takeUntil(this.destroy$)).subscribe(\n        data=> {\n          console.log(data)\n          if(data){\n            let filter_lang = data.list;\n            \n            filter_lang.forEach(element => {\n              element['label_lang'] = element.label + \"@\" + element.language;\n            });\n            console.log(filter_lang);\n            this.searchResults = data.list;\n          }\n        }, error=> { \n          console.log(error)\n        } \n      )\n    } else if (this.object.sense != undefined) {\n\n      let parameters = {\n        text: data,\n        searchMode: \"startsWith\",\n        type: \"\",\n        field: \"definition\",\n        pos: \"\",\n        formType: \"entry\",\n        author: \"\",\n        lang: \"\",\n        status: \"\",\n        offset: 0,\n        limit: 500\n      }\n\n\n      this.lexicalService.getLexicalSensesList(parameters).pipe(takeUntil(this.destroy$)).subscribe(\n        data=> {\n          console.log(data)\n          if(data){\n            let filter_lang = data.list;\n            \n            filter_lang.forEach(element => {\n              element['label_lang'] = element.label + \"@\" + element.language;\n            });\n            console.log(filter_lang);\n            this.searchResults = data.list;\n          }\n        }, error=> { \n          console.log(error)\n        } \n      )\n    } else if (this.object.etymology != undefined) {\n\n      let parameters = {\n        text: data,\n        searchMode: \"startsWith\",\n        type: \"etymon\",\n        pos: \"\",\n        formType: \"entry\",\n        author: \"\",\n        lang: \"\",\n        status: \"\",\n        offset: 0,\n        limit: 500\n      }\n      this.lexicalService.getLexicalEntriesList(parameters).pipe(takeUntil(this.destroy$)).subscribe(\n        data=> {\n          console.log(data)\n          if(data){\n            let filter_lang = data.list;\n            \n            filter_lang.forEach(element => {\n              element['label_lang'] = element.label + \"@\" + element.language;\n            });\n            console.log(filter_lang);\n            this.searchResults = data.list;\n          }\n        }, error=> { \n          console.log(error)\n        } \n      )\n    }\n    else {\n      this.filterLoading = false;\n    }\n    //console.log(data)\n\n  }\n\n  triggerSeeAlsoInput(evt, i) {\n    if (evt.key != 'Control' && evt.key != 'Shift' && evt.key != 'Alt') {\n      let value = evt.target.value;\n      this.subject_input.next({ value, i })\n    }\n  }\n\n  triggerSeeAlso(evt) {\n    if (evt.target != undefined) {\n      this.subject.next(evt.target.value)\n    }\n\n  }\n  onChanges(): void {\n    this.seeAlsoForm.valueChanges.pipe(debounceTime(200), takeUntil(this.destroy$)).subscribe(searchParams => {\n      //console.log(searchParams)\n    })\n  }\n\n  createSeeAlsoEntry(e?, i?, le?, lt?) {\n    if (e == undefined) {\n      return this.formBuilder.group({\n        entity: null,\n        inferred: false,\n        lexical_entity: null,\n        link_type: 'internal'\n      })\n    } else {\n      return this.formBuilder.group({\n        entity: e,\n        inferred: i,\n        lexical_entity: le,\n        link_type: lt\n      })\n    }\n\n  }\n\n  addSeeAlsoEntry(e?, i?, le?, lt?) {\n    this.seeAlsoArray = this.seeAlsoForm.get('seeAlsoArray') as FormArray;\n\n    if (e == undefined) {\n      this.disableSeeAlso = true;\n\n      this.seeAlsoArray.push(this.createSeeAlsoEntry());\n    } else {\n      this.seeAlsoArray.push(this.createSeeAlsoEntry(e, i, le, lt));\n    }\n\n\n    this.triggerTooltip();\n  }\n\n  async removeElement(index) {\n    this.seeAlsoArray = this.seeAlsoForm.get('seeAlsoArray') as FormArray;\n\n    let lexical_entity = this.seeAlsoArray.at(index).get('lexical_entity').value;\n    //console.log('Lexical Entity: '+lexical_entity)\n    if (lexical_entity == '' || lexical_entity == null) {\n      lexical_entity = this.seeAlsoArray.at(index).get('entity').value;\n      //console.log('Entity: '+lexical_entity)\n    }\n\n    if (this.object.lexicalEntry != undefined) {\n\n      let lexId = this.object.lexicalEntry;\n\n      let parameters = {\n        relation: 'http://www.w3.org/2000/01/rdf-schema#seeAlso',\n        value: lexical_entity\n      }\n\n      //console.log(parameters)\n      //console.log(index)\n      try {\n        let delete_see_also = await this.lexicalService.deleteLinguisticRelation(lexId, parameters).toPromise();\n\n\n        this.lexicalService.updateCoreCard(this.object)\n        this.toastr.success('SeeAlso deleted', '', {\n          timeOut: 5000,\n        });\n        this.lexicalService.refreshLinkCounter('-1')\n\n      } catch (e) {\n        if(e.status == 200){\n          this.toastr.success('SeeAlso deleted', '', {\n            timeOut: 5000,\n          });\n        }else{\n          this.toastr.error(e.error, 'Error', {\n            timeOut: 5000,\n          });\n        }\n        \n        this.lexicalService.refreshLinkCounter('-1')\n\n      }\n\n\n    } else if (this.object.form != undefined) {\n      let formId = this.object.form;\n\n      let parameters = {\n        relation: 'http://www.w3.org/2000/01/rdf-schema#seeAlso',\n        value: lexical_entity\n      }\n\n      try {\n        let delete_see_also = await this.lexicalService.deleteLinguisticRelation(formId, parameters).toPromise();\n        this.lexicalService.updateCoreCard(this.object)\n        this.toastr.success('SeeAlso deleted', '', {\n          timeOut: 5000,\n        });\n        this.lexicalService.refreshLinkCounter('-1')\n\n      } catch (e) {\n        this.toastr.error(e.error, 'Error', {\n          timeOut: 5000,\n        });\n        this.lexicalService.refreshLinkCounter('-1')\n      }\n\n\n    } else if (this.object.sense != undefined) {\n      let senseId = this.object.sense;\n\n      let parameters = {\n        type: 'morphology',\n        relation: 'http://www.w3.org/2000/01/rdf-schema#seeAlso',\n        value: lexical_entity\n      }\n\n      //console.log(parameters)\n\n      try {\n        let delete_see_also = await this.lexicalService.deleteLinguisticRelation(senseId, parameters).toPromise();\n\n        this.lexicalService.updateCoreCard(this.object)\n        this.toastr.success('SeeAlso deleted', '', {\n          timeOut: 5000,\n        });\n        this.lexicalService.refreshLinkCounter('-1')\n\n      } catch (e) {\n        this.toastr.error(e.error, 'Error', {\n          timeOut: 5000,\n        });\n        this.lexicalService.refreshLinkCounter('-1')\n      }\n    } else if (this.object.etymology != undefined) {\n      let etymId = this.object.etymology;\n      this.lexicalService.refreshLinkCounter('-1')\n\n      let parameters = {\n        type: 'morphology',\n        relation: 'http://www.w3.org/2000/01/rdf-schema#seeAlso',\n        value: lexical_entity\n      }\n\n      //console.log(parameters)\n\n      try {\n        let delete_see_also = await this.lexicalService.deleteLinguisticRelation(etymId, parameters).toPromise();\n\n        this.lexicalService.updateCoreCard(this.object)\n        this.toastr.success('SeeAlso deleted', '', {\n          timeOut: 5000,\n        });\n        this.lexicalService.refreshLinkCounter('-1')\n\n      } catch (e) {\n        this.toastr.error(e.error, 'Error', {\n          timeOut: 5000,\n        });\n        this.lexicalService.refreshLinkCounter('-1')\n      }\n    } else if (this.object.lexicalConcept != undefined) {\n      let conceptId = this.object.lexicalConcept;\n      this.lexicalService.refreshLinkCounter('-1')\n\n      let parameters = {\n        type: 'morphology',\n        relation: 'http://www.w3.org/2000/01/rdf-schema#seeAlso',\n        value: lexical_entity\n      }\n\n      //console.log(parameters)\n\n      try {\n        let delete_see_also = await this.lexicalService.deleteLinguisticRelation(conceptId, parameters).toPromise();\n\n        this.lexicalService.updateCoreCard(this.object)\n        this.toastr.success('SeeAlso deleted', '', {\n          timeOut: 5000,\n        });\n        this.lexicalService.refreshLinkCounter('-1')\n\n      } catch (e) {\n        if(e.status == 200){\n          this.toastr.success('See also deleted correctly', '', {\n            timeOut: 5000,\n          });\n        }else{\n          this.toastr.error(e.error, 'Error', {\n            timeOut: 5000,\n          });\n        }\n        \n        this.lexicalService.refreshLinkCounter('-1')\n      }\n    }\n    this.disableSeeAlso = false;\n    this.memorySeeAlso.splice(index, 1)\n    this.seeAlsoArray.removeAt(index);\n\n  }\n\n  ngOnDestroy(): void {\n    this.search_filter_subscriber.unsubscribe();\n    this.search_by_input_subscriber.unsubscribe();\n\n    this.destroy$.next(true);\n    this.destroy$.complete();\n  }\n\n}\n","\n\n<form [formGroup]=\"seeAlsoForm\">\n    <div class=\"form-group row mt-3\">\n        <div class=\"input-group col-sm-12\">\n            <div class=\"card\">\n                <span class=\"text-id\">SEE ALSO</span>\n                <a (click)=\"addSeeAlsoEntry()\" class=\"pointer\"  [ngClass]=\"{no_pointer: disableSeeAlso}\"><span class=\"collapse-icon\"><i\n                            class=\"fa fa-plus-square\"></i></span></a>\n                <div class=\"card-body\">\n\n                    <div formArrayName=\"seeAlsoArray\" class=\"mt-3\">\n\n                        <div *ngFor=\"let seeAlso of seeAlsoForm.get('seeAlsoArray')['controls']; let i = index\">\n                            <div [formGroupName]=\"i\">\n                                <div class=\"d-flex\">\n                                    <div class=\"form-group row ml-2  mr-2 w-100\" *ngIf=\"{switch : seeAlso.get('link_type').value != 'internal'}; let variable\">\n                                        <div class=\"input-group\" *ngIf=\"{boolean : seeAlso.get('inferred').value}; let inf\">\n                                              \n                                            <ng-select #seeAlsoSelect formControlName=\"entity\" name=\"entity\" [dropdownPosition]=\"'bottom'\"\n                                            (keyup)=\"triggerSeeAlso($event)\" (change)=\"onChangeSeeAlso(seeAlsoSelect, i)\"\n                                            [items]=\"searchResults\" bindValue=\"label\" (focus)=\"deleteData()\" bindLabel=\"label\"\n                                            placeholder=\"Search lexical entry\" appendTo=\"body\" \n                                            *ngIf=\"!variable.switch && !isSense && !isLexicalConcept && seeAlso.get('link_type').value != 'external'\">\n                                                <ng-template ng-option-tmp let-item=\"item\" let-search=\"searchTerm\">\n                                                    <div>\n                                                        <span>{{item.label}} </span><span style=\"color: blue;\">@{{item.language}}</span>\n                                                    </div>\n                \n                                                </ng-template>\n                                            </ng-select>\n\n                                            <ng-select #seeAlsoSenses\n                                                (change)=\"onChangeSeeAlso(seeAlsoSenses, i)\" (focus)=\"deleteData()\"\n                                                (keyup)=\"triggerSeeAlso($event)\" formControlName=\"entity\" name=\"entity\"\n                                                [dropdownPosition]=\"'bottom'\"\n                                                bindValue=\"definition\" class=\"resizeNgSelect\" [items]=\"searchResults\"\n                                                bindLabel=\"definition\" placeholder=\"Search entity\" appendTo=\"body\"\n                                                *ngIf=\"!variable.switch && isSense && !isLexicalConcept && seeAlso.get('link_type').value != 'external'\" [readonly]=\"inf.boolean\">\n                                            </ng-select>\n                                            <input formControlName=\"entity\" name=\"entity\" type=\"text\"\n                                                class=\"form-control \" (keyup)=\"triggerSeeAlsoInput($event, i)\"\n                                                placeholder=\"Insert URI\" *ngIf=\"variable.switch || isLexicalConcept\">\n\n                                           \n\n                                            <div class=\"input-group-append\" *ngIf=\"!inf.boolean\">\n                                                <div class=\"input-group-append ml-2 form-check\" *ngIf=\"!isLexicalConcept\">\n                                                    <input class=\"form-check-input see-also-tooltip\" type=\"checkbox\"\n                                                        (change)=\"variable.switch=!variable.switch; variable.switch ? seeAlso.get('link_type').value = 'external' : seeAlso.get('link_type').value = 'internal'\"\n                                                        data-toggle=\"tooltip\" data-placement=\"bottom\"\n                                                        data-trigger=\"hover\"\n                                                        title=\"Clicca per inserire un URI manualmente\"\n                                                        [checked]=\"variable.switch\">\n                                                    <label class=\"form-check-label\" for=\"extCheck\"></label>\n                                                </div>\n                                                \n                                                <div class=\"input-group-append ml-2\">\n                                                    <button (click)=\"removeElement(i)\" class=\"btn btn-danger\"\n                                                        type=\"button\"><i class=\"fa fa-trash-alt\"></i></button>\n                                                </div>\n                                            </div>\n                                        </div>\n                                    </div>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n</form>","/*\n   Copyright 2021-2022  Istituto di Linguistica Computazionale \"A. Zampolli\", Consiglio Nazionale delle Ricerche, Pisa, Italy.\n \nThis file is part of EpiLexo.\n\nEpiLexo is free software: you can redistribute it and/or modify it under the terms of the GNU General Public License as published by the Free Software Foundation, either version 3 of the License, or (at your option) any later version.\n\nEpiLexo is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for more details.\n\nYou should have received a copy of the GNU General Public License along with EpiLexo. If not, see <https://www.gnu.org/licenses/>.\n*/\n\nimport { Component, OnInit } from '@angular/core';\n\n@Component({\n  selector: 'app-profile-page',\n  templateUrl: './profile-page.component.html',\n  styleUrls: ['./profile-page.component.scss']\n})\nexport class ProfilePageComponent implements OnInit {\n\n  constructor() { }\n\n  ngOnInit(): void {\n  }\n\n}\n","\n\n<div class=\"container-fluid profile-page\">\n    <div class=\"row h-100\">\n        <div class=\"col-md-12\">\n            <app-profiles-table></app-profiles-table>\n        </div>\n    </div>\n</div>\n","/*\n   Copyright 2021-2022  Istituto di Linguistica Computazionale \"A. Zampolli\", Consiglio Nazionale delle Ricerche, Pisa, Italy.\n \nThis file is part of EpiLexo.\n\nEpiLexo is free software: you can redistribute it and/or modify it under the terms of the GNU General Public License as published by the Free Software Foundation, either version 3 of the License, or (at your option) any later version.\n\nEpiLexo is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for more details.\n\nYou should have received a copy of the GNU General Public License along with EpiLexo. If not, see <https://www.gnu.org/licenses/>.\n*/\n\nimport { Component, Input, OnDestroy, OnInit, SimpleChanges } from '@angular/core';\nimport { Subject, Subscription } from 'rxjs';\nimport { LexicalEntriesService } from 'src/app/services/lexical-entries/lexical-entries.service';\n\nimport { FormBuilder, FormGroup, FormArray, FormControl } from '@angular/forms';\nimport { debounceTime, pairwise, startWith, takeUntil } from 'rxjs/operators';\nimport { ConceptService } from 'src/app/services/concept/concept.service';\nimport { ToastrService } from 'ngx-toastr';\nimport { NgSelectComponent } from '@ng-select/ng-select';\n@Component({\n  selector: 'app-lexical-concept-form',\n  templateUrl: './lexical-concept-form.component.html',\n  styleUrls: ['./lexical-concept-form.component.scss']\n})\nexport class LexicalConceptFormComponent implements OnInit, OnDestroy {\n\n  switchInput = false;\n  subscription: Subscription;\n  object: any;\n  peopleLoading = false;\n  counter = 0;\n  componentRef: any;\n\n  @Input() lexicalConceptData: any;\n\n  lexicalConceptForm = new FormGroup({\n    label: new FormControl(''),\n    definition: new FormControl(''),\n    isEvokedBy: new FormArray([this.createIsEvokedBy()]),\n    lexicalizedSenses: new FormArray([this.createLexicalizedSense()])\n  })\n\n  isEvokedByArray: FormArray;\n  lexicalizedSensesArray: FormArray;\n  /* scheme: FormArray;\n  conceptReference: FormArray; */\n\n  destroy$: Subject<boolean> = new Subject();\n  disableAddIsEvokedBy: boolean = false;\n  disableAddLexicalizedSense: boolean = false;\n  memoryIsEvokedBy = [];\n  memoryLexicalizedSenses = [];\n  evokedBySubject: Subject<any> = new Subject();\n  lexicalizedSenseSubject: Subject<any> = new Subject();\n\n  searchResults: any[] = [];\n  searchResultsSenses: any[] = [];\n\n\n\n  constructor(private lexicalService: LexicalEntriesService,\n    private formBuilder: FormBuilder,\n    private conceptService: ConceptService,\n    private toastr: ToastrService) {\n  }\n\n  ngOnInit() {\n\n    this.lexicalConceptForm = this.formBuilder.group({\n      defaultLabel: '',\n      definition: '',\n      isEvokedBy: this.formBuilder.array([]),\n      lexicalizedSenses: this.formBuilder.array([]),\n\n    })\n    this.onChanges();\n    this.triggerTooltip();\n\n    this.evokedBySubject.pipe(debounceTime(1000), takeUntil(this.destroy$)).subscribe(\n      data => {\n        this.onSearchFilter(data)\n      }\n    );\n\n    this.lexicalizedSenseSubject.pipe(debounceTime(1000), takeUntil(this.destroy$)).subscribe(\n      data => {\n        this.onSearchFilterLexicalizedSense(data)\n      }\n    );\n  }\n\n  ngOnChanges(changes: SimpleChanges) {\n    setTimeout(() => {\n      if (this.object != changes.lexicalConceptData.currentValue) {\n        this.isEvokedByArray = this.lexicalConceptForm.get('isEvokedBy') as FormArray;\n        this.isEvokedByArray.clear();\n\n        this.lexicalizedSensesArray = this.lexicalConceptForm.get('lexicalizedSenses') as FormArray;\n        this.lexicalizedSensesArray.clear();\n\n        this.lexicalConceptForm.reset();\n\n        this.disableAddIsEvokedBy = false;\n        this.disableAddLexicalizedSense = false;\n        this.memoryIsEvokedBy = [];\n        this.memoryLexicalizedSenses = [];\n      }\n      //this.loadPeople();\n      this.object = changes.lexicalConceptData.currentValue;\n      if (this.object != null) {\n        this.lexicalConceptForm.get('defaultLabel').setValue(this.object.defaultLabel, { emitEvent: false });\n        this.lexicalConceptForm.get('definition').setValue(this.object.definition, { emitEvent: false });\n\n        const conceptId = this.object.lexicalConcept;\n        this.lexicalService.getLexEntryLinguisticRelation(conceptId, 'isEvokedBy').pipe(takeUntil(this.destroy$)).subscribe(\n          data => {\n            console.log(data)\n            for (var i = 0; i < data.length; i++) {\n              let entity = data[i]['entity'];\n              let type = data[i]['linkType'];\n              let label = data[i]['label'];\n              let inferred = data[i]['inferred'];\n              this.addIsEvokedBy(entity, type, inferred, label);\n              this.memoryIsEvokedBy.push(data[i])\n            }\n          }, error => {\n            console.log(error)\n          }\n        );\n\n        this.lexicalService.getLexEntryLinguisticRelation(conceptId, 'lexicalizedSense').pipe(takeUntil(this.destroy$)).subscribe(\n          data => {\n            console.log(data)\n            for (var i = 0; i < data.length; i++) {\n              let entity = data[i]['entity'];\n              let type = data[i]['linkType'];\n              let label = data[i]['label'];\n              let inferred = data[i]['inferred'];\n              this.addLexicalizedSense(entity, type, inferred, label);\n              this.memoryLexicalizedSenses.push(data[i])\n            }\n          }, error => {\n            console.log(error)\n          }\n        )\n      }\n      this.triggerTooltip();\n    }, 10)\n  }\n\n  triggerTooltip() {\n    setTimeout(() => {\n      //@ts-ignore\n      $('.vartrans-tooltip').tooltip({\n        trigger: 'hover'\n      });\n    }, 500);\n  }\n\n\n\n  onChanges(): void {\n    this.lexicalConceptForm.get('defaultLabel').valueChanges.pipe(debounceTime(1000), startWith(this.lexicalConceptForm.get('defaultLabel').value), pairwise(), takeUntil(this.destroy$)).subscribe(([prev, next]: [any, any]) => {\n      if (next != null) {\n        let parameters = {\n          relation: \"http://www.w3.org/2004/02/skos/core#prefLabel\",\n          source: this.object.lexicalConcept,\n          target: next,\n          oldTarget: prev == null ? this.object.defaultLabel : prev,\n          targetLanguage: this.object.language,\n          oldTargetLanguage: this.object.language\n        }\n\n\n        this.conceptService.updateSkosLabel(parameters).pipe(takeUntil(this.destroy$)).subscribe(\n          data => {\n            console.log(data)\n          }, error => {\n            console.log(error);\n\n            //this.lexicalService.changeDecompLabel(next)\n            if (error.status != 200) {\n              this.toastr.error(error.error, 'Error', {\n                timeOut: 5000,\n              });\n            } else {\n              const data = this.object;\n              data['request'] = 0;\n              data['new_label'] = next;\n              this.lexicalService.refreshAfterEdit(data);\n              this.lexicalService.spinnerAction('off');\n              this.lexicalService.updateCoreCard({ lastUpdate: error.error.text });\n              this.toastr.success('Label changed correctly for ' + this.object.lexicalConcept, '', {\n                timeOut: 5000,\n              });\n            }\n          }\n        )\n      }\n    })\n\n    this.lexicalConceptForm.get('definition').valueChanges.pipe(debounceTime(1000), startWith(this.lexicalConceptForm.get('definition').value), pairwise(), takeUntil(this.destroy$)).subscribe(([prev, next]: [any, any]) => {\n      if (next != null) {\n        let parameters = {\n          relation: \"http://www.w3.org/2004/02/skos/core#definition\",\n          source: this.object.lexicalConcept,\n          target: next,\n          oldTarget: prev == null ? this.object.definition : prev,\n          targetLanguage: this.object.language,\n          oldTargetLanguage: this.object.language\n        }\n\n\n        this.conceptService.updateNoteProperty(parameters).pipe(takeUntil(this.destroy$)).subscribe(\n          data => {\n            console.log(data)\n          }, error => {\n            console.log(error);\n\n            //this.lexicalService.changeDecompLabel(next)\n            if (error.status != 200) {\n              this.toastr.error(error.error, 'Error', {\n                timeOut: 5000,\n              });\n            } else {\n\n              this.lexicalService.spinnerAction('off');\n              this.lexicalService.updateCoreCard({ lastUpdate: error.error.text });\n              this.toastr.success('Definition changed correctly for ' + this.object.lexicalConcept, '', {\n                timeOut: 5000,\n              });\n              this.lexicalConceptForm.get('definition').setValue(next, { emitEvent: false });\n            }\n          }\n        )\n      }\n    })\n  }\n\n  onSearchFilter(data) {\n    this.searchResults = [];\n\n    let value = data.value;\n    let index = data.index;\n\n    this.isEvokedByArray = this.lexicalConceptForm.get('isEvokedBy') as FormArray;\n\n    let parameters = {\n      text: value,\n      searchMode: \"startsWith\",\n      type: \"\",\n      pos: \"\",\n      formType: \"entry\",\n      author: \"\",\n      lang: \"\",\n      status: \"\",\n      offset: 0,\n      limit: 500\n    }\n\n    /* && data.length >= 3 */\n    this.lexicalService.getLexicalEntriesList(parameters).pipe(takeUntil(this.destroy$)).subscribe(\n      data => {\n        console.log(data)\n\n        if (data.list.length > 0) {\n          let filter_lang = data.list.filter(\n            element => element.language != 'null'\n          )\n\n          console.log(filter_lang)\n          this.searchResults = filter_lang;\n        } else {\n          let filter_lang = [];\n          this.searchResults = filter_lang;\n        }\n\n      }, error => {\n        //console.log(error)\n      }\n    )\n  }\n\n  onSearchFilterLexicalizedSense(data) {\n    this.searchResultsSenses = [];\n\n    let value = data.value;\n    let index = data.index;\n\n    this.isEvokedByArray = this.lexicalConceptForm.get('isEvokedBy') as FormArray;\n\n    let parameters = {\n      text: value,\n      searchMode: \"startsWith\",\n      type: \"\",\n      field: \"\",\n      pos: \"\",\n      formType: \"entry\",\n      author: \"\",\n      lang: \"\",\n      status: \"\",\n      offset: 0,\n      limit: 500\n    }\n\n    /* && data.length >= 3 */\n    this.lexicalService.getLexicalSensesList(parameters).pipe(takeUntil(this.destroy$)).subscribe(\n      data => {\n        console.log(data)\n\n        if (data.list.length > 0) {\n          let filter_lang = data.list.filter(\n            element => element.language != 'null'\n          )\n\n          console.log(filter_lang)\n          this.searchResultsSenses = filter_lang;\n        } else {\n        }\n\n      }, error => {\n        //console.log(error)\n      }\n    )\n  }\n\n\n  triggerIsEvokedBy(evt, i) {\n    console.log(evt)\n    if (evt.target != undefined) {\n\n      this.evokedBySubject.next({ value: evt.target.value, index: i })\n    }\n  }\n\n  triggerLexicalizedSense(evt, i) {\n    console.log(evt)\n    if (evt.target != undefined) {\n\n      this.lexicalizedSenseSubject.next({ value: evt.target.value, index: i })\n    }\n  }\n\n  handleIsEvokedBy(evt, i) {\n\n    if (evt instanceof NgSelectComponent) {\n      if (evt.selectedItems.length > 0) {\n        console.log(evt.selectedItems[0])\n\n        let entity = evt.selectedItems[0].value['lexicalEntry'];\n        let label = evt.selectedItems[0].value['label'];\n        this.onChangeIsEvokedBy({ name: entity, i: i, label: label })\n      }\n    }\n  }\n\n  handleLexicalizedSense(evt, i) {\n\n    if (evt instanceof NgSelectComponent) {\n      if (evt.selectedItems.length > 0) {\n        console.log(evt.selectedItems[0])\n\n        let entity = evt.selectedItems[0].value['sense'];\n        let label = evt.selectedItems[0].value['lemma'];\n        this.onChangeLexicalizedSense({ name: entity, i: i, label: label })\n      }\n    }\n  }\n\n  onChangeIsEvokedBy(data) {\n    var index = data['i'];\n    this.isEvokedByArray = this.lexicalConceptForm.get(\"isEvokedBy\") as FormArray;\n\n    let existOrNot = this.memoryIsEvokedBy.some(element => element?.entity == data.name || element?.name == data.name)\n\n    if (this.memoryIsEvokedBy[index] == undefined && !existOrNot) {\n      let newValue = data.name;\n\n\n      const parameters = {\n        type: \"conceptRel\",\n        relation: \"http://www.w3.org/ns/lemon/ontolex#isEvokedBy\",\n        value: newValue\n      }\n      console.log(parameters)\n      let conceptId = this.object.lexicalConcept;\n      this.lexicalService.updateLinguisticRelation(conceptId, parameters).pipe(takeUntil(this.destroy$)).subscribe(\n        data => {\n          console.log(data);\n          this.lexicalService.spinnerAction('off');\n          data['request'] = 0;\n          this.lexicalService.refreshAfterEdit(data);\n          this.lexicalService.updateCoreCard(data)\n          this.disableAddIsEvokedBy = false;\n        }, error => {\n          console.log(error)\n\n          /* this.toastr.error(error.error, 'Error', {\n              timeOut: 5000,\n          }); */\n          this.lexicalService.updateCoreCard({ lastUpdate: error.error.text })\n          this.lexicalService.spinnerAction('off');\n          if (error.status == 200) {\n            this.disableAddIsEvokedBy = false;\n            this.toastr.success('Lexical concept added correctly for ' + conceptId, '', {\n              timeOut: 5000,\n            });\n          } else {\n            this.toastr.error(error.error, 'Error', {\n              timeOut: 5000,\n            });\n\n          }\n\n\n          this.isEvokedByArray.at(index).get('label').setValue(data.label, { emitEvent: false });\n          this.isEvokedByArray.at(index).get('entity').setValue(data.name, { emitEvent: false });\n          this.isEvokedByArray.at(index).get('type').setValue('internal', { emitEvent: false });\n          this.isEvokedByArray.at(index).get('inferred').setValue(false, { emitEvent: false });\n\n\n\n        }\n      )\n      this.memoryIsEvokedBy[index] = data;\n\n\n    } else if (this.memoryIsEvokedBy[index] != undefined) {\n      const oldValue = this.memoryIsEvokedBy[index]['entity'] == undefined ? this.memoryIsEvokedBy[index]['instance_name'] : this.memoryIsEvokedBy[index]['entity']\n      const newValue = data['name']\n      const parameters = {\n        type: \"conceptRel\",\n        relation: \"http://www.w3.org/ns/lemon/ontolex#isEvokedBy\",\n        value: newValue,\n        currentValue: oldValue\n      }\n\n      let conceptId = this.object.lexicalConcept;\n      console.log(parameters)\n      this.lexicalService.updateLinguisticRelation(conceptId, parameters).pipe(takeUntil(this.destroy$)).subscribe(\n        data => {\n          console.log(data);\n          this.lexicalService.spinnerAction('off');\n          this.lexicalService.updateCoreCard(data)\n          data['request'] = 0;\n          this.lexicalService.refreshAfterEdit(data);\n        }, error => {\n          console.log(error)\n          const data = this.object;\n          data['request'] = 0;\n\n          //this.lexicalService.refreshAfterEdit(data);\n          this.lexicalService.updateCoreCard({ lastUpdate: error.error.text })\n          this.lexicalService.spinnerAction('off');\n          if (error.status == 200) {\n            this.toastr.success('Lexical Concept changed correctly for ' + conceptId, '', {\n              timeOut: 5000,\n            });\n          } else {\n            this.toastr.error(error.error, 'Error', {\n              timeOut: 5000,\n            });\n          }\n        }\n      )\n      this.memoryIsEvokedBy[index] = data;\n    } else if (existOrNot) {\n      this.toastr.error('This lexical concept already exist in this lexical entry', 'Error', {\n        timeOut: 5000\n      })\n    }\n\n\n  }\n\n  onChangeLexicalizedSense(data) {\n    var index = data['i'];\n    this.lexicalizedSensesArray = this.lexicalConceptForm.get(\"lexicalizedSenses\") as FormArray;\n\n    let existOrNot = this.memoryLexicalizedSenses.some(element => element?.entity == data.name || element?.name == data.name)\n\n    if (this.memoryLexicalizedSenses[index] == undefined && !existOrNot) {\n      let newValue = data.name;\n\n\n      const parameters = {\n        type: \"conceptRel\",\n        relation: \"http://www.w3.org/ns/lemon/ontolex#lexicalizedSense\",\n        value: newValue\n      }\n      console.log(parameters)\n      let conceptId = this.object.lexicalConcept;\n      this.lexicalService.updateLinguisticRelation(conceptId, parameters).pipe(takeUntil(this.destroy$)).subscribe(\n        data => {\n          console.log(data);\n          this.lexicalService.spinnerAction('off');\n          data['request'] = 0;\n          this.lexicalService.refreshAfterEdit(data);\n          this.lexicalService.updateCoreCard(data)\n          this.disableAddLexicalizedSense = false;\n        }, error => {\n          console.log(error)\n\n          /* this.toastr.error(error.error, 'Error', {\n              timeOut: 5000,\n          }); */\n          this.lexicalService.updateCoreCard({ lastUpdate: error.error.text })\n          this.lexicalService.spinnerAction('off');\n          if (error.status == 200) {\n            this.disableAddLexicalizedSense = false;\n            this.toastr.success('Lexicalized sense added correctly for ' + conceptId, '', {\n              timeOut: 5000,\n            });\n            this.lexicalizedSensesArray.at(index).get('label').setValue(data.label, { emitEvent: false });\n            this.lexicalizedSensesArray.at(index).get('entity').setValue(data.name, { emitEvent: false });\n            this.lexicalizedSensesArray.at(index).get('type').setValue('internal', { emitEvent: false });\n            this.lexicalizedSensesArray.at(index).get('inferred').setValue(false, { emitEvent: false });\n          } else {\n            this.toastr.error(error.error, 'Error', {\n              timeOut: 5000,\n            });\n\n          }\n\n\n          \n\n\n\n        }\n      )\n      this.memoryLexicalizedSenses[index] = data;\n\n\n    } else if (this.memoryLexicalizedSenses[index] != undefined) {\n      const oldValue = this.memoryLexicalizedSenses[index]['entity'] == undefined ? this.memoryLexicalizedSenses[index]['name'] : this.memoryLexicalizedSenses[index]['entity']\n      const newValue = data['name']\n      const parameters = {\n        type: \"conceptRel\",\n        relation: \"http://www.w3.org/ns/lemon/ontolex#lexicalizedSense\",\n        value: newValue,\n        currentValue: oldValue\n      }\n      let raw_data = data;\n      let conceptId = this.object.lexicalConcept;\n      console.log(parameters)\n      this.lexicalService.updateLinguisticRelation(conceptId, parameters).pipe(takeUntil(this.destroy$)).subscribe(\n        data => {\n          console.log(data);\n          this.lexicalService.spinnerAction('off');\n          this.lexicalService.updateCoreCard(data)\n          data['request'] = 0;\n          this.lexicalService.refreshAfterEdit(data);\n        }, error => {\n          console.log(error)\n          const data = raw_data;\n          data['request'] = 0;\n\n          //this.lexicalService.refreshAfterEdit(data);\n          this.lexicalService.updateCoreCard({ lastUpdate: error.error.text })\n          this.lexicalService.spinnerAction('off');\n          if (error.status == 200) {\n            this.toastr.success('Lexicalized sense changed correctly for ' + conceptId, '', {\n              timeOut: 5000,\n            });\n            this.lexicalizedSensesArray.at(index).get('label').setValue(data.label, { emitEvent: false });\n            this.lexicalizedSensesArray.at(index).get('entity').setValue(data.name, { emitEvent: false });\n            this.lexicalizedSensesArray.at(index).get('type').setValue('internal', { emitEvent: false });\n            this.lexicalizedSensesArray.at(index).get('inferred').setValue(false, { emitEvent: false });\n          } else {\n            this.toastr.error(error.error, 'Error', {\n              timeOut: 5000,\n            });\n          }\n        }\n      )\n      this.memoryLexicalizedSenses[index] = data;\n    } else if (existOrNot) {\n      this.toastr.error('This lexicalized sense already exist in this lexical entry', 'Error', {\n        timeOut: 5000\n      })\n    }\n\n\n  }\n\n  addIsEvokedBy(entity?, type?, inferred?, label?) {\n    this.isEvokedByArray = this.lexicalConceptForm.get('isEvokedBy') as FormArray;\n    if (entity != undefined) {\n      this.isEvokedByArray.push(this.createIsEvokedBy(entity, type, inferred, label));\n    } else {\n      this.disableAddIsEvokedBy = true;\n      this.isEvokedByArray.push(this.createIsEvokedBy());\n    }\n  }\n\n  addLexicalizedSense(entity?, type?, inferred?, label?) {\n    this.lexicalizedSensesArray = this.lexicalConceptForm.get('lexicalizedSenses') as FormArray;\n    if (entity != undefined) {\n      this.lexicalizedSensesArray.push(this.createLexicalizedSense(entity, type, inferred, label));\n    } else {\n      this.disableAddIsEvokedBy = true;\n      this.lexicalizedSensesArray.push(this.createLexicalizedSense());\n    }\n  }\n\n  createIsEvokedBy(e?, t?, i?, l?): FormGroup {\n\n    if (e != undefined) {\n      return this.formBuilder.group({\n        entity: e,\n        inferred: i,\n        label: l,\n        type: t,\n      })\n    } else {\n      return this.formBuilder.group({\n        entity: new FormControl(''),\n        inferred: new FormControl(false),\n        label: new FormControl(''),\n        type: new FormControl(''),\n      })\n    }\n  }\n\n  createLexicalizedSense(e?, t?, i?, l?): FormGroup {\n\n    if (e != undefined) {\n      return this.formBuilder.group({\n        entity: e,\n        inferred: i,\n        label: l,\n        type: t,\n      })\n    } else {\n      return this.formBuilder.group({\n        entity: new FormControl(''),\n        inferred: new FormControl(false),\n        label: new FormControl(''),\n        type: new FormControl(''),\n      })\n    }\n  }\n\n  removeLexicalizedSense(index) {\n    this.lexicalizedSensesArray = this.lexicalConceptForm.get('lexicalizedSenses') as FormArray;\n\n    this.disableAddLexicalizedSense = false;\n    const entity = this.lexicalizedSensesArray.at(index).get('entity').value;\n\n    let conceptId = this.object.lexicalConcept;\n\n    let parameters = {\n      relation: 'http://www.w3.org/ns/lemon/ontolex#lexicalizedSense',\n      value: entity\n    }\n\n\n    if (entity != '') {\n      this.lexicalService.deleteLinguisticRelation(conceptId, parameters).pipe(takeUntil(this.destroy$)).subscribe(\n        data => {\n          console.log(data)\n          this.lexicalService.updateCoreCard(this.object);\n          this.toastr.success(\"Relation removed\", '', {\n            timeOut: 5000,\n          });\n\n        }, error => {\n          console.log(error)\n          //this.lexicalService.updateCoreCard({ lastUpdate: error.error.text })\n          if (error.status == 200) {\n            this.toastr.success('Relation removed', '', {\n              timeOut: 5000,\n            });\n          } else {\n            this.toastr.error(error.error, 'Error', {\n              timeOut: 5000,\n            });\n          }\n\n        }\n      )\n    }\n\n\n    this.lexicalizedSensesArray.removeAt(index);\n\n    this.memoryLexicalizedSenses.splice(index, 1)\n  }\n\n  removeIsEvokedBy(index) {\n    this.isEvokedByArray = this.lexicalConceptForm.get('isEvokedBy') as FormArray;\n\n    this.disableAddIsEvokedBy = false;\n    const entity = this.isEvokedByArray.at(index).get('entity').value;\n\n    let conceptId = this.object.lexicalConcept;\n\n    let parameters = {\n      relation: 'http://www.w3.org/ns/lemon/ontolex#isEvokedBy',\n      value: entity\n    }\n\n\n    if (entity != '') {\n      this.lexicalService.deleteLinguisticRelation(conceptId, parameters).pipe(takeUntil(this.destroy$)).subscribe(\n        data => {\n          console.log(data)\n          this.lexicalService.updateCoreCard(this.object);\n          this.toastr.success(\"Relation removed\", '', {\n            timeOut: 5000,\n          });\n\n        }, error => {\n          console.log(error)\n          //this.lexicalService.updateCoreCard({ lastUpdate: error.error.text })\n          if (error.status == 200) {\n            this.toastr.success('Relation removed', '', {\n              timeOut: 5000,\n            });\n          } else {\n            this.toastr.error(error.error, 'Error', {\n              timeOut: 5000,\n            });\n          }\n\n        }\n      )\n    }\n\n\n    this.isEvokedByArray.removeAt(index);\n\n    this.memoryIsEvokedBy.splice(index, 1)\n  }\n\n  ngOnDestroy(): void {\n    this.destroy$.next(true);\n    this.destroy$.complete();\n  }\n\n}\n\n","\n\n<form [formGroup]=\"lexicalConceptForm\" *ngIf=\"object!=null\">\n    <div class=\"form-group row ml-2 mt-3 mr-2\">\n        <label for=\"inputLabel\" class=\"col-xl-3 col-form-label\">Pref label:</label>\n        <div class=\"input-group col-xl-7\">\n            <input formControlName=\"defaultLabel\" name=\"defaultLabel\" type=\"text\" class=\"form-control\" placeholder=\"\">\n            <div class=\"input-group-append\">\n                <span class=\"input-group-text\" id=\"basic-addon2\" style=\"font-size: .75rem; font-weight: 900;\">@{{object.language}}</span>\n            </div>\n        </div>\n    </div>    \n\n    <div class=\"form-group row ml-2 mt-3 mr-2\">\n        <label for=\"inputLabel\" class=\"col-xl-3 col-form-label\">Definition:</label>\n        <div class=\"input-group col-xl-8\">\n            <textarea formControlName=\"definition\" name=\"definition\" class=\"form-control\" style=\"resize: none;\"></textarea>\n        </div>\n    </div>\n\n\n    <!-- IS EVOKED BY -->\n    <div class=\"form-group row ml-2 mt-3 mr-2\">\n        <div class=\"input-group col-xl-12\">\n            <div class=\"card\">\n                <span class=\"text-id\"><b>IS EVOKED BY</b></span>\n                <a class=\"pointer\" [ngClass]=\"{no_pointer: disableAddIsEvokedBy}\" (click)=\"addIsEvokedBy()\"><span class=\"collapse-icon\"><i\n                    class=\"fa fa-plus-square\"></i></span></a>\n\n                <div class=\"card-body\">\n                    <div class=\"form-group row ml-2 mt-3 mr-2\" formArrayName=\"isEvokedBy\" *ngFor=\"let isEvoked of lexicalConceptForm.get('isEvokedBy')['controls']; let i = index\">\n                        \n                        <div class=\"input-group col-xl-12\" [formGroupName]=\"i\">\n                            \n                            <ng-select #select_evokedby formControlName=\"label\" name=\"label\" [items]=\"searchResults\" \n                                (keyup)=\"triggerIsEvokedBy($event, i)\" (change)=\"handleIsEvokedBy(select_evokedby, i)\"\n                                [searchable]=\"!isEvoked.get('inferred').value\"\n                                bindValue=\"label\" bindLabel=\"label\" placeholder=\"Search entity\" appendTo=\"body\" [clearable]=\"false\"\n                                >\n                                \n                                <ng-template ng-option-tmp let-item=\"item\" let-search=\"searchTerm\">\n                                    <div>\n                                        <span>{{item.label}} </span><span style=\"color: blue;\">@{{item.language}}</span>\n                                    </div>\n\n                                </ng-template>\n                            </ng-select>\n                            \n                            \n                            <div class=\"input-group-append ml-2\">\n                                <button (click)=\"removeIsEvokedBy(i)\" class=\"btn btn-danger\" type=\"button\" *ngIf=\"!isEvoked.get('inferred').value\"><i\n                                        class=\"fa fa-trash-alt\"></i></button>\n                            </div>\n                        </div>\n                    </div>\n                   \n                </div>\n            </div>\n        </div>\n    </div>\n    \n    <!-- LEXICALIZED SENSES -->\n    <div class=\"form-group row ml-2 mt-3 mr-2\">\n        <div class=\"input-group col-xl-12\">\n            <div class=\"card\">\n                <span class=\"text-id\"><b>LEXICALIZED SENSES</b></span>\n                <a class=\"pointer\" [ngClass]=\"{no_pointer: disableAddLexicalizedSense}\" (click)=\"addLexicalizedSense()\"><span class=\"collapse-icon\"><i\n                    class=\"fa fa-plus-square\"></i></span></a>\n\n                <div class=\"card-body\">\n                    <div class=\"form-group row ml-2 mt-3 mr-2\" formArrayName=\"lexicalizedSenses\" *ngFor=\"let lexicalizedSense of lexicalConceptForm.get('lexicalizedSenses')['controls']; let i = index\">\n                        \n                        <div class=\"input-group col-xl-12\" [formGroupName]=\"i\">\n                            \n                            <ng-select #select_lexicalizedSense formControlName=\"label\" name=\"label\" [items]=\"searchResultsSenses\" \n                                (keyup)=\"triggerLexicalizedSense($event, i)\" (change)=\"handleLexicalizedSense(select_lexicalizedSense, i)\"\n                                [searchable]=\"!lexicalizedSense.get('inferred').value\"\n                                bindValue=\"lemma\" bindLabel=\"lemma\" placeholder=\"Search entity\" appendTo=\"body\" [clearable]=\"false\"\n                                >\n                                \n                                <ng-template ng-option-tmp let-item=\"item\" let-search=\"searchTerm\">\n                                    <div>\n                                        <span>{{item.lemma}} </span><br>\n                                        <sub style=\"color: blue;\">@{{item.label}}</sub>\n                                    </div>\n\n                                </ng-template>\n                            </ng-select>\n                            \n                            \n                            <div class=\"input-group-append ml-2\">\n                                <button (click)=\"removeLexicalizedSense(i)\" class=\"btn btn-danger\" type=\"button\" *ngIf=\"!lexicalizedSense.get('inferred').value\"><i\n                                        class=\"fa fa-trash-alt\"></i></button>\n                            </div>\n                        </div>\n                    </div>\n                   \n                </div>\n            </div>\n        </div>\n    </div>\n</form>","/*\n   Copyright 2021-2022  Istituto di Linguistica Computazionale \"A. Zampolli\", Consiglio Nazionale delle Ricerche, Pisa, Italy.\n \nThis file is part of EpiLexo.\n\nEpiLexo is free software: you can redistribute it and/or modify it under the terms of the GNU General Public License as published by the Free Software Foundation, either version 3 of the License, or (at your option) any later version.\n\nEpiLexo is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for more details.\n\nYou should have received a copy of the GNU General Public License along with EpiLexo. If not, see <https://www.gnu.org/licenses/>.\n*/\n\nimport { Component, Input, OnDestroy, OnInit, SimpleChanges } from '@angular/core';\nimport { FormArray, FormBuilder, FormControl, FormGroup, Validators } from '@angular/forms';\nimport { Subject, Subscription } from 'rxjs';\nimport { debounceTime, pairwise, startWith, take, takeUntil } from 'rxjs/operators';\nimport { LexicalEntriesService } from 'src/app/services/lexical-entries/lexical-entries.service';\nimport { ToastrService } from 'ngx-toastr';\nimport { NgSelectComponent } from '@ng-select/ng-select';\nimport { ConceptService } from 'src/app/services/concept/concept.service';\n\n\n@Component({\n  selector: 'app-sense-core-form',\n  templateUrl: './sense-core-form.component.html',\n  styleUrls: ['./sense-core-form.component.scss']\n})\nexport class SenseCoreFormComponent implements OnInit, OnDestroy {\n\n  @Input() senseData: any;\n\n  private subject_def: Subject<any> = new Subject();\n  private subject_ex_def: Subject<any> = new Subject();\n\n  switchInput = false;\n  subscription: Subscription;\n  object: any;\n  peopleLoading = false;\n  counter = 0;\n\n  disableAddDef = false;\n\n  definitionData = [];\n  definitionMemory = [];\n\n  memoryConfidence = null;\n\n  staticDef = [];\n\n  senseCore = new FormGroup({\n    definition: new FormArray([this.createDefinition()]),\n    confidence: new FormControl(null),\n    usage: new FormControl('', [Validators.required, Validators.minLength(5)]),\n    topic: new FormControl('', [Validators.required, Validators.minLength(5)]),\n    reference: new FormArray([this.createReference()]),\n    lexical_concept: new FormArray([]),\n    sense_of: new FormControl('', [Validators.required, Validators.minLength(5)])\n  })\n\n  definitionArray: FormArray;\n  lexicalConceptArray: FormArray;\n\n  subject_def_subscription: Subscription;\n  subject_ex_def_subscription: Subscription;\n  destroy$: Subject<boolean> = new Subject();\n  searchResults: any[] = [];\n  filterLoading: boolean = false;\n  lexical_concept_subject: Subject<any> = new Subject();\n  memoryLexicalConcept: any[] = [];\n  disableAddLexicalConcept: boolean;\n\n  constructor(private lexicalService: LexicalEntriesService,\n    private formBuilder: FormBuilder,\n    private toastr: ToastrService,\n    private conceptService: ConceptService) { }\n\n  ngOnInit() {\n    setTimeout(() => {\n      //@ts-ignore\n      $('.denotes-tooltip').tooltip({\n        trigger: 'hover'\n      });\n    }, 1000);\n    this.loadPeople();\n\n    this.subject_def_subscription = this.subject_def.pipe(debounceTime(1000), takeUntil(this.destroy$)).subscribe(\n      data => {\n        this.onChangeDefinition(data)\n      }\n    )\n\n    this.subject_ex_def_subscription = this.subject_ex_def.pipe(debounceTime(1000), takeUntil(this.destroy$)).subscribe(\n      data => {\n        this.onChangeExistingDefinition(data['evt'], data['i'])\n      }\n    )\n\n    this.lexical_concept_subject.pipe(debounceTime(1000), takeUntil(this.destroy$)).subscribe(\n      data => {\n        this.onSearchFilter(data)\n      }\n    )\n\n    this.senseCore = this.formBuilder.group({\n      definition: this.formBuilder.array([]),\n      confidence: false,\n      usage: '',\n      topic: '',\n      reference: this.formBuilder.array([this.createReference()]),\n      lexical_concept: this.formBuilder.array([]),\n      sense_of: ''\n    })\n\n    this.onChanges();\n\n  }\n\n  private loadPeople() {\n    /* this.peopleLoading = true;\n    this.dataService.getPeople().subscribe(x => {\n      this.people = x;\n      this.peopleLoading = false;\n    }); */\n  }\n\n  ngOnChanges(changes: SimpleChanges) {\n    setTimeout(() => {\n      if (this.object != changes.senseData.currentValue) {\n        this.lexicalConceptArray = this.senseCore.get('lexical_concept') as FormArray;\n        this.lexicalConceptArray.clear();\n\n        this.definitionArray = this.senseCore.get('definition') as FormArray;\n        this.definitionArray.clear();\n\n        this.staticDef = [];\n        this.memoryLexicalConcept = [];\n        this.memoryConfidence = [];\n      }\n      this.object = changes.senseData.currentValue;\n      if (this.object != null) {\n\n        this.definitionData = [];\n        this.definitionMemory = [];\n\n        for (var i = 0; i < this.object.definition.length; i++) {\n          const pId = this.object.definition[i]['propertyID'];\n          const pVal = this.object.definition[i]['propertyValue'];\n          this.definitionData.push(pId);\n\n          if (pId == 'definition' && pVal == '') {\n            this.definitionMemory.push(pId);\n            this.addDefinition(pId, pVal)\n\n            this.staticDef.push({ trait: pId, value: pVal })\n          }\n\n          if (pVal != '') {\n            this.definitionMemory.push(pId);\n            this.addDefinition(pId, pVal)\n\n            this.staticDef.push({ trait: pId, value: pVal })\n          }\n        }\n        //console.log(this.object)\n        if (this.object.confidence == 0) {\n          this.senseCore.get('confidence').setValue(true, { emitEvent: false });\n        } else {\n          this.senseCore.get('confidence').setValue(false, { emitEvent: false });\n        }\n        this.senseCore.get('topic').setValue(this.object.topic, { emitEvent: false })\n        this.senseCore.get('usage').setValue(this.object.usage, { emitEvent: false });\n        /* this.addLexicalConcept(this.object.concept); */\n        this.senseCore.get('sense_of').setValue(this.object.sense, { emitEvent: false });\n        const senseId = this.object.sense;\n        this.lexicalService.getLexEntryLinguisticRelation(senseId, 'isLexicalizedSenseOf').pipe(takeUntil(this.destroy$)).subscribe(\n          data => {\n            console.log(data)\n            for (var i = 0; i < data.length; i++) {\n              let entity = data[i]['entity'];\n              let type = data[i]['linkType'];\n              let label = data[i]['label'];\n              let inferred = data[i]['inferred'];\n              this.addLexicalConcept(entity, type, inferred, label);\n              this.memoryLexicalConcept.push(data[i])\n            }\n          }, error => {\n            console.log(error)\n          }\n        )\n      }\n    }, 10)\n  }\n\n\n  onChanges(): void {\n    this.senseCore.get('usage').valueChanges.pipe(debounceTime(1000), takeUntil(this.destroy$)).subscribe(newDef => {\n      this.lexicalService.spinnerAction('on');\n      let senseId = this.object.sense;\n      let parameters = {\n        relation: \"http://www.w3.org/ns/lemon/ontolex#usage\",\n        value: newDef\n      }\n      this.lexicalService.updateSense(senseId, parameters).pipe(takeUntil(this.destroy$)).subscribe(\n        data => {\n          console.log(data)\n          this.lexicalService.spinnerAction('off');\n          //this.lexicalService.refreshLexEntryTree();\n          this.lexicalService.updateCoreCard(this.object)\n        }, error => {\n          console.log(error)\n          //this.lexicalService.refreshLexEntryTree();\n          this.lexicalService.updateCoreCard({ lastUpdate: error.error.text })\n          this.lexicalService.spinnerAction('off');\n          if (error.status != 200) {\n            this.toastr.error(error.error, 'Error', {\n              timeOut: 5000,\n            });\n          } else {\n            this.toastr.success('Sense usage changed', '', {\n              timeOut: 5000,\n            });\n          }\n        }\n      )\n    })\n\n    this.senseCore.get('confidence').valueChanges.pipe(debounceTime(100), startWith(this.senseCore.get('confidence').value), pairwise(), takeUntil(this.destroy$)).subscribe(([prev, next]: [any, any]) => {\n      let confidence_value = null;\n      console.log(confidence_value);\n      let senseId = this.object.sense;\n\n      this.senseCore.get('confidence').setValue(next, { emitEvent: false });\n\n      let oldValue = prev ? 0 : 1;\n      let newValue = next ? 0 : 1;\n      let parameters = {\n        relation: 'http://www.lexinfo.net/ontology/3.0/lexinfo#confidence',\n        value: newValue\n      };\n\n\n      //if (this.memoryConfidence != null) parameters['currentValue'] = oldValue;\n      this.memoryConfidence = oldValue;\n\n      this.lexicalService.updateSense(senseId, parameters).pipe(takeUntil(this.destroy$)).subscribe(\n        data => {\n          console.log(data)\n        },\n        error => {\n          if (error.status == 200) this.toastr.success('Confidence updated', '', { timeOut: 5000 })\n          if (error.status != 200) this.toastr.error(error.error, '', { timeOut: 5000 })\n        }\n      )\n\n    });\n\n    this.senseCore.get('topic').valueChanges.pipe(debounceTime(1000), takeUntil(this.destroy$)).subscribe(newTopic => {\n      if (newTopic.trim() != '') {\n        this.lexicalService.spinnerAction('on');\n        let senseId = this.object.sense;\n        let parameters = {\n          relation: \"http://purl.org/dc/terms/subject\",\n          value: newTopic\n        }\n        this.lexicalService.updateSense(senseId, parameters).pipe(takeUntil(this.destroy$)).subscribe(\n          data => {\n            console.log(data)\n            this.lexicalService.spinnerAction('off');\n            //this.lexicalService.refreshLexEntryTree();\n            this.lexicalService.updateCoreCard(this.object)\n            this.toastr.success('Sense topic changed', '', {\n              timeOut: 5000,\n            });\n\n          }, error => {\n            console.log(error)\n            //this.lexicalService.refreshLexEntryTree();\n            this.lexicalService.updateCoreCard({ lastUpdate: error.error.text })\n            this.lexicalService.spinnerAction('off');\n            if (typeof (error.error) != 'object') {\n              this.toastr.error(error.error, 'Error', {\n                timeOut: 5000,\n              });\n            }\n\n          }\n        )\n      }\n\n    })\n\n    this.senseCore.get('reference').valueChanges.pipe(debounceTime(1000), takeUntil(this.destroy$)).subscribe(newDef => {\n      this.lexicalService.spinnerAction('on');\n      let senseId = this.object.sense;\n      let parameters = {\n        relation: \"http://www.w3.org/ns/lemon/ontolex#reference\",\n        value: newDef[0]['entity']\n      }\n      //console.log(senseId)\n      console.log(parameters);\n      this.lexicalService.updateSense(senseId, parameters).pipe(takeUntil(this.destroy$)).subscribe(\n        data => {\n          console.log(data)\n          this.lexicalService.spinnerAction('off');\n          //this.lexicalService.refreshLexEntryTree();\n          this.lexicalService.updateCoreCard(this.object)\n        }, error => {\n          console.log(error)\n          //this.lexicalService.refreshLexEntryTree();\n          this.lexicalService.updateCoreCard({ lastUpdate: error.error.text })\n          this.lexicalService.spinnerAction('off');\n          if (error.status != 200) {\n            this.toastr.error(error.error, 'Error', {\n              timeOut: 5000,\n            });\n          } else {\n            this.toastr.success('Sense reference changed', '', {\n              timeOut: 5000,\n            });\n          }\n        }\n      )\n    })\n  }\n\n  onChangeDefinitionTrait(evt, i) {\n\n    setTimeout(() => {\n      this.definitionArray = this.senseCore.get('definition') as FormArray;\n      this.definitionArray.at(i).patchValue({ propertyID: evt.target.value, propertyValue: \"\" });\n      if (evt.target.value != '') {\n\n        this.definitionMemory[i] = evt.target.value;\n      } else {\n\n        this.definitionMemory.splice(i, 1)\n      }\n\n\n\n    }, 250);\n  }\n\n  createReference() {\n    return this.formBuilder.group({\n      entity: new FormControl(null, [Validators.required, Validators.minLength(5)])\n    })\n  }\n\n  addDefinition(pId?, pVal?) {\n    this.definitionArray = this.senseCore.get('definition') as FormArray;\n    if (pId != undefined) {\n      this.definitionArray.push(this.createDefinition(pId, pVal));\n    } else {\n      this.disableAddDef = true;\n      this.definitionArray.push(this.createDefinition());\n    }\n  }\n\n  removeDefinition(index) {\n    const definitionArray = this.senseCore.get('definition') as FormArray;\n\n    const trait = this.definitionArray.at(index).get('propertyID').value;\n    const value = this.definitionArray.at(index).get('propertyValue').value;\n\n    //console.log(trait + value)\n\n    if (trait != null) {\n\n      let senseId = this.object.sense;\n\n      let parameters = {\n        relation: 'http://www.lexinfo.net/ontology/3.0/lexinfo#' + trait,\n        value: value\n      }\n\n      this.lexicalService.deleteLinguisticRelation(senseId, parameters).pipe(takeUntil(this.destroy$)).subscribe(\n        data => {\n          console.log(data)\n          this.lexicalService.updateCoreCard(this.object)\n\n          this.toastr.success('Sense definition deleted', '', {\n            timeOut: 5000,\n          });\n\n        }, error => {\n          console.log(error);\n          this.lexicalService.updateCoreCard({ lastUpdate: error.error.text })\n          if (typeof (error.error) != 'object') {\n            this.toastr.error(error.error, 'Error', {\n              timeOut: 5000,\n            });\n          }\n        }\n      )\n    } else {\n      this.disableAddDef = false;\n    }\n    this.definitionMemory.splice(index, 1);\n    this.staticDef.splice(index, 1);\n    definitionArray.removeAt(index)\n  }\n\n  debounceExistingKeyup(evt, i) {\n    this.lexicalService.spinnerAction('on');\n    this.subject_ex_def.next({ evt, i })\n  }\n\n  debounceKeyup(evt, i) {\n    this.lexicalService.spinnerAction('on');\n    this.subject_def.next({ evt, i })\n  }\n\n  createDefinition(pId?, pVal?) {\n    if (pId != undefined) {\n      return this.formBuilder.group({\n        propertyID: new FormControl(pId, [Validators.required, Validators.minLength(0)]),\n        propertyValue: new FormControl(pVal, [Validators.required, Validators.minLength(0)])\n      })\n    } else {\n      return this.formBuilder.group({\n        propertyID: new FormControl(null, [Validators.required, Validators.minLength(0)]),\n        propertyValue: new FormControl(null, [Validators.required, Validators.minLength(0)])\n      })\n    }\n\n  }\n\n  onSearchFilter(data) {\n    this.filterLoading = true;\n    this.searchResults = [];\n\n    let value = data.value;\n    let index = data.index;\n\n    this.lexicalConceptArray = this.senseCore.get('lexical_concept') as FormArray;\n\n    if (this.object.sense != undefined) {\n      let parameters = {\n        text: value,\n        searchMode: \"startsWith\",\n        labelType: \"prefLabel\",\n        author: \"\",\n        offset: 0,\n        limit: 500\n      }\n\n      /* && data.length >= 3 */\n\n      this.conceptService.conceptFilter(parameters).pipe(takeUntil(this.destroy$)).subscribe(\n        data => {\n          console.log(data)\n\n          if (data.list.length > 0) {\n            let filter_lang = [];\n            filter_lang = data.list.filter(\n              element => element.language != 'null'\n            )\n\n            console.log(filter_lang)\n            this.searchResults = filter_lang;\n            this.filterLoading = false;\n          } else {\n            this.filterLoading = false;\n          }\n\n        }, error => {\n          //console.log(error)\n          this.filterLoading = false;\n        }\n      )\n\n    } else {\n      this.filterLoading = false;\n\n\n    }\n\n  }\n\n  triggerLexicalConcept(evt, i) {\n    console.log(evt)\n    if (evt.target != undefined) {\n\n      this.lexical_concept_subject.next({ value: evt.target.value, index: i })\n    }\n  }\n\n  handleLexicalConcept(evt, i) {\n\n    if (evt instanceof NgSelectComponent) {\n      if (evt.selectedItems.length > 0) {\n        console.log(evt.selectedItems[0])\n\n        let label = evt.selectedItems[0].value['lexicalConcept'];\n        let prefLabel = evt.selectedItems[0].value['defaultLabel'];\n        \n        this.onChangeLexicalConcept({ name: label, i: i, defaultLabel: prefLabel })\n      }\n    } else {\n      let label = evt.target.value;\n      this.lexical_concept_subject.next({ name: label, i: i })\n    }\n  }\n\n  onChangeLexicalConcept(data) {\n    var index = data['i'];\n    this.lexicalConceptArray = this.senseCore.get(\"lexical_concept\") as FormArray;\n    let existOrNot = this.memoryLexicalConcept.some(element => element?.entity == data.name || element?.name == data.name)\n\n    if (this.memoryLexicalConcept[index] == undefined && !existOrNot) {\n      let newValue = data.name;\n\n\n      const parameters = {\n        type: \"conceptRel\",\n        relation: \"http://www.w3.org/ns/lemon/ontolex#isLexicalizedSenseOf\",\n        value: newValue\n      }\n      console.log(parameters)\n      let senseId = this.object.sense;\n      this.lexicalService.updateLinguisticRelation(senseId, parameters).pipe(takeUntil(this.destroy$)).subscribe(\n        data => {\n          console.log(data);\n          this.lexicalService.spinnerAction('off');\n          data['request'] = 0;\n          this.lexicalService.refreshAfterEdit(data);\n          this.lexicalService.updateCoreCard(data)\n          this.disableAddLexicalConcept = false;\n        }, error => {\n          console.log(error)\n\n          /* this.toastr.error(error.error, 'Error', {\n              timeOut: 5000,\n          }); */\n          this.lexicalService.updateCoreCard({ lastUpdate: error.error.text })\n          this.lexicalService.spinnerAction('off');\n          if (error.status == 200) {\n            this.disableAddLexicalConcept = false;\n            this.toastr.success('Lexical concept added correctly for ' + senseId, '', {\n              timeOut: 5000,\n            });\n            this.lexicalConceptArray.at(index).get('label').setValue(data.defaultLabel, { emitEvent: false });\n            this.lexicalConceptArray.at(index).get('entity').setValue(data.name, { emitEvent: false });\n            this.lexicalConceptArray.at(index).get('type').setValue('internal', { emitEvent: false });\n            this.lexicalConceptArray.at(index).get('inferred').setValue(false, { emitEvent: false });\n          } else {\n            this.toastr.error(error.error, 'Error', {\n              timeOut: 5000,\n            });\n\n          }\n\n\n          \n\n\n\n        }\n      )\n      this.memoryLexicalConcept[index] = data;\n\n\n    } else if (this.memoryLexicalConcept[index] != undefined) {\n      const oldValue = this.memoryLexicalConcept[index]['entity'] == undefined ? this.memoryLexicalConcept[index]['name'] : this.memoryLexicalConcept[index]['entity']\n      const newValue = data['name']\n      const parameters = {\n        type: \"conceptRel\",\n        relation: \"http://www.w3.org/ns/lemon/ontolex#isLexicalizedSenseOf\",\n        value: newValue,\n        currentValue: oldValue\n      }\n\n      let senseId = this.object.sense;\n      console.log(parameters);\n\n      let raw_data = data;\n      this.lexicalService.updateLinguisticRelation(senseId, parameters).pipe(takeUntil(this.destroy$)).subscribe(\n        data => {\n          console.log(data);\n          this.lexicalService.spinnerAction('off');\n          this.lexicalService.updateCoreCard(data)\n          data['request'] = 0;\n          this.lexicalService.refreshAfterEdit(data);\n        }, error => {\n          console.log(error)\n          const data = raw_data;\n          data['request'] = 0;\n\n          //this.lexicalService.refreshAfterEdit(data);\n          this.lexicalService.updateCoreCard({ lastUpdate: error.error.text })\n          this.lexicalService.spinnerAction('off');\n          if (error.status == 200) {\n            this.toastr.success('Lexical Concept changed correctly for ' + senseId, '', {\n              timeOut: 5000,\n            });\n\n            this.lexicalConceptArray.at(index).get('label').setValue(raw_data.defaultLabel, { emitEvent: false });\n            this.lexicalConceptArray.at(index).get('entity').setValue(raw_data.name, { emitEvent: false });\n            this.lexicalConceptArray.at(index).get('type').setValue('internal', { emitEvent: false });\n            this.lexicalConceptArray.at(index).get('inferred').setValue(false, { emitEvent: false });\n          } else {\n            this.toastr.error(error.error, 'Error', {\n              timeOut: 5000,\n            });\n          }\n        }\n      )\n      this.memoryLexicalConcept[index] = data;\n    } else if (existOrNot) {\n      this.toastr.error('This lexical concept already exist in this lexical entry', 'Error', {\n        timeOut: 5000\n      })\n    }\n\n\n  }\n\n  onChangeExistingDefinition(evt, i) {\n\n    this.definitionArray = this.senseCore.get('definition') as FormArray;\n    const trait = this.definitionArray.at(i).get('propertyID').value;\n    const newValue = evt.target.value;\n    const senseId = this.object.sense;\n    let namespace = trait == 'definition' ? 'http://www.w3.org/2004/02/skos/core#' : 'http://www.lexinfo.net/ontology/3.0/lexinfo#';\n    const parameters = {\n      relation: namespace + trait,\n      value: newValue\n    }\n\n    if (trait != undefined && newValue != '') {\n\n      this.staticDef[i] = { trait: trait, value: newValue };\n      this.lexicalService.updateSense(senseId, parameters).pipe(takeUntil(this.destroy$)).subscribe(\n        data => {\n          console.log(data)\n          this.lexicalService.spinnerAction('off');\n          //this.lexicalService.refreshLexEntryTree();\n          if (trait == 'definition') {\n\n          }\n          this.lexicalService.updateCoreCard(data)\n        }, error => {\n          console.log(error);\n          //this.lexicalService.refreshLexEntryTree();\n          if (trait == 'definition') {\n            const data = this.object;\n            data['whatToSearch'] = 'sense';\n            data['new_definition'] = newValue;\n            data['request'] = 6;\n            this.lexicalService.refreshAfterEdit(data);\n          }\n          this.lexicalService.updateCoreCard({ lastUpdate: error.error.text })\n          this.lexicalService.spinnerAction('off');\n          if (error.status != 200) {\n            this.toastr.error(error.error, 'Error', {\n              timeOut: 5000,\n            });\n          } else {\n            this.toastr.success('Sense definition changed', '', {\n              timeOut: 5000,\n            });\n          }\n        }\n      )\n    } else {\n      this.lexicalService.spinnerAction('off');\n      this.staticDef[i] = { trait: trait, value: \"\" };\n    }\n  }\n\n  onChangeDefinition(object) {\n\n    this.definitionArray = this.senseCore.get('definition') as FormArray;\n    const trait = this.definitionArray.at(object.i).get('propertyID').value;\n    const newValue = object.evt.target.value;\n    const senseId = this.object.sense;\n    let namespace = trait == 'definition' ? 'http://www.w3.org/2004/02/skos/core#' : 'http://www.lexinfo.net/ontology/3.0/lexinfo#';\n    const parameters = { relation: namespace + trait, value: newValue }\n\n    if (trait != undefined) {\n\n      this.staticDef.push({ trait: trait, value: newValue });\n      this.lexicalService.updateSense(senseId, parameters).pipe(takeUntil(this.destroy$)).subscribe(\n        data => {\n          console.log(data)\n          this.lexicalService.spinnerAction('off');\n          //this.lexicalService.refreshLexEntryTree();\n          this.lexicalService.updateCoreCard(data)\n          this.disableAddDef = false;\n        }, error => {\n          console.log(error);\n          //this.lexicalService.refreshLexEntryTree();\n\n          this.disableAddDef = false;\n          if (error.status != 200) {\n            this.toastr.error(error.error, 'Error', {\n              timeOut: 5000,\n            });\n            this.lexicalService.spinnerAction('off');\n          } else {\n\n            if (trait == 'definition') {\n              const data = this.object;\n              data['whatToSearch'] = 'sense';\n              data['new_definition'] = newValue;\n              data['request'] = 6;\n\n              this.lexicalService.refreshAfterEdit(data);\n\n            }\n            this.lexicalService.updateCoreCard({ lastUpdate: error.error.text })\n            this.lexicalService.spinnerAction('off');\n            this.toastr.success('Sense ' + trait + ' changed', '', {\n              timeOut: 5000,\n            });\n          }\n\n        }\n      )\n    } else {\n      this.lexicalService.spinnerAction('off');\n    }\n  }\n\n\n  removeReference(index) {\n    const referenceArray = this.senseCore.get('reference') as FormArray;\n    referenceArray.removeAt(index)\n  }\n\n  createLexicalConcept(e?, t?, i?, l?) {\n    if (e != undefined) {\n      return this.formBuilder.group({\n        entity: e,\n        inferred: i,\n        label: l,\n        type: t\n      })\n    } else {\n      return this.formBuilder.group({\n        entity: '',\n        inferred: false,\n        label: '',\n        type: null\n      })\n    }\n\n  }\n\n  addLexicalConcept(entity?, type?, inferred?, label?) {\n    this.lexicalConceptArray = this.senseCore.get('lexical_concept') as FormArray;\n    if (entity != undefined) {\n      this.lexicalConceptArray.push(this.createLexicalConcept(entity, type, inferred, label));\n    } else {\n      this.disableAddLexicalConcept = true;\n      this.lexicalConceptArray.push(this.createLexicalConcept());\n    }\n  }\n\n  removeLexicalConcept(index) {\n    this.lexicalConceptArray = this.senseCore.get('lexical_concept') as FormArray;\n\n    this.disableAddLexicalConcept = false;\n    const entity = this.lexicalConceptArray.at(index).get('entity').value;\n\n    let senseId = this.object.sense;\n\n    let parameters = {\n      relation: 'http://www.w3.org/ns/lemon/ontolex#isLexicalizedSenseOf',\n      value: entity\n    }\n\n\n    if (entity != '') {\n      this.lexicalService.deleteLinguisticRelation(senseId, parameters).pipe(takeUntil(this.destroy$)).subscribe(\n        data => {\n          console.log(data)\n          this.lexicalService.updateCoreCard(this.object);\n          this.toastr.success(\"Lexical Concept removed\", '', {\n            timeOut: 5000,\n          });\n\n        }, error => {\n          console.log(error)\n          //this.lexicalService.updateCoreCard({ lastUpdate: error.error.text })\n          if (error.status == 200) {\n            this.toastr.success('Lexical Concept deleted correctly', 'Error', {\n              timeOut: 5000,\n            });\n          } else {\n            this.toastr.error(error.error, 'Error', {\n              timeOut: 5000,\n            });\n          }\n\n        }\n      )\n    }\n\n\n    this.lexicalConceptArray.removeAt(index);\n\n    this.memoryLexicalConcept.splice(index, 1)\n  }\n\n  ngOnDestroy(): void {\n    this.subject_def_subscription.unsubscribe();\n    this.subject_ex_def_subscription.unsubscribe();\n\n    this.destroy$.next(true);\n    this.destroy$.complete();\n  }\n}\n","\n\n<form [formGroup]=\"senseCore\">\n    \n    <div class=\"form-group row ml-2 mt-3 mr-2\">\n        <div class=\"input-group col-lg-12\">\n            <div class=\"card\">\n                <span class=\"text-id\"><b>DEFINITIONS</b></span>\n                <a class=\"pointer\" (click)=\"addDefinition()\" [ngClass]=\"{no_pointer: disableAddDef}\"><span class=\"collapse-icon\"><i\n                            class=\"fa fa-plus-square\"></i></span></a>\n                <div class=\"card-body\">\n\n                    <div class=\"d-flex my-3\" *ngFor=\"let def of staticDef; let i = index\">\n                        <div class=\"col-md-3\">\n                            <span style=\"line-height: 50px;\" class=\"col-form-label\">{{def['trait']}}</span>\n                        </div>\n                        <div class=\"input-group col-md-9\">\n                            <textarea type=\"text\" class=\"form-control\"\n                                placeholder=\"\" (keyup)=\"debounceExistingKeyup($event, i)\" [value]=\"def['value']\" style=\"resize: none;\"></textarea>\n                            <div (click)=\"removeDefinition(i)\" class=\"input-group-append ml-2\" *ngIf=\"def['trait'] != 'definition'\"> <button\n                                    class=\"btn btn-danger\" type=\"button\"\n                                    style=\"font-size: 12px; border-radius: .25rem;\"><i\n                                        class=\"fa fa-trash-alt\"></i></button>\n                            </div>\n                            <div class=\"invalid-feedback\" *ngIf=\"staticDef[i]['value'] == ''\" style=\"display: block;\">\n                                Please, don't leave this field blank\n                            </div>\n\n                        </div>\n                    </div>\n\n                    <div class=\"d-flex my-2\" formArrayName=\"definition\"\n                        *ngFor=\"let def of senseCore.get('definition')['controls']; let i = index\">\n                        <div class=\"col-md-3\" [formGroupName]=\"i\" *ngIf=\"i + 1 > staticDef.length\">\n                            <select class=\"form-control selectTrait\" formControlName=\"propertyID\" name=\"propertyID\"\n                                style=\"font-size: 12px; height: 50px;\" (change)=\"onChangeDefinitionTrait($event, i)\">\n                                <option value=\"\">Select a trait...</option>\n                                <option *ngFor=\"let df of definitionData\" [disabled]=\"definitionMemory.indexOf(df) > -1\" [selected]=\"def.value['propertyID'] === df\">{{df}}</option>\n                            </select>\n                            <div class=\"invalid-feedback\" *ngIf=\"def.get('propertyID').invalid\" style=\"display: block;\">\n                                Please, don't leave this field blank\n                            </div>\n                        </div>\n                        <div class=\"input-group col-md-9\" [formGroupName]=\"i\" *ngIf=\"i + 1 > staticDef.length\">\n                            <textarea formControlName=\"propertyValue\" name=\"propertyValue\" type=\"text\" class=\"form-control\"\n                                placeholder=\"\" (keyup)=\"debounceKeyup($event, i)\" style=\"resize: none;\"></textarea>\n                            <div (click)=\"removeDefinition(i)\" class=\"input-group-append ml-2\"> <button\n                                    class=\"btn btn-danger\" type=\"button\"\n                                    style=\"font-size: 12px; border-radius: .25rem;\"><i\n                                        class=\"fa fa-trash-alt\"></i></button>\n                            </div>\n                            <div class=\"invalid-feedback\" *ngIf=\"def.get('propertyValue').invalid\" style=\"display: block;\">\n                                Please, don't leave this field blank\n                            </div>\n                        </div>\n                    </div>\n\n                </div>\n            </div>\n        </div>\n    </div>\n    \n    <div class=\"form-group row ml-2 mt-3 mr-2\">\n        <label for=\"inputLabel\" class=\"col-xl-3 col-form-label\">Uncertain:</label>\n        <div class=\"input-group col-xl-7\">\n            <input formControlName=\"confidence\" name=\"confidence\" type=\"checkbox\"> <!-- [checked]=\"etyForm.get('confidence').value == 0\" -->\n        </div>\n    </div>\n\n    <!-- <div class=\"form-group row ml-2 mt-4 mr-2\">\n        <label for=\"inputLabel\" class=\"col-lg-3 col-form-label\">Usage:</label>\n        <div class=\"input-group col-lg-8\">\n            <textarea formControlName=\"usage\" name=\"usage\" class=\"form-control\" style=\"resize: none;\"></textarea>\n        </div>\n    </div>\n\n    <div class=\"form-group row ml-2 mt-4 mr-2\">\n        <label for=\"inputLabel\" class=\"col-lg-3 col-form-label\">Topic:</label>\n        <div class=\"input-group col-lg-8\">\n            <input formControlName=\"topic\" name=\"topic\" class=\"form-control\" style=\"resize: none;\" />\n        </div>\n    </div> -->\n\n    <!-- REFERENCE -->\n    <!-- <div formArrayName=\"reference\">\n        <div *ngFor=\"let ref of senseCore['controls'].reference['controls']; let i = index\">\n            <div [formGroupName]=\"i\">\n                <div class=\"form-group row ml-2 mt-3 mr-2\">\n                    <label for=\"inputLabel\" class=\"col-lg-3 col-form-label\">Reference:</label>\n                    <div class=\"input-group col-xl-9\" *ngIf=\"{switch : false}; let variable\">\n                        <ng-select formControlName=\"entity\" name=\"entity\" [items]=\"people\" bindValue=\"name\"\n                            bindLabel=\"name\" placeholder=\"Search entity\" appendTo=\"body\" [loading]=\"peopleLoading\"\n                            *ngIf=\"!variable.switch\">\n                        </ng-select>\n                        <input formControlName=\"entity\" name=\"entity\" type=\"text\" class=\"form-control\"\n                            placeholder=\"Insert URI\" *ngIf=\"variable.switch\">\n                        <div class=\"input-group-append ml-3 form-check\" style=\"align-items: center;\">\n                            <input class=\"form-check-input vartrans-tooltip\" type=\"checkbox\"\n                                (change)=\"variable.switch=!variable.switch\" data-toggle=\"tooltip\"\n                                data-placement=\"bottom\" data-trigger=\"hover\"\n                                title=\"Clicca per inserire un URI manualmente\">\n                        </div>\n                        <div class=\"input-group-append ml-2\">\n                            <button class=\"btn btn-primary\" type=\"button\"><i\n                                    class=\"fa fa-external-link-alt\"></i></button>\n                        </div>\n                        <div class=\"input-group-append ml-2\">\n                            <button (click)=\"removeReference(i)\" class=\"btn btn-danger\" type=\"button\"><i\n                                    class=\"fa fa-trash-alt\"></i></button>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div> -->\n\n    <div class=\"form-group row ml-2 mt-4 mr-2\">\n\n    </div>\n\n\n    <!-- LEXICAL CONCEPT -->\n    <div class=\"form-group row ml-2 mt-3 mr-2\">\n        <div class=\"input-group col-xl-12\">\n            <div class=\"card\">\n                <span class=\"text-id\"><b>LEXICAL CONCEPT</b></span>\n                <a class=\"pointer\" [ngClass]=\"{no_pointer: disableAddLexicalConcept}\" (click)=\"addLexicalConcept()\"><span class=\"collapse-icon\"><i\n                            class=\"fa fa-plus-square\"></i></span></a>\n\n                <div class=\"card-body\">\n                    <div class=\"form-group row ml-2 mt-3 mr-2\" formArrayName=\"lexical_concept\"\n                        *ngFor=\"let concept of senseCore.get('lexical_concept')['controls']; let i = index\">\n                        <div class=\"input-group col-xl-12\"  [formGroupName]=\"i\">\n                            <ng-select #select_lexicalConcept formControlName=\"label\" name=\"label\" [items]=\"searchResults\" \n                                (keyup)=\"triggerLexicalConcept($event, i)\" (change)=\"handleLexicalConcept(select_lexicalConcept, i)\"\n                                bindValue=\"defaultLabel\" bindLabel=\"defaultLabel\" placeholder=\"Search entity\" appendTo=\"body\" [clearable]=\"false\"\n                                >\n                                \n                                <ng-template ng-option-tmp let-item=\"item\" let-search=\"searchTerm\">\n                                    <div>\n                                        <span>{{item.defaultLabel}} </span><span style=\"color: blue;\">@{{item.language}}</span>\n                                    </div>\n\n                                </ng-template>\n                            </ng-select>\n                            \n                            \n                            <div class=\"input-group-append ml-2\">\n                                <button (click)=\"removeLexicalConcept(i)\" class=\"btn btn-danger\" type=\"button\"><i\n                                        class=\"fa fa-trash-alt\"></i></button>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n\n\n    <!-- SHOW INFERENCE -->\n    <!-- <div class=\"form-group row ml-2 mt-3 mr-2 inference\">\n        <div class=\"input-group col-xl-12\">\n            <div class=\"card\">\n                <span class=\"text-id\"><a data-toggle=\"collapse\" href=\"#inferenceCollapse\" role=\"button\"\n                        aria-expanded=\"false\" aria-controls=\"inferenceCollapse\"><span class=\"badge badge-warning\"><b\n                                style=\"color: white; font-size: 12px;\">SHOW INFERENCE</b></span></a></span>\n                <div class=\"card-body\">\n                    <div class=\"collapse\" id=\"inferenceCollapse\">\n\n                        <div class=\"form-group row ml-2 mt-3 mr-2\">\n                            <div class=\"input-group col-xl-12\" *ngIf=\"{switch : false}; let variable\">\n                                <div class=\"form-group row w-100\">\n                                    <label for=\"inputLabel\" class=\"col-lg-3 col-form-label\">Is sense of:</label>\n                                    <div class=\"input-group col-lg-8\">\n                                        <input formControlName=\"sense_of\" name=\"sense_of\" type=\"text\" class=\"form-control\"\n                                            placeholder=\"\">\n                                    </div>\n                                </div>\n                            </div>\n                        </div>\n\n                        <div class=\"form-group row ml-2 mr-2\">\n                            <label class=\"col-xl-3 col-form-label\">Lexicalized Sense:</label>\n                            <div class=\"col-xl-9 card mt-0 p-0\"\n                                style=\"max-height: 10vh;overflow: auto; border: 1px solid rgba(0,0,0,.125) !important\">\n                                <div class=\"form-group row ml-2 mb-0 mt-0 mr-2\">\n                                    <label class=\"col-xl-6 col-form-label\">Lexical Sense</label>\n                                </div>\n                                <div class=\"form-group row ml-2 mb-0 mt-0 mr-2\">\n                                    <label class=\"col-xl-6 col-form-label\">Lexical Sense</label>\n                                </div>\n                                <div class=\"form-group row ml-2 mb-0 mt-0 mr-2\">\n                                    <label class=\"col-xl-6 col-form-label\">Lexical Sense</label>\n                                </div>\n                            </div>\n                        </div>\n\n                        <div class=\"form-group row ml-2 mr-2\">\n                            <label class=\"col-xl-3 col-form-label\">Is Evoked By:</label>\n                            <div class=\"col-xl-9 card mt-0 p-0\"\n                                style=\"max-height: 10vh;overflow: auto; border: 1px solid rgba(0,0,0,.125) !important\">\n                                <div class=\"form-group row ml-2 mb-0 mt-0 mr-2\">\n                                    <label class=\"col-xl-6 col-form-label\">Lexical Entry@LANG</label>\n                                </div>\n                                <div class=\"form-group row ml-2 mb-0 mt-0 mr-2\">\n                                    <label class=\"col-xl-6 col-form-label\">Lexical Entry@LANG</label>\n                                </div>\n                            </div>\n                        </div>\n\n                        <div class=\"form-group row ml-2 mr-2\">\n                            <label class=\"col-xl-3 col-form-label\">Narrower:</label>\n                            <div class=\"col-xl-9 card mt-0 p-0\"\n                                style=\"max-height: 10vh;overflow: auto; border: 1px solid rgba(0,0,0,.125) !important\">\n                                <div class=\"form-group row ml-2 mb-0 mt-0 mr-2\">\n                                    <label class=\"col-xl-6 col-form-label\">Lexical Concept</label>\n                                    <label class=\"col-xl-6 col-form-label\">Depth</label>\n                                </div>\n                            </div>\n                        </div>\n\n                        <div class=\"form-group row ml-2 mr-2\">\n                            <label class=\"col-xl-3 col-form-label\">Borader:</label>\n                            <div class=\"col-xl-9 card mt-0 p-0\"\n                                style=\"max-height: 10vh;overflow: auto; border: 1px solid rgba(0,0,0,.125) !important\">\n                                <div class=\"form-group row ml-2 mb-0 mt-0 mr-2\">\n                                    <label class=\"col-xl-6 col-form-label\">Lexical Concept</label>\n                                    <label class=\"col-xl-6 col-form-label\">Depth</label>\n                                </div>\n                            </div>\n                        </div>\n\n                    </div>\n                    \n                </div>\n            </div>\n        </div>\n    </div> -->\n</form>","/*\n   Copyright 2021-2022  Istituto di Linguistica Computazionale \"A. Zampolli\", Consiglio Nazionale delle Ricerche, Pisa, Italy.\n \nThis file is part of EpiLexo.\n\nEpiLexo is free software: you can redistribute it and/or modify it under the terms of the GNU General Public License as published by the Free Software Foundation, either version 3 of the License, or (at your option) any later version.\n\nEpiLexo is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for more details.\n\nYou should have received a copy of the GNU General Public License along with EpiLexo. If not, see <https://www.gnu.org/licenses/>.\n*/\n\nimport { Component, Input, OnDestroy, OnInit, SimpleChanges } from '@angular/core';\nimport { Subject, Subscription } from 'rxjs';\nimport { LexicalEntriesService } from 'src/app/services/lexical-entries/lexical-entries.service';\n\nimport { FormBuilder, FormGroup, FormArray, FormControl } from '@angular/forms';\nimport { debounceTime, takeUntil } from 'rxjs/operators';\n\n@Component({\n  selector: 'app-sense-vartrans-form',\n  templateUrl: './sense-vartrans-form.component.html',\n  styleUrls: ['./sense-vartrans-form.component.scss']\n})\nexport class SenseVartransFormComponent implements OnInit, OnDestroy {\n\n  switchInput = false;\n  subscription: Subscription;\n  object: any;\n  peopleLoading = false;\n  counter = 0;\n  componentRef: any;\n\n  @Input() senseData : any;\n\n  senseVartransForm = new FormGroup({\n    label: new FormControl(''),\n    translation: new FormArray([this.createTranslation()]),\n    senseTranslation: new FormArray([this.createSenseTranslation()]),\n    terminologicalRelation: new FormArray([this.createTerminologicalRelation()])\n  })\n\n  translation: FormArray;\n  senseTranslation: FormArray;\n  terminologicalRelation: FormArray;\n  terminologicalRelationSub : FormArray;\n  destroy$ : Subject<boolean> = new Subject();\n  constructor(private lexicalService: LexicalEntriesService, private formBuilder: FormBuilder) {\n  }\n\n  ngOnInit() {\n    \n    this.senseVartransForm = this.formBuilder.group({\n      label: '',\n      translation: this.formBuilder.array([this.createTranslation()]),\n      senseTranslation: this.formBuilder.array([this.createSenseTranslation()]),\n      terminologicalRelation: this.formBuilder.array([this.createTerminologicalRelation()])\n    })\n    this.onChanges();\n    this.loadPeople();\n    this.triggerTooltip();\n  }\n\n  ngOnChanges(changes: SimpleChanges) {\n    setTimeout(()=> {\n      if(this.object != changes.senseData.currentValue){\n        if(this.terminologicalRelation != null){\n          this.terminologicalRelation.clear();\n          this.senseTranslation.clear();\n          this.translation.clear();\n        }\n      }\n      this.loadPeople();\n      this.object = changes.senseData.currentValue;\n      if(this.object != null){\n        this.senseVartransForm.get('label').setValue(this.object.label, {emitEvent:false});\n      }\n      this.triggerTooltip();\n  }, 10)\n  }\n\n  triggerTooltip(){\n    setTimeout(() => {\n      //@ts-ignore\n      $('.vartrans-tooltip').tooltip({\n        trigger : 'hover'\n      });\n    }, 500);\n  }\n\n  private loadPeople() {\n   \n  }\n\n  onChanges(): void {\n    this.senseVartransForm.valueChanges.pipe(debounceTime(200), takeUntil(this.destroy$)).subscribe(searchParams => {\n      //console.log(searchParams)\n    })\n  }\n\n  createTranslation(): FormGroup {\n    return this.formBuilder.group({\n      type: '',\n      confidence: 0.0,\n      target: ''\n    })\n  }\n\n  addTranslation() {\n    this.translation = this.senseVartransForm.get('translation') as FormArray;\n    this.translation.push(this.createTranslation());\n    this.triggerTooltip();\n  }\n\n  removeTranslation(index) {\n    this.translation = this.senseVartransForm.get('translation') as FormArray;\n    this.translation.removeAt(index);\n  }\n\n  addSenseTranslation() {\n    this.senseTranslation = this.senseVartransForm.get('senseTranslation') as FormArray;\n    this.senseTranslation.push(this.createSenseTranslation());\n    this.triggerTooltip();\n  }\n\n  removeSenseTranslation(index) {\n    this.senseTranslation = this.senseVartransForm.get('senseTranslation') as FormArray;\n    this.senseTranslation.removeAt(index);\n  }\n\n  addTerminologicalRelation() {\n    this.terminologicalRelation = this.senseVartransForm.get('terminologicalRelation') as FormArray;\n    this.terminologicalRelation.push(this.createTerminologicalRelation());\n    this.triggerTooltip();\n  }\n\n  removeTerminologicalRelation(index) {\n    this.terminologicalRelation = this.senseVartransForm.get('terminologicalRelation') as FormArray;\n    this.terminologicalRelation.removeAt(index);\n  }\n\n  addTerminologicalRelationSub(index) {\n    const control = (<FormArray>this.senseVartransForm.controls['terminologicalRelation']).at(index).get('sub_rel') as FormArray;\n    control.insert(index, this.createSubTerminologicalRelation())\n    this.triggerTooltip();\n  }\n\n  removeTerminologicalRelationSub(index, iy) {\n    const control = (<FormArray>this.senseVartransForm.controls['terminologicalRelation']).at(index).get('sub_rel') as FormArray;\n    control.removeAt(iy);\n  }\n\n  createSenseTranslation(): FormGroup {\n    return this.formBuilder.group({\n      relation: '',\n      entity: ''\n    })\n  }\n\n  createTerminologicalRelation(): FormGroup {\n    return this.formBuilder.group({\n      a_entity: '',\n      relation: '',\n      b_entity: '',\n      sub_rel: new FormArray([])\n    })\n  }\n\n  createSubTerminologicalRelation(): FormGroup {\n    return this.formBuilder.group({\n      sub_relation: 'eee',\n      sub_entity: ''\n    })\n  }\n\n  ngOnDestroy(): void {\n    this.destroy$.next(true);\n    this.destroy$.complete();\n  }\n}\n","\n\n<form [formGroup]=\"senseVartransForm\" *ngIf=\"object!=null\"> \n    <div class=\"form-group row ml-2 mt-3 mr-2\">\n        <label for=\"inputLabel\" class=\"col-xl-3 col-form-label\">Label:</label>\n        <div class=\"input-group col-xl-5\">\n            <input formControlName=\"label\" name=\"label\" type=\"text\" class=\"form-control\" placeholder=\"\">\n        </div>\n    </div>\n    \n    <!-- TRANSLATION -->\n    <div class=\"form-group row ml-2 mt-3 mr-2\">\n        <div class=\"input-group col-xl-12\">\n            <div class=\"card\">\n                <span class=\"text-id\"><b>TRANSLATION</b></span>\n                <a class=\"pointer\" (click)=\"addTranslation()\"><span class=\"collapse-icon\"><i class=\"fa fa-plus-square\"></i></span></a>\n\n                <div class=\"card-body\">\n                    <div formArrayName=\"translation\">\n                        <div *ngFor=\"let trans of senseVartransForm.get('translation')['controls']; let i = index\">\n                            <div class=\"form-group row ml-2 mt-3 mr-2\">\n                        \n                                <label for=\"inputLabel\" class=\"col-xl-3 mb-3 col-form-label \">Type:</label>\n                                <div class=\"input-group col-xl-5 mb-3\" [formGroupName]=\"i\">\n                                    <select class=\"form-control\" formControlName=\"type\" name=\"type\">\n                                        <option>Relations...</option>\n                                        <option>...</option>\n                                    </select>\n                                </div>\n                            </div>\n                            <div class=\"form-group row ml-2 mt-3 mr-2\">\n                                <label for=\"inputLabel\" class=\"col-xl-3 mb-3 col-form-label \">Confidence:</label>\n                                <div class=\"input-group col-xl-2 mb-3\" [formGroupName]=\"i\">\n                                    <input formControlName=\"confidence\" name=\"confidence\" type=\"number\" step=\"0.1\" min=\"0\" max=\"10\" class=\"form-control\" placeholder=\"\">\n                                </div>\n                            </div>\n                            \n                            <div class=\"form-group row ml-2 mt-3 mr-2\">\n                                <label for=\"inputLabel\" class=\"col-xl-3 mb-3 col-form-label \">Target:</label>\n                                <div class=\"input-group col-xl-9\" *ngIf=\"{switch : false}; let variable\" [formGroupName]=\"i\">\n                                    <ng-select formControlName=\"target\" name=\"target\" [items]=\"people\" bindValue=\"name\" bindLabel=\"name\" placeholder=\"Search entity\" appendTo=\"body\"\n                                        [loading]=\"peopleLoading\" *ngIf=\"!variable.switch\">\n                                    </ng-select>\n                                    <input formControlName=\"target\" name=\"target\" type=\"text\" class=\"form-control\" placeholder=\"Insert URI\" *ngIf=\"variable.switch\">\n                                    <div class=\"input-group-append ml-3 form-check\">\n                                        <input class=\"form-check-input vartrans-tooltip\" type=\"checkbox\" (change)=\"variable.switch=!variable.switch\" data-toggle=\"tooltip\" data-placement=\"bottom\" data-trigger=\"hover\" title=\"Clicca per inserire un URI manualmente\">\n                                    </div>\n                                    <div class=\"input-group-append ml-2\">\n                                        <button class=\"btn btn-primary\" type=\"button\" (click)=\"modalRoot.show()\"><i\n                                                class=\"fa fa-external-link-alt\" ></i></button>\n                                                <app-modal #modalRoot class=\"modal-demo\" [maximizable]=\"true\" [backdrop]=\"false\">\n                                                    <ng-container class=\"app-modal-header\">Demo modal</ng-container>\n                                                    <ng-container class=\"app-modal-body\">\n                                                        <h3>MODAL DIALOG</h3>\n                                                        <p>Lorem Ipsum is simply dummy text of the printing and typesetting industry.\n                                                            Lorem Ipsum has been the industrys standard dummy text ever since the 1500s.</p>\n                                                    </ng-container>\n                                                    <ng-container class=\"app-modal-footer\">\n                                                        <button type=\"button\" class=\"button button3\" (click)=\"modalRoot.hide()\">Delete</button>\n                                                        <button type=\"button\" class=\"button button1\" (click)=\"modalRoot.hide()\">Save</button>\n                                                        <button type=\"button\" class=\"button button2\" style=\"float: right;\"\n                                                            (click)=\"modalRoot.hide()\">Close\n                                                        </button>\n                                                    </ng-container>\n                                                </app-modal>\n                                    </div>\n                                    <div class=\"input-group-append ml-2\">\n                                        <button (click)=\"removeTranslation(i)\" class=\"btn btn-danger\" type=\"button\"><i class=\"fa fa-trash-alt\"></i></button>\n                                    </div>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                    \n                </div>\n            </div>\n        </div>\n    </div>\n\n    <!-- SENSE RELATION DIRECT -->\n    <div class=\"form-group row ml-2 mt-3 mr-2\">\n        <div class=\"input-group col-xl-12\">\n            <div class=\"card\">\n                <span class=\"text-id\"><b>SENSE RELATION</b><span class=\"badge badge-primary ml-2\">DIRECT</span></span>\n                <a (click)=\"addSenseTranslation()\" class=\"pointer\"><span class=\"collapse-icon\"><i class=\"fa fa-plus-square\"></i></span></a>\n\n                <div class=\"card-body\">\n                    <div class=\"form-group row ml-2 mt-3 mr-2\" formArrayName=\"senseTranslation\" *ngFor=\"let direct of senseVartransForm.get('senseTranslation')['controls']; let i = index\">\n                        <div class=\"col-xl-5\" [formGroupName]=\"i\">\n                            <select class=\"form-control\" formControlName=\"relation\" name=\"relation\">\n                                <option>Relations...</option>\n                                <option>...</option>\n                            </select>\n                        </div>\n                        <div class=\"input-group col-xl-7\" *ngIf=\"{switch : false}; let variable\" [formGroupName]=\"i\">\n                            <ng-select formControlName=\"entity\" name=\"entity\" [items]=\"people\" bindValue=\"name\" bindLabel=\"name\" placeholder=\"Search entity\" appendTo=\"body\"\n                                [loading]=\"peopleLoading\" *ngIf=\"!variable.switch\">\n                            </ng-select>\n                            <input formControlName=\"entity\" name=\"entity\" type=\"text\" class=\"form-control\" placeholder=\"Insert URI\" *ngIf=\"variable.switch\">\n                            <div class=\"input-group-append ml-3 form-check\">\n                                <input class=\"form-check-input vartrans-tooltip\" type=\"checkbox\" (change)=\"variable.switch=!variable.switch\" data-toggle=\"tooltip\" data-placement=\"bottom\" data-trigger=\"hover\" title=\"Clicca per inserire un URI manualmente\">\n                            </div>\n                            <div class=\"input-group-append ml-2\">\n                                <button class=\"btn btn-primary\" type=\"button\"><i\n                                        class=\"fa fa-external-link-alt\" (click)=\"modalRoot.show()\"></i></button>\n                                <app-modal #modalRoot class=\"modal-demo\" [maximizable]=\"true\" [backdrop]=\"false\">\n                                    <ng-container class=\"app-modal-header\">Demo modal</ng-container>\n                                    <ng-container class=\"app-modal-body\">\n                                        <h3>MODAL DIALOG</h3>\n                                        <p>Lorem Ipsum is simply dummy text of the printing and typesetting industry.\n                                            Lorem Ipsum has been the industrys standard dummy text ever since the 1500s.</p>\n                                    </ng-container>\n                                    <ng-container class=\"app-modal-footer\">\n                                        <button type=\"button\" class=\"button button3\" (click)=\"modalRoot.hide()\">Delete</button>\n                                        <button type=\"button\" class=\"button button1\" (click)=\"modalRoot.hide()\">Save</button>\n                                        <button type=\"button\" class=\"button button2\" style=\"float: right;\"\n                                            (click)=\"modalRoot.hide()\">Close\n                                        </button>\n                                    </ng-container>\n                                </app-modal>\n                            </div>\n                            <div class=\"input-group-append ml-2\">\n                                <button (click)=\"removeSenseTranslation(i)\" class=\"btn btn-danger\" type=\"button\"><i class=\"fa fa-trash-alt\"></i></button>\n                            </div>\n                        </div>\n                    </div>\n                   \n                </div>\n            </div>\n        </div>\n    </div>\n\n\n    <!-- TERMINOLOGICAL RELATION INDIRECT -->\n    <div class=\"form-group row ml-2 mt-3 mr-2\">\n        <div class=\"input-group col-xl-12\">\n            <div class=\"card\">\n                <span class=\"text-id\"><b>TERMINOLOGICAL RELATION</b><span class=\"badge badge-primary ml-2\">INDIRECT</span></span>\n                <a class=\"pointer\" (click)=\"addTerminologicalRelation()\"><span class=\"collapse-icon\"><i class=\"fa fa-plus-square\"></i></span></a>\n                <div class=\"card-body\">\n                    <div formArrayName=\"terminologicalRelation\">\n                        <div *ngFor=\"let indirect of senseVartransForm['controls'].terminologicalRelation['controls']; let i = index\">\n                            <div [formGroupName]=\"i\">\n                                <div class=\"form-group row ml-2 mt-3 mr-2\">\n                                    <div class=\"col-xl-3\">\n                                        <input type=\"text\" class=\"form-control\" formControlName=\"a_entity\" name=\"a_entity\">\n                                    </div>\n                                    <div class=\"col-xl-3\">\n                                        <select class=\"form-control\" formControlName=\"relation\" name=\"relation\">\n                                            <option>Relation</option>\n                                            <option>...</option>\n                                        </select>\n                                    </div>\n                                    <div class=\"input-group col-xl-6\" *ngIf=\"{switch : false}; let variable\">\n                                        <ng-select formControlName=\"b_entity\" name=\"b_entity\" [items]=\"people\" class=\"resizeNgSelect\" bindValue=\"name\" bindLabel=\"name\" placeholder=\"Search entity\" appendTo=\"body\"\n                                            [loading]=\"peopleLoading\" *ngIf=\"!variable.switch\">\n                                        </ng-select>\n                                        <input formControlName=\"b_entity\" name=\"b_entity\" type=\"text\" class=\"form-control\" placeholder=\"Insert URI\" *ngIf=\"variable.switch\">\n                                        <div class=\"input-group-append ml-3 form-check\">\n                                            <input class=\"form-check-input vartrans-tooltip\" type=\"checkbox\" (change)=\"variable.switch=!variable.switch\" data-toggle=\"tooltip\" data-placement=\"bottom\" data-trigger=\"hover\" title=\"Clicca per inserire un URI manualmente\">\n                                        </div>\n                                        <div class=\"input-group-append ml-2\">\n                                            <button class=\"btn btn-primary\" type=\"button\"><i\n                                                    class=\"fa fa-external-link-alt\"></i></button>\n                                        </div>\n                                        <div class=\"input-group-append ml-2\">\n                                            <button (click)=\"removeTerminologicalRelation(i)\" class=\"btn btn-danger\" type=\"button\"><i class=\"fa fa-trash-alt\"></i></button>\n                                        </div>\n                                        <div class=\"input-group-append ml-2\">\n                                            <button (click)=\"addTerminologicalRelationSub(i)\" class=\"btn btn-outline-primary\" type=\"button\"><i class=\"fa fa-plus\"></i></button>\n                                        </div>\n                                    </div>\n                                </div>\n                                <div formArrayName=\"sub_rel\">\n                                    <div *ngFor=\"let sub of indirect['controls'].sub_rel['controls']; let j = index\">\n                                        <div [formGroupName]=\"j\">\n                                            <div class=\"form-group row ml-2 mt-3 mr-2\">\n                                                <div class=\"col-xl-3\" ></div>\n                                                <div class=\"col-xl-3\">\n                                                    <select class=\"form-control\" formControlName=\"sub_relation\" name=\"sub_relation\">\n                                                        <option>{{sub.value['sub_relation']}}</option>\n                                                        <option>...</option>\n                                                    </select>\n                                                </div>\n                                                <div class=\"input-group col-xl-6\" *ngIf=\"{switch : false}; let variable\">\n                                                    <ng-select formControlName=\"sub_entity\" name=\"sub_entity\" [items]=\"people\" class=\"resizeNgSelect\" bindLabel=\"name\" bindValue=\"name\" placeholder=\"Search entity\" appendTo=\"body\"\n                                                        [loading]=\"peopleLoading\" *ngIf=\"!variable.switch\">\n                                                    </ng-select>\n                                                    <input formControlName=\"sub_entity\" name=\"sub_entity\" type=\"text\" class=\"form-control\" id=\"inputDenotes\" placeholder=\"Insert URI\" *ngIf=\"variable.switch\">\n                                                    <div class=\"input-group-append ml-3 form-check\">\n                                                        <input class=\"form-check-input vartrans-tooltip\" type=\"checkbox\" (change)=\"variable.switch=!variable.switch\" data-toggle=\"tooltip\" data-placement=\"bottom\" data-trigger=\"hover\" title=\"Clicca per inserire un URI manualmente\">\n                                                    </div>\n                                                    <div class=\"input-group-append ml-2\">\n                                                        <button class=\"btn btn-primary\" type=\"button\"><i\n                                                                class=\"fa fa-external-link-alt\"></i></button>\n                                                    </div>\n                                                    <div class=\"input-group-append ml-2\">\n                                                        <button (click)=\"removeTerminologicalRelationSub(i, j)\" class=\"btn btn-danger\" type=\"button\"><i class=\"fa fa-trash-alt\"></i></button>\n                                                    </div>\n                                                    <div class=\"input-group-append ml-2\">\n                                                        <button  class=\"btn btn-outline-primary invisible\" type=\"button\"><i class=\"fa fa-plus\"></i></button>\n                                                    </div>\n                                                </div>\n                                            </div>\n                                        </div>\n                                    </div>\n                                </div>\n                            </div>\n                        </div>  \n                    </div>           \n                </div>\n            </div>\n        </div>\n    </div>\n\n    <!-- SHOW INFERENCE -->\n    <!-- <div class=\"form-group row ml-2 mt-3 mr-2 inference\">\n        <div class=\"input-group col-xl-12\">\n            <div class=\"card\">\n                <span class=\"text-id\"><a data-toggle=\"collapse\" href=\"#inferenceCollapse\" role=\"button\" aria-expanded=\"false\" aria-controls=\"inferenceCollapse\"><span class=\"badge badge-warning\"><b style=\"color: white; font-size: 12px;\">SHOW INFERENCE</b></span></a></span>\n                <div class=\"card-body\">\n                    <div class=\"collapse\" id=\"inferenceCollapse\">\n\n                        <div class=\"form-group row ml-2 mr-2\">\n                            <label class=\"col-xl-3 col-form-label\">Lexicalized Sense:</label>\n                            <div class=\"col-xl-9 card mt-0 p-0\" style=\"max-height: 10vh;overflow: auto; border: 1px solid rgba(0,0,0,.125) !important\">    \n                                <div class=\"form-group row ml-2 mb-0 mt-0 mr-2\">\n                                    <label class=\"col-xl-6 col-form-label\">Lexical Sense</label>\n                                </div>      \n                                <div class=\"form-group row ml-2 mb-0 mt-0 mr-2\">\n                                    <label class=\"col-xl-6 col-form-label\">Lexical Sense</label>\n                                </div>        \n                                <div class=\"form-group row ml-2 mb-0 mt-0 mr-2\">\n                                    <label class=\"col-xl-6 col-form-label\">Lexical Sense</label>\n                                </div>  \n                            </div>\n                        </div>\n\n                        <div class=\"form-group row ml-2 mr-2\">\n                            <label class=\"col-xl-3 col-form-label\">Is Evoked By:</label>\n                            <div class=\"col-xl-9 card mt-0 p-0\" style=\"max-height: 10vh;overflow: auto; border: 1px solid rgba(0,0,0,.125) !important\">    \n                                <div class=\"form-group row ml-2 mb-0 mt-0 mr-2\">\n                                    <label class=\"col-xl-6 col-form-label\">Lexical Entry@LANG</label>\n                                </div> \n                                <div class=\"form-group row ml-2 mb-0 mt-0 mr-2\">\n                                    <label class=\"col-xl-6 col-form-label\">Lexical Entry@LANG</label>\n                                </div>          \n                            </div>\n                        </div>\n\n                        <div class=\"form-group row ml-2 mr-2\">\n                            <label class=\"col-xl-3 col-form-label\">Narrower:</label>\n                            <div class=\"col-xl-9 card mt-0 p-0\" style=\"max-height: 10vh;overflow: auto; border: 1px solid rgba(0,0,0,.125) !important\">    \n                                <div class=\"form-group row ml-2 mb-0 mt-0 mr-2\">\n                                    <label class=\"col-xl-6 col-form-label\">Lexical Concept</label>\n                                    <label class=\"col-xl-6 col-form-label\">Depth</label>\n                                </div>           \n                            </div>\n                        </div>\n                        \n                        <div class=\"form-group row ml-2 mr-2\">\n                            <label class=\"col-xl-3 col-form-label\">Borader:</label>\n                            <div class=\"col-xl-9 card mt-0 p-0\" style=\"max-height: 10vh;overflow: auto; border: 1px solid rgba(0,0,0,.125) !important\">    \n                                <div class=\"form-group row ml-2 mb-0 mt-0 mr-2\">\n                                    <label class=\"col-xl-6 col-form-label\">Lexical Concept</label>\n                                    <label class=\"col-xl-6 col-form-label\">Depth</label>\n                                </div>           \n                            </div>\n                        </div>\n                        \n                    </div>\n                </div>\n            </div>\n        </div>\n    </div> -->\n</form>","/*\n   Copyright 2021-2022  Istituto di Linguistica Computazionale \"A. Zampolli\", Consiglio Nazionale delle Ricerche, Pisa, Italy.\n \nThis file is part of EpiLexo.\n\nEpiLexo is free software: you can redistribute it and/or modify it under the terms of the GNU General Public License as published by the Free Software Foundation, either version 3 of the License, or (at your option) any later version.\n\nEpiLexo is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for more details.\n\nYou should have received a copy of the GNU General Public License along with EpiLexo. If not, see <https://www.gnu.org/licenses/>.\n*/\n\nimport { Component, ComponentFactoryResolver, ElementRef, Input, OnChanges, OnDestroy, OnInit, QueryList, SimpleChanges, ViewChild, ViewChildren, ViewContainerRef } from '@angular/core';\nimport { ModalComponent } from 'ng-modal-lib';\nimport { ToastrService } from 'ngx-toastr';\nimport { Subject, Subscription } from 'rxjs';\nimport { debounceTime, take, takeUntil } from 'rxjs/operators';\nimport { AnnotatorService } from 'src/app/services/annotator/annotator.service';\nimport { BibliographyService } from 'src/app/services/bibliography-service/bibliography.service';\nimport { ExpanderService } from 'src/app/services/expander/expander.service';\nimport { LexicalEntriesService } from 'src/app/services/lexical-entries/lexical-entries.service';\nimport { FormPanelComponent } from './form-panel/form-panel.component';\n\n@Component({\n  selector: 'app-attestation-panel',\n  templateUrl: './attestation-panel.component.html',\n  styleUrls: ['./attestation-panel.component.scss']\n})\nexport class AttestationPanelComponent implements OnInit,OnChanges, OnDestroy {\n\n  @Input() attestationData: any;\n  @ViewChild('addBibliographyAttestation', {static: false}) modal: ModalComponent;\n  @ViewChild('table_body') tableBody: ElementRef;\n  @ViewChild('accordion') accordion: ElementRef; \n  @ViewChild('formPanel', {read: ViewContainerRef}) vc: ViewContainerRef;\n\n\n\n  bibliography = [];\n  typesData = [];\n  private update_anno_subject: Subject<any> = new Subject();\n  private update_biblio_anno_subject: Subject<any> = new Subject();\n  private searchSubject : Subject<any> = new Subject();\n\n  start = 0;\n  sortField = 'title';\n  direction = 'asc';\n  memorySort = {field : '', direction : ''}\n  queryTitle = '';\n  queryMode = 'titleCreatorYear';\n  selectedItem;\n  selectedAnnotation;\n  fileId;\n\n  arrayPanelFormsData = {};\n  arrayComponents = [];\n  typeDesc = '';\n  staticOtherDef = [];\n  labelData = [];\n  bind = this;\n\n  destroy$ : Subject<boolean> = new Subject();\n\n  get_form_subscription : Subscription;\n  get_id_text_subscription : Subscription;\n  update_anno_subscription : Subscription;\n  update_anno_biblio_subject_subscription : Subscription;\n  biblio_bootstrap_subscription : Subscription;\n  search_subject_subscription : Subscription;\n\n  constructor(private toastr: ToastrService, \n              private biblioService : BibliographyService, \n              private expander: ExpanderService, \n              private annotatorService : AnnotatorService, \n              private lexicalService : LexicalEntriesService,\n              private factory: ComponentFactoryResolver) { }\n  \n  \n  formData = [];\n  ngOnInit(): void {\n\n    this.lexicalService.getFormTypes().pipe(takeUntil(this.destroy$)).subscribe(\n      data => {\n        this.typesData = data;\n        //console.log(this.typesData)\n      },\n      error => {\n        //console.log(error)\n      }\n    )\n\n    this.annotatorService.getIdText$.pipe(takeUntil(this.destroy$)).subscribe(\n      data=>{\n        console.log(data);\n        this.fileId = data;\n      },error=>{\n        console.log(error)\n      }\n    )\n\n    this.update_anno_subject.pipe(debounceTime(1000), takeUntil(this.destroy$)).subscribe(\n      data => {\n        if(data != null){\n          this.updateAnnotation(data)\n        }\n      }\n    )\n    \n\n   this.update_biblio_anno_subject.pipe(debounceTime(1000), takeUntil(this.destroy$)).subscribe(\n      data => {\n        if(data != null){\n          this.updateBiblioAnnotation(data)\n        }\n      }\n    )\n\n    this.biblioService.bootstrapData(this.start, this.sortField, this.direction).pipe(takeUntil(this.destroy$)).subscribe(\n      data=> {\n        this.memorySort = {field : this.sortField, direction : this.direction}\n        this.bibliography = data;\n        this.bibliography.forEach(element => {\n          element['selected'] = false;\n        })\n        \n        \n        //@ts-ignore\n        $('#biblioModalAnnotation').modal('hide');\n        $('.modal-backdrop').remove();\n      },error=>{\n        console.log(error)\n      }\n    )\n\n    this.searchSubject.pipe(debounceTime(1000), takeUntil(this.destroy$)).subscribe(\n      data => {\n        this.queryTitle  = data.query;\n        data.queryMode ? this.queryMode = 'everything' : this.queryMode = 'titleCreatorYear';\n        this.searchBibliography(this.queryTitle, this.queryMode);\n      }\n    )\n  }\n  \n\n  ngOnChanges(changes: SimpleChanges) { \n    \n    console.log(changes)\n    if(changes.attestationData.currentValue != null){\n      setTimeout(() => {\n\n        if(changes.attestationData.currentValue != this.formData){\n          this.formData = [];\n          //this.arrayPanelFormsData = {}\n          this.selectedItem = null;\n          this.selectedAnnotation = null;\n          this.typeDesc = '';\n          this.staticOtherDef = [];\n          this.labelData = [];\n          \n        }\n        this.formData = changes.attestationData.currentValue;\n        console.log(this.formData)\n        if(this.formData.length == 0){\n          this.lexicalService.triggerAttestationPanel(false);\n          this.typeDesc = '';\n          this.staticOtherDef = [];\n          this.labelData = [];\n        }else{\n         /*  this.formData.forEach(element => {\n            this.arrayPanelFormsData[element.id] = {};\n            this.arrayPanelFormsData[element.id].data = undefined;\n            this.arrayPanelFormsData[element.id].isOpen = false;\n          }); */\n        }\n        \n      }, 10);\n      \n    }else{\n      this.formData = [];\n      this.typeDesc = '';\n      this.staticOtherDef = [];\n      this.labelData = [];\n      this.selectedItem = null;\n      this.selectedAnnotation = null;\n    }\n  }\n\n  cancelAttestation(index, id, node_id){\n    this.formData.splice(index,1);\n    this.annotatorService.deleteAnnotationRequest(id, node_id);\n    \n    this.annotatorService.deleteAnnotation(id).pipe(takeUntil(this.destroy$)).subscribe(\n      data=> {\n        console.log(data);\n        this.toastr.success('Attestation deleted correctly', 'Info', {\n          timeOut : 5000\n        })\n        this.annotatorService.closePanelForm(id);\n        if(this.arrayComponents.length > 0){\n          this.arrayComponents.forEach(instanceComponent => {\n            if(instanceComponent.instance.id == id){\n    \n              setTimeout(() => {\n                instanceComponent.instance.formPanelModal.hide();\n              }, 100);\n            }\n          })\n        }\n      },error => {\n        console.log(error);\n        this.toastr.error('Error on deleting attestation', 'Error', {\n          timeOut : 5000\n        })\n      }\n    );\n    if(this.formData.length == 0){\n      this.lexicalService.triggerAttestationPanel(false);\n      //this.lexicalService.sendToCoreTab(null);\n      /* this.expander.openCollapseEdit(false);\n      this.expander.expandCollapseEdit(false);\n\n      this.expander.openCollapseEpigraphy(true);\n      this.expander.expandCollapseEpigraphy(true); */\n    }\n\n    \n  }\n\n  triggerUpdateAttestation(evt, newValue, propKey, annotation){\n    this.update_anno_subject.next({event : evt, newValue : newValue, propKey: propKey, annotation : annotation})\n  }\n\n  debounceKeyup(value, annotation, index, field){\n    this.update_biblio_anno_subject.next({v: value, a: annotation, i: index, f: field})\n  }\n\n  updateAnnotation(data){\n    if(data !=null){\n      let id_annotation = data?.annotation?.id;\n      let newValue = data?.newValue;\n      let property = data?.propKey;\n\n      let annotation = data?.annotation; \n\n      if(property == 'confidence' && data.event.target.checked == true){\n        annotation.attributes.confidence = 0; \n      }else if(property == 'confidence' && data.event.target.checked == false){\n        annotation.attributes.confidence = 1; \n      }else{\n        annotation.attributes[property] = newValue;\n      }\n\n\n      this.annotatorService.updateAnnotation(annotation).subscribe(\n        data=> {\n          console.log(data);\n          this.toastr.success('Attestation updated correctly', 'Info', {\n            timeOut : 5000\n          })\n        },error => {\n          console.log(error);\n          this.toastr.error('Error on updating attestation', 'Error', {\n            timeOut : 5000\n          })\n        }\n      )\n\n    } \n  }\n\n  updateBiblioAnnotation(data){\n    if(data != null){\n      console.log(data);\n\n      let id_annotation = data?.a.id;\n      let newValue = data?.v;\n      let index = data?.i;\n      let field = data?.f;\n\n      this.formData.forEach(\n        element=>{\n          if(element.id == id_annotation){\n            element.attributes.bibliography[index][field] = newValue;\n          }\n        }\n      )\n      let annotation = data?.a;\n      console.log(annotation)\n      this.annotatorService.updateAnnotation(annotation).pipe(takeUntil(this.destroy$)).subscribe(\n        data=> {\n          console.log(data);\n          this.toastr.success('Attestation updated correctly', 'Info', {\n            timeOut : 5000\n          })\n        },error => {\n          console.log(error);\n          this.toastr.error('Error on updating attestation', 'Error', {\n            timeOut : 5000\n          })\n        }\n      )\n      \n    }\n  }\n\n  getForm(formId, index){\n\n    setTimeout(() => {\n      console.log('#attestation_collapse-'+index+'')\n      let item_collapse = this.accordion.nativeElement.querySelectorAll('#attestation_collapse-'+index)[0];\n      if(item_collapse.classList.contains('show')){\n        this.lexicalService.getFormData(formId, 'core').pipe(takeUntil(this.destroy$)).subscribe(\n          data=>{\n            console.log(data);\n            this.lexicalService.triggerLexicalEntryTree({request: true, data: data})\n            \n            //this.lexicalService.sendToCoreTab(data)\n            this.lexicalService.sendToEtymologyTab(null);\n            this.lexicalService.sendToRightTab(data);\n            //this.lexicalService.updateCoreCard({lastUpdate : data['lastUpdate'], creationDate : data['creationDate']});\n            \n            if(this.expander.isEpigraphyTabOpen() && !this.expander.isEditTabOpen()){\n              if(this.expander.isEpigraphyTabExpanded() && !this.expander.isEditTabExpanded()){\n                this.expander.openCollapseEdit(true);\n                this.expander.expandCollapseEpigraphy(false)\n              }\n            }\n            \n            var text_detail = document.querySelectorAll('#text-dettaglio');\n            text_detail.forEach(element => {\n              if(!element.classList.contains('show')){\n                element.classList.add('show')\n              }\n            })\n          },\n          error=>{\n            console.log(error)\n          }\n        )\n      }else{\n        console.log(\"non fai partire ricerca\")\n      }\n      console.log(item_collapse)\n    }, 500);\n    \n    \n  }\n\n  showBiblioModal(item){\n    this.selectedAnnotation = item;\n    this.modal.show();\n  }\n\n  checkIfCreatorExist(item?){\n    return item.some(element => element.creatorType === 'author')\n  }\n\n  selectItem(evt, i){\n    /* console.log(evt, i); */\n    if(evt.shiftKey){\n\n    }\n    this.bibliography.forEach(element=> {\n      if(element.key == i.key){\n        element.selected = !element.selected;\n        element.selected ? this.selectedItem = element : this.selectedItem = null;\n        return true;\n      }else{\n        element.selected = false;\n        return false;\n      }\n    })\n    \n  }\n\n  onCloseModal(){\n    this.selectedItem = null;\n    this.start = 0;\n    this.sortField = 'title';\n    this.direction = 'asc';\n    this.tableBody.nativeElement.scrollTop = 0;\n    this.memorySort = { field: this.sortField, direction: this.direction}\n    this.biblioService.bootstrapData(this.start, this.sortField, this.direction).pipe(takeUntil(this.destroy$)).subscribe(\n      data=> {\n        this.bibliography = data;\n        this.bibliography.forEach(element => {\n          element['selected'] = false;\n        }) \n                \n       \n      },error=>{\n        console.log(error)\n      }\n    );\n  }\n\n  onScrollDown(){\n    //@ts-ignore\n    $(\"#biblioModalAnnotation\").modal(\"show\");\n    $('.modal-backdrop').appendTo('.table-body');\n    //@ts-ignore\n    $('#biblioModalAnnotation').modal({backdrop: 'static', keyboard: false})  \n    $('.modal-backdrop').appendTo('.table-body');\n    $('body').removeClass(\"modal-open\")\n    $('body').css(\"padding-right\", \"\");\n\n    this.start += 25;\n    \n    if(this.queryTitle != ''){\n      this.biblioService.filterBibliography(this.start, this.sortField, this.direction, this.queryTitle, this.queryMode).pipe(takeUntil(this.destroy$)).subscribe(\n        data=>{\n          console.log(data)\n          //@ts-ignore\n          $('#biblioModalAnnotation').modal('hide');\n          $('.modal-backdrop').remove();\n          data.forEach(element => {\n            this.bibliography.push(element)\n          });\n        },error=>{\n          console.log(error)\n        }\n      )\n    }else{\n      this.biblioService.filterBibliography(this.start, this.sortField, this.direction, this.queryTitle, this.queryMode).pipe(takeUntil(this.destroy$)).subscribe(\n        data=> {\n          \n          data.forEach(element => {\n            this.bibliography.push(element)\n          });\n                  \n          //@ts-ignore\n          $('#biblioModalAnnotation').modal('hide');\n          $('.modal-backdrop').remove();\n        },error=>{\n          console.log(error)\n        }\n      );\n    }\n\n    \n  }\n\n  addBibliographyItem(item?){\n    //@ts-ignore\n    $(\"#biblioModalAnnotation\").modal(\"show\");\n    $('.modal-backdrop').appendTo('.ui-modal');\n    //@ts-ignore\n    $('#biblioModalAnnotation').modal({backdrop: 'static', keyboard: false})  \n    \n    $('.modal-backdrop').css('height', 'inherit');\n    $('body').removeClass(\"modal-open\")\n    $('body').css(\"padding-right\", \"\");\n\n    let instance = '';\n    /* if(this.object.lexicalEntryInstanceName != undefined\n      && this.object.lexicalEntryInstanceName.senseInstanceName == undefined){\n        instance = this.object.lexicalEntryInstanceName;\n    }else if(this.object.formInstanceName != undefined){\n      instance = this.object.formInstanceName;\n    }else if(this.object.senseInstanceName != undefined){\n      instance = this.object.senseInstanceName;\n    } */\n\n    if(item != undefined){\n\n      let id = item.data.key != undefined ? item.data.key : '';\n      let title = item.data.title != undefined ? item.data.title : '';\n      let author;\n      \n      item.data.creators.forEach(element => {\n        if(element.creatorType == 'author'){\n          author = element.lastName + ' ' + element.firstName;\n          return true;\n        }else{\n          return false;\n        }\n      });\n      author = author != undefined ? author : ''\n      let date = item.data.date != undefined ? item.data.date : '';\n      let url = item.data.url != undefined ? item.data.url : ''\n      let seeAlsoLink = '';\n\n      item.data['note'] = \"\";;\n      item.data['textualRef'] = \"\";\n\n      let parameters = {\n        id : id,\n        title: title,\n        author: author,\n        date: date,\n        url: url,\n        seeAlsoLink: seeAlsoLink\n      }\n\n      console.log(item, this.selectedAnnotation);\n      this.modal.hide();\n\n     let anno_id = this.selectedAnnotation.id;\n\n      this.formData.forEach(\n        attestation => {\n          if(attestation.id == anno_id){\n            console.log(attestation)\n            attestation?.attributes?.bibliography.push(item?.data)\n          }\n        }\n      );\n\n      this.annotatorService.updateAnnotation(this.selectedAnnotation).pipe(takeUntil(this.destroy$)).subscribe(\n        data=>{\n          console.log(data);\n          //@ts-ignore\n          $('#biblioModalAnnotation').modal('hide');\n          $('.modal-backdrop').remove();\n\n          this.modal.hide();\n\n          this.toastr.success('Item added correctly', 'Info', {\n            timeOut : 5000\n          })\n\n        },error=>{\n          console.log(error);\n          //@ts-ignore\n          $('#biblioModalAnnotation').modal('hide');\n          $('.modal-backdrop').remove();\n\n          this.modal.hide();\n\n          this.toastr.error('Error on adding item', 'Info', {\n            timeOut : 5000\n          })\n\n        }\n      )\n      /* this.annotatorService.updateAnnotation() */\n      /*       \n      this.lexicalService.addBibliographyData(instance, parameters).pipe(takeUntil(this.destroy$)).subscribe(\n        data=>{\n          console.log(data);\n          setTimeout(() => {\n            //@ts-ignore\n            $('#biblioModal').modal('hide');\n            $('.modal-backdrop').remove();\n            this.toastr.success('Item added, check bibliography panel', '', {\n              timeOut: 5000,\n            });\n            this.biblioService.triggerPanel(data)\n            setTimeout(() => {\n              this.modal.hide();\n            }, 10);\n          }, 300);\n          this.biblioService.sendDataToBibliographyPanel(data);\n        },error=>{\n          console.log(error)\n          if(typeof(error.error) == 'string' && error.error.length < 1000){\n            this.toastr.error(error.error, '', {\n              timeOut: 5000,\n            });\n          }else{\n            this.toastr.error(error.statusText, '', {\n              timeOut: 5000,\n            });\n          }\n          \n          setTimeout(() => {\n            //@ts-ignore\n            $('#biblioModal').modal('hide');\n            $('.modal-backdrop').remove();\n\n            setTimeout(() => {\n              this.modal.hide();\n            }, 10);\n          }, 300);\n          \n        }\n      ) */\n    }\n    \n  }\n\n  sortBibliography(evt?, val?){\n    \n    \n    if(this.memorySort.field == val){\n      if(this.direction == 'asc'){\n        this.direction = 'desc'\n        this.memorySort.direction = 'desc';\n      }else{\n        this.direction = 'asc';\n        this.memorySort.direction = 'asc';\n      }\n    }else{\n      this.sortField = val;\n      this.direction = 'asc';\n      this.memorySort = {field : this.sortField, direction : this.direction};\n    }\n\n    //@ts-ignore\n    $(\"#biblioModalAnnotation\").modal(\"show\");\n    $('.modal-backdrop').appendTo('.table-body');\n    //@ts-ignore\n    $('#biblioModalAnnotation').modal({backdrop: 'static', keyboard: false})  \n    $('.modal-backdrop').appendTo('.table-body');\n    $('body').removeClass(\"modal-open\")\n    $('body').css(\"padding-right\", \"\");\n    this.start = 0;\n    this.tableBody.nativeElement.scrollTop = 0;\n\n    this.biblioService.filterBibliography(this.start, this.sortField, this.direction, this.queryTitle, this.queryMode).pipe(takeUntil(this.destroy$)).subscribe(\n      data=>{\n        console.log(data)\n        this.bibliography = [];\n        //@ts-ignore\n        $('#biblioModalAnnotation').modal('hide');\n        $('.modal-backdrop').remove();\n        data.forEach(element => {\n          this.bibliography.push(element)\n        });\n      },error=>{\n        console.log(error)\n      }\n    )\n    \n  }\n\n  removeItem(item, j) {\n    console.log(item, j)\n    \n    this.formData.forEach(\n      annotation=>{\n        if(item?.id == annotation.id){\n          annotation.attributes.bibliography.splice(j, 1)\n        }\n      }\n    )\n\n    this.annotatorService.updateAnnotation(item).pipe(takeUntil(this.destroy$)).subscribe(\n      data=>{\n        console.log(data)\n        this.toastr.success('Attestation removed correctly', 'Info', {\n          timeOut : 5000\n        })\n      },\n      error=>{\n        console.log(error)\n        this.toastr.error('Error on removing attestation', 'Error', {\n          timeOut : 5000\n        })\n      }\n    )\n    console.log(this.formData, item)\n  }\n\n  triggerSearch(evt, query, queryMode) {\n    if(evt.key != 'Control' && evt.key != 'Shift' && evt.key != 'Alt'){\n      this.searchSubject.next({query, queryMode})\n    }\n  }\n  \n  searchBibliography(query?:string, queryMode?:any){\n    this.start = 0;\n    this.selectedItem = null;\n    //@ts-ignore\n    $(\"#biblioModalAnnotation\").modal(\"show\");\n    $('.modal-backdrop').appendTo('.table-body');\n    //@ts-ignore\n    $('#biblioModalAnnotation').modal({backdrop: 'static', keyboard: false})  \n    $('body').removeClass(\"modal-open\")\n    $('body').css(\"padding-right\", \"\");\n    this.tableBody.nativeElement.scrollTop = 0;\n    if(this.queryTitle != ''){\n      this.biblioService.filterBibliography(this.start, this.sortField, this.direction, this.queryTitle, this.queryMode).pipe(takeUntil(this.destroy$)).subscribe(\n        data => {\n          console.log(data);\n          this.bibliography = [];\n          data.forEach(element => {\n            this.bibliography.push(element)\n          });\n          //@ts-ignore\n          $('#biblioModalAnnotation').modal('hide');\n          $('.modal-backdrop').remove();\n        },\n        error => {\n          console.log(error)\n        }\n      )\n    }else{\n      this.biblioService.filterBibliography(this.start, this.sortField, this.direction, this.queryTitle, this.queryMode).pipe(takeUntil(this.destroy$)).subscribe(\n        data => {\n          console.log(data);\n          this.bibliography = [];\n          data.forEach(element => {\n            this.bibliography.push(element)\n          });\n          //@ts-ignore\n          $('#biblioModalAnnotation').modal('hide');\n          $('.modal-backdrop').remove();\n        },\n        error => {\n          console.log(error)\n        }\n      )\n    }\n  }158\n\n  \n\n  loadFormData(idAnnotation, formId, label){\n    console.log(idAnnotation)\n    let panel = this.annotatorService.getPanelForm(idAnnotation);\n    if(panel == undefined){\n      this.lexicalService.getFormData(formId, 'core').pipe(takeUntil(this.destroy$)).subscribe(\n        data=> {\n          console.log(data);\n          if(data != undefined){\n            this.annotatorService.newPanelForm(idAnnotation);\n            const factory = this.factory.resolveComponentFactory(FormPanelComponent);\n            const componentRef = this.vc.createComponent(factory);\n            this.arrayComponents.push(componentRef);\n            (<FormPanelComponent>componentRef.instance).label = label + \" - \" + data.label[0].propertyValue;\n            (<FormPanelComponent>componentRef.instance).formId = formId;\n            (<FormPanelComponent>componentRef.instance).id = idAnnotation;\n            (<FormPanelComponent>componentRef.instance).formData = data;\n            (<FormPanelComponent>componentRef.instance).triggerFormPanel();\n          }\n        }, error=> {\n          console.log(error)\n        }\n      )\n      \n    }else{\n\n    }\n\n  }\n\n  ngOnDestroy(): void {\n    \n\n    this.destroy$.next(true);\n    this.destroy$.complete();\n  }\n}\n","\n\n<div class=\"card\">\n    <div class=\"card-header\" id=\"attestationHeading\">\n        <h5 class=\"mb-0\">\n            <a class=\"btn btn-link w-100 d-flex align-self-center collapsed \" data-toggle=\"collapse\"\n                data-target=\"#attestationCollapse\" aria-expanded=\"true\" aria-controls=\"attestationCollapse\">\n                Attestation Panel<i class=\"fa ml-auto\"></i>\n            </a>\n        </h5>\n    </div>\n    <div id=\"attestationCollapse\" class=\"collapse\" aria-labelledby=\"attestationHeading\" #accordion>\n        <div class=\"card-body\">\n            <div *ngIf=\"formData != null\">\n               \n                <div class=\"card mb-4 pt-4\" *ngFor=\"let item of formData; let i = index\">\n                    \n                    <a class=\"attestationCollapse\" data-toggle=\"collapse\" [attr.data-target]=\"'#attestation_collapse-'+i\"\n                        aria-expanded=\"true\" [attr.aria-controls]=\"'#attestation_collapse-'+i\" ><span class=\"text-id pointer\"> <!-- (click)=\"getForm(item?.value, i)\" --><b\n                                class=\"badge badge-primary\">{{fileId == undefined ? item?.attributes.fileId : fileId}} - {{item?.attributes.label != undefined ? item?.attributes.label : ''}}</b></span></a>\n                   \n                    <a  (click)=\"loadFormData(item?.id, item?.value, fileId == null ? item?.attributes.fileId : fileId); \" class=\"pointer\"><span container=\"body\" placement=\"top\" ngbTooltip=\"Open in new panel\" class=\"external-icon\"><i class=\"fa fa-external-link-alt\"></i></span></a>\n                    <a (click)=\"cancelAttestation(i, item?.id, item?.attributes.node_id)\" class=\"pointer\"><span class=\"trash-icon\"><i class=\"fa fa-trash\"></i></span></a>\n                    \n\n                    <div [id]=\"'attestation_collapse-'+i\" class=\"collapse\" >\n                        <div class=\"card-body\" style=\"max-height: 20rem;  overflow: auto;  \">\n                            <!-- <div class=\"form-group row ml-2 mr-2 mb-0\">\n                                <label for=\"inputLabel\" class=\"col-lg-4 pl-0 pr-0 col-form-label\">URI:</label>\n                                <div class=\"input-group col-lg-8 pl-0 pr-0\">\n                                    <span class=\"font-italic overflow-auto p-1\">{{item?.value}}</span>\n                                </div>\n                            </div> -->\n                            \n                            \n                            <div class=\"form-group row ml-2 mr-2 mb-0\" *ngFor=\"let subprop of item?.attributes | keyvalue\">\n                                <label for=\"inputLabel\" class=\"col-lg-4 pl-0 pr-0 col-form-label\" *ngIf=\"subprop?.key != 'bibliography' && subprop?.key != 'validity' && subprop?.key != 'node_id' && subprop?.key != 'lexicalEntry' && subprop?.key != 'fileId' && subprop?.key != 'form_id' && subprop?.key != 'creator' && subprop?.key != 'timestamp' && subprop?.key != 'label' && subprop?.key != 'confidence'\">{{subprop?.key}}:</label>\n                                <label for=\"inputLabel\" class=\"col-lg-4 pl-0 pr-0 col-form-label\" *ngIf=\"subprop?.key == 'label'\">form:</label>\n                                <label for=\"inputLabel\" class=\"col-lg-4 pl-0 pr-0 col-form-label\" *ngIf=\"subprop?.key == 'confidence'\">uncertain:</label>\n\n                                \n                                <div class=\"input-group col-lg-8 pl-0 pr-0\">\n                                    <span class=\"font-italic overflow-auto p-1\" *ngIf=\"subprop?.key == 'label'\">{{subprop?.value}}</span>\n                                    <span class=\"font-italic overflow-auto p-1\" *ngIf=\"subprop?.key == 'leiden' && !item.empty_file\">{{subprop?.value}}</span>\n                                    <input #sub_property *ngIf=\"subprop?.key != 'creator' && \n                                                  subprop?.key != 'label' && \n                                                  subprop?.key != 'note' &&\n                                                  subprop?.key != 'timestamp' &&\n                                                  subprop?.key != 'node_id' &&\n                                                  subprop?.key != 'form_id' &&\n                                                  subprop?.key != 'confidence' &&\n                                                  subprop?.key != 'bibliography'  &&\n                                                  subprop?.key != 'validity' &&\n                                                  subprop?.key != 'leiden' &&\n                                                  subprop?.key != 'lexicalEntry' &&\n                                                  subprop?.key != 'fileId'\" \n                                                  (keyup)=\"triggerUpdateAttestation($event, sub_property.value, subprop?.key, item)\" id=\"attributes\" name=\"attributes\" type=\"text\" class=\"form-control\" placeholder=\"No info\" [value]=\"subprop?.value\">\n                                    <input #confidence (change)=\"triggerUpdateAttestation($event, confidence.value, subprop?.key, item)\" type=\"checkbox\" *ngIf=\"subprop?.key == 'confidence'\" [checked]=\"subprop?.value == 0\" >\n                                    <input #leiden (keyup)=\"triggerUpdateAttestation($event, leiden.value, subprop?.key, item)\" type=\"text\" *ngIf=\"item.empty_file && subprop?.key == 'leiden'\" class=\"form-control\" placeholder=\"No info\" [value]=\"subprop?.value\">\n<!--                                     <input #confidence *ngIf=\"subprop?.key == 'confidence'\" (keyup)=\"triggerUpdateAttestation($event, confidence.value, subprop?.key, item)\" (change)=\"triggerUpdateAttestation($event, confidence.value, subprop?.key, item)\" id=\"attributes\" name=\"attributes\" type=\"number\" min=\"0\" max=\"1\" step=\"0.1\" class=\"form-control\" placeholder=\"No info\" [value]=\"subprop?.value\">\n -->                                    <!-- <span class=\"font-italic overflow-auto p-1\" *ngIf=\"subprop?.key == 'timestamp'\">{{subprop?.value | date: 'dd/MM/yyyy HH:mm:ss'}}</span> -->\n                                    <textarea #text_area (keyup)=\"triggerUpdateAttestation($event, text_area.value, subprop?.key, item)\" *ngIf=\"subprop?.key == 'note'\" id=\"attributes\" name=\"attributes\" type=\"text\" class=\"form-control\" placeholder=\"No info\" style=\"resize: none;\">{{subprop?.value}}</textarea>\n                                </div>\n                            </div>\n                            <div class=\"form-group row ml-2 mr-2 mb-0\">\n                                <label for=\"inputLabel\" class=\"col-lg-4 pl-0 pr-0 col-form-label\">bibliography:</label>\n                                <div class=\"input-group col-lg-8 pl-0 pr-0 justify-content-between\">\n                                    <span class=\"font-italic overflow-auto p-1\" *ngIf=\"item?.attributes.bibliography.length == 0\">\n                                        No bibliography\n                                    </span>\n                                    <span class=\"font-italic overflow-auto p-1\" *ngIf=\"item?.attributes.bibliography.length != 0\">\n                                        {{item?.attributes?.bibliography.length}} item(s)\n                                    </span>\n                                    <button (click)=\"showBiblioModal(item)\" title=\"Add new bibliography item\" class=\"btn btn-success rounded-circle\" style=\"\n                                    width: 20px;\n                                    height: 20px;\n                                    padding: 0%;\n                                    border-radius: 15px !important;\">\n                                        <i class=\"fas fa-plus\"></i>\n                                    </button>\n                                </div>\n                                \n                                \n                            </div>\n                            <div *ngIf=\"item?.attributes.bibliography.length > 0\">\n                                <div class=\"form-group row ml-2 mt-3 mb-1  mr-2\" *ngFor=\"let item_biblio of item?.attributes.bibliography; let j = index\">\n                                    <div class=\"input-group col-xl-12 p-0\">\n                                        <!-- {{item_biblio.creators | json}} -->\n                                        <div id=\"accordion\">\n                                            <div class=\"card\">\n                                                <a class=\"biblioCollapse\" data-toggle=\"collapse\" [attr.data-target]=\"'#attestation_biblio_collapse-'+item?.id+'-'+j\" aria-expanded=\"true\" [attr.aria-controls]=\"'#attestation_biblio_collapse-'+item?.id+'-'+j\">\n                                                    \n                                                    <span class=\"text-id pointer\" style=\"z-index: 0;\">\n                                                        <span  *ngFor=\"let auth of item_biblio.creators\">\n                                                            <b *ngIf=\"auth.creatorType == 'author'\">{{auth.lastName}} {{auth.firstName}} </b>\n                                                        </span>\n                                                        <b>- ({{item_biblio.title != undefined ? (item_biblio.title | slice:0:10) +'...' : ''}})</b>\n                                                    </span>\n                                                    <!-- <span class=\"text-id pointer\">\n                                                        \n                                                    </span> -->\n                                                </a>\n                                                <span *ngIf=\"item_biblio != undefined\" class=\"icons-container\">\n                                                    <!-- {{bibliographyData[i]['url'] | json}} -->\n                                                    <!-- <span><a target=\"_blank\" class=\"pointer text-primary\" (click)=\"synchronizeBibliography(biblio.get('id').value)\"><span class=\"synchro-icon\"><i class=\"fas fa-sync-alt\" *ngIf=\"!loadingSynchro\"></i> <i class=\"fas fa-sync fa-spin\" *ngIf=\"loadingSynchro\"></i></span></a></span> -->\n                                                    <span ><a  href=\"https://www.zotero.org/groups/2552746/prin_italia_antica/items/{{item_biblio.key}}/library\" target=\"_blank\" class=\"pointer text-primary\"><span class=\"external-icon\"><i class=\"fas fa-external-link-alt\"></i></span></a></span>\n                                                    <span><a *ngIf=\"item_biblio.url != ''\" [href]=\"item_biblio.url\" target=\"_blank\" class=\"pointer text-primary\"><span class=\"download-icon\"><i class=\"fas fa-download\"></i></span></a></span>\n                                                </span>\n                                                \n                                                <a class=\"pointer\" (click)=\"removeItem(item, j)\"><span class=\"trash-icon\"><i class=\"fa fa-trash text-danger\"></i></span></a> \n                                                \n                                                <div [id]=\"'attestation_biblio_collapse-'+item?.id+'-'+j\" class=\"collapse\" > <!-- data-parent=\"#accordion\" -->\n                                                    <div class=\"card-body mt-2\">\n                                                        <div class=\"form-group row ml-2 mr-2 mb-0\">\n                                                            <label for=\"inputLabel\" class=\"col-lg-4 px-0 col-form-label\">Title:</label>\n                                                            <div class=\"input-group col-lg-8 pl-0\">\n                                                                <input id=\"title\"  name=\"title\" type=\"text\" class=\"form-control\" placeholder=\"\" disabled [value]=\"item_biblio?.title\">\n                                                            </div>\n                                                        </div>           \n                                                        <div class=\"form-group row ml-2 mr-2 mb-0\">\n                                                            <label for=\"inputLabel\" class=\"col-lg-4 px-0 col-form-label\">Author:</label>\n                                                            <div class=\"input-group col-lg-8 pl-0  \">\n                                                                <span *ngFor=\"let auth of item_biblio.creators\" class=\"pb-1\">\n                                                                    <input id=\"author\"   name=\"author\" type=\"text\" class=\"form-control\" placeholder=\"\" disabled [value]=\"auth.firstName + ' ' + auth.lastName\">\n                                                                </span>\n                                                                \n                                                            </div>\n                                                        </div>   \n                                                        <div class=\"form-group row ml-2 mr-2 mb-0\">\n                                                            <label for=\"inputLabel\" class=\"col-lg-4 px-0 col-form-label\">Date:</label>\n                                                            <div class=\"input-group col-lg-8 pl-0\">\n                                                                <input id=\"date\"   name=\"date\" type=\"text\" class=\"form-control\" placeholder=\"\" disabled [value]=\"item_biblio.date\">\n                                                            </div>\n                                                        </div>\n                                                        <div class=\"form-group row ml-2 mr-2\">\n                                                            <label for=\"inputLabel\" class=\"col-lg-4 px-0 col-form-label\">Note:</label>\n                                                            <div class=\"input-group col-lg-8 pl-0\">\n                                                                <textarea #note_item_biblio_anno (keyup)=\"debounceKeyup(note_item_biblio_anno.value, item, j, 'note')\"  name=\"note\" class=\"form-control\" style=\"resize: none;\" [value]=\"item_biblio.note\"></textarea>\n                                                            </div>\n                                                        </div>  \n                                                        <div class=\"form-group row ml-2 mr-2\">\n                                                            <label for=\"inputLabel\" class=\"col-lg-4 px-0 col-form-label\">TextualRef:</label>\n                                                            <div class=\"input-group col-lg-8 pl-0\">\n                                                                <textarea #txtref_item_biblio_anno (keyup)=\"debounceKeyup(txtref_item_biblio_anno.value, item, j, 'textualRef')\"  name=\"textualReference\" class=\"form-control\" style=\"resize: none;\" [value]=\"item_biblio.textualRef\"></textarea>\n                                                            </div>\n                                                        </div>     \n                                                    </div>\n                                                </div>                                            \n                                            </div>\n                                        </div>\n                                        \n                                        \n                                    </div>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n\n\n                    \n                </div>\n            </div>\n           \n        </div>\n    </div>\n\n</div>\n\n\n\n\n<!-- ################ BIBLIO MODAL ################# -->\n                    \n<app-modal #addBibliographyAttestation class=\"biblio_modal\" [backdrop]=\"false\" [inViewport]=\"true\" (closeModal)=\"onCloseModal()\">\n\n    <ng-container class=\"app-modal-header\">\n        <img src=\"../../../../../../assets/images/zotero_logo.png\">\n        <span class=\"ml-2 biblio-header-title\">Library: PRIN Italia Antica</span>\n    </ng-container>\n    \n    <ng-container class=\"app-modal-body\">\n        <!-- SEARCH BAR -->\n        <div class=\"w-25 pt-1 pb-1\">\n            <div class=\"input-group mb-3\" *ngIf=\"{switch : false}; let variable\">\n                <div class=\"input-group-prepend\">\n                    <button class=\"btn btn-outline-secondary dropdown-toggle\" type=\"button\" data-toggle=\"dropdown\"\n                        aria-haspopup=\"true\" aria-expanded=\"false\"><i class=\"fa fa-search\"></i></button>\n                    <div class=\"dropdown-menu\">\n                        <a [class.disable_click_fire]=\"!variable.switch\" class=\"dropdown-item\" style=\"cursor: pointer;\"\n                            (click)=\"variable.switch = false; searchBibliography(searchBiblio.value, variable.switch);\">Normal</a>\n                        <a [class.disable_click_fire]=\"variable.switch\" class=\"dropdown-item\" style=\"cursor: pointer;\"\n                            (click)=\"variable.switch = true; searchBibliography(searchBiblio.value, variable.switch);\">Full\n                            Text</a>\n                    </div>\n                </div>\n                <input #searchBiblio (keyup)=\"triggerSearch($event, searchBiblio.value, variable.switch)\" type=\"text\"\n                    class=\"form-control\" aria-label=\"Text input with dropdown button\"\n                    [placeholder]=\"variable.switch ?'Title, creator, year + Full Text' : 'Title, creator, year'\"\n                    style=\"font-size: 12px;\">\n            </div>\n\n        </div>\n        <!-- {{'start: '+start + ' sortField: '+ sortField + ' direction: '+ direction + ' queryTitle: '+ queryTitle + ' queryMode: '+ queryMode}} -->\n\n        <!-- SKELETON CONTAINER -->\n        <div class=\"container-fluid\">\n            <div class=\"row\">\n                <div class=\"col-md-8 pl-0\">\n\n\n                    <!-- TABLE -->\n                    <div class=\"table-responsive table-body\">\n                        <div id=\"biblioModalAnnotation\" class=\"modal fade\" role=\"dialog\">\n                            <div class=\"modal-dialog\">\n\n                                <!-- Modal content-->\n                                <div class=\"modal-content\">\n                                    <div class=\"modal-body\">\n                                        <div class=\"d-flex justify-content-center\">\n                                            <div class=\"spinner-border\" role=\"status\">\n                                                <span class=\"sr-only\">Loading...</span>\n                                            </div>\n                                        </div>\n                                    </div>\n                                </div>\n\n                            </div>\n                        </div>\n                        \n                        <table class=\"table table-striped table-hover\" [hidden]=\"bibliography.length == 0\">\n                            <thead>\n                                <tr>\n                                    <th scope=\"col\" style=\"width: 50%; cursor: pointer;\" (click)=\"sortBibliography($event, 'title')\">\n                                        <span>Title</span>\n                                        <span class=\"float-right\">\n                                            <i class=\"fas fa-sort-up\" *ngIf=\"direction == 'asc' && sortField == 'title'\"></i>\n                                            <i class=\"fas fa-sort-down\" *ngIf=\"direction == 'desc' && sortField == 'title'\"></i>\n                                        </span>\n                                    </th>\n                                    <th scope=\"col\" style=\"width: 30%; cursor: pointer;\" (click)=\"sortBibliography($event, 'creator')\">\n                                        <span>Creator</span>\n                                        <span class=\"float-right\">\n                                            <i class=\"fas fa-sort-up\" *ngIf=\"direction == 'asc' && sortField == 'creator'\"></i>\n                                            <i class=\"fas fa-sort-down\" *ngIf=\"direction == 'desc' && sortField == 'creator'\"></i>\n                                        </span>\n                                    </th>\n                                    <th scope=\"col\" style=\"width: 20%; cursor: pointer;\" (click)=\"sortBibliography($event, 'date')\">\n                                        <span>Date</span>\n                                        <span class=\"float-right\">\n                                            <i class=\"fas fa-sort-up\" *ngIf=\"direction == 'asc' && sortField == 'date'\"></i>\n                                            <i class=\"fas fa-sort-down\" *ngIf=\"direction == 'desc' && sortField == 'date'\"></i>\n                                        </span>\n                                    </th>\n                                </tr>\n                            </thead>\n                            <tbody #table_body infiniteScroll [infiniteScrollDistance]=\"0.4\"\n                                [infiniteScrollThrottle]=\"150\" [scrollWindow]=\"false\" (scrolled)=\"onScrollDown()\">\n\n\n                                <tr *ngFor=\"let item of bibliography\" (click)=\"selectItem($event, item)\"\n                                    [ngClass]=\"item?.selected ? 'selected' : ''\" style=\"cursor: pointer;\">\n                                    <td style=\"width: 50%\">\n                                        <span *ngIf=\"item.data.itemType == 'book'\" class=\"pl-1 pr-1\">\n                                            <i class=\"fas fa-book\"></i>\n                                        </span>\n                                        <span *ngIf=\"item.data.itemType == 'bookSection'\" class=\"pl-1 pr-1\">\n                                            <i class=\"fas fa-book-open\"></i>\n                                        </span>\n                                        <span *ngIf=\"item.data.itemType == 'journalArticle'\" class=\"pl-1 pr-1\">\n                                            <i class=\"far fa-newspaper\"></i>\n                                        </span>\n                                        <span *ngIf=\"item.data.itemType == 'note'\" class=\"pl-1 pr-1\">\n                                            <i class=\"far fa-clipboard\"></i>\n                                        </span>\n                                        <span *ngIf=\"item.data.itemType == 'attachment'\" class=\"pl-1 pr-1\">\n                                            <i class=\"fas fa-paperclip\"></i>\n                                        </span>\n                                        <span *ngIf=\"item.data.itemType == 'conferencePaper'\" class=\"pl-1 pr-1\">\n                                            <i class=\"fas fa-chalkboard-teacher\"></i>\n                                        </span>\n                                        <span\n                                            *ngIf=\"item.data.title != undefined && item.data.title != ''\">{{item.data.title |titlecase}}</span>\n                                        <span *ngIf=\"item.data.title == undefined || item.data.title == ''\"\n                                            class=\"font-italic\">No title</span>\n                                    </td>\n                                    <td style=\"width: 30%\">\n                                        <span *ngIf=\"item.data.creators != undefined\">\n                                            <span *ngFor=\"let author of item.data.creators; let i = index\">\n                                                <span *ngIf=\"author.creatorType == 'author'\">\n                                                    {{author.lastName | titlecase}} {{author.firstName | titlecase}} \n                                                </span>\n                                            </span>\n                                            <span *ngIf=\"!checkIfCreatorExist(item.data.creators)\"\n                                                class=\"font-italic\">No data</span>\n                                        </span>\n                                        <span *ngIf=\"item.data.creators == undefined\" class=\"font-italic\">No data</span>\n                                    </td>\n                                    <td style=\"width: 20%\">\n                                        <span *ngIf=\"item.data.date != undefined && item.data.date != ''\">\n                                            {{item.data.date | titlecase}}\n                                        </span>\n                                        <span *ngIf=\"item.data.date == undefined || item.data.date == ''\"\n                                            class=\"font-italic\">\n                                            No info\n                                        </span>\n                                    </td>\n                                </tr>\n                            </tbody>\n                        </table>\n                        <p class=\"font-italic text-muted no-results\" *ngIf=\"bibliography.length == 0\">No results</p>\n                    </div>\n\n\n                </div>\n                <div class=\"col-md-4\" style=\"font-size: 14px;\">\n                    <div class=\"row\">\n                        <div class=\"col-md-12 item-description\"\n                            style=\"height: calc(100vh - 37rem); overflow: auto; font-size: 13px;\">\n                            <div *ngIf=\"!selectedItem\">\n                                <div class=\"row\">\n                                    <div class=\"col-md-12\">\n                                        <p class=\"text-muted text-center align-middle mb-1 font-italic\">\n                                            No item selected\n                                        </p>\n                                    </div>\n                                </div>\n                            </div>\n                            <div *ngIf=\"selectedItem\">\n                                <div class=\"row\"\n                                    *ngIf=\"selectedItem.data.itemType != '' && selectedItem.data.itemType != undefined\">\n                                    <div class=\"col-md-4 left\" style=\"text-align: right;\">\n                                        <p class=\"text-muted font-weight-bold mb-1\">\n                                            Item type\n                                        </p>\n                                    </div>\n                                    <div class=\"col-md-8 right\" style=\"text-align: left;\">\n                                        <p class=\"font-weight-normal mb-1\">\n                                            {{selectedItem.data.itemType | titlecase}}\n                                        </p>\n                                    </div>\n                                </div>\n                                <div class=\"row\"\n                                    *ngIf=\"selectedItem.data.title != '' && selectedItem.data.title != undefined\">\n                                    <div class=\"col-md-4 left\" style=\"text-align: right;\">\n                                        <p class=\"text-muted font-weight-bold mb-1\">\n                                            Title\n                                        </p>\n                                    </div>\n                                    <div class=\"col-md-8 right\" style=\"text-align: left;\">\n                                        <p class=\"font-weight-normal mb-1\">\n                                            {{selectedItem.data.title | titlecase}}\n                                        </p>\n                                    </div>\n                                </div>\n                                <div class=\"row\"\n                                    *ngIf=\"selectedItem.data.creators != undefined && selectedItem.data.creators.length > 0 && checkIfCreatorExist(selectedItem.data.creators)\">\n                                    <div class=\"col-md-4 left\" style=\"text-align: right;\">\n                                        <p class=\"text-muted font-weight-bold mb-1\">\n                                            Author\n                                        </p>\n                                    </div>\n                                    <div class=\"col-md-8 right\" style=\"text-align: left;\">\n                                        <span *ngFor=\"let author of selectedItem.data.creators\">\n                                            <span *ngIf=\"author.creatorType == 'author'\">\n                                                <p class=\"font-weight-normal mb-1\">\n                                                    {{author.firstName | titlecase}} {{author.lastName | titlecase}}\n                                                </p>\n                                            </span>\n                                        </span>\n                                    </div>\n                                </div>\n                                <div class=\"row\"\n                                    *ngIf=\"selectedItem.data.creators != undefined && selectedItem.data.creators.length > 0\">\n                                    <div class=\"col-md-4 left\" style=\"text-align: right;\">\n                                        <p class=\"text-muted font-weight-bold mb-1\">\n                                            Editor\n                                        </p>\n                                    </div>\n                                    <div class=\"col-md-8 right\" style=\"text-align: left;\">\n                                        <span *ngFor=\"let editor of selectedItem.data.creators\">\n                                            <span *ngIf=\"editor.creatorType == 'editor'\">\n                                                <p class=\"font-weight-normal mb-1\">\n                                                    {{editor.firstName | titlecase}} {{editor.lastName | titlecase}}\n                                                </p>\n                                            </span>\n                                        </span>\n                                    </div>\n                                </div>\n                                <div class=\"row\"\n                                    *ngIf=\"selectedItem.data.publicationTitle != '' && selectedItem.data.publicationTitle != undefined\">\n                                    <div class=\"col-md-4 left\" style=\"text-align: right;\">\n                                        <p class=\"text-muted font-weight-bold mb-1\">\n                                            Publication\n                                        </p>\n                                    </div>\n                                    <div class=\"col-md-8 right\" style=\"text-align: left;\">\n                                        <p class=\"font-weight-normal mb-1\">\n                                            {{selectedItem.data.publicationTitle | titlecase}}\n                                        </p>\n                                    </div>\n                                </div>\n                                <div class=\"row\"\n                                    *ngIf=\"selectedItem.data.publisher != '' && selectedItem.data.publisher != undefined\">\n                                    <div class=\"col-md-4 left\" style=\"text-align: right;\">\n                                        <p class=\"text-muted font-weight-bold mb-1\">\n                                            Publisher\n                                        </p>\n                                    </div>\n                                    <div class=\"col-md-8 right\" style=\"text-align: left;\">\n                                        <p class=\"font-weight-normal mb-1\">\n                                            {{selectedItem.data.publisher | titlecase}}\n                                        </p>\n                                    </div>\n                                </div>\n                                <div class=\"row\"\n                                    *ngIf=\"selectedItem.data.issue != '' && selectedItem.data.issue != undefined\">\n                                    <div class=\"col-md-4 left\" style=\"text-align: right;\">\n                                        <p class=\"text-muted font-weight-bold mb-1\">\n                                            Issue\n                                        </p>\n                                    </div>\n                                    <div class=\"col-md-8 right\" style=\"text-align: left;\">\n                                        <p class=\"font-weight-normal mb-1\">\n                                            {{selectedItem.data.issue | titlecase}}\n                                        </p>\n                                    </div>\n                                </div>\n                                <div class=\"row\"\n                                    *ngIf=\"selectedItem.data.pages != '' && selectedItem.data.pages != undefined\">\n                                    <div class=\"col-md-4 left\" style=\"text-align: right;\">\n                                        <p class=\"text-muted font-weight-bold mb-1\">\n                                            Pages\n                                        </p>\n                                    </div>\n                                    <div class=\"col-md-8 right\" style=\"text-align: left;\">\n                                        <p class=\"font-weight-normal mb-1\">\n                                            {{selectedItem.data.pages | titlecase }}\n                                        </p>\n                                    </div>\n                                </div>\n                                <div class=\"row\"\n                                    *ngIf=\"selectedItem.data.place != '' && selectedItem.data.place != undefined\">\n                                    <div class=\"col-md-4 left\" style=\"text-align: right;\">\n                                        <p class=\"text-muted font-weight-bold mb-1\">\n                                            Place\n                                        </p>\n                                    </div>\n                                    <div class=\"col-md-8 right\" style=\"text-align: left;\">\n                                        <p class=\"font-weight-normal mb-1\">\n                                            {{selectedItem.data.place | titlecase }}\n                                        </p>\n                                    </div>\n                                </div>\n                                <div class=\"row\"\n                                    *ngIf=\"selectedItem.data.date != '' && selectedItem.data.pages != date\">\n                                    <div class=\"col-md-4 left\" style=\"text-align: right;\">\n                                        <p class=\"text-muted font-weight-bold mb-1\">\n                                            Date\n                                        </p>\n                                    </div>\n                                    <div class=\"col-md-8 right\" style=\"text-align: left;\">\n                                        <p class=\"font-weight-normal mb-1\">\n                                            {{selectedItem.data.date | titlecase}}\n                                        </p>\n                                    </div>\n                                </div>\n                                <div class=\"row\"\n                                    *ngIf=\"selectedItem.data.journalAbbreviation != '' && selectedItem.data.journalAbbreviation != undefined\">\n                                    <div class=\"col-md-4 left\" style=\"text-align: right;\">\n                                        <p class=\"text-muted font-weight-bold mb-1\">\n                                            Journal Abbr\n                                        </p>\n                                    </div>\n                                    <div class=\"col-md-8 right\" style=\"text-align: left;\">\n                                        <p class=\"font-weight-normal mb-1\">\n                                            {{selectedItem.data.journalAbbreviation | titlecase}}\n                                        </p>\n                                    </div>\n                                </div>\n                                <div class=\"row\"\n                                    *ngIf=\"selectedItem.data.DOI != '' && selectedItem.data.DOI != undefined\">\n                                    <div class=\"col-md-4 left\" style=\"text-align: right;\">\n                                        <p class=\"text-muted font-weight-bold mb-1\">\n                                            <a class=\"text-muted\" href=\"{{'https://doi.org/'+selectedItem.data.DOI}}\"\n                                                target=\"_blank\">DOI <i class=\"fas fa-external-link-alt\"></i></a>\n                                        </p>\n                                    </div>\n                                    <div class=\"col-md-8 right\" style=\"text-align: left;\">\n                                        <p class=\"font-weight-normal mb-1\">\n                                            {{selectedItem.data.DOI | titlecase}}\n                                        </p>\n                                    </div>\n                                </div>\n                                <div class=\"row\"\n                                    *ngIf=\"selectedItem.data.ISSN != '' && selectedItem.data.ISSN != undefined\">\n                                    <div class=\"col-md-4 left\" style=\"text-align: right;\">\n                                        <p class=\"text-muted font-weight-bold mb-1\">\n                                            ISSN\n                                        </p>\n                                    </div>\n                                    <div class=\"col-md-8 right\" style=\"text-align: left;\">\n                                        <p class=\"font-weight-normal mb-1\">\n                                            {{selectedItem.data.ISSN | titlecase}}\n                                        </p>\n                                    </div>\n                                </div>\n                                <div class=\"row\"\n                                    *ngIf=\"selectedItem.data.url != '' && selectedItem.data.url != undefined\">\n                                    <div class=\"col-md-4 left\" style=\"text-align: right;\">\n                                        <p class=\"text-muted font-weight-bold mb-1\">\n                                            <a class=\"text-muted\" href=\"{{selectedItem.data.url}}\" target=\"_blank\">URL\n                                                <i class=\"fas fa-external-link-alt\"></i></a>\n                                        </p>\n                                    </div>\n                                    <div class=\"col-md-8 right\" style=\"text-align: left;\">\n                                        <p class=\"font-weight-normal mb-1\">\n                                            {{selectedItem.data.url}}\n                                        </p>\n                                    </div>\n                                </div>\n                                <div class=\"row\"\n                                    *ngIf=\"selectedItem.data.accessDate != '' && selectedItem.data.accessDate != undefined\">\n                                    <div class=\"col-md-4 left\" style=\"text-align: right;\">\n                                        <p class=\"text-muted font-weight-bold mb-1\">\n                                            Accessed\n                                        </p>\n                                    </div>\n                                    <div class=\"col-md-8 right\" style=\"text-align: left;\">\n                                        <p class=\"font-weight-normal mb-1\">\n                                            {{selectedItem.data.accessDate}}\n                                        </p>\n                                    </div>\n                                </div>\n                            </div>\n\n                        </div>\n                    </div>\n                    <div class=\"row\">\n                        <div class=\"col-md-12\" style=\"height: calc(40vh - 10rem); overflow: auto; font-size: 13px;\">\n                            <div *ngIf=\"!selectedItem\">\n                                <div class=\"row\">\n                                    <div class=\"col-md-12\">\n                                        <p class=\"text-muted text-center align-middle mb-1 font-italic\">\n                                            No item selected\n                                        </p>\n                                    </div>\n                                </div>\n                            </div>\n                            <div\n                                *ngIf=\"selectedItem && (selectedItem.data.abstractNote == '' || selectedItem.data.abstractNote == undefined)\">\n                                <div class=\"row\">\n                                    <div class=\"col-md-12\">\n                                        <p class=\"text-muted text-center align-middle mb-1 font-italic\">\n                                            No info\n                                        </p>\n                                    </div>\n                                </div>\n                            </div>\n                            <div\n                                *ngIf=\"selectedItem && (selectedItem.data.abstractNote != '' && selectedItem.data.abstractNote != undefined)\">\n                                <p class=\"text-muted font-weight-bold\">\n                                    Abstract\n                                </p>\n                                <p class=\"font-weight-normal\">\n                                    {{selectedItem.data.abstractNote}}\n                                </p>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n            <div class=\"row\">\n                <div class=\"col-md-12 d-flex justify-content-end\">\n                    <button class=\"btn btn-secondary w-25\" [disabled]=\"!selectedItem\" (click)=\"addBibliographyItem(selectedItem)\">Save</button>\n                    <!-- <button class=\"btn btn-secondary\" (click)=\"addBibliography.hide()\">Close</button> -->\n                </div>\n            </div>\n        </div>\n    </ng-container>\n\n    <ng-container class=\"app-modal-footer\">\n    </ng-container>\n</app-modal>\n\n<ng-template #formPanel></ng-template>\n","/*\n   Copyright 2021-2022  Istituto di Linguistica Computazionale \"A. Zampolli\", Consiglio Nazionale delle Ricerche, Pisa, Italy.\n \nThis file is part of EpiLexo.\n\nEpiLexo is free software: you can redistribute it and/or modify it under the terms of the GNU General Public License as published by the Free Software Foundation, either version 3 of the License, or (at your option) any later version.\n\nEpiLexo is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for more details.\n\nYou should have received a copy of the GNU General Public License along with EpiLexo. If not, see <https://www.gnu.org/licenses/>.\n*/\n\nimport { Component, OnInit } from '@angular/core';\n\n@Component({\n  selector: 'app-search-page',\n  templateUrl: './search-page.component.html',\n  styleUrls: ['./search-page.component.scss']\n})\nexport class SearchPageComponent implements OnInit {\n\n  constructor() { }\n\n  ngOnInit(): void {\n  }\n\n}\n","\n\n<div class=\"container-fluid\">\n\t<div class=\"row justify-content-center\">\n\t\t<div class=\"col-md-3 d-flex\">\n      <br>\n      <app-data-search-form class=\"w-100\"></app-data-search-form>  \n    </div>\n    <div class=\"col-md-9\">\n\n    </div>\n\t</div>\n</div>","/*\n   Copyright 2021-2022  Istituto di Linguistica Computazionale \"A. Zampolli\", Consiglio Nazionale delle Ricerche, Pisa, Italy.\n \nThis file is part of EpiLexo.\n\nEpiLexo is free software: you can redistribute it and/or modify it under the terms of the GNU General Public License as published by the Free Software Foundation, either version 3 of the License, or (at your option) any later version.\n\nEpiLexo is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for more details.\n\nYou should have received a copy of the GNU General Public License along with EpiLexo. If not, see <https://www.gnu.org/licenses/>.\n*/\n\nimport { NgModule } from '@angular/core';\n\nimport { Routes, RouterModule } from '@angular/router';\nimport { AuthGuard } from './services/guard/auth.guard';\nimport { HomePageComponent } from './views/home-page/home-page.component';\nimport { LexiconPageComponent } from './views/lexicon-page/lexicon-page.component';\nimport { LoginPageComponent } from './views/login-page/login-page.component';\nimport { PageNotFoundComponent } from './views/page-not-found/page-not-found.component';\nimport { ProfilePageComponent } from './views/profile-page/profile-page.component';\nimport { SearchPageComponent } from './views/search-page/search-page.component';\n\nconst routes: Routes = [\n  {path: '', redirectTo: 'lexicon', pathMatch: 'full'},\n  /* {path: 'home', component: HomePageComponent}, */\n  /* {path: 'login', component: LoginPageComponent}, */\n  {path: 'lexicon', component: LexiconPageComponent, canActivate: [AuthGuard], data: {roles: ['USER']}},\n  {path: 'user', component: ProfilePageComponent, canActivate: [AuthGuard], data: {roles: ['ADMIN']}},\n  /* {path: 'search', component: SearchPageComponent}, */\n  /* {path: '**', component: PageNotFoundComponent} */\n  {path: '**', component: LexiconPageComponent}\n];\n\n@NgModule({\n  imports: [RouterModule.forRoot(routes)],\n  exports: [RouterModule]\n})\nexport class AppRoutingModule { }\n","/*\n   Copyright 2021-2022  Istituto di Linguistica Computazionale \"A. Zampolli\", Consiglio Nazionale delle Ricerche, Pisa, Italy.\n \nThis file is part of EpiLexo.\n\nEpiLexo is free software: you can redistribute it and/or modify it under the terms of the GNU General Public License as published by the Free Software Foundation, either version 3 of the License, or (at your option) any later version.\n\nEpiLexo is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for more details.\n\nYou should have received a copy of the GNU General Public License along with EpiLexo. If not, see <https://www.gnu.org/licenses/>.\n*/\n\nimport { HttpClient } from '@angular/common/http';\nimport { Injectable } from '@angular/core';\nimport { Observable } from 'rxjs';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class LilaService {\n\n  private baseUrl_document = \"/LexO-backend-itant_demo/service/fedex/search\"\n  private endpoint = 'https://lila-erc.eu/sparql/lila_knowledge_base/sparql'\n\n  constructor(private http: HttpClient) { }\n\n  queryCognate(label: string): Observable<any> {\n    return this.http.post(this.baseUrl_document+'?sparqlQuery='+encodeURIComponent(`\n    prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#>\n    prefix ontolex: <http://www.w3.org/ns/lemon/ontolex#>\n    prefix lila: <http://lila-erc.eu/ontologies/lila/>\n    prefix lb: <http://lila-erc.eu/data/id/lemma/LemmaBank>\n    SELECT ?lemma ?pos ?wr \n    WHERE {\n      ?lemma a lila:Lemma ;\n      ontolex:writtenRep ?wr ;\n      lila:hasPOS ?pos .\n      FILTER regex(?wr, \"^`+label+`\", \"i\") }\n    LIMIT 500`)+'&endpoint='+this.endpoint, null)\n  }\n\n  queryEtymon(label: string): Observable<any> {\n    return this.http.post(this.baseUrl_document+'?sparqlQuery='+encodeURIComponent(`\n    PREFIX lime: <http://www.w3.org/ns/lemon/lime#>\n    PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>\n    PREFIX lemonEty: <http://lari-datasets.ilc.cnr.it/lemonEty#>\n    PREFIX igvll: <http://lila-erc.eu/data/lexicalResources/IGVLL/>\n    SELECT  ?etymon ?language ?label ?comment WHERE\n    { ?etymon a lemonEty:Etymon ;\n      rdfs:label ?label ;\n      rdfs:comment ?comment ;\n      lime:language ?language .\n    FILTER regex(?label, \"^\\\\\\\\*`+label+`\", \"i\")}\n    LIMIT 500`)+'&endpoint='+this.endpoint, null)\n  }\n}\n","/*\n   Copyright 2021-2022  Istituto di Linguistica Computazionale \"A. Zampolli\", Consiglio Nazionale delle Ricerche, Pisa, Italy.\n \nThis file is part of EpiLexo.\n\nEpiLexo is free software: you can redistribute it and/or modify it under the terms of the GNU General Public License as published by the Free Software Foundation, either version 3 of the License, or (at your option) any later version.\n\nEpiLexo is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for more details.\n\nYou should have received a copy of the GNU General Public License along with EpiLexo. If not, see <https://www.gnu.org/licenses/>.\n*/\n\nimport { Component, Input, OnDestroy, OnInit, SimpleChanges } from '@angular/core';\nimport { Form, FormArray, FormBuilder, FormControl, FormGroup, Validators } from '@angular/forms';\nimport { forkJoin, Observable, Subject, Subscription } from 'rxjs';\nimport { debounceTime, pairwise, startWith, take, takeUntil } from 'rxjs/operators';\nimport { LexicalEntriesService } from 'src/app/services/lexical-entries/lexical-entries.service';\nimport { ToastrService } from 'ngx-toastr';\nimport { DocumentSystemService } from 'src/app/services/document-system/document-system.service';\nimport { AnnotatorService } from 'src/app/services/annotator/annotator.service';\n\n@Component({\n  selector: 'app-form-core-form',\n  templateUrl: './form-core-form.component.html',\n  styleUrls: ['./form-core-form.component.scss']\n})\nexport class FormCoreFormComponent implements OnInit, OnDestroy {\n\n  @Input() formData: any;\n\n  private subject_label: Subject<any> = new Subject();\n  private subject_ex_label: Subject<any> = new Subject();\n\n  switchInput = false;\n  subscription: Subscription;\n  object: any;\n  peopleLoading = false;\n  counter = 0;\n  typesData = [];\n  morphologyData = [];\n  valueTraits = [];\n  memoryTraits = [];\n  interval;\n\n  formCore = new FormGroup({\n    inheritance: new FormArray([this.createInheritance()]),\n    type: new FormControl(''),\n    confidence: new FormControl(null),\n    label: new FormArray([this.createLabel()]),\n    morphoTraits: new FormArray([this.createMorphoTraits()])\n  })\n\n  labelData = [];\n  memoryLabel = [];\n\n  ontolexRepresentations = [];\n  lexinfoRepresentations = [];\n  typeDesc = '';\n\n  staticOtherDef = [];\n  staticMorpho = [];\n\n  morphoTraits: FormArray;\n  inheritanceArray: FormArray;\n  labelArray: FormArray;\n\n  disableAddOther = false;\n  disableAddMorpho = false;\n\n  get_morpho_data_subscription: Subscription;\n  subject_label_subscription: Subscription;\n  subject_ex_label_subscription: Subscription;\n  get_form_type_subscription: Subscription;\n\n  destroy$: Subject<boolean> = new Subject();\n\n  constructor(private lexicalService: LexicalEntriesService, \n              private formBuilder: FormBuilder, \n              private toastr: ToastrService,\n              private documentService : DocumentSystemService,\n              private annotatorService : AnnotatorService) { }\n\n  ngOnInit() {\n    this.get_morpho_data_subscription = this.lexicalService.getMorphologyData().subscribe(\n      data => {\n        this.morphologyData = data;\n        this.morphologyData = this.morphologyData.filter(x => {\n          if (x.propertyId != 'partOfSpeech') {\n            return true;\n          } else {\n            return false\n          }\n        })\n      }\n    )\n\n    this.formCore = this.formBuilder.group({\n      inheritance: this.formBuilder.array([]),\n      type: '',\n      confidence: null,\n      label: this.formBuilder.array([]),\n      morphoTraits: this.formBuilder.array([]),\n    })\n\n    this.onChanges();\n\n    this.subject_label_subscription = this.subject_label.pipe(debounceTime(1000), takeUntil(this.destroy$)).subscribe(\n      data => {\n        this.onChangeLabel(data)\n      }\n    )\n\n    this.subject_ex_label_subscription = this.subject_ex_label.pipe(debounceTime(1000), takeUntil(this.destroy$)).subscribe(\n      data => {\n\n        this.onChangeExistingLabelValue(data['evt'], data['i']);\n      }\n    )\n\n    this.get_form_type_subscription = this.lexicalService.getFormTypes().subscribe(\n      data => {\n        this.typesData = data;\n        //console.log(this.typesData)\n      },\n      error => {\n        //console.log(error)\n      }\n    )\n\n  }\n\n\n  ngOnChanges(changes: SimpleChanges) {\n    setTimeout(() => {\n      if (this.object != changes.formData.currentValue) {\n        this.morphoTraits = this.formCore.get('morphoTraits') as FormArray;\n        this.morphoTraits.clear();\n\n        this.inheritanceArray = this.formCore.get('inheritance') as FormArray;\n        this.inheritanceArray.clear();\n\n        this.labelArray = this.formCore.get('label') as FormArray;\n        this.labelArray.clear();\n\n        this.staticMorpho = [];\n        this.staticOtherDef = [];\n      }\n      this.object = changes.formData.currentValue;\n      if (this.object != null) {\n\n        this.valueTraits = [];\n        this.memoryTraits = [];\n        this.memoryLabel = [];\n        this.labelData = [];\n\n        if (this.object.inheritedMorphology != undefined) {\n          for (var i = 0; i < this.object.inheritedMorphology.length; i++) {\n            const trait = this.object.inheritedMorphology[i]['trait'];\n            const value = this.object.inheritedMorphology[i]['value'];\n            this.addInheritance(trait, value.split('#')[1]);\n          }\n        }\n\n        \n\n        if (this.object.confidence == 0) {\n          this.formCore.get('confidence').setValue(true, { emitEvent: false });\n        } else {\n          this.formCore.get('confidence').setValue(false, { emitEvent: false });\n        }\n        this.formCore.get('type').setValue(this.object.type, { emitEvent: false });\n\n        for (var i = 0; i < this.object.label.length; i++) {\n\n          const trait = this.object.label[i]['propertyID'];\n          const value = this.object.label[i]['propertyValue'];\n\n          this.labelData.push(trait);\n\n          if (value != '') {\n            this.addLabel(trait, value);\n            this.memoryLabel.push(trait);\n\n           \n            this.staticOtherDef.push({ trait: trait, value: value })\n          }\n\n        }\n\n\n\n        setTimeout(async () => {\n          this.morphologyData = await this.lexicalService.getMorphologyData().toPromise();\n          for (var i = 0; i < this.object.morphology.length; i++) {\n            const trait = this.object.morphology[i]['trait'];\n            const value = this.object.morphology[i]['value'];\n\n            let traitDescription = '';\n            this.morphologyData.filter(x => {\n              if (x.propertyId == trait && trait != 'http://www.lexinfo.net/ontology/3.0/lexinfo#partOfSpeech') {\n                x.propertyValues.filter(y => {\n                  if (y.valueId == value) {\n                    traitDescription = y.valueDescription;\n                    return true;\n                  } else {\n                    return false;\n                  }\n                })\n                return true;\n              } else {\n                return false;\n              }\n            })\n            this.addMorphoTraits(trait, value, traitDescription);\n            this.onChangeTrait(trait, i);\n\n            this.staticMorpho.push({ trait: trait, value: value })\n          }\n        }, 1);\n\n\n        setTimeout(async () => {\n          this.ontolexRepresentations = await this.lexicalService.getOntolexRepresentations().toPromise();\n          this.lexinfoRepresentations = await this.lexicalService.getLexinfoRepresentations().toPromise();\n          this.typesData = await this.lexicalService.getFormTypes().toPromise();\n          let type = this.formCore.get('type').value;\n          this.typesData.forEach(el => {\n            if (el.valueId.split('#')[1] == type) {\n\n              this.typeDesc = el.valueDescription;\n            }\n          })\n\n\n\n        }, 1);\n\n        let formId = this.object.form;\n        this.documentService.searchAttestations(formId).pipe(takeUntil(this.destroy$)).subscribe(\n          data=>{\n            console.log(data);\n            if(data!= undefined){\n              let rows = data.rows;\n              if(data.rows.length > 0){\n\n                let ids = new Set();\n                let tokensId = new Set();\n                rows.forEach(element => {\n                  let path = element.nodePath.split('/');\n                  let tokenId = null;\n                  element.tokens.forEach(token => {\n                    if(token.id != undefined) {\n                      tokenId = token.id;\n                      return;\n                    }\n                  });\n                  path = path[path.length-1];\n                  ids.add(JSON.stringify({nodeId: element.nodeId}));\n                  tokensId.add(JSON.stringify({tokenId : tokenId, nodePath: path}))\n                });\n\n                console.log(ids, tokensId);\n                if(ids.size > 0){\n                  this.getAnnotations(ids, tokensId);\n                }\n              }else{\n                this.lexicalService.triggerAttestationPanel(false);\n                this.lexicalService.sendToAttestationPanel(null);\n              }\n            }\n          },error=>{\n            console.log(error)\n          }\n        );\n      }\n    }, 1)\n\n  }\n\n  getAnnotations(setIds, tokensId){\n    console.log(setIds);\n    let annotation_array = [];\n\n    const requests : Observable<any>[] = [];\n    setIds.forEach(element => {\n      let elem = JSON.parse(element);\n      requests.push(this.annotatorService.getAnnotation(elem.nodeId));\n    });\n\n    forkJoin(requests).pipe(takeUntil(this.destroy$)).subscribe(\n      (data : any)=>{\n        console.log(data);\n\n        if(data!=undefined){\n          let filter_anno = [];\n          \n          data.forEach(element => {\n            if(element.annotations != undefined){\n              let annotations = element.annotations;\n\n              annotations.forEach(anno => {\n                if(anno.layer == 'attestation'){\n                  if(anno.value == this.object.form){\n                    if(anno.attributes.bibliography == undefined) anno.attributes['bibliography'] = [];\n                    tokensId.forEach(element => {\n                      let elem = JSON.parse(element);\n                      if(elem.tokenId == anno.attributes.node_id) anno.attributes['fileId'] = elem.nodePath;\n                      //console.log(element, anno)\n                    });\n                    filter_anno.push(anno)\n                  }\n                  \n                }\n              });\n            }\n          });\n\n          console.log(filter_anno);\n          this.lexicalService.triggerAttestationPanel(true);\n          this.lexicalService.sendToAttestationPanel(filter_anno);\n        }\n      },error=> {\n        console.log(error)\n      }\n    )\n    \n  }\n\n  onChanges(): void {\n\n    this.formCore.get('confidence').valueChanges.pipe(debounceTime(100), startWith(this.formCore.get('confidence').value), pairwise(), takeUntil(this.destroy$)).subscribe(([prev, next]: [any, any]) => {\n      let confidence_value = null;\n      console.log(confidence_value);\n      let formId = this.object.form;\n\n      this.formCore.get('confidence').setValue(next, { emitEvent: false });\n\n      let oldValue = prev ? 0 : 1;\n      let newValue = next ? 0 : 1;\n      let parameters = {\n        /* type: \"confidence\", */\n        relation: 'http://www.lexinfo.net/ontology/3.0/lexinfo#confidence',\n        value: newValue\n      };\n\n\n      if (prev !== null) parameters['currentValue'] = oldValue;\n\n      this.lexicalService.updateForm(formId, parameters).pipe(takeUntil(this.destroy$)).subscribe(\n        data => { },\n        error => {\n          if (error.status == 200) this.toastr.success('Confidence updated', '', { timeOut: 5000 })\n          if (error.status != 200) this.toastr.error(error.error, '', { timeOut: 5000 })\n        }\n      )\n\n    });\n  }\n\n\n\n  onChangeType(evt) {\n    this.lexicalService.spinnerAction('on');\n    const newType = evt.target.value;\n    const formId = this.object.form\n    const parameters = {relation: \"http://www.w3.org/1999/02/22-rdf-syntax-ns#type\", value: newType }\n    this.lexicalService.updateForm(formId, parameters).pipe(takeUntil(this.destroy$)).subscribe(\n      data => {\n        console.log(data)\n        this.lexicalService.spinnerAction('off');\n        data['request'] = 5;\n        data['new_type'] = newType;\n        this.lexicalService.refreshAfterEdit(data);\n        this.lexicalService.updateCoreCard(this.object)\n\n        setTimeout(() => {\n          let type = this.formCore.get('type').value;\n          this.typesData.forEach(el => {\n            if (el.valueId == type) {\n\n              this.typeDesc = el.valueDescription;\n            }\n          })\n          //@ts-ignore\n          $('.type-tooltip').tooltip({\n            trigger: 'hover'\n          });\n\n\n        }, 1000);\n      }, error => {\n        console.log(error);\n        const data = this.object;\n        data['request'] = 5;\n        data['new_type'] = newType;\n        this.lexicalService.refreshAfterEdit(data);\n        this.lexicalService.updateCoreCard({ lastUpdate: error.error.text })\n        this.lexicalService.spinnerAction('off');\n\n        if (typeof (error.error) != 'object') {\n          this.toastr.error(error.error, 'Error', {\n            timeOut: 5000,\n          });\n        } else {\n          this.toastr.success('Type changed', '', {\n            timeOut: 5000,\n          });\n        }\n\n        setTimeout(() => {\n          let type = this.formCore.get('type').value;\n          this.typesData.forEach(el => {\n            if (el.valueId == type) {\n\n              this.typeDesc = el.valueDescription;\n            }\n          })\n          //@ts-ignore\n          $('.type-tooltip').tooltip({\n            trigger: 'hover'\n          });\n\n\n        }, 1000);\n      }\n    )\n  }\n\n  debounceKeyup(evt, i) {\n    this.lexicalService.spinnerAction('on');\n    this.subject_label.next({ evt, i })\n  }\n\n  debounceKeyupExisting(evt, i) {\n    this.lexicalService.spinnerAction('on');\n    this.subject_ex_label.next({ evt, i })\n  }\n\n  onChangeExistingValue(evt, i) {\n    this.lexicalService.spinnerAction('on');\n    this.morphoTraits = this.formCore.get('morphoTraits') as FormArray;\n    const trait = this.morphoTraits.at(i).get('trait').value;\n    const oldValue = this.morphoTraits.at(i).get('value').value;\n    const newValue = evt.target.value;\n\n    this.morphoTraits.at(i).get('value').setValue(newValue, { emitEvent: false });\n\n    if (newValue != '') {\n      let parameters = {\n        type: \"morphology\",\n        relation: trait,\n        value: newValue,\n        currentValue: oldValue\n      }\n\n      this.staticMorpho[i] = { trait: trait, value: newValue }\n      let formId = this.object.form;\n      console.log(parameters)\n\n      this.lexicalService.updateLinguisticRelation(formId, parameters).pipe(takeUntil(this.destroy$)).subscribe(\n        data => {\n          console.log(data)\n          //this.lexicalService.refreshAfterEdit(data);\n          this.lexicalService.updateCoreCard(data)\n          this.lexicalService.spinnerAction('off');\n        },\n        error => {\n          console.log(error)\n          //this.lexicalService.refreshAfterEdit({ label: this.object.label });\n          this.lexicalService.updateCoreCard({ lastUpdate: error.error.text })\n          this.lexicalService.spinnerAction('off');\n          if (error.status != 200) {\n            this.toastr.error(error.error, 'Error', {\n              timeOut: 5000,\n            });\n          } else {\n            this.toastr.success('Morphologic trait changed', '', {\n              timeOut: 5000,\n            });\n          }\n        }\n      )\n\n    } else {\n      this.lexicalService.spinnerAction('off');\n    }\n  }\n\n  onChangeValue(i) {\n    this.lexicalService.spinnerAction('on');\n    this.morphoTraits = this.formCore.get('morphoTraits') as FormArray;\n    const trait = this.morphoTraits.at(i).get('trait').value;\n    const value = this.morphoTraits.at(i).get('value').value;\n    if (trait != '' && value != '') {\n\n      let parameters = {\n        type: \"morphology\",\n        relation: trait,\n        value: value\n      }\n      let formId = this.object.form;\n\n      let traitDescription = '';\n      this.morphologyData.filter(x => {\n        if (x.propertyId == trait && trait != 'partOfSpeech') {\n          x.propertyValues.filter(y => {\n            if (y.valueId == value) {\n              traitDescription = y.valueDescription;\n              return true;\n            } else {\n              return false;\n            }\n          })\n          return true;\n        } else {\n          return false;\n        }\n      })\n      console.log(parameters);\n      this.morphoTraits.at(i).get('description').setValue(traitDescription, { emitEvent: false });\n\n      this.staticMorpho.push({ trait: trait, value: value })\n\n      this.lexicalService.updateLinguisticRelation(formId, parameters).pipe(takeUntil(this.destroy$)).subscribe(\n        data => {\n          console.log(data)\n          this.lexicalService.spinnerAction('off');\n          this.lexicalService.updateCoreCard(this.object)\n          this.disableAddMorpho = false;\n          setTimeout(() => {\n\n            //@ts-ignore\n            $('.trait-tooltip').tooltip({\n              trigger: 'hover'\n            });\n\n\n          }, 1000);\n        },\n        error => {\n          console.log(error)\n          this.lexicalService.updateCoreCard({ lastUpdate: error.error.text })\n          this.lexicalService.spinnerAction('off');\n          this.disableAddMorpho = false;\n          if (typeof (error.error) != 'object') {\n            this.toastr.error(error.error, 'Error', {\n              timeOut: 5000,\n            });\n          } else {\n            this.toastr.success('Morphotrait changed correctly', 'Ok', {\n              timeOut: 5000,\n            });\n          }\n\n          setTimeout(() => {\n\n            //@ts-ignore\n            $('.trait-tooltip').tooltip({\n              trigger: 'hover'\n            });\n\n\n          }, 1000);\n        }\n      )\n    } else {\n      this.lexicalService.spinnerAction('off');\n    }\n  }\n\n  onChangeTrait(evt, i) {\n\n    if (evt.target != undefined) {\n      setTimeout(() => {\n        this.morphoTraits = this.formCore.get('morphoTraits') as FormArray;\n        this.morphoTraits.at(i).patchValue({ trait: evt.target.value, value: \"\" });\n        //console.log(evt.target.value)\n        if (evt.target.value != '') {\n          var arrayValues = this.morphologyData.filter(x => {\n            return x['propertyId'] == evt.target.value;\n          })['0']['propertyValues'];\n          this.valueTraits[i] = arrayValues;\n          this.memoryTraits[i] = evt.target.value;\n        } else {\n          let arrayValues = [];\n          this.valueTraits[i] = arrayValues\n          this.memoryTraits.splice(i, 1)\n        }\n\n\n\n      }, 500);\n    } else {\n\n\n      try {\n        var arrayValues = this.morphologyData.filter(x => {\n          return x['propertyId'] == evt;\n        })['0']['propertyValues'];\n        this.valueTraits[i] = arrayValues;\n        this.memoryTraits.push(evt);\n        //console.log(\"CIAO\")\n\n\n      } catch (e) {\n        console.log(e)\n      }\n\n\n\n    }\n  }\n\n  onChangeLabelTrait(evt, i) {\n\n    setTimeout(() => {\n      this.labelArray = this.formCore.get('label') as FormArray;\n      this.labelArray.at(i).patchValue({ propertyID: evt.target.value, propertyValue: \"\" });\n      //console.log(this.labelArray)\n      if (evt.target.value != '') {\n\n        this.memoryLabel[i] = evt.target.value;\n      } else {\n\n        this.memoryLabel.splice(i, 1)\n      }\n\n\n\n    }, 250);\n  }\n\n  onChangeExistingLabelValue(evt, i) {\n    this.lexicalService.spinnerAction('on');\n    this.labelArray = this.formCore.get('label') as FormArray;\n    let trait = this.labelArray.at(i).get('propertyID').value;\n    const newValue = evt.target.value;\n    this.ontolexRepresentations.forEach(\n      element=> {\n        if(element.valueId.split('#')[1] == trait){\n          trait = element.valueId;\n        }\n      }\n    )\n\n    this.lexinfoRepresentations.forEach(\n      element=> {\n        if(element.valueId.split('#')[1] == trait){\n          trait = element.valueId;\n        }\n      }\n    )\n    //console.log(this.object)\n\n    if (newValue != '') {\n      const parameters = { relation: trait, value: newValue }\n\n      this.staticOtherDef[i] = { trait: trait.split('#')[1], value: newValue }\n      let formId = this.object.form;\n\n\n\n      this.lexicalService.updateForm(formId, parameters).pipe(takeUntil(this.destroy$)).subscribe(\n        data => {\n          console.log(data)\n          this.lexicalService.spinnerAction('off');\n          //this.lexicalService.refreshLexEntryTree();\n          this.lexicalService.updateCoreCard(data)\n        }, error => {\n          console.log(error);\n          //this.lexicalService.refreshLexEntryTree();\n\n          this.lexicalService.updateCoreCard({ lastUpdate: error.error.text })\n          this.lexicalService.spinnerAction('off');\n\n          if (typeof (error.error) != 'object') {\n            this.toastr.error(error.error, 'Error', {\n              timeOut: 5000,\n            });\n          } else {\n            this.toastr.success('Label changed', '', {\n              timeOut: 5000,\n            });\n          }\n        }\n      )\n\n      if (trait.split('#')[1] == 'writtenRep') {\n        const data = this.object;\n        data['whatToSearch'] = 'form';\n        data['new_label'] = newValue;\n        data['request'] = 3;\n        this.lexicalService.refreshAfterEdit(data);\n      }\n\n    } else {\n      this.lexicalService.spinnerAction('off');\n      this.staticOtherDef[i] = { trait: trait, value: \"\" }\n    }\n  }\n\n  onChangeLabel(object) {\n\n    this.labelArray = this.formCore.get('label') as FormArray;\n    let trait = this.labelArray.at(object.i).get('propertyID').value;\n    this.ontolexRepresentations.forEach(\n      element=> {\n        if(element.valueId.split('#')[1] == trait){\n          trait = element.valueId;\n        }\n      }\n    )\n\n    this.lexinfoRepresentations.forEach(\n      element=> {\n        if(element.valueId.split('#')[1] == trait){\n          trait = element.valueId;\n        }\n      }\n    )\n\n    const newValue = object.evt.target.value;\n    const formId = this.object.form;\n    const parameters = { relation: trait, value: newValue }\n    //console.log(this.object)\n    this.staticOtherDef.push({ trait: trait.split('#')[1], value: newValue })\n\n    if (trait != undefined && newValue != '') {\n      this.lexicalService.updateForm(formId, parameters).pipe(takeUntil(this.destroy$)).subscribe(\n        data => {\n          console.log(data)\n          this.lexicalService.spinnerAction('off');\n          this.lexicalService.refreshAfterEdit(data);\n          this.lexicalService.updateCoreCard(data)\n          this.disableAddOther = false;\n        }, error => {\n          console.log(error);\n          this.disableAddOther = false;\n\n          this.lexicalService.updateCoreCard({ lastUpdate: error.error.text })\n          this.lexicalService.spinnerAction('off');\n\n          if (error.status == 200) {\n            this.toastr.success('Label updated', 'Success', { timeOut: 5000 })\n          } else {\n            this.toastr.error(error.message, 'Error', { timeOut: 5000 })\n          }\n        }\n      )\n    } else {\n      this.lexicalService.spinnerAction('off');\n    }\n  }\n\n  createMorphoTraits(t?, v?, d?): FormGroup {\n    if (t != undefined) {\n      return this.formBuilder.group({\n        trait: new FormControl(t, [Validators.required, Validators.minLength(0)]),\n        value: new FormControl(v, [Validators.required, Validators.minLength(0)]),\n        description: new FormControl(d, [Validators.required, Validators.minLength(0)])\n      })\n    } else {\n      return this.formBuilder.group({\n        trait: new FormControl('', [Validators.required, Validators.minLength(0)]),\n        value: new FormControl('', [Validators.required, Validators.minLength(0)]),\n        description: new FormControl('', [Validators.required, Validators.minLength(0)])\n      })\n    }\n  }\n\n  createInheritance(t?, v?): FormGroup {\n    return this.formBuilder.group({\n      trait: t,\n      value: v\n    })\n  }\n\n  createLabel(t?, v?): FormGroup {\n    if (t != undefined) {\n      return this.formBuilder.group({\n        propertyID: new FormControl(t, [Validators.required, Validators.minLength(0)]),\n        propertyValue: new FormControl(v, [Validators.required, Validators.minLength(0)])\n      })\n    } else {\n      return this.formBuilder.group({\n        propertyID: new FormControl('', [Validators.required, Validators.minLength(0)]),\n        propertyValue: new FormControl('', [Validators.required, Validators.minLength(0)])\n      })\n    }\n\n  }\n\n  addLabel(t?, v?) {\n    this.labelArray = this.formCore.get('label') as FormArray;\n    if (t != undefined) {\n      this.labelArray.push(this.createLabel(t, v));\n    } else {\n      this.disableAddOther = true;\n      this.labelArray.push(this.createLabel());\n    }\n\n  }\n\n  addInheritance(t?, v?) {\n    this.inheritanceArray = this.formCore.get('inheritance') as FormArray;\n    this.inheritanceArray.push(this.createInheritance(t, v));\n  }\n\n  addMorphoTraits(t?, v?, d?) {\n    this.morphoTraits = this.formCore.get('morphoTraits') as FormArray;\n    if (t != undefined) {\n      this.morphoTraits.push(this.createMorphoTraits(t, v, d));\n    } else {\n      this.morphoTraits.push(this.createMorphoTraits());\n      this.disableAddMorpho = true;\n    }\n  }\n\n  removeElement(index) {\n    this.morphoTraits = this.formCore.get('morphoTraits') as FormArray;\n\n    const trait = this.morphoTraits.at(index).get('trait').value;\n    const value = this.morphoTraits.at(index).get('value').value;\n\n    //console.log(trait + value)\n\n    if (trait != '') {\n\n      let formId = this.object.form;\n\n      let parameters = {\n        type: 'morphology',\n        relation: trait,\n        value: value\n      }\n\n      this.lexicalService.deleteLinguisticRelation(formId, parameters).pipe(takeUntil(this.destroy$)).subscribe(\n        data => {\n          console.log(data)\n          this.toastr.success('Element removed', '', {\n            timeOut: 5000,\n          });\n          this.lexicalService.updateCoreCard(this.object)\n        }, error => {\n          console.log(error)\n          if (error.status != 200) {\n            this.toastr.error(error.error, 'Error', {\n              timeOut: 5000,\n            });\n          }\n        }\n      )\n    } \n    this.disableAddMorpho = false;\n    this.staticMorpho.splice(index, 1);\n    this.morphoTraits.removeAt(index);\n    this.memoryTraits.splice(index, 1);\n    this.valueTraits.splice(index, 1)\n  }\n\n  removeLabel(index) {\n    this.labelArray = this.formCore.get('label') as FormArray;\n\n\n    const trait = this.labelArray.at(index).get('propertyID').value;\n    const value = this.labelArray.at(index).get('propertyValue').value;\n\n    //console.log(trait + value)\n\n    if (trait != '') {\n\n      let formId = this.object.form;\n\n      let parameters = {\n        type: 'morphology',\n        relation: trait,\n        value: value\n      }\n\n      this.lexicalService.deleteLinguisticRelation(formId, parameters).pipe(takeUntil(this.destroy$)).subscribe(\n        data => {\n          console.log(data)\n\n          this.toastr.success('Label removed', 'Ok', { timeOut: 5000 })\n          this.lexicalService.updateCoreCard(this.object)\n        }, error => {\n          console.log(error)\n          if (error.status != 200) {\n            this.toastr.error(error.message, 'Error', { timeOut: 5000 })\n          }\n        }\n      )\n    } else {\n      this.disableAddOther = false;\n\n    }\n    this.staticOtherDef.splice(index, 1)\n    this.labelArray.removeAt(index);\n  }\n\n  ngOnDestroy(): void {\n    this.get_morpho_data_subscription.unsubscribe();\n    this.subject_label_subscription.unsubscribe();\n    this.subject_ex_label_subscription.unsubscribe();\n    this.get_form_type_subscription.unsubscribe();\n\n    this.destroy$.next(true);\n    this.destroy$.complete();\n  }\n\n}\n","\n\n<form [formGroup]=\"formCore\" *ngIf=\"object != null\">\n    <div class=\"form-group row ml-2 mt-3 mr-2\">\n        <div class=\"input-group col-lg-12\">\n            <div class=\"card\">\n                <span class=\"text-id\"><b>INHERITANCE</b></span>\n                <div class=\"card-body\">\n                    <div class=\"d-flex my-2\" formArrayName=\"inheritance\"\n                        *ngFor=\"let inher of formCore.get('inheritance')['controls']; let i = index\">\n                        <div class=\"col-lg-3\" [formGroupName]=\"i\" *ngIf=\"inher.value['trait'] == 'partOfSpeech'\">\n                            <span class=\"col-form-label\">{{inher.value['trait']}}</span>\n                        </div>\n                        <div class=\"col-lg-3\" [formGroupName]=\"i\" *ngIf=\"inher.value['trait'] != 'partOfSpeech'\">\n                            <span class=\"col-form-label\">{{inher.value['trait'].split('#')[1]}}</span>\n                        </div>\n                        <div class=\"input-group col-lg-7 col-md-12\" [formGroupName]=\"i\">\n\n                            <input formControlName=\"value\" name=\"value\" type=\"text\" class=\"form-control\" placeholder=\"\"\n                                [value]=\"inher.value['value'].split('#')[1]\" readonly>\n                        </div>\n                    </div>\n\n                </div>\n            </div>\n        </div>\n    </div>\n    <div class=\"form-group row ml-2 mt-3 mr-2\">\n        <label for=\"inputType\" class=\"col-lg-3 col-form-label\">Type:</label>\n        <div class=\"col-lg-7 input-group\">\n            <select  class=\"form-control\" (change)=\"onChangeType($event)\">\n                <option *ngFor=\"let type of typesData\" [selected]=\"object.type === type['valueId'].split('#')[1]\" [value]=\"type['valueId']\">{{type['valueLabel'] }}\n                </option>\n            </select>\n            <div class=\"input-group-append ml-2\">\n                 <button class=\"btn btn-secondary type-tooltip\" container=\"body\" placement=\"right\" [ngbTooltip]=\"typeDesc\" \n                    style=\"font-size: 12px; border-radius: .25rem;\"><i class=\"fas fa-question\"></i></button>\n            </div>\n        </div>\n    </div>\n    \n    <div class=\"form-group row ml-2 mt-3 mr-2\" *ngIf=\"{confidence : formCore.get('confidence').value >= 0}; let variable\">\n        <div class=\"col-lg-3\">\n            <span class=\"col-form-label\">Uncertain</span>\n        </div>\n        <div class=\"col-lg-3 input-group\">\n            <input formControlName=\"confidence\" name=\"confidence\" type=\"checkbox\" >\n            <!-- <input *ngIf=\"variable.confidence\" id=\"attributes\"  step=\"0.1\" formControlName=\"confidence\" name=\"confidence\" type=\"number\" min=\"0\" max=\"1\" class=\"form-control\" placeholder=\"No info\" [value]=\"formCore.get('confidence').value\">\n            <button type=\"button\" class=\"btn btn-secondary btn-sm ml-2\" *ngIf=\"!variable.confidence\" (click)=\"variable.confidence = !variable.confidence\"><i class=\"fas fa-plus\"></i></button>\n            <button type=\"button\" class=\"btn btn-secondary btn-sm ml-2\" *ngIf=\"variable.confidence\" (click)=\"variable.confidence = !variable.confidence; applyUncertain()\"><i class=\"fas fa-minus\"></i></button> -->\n        </div>\n    </div>\n\n    <div class=\"form-group row ml-2 mt-3 mr-2\">\n        <div class=\"input-group col-lg-12\">\n            <div class=\"card\">\n                <span class=\"text-id\"><b>OTHER REPRESENTATION</b></span>\n                <a class=\"pointer\" (click)=\"addLabel()\" [ngClass]=\"{no_pointer: disableAddOther}\"><span class=\"collapse-icon\"><i\n                            class=\"fa fa-plus-square\"></i></span></a>\n                <div class=\"card-body\">\n                    <div class=\"d-flex my-3\" *ngFor=\"let def of staticOtherDef; let i = index\">\n                        <div class=\"col-md-4\">\n                            <label class=\"col-form-label\">{{def['trait']}}</label>\n                        </div>\n                        <div class=\"input-group col-md-8\">\n                            <input type=\"text\" class=\"form-control\"\n                                placeholder=\"\" (keyup)=\"debounceKeyupExisting($event, i)\" [value]=\"def['value']\">\n                            <div *ngIf=\"def['trait'] != 'writtenRep'\" (click)=\"removeLabel(i)\" class=\"input-group-append ml-2\"> <button\n                                    class=\"btn btn-danger\" type=\"button\"\n                                    style=\"font-size: 12px; border-radius: .25rem;\"><i\n                                        class=\"fa fa-trash-alt\"></i></button>\n                            </div>\n                            <div class=\"invalid-feedback\" *ngIf=\"staticOtherDef[i]['value'] == ''\" style=\"display: block;\">\n                                Please, don't leave this field blank\n                            </div>\n\n                        </div>\n                    </div>\n                    <div class=\"d-flex my-2\" formArrayName=\"label\"\n                        *ngFor=\"let l of formCore.get('label')['controls']; let i = index\">\n                        <div class=\"col-md-4\" [formGroupName]=\"i\" *ngIf=\"i + 1 > staticOtherDef.length\">\n                            <select class=\"form-control selectTrait\" formControlName=\"propertyID\" name=\"propertyID\"\n                                style=\"font-size: 12px;\" (change)=\"onChangeLabelTrait($event, i)\">\n                                <option value=\"\">Select a trait...</option>\n                                <option *ngFor=\"let ld of labelData\" [selected]=\"l.value['propertyID'] === ld\"\n                                    [disabled]=\"memoryLabel.indexOf(ld) > -1\" >{{ld}}</option>\n                            </select>\n                            <div class=\"invalid-feedback\" *ngIf=\"l.get('propertyID').invalid\" style=\"display: block;\">\n                                Please, don't leave this field blank\n                            </div>\n                        </div>\n                        <div class=\"input-group col-md-8\" [formGroupName]=\"i\" *ngIf=\"i + 1 > staticOtherDef.length\">\n                            <input formControlName=\"propertyValue\" name=\"propertyValue\" type=\"text\" class=\"form-control\"\n                                placeholder=\"\" (keyup)=\"debounceKeyup($event, i)\">\n                            <div (click)=\"removeLabel(i)\" class=\"input-group-append ml-2\"> <button\n                                    class=\"btn btn-danger\" type=\"button\"\n                                    style=\"font-size: 12px; border-radius: .25rem;\"><i\n                                        class=\"fa fa-trash-alt\"></i></button>\n                            </div>\n                            <div class=\"invalid-feedback\" *ngIf=\"l.get('propertyValue').invalid\" style=\"display: block;\">\n                                Please, don't leave this field blank\n                            </div>\n                        </div>\n                    </div>\n\n                </div>\n            </div>\n        </div>\n    </div>\n\n\n\n    <div class=\"form-group row ml-2 mt-3 mr-2\">\n        <div class=\"input-group col-lg-12\">\n            <div class=\"card\">\n                <span class=\"text-id\"><b>MORPHOLOGY</b></span>\n                <a class=\"pointer\" (click)=\"addMorphoTraits()\" [ngClass]=\"{no_pointer: disableAddMorpho}\"><span class=\"collapse-icon\"><i\n                            class=\"fa fa-plus-square\"></i></span></a>\n                <div class=\"card-body\">\n\n                    <div class=\"d-flex my-3\" *ngFor=\"let stat of staticMorpho; let i = index\">\n                        \n                        <div class=\"col-md-4\"> <!-- *ngIf=\"stat['trait'] != 'partOfSpeech'\" -->\n                            <label class=\"col-form-label\">{{stat['trait'].split('#')[1]}}</label>\n                        </div>\n                        <div class=\"input-group col-md-8\">\n                            <select class=\"form-control selectTrait\" style=\"font-size:12px;\"\n                                (change)=\"onChangeExistingValue($event, i)\">\n                                <option *ngFor=\"let item of valueTraits[i];\"\n                                    [selected]=\"stat['value'] === item.valueId\" [value]=\"item.valueId\">{{item.valueLabel}}</option>\n                            </select>\n                           \n                            <div class=\"input-group-append ml-2\">\n                                <button *ngIf=\"formCore['controls'].morphoTraits?.value[i] != null\" class=\"btn btn-secondary trait-tooltip\" type=\"button\" container=\"body\" placement=\"right\" [ngbTooltip]=\"formCore.get('morphoTraits').at(i).get('description').value\" \n                                    style=\"font-size: 12px; border-radius: .25rem;\"><i class=\"fas fa-question\"></i></button>\n                            </div>\n                            <div (click)=\"removeElement(i)\" class=\"input-group-append ml-2\"> <button\n                                    class=\"btn btn-danger\" type=\"button\"\n                                    style=\"font-size: 12px; border-radius: .25rem;\"><i\n                                        class=\"fa fa-trash-alt\"></i></button>\n                            </div>\n                        </div>\n                    </div>\n                    \n                    <div>\n\n                    </div>\n                    \n                    <div class=\"d-flex\" formArrayName=\"morphoTraits\"\n                        *ngFor=\"let morpho of formCore.get('morphoTraits')['controls']; let i = index\">\n                        <div class=\"col-md-4 my-2\" [formGroupName]=\"i\" *ngIf=\"i + 1 > staticMorpho.length\">\n                            <select class=\"form-control selectTrait\" formControlName=\"trait\" name=\"trait\"\n                                style=\"font-size: 12px;\" (change)=\"onChangeTrait($event, i)\">\n                                <option value=\"\">Select a trait...</option>\n                                <option *ngFor=\"let mt of morphologyData\"\n                                    [selected]=\"morpho.value['trait'] === mt.propertyId\"\n                                    [disabled]=\"memoryTraits.indexOf(mt.propertyId) > -1 || mt.propertyId == 'http://www.lexinfo.net/ontology/3.0/lexinfo#partOfSpeech'\" [value]=\"mt.propertyId\">{{mt.propertyLabel}}</option>\n                            </select>\n                            <div class=\"invalid-feedback\" *ngIf=\"morpho.get('trait').invalid\" style=\"display: block;\">\n                                Please, don't leave this field blank\n                            </div>\n                        </div>\n                        <div class=\"input-group col-md-8 my-2\" [formGroupName]=\"i\" *ngIf=\"i + 1> staticMorpho.length\">\n                            <select class=\"form-control selectTrait\" formControlName=\"value\" name=\"value\"\n                                style=\"font-size:12px;\" (change)=\"onChangeValue(i)\">\n                                <option value=\"\">Select a value...</option>\n                                <option *ngFor=\"let item of valueTraits[i];\" [attr.data-index]=\"i\"\n                                    [selected]=\"morpho.value['value'] === item.valueId\" [value]=\"item.valueId\">{{item.valueLabel}}</option>\n                            </select>\n\n                            <div (click)=\"removeElement(i)\" class=\"input-group-append ml-2\"> <button\n                                    class=\"btn btn-danger\" type=\"button\"\n                                    style=\"font-size: 12px; border-radius: .25rem;\"><i\n                                        class=\"fa fa-trash-alt\"></i></button>\n                            </div>\n                            <div class=\"invalid-feedback\" *ngIf=\"morpho.get('value').invalid\" style=\"display: block;\">\n                                Please, don't leave this field blank\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n</form>","/*\n   Copyright 2021-2022  Istituto di Linguistica Computazionale \"A. Zampolli\", Consiglio Nazionale delle Ricerche, Pisa, Italy.\n \nThis file is part of EpiLexo.\n\nEpiLexo is free software: you can redistribute it and/or modify it under the terms of the GNU General Public License as published by the Free Software Foundation, either version 3 of the License, or (at your option) any later version.\n\nEpiLexo is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for more details.\n\nYou should have received a copy of the GNU General Public License along with EpiLexo. If not, see <https://www.gnu.org/licenses/>.\n*/\n\nimport { Component, OnInit } from '@angular/core';\n\n@Component({\n  selector: 'app-data-search-form',\n  templateUrl: './data-search-form.component.html',\n  styleUrls: ['./data-search-form.component.scss']\n})\nexport class DataSearchFormComponent implements OnInit {\n\n  constructor() { }\n\n  ngOnInit(): void {\n  }\n\n  onSubmit(): void {\n    // Process checkout data here\n    \n    console.warn('Your order has been submitted');\n    \n  }\n}\n","\n\n<form (ngSubmit)=\"onSubmit()\" class=\"h-100 d-flex flex-column\">\n    <!-- FULL TEXT -->\n    <div class=\"card\">\n        <div class=\"card-header\" id=\"headingOne\">\n            <h5 class=\"mb-0\">\n                <a class=\"btn\" aria-expanded=\"true\">\n                    Ricerca Full-Text\n                </a>\n            </h5>\n        </div>\n        <div class=\"collapse show\" aria-labelledby=\"headingOne\" data-parent=\"#search-accordion\">\n            <div class=\"card-body\">\n                <div class=\"form-row\">\n                    <div class=\"form-group col-md-8\">\n                        <label for=\"fullTextInput\">Testo: </label>\n                        <input type=\"text\" class=\"form-control\" id=\"fullTextInput\" placeholder=\"\">\n                    </div>\n                </div>\n                <div class=\"form-row\">\n                    <div class=\"form-group col-md-8\">\n                        <label for=\"selectFullText\">Cerca le schede che contengono:</label>\n                        <select class=\"form-control\" id=\"selectFullText\">\n                            <option>Tutte le parole</option>\n                            <option>Una qualsiasi delle parole</option>\n                            <option>La frase esatta</option>\n                        </select>\n                    </div>\n                </div>\n\n            </div>\n        </div>\n    </div>\n\n    <div id=\"search-accordion\">\n\n        <!-- DATI GENERALI -->\n        <div class=\"card\">\n            <div class=\"card-header\" id=\"generalDataHeading\">\n                <h5 class=\"mb-0\">\n                    <a class=\"btn btn-link collapsed\" data-toggle=\"collapse\" data-target=\"#generalDataCollapse\"\n                        aria-expanded=\"false\" aria-controls=\"generalDataCollapse\">\n                        <i class=\"fa\"></i>&nbsp;Dati generali\n                    </a>\n                </h5>\n            </div>\n            <div id=\"generalDataCollapse\" class=\"collapse\" aria-labelledby=\"generalDataHeading\"\n                data-parent=\"#search-accordion\">\n                <div class=\"card-body form-row\">\n                    <div class=\"form-group col-md-6\">\n                        <label for=\"idText\">Identificativo:</label>\n                        <input type=\"text\" class=\"form-control\" id=\"idText\" placeholder=\"\">\n                    </div>\n                    <div class=\"form-group col-md-6\">\n                        <label for=\"titleInput\">Titolo: </label>\n                        <input type=\"text\" class=\"form-control\" id=\"titleInput\" placeholder=\"\">\n                    </div>\n                    <div class=\"form-group col-md-8\">\n                        <label for=\"selectTitle\">Cerca le schede che contengono:</label>\n                        <select class=\"form-control\" id=\"selectTitle\">\n                            <option>Tutte le parole</option>\n                            <option>Una qualsiasi delle parole</option>\n                            <option>La frase esatta</option>\n                        </select>\n                    </div>\n                </div>\n            </div>\n        </div>\n\n        <!-- SUPPORTO -->\n        <div class=\"card\">\n            <div class=\"card-header\" id=\"supportHeading\">\n                <h5 class=\"mb-0\">\n                    <a class=\"btn btn-link collapsed\" data-toggle=\"collapse\" data-target=\"#supportCollapse\"\n                        aria-expanded=\"false\" aria-controls=\"supportCollapse\">\n                        <i class=\"fa\"></i>&nbsp;Supporto\n                    </a>\n                </h5>\n            </div>\n            <div id=\"supportCollapse\" class=\"collapse\" aria-labelledby=\"supportHeading\" data-parent=\"#search-accordion\">\n                <div class=\"card-body\">\n                    <div class=\"row\">\n                        <div class=\"form-group col-md-8\">\n                            <label for=\"inscriptionType\">Tipo di iscrizione: </label>\n                            <select class=\"form-control\" id=\"inscriptionType\">\n                                <option>Funeraria</option>\n                                <option>Ode</option>\n                                <option>Mercantile</option>\n                            </select>\n                        </div>\n                    </div>\n                    <div class=\"row\">\n                        <div class=\"form-group col-md-8\">\n                            <label for=\"objectType\">Tipo di oggetto: </label>\n                            <select class=\"form-control\" id=\"objectType\">\n                                <option>Marmo</option>\n                                <option>Papiro</option>\n                                <option>Pietra</option>\n                            </select>\n                        </div>\n                    </div>\n                    <div class=\"row\">\n                        <div class=\"form-group col-md-8\">\n                            <label for=\"ancientPlaceName\">Luogo di rinvenimento (nome antico): </label>\n                            <input type=\"text\" class=\"form-control\" id=\"ancientPlaceName\" placeholder=\"\">\n                        </div>\n                    </div>\n                    <div class=\"row\">\n                        <div class=\"form-group col-md-8\">\n                            <label for=\"modernPlaceName\">Luogo di rinvenimento (nome moderno): </label>\n                            <input type=\"text\" class=\"form-control\" id=\"modernPlaceName\" placeholder=\"\">\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n\n\n        <!-- BIBLIOGRAFIA -->\n        <div class=\"card\">\n            <div class=\"card-header\" id=\"bibliographyHeading\">\n                <h5 class=\"mb-0\">\n                    <a class=\"btn btn-link collapsed\" data-toggle=\"collapse\" data-target=\"#bibliographyCollapse\"\n                        aria-expanded=\"false\" aria-controls=\"bibliographyCollapse\">\n                        <i class=\"fa\"></i>&nbsp;Bibliografia\n                    </a>\n                </h5>\n            </div>\n            <div id=\"bibliographyCollapse\" class=\"collapse\" aria-labelledby=\"bibliographyHeading\"\n                data-parent=\"#search-accordion\">\n                <div class=\"card-body\">\n                    <div class=\"row\">\n                        <div class=\"form-group col-md-8\">\n                            <label for=\"authorSelect\">Autore: </label>\n                            <select class=\"form-control\" id=\"authorSelect\">\n                                <option>...</option>\n                            </select>\n                        </div>\n                    </div>\n                    <div class=\"row\">\n                        <div class=\"form-group col-md-8\">\n                            <label for=\"titleInput\">Titolo: </label>\n                            <input type=\"text\" class=\"form-control\" id=\"titleInput\" placeholder=\"\">\n                        </div>\n                    </div>\n                    <div class=\"row\">\n                        <div class=\"form-group col-md-8\">\n                            <label for=\"publicationYear\">Anno pubblicazione:&nbsp;&nbsp;&nbsp;&nbsp;</label>\n                            <input type=\"number\" class=\"form-control\" id=\"publicationYear\" placeholder=\"1900\">\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n\n        <!-- CRONOLOGIA -->\n        <div class=\"card\">\n            <div class=\"card-header\" id=\"chronologyHeading\">\n                <h5 class=\"mb-0\">\n                    <a class=\"btn btn-link collapsed\" data-toggle=\"collapse\" data-target=\"#chronologyCollapse\"\n                        aria-expanded=\"false\" aria-controls=\"chronologyCollapse\">\n                        <i class=\"fa\"></i>&nbsp;Cronologia\n                    </a>\n                </h5>\n            </div>\n            <div id=\"chronologyCollapse\" class=\"collapse\" aria-labelledby=\"chronologyHeading\"\n                data-parent=\"#search-accordion\">\n                <div class=\"card-body\">\n                    <div class=\"form-group\">\n                        <div class=\"form-check\">\n                            <input class=\"form-check-input\" type=\"checkbox\" id=\"intervalDate\"\n                                onchange=\"document.getElementById('toDate').disabled = !this.checked;\">\n                            <label class=\"form-check-label\" for=\"intervalDate\">\n                                Intervallo\n                            </label>\n                        </div>\n                    </div>\n\n                    <div class=\"form-group mb-2\">\n                        <label for=\"fromDate\">Da:&nbsp;&nbsp;&nbsp;&nbsp;</label>\n                        <input type=\"number\" class=\"form-control\" id=\"fromDate\" placeholder=\"-100\">\n                    </div>\n                    <div class=\"form-group mb-2\">\n                        <label for=\"toDate\">A:&nbsp;&nbsp;&nbsp;&nbsp;</label>\n                        <input type=\"number\" class=\"form-control\" id=\"toDate\" placeholder=\"100\" disabled>\n                    </div>\n\n                </div>\n            </div>\n        </div>\n\n        <!-- TESTO -->\n        <div class=\"card\">\n            <div class=\"card-header\" id=\"textHeading\">\n                <h5 class=\"mb-0\">\n                    <a class=\"btn btn-link collapsed\" data-toggle=\"collapse\" data-target=\"#textCollapse\"\n                        aria-expanded=\"false\" aria-controls=\"textCollapse\">\n                        <i class=\"fa\"></i>&nbsp;Testo\n                    </a>\n                </h5>\n            </div>\n            <div id=\"textCollapse\" class=\"collapse\" aria-labelledby=\"textHeading\" data-parent=\"#search-accordion\">\n                <div class=\"card-body\">\n                    <div class=\"form-row align-items-center\">\n                        <div class=\"col-sm-6 my-1\">\n                            <label class=\"sr-only\" for=\"searchText\">Testo:</label>\n                            <input type=\"text\" class=\"form-control\" id=\"searchText\" placeholder=\"Cerca nel testo\">\n                        </div>\n                        <div class=\"col-sm-6 my-1\">\n                            <div class=\"custom-control custom-switch custom-switch-lg\">\n                                <input type=\"checkbox\" class=\"custom-control-input\" id=\"transliteratorSwitcher\">\n                                <label class=\"custom-control-label\" for=\"transliteratorSwitcher\">Greek char</label>\n                            </div>\n                        </div>\n                        <div class=\"col-sm-6 my-2\">\n                            <label class=\"sr-only\" for=\"editionSelect\">Example select</label>\n                            <select class=\"form-control\" id=\"editionSelect\">\n                                <option>Diplomatica</option>\n                                <option>Interpretativa</option>\n                                <option>Entrambe</option>\n                            </select>\n                        </div>\n                    </div>\n                    <div class=\"form-row align-items-center\">\n                        <div class=\"col-md-4 col-sm-12\">\n                            <label for=\"langSelect\">Lingua</label>\n                            <select class=\"form-control\" id=\"langSelect\">\n                                <option>...</option>\n                            </select>\n                        </div>\n                        <div class=\"col-md-4 col-sm-12\">\n                            <label for=\"alfaSelect\">Alfabeto</label>\n                            <select class=\"form-control\" id=\"alfaSelect\">\n                                <option>...</option>\n                            </select>\n                        </div>\n                        <div class=\"col-md-4 col-sm-12\">\n                            <label for=\"ducSelect\">Ductus</label>\n                            <select class=\"form-control\" id=\"ducSelect\">\n                                <option>...</option>\n                            </select>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n\n    <!-- BUTTONS -->\n    <div class=\"h-100 mb-3\" style=\"border:none;\">\n        <div class=\" h-100\">\n            <div class=\"form-row align-items-end h-100\">\n                <div class=\"col-sm-2\">\n\n                </div>\n                <div class=\"col-sm-4\">\n                    <button class=\"btn btn-danger btn-block\" type=\"reset\" value=\"Reset\"><i class=\"fa fa-eraser\"></i>\n                        Reset</button>\n                </div>\n                <div class=\"col-sm-4\">\n                    <button class=\"btn btn-primary btn-block\" type=\"submit\" value=\"Submit\"><i class=\"fa fa-search\"></i>\n                        Cerca</button>\n                </div>\n                <div class=\"col-sm-2\">\n\n                </div>\n            </div>\n        </div>\n    </div>\n</form>","import { Component, OnInit, ViewChild } from '@angular/core';\nimport { ModalComponent } from 'ng-modal-lib';\nimport { Subscription } from 'rxjs';\nimport { LexicalEntriesService } from 'src/app/services/lexical-entries/lexical-entries.service';\n\n@Component({\n  selector: 'app-cognate-panel',\n  templateUrl: './cognate-panel.component.html',\n  styleUrls: ['./cognate-panel.component.scss']\n})\nexport class CognatePanelComponent implements OnInit {\n\n  public lexicalEntryId: string;\n  public cogInstanceName : any;\n  public label : any;\n  public subscription: Subscription;\n  public lexicalEntryData : any;\n  public id : any;\n\n  @ViewChild('cognatePanelModal', {static: false}) cognatePanelModal: ModalComponent;\n\n\n  constructor(private lexicalService: LexicalEntriesService) { }\n\n  ngOnInit(): void {\n  }\n\n  triggerCognatePanel(data?){\n    setTimeout(() => {\n      this.cognatePanelModal.show();\n      \n    }, 100);\n    \n  }\n\n  onCloseModal(cogInstanceName, lexInstanceName){\n    this.lexicalService.closePanelForm(cogInstanceName, lexInstanceName);\n    console.log(this.lexicalService.getAllPanelForms())\n  }\n\n}\n","\n<app-modal #cognatePanelModal style=\"top: 10%;\" class=\"modal-demo\" [maximizable]=\"false\" [inViewport]=\"true\"  [backdrop]=\"false\" class=\"panelFormData\" (closeModal)=\"onCloseModal(cogInstanceName, lexicalEntryId)\">\n    <ng-container class=\"app-modal-header\">{{label}}</ng-container>\n    <ng-container class=\"app-modal-body\">\n       <app-lexical-entry-core-form [lexData]=\"lexicalEntryData\"></app-lexical-entry-core-form>\n    </ng-container>\n    \n</app-modal>","/*\n   Copyright 2021-2022  Istituto di Linguistica Computazionale \"A. Zampolli\", Consiglio Nazionale delle Ricerche, Pisa, Italy.\n \nThis file is part of EpiLexo.\n\nEpiLexo is free software: you can redistribute it and/or modify it under the terms of the GNU General Public License as published by the Free Software Foundation, either version 3 of the License, or (at your option) any later version.\n\nEpiLexo is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for more details.\n\nYou should have received a copy of the GNU General Public License along with EpiLexo. If not, see <https://www.gnu.org/licenses/>.\n*/\n\nimport { ChangeDetectorRef, Component, ComponentFactoryResolver, Input, OnDestroy, OnInit, SimpleChanges, ViewChild, ViewContainerRef } from '@angular/core';\nimport { LexicalEntriesService } from '../../../../../../services/lexical-entries/lexical-entries.service';\nimport { Subject, Subscription } from 'rxjs';\nimport { ToastrService } from 'ngx-toastr';\n\n\nimport { FormBuilder, FormGroup, FormArray, FormControl, Validators, Form } from '@angular/forms';\nimport { debounceTime, distinctUntilChanged, pairwise, startWith, take, takeUntil } from 'rxjs/operators';\nimport { NgSelectComponent } from '@ng-select/ng-select';\nimport { LilaService } from 'src/app/services/lila/lila.service';\nimport { CognatePanelComponent } from './cognate-panel/cognate-panel.component';\nimport { ConceptService } from 'src/app/services/concept/concept.service';\n\n\n@Component({\n    selector: 'app-lexical-entry-core-form',\n    templateUrl: './lexical-entry-core-form.component.html',\n    styleUrls: ['./lexical-entry-core-form.component.scss']\n})\nexport class LexicalEntryCoreFormComponent implements OnInit, OnDestroy {\n\n    @Input() lexData: any;\n    @ViewChild('cognatePanel', { read: ViewContainerRef }) vc: ViewContainerRef;\n\n    destroy$: Subject<boolean> = new Subject();\n    private subject: Subject<any> = new Subject();\n    switchInput = false;\n    subscription: Subscription;\n    object: any;\n    peopleLoading = false;\n    counter = 0;\n    lexEntryTypesData = [];\n    morphologyData = [];\n    valueTraits = [];\n    memoryTraits = [];\n    memoryValues = [];\n    languages = [];\n\n    memoryDenotes = [];\n    memoryCognates = [];\n    memoryEvokes = [];\n    memoryStem = '';\n\n    valuePos = [];\n    memoryPos = '';\n\n    posDescription = '';\n    typeDesc = '';\n    staticMorpho = [];\n\n    memoryConfidence = null;\n\n    interval;\n\n    searchResults = [];\n    filterLoading = false;\n\n\n\n    private denotes_subject: Subject<any> = new Subject();\n    private cognates_subject: Subject<any> = new Subject();\n    private evokes_subject: Subject<any> = new Subject();\n    private subterm_subject: Subject<any> = new Subject();\n    private ext_subterm_subject_subscription: Subscription;\n\n\n\n    /* public urlRegex = /(^|\\s)((https?:\\/\\/)?[\\w-]+(\\.[\\w-]+)+\\.?(:\\d+)?(\\/\\S*)?)/gi */\n    public urlRegex = /(^|\\s)((https?:\\/\\/.+))/;\n\n    emptyLabelFlag = false;\n    emptyFlag = false;\n\n    disableAddMorpho = false;\n    disableAddSubterm = false;\n\n    isMultiword = false;\n    memorySubterm = [];\n\n    coreForm = new FormGroup({\n        label: new FormControl('', [Validators.required, Validators.minLength(2)]),\n        type: new FormControl(''),\n        confidence: new FormControl(null),\n        language: new FormControl('', [Validators.required, Validators.minLength(0)]),\n        pos: new FormControl(''),\n        morphoTraits: new FormArray([this.createMorphoTraits()]),\n        stemType: new FormControl(''),\n        evokes: new FormArray([this.createEvokes()]),\n        denotes: new FormArray([this.createDenotes()]),\n        cognates: new FormArray([this.createCognates()]),\n        isCognate: new FormControl(null),\n        isEtymon: new FormControl(null),\n        subterm: new FormArray([])\n    })\n\n    morphoTraits: FormArray;\n    evokesArray: FormArray;\n    denotesArray: FormArray;\n    cognatesArray: FormArray;\n    subtermArray: FormArray;\n    disableAddCognates = false;\n    disableAddDenotes = false;\n    disableAddEvokes = false;\n    arrayComponents = [];\n\n    denotes_subject_subscription: Subscription;\n    cognates_subject_subscription: Subscription;\n    update_lang_subscription: Subscription;\n    get_languages_subscription: Subscription;\n    subject_subscription: Subscription;\n    private ext_subterm_subject: Subject<any> = new Subject();\n    subject_evokes_search: Subject<any> = new Subject();\n    searchResultsConcepts: any;\n\n\n    constructor(private lexicalService: LexicalEntriesService,\n        private formBuilder: FormBuilder,\n        private toastr: ToastrService,\n        private lilaService: LilaService,\n        private factory: ComponentFactoryResolver,\n        private conceptService : ConceptService) {\n\n    }\n\n    ngOnInit() {\n        /* setTimeout(() => {\n            //@ts-ignore\n            $('.denotes-tooltip').tooltip({\n                trigger: 'hover'\n            });\n        }, 1000); */\n\n\n\n\n        this.denotes_subject_subscription = this.denotes_subject.pipe(debounceTime(1000), takeUntil(this.destroy$)).subscribe(\n            data => {\n                this.onChangeDenotes(data)\n            }\n        )\n\n        this.evokes_subject.pipe(debounceTime(1000), takeUntil(this.destroy$)).subscribe(\n            data=>{\n                this.onChangeEvokes(data);\n            }\n        )\n\n        this.ext_subterm_subject_subscription = this.ext_subterm_subject.pipe(debounceTime(1000), takeUntil(this.destroy$)).subscribe(\n            data => {\n                this.onChangeSubterm(data)\n            }\n        )\n\n        this.cognates_subject_subscription = this.cognates_subject.pipe(debounceTime(1000), takeUntil(this.destroy$)).subscribe(\n            data => {\n                this.onChangeCognates(data)\n            }\n        )\n\n        this.subterm_subject.pipe(debounceTime(1000), takeUntil(this.destroy$)).subscribe(\n            data => {\n                this.onSearchFilterSubterm(data)\n            }\n        )\n\n        this.update_lang_subscription = this.lexicalService.updateLangSelect$.subscribe(\n            signal => {\n\n                if (signal != null) {\n\n                    this.languages = [];\n                    this.lexicalService.getLexiconLanguages().pipe(takeUntil(this.destroy$)).subscribe(\n                        data => {\n                            console.log(data)\n                            for (var i = 0; i < data.length; i++) {\n                                this.languages[i] = data[i]\n                            }\n                        }\n                    );\n                }\n            }\n        );\n\n        this.get_languages_subscription = this.lexicalService.getLexiconLanguages().subscribe(\n            data => {\n                this.languages = [];\n                for (var i = 0; i < data.length; i++) {\n                    this.languages[i] = data[i]\n                }\n            }\n        );\n\n        this.subject_subscription = this.subject.pipe(debounceTime(1000), takeUntil(this.destroy$)).subscribe(\n            data => {\n                this.onSearchFilter(data)\n            }\n        )\n\n        this.subject_evokes_search.pipe(debounceTime(1000), takeUntil(this.destroy$)).subscribe(\n            data => {\n                this.onSearchLexicalConcept(data)\n            }\n        )\n        \n\n\n        //this.lexEntryTypesData = await this.lexicalService.getMorphologyData().toPromise();\n\n        this.coreForm = this.formBuilder.group({\n            label: '',\n            type: '',\n            confidence: false,\n            language: '',\n            pos: '',\n            morphoTraits: this.formBuilder.array([]),\n            stemType: '',\n            evokes: this.formBuilder.array([this.createEvokes()]),\n            denotes: this.formBuilder.array([this.createDenotes()]),\n            cognates: this.formBuilder.array([this.createCognates()]),\n            isCognate: false,\n            isEtymon: false,\n            subterm: this.formBuilder.array([]),\n        })\n\n        this.onChanges();\n    }\n\n    /* triggerDenotes(evt) {\n        if (evt.target != undefined) {\n            this.subject.next(evt.target.value)\n        }\n    } */\n\n    triggerCognates(evt, i) {\n        console.log(evt)\n        if (evt.target != undefined) {\n\n            this.subject.next({ value: evt.target.value, index: i })\n        }\n    }\n\n\n    triggerEvokes(evt, i) {\n        console.log(evt)\n        if (evt.target != undefined) {\n\n            this.subject_evokes_search.next({ value: evt.target.value, index: i })\n        }\n    }\n\n    onSearchFilterSubterm(data) {\n        this.searchResults = [];\n\n        if (this.object.lexicalEntry != undefined) {\n            let parameters = {\n                text: data,\n                searchMode: \"startsWith\",\n                type: \"\",\n                pos: \"\",\n                formType: \"entry\",\n                author: \"\",\n                lang: \"\",\n                status: \"\",\n                offset: 0,\n                limit: 500\n            }\n\n            /* && data.length >= 3 */\n\n            this.lexicalService.getLexicalEntriesList(parameters).pipe(takeUntil(this.destroy$)).subscribe(\n                data => {\n                    console.log(data)\n                    let filter_lang = data.list.filter(\n                        element => element.lexicalEntry != this.object.lexicalEntry\n                    )\n\n                    console.log(filter_lang)\n                    this.searchResults = filter_lang;\n                }, error => {\n                    console.log(error)\n                }\n            )\n\n\n        } else {\n        }\n\n    }\n\n    onSearchFilter(data) {\n        this.filterLoading = true;\n        this.searchResults = [];\n\n        let value = data.value;\n        let index = data.index;\n\n        this.cognatesArray = this.coreForm.get('cognates') as FormArray;\n\n        if (this.object.lexicalEntry != undefined && !this.cognatesArray.at(index).get('lila').value) {\n            let parameters = {\n                text: value,\n                searchMode: \"startsWith\",\n                type: \"\",\n                pos: \"\",\n                formType: \"entry\",\n                author: \"\",\n                lang: \"\",\n                status: \"\",\n                offset: 0,\n                limit: 500\n            }\n\n            /* && data.length >= 3 */\n            this.lexicalService.getLexicalEntriesList(parameters).pipe(takeUntil(this.destroy$)).subscribe(\n                data => {\n                    console.log(data)\n\n                    if (data.list.length > 0) {\n                        let filter_lang = data.list.filter(\n                            element => element.language != this.object.language\n                        )\n                        filter_lang.forEach(element => {\n                            element['label_lang'] = element.label + \"@\" + element.language\n                        });\n                        console.log(filter_lang)\n                        this.searchResults = filter_lang;\n                        this.filterLoading = false;\n                    } else {\n                        this.filterLoading = false;\n                    }\n\n                }, error => {\n                    //console.log(error)\n                    this.filterLoading = false;\n                }\n            )\n\n        } else if (this.object.lexicalEntry != undefined && this.cognatesArray.at(index).get('lila').value) {\n\n            this.searchResults = [];\n            this.lilaService.queryCognate(value).pipe(takeUntil(this.destroy$)).subscribe(\n                data => {\n                    console.log(data);\n                    if (data.list.length > 0) {\n\n\n                        const map = data.list.map(element => (\n                            {\n                                label: element[2].value,\n                                labelValue: element[0].value,\n                                pos: element[1].value\n                            })\n                        )\n\n                        map.forEach(element => {\n                            let tmpLblVal = element.labelValue.split('/');\n                            let labelValue = tmpLblVal[tmpLblVal.length - 1];\n\n                            let tmpLblPos = element.pos.split('/');\n                            let pos = tmpLblPos[tmpLblPos.length - 1];\n\n\n                            element.labelElement = labelValue;\n                            element.labelPos = pos;\n\n                        });\n\n\n\n                        this.searchResults = map;\n                        console.log(this.searchResults)\n                        this.filterLoading = false;\n\n\n                    }\n                },\n                error => {\n                    console.log(error)\n                    this.filterLoading = false;\n                }\n            )\n\n        } else {\n            this.filterLoading = false;\n\n\n        }\n\n    }\n\n    onSearchLexicalConcept(data) {\n        this.filterLoading = true;\n        this.searchResults = [];\n\n        let value = data.value;\n        let index = data.index;\n\n        this.evokesArray = this.coreForm.get('evokes') as FormArray;\n\n        if (this.object.lexicalEntry != undefined) {\n            let parameters = {\n                text: value,\n                searchMode: \"startsWith\",\n                labelType: \"prefLabel\",\n                author: \"\",\n                offset: 0,\n                limit: 500\n            }\n\n            /* && data.length >= 3 */\n            this.conceptService.conceptFilter(parameters).pipe(takeUntil(this.destroy$)).subscribe(\n                data => {\n                    console.log(data)\n\n                    if (data.list.length > 0) {\n                        let filter_lang = data.list.filter(\n                            element => element.language != 'null'\n                        )\n    \n                        console.log(filter_lang)\n                        this.searchResults = filter_lang;\n                    } else {\n                        this.filterLoading = false;\n                    }\n\n                }, error => {\n                    //console.log(error)\n                    this.filterLoading = false;\n                }\n            )\n\n        } else if (this.object.lexicalEntry != undefined && this.cognatesArray.at(index).get('lila').value) {\n\n            this.searchResults = [];\n            this.lilaService.queryCognate(value).pipe(takeUntil(this.destroy$)).subscribe(\n                data => {\n                    console.log(data);\n                    if (data.list.length > 0) {\n\n\n                        const map = data.list.map(element => (\n                            {\n                                label: element[2].value,\n                                labelValue: element[0].value,\n                                pos: element[1].value\n                            })\n                        )\n\n                        map.forEach(element => {\n                            let tmpLblVal = element.labelValue.split('/');\n                            let labelValue = tmpLblVal[tmpLblVal.length - 1];\n\n                            let tmpLblPos = element.pos.split('/');\n                            let pos = tmpLblPos[tmpLblPos.length - 1];\n\n\n                            element.labelElement = labelValue;\n                            element.labelPos = pos;\n\n                        });\n\n\n\n                        this.searchResults = map;\n                        console.log(this.searchResults)\n                        this.filterLoading = false;\n\n\n                    }\n                },\n                error => {\n                    console.log(error)\n                    this.filterLoading = false;\n                }\n            )\n\n        } else {\n            this.filterLoading = false;\n\n\n        }\n\n    }\n\n    deleteData() {\n        this.searchResults = [];\n    }\n\n\n\n    //TODO: inserire un wizard per la creazione di multiword al volo\n\n    ngOnChanges(changes: SimpleChanges) {\n        setTimeout(() => {\n            if (this.object != changes.lexData.currentValue) {\n                this.morphoTraits = this.coreForm.get('morphoTraits') as FormArray;\n                this.morphoTraits.clear();\n\n                this.denotesArray = this.coreForm.get('denotes') as FormArray;\n                this.denotesArray.clear();\n\n                this.cognatesArray = this.coreForm.get('cognates') as FormArray;\n                this.cognatesArray.clear();\n\n                this.evokesArray = this.coreForm.get('evokes') as FormArray;\n                this.evokesArray.clear();\n\n                this.disableAddCognates = false;\n                this.disableAddDenotes = false;\n                this.disableAddMorpho = false;\n                this.disableAddEvokes = false;\n                \n                this.subtermArray = this.coreForm.get('subterm') as FormArray;\n                this.subtermArray.clear();\n\n                this.memoryStem = '';\n                this.memoryPos = '';\n\n                this.staticMorpho = []\n\n                this.memorySubterm = [];\n                \n                this.memoryCognates = [];\n                \n                this.isMultiword = false;\n            }\n            this.object = changes.lexData.currentValue;\n\n\n            if (this.object != null) {\n\n                const lexId = this.object.lexicalEntry;\n                this.coreForm.get('label').setValue(this.object.label, { emitEvent: false });\n                this.coreForm.get('stemType').setValue(this.object.stemType, { emitEvent: false });\n                if (this.object.stemType != '') {\n                    this.memoryStem = this.object.stemType;\n                }\n                if (this.object.type == 'Etymon') {\n                    this.coreForm.get('type').disable({ onlySelf: true, emitEvent: false })\n                } else {\n                    this.coreForm.get('type').enable({ onlySelf: true, emitEvent: false })\n                }\n\n                if (this.object.confidence == 0) {\n                    //spento se null o 1\n                    //acceso se 0\n                    this.coreForm.get('confidence').patchValue(true, { emitEvent: false });\n                } else {\n                    this.coreForm.get('confidence').setValue(null, { emitEvent: false });\n                }\n\n\n                this.object.type.forEach(element => {\n                    if (element != 'Cognate') {\n                        this.coreForm.get('type').setValue(element, { emitEvent: false });\n                        return true;\n                    } else {\n                        return false;\n                    }\n                });\n\n                let isCognate = this.object.type.find(element => element == 'Cognate');\n                this.isMultiword = this.object.type.some(element => element == 'MultiWordExpression');\n                if (this.isMultiword) {\n                    this.getSubterms(lexId);\n                }\n                if (isCognate) {\n                    this.coreForm.get('isCognate').setValue(true, { emitEvent: false })\n                } else {\n                    this.coreForm.get('isCognate').setValue(false, { emitEvent: false })\n                }\n\n                let isEtymon = this.object.type.find(element => element == 'Etymon');\n                if (isEtymon) {\n                    this.coreForm.get('isEtymon').setValue(true, { emitEvent: false })\n                } else {\n                    this.coreForm.get('isEtymon').setValue(false, { emitEvent: false })\n                }\n\n                //this.coreForm.get('type').setValue(this.object.type, { emitEvent: false });\n                this.coreForm.get('language').setValue(this.object.language, { emitEvent: false });\n                this.coreForm.get('pos').setValue(this.object.pos, { emitEvent: false });\n\n                this.memoryPos = this.object.pos;\n\n                this.valueTraits = [];\n                this.memoryTraits = [];\n                this.memoryDenotes = [];\n                this.memoryCognates = [];\n                this.memoryValues = [];\n                this.memoryEvokes = [];\n                this.memoryConfidence = null;\n\n                /*  //console.log('MORFOLOGIA')\n                 //console.log(this.object.morphology) */\n                setTimeout(async () => {\n                    this.morphologyData = await this.lexicalService.getMorphologyData().toPromise();\n                    this.valuePos = this.morphologyData.filter(x => {\n                        if (x.propertyId == 'http://www.lexinfo.net/ontology/3.0/lexinfo#partOfSpeech') {\n                            return true;\n                        } else {\n                            return false;\n                        }\n                    })\n                    this.valuePos = this.valuePos[0]['propertyValues'];\n\n                    for (var i = 0; i < this.object.morphology.length; i++) {\n                        const trait = this.object.morphology[i]['trait'];\n                        const value = this.object.morphology[i]['value'];\n\n                        let traitDescription = '';\n                        let labelTrait = this.object.morphology[i]['trait'].split('#')[1];\n                        let labelValue = this.object.morphology[i]['value'].split('#')[1];\n                        this.morphologyData.filter(x => {\n                            if (x.propertyId == trait && trait != 'http://www.lexinfo.net/ontology/3.0/lexinfo#partOfSpeech') {\n                                x.propertyValues.filter(y => {\n                                    if (y.valueId == value) {\n                                        traitDescription = y.valueDescription;\n                                        return true;\n                                    } else {\n                                        return false;\n                                    }\n                                })\n                                return true;\n                            } else {\n                                return false;\n                            }\n                        })\n\n                        this.memoryValues[i] = this.object.morphology[i]['value'];\n\n\n\n                        let pos = this.coreForm.get('pos').value;\n                        this.valuePos.forEach(el => {\n                            if (el.valueId.split('#')[1] == pos) {\n\n                                this.posDescription = el.valueDescription;\n                            }\n                        })\n\n                        //this.valuePos.map(element => element.valueId = element.valueId.split('#')[1])\n                        this.addMorphoTraits(trait, value, traitDescription, labelTrait, labelValue);\n                        this.onChangeTrait(trait, i);\n\n                        this.staticMorpho.push({ trait: trait, value: value });\n\n                    }\n                }, 50);\n\n\n\n                setTimeout(async () => {\n                    if(this.lexEntryTypesData.length == 0) {\n                        this.lexEntryTypesData = await this.lexicalService.getLexEntryTypes().toPromise();\n                    }\n                    let type = this.coreForm.get('type').value;\n                    this.lexEntryTypesData.forEach(el => {\n                        if (el.valueId.split('#')[1] == type) {\n                            this.coreForm.get('type').setValue(el.valueId, { emitEvent: false });\n                            this.typeDesc = el.valueDescription;\n                        }\n                    })\n\n\n\n                }, 100);\n\n                this.lexicalService.getLexEntryLinguisticRelation(lexId, 'denotes').pipe(takeUntil(this.destroy$)).subscribe(\n                    data => {\n                        //console.log(data)\n                        for (var i = 0; i < data.length; i++) {\n                            let entity = data[i]['entity'];\n                            let type = data[i]['linkType'];\n                            this.addDenotes(entity, type);\n                            this.memoryDenotes.push(data[i])\n                        }\n                    }, error => {\n                        //console.log(error)\n                    }\n                )\n\n                this.lexicalService.getLexEntryLinguisticRelation(lexId, 'evokes').pipe(takeUntil(this.destroy$)).subscribe(\n                    data => {\n                        console.log(data)\n                        for (var i = 0; i < data.length; i++) {\n                            let entity = data[i]['entity'];\n                            let type = data[i]['linkType'];\n                            let label = data[i]['label'];\n                            let inferred = data[i]['inferred'];\n                            this.addEvokes(entity, type, inferred, label);\n                            this.memoryEvokes.push(data[i])\n                        }\n                    }, error => {\n                        console.log(error)\n                    }\n                )\n\n                this.lexicalService.getLexEntryLinguisticRelation(lexId, 'cognate').pipe(takeUntil(this.destroy$)).subscribe(\n                    data => {\n                        console.log(data)\n                        for (var i = 0; i < data.length; i++) {\n                            let label = data[i].label;\n                            //let instanceName = data[i]['lexicalEntry']\n                            let entity = data[i]['entity'];\n                            let type = data[i]['linkType'];\n                            let lexicalEntry = this.object.lexicalEntry;\n\n                            if (label == \"\") {\n                                let tmp = entity.split('/');\n                                label = tmp[tmp.length - 1]\n                            }\n                            this.addCognates(label, lexicalEntry, entity, type);\n                            this.memoryCognates.push(data[i])\n                        }\n                    }, error => {\n                        console.log(error)\n                    }\n                )\n            }\n\n\n        }, 10)\n\n    }\n\n    async getSubterms(lexId) {\n        try {\n            let get_subterms_req = await this.lexicalService.getSubTerms(this.object.lexicalEntry).toPromise();\n            if (get_subterms_req != undefined) {\n                Array.from(get_subterms_req).forEach((element: any) => {\n                    this.addSubterm(element.lexicalEntry, element.label, element.language);\n                    this.memorySubterm.push(element);\n                })\n            }\n        } catch (error) {\n            console.log(error);\n            if (error.status != 200) {\n                this.toastr.error(\"Something went wrong on get subterms, please check the log\", \"Error\", { timeOut: 5000 })\n            }\n        }\n    }\n\n    triggerSubterm(evt) {\n        console.log(evt)\n        if (evt.target != undefined) {\n\n            this.subterm_subject.next(evt.target.value)\n        }\n    }\n\n    onChangeLanguage(evt) {\n\n        this.lexicalService.spinnerAction('on');\n        let langLabel = evt.target.value;\n        let langValue;\n        this.languages.forEach(element => {\n            if (element['label'].toLowerCase() == langLabel.toLowerCase()) {\n                langValue = element['label'];\n                return;\n            }\n        });\n\n        if (langValue != undefined) {\n            let lexId = this.object.lexicalEntry;\n            let parameters = {\n                relation: 'http://www.w3.org/ns/lemon/lime#entry',\n                value: langValue\n            }\n\n            this.lexicalService.updateLexicalEntry(lexId, parameters).pipe(takeUntil(this.destroy$)).subscribe(\n                data => {\n                    //console.log(data)\n                    this.lexicalService.spinnerAction('off');\n                    this.lexicalService.updateCoreCard(data)\n                    data['request'] = 0;\n                    data['new_lang'] = langValue.toLowerCase();\n                    this.lexicalService.refreshAfterEdit(data);\n                    this.lexicalService.refreshLangTable();\n                    this.lexicalService.refreshFilter({ request: true })\n                }, error => {\n                    //console.log(error)\n                    const data = this.object;\n                    data['request'] = 0;\n                    data['new_lang'] = langValue.toLowerCase();\n                    this.lexicalService.refreshAfterEdit(data);\n                    this.lexicalService.spinnerAction('off');\n                    this.lexicalService.refreshLangTable();\n                    this.lexicalService.refreshFilter({ request: true })\n                    this.lexicalService.updateCoreCard({ lastUpdate: error.error.text })\n                    if (typeof (error.error) != 'object') {\n                        this.toastr.error(error.error, 'Error', {\n                            timeOut: 5000,\n                        });\n                    } else {\n                        this.toastr.success('Language changed correctly for ' + lexId, '', {\n                            timeOut: 5000,\n                        });\n                    }\n                }\n            )\n        } else {\n            this.lexicalService.spinnerAction('off');\n        }\n\n    }\n\n    onChangePos(evt) {\n        this.lexicalService.spinnerAction('on');\n        let posValue = evt.target.value;\n        let lexId = this.object.lexicalEntry;\n        let parameters;\n        if (this.memoryPos == '') {\n\n            parameters = {\n                type: \"morphology\",\n                relation: 'http://www.lexinfo.net/ontology/3.0/lexinfo#partOfSpeech',\n                value: posValue\n            }\n\n        } else {\n            parameters = {\n                type: \"morphology\",\n                relation: 'http://www.lexinfo.net/ontology/3.0/lexinfo#partOfSpeech',\n                value: posValue,\n                currentValue: 'http://www.lexinfo.net/ontology/3.0/lexinfo#' + this.memoryPos\n            }\n        }\n\n        console.log(parameters)\n        this.lexicalService.updateLinguisticRelation(lexId, parameters).pipe(takeUntil(this.destroy$)).subscribe(\n            response => {\n                console.log(response)\n                this.memoryPos = posValue;\n                let data = {};\n                data['request'] = 0;\n                data['new_pos'] = posValue;\n                data['lexicalEntry'] = this.object.lexicalEntry;\n                //this.lexicalService.updateCoreCard(data)\n                this.lexicalService.spinnerAction('off');\n                this.lexicalService.refreshAfterEdit(data);\n                this.lexicalService.refreshFilter({ request: true })\n\n                setTimeout(() => {\n\n                    this.valuePos.forEach(el => {\n                        if (el.valueId == posValue) {\n                            this.posDescription = el.valueDescription;\n                        }\n                    })\n                    //@ts-ignore\n                    $('.pos-tooltip').tooltip({\n                        trigger: 'hover',\n                    });\n\n                }, 1000);\n            },\n            error => {\n                console.log(error);\n\n                this.lexicalService.spinnerAction('off');\n\n                if (error.status != 200) {\n                    this.toastr.error(error.error, 'Error', {\n                        timeOut: 5000,\n                    });\n                } else {\n                    const data = this.object;\n                    data['request'] = 0;\n                    data['new_pos'] = posValue;\n                    this.lexicalService.refreshAfterEdit(data);\n                    this.lexicalService.refreshFilter({ request: true })\n                    this.lexicalService.updateCoreCard({ lastUpdate: error.error.text })\n                    this.memoryPos = posValue;\n                    this.toastr.success('Pos changed correctly for ' + lexId, '', {\n                        timeOut: 5000,\n                    });\n                }\n                setTimeout(() => {\n\n                    this.valuePos.forEach(el => {\n                        if (el.valueId == posValue) {\n                            this.posDescription = el.valueDescription;\n                        }\n                    })\n                    //@ts-ignore\n                    $('.pos-tooltip').tooltip({\n                        trigger: 'hover'\n                    });\n\n                }, 1000);\n            }\n        )\n\n\n    }\n\n    onChangeExistingValue(evt, i) {\n        this.lexicalService.spinnerAction('on');\n        this.morphoTraits = this.coreForm.get('morphoTraits') as FormArray;\n        const trait = this.morphoTraits.at(i).get('trait').value;\n        const oldValue = this.morphoTraits.at(i).get('value').value;\n        const newValue = evt.target.value;\n        if (newValue != '') {\n            let parameters = {\n                type: \"morphology\",\n                relation: trait,\n                value: newValue,\n                currentValue: oldValue\n            }\n\n            this.morphoTraits.at(i).get('value').setValue(newValue, { emitEvent: false });\n\n            this.staticMorpho[i] = { trait: trait, value: newValue }\n            let lexId = this.object.lexicalEntry;\n\n            this.lexicalService.updateLinguisticRelation(lexId, parameters).pipe(takeUntil(this.destroy$)).subscribe(\n                data => {\n                    //console.log(data)\n                    data['request'] = 0;\n                    this.lexicalService.refreshAfterEdit(data);\n                    this.lexicalService.spinnerAction('off');\n                    this.lexicalService.refreshFilter({ request: true })\n                    this.lexicalService.updateCoreCard(data)\n                },\n                error => {\n                    //console.log(error)\n                    this.lexicalService.refreshAfterEdit({ request: 0, label: this.object.label });\n                    this.lexicalService.spinnerAction('off');\n                    this.lexicalService.refreshFilter({ request: true })\n                    this.lexicalService.updateCoreCard({ lastUpdate: error.error.text })\n                    if (error.status != 200) {\n                        this.toastr.error(error.error, 'Error', {\n                            timeOut: 5000,\n                        });\n                    } else {\n                        this.toastr.success('Morphotraits changed correctly for ' + lexId, '', {\n                            timeOut: 5000,\n                        });\n                    }\n                }\n            )\n\n        } else {\n            this.lexicalService.spinnerAction('on');\n        }\n    }\n\n    onChangeValue(i) {\n        this.lexicalService.spinnerAction('on');\n        this.morphoTraits = this.coreForm.get('morphoTraits') as FormArray;\n        const trait = this.morphoTraits.at(i).get('trait').value;\n        const value = this.morphoTraits.at(i).get('value').value;\n\n        if (trait != '' && value != '') {\n            let parameters;\n            if (this.memoryValues[i] == \"\") {\n                parameters = {\n                    type: \"morphology\",\n                    relation: trait,\n                    value: value\n                }\n            } else {\n                parameters = {\n                    type: \"morphology\",\n                    relation: trait,\n                    value: value,\n                    currentValue: this.memoryValues[i]\n                }\n            }\n\n            this.staticMorpho.push({ trait: trait, value: value })\n            let lexId = this.object.lexicalEntry;\n\n            this.lexicalService.updateLinguisticRelation(lexId, parameters).pipe(takeUntil(this.destroy$)).subscribe(\n                data => {\n                    //console.log(data)\n                    data['request'] = 0;\n                    this.lexicalService.refreshAfterEdit(data);\n                    this.lexicalService.spinnerAction('off');\n                    this.lexicalService.refreshFilter({ request: true })\n                    this.lexicalService.updateCoreCard(data)\n\n                    this.disableAddMorpho = false;\n                    setTimeout(() => {\n\n                        let traitDescription = '';\n                        this.morphologyData.filter(x => {\n                            if (x.propertyId == trait && trait != 'http://www.lexinfo.net/ontology/3.0/lexinfo#partOfSpeech') {\n                                x.propertyValues.filter(y => {\n                                    if (y.valueId == value) {\n                                        traitDescription = y.valueDescription;\n                                        return true;\n                                    } else {\n                                        return false;\n                                    }\n                                })\n                                return true;\n                            } else {\n                                return false;\n                            }\n                        })\n\n                        //@ts-ignore\n                        $('.trait-tooltip').tooltip({\n                            trigger: 'hover'\n                        });\n\n\n                    }, 1000);\n                },\n                error => {\n                    //console.log(error)\n                    this.lexicalService.refreshAfterEdit({ request: 0, label: this.object.label });\n                    this.lexicalService.spinnerAction('off');\n                    this.lexicalService.refreshFilter({ request: true })\n                    this.disableAddMorpho = false;\n                    this.lexicalService.updateCoreCard({ lastUpdate: error.error.text })\n                    setTimeout(() => {\n\n                        let traitDescription = '';\n                        this.morphologyData.filter(x => {\n                            if (x.propertyId == trait && trait != 'http://www.lexinfo.net/ontology/3.0/lexinfo#partOfSpeech') {\n                                x.propertyValues.filter(y => {\n                                    if (y.valueId == value) {\n                                        traitDescription = y.valueDescription;\n                                        return true;\n                                    } else {\n                                        return false;\n                                    }\n                                })\n                                return true;\n                            } else {\n                                return false;\n                            }\n                        })\n\n                        this.morphoTraits = this.coreForm.get('morphoTraits') as FormArray;\n                        this.morphoTraits.at(i).patchValue({ trait: trait, value: value, description: traitDescription });\n\n                        //@ts-ignore\n                        $('.trait-tooltip').tooltip({\n                            trigger: 'hover'\n                        });\n                        if (typeof (error.error) != 'object') {\n                            this.toastr.error(error.error, 'Error', {\n                                timeOut: 5000,\n                            });\n                        } else {\n                            this.toastr.success('Morphotraits changed correctly for ' + lexId, '', {\n                                timeOut: 5000,\n                            });\n                        }\n\n                    }, 1000);\n                }\n            )\n        } else {\n            this.lexicalService.spinnerAction('off');\n        }\n    }\n\n    onChangeTrait(evt, i) {\n\n        if (evt.target != undefined) {\n            setTimeout(() => {\n                this.morphoTraits = this.coreForm.get('morphoTraits') as FormArray;\n                this.morphoTraits.at(i).patchValue({ trait: evt.target.value, value: \"\" });\n                if (evt.target.value != '') {\n                    let arrayValues = this.morphologyData.filter(x => {\n                        return x['propertyId'] == evt.target.value;\n                    })['0']['propertyValues'];\n                    //arrayValues.map(element=>element.valueId = element.valueId.split('#')[1])\n                    this.valueTraits[i] = arrayValues;\n                    this.memoryTraits[i] = evt.target.value;\n                    this.memoryValues[i] = \"\";\n                } else {\n                    this.memoryValues.splice(i, 1);\n                    let arrayValues = [];\n                    this.valueTraits[i] = arrayValues\n                    this.memoryTraits.splice(i, 1)\n                }\n            }, 500);\n        } else {\n            setTimeout(() => {\n                try {\n                    var arrayValues = this.morphologyData.filter(x => {\n                        return x['propertyId'] == evt;\n                    })['0']['propertyValues'];\n                    this.valueTraits[i] = arrayValues;\n                    this.memoryTraits.push(evt);\n                } catch (e) {\n                    console.log(e)\n                }\n            }, 1000);\n\n        }\n    }\n\n\n    onChanges(): void {\n\n        this.coreForm.get(\"label\").valueChanges.pipe(debounceTime(1000), takeUntil(this.destroy$)).subscribe(\n            updatedLabel => {\n                if (updatedLabel.length >= 2 && updatedLabel.trim() != '') {\n                    this.emptyLabelFlag = false;\n                    this.lexicalService.spinnerAction('on');\n                    let lexId = this.object.lexicalEntry;\n                    let parameters = {\n                        relation: 'http://www.w3.org/2000/01/rdf-schema#label',\n                        value: updatedLabel\n                    }\n                    this.lexicalService.updateLexicalEntry(lexId, parameters).pipe(takeUntil(this.destroy$)).subscribe(\n                        data => {\n                            console.log(data);\n                            data['request'] = 0;\n                            data['new_label'] = updatedLabel\n                            this.lexicalService.refreshAfterEdit(data);\n                            this.lexicalService.spinnerAction('off');\n                            this.lexicalService.updateCoreCard(data)\n\n                        },\n                        error => {\n                            console.log(error);\n                            const data = this.object;\n                            data['request'] = 0;\n                            data['new_label'] = updatedLabel;\n                            this.lexicalService.refreshAfterEdit(data);\n                            this.lexicalService.spinnerAction('off');\n                            this.lexicalService.updateCoreCard({ lastUpdate: error.error.text });\n                            this.lexicalService.changeDecompLabel(updatedLabel)\n                            if (typeof (error.error) != 'object') {\n                                this.toastr.error(error.error, 'Error', {\n                                    timeOut: 5000,\n                                });\n                            } else {\n                                this.toastr.success('Label changed correctly for ' + lexId, '', {\n                                    timeOut: 5000,\n                                });\n                            }\n                        }\n                    )\n                } else if (updatedLabel.length < 3) {\n\n                    this.emptyLabelFlag = true;\n                }\n            }\n        )\n\n        this.coreForm.get('confidence').valueChanges.pipe(debounceTime(100), startWith(this.coreForm.get('confidence').value), pairwise(), takeUntil(this.destroy$)).subscribe(([prev, next]: [any, any]) => {\n\n            let lexId = this.object.lexicalEntry;\n\n            this.coreForm.get('confidence').setValue(next, { emitEvent: false });\n\n            let oldValue = prev ? 0 : 1;\n            let newValue = next ? 0 : 1;\n            let parameters = {\n                relation: 'http://www.lexinfo.net/ontology/3.0/lexinfo#confidence',\n                value: newValue\n            };\n\n            //if (this.memoryConfidence != null) parameters['currentValue'] = oldValue;\n            this.memoryConfidence = oldValue;\n\n\n            this.lexicalService.updateLexicalEntry(lexId, parameters).pipe(takeUntil(this.destroy$)).subscribe(\n                data => { },\n                error => {\n                    if (error.status == 200) this.toastr.success('Confidence updated', '', { timeOut: 5000 })\n                    if (error.status != 200) this.toastr.error(error.error, '', { timeOut: 5000 })\n                }\n            )\n\n        });\n\n\n\n        this.coreForm.get(\"stemType\").valueChanges.pipe(debounceTime(1000), takeUntil(this.destroy$)).subscribe(\n            updateStem => {\n                if (updateStem != '') {\n                    this.lexicalService.spinnerAction('on');\n                    let lexId = this.object.lexicalEntry;\n                    let parameters = {\n                        type: 'extension',\n                        relation: 'https://www.prin-italia-antica.unifi.it#stemType',\n                        value: updateStem\n                    }\n                    if (this.memoryStem != '') parameters['currentValue'] = this.memoryStem;\n                    console.log(parameters)\n                    this.lexicalService.updateGenericRelation(lexId, parameters).pipe(takeUntil(this.destroy$)).subscribe(\n                        data => {\n                            console.log(data);\n\n                            this.lexicalService.spinnerAction('off');\n                            this.lexicalService.updateCoreCard(data)\n\n                        },\n                        error => {\n                            console.log(error);\n\n                            this.lexicalService.spinnerAction('off');\n                            this.lexicalService.updateCoreCard({ lastUpdate: error.error.text })\n                            if (typeof (error.error) != 'object') {\n                                this.toastr.error(error.error, 'Error', {\n                                    timeOut: 5000,\n                                });\n                            } else {\n                                this.memoryStem = updateStem;\n                                this.toastr.success('stemType changed correctly for ' + lexId, '', {\n                                    timeOut: 5000,\n                                });\n                            }\n                        }\n                    )\n                } else {\n                    this.toastr.error('Empty value not allowed');\n                }\n\n\n            }\n        )\n\n        this.coreForm.get(\"type\").valueChanges.pipe(debounceTime(200), takeUntil(this.destroy$)).subscribe(\n            newType => {\n                this.lexicalService.spinnerAction('on');\n                let lexId = this.object.lexicalEntry;\n                let parameters = {\n                    relation: 'http://www.w3.org/1999/02/22-rdf-syntax-ns#type',\n                    value: newType\n                }\n                this.lexicalService.updateLexicalEntry(lexId, parameters).pipe(takeUntil(this.destroy$)).subscribe(\n                    data => {\n                        //console.log(data);\n                        this.lexicalService.spinnerAction('off');\n                        data['request'] = 0;\n                        data['new_type'] = newType;\n                        this.lexicalService.refreshAfterEdit(data);\n                        this.lexicalService.refreshFilter({ request: true })\n                        this.lexicalService.updateCoreCard(data)\n\n                        setTimeout(() => {\n                            let type = this.coreForm.get('type').value;\n                            this.lexEntryTypesData.forEach(el => {\n                                if (el.valueId == type) {\n\n                                    this.typeDesc = el.valueDescription;\n                                }\n                            })\n                            //@ts-ignore\n                            $('.type-tooltip').tooltip({\n                                trigger: 'hover'\n                            });\n\n\n                        }, 1000);\n\n                    },\n                    error => {\n                        //console.log(error);\n                        const data = this.object;\n                        data['request'] = 0;\n                        data['new_type'] = newType;\n                        this.lexicalService.refreshAfterEdit(data);\n                        this.lexicalService.spinnerAction('off');\n                        this.lexicalService.updateCoreCard({ lastUpdate: error.error.text })\n                        this.lexicalService.refreshFilter({ request: true })\n                        if (typeof (error.error) != 'object') {\n                            this.toastr.error(error.error, 'Error', {\n                                timeOut: 5000,\n                            });\n                        } else {\n                            this.toastr.success('Type changed correctly for ' + lexId, '', {\n                                timeOut: 5000,\n                            });\n                        }\n                        setTimeout(() => {\n                            let type = this.coreForm.get('type').value;\n                            this.lexEntryTypesData.forEach(el => {\n                                if (el.valueId == type) {\n\n                                    this.typeDesc = el.valueDescription;\n                                }\n                            })\n                            //@ts-ignore\n                            $('.type-tooltip').tooltip({\n                                trigger: 'hover'\n                            });\n\n\n                        }, 1000);\n                    }\n                )\n            }\n        )\n    }\n\n\n    createMorphoTraits(t?, v?, d?, lT?, lV?): FormGroup {\n        if (t != undefined) {\n            return this.formBuilder.group({\n                trait: new FormControl(t, [Validators.required, Validators.minLength(0)]),\n                labelTrait: new FormControl(lT),\n                labelValue: new FormControl(lV),\n                value: new FormControl(v, [Validators.required, Validators.minLength(0)]),\n                description: new FormControl(d, [Validators.required, Validators.minLength(0)]),\n            })\n        } else {\n            return this.formBuilder.group({\n                trait: new FormControl('', [Validators.required, Validators.minLength(0)]),\n                labelTrait: new FormControl(''),\n                labelValue: new FormControl(''),\n                value: new FormControl('', [Validators.required, Validators.minLength(0)]),\n                description: new FormControl(null, [Validators.required, Validators.minLength(0)])\n            })\n        }\n    }\n\n    createEvokes(e?, t?, i?, l?): FormGroup {\n\n        if (e != undefined) {\n            return this.formBuilder.group({\n                entity: e,\n                inferred : i,\n                label : l,\n                type: t,\n            })\n        } else {\n            return this.formBuilder.group({\n                entity: new FormControl(''),\n                inferred : new FormControl(false),\n                label : new FormControl(''),\n                type : new FormControl(''),\n            })\n        }\n    }\n\n    createDenotes(e?, t?): FormGroup {\n        if (e != undefined) {\n            return this.formBuilder.group({\n                entity: new FormControl(e, [Validators.required, Validators.pattern(this.urlRegex)]),\n                type: t\n            })\n        } else {\n            return this.formBuilder.group({\n                entity: new FormControl(null, [Validators.required, Validators.pattern(this.urlRegex)]),\n                type: null\n            })\n        }\n    }\n\n    createCognates(l?, lexName?, e?, t?, lila?): FormGroup {\n        if (e != undefined) {\n            return this.formBuilder.group({\n                label: new FormControl(l, [Validators.required]),\n                lexicalEntry: new FormControl(lexName, [Validators.required]),\n                entity: new FormControl(e, [Validators.required, Validators.pattern(this.urlRegex)]),\n                type: t,\n                lila: lila\n            })\n        } else {\n            return this.formBuilder.group({\n                label: new FormControl(null, [Validators.required]),\n                lexicalEntry: new FormControl(null, [Validators.required]),\n                entity: new FormControl(null, [Validators.required, Validators.pattern(this.urlRegex)]),\n                type: null,\n                lila: false\n            })\n        }\n    }\n\n    createSubtermComponent(e?, l?, lang?) {\n        if (e != undefined) {\n            return this.formBuilder.group({\n                entity: e,\n                label: l,\n                language: lang\n            })\n        } else {\n            return this.formBuilder.group({\n                entity: '',\n                label: '',\n                language: ''\n            })\n        }\n\n    }\n\n    addSubterm(e?, label?, lang?) {\n        this.subtermArray = this.coreForm.get('subterm') as FormArray;\n\n        if (e != undefined) {\n            this.subtermArray.push(this.createSubtermComponent(e, label, lang));\n            this.disableAddSubterm = false;\n        } else {\n            this.subtermArray.push(this.createSubtermComponent());\n            this.disableAddSubterm = true;\n        }\n\n\n    }\n\n    handleDenotes(evt, i) {\n\n        if (evt instanceof NgSelectComponent) {\n            if (evt.selectedItems.length > 0) {\n                let label = evt.selectedItems[0]['value']['lexicalEntry'];\n                this.onChangeDenotes({ name: label, i: i })\n            }\n        } else {\n            let label = evt.target.value;\n            this.denotes_subject.next({ name: label, i: i })\n        }\n    }\n\n    handleCognates(evt, i) {\n\n        if (evt instanceof NgSelectComponent) {\n            if (evt.selectedItems.length > 0) {\n                console.log(evt.selectedItems[0])\n                let label = \"\";\n                let instanceName = '';\n                if (evt.selectedItems[0]['value']['lexicalEntry'] == undefined) {\n                    label = evt.selectedItems[0]['value']['label'];\n                    instanceName = evt.selectedItems[0]['value']['labelValue'];\n                } else {\n                    label = evt.selectedItems[0]['value']['lexicalEntry'];\n                    instanceName = evt.selectedItems[0]['value']['lexicalEntry'];\n                }\n                this.onChangeCognates({ name: label, i: i, instance_name: instanceName })\n            }\n        } else {\n            let label = evt.target.value;\n            this.cognates_subject.next({ instance_name: label, i: i, external: true })\n        }\n    }\n\n    handleSubterm(evt, i) {\n\n        if (evt instanceof NgSelectComponent) {\n            if (evt.selectedItems.length > 0) {\n                console.log(evt.selectedItems[0])\n                let label = evt.selectedItems[0]['value']['label'];\n                let lexId = evt.selectedItems[0]['value']['lexicalEntry'];\n                this.onChangeSubterm({ name: label, lexicalEntry: lexId, i: i, object: evt.selectedItems[0]['value'] })\n            }\n        } else {\n            let label = evt.target.value;\n            this.ext_subterm_subject.next({ lexicalEntry: label, i: i })\n        }\n    }\n\n    async onChangeSubterm(data) {\n        var index = data['i'];\n        this.subtermArray = this.coreForm.get(\"subterm\") as FormArray;\n        if (this.memorySubterm[index] == undefined) {\n            const newValue = data['lexicalEntry']\n            const parameters = {\n                type: \"decomp\",\n                relation: \"http://www.w3.org/ns/lemon/decomp#subterm\",\n                value: newValue\n            }\n            console.log(parameters)\n\n            this.object['request'] = 'subterm'\n            let lexId = this.object.lexicalEntry;\n\n            try {\n                let change_subterm_req = await this.lexicalService.updateLinguisticRelation(lexId, parameters).toPromise();\n                console.log(change_subterm_req);\n                this.lexicalService.spinnerAction('off');\n                /* data['request'] = 0;\n                this.lexicalService.refreshAfterEdit(data); */\n                //this.lexicalService.updateLexCard(data) TODO: inserire updater per decomp qua\n                this.memorySubterm[index] = change_subterm_req;\n\n                this.subtermArray.at(index).patchValue({ entity: change_subterm_req.object.label, label: change_subterm_req['label'], language: change_subterm_req['language'] })\n                this.disableAddSubterm = false;\n\n                this.lexicalService.addSubElementRequest({ 'lex': this.object, 'data': change_subterm_req });\n            } catch (error) {\n                this.lexicalService.spinnerAction('off');\n                if (error.status == 200) {\n\n                    this.toastr.success('Subterm changed correctly for ' + lexId, '', {\n                        timeOut: 5000,\n                    });\n\n                    this.disableAddSubterm = false;\n                    this.memorySubterm[index] = this.object;\n                    data['request'] = 'subterm';\n                    this.subtermArray.at(index).patchValue({ entity: newValue, label: data.object.label, language: data.object.language })\n                    this.lexicalService.addSubElementRequest({ 'lex': this.object, 'data': data['object'] });\n                    //this.lexicalService.updateLexCard({ lastUpdate: error.error.text })\n\n                } else {\n                    this.toastr.error(error.error, 'Error', {\n                        timeOut: 5000,\n                    });\n\n                }\n            }\n\n        } else {\n            const oldValue = this.memorySubterm[index]['lexicalEntry']\n            const newValue = data['lexicalEntry']\n            const parameters = {\n                type: \"decomp\",\n                relation: \"http://www.w3.org/ns/lemon/decomp#subterm\",\n                value: newValue,\n                currentValue: oldValue\n            }\n\n            let lexId = this.object.lexicalEntry;\n            console.log(parameters);\n\n            try {\n                let change_subterm_req = await this.lexicalService.updateLinguisticRelation(lexId, parameters).toPromise();\n                console.log(change_subterm_req);\n                this.lexicalService.spinnerAction('off');\n                change_subterm_req['request'] = 0;\n                this.lexicalService.refreshAfterEdit(change_subterm_req);\n            } catch (error) {\n                console.log(error)\n                const data = this.object;\n                data['request'] = 0;\n\n\n\n                this.lexicalService.spinnerAction('off');\n                if (error.status == 200) {\n                    this.toastr.success('Label changed correctly for ' + lexId, '', {\n                        timeOut: 5000,\n                    });\n                } else {\n                    this.toastr.error(error.error, 'Error', {\n                        timeOut: 5000,\n                    });\n                }\n            }\n\n\n            this.memorySubterm[index] = data;\n        }\n\n\n    }\n\n    onChangeDenotes(data) {\n\n        if (data['name'] != '') {\n            var index = data['i'];\n            this.denotesArray = this.coreForm.get(\"denotes\") as FormArray;\n            if (this.memoryDenotes[index] == undefined) {\n                const newValue = data['name']\n                const parameters = {\n                    type: \"conceptRef\",\n                    relation: \"http://www.w3.org/ns/lemon/ontolex#denotes\",\n                    value: newValue\n                }\n                //console.log(parameters)\n                let lexId = this.object.lexicalEntry;\n                this.lexicalService.updateLinguisticRelation(lexId, parameters).pipe(takeUntil(this.destroy$)).subscribe(\n                    data => {\n                        console.log(data);\n                        this.disableAddDenotes = false;\n                        this.lexicalService.spinnerAction('off');\n                        data['request'] = 0;\n                        this.lexicalService.refreshAfterEdit(data);\n                        this.lexicalService.updateCoreCard(data)\n                    }, error => {\n                        console.log(error)\n\n                        /* this.toastr.error(error.error, 'Error', {\n                            timeOut: 5000,\n                        }); */\n\n\n                        this.lexicalService.spinnerAction('off');\n                        if (error.status == 200) {\n                            this.lexicalService.updateCoreCard({ lastUpdate: error.error.text })\n                            this.toastr.success('Denotes changed correctly for ' + lexId, '', {\n                                timeOut: 5000,\n                            });\n                            this.disableAddDenotes = false;\n                        } else {\n                            this.toastr.error(error.error, 'Error', {\n                                timeOut: 5000,\n                            });\n\n                        }\n                    }\n                )\n                this.memoryDenotes[index] = data;\n\n\n            } else {\n                const oldValue = this.memoryDenotes[index]['entity']\n                const newValue = data['name']\n                const parameters = {\n                    type: \"conceptRef\",\n                    relation: \"http://www.w3.org/ns/lemon/ontolex#denotes\",\n                    value: newValue,\n                    currentValue: oldValue\n                }\n\n                let lexId = this.object.lexicalEntry;\n                //console.log(parameters)\n                this.lexicalService.updateLinguisticRelation(lexId, parameters).pipe(takeUntil(this.destroy$)).subscribe(\n                    data => {\n                        console.log(data);\n                        this.lexicalService.spinnerAction('off');\n                        this.lexicalService.updateCoreCard(data)\n                        data['request'] = 0;\n                        this.lexicalService.refreshAfterEdit(data);\n                        this.disableAddDenotes = false;\n                    }, error => {\n                        console.log(error)\n                        if (error.status == 200) {\n                            const data = this.object;\n                            data['request'] = 0;\n\n                            //this.lexicalService.refreshAfterEdit(data);\n                            this.lexicalService.updateCoreCard({ lastUpdate: error.error.text })\n                            this.lexicalService.spinnerAction('off');\n                            this.toastr.success('Denotes changed correctly for ' + lexId, '', {\n                                timeOut: 5000,\n                            });\n                            this.disableAddDenotes = false;\n                        } else {\n                            this.toastr.error(error.error, 'Error', {\n                                timeOut: 5000,\n                            });\n                        }\n\n                    }\n                )\n                this.memoryDenotes[index] = data;\n            }\n        } else {\n            this.toastr.error('Empty value not allowed')\n        }\n\n\n\n    }\n\n    onChangeEvokes(data) {\n\n        if (data['name'] != '') {\n            var index = data['i'];\n            this.evokesArray = this.coreForm.get(\"evokes\") as FormArray;\n            if (this.memoryEvokes[index] == undefined) {\n                const newValue = data['name']\n                const parameters = {\n                    type: \"conceptRel\",\n                    relation: \"http://www.w3.org/ns/lemon/ontolex#evokes\",\n                    value: newValue\n                }\n                //console.log(parameters)\n                let lexId = this.object.lexicalEntry;\n\n                this.lexicalService.updateLinguisticRelation(lexId, parameters).pipe(takeUntil(this.destroy$)).subscribe(\n                    data => {\n                        console.log(data);\n                        this.disableAddDenotes = false;\n                        this.lexicalService.spinnerAction('off');\n                        data['request'] = 0;\n                        this.lexicalService.refreshAfterEdit(data);\n                        this.lexicalService.updateCoreCard(data)\n                    }, error => {\n                        console.log(error)\n\n                        /* this.toastr.error(error.error, 'Error', {\n                            timeOut: 5000,\n                        }); */\n\n\n                        this.lexicalService.spinnerAction('off');\n                        if (error.status == 200) {\n                            this.lexicalService.updateCoreCard({ lastUpdate: error.error.text })\n                            this.toastr.success('Evokes changed correctly for ' + lexId, '', {\n                                timeOut: 5000,\n                            });\n                            this.disableAddEvokes = false;\n                            this.memoryEvokes[index] = data;\n                        } else {\n                            this.toastr.error(error.error, 'Error', {\n                                timeOut: 5000,\n                            });\n\n                        }\n                    }\n                )\n                \n\n\n            } else {\n                const oldValue = this.memoryEvokes[index]['entity'] == undefined ? this.memoryEvokes[index]['name'] : this.memoryEvokes[index]['entity'];\n                const newValue = data['name']\n                const parameters = {\n                    type: \"conceptRel\",\n                    relation: \"http://www.w3.org/ns/lemon/ontolex#evokes\",\n                    value: newValue,\n                    currentValue: oldValue\n                }\n\n                let lexId = this.object.lexicalEntry;\n                //console.log(parameters)\n                this.lexicalService.updateLinguisticRelation(lexId, parameters).pipe(takeUntil(this.destroy$)).subscribe(\n                    data => {\n                        console.log(data);\n                        this.lexicalService.spinnerAction('off');\n                        this.lexicalService.updateCoreCard(data)\n                        data['request'] = 0;\n                        this.lexicalService.refreshAfterEdit(data);\n                        this.disableAddEvokes = false;\n                    }, error => {\n                        console.log(error)\n                        if (error.status == 200) {\n                            const data = this.object;\n                            data['request'] = 0;\n\n                            //this.lexicalService.refreshAfterEdit(data);\n                            this.lexicalService.updateCoreCard({ lastUpdate: error.error.text })\n                            this.lexicalService.spinnerAction('off');\n                            this.toastr.success('Denotes changed correctly for ' + lexId, '', {\n                                timeOut: 5000,\n                            });\n                            this.disableAddEvokes = false;\n                            this.memoryEvokes[index] = data;\n                        } else {\n                            this.toastr.error(error.error, 'Error', {\n                                timeOut: 5000,\n                            });\n                        }\n\n                    }\n                )\n                \n            }\n        } else {\n            this.toastr.error('Empty value not allowed')\n        }\n\n\n\n    }\n\n    onChangeCognates(data) {\n\n        var index = data['i'];\n        this.cognatesArray = this.coreForm.get(\"cognates\") as FormArray;\n\n        let existOrNot = this.memoryCognates.some(element => element?.entity == data.instance_name || element?.name == data.instance_name)\n\n        if (this.memoryCognates[index] == undefined && !existOrNot) {\n            let newValue = ''\n            if (this.cognatesArray.at(index).get('lila').value) {\n                newValue = data.instance_name\n\n            } else {\n                newValue = data.instance_name\n\n            }\n\n            const parameters = {\n                type: \"lexicalRel\",\n                relation: \"http://lari-datasets.ilc.cnr.it/lemonEty#cognate\",\n                value: newValue\n            }\n            console.log(parameters)\n            let lexId = this.object.lexicalEntry;\n            this.lexicalService.updateLinguisticRelation(lexId, parameters).pipe(takeUntil(this.destroy$)).subscribe(\n                data => {\n                    console.log(data);\n                    this.lexicalService.spinnerAction('off');\n                    data['request'] = 0;\n                    this.lexicalService.refreshAfterEdit(data);\n                    this.lexicalService.updateCoreCard(data)\n                    this.disableAddCognates = false;\n                }, error => {\n                    console.log(error)\n\n                    /* this.toastr.error(error.error, 'Error', {\n                        timeOut: 5000,\n                    }); */\n                    this.lexicalService.updateCoreCard({ lastUpdate: error.error.text })\n                    this.lexicalService.spinnerAction('off');\n                    if (error.status == 200) {\n                        this.disableAddCognates = false;\n                        this.toastr.success('Cognates changed correctly for ' + lexId, '', {\n                            timeOut: 5000,\n                        });\n\n                        if (this.cognatesArray.at(index).get('lila').value) {\n                            this.cognatesArray.at(index).get('entity').setValue(data.instance_name, { emitEvent: false });\n                            this.cognatesArray.at(index).get('type').setValue('external', { emitEvent: false });\n                            this.cognatesArray.at(index).get('lila').setValue(true, { emitEvent: false });\n                        } else {\n                            this.cognatesArray.at(index).get('lexicalEntry').setValue(this.object.lexicalEntry, { emitEvent: false });\n                            this.cognatesArray.at(index).get('entity').setValue(data.instance_name, { emitEvent: false });\n                            if(data.external){\n                                this.cognatesArray.at(index).get('type').setValue('external', { emitEvent: false });\n                            }else{\n                                this.cognatesArray.at(index).get('type').setValue('internal', { emitEvent: false });\n                            }\n                            \n                            this.cognatesArray.at(index).get('lila').setValue(false, { emitEvent: false });\n    \n                        }\n                    } else {\n                        this.toastr.error(error.error, 'Error', {\n                            timeOut: 5000,\n                        });\n\n                    }\n\n                    \n\n                }\n            )\n            this.memoryCognates[index] = data;\n\n\n        } else if (this.memoryCognates[index] != undefined && !existOrNot) {\n            const oldValue = this.memoryCognates[index]['entity'] == undefined ? this.memoryCognates[index]['instance_name'] : this.memoryCognates[index]['entity']\n            const newValue = data['instance_name']\n            const parameters = {\n                type: \"lexicalRel\",\n                relation: \"http://lari-datasets.ilc.cnr.it/lemonEty#cognate\",\n                value: newValue,\n                currentValue: oldValue\n            }\n\n            let lexId = this.object.lexicalEntry;\n            console.log(parameters)\n            this.lexicalService.updateLinguisticRelation(lexId, parameters).pipe(takeUntil(this.destroy$)).subscribe(\n                data => {\n                    console.log(data);\n                    this.lexicalService.spinnerAction('off');\n                    this.lexicalService.updateCoreCard(data)\n                    data['request'] = 0;\n                    this.lexicalService.refreshAfterEdit(data);\n                }, error => {\n                    console.log(error)\n                    /* const data = this.object;\n                    data['request'] = 0; */\n\n                    //this.lexicalService.refreshAfterEdit(data);\n                    this.lexicalService.updateCoreCard({ lastUpdate: error.error.text })\n                    this.lexicalService.spinnerAction('off');\n                    if (error.status == 200) {\n                        this.toastr.success('Label changed correctly for ' + lexId, '', {\n                            timeOut: 5000,\n                        });\n\n                        if (this.cognatesArray.at(index).get('lila').value) {\n                            this.cognatesArray.at(index).get('entity').setValue(data.instance_name, { emitEvent: false });\n                            this.cognatesArray.at(index).get('type').setValue('external', { emitEvent: false });\n                            this.cognatesArray.at(index).get('lila').setValue(true, { emitEvent: false });\n                        } else {\n                            this.cognatesArray.at(index).get('lexicalEntry').setValue(this.object.lexicalEntry, { emitEvent: false });\n                            this.cognatesArray.at(index).get('entity').setValue(data.instance_name, { emitEvent: false });\n                            if(data.external){\n                                this.cognatesArray.at(index).get('type').setValue('external', { emitEvent: false });\n                            }else{\n                                this.cognatesArray.at(index).get('type').setValue('internal', { emitEvent: false });\n                            }\n                            \n                            this.cognatesArray.at(index).get('lila').setValue(false, { emitEvent: false });\n    \n                        }\n                    } else {\n                        this.toastr.error(error.error, 'Error', {\n                            timeOut: 5000,\n                        });\n                    }\n                }\n            )\n            this.memoryCognates[index] = data;\n        } else if (existOrNot) {\n            this.toastr.error('This cognates already exist in this lexical entry', 'Error', {\n                timeOut: 5000\n            })\n        }\n\n\n    }\n\n     handleEvokes(evt, i) {\n \n         if (evt instanceof NgSelectComponent) {\n             if (evt.selectedItems.length > 0) {\n                 let label = evt.selectedItems[0].value['lexicalConcept']\n                 this.onChangeEvokes({ name: label, i: i })\n             }\n         } else {\n             let label = evt.target.value;\n             this.evokes_subject.next({ name: label, i: i })\n         }\n \n     }\n \n\n\n    addDenotes(e?, t?) {\n\n        this.denotesArray = this.coreForm.get(\"denotes\") as FormArray;\n        if (e != undefined) {\n            this.denotesArray.push(this.createDenotes(e, t));\n        } else {\n            this.disableAddDenotes = true;\n            this.denotesArray.push(this.createDenotes());\n        }\n\n    }\n\n    addEvokes(e?, t?, i?, l?) {\n\n        this.evokesArray = this.coreForm.get(\"evokes\") as FormArray;\n        if (e != undefined) {\n            this.evokesArray.push(this.createEvokes(e, t, i, l));\n        } else {\n            this.disableAddEvokes = true;\n            this.evokesArray.push(this.createEvokes());\n        }\n\n    }\n\n\n    addCognates(l?, lexIn?, e?, t?) {\n\n        setTimeout(() => {\n            //@ts-ignore\n            $('.cognates-tooltip').tooltip({\n                trigger: 'hover'\n            });\n        }, 1000);\n        this.cognatesArray = this.coreForm.get(\"cognates\") as FormArray;\n        if (e != undefined) {\n            let lila = false;\n            if (e.includes('lila')) {\n                lila = true;\n            }\n            this.cognatesArray.push(this.createCognates(l, lexIn, e, t, lila));\n        } else {\n            this.disableAddCognates = true;\n            this.cognatesArray.push(this.createCognates());\n        }\n\n    }\n\n\n\n    addMorphoTraits(t?, v?, d?, lT?, lV?) {\n\n        this.morphoTraits = this.coreForm.get('morphoTraits') as FormArray;\n        if (t != undefined) {\n            this.morphoTraits.push(this.createMorphoTraits(t, v, d, lT, lV));\n        } else {\n            this.disableAddMorpho = true;\n            this.morphoTraits.push(this.createMorphoTraits());\n        }\n    }\n\n    removeElement(index) {\n\n        this.memoryTraits.splice(index, 1);\n        this.valueTraits.splice(index, 1);\n        this.staticMorpho.splice(index, 1)\n\n        this.morphoTraits = this.coreForm.get('morphoTraits') as FormArray;\n\n        const trait = this.morphoTraits.at(index).get('trait').value;\n        const value = this.morphoTraits.at(index).get('value').value;\n\n\n\n        if (trait != '') {\n\n            let lexId = this.object.lexicalEntry;\n\n            let parameters = {\n                type: 'morphology',\n                relation: trait,\n                value: value\n            }\n\n            //console.log(parameters)\n\n            this.lexicalService.deleteLinguisticRelation(lexId, parameters).pipe(takeUntil(this.destroy$)).subscribe(\n                data => {\n                    //console.log(data)\n                    this.lexicalService.updateCoreCard(this.object)\n                    this.lexicalService.refreshAfterEdit({ request: 0, label: this.object.label });\n                    this.lexicalService.spinnerAction('off');\n                    this.lexicalService.refreshFilter({ request: true })\n                    this.toastr.success('Element removed correctly for ' + lexId, '', {\n                        timeOut: 5000,\n                    });\n                }, error => {\n                    //console.log(error)\n                    this.lexicalService.refreshAfterEdit({ request: 0, label: this.object.label });\n                    this.lexicalService.spinnerAction('off');\n                    this.lexicalService.refreshFilter({ request: true })\n                    this.lexicalService.updateCoreCard({ lastUpdate: error.error.text })\n                    if (error.status != 200) {\n                        this.toastr.error(error.error, 'Error', {\n                            timeOut: 5000,\n                        });\n                    } else {\n                        this.toastr.success('Element removed correctly for ' + lexId, '', {\n                            timeOut: 5000,\n                        });\n                    }\n                }\n            )\n        } else {\n            this.disableAddMorpho = false;\n        }\n\n\n        this.morphoTraits.removeAt(index);\n    }\n\n    removeDenotes(index) {\n        this.disableAddDenotes = false;\n        this.denotesArray = this.coreForm.get('denotes') as FormArray;\n\n        const entity = this.denotesArray.at(index).get('entity').value;\n\n        let lexId = this.object.lexicalEntry;\n\n        let parameters = {\n            relation: 'http://www.w3.org/ns/lemon/ontolex#denotes',\n            value: entity\n        }\n\n\n        if (entity != '') {\n            this.lexicalService.deleteLinguisticRelation(lexId, parameters).pipe(takeUntil(this.destroy$)).subscribe(\n                data => {\n                    console.log(data)\n                    this.lexicalService.updateCoreCard(this.object);\n                    this.toastr.success(\"Denotes removed\", '', {\n                        timeOut: 5000,\n                    });\n\n                }, error => {\n                    console.log(error)\n                    //this.lexicalService.updateCoreCard({ lastUpdate: error.error.text })\n                    this.toastr.error(error.error, 'Error', {\n                        timeOut: 5000,\n                    });\n                }\n            )\n        }\n\n\n        this.denotesArray.removeAt(index);\n\n        this.memoryDenotes.splice(index, 1)\n    }\n\n    removeEvokes(index) {\n        this.disableAddEvokes = false;\n        this.evokesArray = this.coreForm.get('evokes') as FormArray;\n\n        const entity = this.evokesArray.at(index).get('entity').value;\n\n        let lexId = this.object.lexicalEntry;\n\n        let parameters = {\n            relation: 'http://www.w3.org/ns/lemon/ontolex#evokes',\n            value: entity\n        }\n\n\n        if (entity != '') {\n            this.lexicalService.deleteLinguisticRelation(lexId, parameters).pipe(takeUntil(this.destroy$)).subscribe(\n                data => {\n                    console.log(data)\n                    this.lexicalService.updateCoreCard(this.object);\n                    this.toastr.success(\"Evokes removed\", '', {\n                        timeOut: 5000,\n                    });\n\n                }, error => {\n                    console.log(error)\n                    //this.lexicalService.updateCoreCard({ lastUpdate: error.error.text })\n                    if(error.status == 200){\n                        this.toastr.success('Evokes deleted correctly', '', {\n                            timeOut: 5000,\n                        });\n                    }else{\n                        this.toastr.error(error.error, 'Error', {\n                            timeOut: 5000,\n                        });\n                    }\n                    \n                }\n            )\n        }\n\n\n        this.evokesArray.removeAt(index);\n\n        this.memoryDenotes.splice(index, 1)\n    }\n\n    removeCognates(index) {\n        this.cognatesArray = this.coreForm.get('cognates') as FormArray;\n\n        const entity = this.cognatesArray.at(index).get('entity').value;\n\n        let lexId = this.object.lexicalEntry;\n\n        let parameters = {\n            relation: 'http://lari-datasets.ilc.cnr.it/lemonEty#cognate',\n            value: entity\n        }\n\n\n        if (entity != '') {\n            this.lexicalService.deleteLinguisticRelation(lexId, parameters).pipe(takeUntil(this.destroy$)).subscribe(\n                data => {\n                    console.log(data)\n                    this.lexicalService.updateCoreCard(this.object);\n                    /* this.annotatorService.closePanelForm(id);\n                    if(this.arrayComponents.length > 0){\n                    this.arrayComponents.forEach(instanceComponent => {\n                        if(instanceComponent.instance.id == id){\n                \n                        setTimeout(() => {\n                            instanceComponent.instance.formPanelModal.hide();\n                        }, 100);\n                        }\n                    })\n                    } */\n                    this.toastr.success(\"Cognate deleted successfully\", '', {\n                        timeOut: 5000,\n                    });\n\n                }, error => {\n                    console.log(error)\n                    //this.lexicalService.updateCoreCard({ lastUpdate: error.error.text })\n                    if(error.status == 200){\n                        this.toastr.success(\"Cognate removed correctly\", '', {\n                            timeOut: 5000,\n                        });\n                    }else{\n                        this.toastr.error(error.error, 'Error', {\n                            timeOut: 5000,\n                        });\n                    }\n                    \n                }\n            )\n        }\n\n        this.disableAddCognates = false;\n        this.cognatesArray.removeAt(index);\n\n        this.memoryCognates.splice(index, 1)\n    }\n\n    isEtymon(boolean: boolean) {\n\n        setTimeout(() => {\n            //@ts-ignore\n            $('.type-tooltip').tooltip({\n                trigger: 'hover'\n            });\n        }, 700);\n\n        this.lexicalService.spinnerAction('on');\n        let lexId = this.object.lexicalEntry;\n        let value = '';\n        if (boolean) {\n            value = 'http://lari-datasets.ilc.cnr.it/lemonEty#Etymon'\n            this.coreForm.get('type').setValue('Etymon', { emitEvent: false });\n            this.coreForm.get('type').disable({ onlySelf: true, emitEvent: false })\n            if (typeof (this.object.type != 'string')) {\n                this.object.type.push('Etymon');\n            } else {\n                this.object.type = 'Etymon'\n            }\n        } else {\n            value = 'http://www.w3.org/ns/lemon/ontolex#LexicalEntry'\n            this.coreForm.get('type').setValue('LexicalEntry', { emitEvent: false });\n            this.coreForm.get('type').enable({ onlySelf: true, emitEvent: false })\n            if (typeof (this.object.type != 'string')) {\n                this.object.type.splice(this.object.type.indexOf('Etymon'), 1);\n                if (this.object.type.length == 0) {\n                    this.object.type.push(value);\n                }\n            } else {\n                this.object.type = 'LexicalEntry';\n            }\n        }\n\n        let parameters = {\n            relation: 'http://www.w3.org/1999/02/22-rdf-syntax-ns#type',\n            value: value\n        }\n\n\n\n        this.lexicalService.updateLexicalEntry(lexId, parameters).pipe(takeUntil(this.destroy$)).subscribe(\n            data => {\n                console.log(data);\n                this.lexicalService.spinnerAction('off');\n                this.lexicalService.updateCoreCard(data)\n                this.lexicalService.refreshFilter({ request: true })\n\n                this.lexicalService.triggerSameAs(this.object.type)\n            },\n            error => {\n                console.log(error);\n                const data = this.object;\n                this.lexicalService.spinnerAction('off');\n\n\n                if (error.status == '200') {\n                    this.lexicalService.refreshFilter({ request: true })\n                    this.lexicalService.updateCoreCard({ lastUpdate: error.error.text })\n\n                    this.toastr.success('Lexical Entry updated', '', {\n                        timeOut: 5000\n                    })\n                    this.lexicalService.triggerSameAs(this.object.type)\n                } else {\n                    this.toastr.error(error.error, '', { timeOut: 5000 })\n                }\n\n\n            }\n        )\n    }\n\n    loadCognateData(cognateInstanceName, lexInstanceName, label) {\n        let panel = this.lexicalService.getPanelCognate(cognateInstanceName, lexInstanceName);\n        if (panel == undefined) {\n            this.lexicalService.getLexEntryData(cognateInstanceName).pipe(takeUntil(this.destroy$)).subscribe(\n                data => {\n                    console.log(data);\n                    if (data != undefined) {\n                        this.lexicalService.newPanelForm(cognateInstanceName, lexInstanceName);\n                        const factory = this.factory.resolveComponentFactory(CognatePanelComponent);\n                        const componentRef = this.vc.createComponent(factory);\n                        this.arrayComponents.push(componentRef);\n                        (<CognatePanelComponent>componentRef.instance).label = label;\n                        (<CognatePanelComponent>componentRef.instance).lexicalEntryId = lexInstanceName;\n                        (<CognatePanelComponent>componentRef.instance).cogInstanceName = cognateInstanceName;\n                        //(<CognatePanelComponent>componentRef.instance).id = idAnnotation;\n                        (<CognatePanelComponent>componentRef.instance).lexicalEntryData = data;\n                        (<CognatePanelComponent>componentRef.instance).triggerCognatePanel();\n                    }\n                }, error => {\n                    console.log(error)\n                }\n            )\n\n        } else {\n\n        }\n\n    }\n\n    async removeSubterm(index) {\n\n\n        if (this.object.lexicalEntry != undefined) {\n            this.subtermArray = this.coreForm.get('subterm') as FormArray;\n\n            let entity = this.subtermArray.at(index).get('entity').value;\n            let lexId = this.object.lexicalEntry;\n\n            let parameters = {\n                relation: \"http://www.w3.org/ns/lemon/decomp#subterm\",\n                value: entity\n            }\n\n            if (entity != '') {\n                try {\n                    let delete_linguistic_rel_req = await this.lexicalService.deleteLinguisticRelation(lexId, parameters).toPromise();\n                    console.log(delete_linguistic_rel_req);\n                    this.toastr.info('Subterm removed correctly', 'Info', {\n                        timeOut: 5000\n                    })\n                    this.lexicalService.deleteRequest({ subterm: entity, parentNode: this.object.lexicalEntry });\n                } catch (error) {\n                    console.log(error)\n                    if (error.status == 200) {\n                        this.toastr.info('Subterm removed correctly', 'Info', {\n                            timeOut: 5000\n                        })\n                        this.lexicalService.deleteRequest({ subterm: entity, parentNode: this.object.lexicalEntry });\n                    } else {\n                        this.toastr.error(\"Something went wrong, please check the log\", \"Error\", { timeOut: 5000 })\n                    }\n                }\n            }else{\n                //null\n            }\n\n            \n\n        }\n\n        this.subtermArray.removeAt(index);\n        this.memorySubterm.splice(index, 1);\n        this.disableAddSubterm = false;\n    }\n\n    ngOnDestroy(): void {\n        this.denotes_subject_subscription.unsubscribe();\n        this.cognates_subject_subscription.unsubscribe();\n        this.update_lang_subscription.unsubscribe();\n        this.get_languages_subscription.unsubscribe();\n        this.subject_subscription.unsubscribe();\n        this.subterm_subject.unsubscribe();\n        this.destroy$.next(true);\n        this.destroy$.complete();\n    }\n}\n","<form [formGroup]=\"coreForm\" *ngIf=\"object != null\">\n    <div *ngIf=\"{etymon : coreForm.get('type').value == 'Etymon'}; let variable\">\n        <div class=\"form-group row m-2\">\n            <label for=\"inputLabel\" class=\"col-lg-3 col-form-label\">Label:</label>\n            <div class=\"input-group col-lg-7\">\n                <input id=\"label\" formControlName=\"label\" name=\"label\" type=\"text\" class=\"form-control\" placeholder=\"\"\n                    required>\n\n                <div class=\"invalid-feedback\" *ngIf=\"emptyLabelFlag\" style=\"display: block;\">\n                    Please, insert at least two characters.\n                </div>\n            </div>\n        </div>\n        <!-- <div class=\"form-group row m-2\">\n            <div class=\"col-lg-3\">\n                <div class=\"form-check p-0\">\n                    <label class=\"form-check-label\" for=\"gridCheck1\">\n                        Etymon\n                    </label>\n                    <input [checked]=\"coreForm.get('type').value == 'Etymon'\" class=\"form-check-input\" style=\"margin-left: 10px;\" type=\"checkbox\" id=\"gridCheck1\" onchange=\"document.getElementById('typeSelect').disabled = checked;\" (change)=\"variable.etymon = !variable.etymon; isEtymon(variable.etymon);\">\n                </div>\n            </div>\n        </div> -->\n\n        <div class=\"form-group row m-2\">\n            <div class=\"col-lg-3\">\n                <label class=\"\" for=\"sw\">Etymon</label>\n            </div>\n            <div class=\"col-lg-9\">\n                <div class=\"custom-control custom-switch d-inline\" id=\"sw\">\n                    <input type=\"checkbox\" class=\"custom-control-input\" id=\"edit_extra_block\" name=\"extra_block\"\n                        value=\"\" [checked]=\"coreForm.get('type').value == 'Etymon'\" style=\"margin-left: 10px;\"\n                        onchange=\"document.getElementById('typeSelect').disabled = this.checked;\"\n                        (change)=\"variable.etymon = !variable.etymon; isEtymon(variable.etymon);\">\n                    <label class=\"custom-control-label\" for=\"edit_extra_block\"></label>\n                </div>\n            </div>\n        </div>\n\n        <div class=\"form-group row m-2\">\n            <div class=\"col-lg-3\">\n                <label for=\"uncertainBox\">Uncertain</label>\n            </div>\n\n            <div class=\"col-lg-3 input-group uncertain\">\n                <input formControlName=\"confidence\" name=\"confidence\" type=\"checkbox\"\n                    [checked]=\"coreForm.get('confidence').value\">\n                <!-- <input *ngIf=\"variable.confidence\" id=\"attributes\"  step=\"0.1\" formControlName=\"confidence\" name=\"confidence\" type=\"number\" min=\"0\" max=\"1\" class=\"form-control\" placeholder=\"No info\" [value]=\"coreForm.get('confidence').value\">\n                <button type=\"button\" class=\"btn btn-secondary btn-sm ml-2\" *ngIf=\"!variable.confidence\" (click)=\"variable.confidence = !variable.confidence\"><i class=\"fas fa-plus\"></i></button>\n                <button type=\"button\" class=\"btn btn-secondary btn-sm ml-2\" *ngIf=\"variable.confidence\" (click)=\"variable.confidence = !variable.confidence; applyUncertain()\"><i class=\"fas fa-minus\"></i></button> -->\n            </div>\n        </div>\n\n        <div class=\"form-group row m-2\" *ngIf=\"!variable.etymon\">\n            <div class=\"col-lg-3 col-form-label\">\n                <label for=\"inputType\">Type:</label>\n            </div>\n            <div class=\"col-lg-9 input-group\">\n                <select id=\"typeSelect\" class=\"form-control\" formControlName=\"type\">\n                    <option *ngFor=\"let lx of lexEntryTypesData\" [value]=\"lx['valueId']\"\n                        [selected]=\"coreForm.get('type').value.split('#')[1] == lx['valueId'].split('#')[1]\">\n                        {{lx['valueLabel']}}\n                    </option>\n                </select>\n                <div class=\"input-group-append ml-2\">\n                    <button *ngIf=\"!variable.etymon\" class=\"btn btn-secondary type-tooltip\" type=\"button\"\n                        placement=\"top\" container=\"body\" [ngbTooltip]=\"typeDesc\"\n                        style=\"font-size: 12px; border-radius: .25rem;\"><i class=\"fas fa-question\"></i></button>\n                    <button *ngIf=\"variable.etymon\" class=\"btn btn-secondary type-tooltip\" type=\"button\"\n                        data-toggle=\"tooltip\" data-placement=\"top\" data-trigger=\"hover\"\n                        title=\"Etymon' is a subclass of Lexical Entry that consists of individuals whose role is to describe the origin and history of another Lexical Entry.\"\n                        style=\"font-size: 12px; border-radius: .25rem;\"><i class=\"fas fa-question\"></i></button>\n                </div>\n                <div class=\"input-group-append ml-2\">\n                    <button [style.visibility]=\"coreForm.get('isCognate').value ? 'visible' : 'hidden'\"\n                        class=\"btn btn-warning type-tooltip\" type=\"button\" data-toggle=\"tooltip\" data-placement=\"top\"\n                        data-trigger=\"hover\"\n                        title=\"In linguistics, cognates, also called lexical cognates, are words that have a common etymological origin.\"\n                        style=\"font-size: 12px; border-radius: .25rem;\">Cognate</button>\n                </div>\n            </div>\n        </div>\n        <div class=\"form-group row m-2\">\n            <label for=\"inputLanguage\" class=\"col-lg-3 col-form-label\">Language:</label>\n            <div class=\"col-lg-7\">\n                <select formControlName=\"language\" name=\"language\" class=\"form-control\"\n                    (change)=\"onChangeLanguage($event)\">\n                    <option value=\"\">Select language....</option>\n                    <option *ngFor=\"let la of languages\" [value]=\"la['label'].toLowerCase()\"\n                        [selected]=\"object.language.toLowerCase() == la['label'].toLowerCase()\">{{la['label']}}\n                    </option>\n                </select>\n                <div class=\"invalid-feedback\" *ngIf=\"coreForm.get('language').value == ''\" style=\"display: block;\">\n                    Please, don't leave this field blank\n                </div>\n            </div>\n        </div>\n    </div>\n\n\n    <!-- MORPHOLOGY -->\n    <div class=\"form-group row m-2\">\n        <div class=\"input-group col-lg-12\">\n            <div class=\"card\">\n                <span class=\"text-id\"><b>MORPHOLOGY</b></span>\n                <a class=\"pointer\" (click)=\"addMorphoTraits()\" [ngClass]=\"{no_pointer: disableAddMorpho}\"><span\n                        class=\"collapse-icon\"><i class=\"fa fa-plus-square\"></i></span></a>\n                <div class=\"card-body\">\n                    <div class=\"d-flex my-3\">\n                        <div class=\"col-md-4\">\n                            <label for=\"selectPos\" class=\"col-form-label\">Part of speech:</label>\n                        </div>\n                        <div class=\"input-group col-md-8\">\n                            <select class=\"form-control selectTrait\" style=\"font-size:12px;\"\n                                (change)=\"onChangePos($event)\">\n                                <option value=\"\">Select a value...</option>\n                                <option *ngFor=\"let item of valuePos;\"\n                                    [selected]=\"item.valueId.split('#')[1] == object.pos\" [value]=\"item.valueId\">\n                                    {{item.valueLabel}}</option>\n                            </select>\n                            <div class=\"input-group-append ml-2\">\n                                <button class=\"btn btn-secondary pos-tooltip\" type=\"button\" placement=\"top\"\n                                    container=\"body\" [ngbTooltip]=\"posDescription\"\n                                    style=\"font-size: 12px; border-radius: .25rem;\"><i\n                                        class=\"fas fa-question\"></i></button>\n                            </div>\n\n                            <div class=\"invalid-feedback\" *ngIf=\"!coreForm.get('pos').valid\" style=\"display: block;\">\n                                Please, don't leave this field blank\n                            </div>\n\n                        </div>\n                    </div>\n\n\n                    <ng-container *ngFor=\"let stat of staticMorpho; let i = index\">\n                        <div class=\"d-flex my-3\"\n                            *ngIf=\"stat['trait'] != 'http://www.lexinfo.net/ontology/3.0/lexinfo#partOfSpeech'\">\n                            <div class=\"col-md-4\">\n                                <label class=\"col-form-label\">{{stat['trait'].split('#')[1]}}</label>\n                            </div>\n                            <div class=\"input-group col-md-8\">\n                                <select class=\"form-control selectTrait\" style=\"font-size:12px;\"\n                                    (change)=\"onChangeExistingValue($event, i)\">\n                                    <option *ngFor=\"let item of valueTraits[i];\"\n                                        [selected]=\"stat['value'] === item.valueId\" [value]=\"item.valueId\">\n                                        {{item.valueLabel}}</option>\n                                </select>\n                                <div class=\"input-group-append ml-2\">\n                                    <button *ngIf=\"coreForm['controls'].morphoTraits?.value[i] != null\"\n                                        class=\"btn btn-secondary trait-tooltip\" type=\"button\" placement=\"top\"\n                                        container=\"body\"\n                                        [ngbTooltip]=\"coreForm.get('morphoTraits').at(i).get('description').value\"\n                                        style=\"font-size: 12px; border-radius: .25rem;\"><i\n                                            class=\"fas fa-question\"></i></button>\n\n                                </div>\n                                <div (click)=\"removeElement(i)\" class=\"input-group-append ml-2\"> <button\n                                        class=\"btn btn-danger\" type=\"button\"\n                                        style=\"font-size: 12px; border-radius: .25rem;\"><i\n                                            class=\"fa fa-trash-alt\"></i></button>\n                                </div>\n                            </div>\n                        </div>\n                    </ng-container>\n\n                    <ng-container formArrayName=\"morphoTraits\"\n                        *ngFor=\"let morpho of coreForm.get('morphoTraits')['controls']; let i = index\">\n                        <div class=\"d-flex my-2\" *ngIf=\"i + 1 > staticMorpho.length\">\n                            <div class=\"col-md-4\" [formGroupName]=\"i\">\n                                <select class=\"form-control selectTrait\" formControlName=\"trait\" name=\"trait\"\n                                    style=\"font-size: 12px;\" (change)=\"onChangeTrait($event, i)\">\n                                    <option value=\"\">Select a trait...</option>\n                                    <option *ngFor=\"let mt of morphologyData\"\n                                        [selected]=\"morpho.value['trait'] === mt.propertyId\" [value]=\"mt.propertyId\"\n                                        [disabled]=\"memoryTraits.indexOf(mt.propertyId) > -1 || mt.propertyId == 'http://www.lexinfo.net/ontology/3.0/lexinfo#partOfSpeech'\">\n                                        {{mt.propertyLabel}}</option>\n                                </select>\n                                <div class=\"invalid-feedback\" *ngIf=\"morpho.get('trait').invalid\"\n                                    style=\"display: block;\">\n                                    Please, don't leave this field blank\n                                </div>\n                            </div>\n                            <div class=\"input-group col-md-8\" [formGroupName]=\"i\">\n                                <select class=\"form-control selectTrait\" formControlName=\"value\" name=\"value\"\n                                    style=\"font-size:12px;\" (change)=\"onChangeValue(i)\">\n                                    <option value=\"\">Select a value...</option>\n                                    <option *ngFor=\"let item of valueTraits[i];\" [attr.data-index]=\"i\"\n                                        [selected]=\"morpho.value['value'] === item.valueId\" [value]=\"item.valueId\">\n                                        {{item.valueLabel}}</option>\n                                </select>\n                                <div (click)=\"removeElement(i)\" class=\"input-group-append ml-2\"> <button\n                                        class=\"btn btn-danger\" type=\"button\"\n                                        style=\"font-size: 12px; border-radius: .25rem;\"><i\n                                            class=\"fa fa-trash-alt\"></i></button>\n                                </div>\n                                <div class=\"invalid-feedback\" *ngIf=\"morpho.get('value').invalid\"\n                                    style=\"display: block;\">\n                                    Please, don't leave this field blank\n                                </div>\n                            </div>\n                        </div>\n\n                    </ng-container>\n\n\n\n                </div>\n            </div>\n        </div>\n    </div>\n\n    <div class=\"form-group row m-2 mt-3\">\n        <label for=\"inputLabel\" class=\"col-lg-3 col-form-label\">Stem type:</label>\n        <div class=\"input-group col-lg-7\">\n            <input id=\"stemType\" formControlName=\"stemType\" name=\"stemType\" type=\"text\" class=\"form-control\"\n                placeholder=\"Insert Stem Type...\" required>\n            <!-- <div class=\"invalid-feedback\" *ngIf=\"emptyLabelFlag\" style=\"display: block;\">\n                Please, insert at least three characters.\n            </div> -->\n        </div>\n    </div>\n\n\n    <div class=\"form-group row m-2\">\n        <div class=\"input-group col-lg-12\">\n            <div class=\"card\">\n                <span class=\"text-id\"><b>EVOKES</b></span>\n                <a class=\"pointer\" (click)=\"addEvokes()\" [ngClass]=\"{no_pointer: disableAddEvokes}\"><span\n                        class=\"collapse-icon\"><i class=\"fa fa-plus-square\"></i></span></a>\n                <div class=\"card-body\">\n                    <div class=\"form-group row m-2\" formArrayName=\"evokes\"\n                        *ngFor=\"let evoke of coreForm.get('evokes')['controls']; let i = index\">\n                        <div class=\"input-group col-xl-12\" [formGroupName]=\"i\" >\n                           \n                            <ng-select #select_evokes formControlName=\"label\" name=\"label\" [dropdownPosition]=\"'top'\"\n                                (keyup)=\"triggerEvokes($event, i)\" (change)=\"handleEvokes(select_evokes, i)\"\n                                [items]=\"searchResults\" bindValue=\"defaultLabel\"  (focus)=\"deleteData()\" bindLabel=\"defaultLabel\"\n                                placeholder=\"Search lexical concept\" appendTo=\"body\" [clearable]=\"false\"\n                                >\n                                <ng-template ng-option-tmp let-item=\"item\" let-search=\"searchTerm\">\n                                    <div>\n                                        <span>{{item.defaultLabel}} </span><span style=\"color: blue;\">@{{item.language}}</span>\n                                    </div>\n\n                                </ng-template>\n\n                                \n                            </ng-select>\n                            <!-- <input formControlName=\"entity\" name=\"entity\" type=\"text\"\n                                [value]=\"evoke.get('entity').value\" class=\"form-control\" placeholder=\"Insert URI\"\n                                (keyup)=\"handleEvokes($event, i)\" *ngIf=\"variable.switch\"> -->\n                            <!-- <div class=\"input-group-append ml-2\" *ngIf=\"evoke.get('entity').value != ''\">\n                                <a [href]=\"evoke.get('entity').value\" target=\"_blank\" class=\"btn btn-primary\"\n                                    type=\"button\"><i class=\"fa fa-external-link-alt\"></i></a>\n                            </div> -->\n                            <div class=\"input-group-append ml-2\">\n                                <button (click)=\"removeEvokes(i)\" class=\"btn btn-danger\" type=\"button\"><i\n                                        class=\"fa fa-trash-alt\"></i></button>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n\n    <div class=\"form-group row ml-2 mt-3 mr-2\" *ngIf=\"isMultiword\">\n        <div class=\"input-group col-xl-12\">\n            <div class=\"card\">\n                <span class=\"text-id\"><b>SUBTERM</b></span>\n                <a class=\"pointer\" (click)=\"addSubterm()\"><span class=\"collapse-icon\"\n                        [class.disabled]=\"disableAddSubterm\"><i class=\"fa fa-plus-square\"></i></span></a>\n                <!-- <a class=\"pointer\" (click)=\"removeSubterm(i)\"><span class=\"trash-icon\"><i class=\"fa fa-trash\"></i></span></a> -->\n                <div class=\"card-body\">\n\n\n\n                    <!-- SUB-TERM -->\n                    <div formArrayName=\"subterm\" class=\"col-xl-12\">\n                        <div *ngFor=\"let sub of coreForm['controls'].subterm['controls']; let i = index\">\n                            <div [formGroupName]=\"i\" class=\"d-xl-flex\" style=\"align-items: center;\">\n                                <div class=\"form-group row ml-2 mt-2 mr-2 w-100\">\n                                    <div class=\"input-group\">\n                                        <ng-select #select_subterm formControlName=\"label\" name=\"label\"\n                                            [dropdownPosition]=\"'top'\" (keyup)=\"triggerSubterm($event)\"\n                                            (change)=\"handleSubterm(select_subterm, i)\" [items]=\"searchResults\"\n                                            bindValue=\"label\" (focus)=\"deleteData()\" bindLabel=\"label\"\n                                            placeholder=\"Search lexical entries\" appendTo=\"body\">\n                                            <ng-template ng-option-tmp let-item=\"item\" let-search=\"searchTerm\">\n                                                <div>\n                                                    <span>{{item.label}} </span><span\n                                                        style=\"color: blue;\">@{{item.language}}</span>\n                                                </div>\n\n                                            </ng-template>\n                                        </ng-select>\n\n                                        <!-- <div class=\"input-group-append ml-2\">\n                                            <button class=\"btn btn-primary\" type=\"button\"><i\n                                                    class=\"fa fa-external-link-alt\"></i></button>\n                                        </div> -->\n                                        <div class=\"input-group-append ml-2\">\n                                            <button (click)=\"removeSubterm(i)\" class=\"btn btn-danger\" type=\"button\"><i\n                                                    class=\"fa fa-trash-alt\"></i></button>\n                                        </div>\n                                        <!--  <div class=\"input-group-append ml-2\">\n                                            <button  class=\"btn btn-outline-primary invisible\" type=\"button\"><i class=\"fa fa-plus\"></i></button>\n                                        </div> -->\n                                    </div>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n\n    <div class=\"form-group row m-2\">\n        <div class=\"input-group col-lg-12\">\n            <div class=\"card\">\n                <span class=\"text-id\"><b>COGNATES</b></span>\n                <a class=\"pointer\" (click)=\"addCognates()\" [ngClass]=\"{no_pointer: disableAddCognates}\"><span\n                        class=\"collapse-icon\"><i class=\"fa fa-plus-square\"></i></span></a>\n                <div class=\"card-body\">\n                    <div class=\"form-group row m-2\" formArrayName=\"cognates\"\n                        *ngFor=\"let cog of coreForm.get('cognates')['controls']; let i = index\">\n                        <div class=\"input-group col-xl-12\" [formGroupName]=\"i\" *ngIf=\"{switch : false}; let variable\">\n                            <!-- {{variable.switch}}\n                            {{cog.get('lila').value}} -->\n                            <ng-select #select_cognates formControlName=\"label\" name=\"label\" [dropdownPosition]=\"'top'\"\n                                (keyup)=\"triggerCognates($event, i)\" (change)=\"handleCognates(select_cognates, i)\"\n                                [items]=\"searchResults\" bindValue=\"label\" (focus)=\"deleteData()\" bindLabel=\"label\"\n                                placeholder=\"Search cognates\" appendTo=\"body\"\n                                *ngIf=\"!variable.switch || cog.get('lila').value && cog.get('type').value == 'internal'\">\n                                <ng-template ng-option-tmp let-item=\"item\" let-search=\"searchTerm\"\n                                    *ngIf=\"!cog.get('lila').value\">\n                                    <div>\n                                        <span>{{item.label}} </span><span style=\"color: blue;\">@{{item.language}}</span>\n                                    </div>\n\n                                </ng-template>\n\n                                <ng-template ng-option-tmp let-item=\"item\" let-search=\"searchTerm\"\n                                    *ngIf=\"cog.get('lila').value\">\n\n                                    <div class=\"card-body p-0\">\n                                        <h6 class=\"card-title m-0\" [ngOptionHighlight]=\"search\">{{item.label}}</h6>\n                                        <small>\n                                            <span>\n                                                {{item.labelPos}}\n                                            </span>\n                                        </small>\n                                        <small class=\"card-text\">\n\n\n                                        </small>\n\n                                    </div>\n\n                                </ng-template>\n                            </ng-select>\n                            <input formControlName=\"entity\" name=\"entity\" type=\"text\" [value]=\"cog.get('entity').value\"\n                                class=\"form-control\" placeholder=\"Insert URI\"\n                                *ngIf=\"variable.switch  && !cog.get('lila').value\" (keyup)=\"handleCognates($event, i)\">\n                            <div class=\"input-group-append ml-3 form-check\" style=\"align-items: center;\">\n                                <input class=\"form-check-input cognates-tooltip\" type=\"checkbox\"\n                                    (change)=\"variable.switch=!variable.switch\" data-toggle=\"tooltip\"\n                                    data-placement=\"bottom\" data-trigger=\"hover\"\n                                    title=\"Clicca per inserire un URI manualmente\">\n                            </div>\n                            <div class=\"input-group-append ml-2\"\n                                *ngIf=\"cog.get('type').value == 'external' && cog.get('entity').value != ''\"\n                                container=\"body\" placement=\"top\" ngbTooltip=\"Open in Lila Page\">\n                                <a [href]=\"cog.get('entity').value\" target=\"_blank\" class=\"btn btn-info\"\n                                    type=\"button\"><i class=\"fas fa-globe-europe\"></i></a>\n                            </div>\n                            <div class=\"input-group-append ml-2\"\n                                *ngIf=\"cog.get('type').value == 'internal' && cog.get('entity').value != ''\"\n                                container=\"body\" placement=\"top\" ngbTooltip=\"Open in new panel\">\n                                <a (click)=\"loadCognateData(cog.get('entity').value, cog.get('lexicalEntry').value, cog.get('label').value); \"\n                                    class=\"btn btn-primary\" type=\"button\"><i class=\"fas fa-external-link-alt\"></i></a>\n                            </div>\n                            <div class=\"input-group-append ml-2\" *ngIf=\"!variable.switch\">\n                                <div class=\"btn-group-toggle\" data-toggle=\"buttons\" placement=\"top\"\n                                    ngbTooltip=\"Enable LiLa endpoint\" title=\"Enable LiLa endpoint\">\n                                    <label class=\"btn btn-secondary\">\n                                        <input type=\"checkbox\" autocomplete=\"off\" formControlName=\"lila\" name=\"lila\"\n                                            style=\"border-radius: .3rem;\">\n                                        <i class=\"fas fa-project-diagram\"></i>\n                                        <!--                                       <img src=\"../../../../../../../assets/images/graphql.png\" alt=\"Avatar\" class=\"image\" style=\"height: 20px;\">\n -->\n                                    </label>\n                                </div>\n                            </div>\n                            <div class=\"input-group-append ml-2\">\n                                <button (click)=\"removeCognates(i)\" class=\"btn btn-danger\" type=\"button\"><i\n                                        class=\"fa fa-trash-alt\"></i></button>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n\n</form>\n\n<!-- {{coreForm.value | json}} -->\n\n<ng-template #cognatePanel></ng-template>","/*\n   Copyright 2021-2022  Istituto di Linguistica Computazionale \"A. Zampolli\", Consiglio Nazionale delle Ricerche, Pisa, Italy.\n \nThis file is part of EpiLexo.\n\nEpiLexo is free software: you can redistribute it and/or modify it under the terms of the GNU General Public License as published by the Free Software Foundation, either version 3 of the License, or (at your option) any later version.\n\nEpiLexo is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for more details.\n\nYou should have received a copy of the GNU General Public License along with EpiLexo. If not, see <https://www.gnu.org/licenses/>.\n*/\n\nimport { enableProdMode } from '@angular/core';\nimport { platformBrowserDynamic } from '@angular/platform-browser-dynamic';\n\nimport { AppModule } from './app/app.module';\nimport { environment } from './environments/environment';\n\nif (environment.production) {\n  enableProdMode();\n}\n\nplatformBrowserDynamic().bootstrapModule(AppModule)\n  .catch(err => console.error(err));\n","function webpackEmptyAsyncContext(req) {\n\t// Here Promise.resolve().then() is used instead of new Promise() to prevent\n\t// uncaught exception popping up in devtools\n\treturn Promise.resolve().then(function() {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t});\n}\nwebpackEmptyAsyncContext.keys = function() { return []; };\nwebpackEmptyAsyncContext.resolve = webpackEmptyAsyncContext;\nmodule.exports = webpackEmptyAsyncContext;\nwebpackEmptyAsyncContext.id = \"zn8P\";","/*\n   Copyright 2021-2022  Istituto di Linguistica Computazionale \"A. Zampolli\", Consiglio Nazionale delle Ricerche, Pisa, Italy.\n \nThis file is part of EpiLexo.\n\nEpiLexo is free software: you can redistribute it and/or modify it under the terms of the GNU General Public License as published by the Free Software Foundation, either version 3 of the License, or (at your option) any later version.\n\nEpiLexo is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for more details.\n\nYou should have received a copy of the GNU General Public License along with EpiLexo. If not, see <https://www.gnu.org/licenses/>.\n*/\n\nimport { Component, Input, OnDestroy, OnInit, SimpleChanges } from '@angular/core';\nimport { ToastrService } from 'ngx-toastr';\nimport { Subscription } from 'rxjs';\nimport { LexicalEntriesService } from 'src/app/services/lexical-entries/lexical-entries.service';\n\n@Component({\n  selector: 'app-link-panel',\n  templateUrl: './link-panel.component.html',\n  styleUrls: ['./link-panel.component.scss']\n})\nexport class LinkPanelComponent implements OnInit, OnDestroy {\n\n  @Input() linkData: any[] | any;\n  \n  seeAlsoData : {};\n  sameAsData : {};\n  counterElement = 0;\n  object : any;\n\n  refresh_subscription : Subscription;\n\n  constructor(private lexicalService: LexicalEntriesService, private toastr : ToastrService) { }\n\n  ngOnInit(): void {\n\n    this.refresh_subscription = this.lexicalService.refreshLinkCounter$.subscribe(\n      data=>{\n        console.log(data)\n        if(data!=null){\n          this.counterElement = eval(this.counterElement.toString()+data)\n        }\n      },error=>{\n        console.log(error)\n      }\n    )\n  }\n\n  async ngOnChanges(changes: SimpleChanges){\n    if(changes.linkData.currentValue != null){\n      this.counterElement = 0;\n      this.object = changes.linkData.currentValue;\n      this.sameAsData = null;\n      this.seeAlsoData = null;\n      let lexicalElementId = '';\n      let instanceNameType = '';\n      let parameters = {};\n      if (this.object.lexicalEntry != undefined && this.object.form == undefined && this.object.sense == undefined) {\n        lexicalElementId = this.object.lexicalEntry;\n        instanceNameType = 'lexicalEntry'\n      } else if (this.object.form != undefined) {\n        lexicalElementId = this.object.form;\n        instanceNameType = 'form'\n      } else if (this.object.sense != undefined) {\n        lexicalElementId = this.object.sense;\n        instanceNameType = 'sense'\n      } else if (this.object.etymology != undefined) {\n        lexicalElementId = this.object.etymology;\n        instanceNameType = 'etymology'\n      } else if(this.object.lexicalConcept != undefined) {\n        lexicalElementId = this.object.lexicalConcept;\n        instanceNameType = 'lexicalConcept'\n      }\n      /* //console.log(changes.linkData.currentValue) */\n\n\n      try{\n        let same_as_data = await this.lexicalService.getLexEntryGenericRelation(lexicalElementId, 'sameAs').toPromise()\n        console.log(same_as_data)\n        this.sameAsData = {}\n        this.sameAsData['array'] = same_as_data;\n        if(instanceNameType == 'lexicalEntry'){\n          this.sameAsData['parentNodeLabel']= this.object['lexicalEntry'];\n        }\n        this.sameAsData[instanceNameType]= this.object[instanceNameType];\n        this.sameAsData['type'] = this.object.type;\n      }catch(e){\n        if(e.status == 200){\n          this.sameAsData = {}\n          this.sameAsData['array'] = [];\n          if(instanceNameType == 'lexicalEntry'){\n            this.sameAsData['parentNodeLabel']= this.object['lexicalEntry'];\n          }\n          this.sameAsData[instanceNameType]= this.object[instanceNameType];\n          this.sameAsData['label']= this.object['label'];\n          this.sameAsData['type'] = this.object.type;\n          console.log(e);\n        }else{\n          //this.toastr.info(e.error.text, 'Info', {timeOut: 5000})\n        }\n        \n      }\n      \n      try{\n        let see_also_data = await this.lexicalService.getLexEntryGenericRelation(lexicalElementId, 'seeAlso').toPromise();\n        console.log(see_also_data)\n        this.seeAlsoData = {}\n        this.seeAlsoData['array'] = see_also_data;\n        this.seeAlsoData['parentNodeLabel']= this.object['lexicalEntry'];\n        this.seeAlsoData[instanceNameType]= this.object[instanceNameType];\n      }catch(e){\n        this.seeAlsoData = {}\n        this.seeAlsoData['array'] = [];\n        this.seeAlsoData['parentNodeLabel']= this.object['lexicalEntry'];\n        this.seeAlsoData[instanceNameType]= this.object[instanceNameType];\n      }\n      \n\n      //console.log(this.object)\n      if(this.object.links != undefined){\n        this.object.links.forEach(element => {\n          if(element.type != undefined){\n            if(element.type == 'Reference'){\n              element.elements.forEach(sub => {\n                this.counterElement += sub.count;\n              });\n            }\n          }\n        });\n      }\n      \n    \n      \n    }else{\n      this.counterElement = 0;\n      this.sameAsData = null;\n      this.seeAlsoData = null;\n    }\n  }\n\n  \n  ngOnDestroy(): void {\n      this.refresh_subscription.unsubscribe();\n  }\n}\n","\n\n<div class=\"card\">\n    <div class=\"card-header\" id=\"referenceHeading\">\n        <h5 class=\"mb-0\">\n            <a class=\"btn btn-link w-100 d-flex align-self-center collapsed\" data-toggle=\"collapse\"\n                data-target=\"#referenceCollapse\" aria-expanded=\"true\" aria-controls=\"referenceCollapse\">\n                Link Panel&nbsp; <span *ngIf=\"counterElement > 0\">({{counterElement}})</span><i class=\"fa  ml-auto\"></i>\n            </a>\n        </h5>\n    </div>\n    <div id=\"referenceCollapse\" class=\"collapse\" aria-labelledby=\"referenceHeading\">\n        <div class=\"card-body\">\n            <app-see-also *ngIf=\"seeAlsoData != undefined\" [seeAlsoData]=\"seeAlsoData\"></app-see-also>\n            <app-same-as *ngIf=\"sameAsData != undefined\"  [sameAsData]=\"sameAsData\"></app-same-as>\n        </div>\n    </div>\n</div>"]}