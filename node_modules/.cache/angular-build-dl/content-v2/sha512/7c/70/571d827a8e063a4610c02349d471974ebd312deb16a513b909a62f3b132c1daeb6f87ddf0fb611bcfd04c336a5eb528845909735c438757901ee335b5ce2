{"version":3,"sources":["webpack:///src/app/components/lexicon-panel/lexicon-panel.component.ts","webpack:///src/app/components/lexicon-panel/lexicon-panel.component.html","webpack:///src/app/components/link-panel/same-as/same-as.component.ts","webpack:///src/app/components/link-panel/same-as/same-as.component.html","webpack:///src/app/components/lexicon-panel/document-system-tree/lexical-entry-tree/lexical-entry-tree.component.ts","webpack:///src/app/components/lexicon-panel/document-system-tree/lexical-entry-tree/lexical-entry-tree.component.html","webpack:///src/app/components/lexicon-panel/text-detail/epigraphy-detail/epigraphy-tab/epigraphy-form/search-form/search-form.component.ts","webpack:///src/app/components/lexicon-panel/text-detail/epigraphy-detail/epigraphy-tab/epigraphy-form/search-form/search-form.component.html","webpack:///src/app/components/lexicon-panel/text-detail/edit-detail/core-tab/lexical-entry-core-form/data.service.ts","webpack:///src/app/components/lexicon-panel/document-system-tree/concept-tree/concept-tree.component.ts","webpack:///src/app/components/lexicon-panel/document-system-tree/concept-tree/concept-tree.component.html","webpack:///src/app/services/document-system/document-system.service.ts","webpack:///src/app/components/lexicon-panel/text-detail/edit-detail/synsem-tab/synsem-tab.component.ts","webpack:///src/app/components/lexicon-panel/text-detail/edit-detail/synsem-tab/synsem-tab.component.html","webpack:///src/app/components/lexicon-panel/text-detail/edit-detail/decomposition-tab/decomposition-tab.component.ts","webpack:///src/app/components/lexicon-panel/text-detail/edit-detail/decomposition-tab/decomposition-tab.component.html","webpack:///src/app/views/home-page/home-page.component.ts","webpack:///src/app/views/home-page/home-page.component.html","webpack:///src/app/services/auth/auth.service.ts","webpack:///src/environments/environment.ts","webpack:///src/app/components/profiles-table/profiles-table.component.ts","webpack:///src/app/components/profiles-table/profiles-table.component.html","webpack:///src/app/services/annotator/annotator.service.ts","webpack:///src/app/components/lexicon-panel/text-detail/edit-detail/vartrans-tab/vartrans-tab.component.ts","webpack:///src/app/components/lexicon-panel/text-detail/edit-detail/vartrans-tab/vartrans-tab.component.html","webpack:///src/app/components/lexicon-panel/text-detail/edit-detail/core-tab/core-tab.component.ts","webpack:///src/app/components/lexicon-panel/text-detail/edit-detail/core-tab/core-tab.component.html","webpack:///src/app/components/lexicon-panel/text-detail/edit-detail/vartrans-tab/lexical-entry-vartrans-form/lexical-entry-vartrans-form.component.ts","webpack:///src/app/components/lexicon-panel/text-detail/edit-detail/vartrans-tab/lexical-entry-vartrans-form/lexical-entry-vartrans-form.component.html","webpack:///src/app/components/lexicon-panel/document-system-tree/language-manager/language-manager.component.ts","webpack:///src/app/components/lexicon-panel/document-system-tree/language-manager/language-manager.component.html","webpack:///src/app/services/bibliography-service/bibliography.service.ts","webpack:///src/app/components/lexicon-panel/text-detail/edit-detail/synsem-tab/lexical-entry-synsem-form/lexical-entry-synsem-form.component.ts","webpack:///src/app/components/lexicon-panel/text-detail/edit-detail/synsem-tab/lexical-entry-synsem-form/lexical-entry-synsem-form.component.html","webpack:///src/app/components/profiles-table/validator/password-match.ts","webpack:///src/app/services/concept/concept.service.ts","webpack:///src/app/views/login-page/login-page.component.ts","webpack:///src/app/views/login-page/login-page.component.html","webpack:///src/app/app.component.ts","webpack:///src/app/app.component.html","webpack:///src/app/components/lexicon-panel/text-detail/edit-detail/etymology-tab/etymology-form/etymology-form.component.ts","webpack:///src/app/components/lexicon-panel/text-detail/edit-detail/etymology-tab/etymology-form/etymology-form.component.html","webpack:///src/app/views/lexicon-page/lexicon-page.component.ts","webpack:///src/app/views/lexicon-page/lexicon-page.component.html","webpack:///src/app/components/lexicon-panel/document-system-tree/lexical-entry-tree/interfaces/lexical-entry-interface.ts","webpack:///src/app/components/lexicon-panel/document-system-tree/text-tree/text-tree.component.ts","webpack:///src/app/components/lexicon-panel/document-system-tree/text-tree/text-tree.component.html","webpack:///src/app/components/lexicon-panel/text-detail/edit-detail/decomposition-tab/lexical-entry-decomp-form/lexical-entry-decomp-form.component.ts","webpack:///src/app/components/lexicon-panel/text-detail/edit-detail/decomposition-tab/lexical-entry-decomp-form/lexical-entry-decomp-form.component.html","webpack:///src/app/components/lexicon-panel/text-detail/edit-detail/dictionary-tab/dictionary-tab.component.ts","webpack:///src/app/components/lexicon-panel/text-detail/edit-detail/dictionary-tab/dictionary-tab.component.html","webpack:///src/app/app.module.ts","webpack:///src/app/components/metadata-panel/metadata-panel.component.ts","webpack:///src/app/components/metadata-panel/metadata-panel.component.html","webpack:///src/app/components/lexicon-panel/text-detail/edit-detail/edit-detail.component.ts","webpack:///src/app/components/lexicon-panel/text-detail/edit-detail/edit-detail.component.html","webpack:///src/app/services/expander/expander.service.ts","webpack:///src/app/components/lexicon-panel/text-detail/epigraphy-detail/epigraphy-tab/epigraphy-form/epigraphy-form.component.ts","webpack:///src/app/components/lexicon-panel/text-detail/epigraphy-detail/epigraphy-tab/epigraphy-form/epigraphy-form.component.html","webpack:///src/app/components/lexicon-panel/text-detail/epigraphy-detail/epigraphy-detail.component.ts","webpack:///src/app/components/lexicon-panel/text-detail/epigraphy-detail/epigraphy-detail.component.html","webpack:///src/app/components/lexicon-panel/document-system-tree/document-system-tree.component.ts","webpack:///src/app/components/lexicon-panel/document-system-tree/document-system-tree.component.html","webpack:///src/app/components/bibliography-panel/bibliography-panel.component.ts","webpack:///src/app/components/bibliography-panel/bibliography-panel.component.html","webpack:///src/app/services/initializer/app-init.ts","webpack:///src/app/components/note-panel/note-panel.component.ts","webpack:///src/app/components/note-panel/note-panel.component.html","webpack:///src/app/services/lexical-entries/lexical-entries.service.ts","webpack:///src/app/views/unauthorized-page/unauthorized-page/unauthorized-page.component.ts","webpack:///src/app/views/unauthorized-page/unauthorized-page/unauthorized-page.component.html","webpack:///src/app/components/navbar/navbar.component.ts","webpack:///src/app/components/navbar/navbar.component.html","webpack:///src/app/components/lexicon-panel/text-detail/edit-detail/etymology-tab/etymology-tab.component.ts","webpack:///src/app/components/lexicon-panel/text-detail/edit-detail/etymology-tab/etymology-tab.component.html","webpack:///src/app/components/lexicon-panel/text-detail/text-detail.component.ts","webpack:///src/app/components/lexicon-panel/text-detail/text-detail.component.html","webpack:///src/app/services/guard/auth.guard.ts","webpack:///src/app/components/lexicon-panel/text-detail/epigraphy-detail/epigraphy-tab/epigraphy-tab.component.ts","webpack:///src/app/components/lexicon-panel/text-detail/epigraphy-detail/epigraphy-tab/epigraphy-tab.component.html","webpack:///src/app/views/page-not-found/page-not-found.component.ts","webpack:///src/app/views/page-not-found/page-not-found.component.html","webpack:///src/app/components/link-panel/see-also/see-also.component.ts","webpack:///src/app/components/link-panel/see-also/see-also.component.html","webpack:///src/app/views/profile-page/profile-page.component.ts","webpack:///src/app/views/profile-page/profile-page.component.html","webpack:///src/app/components/lexicon-panel/text-detail/edit-detail/core-tab/lexical-concept-form/lexical-concept-form.component.ts","webpack:///src/app/components/lexicon-panel/text-detail/edit-detail/core-tab/lexical-concept-form/lexical-concept-form.component.html","webpack:///src/app/components/lexicon-panel/text-detail/edit-detail/core-tab/sense-core-form/sense-core-form.component.ts","webpack:///src/app/components/lexicon-panel/text-detail/edit-detail/core-tab/sense-core-form/sense-core-form.component.html","webpack:///src/app/components/lexicon-panel/text-detail/edit-detail/vartrans-tab/sense-vartrans-form/sense-vartrans-form.component.ts","webpack:///src/app/components/lexicon-panel/text-detail/edit-detail/vartrans-tab/sense-vartrans-form/sense-vartrans-form.component.html","webpack:///src/app/components/attestation-panel/attestation-panel.component.ts","webpack:///src/app/components/attestation-panel/attestation-panel.component.html","webpack:///src/app/views/search-page/search-page.component.ts","webpack:///src/app/views/search-page/search-page.component.html","webpack:///src/app/app-routing.module.ts","webpack:///src/app/services/lila/lila.service.ts","webpack:///src/app/components/lexicon-panel/text-detail/edit-detail/core-tab/form-core-form/form-core-form.component.ts","webpack:///src/app/components/lexicon-panel/text-detail/edit-detail/core-tab/form-core-form/form-core-form.component.html","webpack:///src/app/components/data-search-form/data-search-form.component.ts","webpack:///src/app/components/data-search-form/data-search-form.component.html","webpack:///src/app/components/lexicon-panel/text-detail/edit-detail/core-tab/lexical-entry-core-form/lexical-entry-core-form.component.ts","webpack:///src/app/components/lexicon-panel/text-detail/edit-detail/core-tab/lexical-entry-core-form/lexical-entry-core-form.component.html","webpack:///src/main.ts","webpack:///$_lazy_route_resource lazy namespace object","webpack:///src/app/components/link-panel/link-panel.component.ts","webpack:///src/app/components/link-panel/link-panel.component.html"],"names":["LexiconPanelComponent","selector","templateUrl","styleUrls","SameAsComponent","formBuilder","lexicalService","toastr","lilaService","subject","subject_input","searchResults","filterLoading","memorySameAs","sameAsForm","sameAsArray","createSameAsEntry","isEtymon","isCognate","group","array","pipe","subscribe","data","onSearchFilter","onChangeSameAsByInput","triggerTooltip","changes","setTimeout","sameAsData","currentValue","undefined","object","get","clear","console","log","forEach","element","addSameAsEntry","lexicalEntity","inferred","push","type","find","setValue","emitEvent","lexicalEntryInstanceName","isLexEntry","isForm","isSense","formInstanceName","senseInstanceName","value","index","trim","selectedValues","lexicalElementId","parameters","relation","updateGenericRelation","error","timeOut","oldValue","sameAs","selectedItems","length","lexicalEntry","lexId","isLila","at","text","searchMode","pos","formType","author","lang","status","offset","limit","getLexicalEntriesList","parentInstanceName","form","senseUris","extendTo","extensionDegree","getFormList","getLexicalSensesList","queryEtymon","list","queryCognate","map","label","Array","from","sameAsList","filter","evt","i","target","next","$","tooltip","trigger","e","entity","lila","last","lexical_entity","deleteLinguisticRelation","updateLexCard","formId","senseId","splice","removeAt","$event","actionMapping","mouse","dblClick","tree","node","hasChildren","TOGGLE_EXPANDED","click","TOGGLE_ACTIVE","contextMenu","LexicalEntryTreeComponent","expander","renderer","show","modalShow","flagAuthor","searchIconSpinner","titlePopover","popoverWildcards","labelView","idView","counter","startsWith","options","useVirtualScroll","scrollOnActivate","nodeHeight","getChildren","bind","filterForm","initialValues","copySubject","onEvent","eventName","sense","etymology","selectedNodeId","idLexicalEntry","getLexEntryData","sendToCoreTab","sendToRightTab","sendToEtymologyTab","lastUpdate","creationDate","sendToAttestationPanel","triggerAttestationPanel","isEditTabOpen","isEpigraphyTabOpen","isEditTabExpanded","isEpigraphyTabExpanded","expandCollapseEdit","openCollapseEdit","expandCollapseEpigraphy","modal","appendTo","backdrop","keyboard","removeClass","css","note","triggerNotePanel","getFormData","parent","getSenseData","etymologyInstanceName","etymologyId","getEtymologyData","component","componentInstanceName","compId","parentInstanceLabel","parentNodeInstanceName","onKey","that","results","document","body","querySelectorAll","children","refreshTooltip","setInterval","val","viewPort","nativeElement","querySelector","addClass","onChanges","deleteReq$","signal","lexEntryDeleteReq","addSubReq$","addSubElement","v","selBox","createElement","style","position","left","top","opacity","appendChild","focus","select","execCommand","removeChild","info","refreshFilter$","getLanguages","languages","getTypes","types","getAuthors","authors","getPos","partOfSpeech","getStatus","nodes","valueChanges","searchParams","lexicalEntriesFilter","instanceName","lex","request","lexicalEntryTree","treeModel","getNodeBy","x","isExpanded","expand","interval","y","creator","setActiveAndVisible","clearInterval","checkExistence","parentNodeLabel","count","update","sort","a","b","textA","toUpperCase","textB","indexOf","countSubterm","countForm","countSense","subtermInstanceName","newPar","viewPort_prova","scrollTop","updateTreeView","popover","html","title","content","reset","sizeChanged","remove","newNodes","instance","getLexEntryElements","obj","c","Object","assign","someNode","getNodeById","id","parentInstance","getLexEntryForms","getSensesList","getEtymologies","getConstituents","getSubTerms","Promise","resolve","reject","resetFields","onScrollDown","copyText","basicMenu","triggerShowTree","SearchFormComponent","modalService","annotatorService","auth","search_subject","search_lex_entries_subject","morphologyData","loader","modalStep","stepOneForm","existOrNot","required","stepTwoForm","stepThreeForm","language","stepFourForm","writtenForm","statusForm","lexicalEntryCreation","attachingLanguage","attachingType","attachingLabel","attachingPos","creatingForm","attachingWrittenForm","attachingFormType","finish","addNewForm","addTagFormText","selectedPopover","tokenId","spanPopovers","toArray","isOpen","close","open","addFormModal","size","windowClass","beforeDismiss","touched","confirm","markAsUntouched","markAsPristine","getLoggedUser","onSearchLexicalEntriesFilter","getLexiconLanguages","getMorphologyData","morphoData","propertyId","getLexEntryTypes","lexEntryTypesData","getFormTypes","typesData","triggerSearch$","bindSelection","unsubscribe","key","representationType","lex_searchResuts","select_form","handleClearClick","search_lexicalEntry","req","onChangeForm","idPopover","tokenData","element_id","epiData","textSelection","message","selectionSpan","spanSelection","formValue","confidence","timestamp","Date","getTime","toString","bibliography","validity","externalRef","node_id","form_id","start","end","isArray","isEmptyFile","begin","identifier","addAnnotation","annotationArray","annotation","populateLocalAnnotation","attributes","positionElement","elementHTML","getElementsByClassName","success","clearAll","patchValue","wizardFactory","newLexicalEntry","updateLexicalEntry","updateLinguisticRelation","createNewForm","writtenRep","updateForm","typeForm","triggerSearch","handleForm","DataService","http","term","rsp","items","getMockPeople","name","toLocaleLowerCase","providedIn","shiftKey","TOGGLE_ACTIVE_MULTI","rename_mode","preventDefault","expanderClick","keys","ENTER","alert","ConceptTreeComponent","conceptService","allowDrag","isLeaf","allowDrop","getNodeClone","conceptFilterForm","search_text","search_mode","loadTree","searchFilter","node_type","target_type","to","moveNode","target_id","treeConcept","date_mode","onMoveNode","DocumentSystemService","baseUrl_document","_epigraphyData","_epigraphyTextData","_epigraphyLeidenData","_epigraphyTranslationData","_metadataData","_triggerMetadataPanel","epigraphyData$","asObservable","epigraphyTextData$","epigraphyLeidenData$","epigraphyTranslationData$","metadataData$","triggerMetadataPanel$","string","bool","post","request_uuid","nodeId","SynsemTabComponent","rend","lock","exp_trig","isLexicalEntry","coreData$","lexicalEntryData","expEdit$","isEditExpanded","isEpigraphyExpanded","setStyle","expander_body","expEpigraphy$","changeStatus","height","animations","DecompositionTabComponent","decompData","decompData$","updateLexCardReq$","lexicalId","addSubElementRequest","createNewSense","createNewEtymology","addNewSense","addNewEtymology","HomePageComponent","AuthService","keycloakService","baseUrl","keycloak","issuer","realmId","realm","clientId","userDetails","getKeycloakInstance","idTokenParsed","isLoggedIn","loadUserProfile","login","logout","accountManagement","window","location","reload","realmAccess","roles","search","username","userId","role_name","idUser","put","headers","set","environment","production","ProfilesTableComponent","httpClient","users","isPopulated","creationRequest","itsMe","selectedRoles","filterSelectedRoles","userDetailForm","email","password","repeat_password","enabled","minLength","pattern","validator","getClientsInfo","idClient","checkIdTimer","getAllClientsRoles","role_id","getUsersByRole","searchUser","usr","searchUsers","roles_array","event","selected_idUser","button_create","classList","getUserInfo","responseUserInfo","getUserRoles","responseUserRoles","extractRoleName","populateForm","errorUserRoles","initialValue","sub","markAsTouched","valid","JSON","stringify","updateUser","initialRoles","updatedRoles","difference","includes","removeDiff","assignRolesToUser","userDetail","deleteRolesToUser","credentials","temporary","createUser","getUserByUsername","cleanActiveLinks","newUser","activeNewUserLink","deleteUser","filtered","modalRef","makeId","makeid","result","characters","charactersLength","charAt","Math","floor","random","j","l","m","temporaryId","links","user_list","contains","innerText","add","invalid","controls","createNewUser","resetForm","isNotTheSameId","AnnotatorService","_triggerSearch","_deleteAnnoRequest","_getIdText","deleteAnnoReq$","getIdText$","VartransTabComponent","senseData","CoreTabComponent","biblioService","isLexicalConcept","goBack","sortField","direction","memorySort","field","queryTitle","queryMode","searchSubject","formData","timer","is","revisor","lexicalConceptData","lexicalConcept","lastUpdateDate","spinnerAction$","query","searchBibliography","bootstrapData","refreshAfterEdit","deleteLexicalEntry","deleteRequest","refreshLangTable","refreshFilter","sendDataToBibliographyPanel","isEpigraphyOpen","deleteForm","deleteSense","item","replace","creators","creatorType","lastName","firstName","date","url","seeAlsoLink","addBibliographyData","triggerPanel","hide","statusText","some","selectedItem","tableBody","filterBibliography","selected","showBiblioModal","onCloseModal","sortBibliography","addBibliographyItem","searchBiblio","LexicalEntryVartransFormComponent","dataService","switchInput","people","peopleLoading","vartransForm","translatableAs","createTranslatableAs","lexicalRelationDirect","createLexicalRelationDirect","lexicalRelationIndirect","createLexicalRelationIndirect","loadPeople","lexData","addLexicalRelationIndirect","getPeople","control","insert","createSubLexicalRelationIndirect","iy","a_entity","b_entity","sub_rel","sub_relation","sub_entity","LanguageManagerComponent","languageList","editLangArray","isValid","loadingService","editLangForm","description","lexvo","maxLength","refreshLangTable$","loadLangData","onEditLanguage","inputValue","match","createNewLanguage","updateLangSelect","langId","updateLanguage","eventEmit","removeMessage","deleteLanguage","deleteLangRequest","onSubmit","BibliographyService","_addBiblioItem","_triggerPanel","addBiblioReq$","triggerPanel$","LexicalEntrySynsemFormComponent","synsemForm","frames","createFrame","frameArray","createArg","ix","createForm","iz","example","args","marker","optional","form_label","ConfirmedValidator","controlName","matchingControlName","formGroup","matchingControl","errors","confirmedValidator","setErrors","ConceptService","LoginPageComponent","AppComponent","EtymologyFormComponent","etyForm","etylink","createEtyLink","cognates","createCognate","subject_cognates","subject_cognates_input","subject_etylink","subject_etylink_input","etylink_note_subject","etylink_label_subject","memoryLinks","onChangeEtylink","onChangeEtylinkNote","onChangeEtylinkLabel","etymData","etyLinkArray","cognatesArray","hypothesisOf","etyLinks","lex_entity","etySourceLabel","etySource","ety_type","etyLinkType","ety_source","ety_target","etyTarget","external_iri","externalIRI","addEtyLink","newConfidence","confidence_value","spinnerAction","etyId","updatedLabel","updateEtymology","updateAuthor","newValue","etymologicalLinkInstanceName","updateEtylink","etymId","etyLink","new_etymon","label_new_lexical_entry","lexical_entry","lexical_entry_in","le","elt","es","et","n","el","createNewEtylink","etyType","etyLinkId","deleteEtylink","trait","cognate","LexiconPageComponent","documentService","notes","link","triggerNotePanel$","boolean","a_link","accordion","collapse_container","item_collapse","triggerAttestationPanel$","attestationPanelData$","attestation","metadata","metadata_subscr","rightPanelData$","searchModeEnum","typeEnum","formTypeEnum","TextTreeComponent","datePipe","validName","searchIconSpinner_input","memoryMetadata","metadataForm","metadata_array","transform","textFilterForm","import_date","selectedEpidocId","getIdText","getContent","xmlString","sendLeidenToEpigraphyTab","testConvert","raw","xml","childNodes","DOMParser","parseFromString","leidenLines","nodeName","textNode","nodeValue","translations","translationArray","child","innerHTML","sendTranslationToEpigraphyTab","getTokens","tokens","sendToEpigraphyTab","epidoc_id","openCollapseEpigraphy","path","sendToMetadataPanel","triggerMetadataPanel","isFolder","treeText","activeNodes","isFile","enableMetadata","multipleSelection","isFolderMultiple","selectedFileToCopyArray","pasteElementsReq","renameNode_input","stopPropagation","moveFolder","moveFile","getDocumentSystem","target_element_id","copyFileTo","selectedFileToCopy","selected_elements","elements","data_node","removeFile","isEditOpen","removeFolder","requestUUID","filename","createFile","expandedNodes","addFolder","element_id_new_node","id_new_node","new_node","uploadFile_input","file_name","files","FormData","append","uploadFile","files_array","setProperty","element_id_target","element_id_source","downloadFile","moveFileTo","new_value","updateNodeName","exitRenamingMode","renameFolder","renameFile","updateMetadata","k","createMetadataItem","deleteMetadata","editMetadataModal","entries","addMetadata","uniqueIdValidator","duplicate","date_pipe","searchFiles","tag","metadata_tags_element","triggerMetadata","triggerUploader","createNewFile","renameNode","copyElements","pasteElements","removeElements","copyFile","pasteFile","addFile","saveMetadata","onCloseRemoveMetadata","providers","clickout","LexicalEntryDecompFormComponent","subterm_subject","ext_subterm_subject","corresponds_subject","update_component_subject","subtermDisabled","memorySubterm","memoryComponent","memoryValues","decompForm","createComponent","subterm","createSubtermComponent","staticMorpho","valueTraits","disableAddTraits","loadMorphologyData","changeDecompLabel$","onChangeSubterm","decData","componentArray","subtermArray","addSubterm","getCorrespondsTo","correspondsTo_data","corr","corresponds_to","addComponent","fieldType","morphology","delete_old_param","traitDescription","propertyValues","valueId","valueDescription","arrayValues","componentURI","corr_to","addRelation","idComp","deleteComponent","morphologyArray","createRelation","timer1","timer2","parentNode","lexicaleEntryInstanceName","t","uri","onChangeCorrespondsTo","f","DictionaryTabComponent","AppModule","provide","useFactory","deps","multi","forRoot","useBootstrap4","declarations","imports","bootstrap","MetadataPanelComponent","metadataData","re","EditDetailComponent","exp","showTrigger","openEdit$","text_detail","navTabLinks","navtabs","navContent","navcontent","etymologyData$","triggerExpansionEdit","ExpanderService","_openEdit","_openEpigraphy","_expandEpigraphy","_expandEdit","openEpigraphy$","EpigraphyFormComponent","router","config","textEpigraphy","bind_subject","memoryForms","htmlNodeName","epigraphyForm","createToken","multiWordMode","token_annotationArray","epidoc_annotation_array","leiden_array","translation_array","evtPath","isMultiwordRequest","event_el","multiWordArray","subchild","prev","previousElementSibling","nextElementSibling","classNames","className","matchTest","test","position_popover","getAttribute","popover_id","_ngbPopoverWindowId","multiwordSpan","spansArray","span","parseInt","htmlNode","getElementById","editing","parentMarkElement","textMarkElement","textContent","createText","insertBefore","altKey","ctrlKey","code","localArray","spans","tokenArray","fileId","getAnnotation","annotations","layer","tmp_arr","that2","timer_object","startElement","endElement","startAnnotation","endAnnotation","token","parentElement","getSelection","empty","removeAllRanges","popoverHtml","_elementRef","multiWordCreator","prevSibling","nextSibling","previousSibling","createDynamicButtons","div","okButton","leaveButton","okIcon","leaveIcon","start_token","end_token","selection","anchorNode","focusNode","isThereMark","areThereAnnotations","anchorNodeParent","focusNodeParent","anchorOffset","focusOffset","tmp","l_text","substring","r_text","setAttribute","anno_id","token_position","deleteAnnotation","origin","startIndex","endIndex","insertion","searchForm","onMouseUp","onGlobalClick","enableMultiword","disableMultiword","EpigraphyDetailComponent","subscription","triggerExpansionEpigraphy","DocumentSystemTreeComponent","switcher","refreshAfterEdit$","lexTree","attr","scrollIntoView","lexEdit","changeFormLabel","changeFormType","changeSenseDefinition","newLexEntryLabel","getParameters","textTree","addNewFile","addNewFolder","updateTreeParent","switchLabel","triggerLoad","conceptTree","BibliographyPanelComponent","countElement","loadingSynchro","bibliographyForm","createBibliography","memoryNote","memoryTextualRef","incomingBiblio","textualReference","bibliographyData","addBibliographyElement","biblioData","biblioArray","getBibliographyData","bibliographyInstanceName","removeBibliographyItem","d","synchronizeBibliographyItem","initializer","init","loadUserProfileAtStartUp","enableBearerInterceptor","bearerPrefix","initOptions","onLoad","checkLoginIframe","bearerExcludedUrls","NotePanelComponent","editorConfig","editable","spellcheck","minHeight","maxHeight","width","minWidth","translate","enableToolbar","showToolbar","placeholder","defaultParagraphSeparator","customClasses","uploadUrl","uploadWithCredentials","sanitize","toolbarPosition","toolbarHiddenButtons","newNote","noteData","updateSense","keyEvent","LexicalEntriesService","_coreFormData","_attestationPanelData","_etymologyData","_rightPanelData","_deleteLexicalEntryReq","_addSubElementReq","_updateLexCardReq","_spinnerAction","_refreshLanguageTable","_refreshAfterEdit","_refreshFilter","_updateLangSelect","_triggerNotePanel","_triggerAttestationPanel","_changeDecompLabel","_decompData","updateLangSelect$","property","aspect","getUsername","itemKey","lexInstance","etymInstance","etyLinkInstance","lexicalEntityID","UnauthorizedPageComponent","NavbarComponent","route","isAdmin","admin","userRoles","getCurrentUserRole","keycloakEvents$","OnTokenExpired","updateToken","EtymologyTabComponent","isEtymology","etymologyData","deleteEtymology","TextDetailComponent","AuthGuard","state","authenticated","redirectUri","requiredRoles","every","role","navigate","EpigraphyTabComponent","epigraphyData","PageNotFoundComponent","SeeAlsoComponent","countRefresh","memorySeeAlso","seeAlsoForm","seeAlsoArray","createSeeAlsoEntry","onChangeSeeAlsoByInput","seeAlsoData","addSeeAlsoEntry","lexicalEntityInstanceName","linkType","seeAlso","lt","link_type","emit","ProfilePageComponent","LexicalConceptFormComponent","lexicalConceptForm","definition","hierachicalRelation","createHierachicalRelation","scheme","createScheme","conceptReference","createConceptReference","SenseCoreFormComponent","subject_def","subject_ex_def","disableAddDef","definitionData","definitionMemory","staticDef","senseCore","createDefinition","usage","topic","reference","createReference","lexical_concept","createLexicalConcept","sense_of","onChangeDefinition","onChangeExistingDefinition","lexicalConceptArray","definitionArray","pId","pVal","addDefinition","addLexicalConcept","concept","newDef","newTopic","propertyID","propertyValue","referenceArray","lex_concept","SenseVartransFormComponent","senseVartransForm","translation","createTranslation","senseTranslation","createSenseTranslation","terminologicalRelation","createTerminologicalRelation","createSubTerminologicalRelation","AttestationPanelComponent","update_anno_subject","update_biblio_anno_subject","updateAnnotation","updateBiblioAnnotation","attestationData","selectedAnnotation","deleteAnnotationRequest","propKey","id_annotation","SearchPageComponent","routes","redirectTo","pathMatch","canActivate","AppRoutingModule","exports","LilaService","endpoint","encodeURIComponent","FormCoreFormComponent","subject_label","subject_ex_label","memoryTraits","formCore","inheritance","createInheritance","createLabel","morphoTraits","createMorphoTraits","labelData","memoryLabel","typeDesc","staticOtherDef","disableAddOther","disableAddMorpho","onChangeLabel","onChangeExistingLabelValue","inheritanceArray","labelArray","inheritedMorphology","addInheritance","addLabel","addMorphoTraits","onChangeTrait","newType","DataSearchFormComponent","warn","LexicalEntryCoreFormComponent","memoryDenotes","memoryCognates","memoryEvokes","valuePos","memoryPos","posDescription","denotes_subject","cognates_subject","evokes_subject","urlRegex","emptyLabelFlag","emptyFlag","coreForm","stemType","evokes","createEvokes","denotes","createDenotes","createCognates","onChangeDenotes","onChangeCognates","loadLexEntryTypeData","filter_lang","denotesArray","evokesArray","disable","onlySelf","enable","getLexEntryLinguisticRelation","addDenotes","addCognates","langLabel","langValue","toLowerCase","posValue","response","changeDecompLabel","updateStem","bootstrapModule","err","webpackEmptyAsyncContext","then","Error","module","LinkPanelComponent","counterElement","linkData"],"mappings":"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;;;;;;;AEnBnC;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;AA2E2D;;UAiF9C+9B,S;;;;;cAAAA,S;AAAS,oBAFR,4DAEQ;;;;2BAATA,S;AAAS,S;AAAA,mBAXT,CACT;AACEC,iBAAO,EAAE,6DADX;AAEEC,oBAAU,EAAE,8EAFd;AAGEC,cAAI,EAAE,CAAE,iEAAF,CAHR;AAIEC,eAAK,EAAE;AAJT,SADS,EAOT,wEAPS,C;AAQV,kBAzBQ,CACP,kEAAkBC,OAAlB,CAA0B;AAACC,uBAAa,EAAE;AAAhB,SAA1B,CADO,EAEP,uEAFO,EAGP,6FAHO,EAIP,qEAJO,EAKP,0EALO,EAMP,wEANO,EAOP,sEAPO,EAQP,0EARO,EASP,mEATO,EAUP,yDAVO,EAWP,qEAXO,EAYP,0DAZO,EAaP,uEAbO,EAcP,kEAdO,EAeP,wDAAaD,OAAb,EAfO,CAyBR;;;;4HAGUL,S,EAAS;AAAA,yBA1ElB,4DA0EkB,EAzElB,oFAyEkB,EAxElB,gGAwEkB,EAvElB,0FAuEkB,EAtElB,qGAsEkB,EArElB,uFAqEkB,EApElB,gGAoEkB,EAnElB,wGAmEkB,EAlElB,+FAkEkB,EAjElB,+FAiEkB,EAhElB,6FAgEkB,EA/DlB,gHA+DkB,EA9DlB,0IA8DkB,EA7DlB,+HA6DkB,EA5DlB,gHA4DkB,EA3DlB,2IA2DkB,EA1DlB,4HA0DkB,EAzDlB,mJAyDkB,EAxDlB,iJAwDkB,EAvDlB,yJAuDkB,EAtDlB,+HAsDkB,EArDlB,2IAqDkB,EApDlB,qIAoDkB,EAnDlB,0JAmDkB,EAlDlB,2GAkDkB,EAjDlB,uHAiDkB,EAhDlB,oHAgDkB,EA/ClB,mLA+CkB,EA9ClB,oGA8CkB,EA7ClB,iGA6CkB,EA5ClB,mMA4CkB,EA3ClB,2LA2CkB,EA1ClB,yJA0CkB,EAzClB,kMAyCkB,EAxClB,4JAwCkB,EAvClB,4KAuCkB,EAtClB,2KAsCkB,EArClB,oJAqCkB,EApClB,8IAoCkB,EAnClB,+JAmCkB,EAlClB,2GAkCkB,EAjClB,oKAiCkB,EAhClB,0KAgCkB,EA9BlB,iIA8BkB,EA7BlB,wIA6BkB;AA7BE,uFAGpB,uEAHoB,EAIpB,6FAJoB,EAKpB,qEALoB,EAMpB,0EANoB,EAOpB,wEAPoB,EAQpB,sEARoB,EASpB,0EAToB,EAUpB,mEAVoB,EAWpB,yDAXoB,EAYpB,qEAZoB,EAapB,0DAboB,EAcpB,uEAdoB,EAepB,kEAfoB,EAeD,uDAfC;AA6BF,S;AAdC,O;;;;;wEAcVA,S,EAAS;gBA5ErB,sDA4EqB;iBA5EZ;AACRO,wBAAY,EAAE,CACZ,4DADY,EAEZ,oFAFY,EAGZ,gGAHY,EAIZ,0FAJY,EAKZ,qGALY,EAMZ,uFANY,EAOZ,gGAPY,EAQZ,wGARY,EASZ,+FATY,EAUZ,+FAVY,EAWZ,6FAXY,EAYZ,gHAZY,EAaZ,0IAbY,EAcZ,+HAdY,EAeZ,gHAfY,EAgBZ,2IAhBY,EAiBZ,4HAjBY,EAkBZ,mJAlBY,EAmBZ,iJAnBY,EAoBZ,yJApBY,EAqBZ,+HArBY,EAsBZ,2IAtBY,EAuBZ,qIAvBY,EAwBZ,0JAxBY,EAyBZ,2GAzBY,EA0BZ,uHA1BY,EA2BZ,oHA3BY,EA4BZ,mLA5BY,EA6BZ,oGA7BY,EA8BZ,iGA9BY,EA+BZ,mMA/BY,EAgCZ,2LAhCY,EAiCZ,yJAjCY,EAkCZ,kMAlCY,EAmCZ,4JAnCY,EAoCZ,4KApCY,EAqCZ,2KArCY,EAsCZ,oJAtCY,EAuCZ,8IAvCY,EAwCZ,+JAxCY,EAyCZ,2GAzCY,EA0CZ,oKA1CY,EA2CZ,0KA3CY,EA6CZ,iIA7CY,EA8CZ,wIA9CY,CADN;AAgDRC,mBAAO,EAAE,CACP,kEAAkBH,OAAlB,CAA0B;AAACC,2BAAa,EAAE;AAAhB,aAA1B,CADO,EAEP,uEAFO,EAGP,6FAHO,EAIP,qEAJO,EAKP,0EALO,EAMP,wEANO,EAOP,sEAPO,EAQP,0EARO,EASP,mEATO,EAUP,yDAVO,EAWP,qEAXO,EAYP,0DAZO,EAaP,uEAbO,EAcP,kEAdO,EAeP,wDAAaD,OAAb,EAfO,CAhDD;AAiER3D,qBAAS,EAAE,CACT;AACEuD,qBAAO,EAAE,6DADX;AAEEC,wBAAU,EAAE,8EAFd;AAGEC,kBAAI,EAAE,CAAE,iEAAF,CAHR;AAIEC,mBAAK,EAAE;AAJT,aADS,EAOT,wEAPS,CAjEH;AA0ERK,qBAAS,EAAE,CAAC,4DAAD;AA1EH,W;AA4EY,U;;;;;;;;;;;;;;;;;;AC5JtB;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;;;ACYY;;AACI;;AACI;;AACiD;;AAAO;;AAC5D;;AACA;;AACI;;AAC6D;;AAAS;;AAC1E;;AACA;;AACI;;AACyD;;AAAI;;AACjE;;AACJ;;;;;;AAc4B;;AACI;;AAAoC;;AAAM;;AAC1C;;AAAwB;;AAAM;;AAAgB;;AAAO;;AACzD;;;;;;AADkC;;AAAA;;;;;;AAElC;;AACI;;AAAgB;;AAAG;;AACnB;;AAAI;;AACA;;AACJ;;AAAQ;;AACZ;;;;;;AAFQ;;AAAA;;;;;;AAGR;;AACI;;AAAgB;;AAAO;;AACvB;;AAAI;;AACA;;AACJ;;AAAO;;AACX;;;;;;AAFQ;;AAAA;;;;;;AAGR;;AACI;;AAAoC;;AAAU;;AAC9C;;AAAwB;;AACpB;;AACJ;;AAAO;;AACX;;;;;;AAFQ;;AAAA;;;;;;AAOI;;AAA2E;;AAAkB;;;;;;AAA1F;;AAAwE;;AAAA;;;;;;AAC3E;;AAAsC;;AAAkB;;;;;;AAAlB;;AAAA;;;;;;AAF1C;;AACI;;AACA;;AACJ;;;;;;;;AAFiD;;AAAA;;AACtC;;AAAA;;;;;;AALnB;;AACI;;AAAgB;;AAAQ;;AACxB;;AACI;;;;AAIJ;;AACJ;;;;;;AAL2C;;AAAA;;;;;;AA0B3C;;AACI;;AAAgB;;AAAQ;;AACxB;;AAAI;;AAAM;;AAAoB;;AAAO;;AACzC;;;;;;AADc;;AAAA;;;;;;AAEd;;AACI;;AAAgB;;AAAiB;;AACjC;;AAAI;;AAAM;;AAA4B;;AAAO;;AACjD;;;;;;AADc;;AAAA;;;;;;AAEd;;AACI;;AAAgB;;AAAgB;;AAChC;;AAAI;;AAAM;;AAA2B;;AAAO;;AAChD;;;;;;AADc;;AAAA;;;;;;AAEd;;AACI;;AAAgB;;AAAO;;AACvB;;AAAI;;AAAM;;AAAmB;;AAAO;;AACxC;;;;;;AADc;;AAAA;;;;;;AAEd;;AACI;;AAAgB;;AAAe;;AAC/B;;AAAI;;AAEI;;AAAwC;;AAAI;;AACxD;;;;;;AAFY;;AAAA;;AACA;;AAAA;;;;;;AAKJ;;AACI;;AACI;;AACJ;;AACJ;;;;;;AAHuB;;AAAA;;AACf;;AAAA;;;;;;AALhB;;AACI;;AAAgB;;AAAU;;AAC1B;;AACI;;AAKJ;;AACJ;;;;;;AAN4C;;AAAA;;;;;;AAUpC;;AAEI;;AAAsC;;;;;;AADtC;;AACA;;AAAA;;;;;;AAA2C;;AACS;;AAAsC;;;;;;AAAtC;;AAAA;;;;;;AANhE;;AACI;;AAAgB;;AAAe;;AAC/B;;AACI;;AAE+C;;AAEnD;;AACJ;;;;;;AALY;;AAAA;;AAGC;;AAAA;;;;;;AAQL;;AAEI;;AAA+B;;;;;;AAD/B;;AACA;;AAAA;;;;;;AAAoC;;AACiB;;AAA+B;;;;;;AAA/B;;AAAA;;;;;;AANjE;;AACI;;AAAgB;;AAAY;;AAC5B;;AACI;;AAEwC;;AAE5C;;AACJ;;;;;;AALY;;AAAA;;AAGC;;AAAA;;;;;;AAGb;;AACI;;AAAgB;;AAAU;;AAC1B;;AAAI;;AAAM;;AAAqB;;AAAO;;AAC1C;;;;;;AADc;;AAAA;;;;;;AAKN;;AAEI;;AAAyC;;;;;;AADzC;;AACA;;AAAA;;;;;;AAA8C;;AACK;;AAAyC;;;;;;AAAzC;;AAAA;;;;;;AAN/D;;AACI;;AAAgB;;AAAyB;;AACzC;;AACI;;AAEkD;;AAEtD;;AACJ;;;;;;AALY;;AAAA;;AAGC;;AAAA;;;;;;AAGb;;AACI;;AAAgB;;AAAe;;AAC/B;;AAAI;;AAAM;;AAAwB;;AAAO;;AAC7C;;;;;;AADc;;AAAA;;;;;;AAEd;;AACI;;AAAgB;;AAA0B;;AAC1C;;AAAI;;AAAM;;AAAiC;;AAAO;;AACtD;;;;;;AADc;;AAAA;;;;;;AAEd;;AACI;;AAAgB;;AAAyB;;AACzC;;AAAI;;AAAM;;AAAgC;;AAAO;;AACrD;;;;;;AADc;;AAAA;;;;;;AAEd;;AACI;;AAAgB;;AAAe;;AAC/B;;AAAI;;AAAM;;AAA2B;;AAAO;;AAChD;;;;;;AADc;;AAAA;;;;;;AAEd;;AACI;;AAAgB;;AAAe;;AAC/B;;AAAI;;AAAM;;AAA2B;;AAAO;;AAChD;;;;;;AADc;;AAAA;;;;;;AAEd;;AACI;;AAAgB;;AAAmB;;AACnC;;AAAI;;AAAM;;AAAsB;;AAAO;;AAC3C;;;;;;AADc;;AAAA;;;;;;AAEd;;AACI;;AAAgB;;AAAmB;;AACnC;;AAAI;;AAAM;;AAA4B;;AAAO;;AACjD;;;;;;AADc;;AAAA;;;;;;AASM;;AAA6B;;AAAa;;;;;;AAAb;;AAAA;;;;;;AAAkB;;AAAkC;;AAAc;;;;;;AAAd;;AAAA;;;;;;AADrF;;AACI;;AAA+C;;AACnD;;;;;;;;AADS;;AAAA;;AAAiD;;AAAA;;;;;;AAF9D;;AACI;;AAGJ;;;;;;AAHS;;AAAA;;;;;;AAJjB;;AACI;;AAEI;;;;AAKJ;;AACJ;;;;;;AANiD;;AAAA;;;;;;AAY7B;;AAAgC;;AAAgB;;;;;;AAAhB;;AAAA;;;;;;AAE5B;;AAAwE;;AAAiB;;;;;;AAAtF;;AAAqE;;AAAA;;;;;;AACxE;;AAAqC;;AAAiB;;;;;;AAAjB;;AAAA;;;;;;AALjD;;AACI;;AACI;;AACA;;AACI;;AACA;;AACJ;;AACJ;;AACJ;;;;;;;;AANa;;AAAA;;AAE0C;;AAAA;;AACpC;;AAAA;;;;;;AANvB;;AACI;;;;AASJ;;;;;;AATgD;;AAAA;;;;;;AAHxD;;AACI;;AACI;;AAYJ;;AACJ;;;;;;AAb+B;;AAAA;;;;;;AAdnC;;AACI;;AAAoC;;AAAc;;AAClD;;AAUA;;AAiBJ;;;;;;AA3BU;;AAAA;;AAUA;;AAAA;;;;;;AAkBV;;AACI;;AAAgB;;AAAU;;AAC1B;;AAAI;;AAAM;;AAAqB;;AAAO;;AAC1C;;;;;;AADc;;AAAA;;;;;;AAEd;;AACI;;AAAgB;;AAAa;;AAC7B;;AAAI;;AAAM;;AAAuB;;AAAO;;AAC5C;;;;;;AADc;;AAAA;;;;;;AAKN;;AAAoJ;;AAA8B;;;;;;AAA/K;;AAAiJ;;AAAA;;;;;;AACpJ;;AAAkD;;AAA8B;;;;;;AAA9B;;AAAA;;;;;;AAJ1D;;AACI;;AAAgB;;AAAuB;;AACvC;;AACI;;AACA;;AACJ;;AACJ;;;;;;AAHmE;;AAAA;;AACpD;;AAAA;;;;;;AAGf;;AACI;;AAAgB;;AAAa;;AAC7B;;AAAI;;AAAM;;AAAwB;;AAAO;;AAC7C;;;;;;AADc;;AAAA;;;;;;AAEd;;AACI;;AAAgB;;AAAmB;;AACnC;;AAAI;;AAAM;;AAA6B;;AAAO;;AAClD;;;;;;AADc;;AAAA;;;;;;AAMN;;AAGI;;AAA2C;;;;;;AAD3C;;AACA;;AAAA;;;;;;AAAgD;;AACuB;;AAA2C;;;;;;AAA3C;;AAAA;;;;;;AAPnF;;AACI;;AAAgB;;AAAW;;AAC3B;;AACI;;AAGoD;;AAExD;;AACJ;;;;;;AANY;;AAAA;;AAIC;;AAAA;;;;;;AAML;;AAEI;;AAA6B;;;;;;AAD7B;;AACA;;AAAA;;;;;;AAAkC;;AACiB;;AAA6B;;;;;;AAA7B;;AAAA;;;;;;AAN/D;;AACI;;AAAgB;;AAAS;;AACzB;;AACI;;AAEsC;;AAE1C;;AACJ;;;;;;AALY;;AAAA;;AAGC;;AAAA;;;;;;AAuBb;;AACI;;AAAgB;;AAAQ;;AACxB;;AAAI;;AAAM;;AAAmB;;AAAO;;AACxC;;;;;;AADc;;AAAA;;;;;;AAGd;;AACI;;AAAgB;;AAAe;;AAC/B;;AAAI;;AAAM;;AAAyB;;AAAO;;AAC9C;;;;;;AADc;;AAAA;;;;;;AASE;;AAA6B;;AAAY;;;;;;AAAZ;;AAAA;;;;;;AAC7B;;AAAkE;;AAAc;;;;;;AAA7E;;AAA+D;;AAAA;;;;;;AAClE;;AAAkC;;AAAc;;;;;;AAAd;;AAAA;;;;;;AAHtC;;AACI;;AACA;;AACA;;AACJ;;;;;;;;AAHS;;AAAA;;AACmC;;AAAA;;AACjC;;AAAA;;;;;;AANnB;;AACI;;AAEI;;;;AAKJ;;AACJ;;;;;;AANiD;;AAAA;;;;;;AAY7B;;AAAgC;;AAAgB;;;;;;AAAhB;;AAAA;;;;;;AAE5B;;AAAwE;;AAAiB;;;;;;AAAtF;;AAAqE;;AAAA;;;;;;AACxE;;AAAqC;;AAAiB;;;;;;AAAjB;;AAAA;;;;;;AALjD;;AACI;;AACI;;AACA;;AACI;;AACA;;AACJ;;AACJ;;AAGJ;;;;;;;;AARa;;AAAA;;AAE0C;;AAAA;;AACpC;;AAAA;;;;;;AANvB;;AACI;;;;AAWJ;;;;;;AAXgD;;AAAA;;;;;;AAHxD;;AACI;;AACI;;AAcJ;;AACJ;;;;;;AAf+B;;AAAA;;;;;;AAdnC;;AACI;;AAAoC;;AAAQ;;AAC5C;;AAUA;;AAmBJ;;;;;;AA7BU;;AAAA;;AAUA;;AAAA;;;;;;AAqBV;;AACI;;AAAgB;;AAAO;;AACvB;;AAAI;;AAAM;;AAAgC;;AAAO;;AACrD;;;;;;AADc;;AAAA;;;;;;AAEd;;AACI;;AAAgB;;AAAmB;;AACnC;;AAAI;;AAAM;;AAA4B;;AAAO;;AACjD;;;;;;AADc;;AAAA;;;;;;AAEd;;AACI;;AAAoC;;AAAe;;AACnD;;AAAwB;;AAAM;;AAAyB;;AAAO;;AAClE;;;;;;AADkC;;AAAA;;;;;;AA/S9D;;AACI;;AACI;;AACI;;AAAsB;;AAAO;;AAG7B;;AAII;;AACI;;AACI;;AACI;;AAIA;;AAMA;;AAMA;;AAMA;;AASJ;;AACJ;;AACJ;;AACJ;;AACJ;;AAEJ;;AACA;;AACI;;AACI;;AAAsB;;AAAS;;AAG/B;;AAKI;;AACI;;AACI;;AACI;;AAIA;;AAIA;;AAIA;;AAIA;;AAMA;;AAUA;;AAWA;;AASA;;AAIA;;AASA;;AAIA;;AAIA;;AAIA;;AAIA;;AAIA;;AAIA;;AAIA;;AA8BA;;AAIA;;AAIA;;AAOA;;AAIA;;AAKA;;AAUA;;AASJ;;AACJ;;AACJ;;AAEJ;;AACJ;;AACJ;;AACA;;AACI;;AACI;;AAAsB;;AAAI;;AAG1B;;AAKI;;AACI;;AACI;;AACI;;AAKA;;AAKA;;AAiCA;;AAIA;;AAIA;;AAIJ;;AACJ;;AACJ;;AACJ;;AACJ;;AACJ;;AACJ;;;;;;AA1SsD;;AAAA;;AAIrB;;AAAA;;AAMA;;AAAA;;AAMqB;;AAAA;;AAMrB;;AAAA;;AA6BA;;AAAA;;AAIA;;AAAA;;AAIA;;AAAA;;AAIA;;AAAA;;AAIA;;AAAA;;AAMA;;AAAA;;AAUA;;AAAA;;AAWA;;AAAA;;AASA;;AAAA;;AAIA;;AAAA;;AASA;;AAAA;;AAIA;;AAAA;;AAIA;;AAAA;;AAIA;;AAAA;;AAIA;;AAAA;;AAIA;;AAAA;;AAIA;;AAAA;;AAIqB;;AAAA;;AA8BrB;;AAAA;;AAIA;;AAAA;;AAIA;;AAAA;;AAOA;;AAAA;;AAIA;;AAAA;;AAKA;;AAAA;;AAUA;;AAAA;;AA6BA;;AAAA;;AAKA;;AAAA;;AAKqB;;AAAA;;AAiCrB;;AAAA;;AAIA;;AAAA;;AAIqB;;AAAA;;;;UDnTrDC,sB;AAKX,wCAAoBjM,eAApB,EAA6D;AAAA;;AAAzC,eAAAA,eAAA,GAAAA,eAAA;AAA4C;;;;qCAExD,CACP;;;sCAEWhxB,O,EAAwB;AAClCQ,mBAAO,CAACC,GAAR,CAAYT,OAAZ;;AACA,gBAAGA,OAAO,CAACk9B,YAAR,CAAqB/8B,YAArB,IAAqC,IAAxC,EAA6C;AAC3C,mBAAKE,MAAL,GAAcL,OAAO,CAACk9B,YAAR,CAAqB/8B,YAAnC;;AAEA,kBAAGH,OAAO,CAACk9B,YAAR,CAAqB/8B,YAArB,IAAqC,KAAKE,MAA7C,EAAoD;AAClD,qBAAKA,MAAL,GAAc,IAAd;AACD;;AAED,mBAAKA,MAAL,GAAcL,OAAO,CAACk9B,YAAR,CAAqB/8B,YAAnC;AACD,aARD,MAQK;AACH,mBAAKE,MAAL,GAAc,IAAd;AACA,mBAAK2wB,eAAL,CAAqBuD,oBAArB,CAA0C,KAA1C;AACD;AAEF;;;kCAEO7pB,G,EAAG;AAAa,mBAAOxG,KAAK,CAACqS,OAAN,CAAc7L,GAAd,CAAP;AAA4B;;;mCAE3CA,G,EAAG;AAAa,mBAAO,OAAOA,GAAP,IAAc,QAArB;AAAgC;;;mCAEhDA,G,EAAG;AAAa,mBAAO,OAAOA,GAAP,KAAe,QAAf,IAA2B,CAACxG,KAAK,CAACqS,OAAN,CAAc7L,GAAd,CAAnC;AAAwD;;;iCAE1EA,G,EAAK;AACV,gBAAMyyB,EAAE,GAAG,yCAAX;AACA,mBAAOzyB,GAAG,CAACigB,KAAJ,CAAUwS,EAAV,CAAP;AACD;;;;;;;yBApCUF,sB,EAAsB,+K;AAAA,O;;;cAAtBA,sB;AAAsB,2C;AAAA;AAAA;AAAA,S;AAAA,sF;AAAA,iB;AAAA,e;AAAA,8gE;AAAA;AAAA;ACpBnC;;AACI;;AACI;;AACI;;AAEI;;AAAc;;AAClB;;AACJ;;AACJ;;AAEA;;AACI;;AACI;;AAcA;;AAwTJ;;AACJ;;AACJ;;;;AAxUgE;;AAAA;;AAcR;;AAAA;;;;;;;;;;wEDN3CA,sB,EAAsB;gBALlC,uDAKkC;iBALxB;AACT3+B,oBAAQ,EAAE,oBADD;AAETC,uBAAW,EAAE,iCAFJ;AAGTC,qBAAS,EAAE,CAAC,iCAAD;AAHF,W;AAKwB,U;;;;;AAGxB0+B,sBAAY,EAAE,CAAF;kBAApB;AAAoB,WAAE;;;;;;;;;;;;;;;;;;;AEvBzB;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;;;;;;;;;;UAqBaE,mB;AAOX,qCAAoBz+B,cAApB,EAAmE0+B,GAAnE,EAA0F;AAAA;;AAAtE,eAAA1+B,cAAA,GAAAA,cAAA;AAA+C,eAAA0+B,GAAA,GAAAA,GAAA;AAJnE,eAAAC,WAAA,GAAc,KAAd;AAI6F;;;;qCAErF;AAAA;;AAEN,iBAAKj9B,MAAL,GAAc,IAAd;AACA,iBAAKg9B,GAAL,CAASE,SAAT,CAAmB59B,SAAnB,CACE,UAAAyxB,SAAO,EAAI;AACT,kBAAGA,SAAH,EAAW;AACTnxB,0BAAU,CAAC,YAAM;AACf,sBAAIu9B,WAAW,GAAGpzB,QAAQ,CAACE,gBAAT,CAA0B,iBAA1B,CAAlB;AACAkzB,6BAAW,CAAC98B,OAAZ,CAAoB,UAAAC,OAAO,EAAI;AAC7B,wBAAG,CAACA,OAAO,CAACogB,SAAR,CAAkBgD,QAAlB,CAA2B,MAA3B,CAAJ,EAAuC;AACrCpjB,6BAAO,CAACogB,SAAR,CAAkBkD,GAAlB,CAAsB,MAAtB;AACD;AACF,mBAJD;AAKA,sBAAIoN,MAAM,GAAGjnB,QAAQ,CAACE,gBAAT,CAA0B,kCAA1B,CAAb;AACA+mB,wBAAM,CAAC3wB,OAAP,CAAe,UAAAC,OAAO,EAAI;AACxB,wBAAGA,OAAO,CAACogB,SAAR,CAAkBgD,QAAlB,CAA2B,WAA3B,CAAH,EAA2C;AACzCpjB,6BAAO,CAACogB,SAAR,CAAkBvR,MAAlB,CAAyB,WAAzB;AACD,qBAFD,MAEK,CACH;AACD;AACF,mBAND;AAOA,iBAfQ,EAeN,GAfM,CAAV;AAgBD;AACF,aApBH;AAuBA,iBAAK7Q,cAAL,CAAoBkd,SAApB,CAA8Blc,SAA9B,CACE,UAAAU,MAAM,EAAI;AACR,kBAAGA,MAAM,IAAI,IAAb,EAAkB;AAChB,oBAAGA,MAAM,CAAC,0BAAD,CAAN,IAAsCD,SAAtC,IACAC,MAAM,CAAC,kBAAD,CAAN,IAA8BD,SAD9B,IAEAC,MAAM,CAAC,mBAAD,CAAN,IAA+BD,SAF/B,IAGAC,MAAM,CAAC,uBAAD,CAAN,IAAmCD,SAHtC,EAGgD;AAC3CH,4BAAU,CAAC,YAAM;AAChB,wBAAIw9B,WAAW,GAAG,QAAI,CAACC,OAAL,CAAa9yB,aAAb,CAA2BN,gBAA3B,CAA4C,GAA5C,CAAlB;;AACA,4BAAI,CAACjK,MAAL,GAAcA,MAAd;AACAo9B,+BAAW,CAAC/8B,OAAZ,CAAoB,UAAAC,OAAO,EAAI;AAC7B;AACA,0BAAGA,OAAO,CAACiC,IAAR,IAAgB,MAAnB,EAA0B;AACxBjC,+BAAO,CAACogB,SAAR,CAAkBkD,GAAlB,CAAsB,QAAtB;AACD,uBAFD,MAEK;AACHtjB,+BAAO,CAACogB,SAAR,CAAkBvR,MAAlB,CAAyB,QAAzB,EADG,CAEH;AACD;AACF,qBARD;;AAYA,wBAAImuB,UAAU,GAAG,QAAI,CAACC,UAAL,CAAgBhzB,aAAhB,CAA8BN,gBAA9B,CAA+C,WAA/C,CAAjB;;AAEAqzB,8BAAU,CAACj9B,OAAX,CAAmB,UAAAC,OAAO,EAAI;AAE5B,0BAAGA,OAAO,CAACuP,EAAR,IAAc,MAAjB,EAAwB;AACtBvP,+BAAO,CAACogB,SAAR,CAAkBkD,GAAlB,CAAsB,QAAtB;AACAtjB,+BAAO,CAACogB,SAAR,CAAkBkD,GAAlB,CAAsB,MAAtB;AACA;;AAED,uBALD,MAKK;AAEHtjB,+BAAO,CAACogB,SAAR,CAAkBvR,MAAlB,CAAyB,QAAzB;AACA7O,+BAAO,CAACogB,SAAR,CAAkBvR,MAAlB,CAAyB,MAAzB;AACA;;AAED;AACF,qBAdD;AAeA,mBAhCS,EAgCP,GAhCO,CAAV;AAmCJ,iBAvCD,MAuCM;AACJ,0BAAI,CAACnP,MAAL,GAAc,IAAd;AACD;AACF;AACF,aA9CH;AAiDA,iBAAK1B,cAAL,CAAoB+d,WAApB,CAAgC/c,SAAhC,CACE,UAAAU,MAAM,EAAI;AACR,kBAAGA,MAAM,IAAI,IAAb,EAAkB;AAChBJ,0BAAU,CAAC,YAAM;AACf,sBAAIw9B,WAAW,GAAG,QAAI,CAACC,OAAL,CAAa9yB,aAAb,CAA2BN,gBAA3B,CAA4C,GAA5C,CAAlB;;AACA,0BAAI,CAACjK,MAAL,GAAcA,MAAd;AACAo9B,6BAAW,CAAC/8B,OAAZ,CAAoB,UAAAC,OAAO,EAAI;AAC7B;AACA,wBAAGA,OAAO,CAACiC,IAAR,IAAgB,eAAnB,EAAmC;AACjCjC,6BAAO,CAACogB,SAAR,CAAkBkD,GAAlB,CAAsB,QAAtB;AACD,qBAFD,MAEK;AACHtjB,6BAAO,CAACogB,SAAR,CAAkBvR,MAAlB,CAAyB,QAAzB,EADG,CAEH;AACD;AACF,mBARD;;AAYA,sBAAImuB,UAAU,GAAG,QAAI,CAACC,UAAL,CAAgBhzB,aAAhB,CAA8BN,gBAA9B,CAA+C,WAA/C,CAAjB;;AAEAqzB,4BAAU,CAACj9B,OAAX,CAAmB,UAAAC,OAAO,EAAI;AAE5B,wBAAGA,OAAO,CAACuP,EAAR,IAAc,eAAjB,EAAiC;AAC/BvP,6BAAO,CAACogB,SAAR,CAAkBkD,GAAlB,CAAsB,QAAtB;AACAtjB,6BAAO,CAACogB,SAAR,CAAkBkD,GAAlB,CAAsB,MAAtB;AACA;;AAED,qBALD,MAKK;AAEHtjB,6BAAO,CAACogB,SAAR,CAAkBvR,MAAlB,CAAyB,QAAzB;AACA7O,6BAAO,CAACogB,SAAR,CAAkBvR,MAAlB,CAAyB,MAAzB;AACA;;AAED;AACF,mBAdD;AAeA,iBAhCQ,EAgCN,GAhCM,CAAV;AAiCD,eAlCD,MAkCK;AACH,wBAAI,CAACnP,MAAL,GAAc,IAAd;AACD;AACF,aAvCH;AA2CA,iBAAK1B,cAAL,CAAoBk/B,cAApB,CAAmCl+B,SAAnC,CACE,UAAAU,MAAM,EAAI;AACR,kBAAGA,MAAM,IAAI,IAAb,EAAkB;AAChB,oBAAGA,MAAM,CAAC,WAAD,CAAN,CAAoB,uBAApB,KAAgDD,SAAnD,EAA6D;AAC3D,0BAAI,CAACC,MAAL,GAAcA,MAAd;;AACA,sBAAIo9B,WAAW,GAAG,QAAI,CAACC,OAAL,CAAa9yB,aAAb,CAA2BN,gBAA3B,CAA4C,GAA5C,CAAlB;;AAEAmzB,6BAAW,CAAC/8B,OAAZ,CAAoB,UAAAC,OAAO,EAAI;AAC7B;AACA,wBAAGA,OAAO,CAACiC,IAAR,IAAgB,WAAnB,EAA+B;AAC7B;AACAjC,6BAAO,CAACogB,SAAR,CAAkBkD,GAAlB,CAAsB,QAAtB;AAED,qBAJD,MAIK;AACHtjB,6BAAO,CAACogB,SAAR,CAAkBvR,MAAlB,CAAyB,QAAzB;AACA;AACD;AACF,mBAVD;;AAWA,sBAAImuB,UAAU,GAAG,QAAI,CAACC,UAAL,CAAgBhzB,aAAhB,CAA8BN,gBAA9B,CAA+C,WAA/C,CAAjB;;AAEAqzB,4BAAU,CAACj9B,OAAX,CAAmB,UAAAC,OAAO,EAAI;AAC5B;AACA,wBAAGA,OAAO,CAACuP,EAAR,IAAc,WAAjB,EAA6B;AAC3BvP,6BAAO,CAACogB,SAAR,CAAkBkD,GAAlB,CAAsB,QAAtB;AACAtjB,6BAAO,CAACogB,SAAR,CAAkBkD,GAAlB,CAAsB,MAAtB;AACD,qBAHD,MAGK;AACHtjB,6BAAO,CAACogB,SAAR,CAAkBvR,MAAlB,CAAyB,QAAzB;AACA7O,6BAAO,CAACogB,SAAR,CAAkBvR,MAAlB,CAAyB,MAAzB,EAFG,CAGH;AACD;AACF,mBAVD;AAYD,iBA7BD,MA6BM;AACJ,0BAAI,CAACnP,MAAL,GAAc,IAAd;AACD;AACF;AACF,aApCH;AAsCD;;;iDAEmB;AAAA;;AAElBJ,sBAAU,CAAC,YAAM;AAEf,kBAAG,QAAI,CAACo9B,GAAL,CAAS90B,aAAT,MAA4B,CAAC,QAAI,CAAC80B,GAAL,CAAS70B,kBAAT,EAAhC,EAA8D;AAC5D,oBAAG,QAAI,CAAC60B,GAAL,CAAS50B,iBAAT,MAAgC,CAAC,QAAI,CAAC40B,GAAL,CAAS30B,sBAAT,EAApC,EAAsE;AACpE,0BAAI,CAAC20B,GAAL,CAASz0B,gBAAT;;AACA,0BAAI,CAACy0B,GAAL,CAAS10B,kBAAT;AACD;AACF,eALD,MAKM,IAAG,CAAC,QAAI,CAAC00B,GAAL,CAAS90B,aAAT,EAAD,IAA6B,CAAC,QAAI,CAAC80B,GAAL,CAAS70B,kBAAT,EAAjC,EAA+D;AACnE,oBAAG,CAAC,QAAI,CAAC60B,GAAL,CAAS50B,iBAAT,EAAD,IAAiC,CAAC,QAAI,CAAC40B,GAAL,CAAS30B,sBAAT,EAArC,EAAuE;AACrE,0BAAI,CAAC20B,GAAL,CAASz0B,gBAAT;;AACA,0BAAI,CAACy0B,GAAL,CAAS10B,kBAAT;AACD;AACF,eALK,MAKA,IAAG,QAAI,CAAC00B,GAAL,CAAS90B,aAAT,MAA4B,QAAI,CAAC80B,GAAL,CAAS70B,kBAAT,EAA/B,EAA6D;AACjE,wBAAI,CAAC60B,GAAL,CAASz0B,gBAAT;;AACA,wBAAI,CAACy0B,GAAL,CAASx0B,uBAAT,CAAiC,IAAjC;AACD,eAHK,MAGA,IAAG,CAAC,QAAI,CAACw0B,GAAL,CAAS90B,aAAT,EAAD,IAA6B,QAAI,CAAC80B,GAAL,CAAS70B,kBAAT,EAAhC,EAA8D;AAClE,oBAAG,CAAC,QAAI,CAAC60B,GAAL,CAAS50B,iBAAT,EAAD,IAAiC,QAAI,CAAC40B,GAAL,CAAS30B,sBAAT,EAApC,EAAsE;AACpE,0BAAI,CAAC20B,GAAL,CAASx0B,uBAAT,CAAiC,KAAjC;;AACA,0BAAI,CAACw0B,GAAL,CAASz0B,gBAAT,CAA0B,IAA1B;AACD;AAEF;AAEF,aAvBS,EAuBP,GAvBO,CAAV;AAwBD;;;;;;;yBAjMUw0B,mB,EAAmB,+K,EAAA,2J;AAAA,O;;;cAAnBA,mB;AAAmB,wC;AAAA;AAAA;;;;;;;;;;;;;;;;;;ACnBhC;;AACI;;AACI;;AACI;;AACI;;AAAsH;;AAAI;;AAC9H;;AAOA;;AACI;;AAAiJ;;AAAa;;AAClK;;AACA;;AACI;;AAAqI;;AAAS;;AAClJ;;AACA;;AACI;;AAAyI;;AAAU;;AACvJ;;AACA;;AACI;;AAAuD;AAAA,qBAAS,IAAAU,oBAAA,EAAT;AAA+B,aAA/B;;AACnD;;AACJ;;AACJ;;AACJ;;AAEJ;;AACA;;AACI;;AACI;;AACI;;AACI;;AACJ;;AAOA;;AACI;;AACJ;;AACA;;AACI;;AACJ;;AACA;;AACI;;AACJ;;AACJ;;AACJ;;AACJ;;AAEJ;;;;AApD0E;;AAAA;;;;;;;;;wEDiB7DV,mB,EAAmB;gBAL/B,uDAK+B;iBALrB;AACT9+B,oBAAQ,EAAE,iBADD;AAETC,uBAAW,EAAE,8BAFJ;AAGTC,qBAAS,EAAE,CAAC,8BAAD;AAHF,W;AAKqB,U;;;;;;;AAIRk/B,iBAAO,EAAE,CAAF;kBAA5B,uDAA4B;mBAAlB,S;AAAkB,WAAE,C;AACNE,oBAAU,EAAE,CAAF;kBAAlC,uDAAkC;mBAAxB,Y;AAAwB,WAAE;;;;;;;;;;;;;;;;;;;AE1BvC;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;UAkBaG,e;AAiBX,mCAAc;AAAA;;AAfd,eAAA9hB,mBAAA,GAAsB,KAAtB;AACA,eAAAD,cAAA,GAAiB,KAAjB;AAEA,eAAA6Z,UAAA,GAAa,KAAb;AACA,eAAAlP,eAAA,GAAkB,KAAlB;AAEQ,eAAAqX,SAAA,GAAuC,IAAI,oDAAJ,CAAoB,IAApB,CAAvC;AACA,eAAAC,cAAA,GAA4C,IAAI,oDAAJ,CAAoB,IAApB,CAA5C;AACA,eAAAC,gBAAA,GAA6C,IAAI,oDAAJ,CAAoB,IAApB,CAA7C;AACA,eAAAC,WAAA,GAAwC,IAAI,oDAAJ,CAAoB,IAApB,CAAxC;AACR,eAAA/hB,aAAA,GAAgB,KAAK8hB,gBAAL,CAAsBrjB,YAAtB,EAAhB;AACA,eAAAkB,QAAA,GAAW,KAAKoiB,WAAL,CAAiBtjB,YAAjB,EAAX;AACA,eAAA0iB,SAAA,GAAY,KAAKS,SAAL,CAAenjB,YAAf,EAAZ;AACA,eAAAujB,cAAA,GAAiB,KAAKH,cAAL,CAAoBpjB,YAApB,EAAjB;AAEiB;;;;kDAEOjW,O,EAAQ;AAC9B,gBAAGA,OAAO,IAAIxE,SAAd,EAAwB;AACtB,mBAAK6b,mBAAL,GAA2BrX,OAA3B;;AACA,mBAAKs5B,gBAAL,CAAsBz5B,IAAtB,CAA2B,KAAKwX,mBAAhC;AACD,aAHD,MAGK;AACH,mBAAKA,mBAAL,GAA2B,CAAC,KAAKA,mBAAjC;;AACA,mBAAKiiB,gBAAL,CAAsBz5B,IAAtB,CAA2B,KAAKwX,mBAAhC;AACD;AACF;;;6CAEkBrX,O,EAAQ;AACzB,gBAAGA,OAAO,IAAIxE,SAAd,EAAwB;AACtB,mBAAK4b,cAAL,GAAsBpX,OAAtB;;AACA,mBAAKu5B,WAAL,CAAiB15B,IAAjB,CAAsB,KAAKuX,cAA3B;AACD,aAHD,MAGK;AACH,mBAAKA,cAAL,GAAsB,CAAC,KAAKA,cAA5B;;AACA,mBAAKmiB,WAAL,CAAiB15B,IAAjB,CAAsB,KAAKuX,cAA3B;AACD;AACF;;;2CAEgBpX,O,EAAQ;AACvB,gBAAGA,OAAO,IAAIxE,SAAd,EAAwB;AACtB,mBAAKy1B,UAAL,GAAkBjxB,OAAlB;;AACA,mBAAKo5B,SAAL,CAAev5B,IAAf,CAAoBG,OAApB;AACD,aAHD,MAGK;AACH,mBAAKixB,UAAL,GAAkB,CAAC,KAAKA,UAAxB;;AACA,mBAAKmI,SAAL,CAAev5B,IAAf,CAAoB,KAAKoxB,UAAzB;AACD;AACF;;;gDAEqBjxB,O,EAAQ;AAC5B,gBAAGA,OAAO,IAAIxE,SAAd,EAAwB;AACtB,mBAAKumB,eAAL,GAAuB/hB,OAAvB;;AACA,mBAAKq5B,cAAL,CAAoBx5B,IAApB,CAAyBG,OAAzB;AACD,aAHD,MAGK;AACH,mBAAK+hB,eAAL,GAAuB,CAAC,KAAKA,eAA7B;;AACA,mBAAKsX,cAAL,CAAoBx5B,IAApB,CAAyB,KAAKkiB,eAA9B;AACD;AACF;;;8CAEgB;AACf,mBAAO,KAAK3K,cAAZ;AACD;;;mDAEqB;AACpB,mBAAO,KAAKC,mBAAZ;AACD;;;0CAEY;AACX,mBAAO,KAAK4Z,UAAZ;AACD;;;+CAEiB;AAChB,mBAAO,KAAKlP,eAAZ;AACD;;;;;;;yBAzEUoX,e;AAAe,O;;;eAAfA,e;AAAe,iBAAfA,eAAe,K;AAAA,oBAFd;;;;;wEAEDA,e,EAAe;gBAH3B,wDAG2B;iBAHhB;AACVvlB,sBAAU,EAAE;AADF,W;AAGgB,U;;;;;;;;;;;;;;;;;;;;AClB5B;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;;;;;;;;ACIQ;;AACI;;AAAqC;AAAA;;AAAA;;AAAA;AAAA;;AAA4D;;AAClE;;AACnC;;;;;;AAEA;;AACI;;AAAI;;AAAM;;AAEd;;;;;;AAYQ;;AACI;;AACI;;AAAG;;AAAW;;AAElB;;AACA;;AACI;;AAGJ;;AAEJ;;;;;;AALyB;;AAAA;;;;;;;;AAhBjC;;AACI;;AAAiB;;AAAe;;AAEhC;;AACuG;AAAA;;AAAA;;AAAA;AAAA;;AACvG;;AACA;;AAEA;;AAkBJ;;;;;;AAtBI;;AAAA,2FAAuB,YAAvB,EAAuB,GAAvB,EAAuB,WAAvB,EAAuB,QAAvB;;;;;;AAkDY;;AACI;;AACI;;AAAG;;AAAW;;AAElB;;AACA;;AACI;;AAGJ;;AAEJ;;;;;;AALyB;;AAAA;;;;;;;;;;;;;;;;AA1BjC;;AAEI;;AAKiI;AAAA;;AAAA;;AAAA;;AAAA;AAAA,aAAmC,YAAnC,EAAmC;AAAA;;AAAA;;AAAA;;AAAA;AAAA,WAAnC,EAAmC,WAAnC,EAAmC;AAAA;;AAAA;;AAAA;;AAAA;;AAAA;AAAA,WAAnC,EAAmC,SAAnC,EAAmC;AAAA;;AAAA;;AAAA;;AAAA;;AAAA;AAAA,WAAnC;;AAG7H;;AACJ;;AAMA;;AAkBJ;;;;;;;;;;;AA9BQ;;AAAA;;AADA,kNAAqG,UAArG,EAAqG,cAArG,EAAqG,WAArG,EAAqG,QAArG,EAAqG,cAArG,EAAqG,eAArG,EAAqG,WAArG,EAAqG,KAArG,EAAqG,WAArG,EAAqG,SAArG,EAAqG,gBAArG,EAAqG,+FAArG,EAAqG,YAArG,EAAqG,IAArG;;AADA;;AAOA;;AAAA;;;;;;AAdhB;;AAEI;;AAEI;;AAsCJ;;AAIJ;;;;;;AA9CM;;AAIyB;;AAAA;;;;;;AAmD/B;;AACI;;AAAI;;AAAW;;AACnB;;;;;;AAIQ;;AACI;;AACJ;;;;;;AADI;;AAAA;;;;;;AAHZ;;AACI;;AACI;;AAGJ;;AACJ;;;;;;AAJ6B;;AAAA;;;;;;AARrC;;AACI;;AACI;;AAIA;;AAOJ;;AACJ;;;;;;AAZoD;;AAAA;;AAIe;;AAAA;;;;;;AAa3D;;AACI;;AAAI;;AAAW;;AACnB;;;;;;AAEA;;AACI;;AACI;;AACG;;AACH;;AACA;;AACI;;AACJ;;AACJ;;AACJ;;;;;;AANW;;AAAA;;AAGC;;AAAA;;;;;;AAZpB;;AACI;;AACI;;AAIA;;AAUJ;;AACJ;;;;;;AAfoD;;AAAA;;AAIe;;AAAA;;;;UDxFtD6lB,sB;AA6UX,wCAAoBC,MAApB,EAA6CntB,gBAA7C,EAAyF/K,QAAzF,EAA4HC,QAA5H,EAAyJ2qB,eAAzJ,EAAyMtyB,WAAzM,EAA2OE,MAA3O,EAA0QD,cAA1Q,EAAyT4/B,MAAzT,EAAmV;AAAA;;AAA/T,eAAAD,MAAA,GAAAA,MAAA;AAAyB,eAAAntB,gBAAA,GAAAA,gBAAA;AAA4C,eAAA/K,QAAA,GAAAA,QAAA;AAAmC,eAAAC,QAAA,GAAAA,QAAA;AAA6B,eAAA2qB,eAAA,GAAAA,eAAA;AAAgD,eAAAtyB,WAAA,GAAAA,WAAA;AAAkC,eAAAE,MAAA,GAAAA,MAAA;AAA+B,eAAAD,cAAA,GAAAA,cAAA;AAA+C,eAAA4/B,MAAA,GAAAA,MAAA;AAxUzT,eAAAC,aAAA,GAAgB,EAAhB;AAGQ,eAAAC,YAAA,GAA6B,IAAI,4CAAJ,EAA7B;AACR,eAAAz/B,aAAA,GAAgB,EAAhB;AACA,eAAA0/B,WAAA,GAAc,EAAd;AAEA,eAAA5rB,eAAA,GAAkB;AAChB6rB,wBAAY,EAAE,EADE;AAEhB5rB,mBAAO,EAAE;AAFO,WAAlB;AAUA,eAAAG,MAAA,GAAS,KAAT;AACA,eAAA7L,IAAA,GAAO,IAAP,CAsTmV,CAlTnV;;AAIA,eAAAu3B,aAAA,GAAgB,IAAI,wDAAJ,CAAc;AAC5B3K,kBAAM,EAAE,IAAI,wDAAJ,CAAc,CAAC,KAAK4K,WAAL,EAAD,CAAd;AADoB,WAAd,CAAhB;AAKA,eAAAC,aAAA,GAAgB,KAAhB;AACA,eAAAloB,eAAA,GAAkB,EAAlB;AACA,eAAAmoB,qBAAA,GAAwB,EAAxB;AACA,eAAAC,uBAAA,GAA0B,EAA1B;AACA,eAAAC,YAAA,GAAe,EAAf;AACA,eAAAC,iBAAA,GAAoB,EAApB;AAIA,eAAA1oB,WAAA,GAAc,KAAd;AAiSE;;;;;;;;;;;;AAYD;;;;oCA1SSoK,K,EAAK;AAAA;;AACb3gB,sBAAU,CAAC,YAAM;AACf,kBAAIk/B,OAAO,GAAGj7B,KAAK,CAACC,IAAN,CAAWyc,KAAK,CAACyT,IAAjB,CAAd;AACA,kBAAI+K,kBAAkB,GAAG,KAAzB;AACAD,qBAAO,CAACxX,IAAR,CAAa,UAAChnB,OAAD,EAA0B;AACrC;AACA,oBAAIA,OAAO,CAACogB,SAAR,IAAqB3gB,SAAzB,EAAoC;AAClC,sBAAIO,OAAO,CAACogB,SAAR,CAAkBgD,QAAlB,CAA2B,WAA3B,CAAJ,EAA6C;AAC3Cqb,sCAAkB,GAAG,IAArB;AACA,2BAAO,IAAP;AACD,mBAHD,MAGO;AACLA,sCAAkB;AAClB,2BAAO,KAAP;AACD;AACF,iBARD,MAQO;AACL,yBAAO,KAAP;AACD;AACF,eAbD;AAgBA,kBAAIC,QAAJ;;AAEA,kBAAID,kBAAJ,EAAwB;AACtB,oBAAIE,cAAc,GAAGp7B,KAAK,CAACC,IAAN,CAAWiG,QAAQ,CAAC8M,sBAAT,CAAgC,WAAhC,CAAX,CAArB;AACAooB,8BAAc,CAAC5+B,OAAf,CAAuB,UAAAC,OAAO,EAAI;AAChC,sBAAI4J,QAAQ,GAAGrG,KAAK,CAACC,IAAN,CAAWxD,OAAO,CAAC4J,QAAnB,CAAf;AACAA,0BAAQ,CAAC7J,OAAT,CAAiB,UAAA6+B,QAAQ,EAAI;AAC3B,wBAAIA,QAAQ,CAACxe,SAAT,CAAmBgD,QAAnB,CAA4B,kBAA5B,CAAJ,EAAqD;AACnDsb,8BAAQ,GAAG1+B,OAAO,CAAC4J,QAAnB;AACAg1B,8BAAQ,CAAC/vB,MAAT;AACD;AACF,mBALD;AAMD,iBARD;AASApF,wBAAQ,CAACE,gBAAT,CAA0B,YAA1B,EAAwC5J,OAAxC,CAAgD,UAAAC,OAAO,EAAI;AACzD,0BAAI,CAAC0F,QAAL,CAAc6C,WAAd,CAA0BvI,OAA1B,EAAmC,WAAnC;;AACA,0BAAI,CAAC0F,QAAL,CAAcyE,QAAd,CAAuBnK,OAAvB,EAAgC,oBAAoB,CAApD;;AAEA,sBAAI6+B,IAAI,GAAG7+B,OAAO,CAAC8+B,sBAAnB;AACA,sBAAIh7B,IAAI,GAAG9D,OAAO,CAAC++B,kBAAnB;;AAEA,sBAAIF,IAAI,IAAIp/B,SAAZ,EAAuB;AACrB,wBAAIo/B,IAAI,CAACze,SAAL,IAAkB3gB,SAAtB,EAAiC;AAC/B,0BAAIu/B,UAAU,GAAGH,IAAI,CAACI,SAAtB;AACA,0BAAIC,SAAS,GAAG,kCAAkCC,IAAlC,CAAuCH,UAAvC,CAAhB;;AACA,0BAAIE,SAAJ,EAAe;AACb,gCAAI,CAACx5B,QAAL,CAAcyE,QAAd,CAAuBnK,OAAvB,EAAgC,eAAhC;AACD;AACF;AACF,mBARD,MAQO,IAAI8D,IAAI,IAAIrE,SAAZ,EAAuB;AAC5B,wBAAIqE,IAAI,CAACsc,SAAL,IAAkB3gB,SAAtB,EAAiC;AAC/B,0BAAIu/B,WAAU,GAAGl7B,IAAI,CAACm7B,SAAtB;;AACA,0BAAIC,UAAS,GAAG,kCAAkCC,IAAlC,CAAuCH,WAAvC,CAAhB;;AACA,0BAAIE,UAAJ,EAAe;AACb,gCAAI,CAACx5B,QAAL,CAAcyE,QAAd,CAAuBnK,OAAvB,EAAgC,gBAAhC;AACD;AACF;AACF;AACF,iBAxBD;AA0BA,oBAAIo/B,gBAAJ;AAEA77B,qBAAK,CAACC,IAAN,CAAWk7B,QAAX,EAAqB3+B,OAArB,CACE,UAACC,OAAD,EAAyB;AACvBo/B,kCAAgB,GAAGp/B,OAAO,CAACq/B,YAAR,CAAqB,UAArB,CAAnB;AACA;AACD,iBAJH;AAOA,wBAAI,CAACzqB,OAAL,GAAe,EAAf;;AAEA,wBAAI,CAACvC,YAAL,CAAkBC,OAAlB,GAA4B8sB,gBAAgB,GAAC,CAA7C,EAAgD3sB,IAAhD;;AAEA,oBAAI6sB,UAAU,GAAG,QAAI,CAACjtB,YAAL,CAAkBC,OAAlB,GAA4B8sB,gBAAgB,GAAC,CAA7C,EAAgDG,mBAAjE;;AACA,wBAAI,CAACptB,eAAL,CAAqBC,OAArB,GAA+B,CAACgtB,gBAAgB,GAAE,CAAnB,EAAsBhqB,QAAtB,EAA/B;;AACA,wBAAI,CAAC5E,gBAAL,CAAsB2G,aAAtB,CAAoC,IAApC;;AACA,wBAAI,CAAChF,eAAL,CAAqB6rB,YAArB,GAAoCsB,UAApC;AACA,oBAAIE,aAAa,GAAGj8B,KAAK,CAACC,IAAN,CAAWiG,QAAQ,CAACE,gBAAT,CAA0B,0BAA1B,CAAX,CAApB;AACA,oBAAI81B,UAAU,GAAG,EAAjB;AACAD,6BAAa,CAACz/B,OAAd,CAAsB,UAAAC,OAAO,EAAI;AAC/B,sBAAI4J,QAAQ,GAAGrG,KAAK,CAACC,IAAN,CAAWxD,OAAO,CAAC4J,QAAnB,CAAf;AACAA,0BAAQ,CAAC7J,OAAT,CACE,UAAA2/B,IAAI,EAAE;AACJ,wBAAI50B,QAAQ,GAAG60B,QAAQ,CAACD,IAAI,CAACL,YAAL,CAAkB,UAAlB,CAAD,CAAvB;AACA,wBAAI3/B,MAAM,GAAG;AACXgW,2BAAK,EAAG,QAAI,CAAChW,MAAL,CAAYoL,QAAQ,GAAC,CAArB,EAAwBgL,KADrB;AAEXH,yBAAG,EAAG,QAAI,CAACjW,MAAL,CAAYoL,QAAQ,GAAC,CAArB,EAAwB6K;AAFnB,qBAAb;AAKA8pB,8BAAU,CAACr/B,IAAX,CAAgBV,MAAhB;AACD,mBATH;AAWD,iBAbD;AAeAG,uBAAO,CAACC,GAAR,CAAY2/B,UAAZ;AACA,wBAAI,CAAC3qB,aAAL,GAAqB2qB,UAArB;AAGD,eA3ED,MA2EO;AACL,oBAAI,CAAC,QAAI,CAACtB,aAAV,EAAyB;AAEvB;AACA10B,0BAAQ,CAACE,gBAAT,CAA0B,YAA1B,EAAwC5J,OAAxC,CAAgD,UAAAC,OAAO,EAAI;AACzD,4BAAI,CAAC0F,QAAL,CAAc6C,WAAd,CAA0BvI,OAA1B,EAAmC,WAAnC;;AACA,4BAAI,CAAC0F,QAAL,CAAc6C,WAAd,CAA0BvI,OAA1B,EAAmC,gBAAnC;AACD,mBAHD;AAID;AACF;AACF,aA1GS,EA0GP,EA1GO,CAAV;AA2GD;;;wCAGaigB,K,EAAK;AAAA;;AAEjB3gB,sBAAU,CAAC,YAAM;AAEf;AACA,kBAAI0B,KAAK,GAAG,QAAI,CAACmR,eAAL,CAAqBC,OAAjC,CAHe,CAKf;AACA;;AACA,kBAAIpR,KAAK,IAAI,EAAb,EAAiB;AACf;AACA,oBAAIuN,OAAO,GAAG,QAAI,CAAC8D,YAAL,CAAkBC,OAAlB,GAA4BtR,KAA5B,CAAd;AACD;;;;;;AAKA;AAIF,aAnBS,EAmBP,EAnBO,CAAV;AAqBA1B,sBAAU,CAAC,YAAM;AACf;AACA,kBAAIk/B,OAAO,GAAGj7B,KAAK,CAACC,IAAN,CAAWyc,KAAK,CAACyT,IAAjB,CAAd,CAFe,CAGf;;AACA,kBAAIkM,QAAQ,GAAGn2B,QAAQ,CAACo2B,cAAT,CAAwB,QAAI,CAAC1tB,eAAL,CAAqB6rB,YAA7C,CAAf;AACAn+B,qBAAO,CAACC,GAAR;AACA,kBAAIsS,OAAO,GAAG,QAAI,CAACD,eAAL,CAAqBC,OAAnC;;AACA,kBAAIosB,OAAO,CAACld,QAAR,CAAiBse,QAAjB,CAAJ,EAAgC,CAE/B,CAFD,MAEO;AACL,oBAAG,QAAI,CAAClgC,MAAL,IAAe,IAAlB,EAAuB;AACrB,0BAAI,CAACA,MAAL,CAAYK,OAAZ,CAAoB,UAAAC,OAAO,EAAI;AAC7B;AACA,wBAAIA,OAAO,CAAC8K,QAAR,IAAoBsH,OAAxB,EAAiC;AAE/BpS,6BAAO,CAAC8/B,OAAR,GAAkB,KAAlB;AAEA,8BAAI,CAAC3tB,eAAL,CAAqB6rB,YAArB,GAAoC,EAApC;AACA,8BAAI,CAAC7rB,eAAL,CAAqBC,OAArB,GAA+B,EAA/B;AACD;AACF,mBATD;AAUD;;AAGD,oBAAI2tB,iBAAiB,GAAGt2B,QAAQ,CAAC8M,sBAAT,CAAgC,WAAWnE,OAA3C,EAAoD,CAApD,CAAxB,CAfK,CAgBL;;AACA,oBAAI2tB,iBAAiB,IAAI,IAAzB,EAA+B;AAC7B,sBAAIn8B,CAAC,GAAG,CAAR;AACAL,uBAAK,CAACC,IAAN,CAAWu8B,iBAAiB,CAACtN,UAA7B,EAAyC1yB,OAAzC,CACE,UAAAC,OAAO,EAAI;AACvB;AACc,wBAAIggC,eAAe,GAAGhgC,OAAO,CAACigC,WAA9B;AACA,wBAAIpB,IAAJ,EAAU/6B,IAAV;;AACA,wBAAI9D,OAAO,CAAC,WAAD,CAAP,IAAwBP,SAA5B,EAAuC;AAErC,0BAAIO,OAAO,CAAC,WAAD,CAAP,CAAqBojB,QAArB,CAA8B,MAA9B,KAAyCpjB,OAAO,CAAC,WAAD,CAAP,CAAqBojB,QAArB,CAA8B,WAA9B,CAA7C,EAAyF;AAEvFyb,4BAAI,GAAGt7B,KAAK,CAACC,IAAN,CAAWu8B,iBAAiB,CAACtN,UAA7B,EAAyC7uB,CAAC,GAAG,CAA7C,CAAP;AACAE,4BAAI,GAAGP,KAAK,CAACC,IAAN,CAAWu8B,iBAAiB,CAACtN,UAA7B,EAAyC7uB,CAAzC,CAAP;;AAEA,4BAAIE,IAAI,IAAI9D,OAAZ,EAAqB;AACnB8D,8BAAI,GAAGP,KAAK,CAACC,IAAN,CAAWu8B,iBAAiB,CAACtN,UAA7B,EAAyC7uB,CAAC,GAAG,CAA7C,CAAP;AACD;;AAED,4BAAIi7B,IAAI,IAAIp/B,SAAZ,EAAuB;AACrB,8BAAIo/B,IAAI,CAAChM,QAAL,IAAiB,OAArB,EAA8B;AAC5BmN,2CAAe,GAAGnB,IAAI,CAACoB,WAAL,IAAoBD,eAAtC;AACAnB,gCAAI,CAAChwB,MAAL;AACD;AACF;;AAED,4BAAI/K,IAAI,IAAIrE,SAAZ,EAAuB;AACrB,8BAAIqE,IAAI,CAAC+uB,QAAL,IAAiB,OAArB,EAA8B;AAC5BmN,2CAAe,IAAIl8B,IAAI,CAACm8B,WAAxB;AACAn8B,gCAAI,CAAC+K,MAAL;AACD;AACF;;AAED,4BAAM5M,IAAI,GAAG,QAAI,CAACyD,QAAL,CAAcw6B,UAAd,CAAyBF,eAAzB,CAAb;;AAEA,gCAAI,CAACt6B,QAAL,CAAcy6B,YAAd,CAA2BJ,iBAA3B,EAA8C99B,IAA9C,EAAoDjC,OAApD,EAzBuF,CA0BvF;;;AAEAA,+BAAO,CAAC6O,MAAR;AAGD;AACF;;AAEDjL,qBAAC;AACF,mBA1CH;AA6CD;AAEF;AACF,aA5ES,EA4EP,EA5EO,CAAV;AA8ED;;;0CAKeqc,K,EAAsB;AAAA;;AACpC;AACA,gBAAIA,KAAK,CAACmgB,MAAN,IAAgBngB,KAAK,CAACogB,OAA1B,EAAmC;AACjC,mBAAKlC,aAAL,GAAqB,IAArB;;AACA,kBAAG,KAAKz+B,MAAL,IAAeD,SAAlB,EAA4B;AAC1B,qBAAKC,MAAL,CAAYK,OAAZ,CAAoB,UAAAC,OAAO,EAAI;AAC7BA,yBAAO,CAAC8/B,OAAR,GAAkB,KAAlB;AACA,0BAAI,CAAC3tB,eAAL,CAAqB6rB,YAArB,GAAoC,EAApC;AACA,0BAAI,CAAC7rB,eAAL,CAAqBC,OAArB,GAA+B,EAA/B;AACD,iBAJD;AAKD;AAEF,aAVD,MAUO,IAAI6N,KAAK,CAACqgB,IAAN,IAAc,QAAlB,EAA4B;AAEjC,kBAAIV,QAAQ,GAAGn2B,QAAQ,CAACo2B,cAAT,CAAwB,KAAK1tB,eAAL,CAAqB6rB,YAA7C,CAAf;AACA,kBAAI5rB,OAAO,GAAG,KAAKD,eAAL,CAAqBC,OAAnC;;AAEA,kBAAG,KAAK1S,MAAL,IAAeD,SAAlB,EAA4B;AAC1B,qBAAKC,MAAL,CAAYK,OAAZ,CAAoB,UAAAC,OAAO,EAAI;AAC7B,sBAAIA,OAAO,CAACuP,EAAR,IAAc6C,OAAlB,EAA2B;AAEzBpS,2BAAO,CAAC8/B,OAAR,GAAkB,KAAlB;AAEA,4BAAI,CAAC3tB,eAAL,CAAqB6rB,YAArB,GAAoC,EAApC;AACA,4BAAI,CAAC7rB,eAAL,CAAqBC,OAArB,GAA+B,EAA/B;AACD;AACF,iBARD;AAUA,oBAAI2tB,iBAAiB,GAAGt2B,QAAQ,CAAC8M,sBAAT,CAAgC,WAAWnE,OAA3C,EAAoD,CAApD,CAAxB;;AACA,oBAAI2tB,iBAAiB,IAAI,IAAzB,EAA+B;AAC7B,sBAAIn8B,CAAC,GAAG,CAAR;AACAL,uBAAK,CAACC,IAAN,CAAWu8B,iBAAiB,CAACn2B,QAA7B,EAAuC7J,OAAvC,CACE,UAAAC,OAAO,EAAI;AACTH,2BAAO,CAACC,GAAR,CAAYE,OAAZ;;AACA,wBAAIA,OAAO,CAACogB,SAAR,CAAkBgD,QAAlB,CAA2B,MAA3B,CAAJ,EAAwC;AAEtC,0BAAI4c,eAAe,GAAGhgC,OAAO,CAACigC,WAA9B;;AACA,0BAAMh+B,IAAI,GAAG,QAAI,CAACyD,QAAL,CAAcw6B,UAAd,CAAyBF,eAAzB,CAAb,CAHsC,CAItC;AACA;;;AACA,8BAAI,CAACt6B,QAAL,CAAcy6B,YAAd,CAA2BJ,iBAA3B,EAA8C99B,IAA9C,EAAoDjC,OAApD;;AACA,8BAAI,CAAC0F,QAAL,CAAc4F,WAAd,CAA0By0B,iBAA1B,EAA6C//B,OAA7C,EAPsC,CAQtC;AACA;AACA;;;AACA4D,uBAAC;AACD;AACD;;AACDA,qBAAC;AACF,mBAlBH;AAqBD;AACF;AAKF;AACF;;;2CAGgBqc,K,EAAsB;AACrC,gBAAI,CAACA,KAAK,CAACmgB,MAAP,IAAiB,CAACngB,KAAK,CAACogB,OAA5B,EAAqC;AACnC,mBAAKlC,aAAL,GAAqB,KAArB;AACD;AACF;;;qCAkBO;AAAA;;AAEN;AAGA,iBAAKF,aAAL,GAAqB,KAAKlgC,WAAL,CAAiBc,KAAjB,CAAuB;AAC1Cy0B,oBAAM,EAAE,KAAKv1B,WAAL,CAAiBe,KAAjB,CAAuB,CAAC,KAAKo/B,WAAL,EAAD,CAAvB;AADkC,aAAvB,CAArB;AAIA,iBAAK7N,eAAL,CAAqBlW,kBAArB,CAAwCnb,SAAxC,CACE,UAAAC,IAAI,EAAE;AACJ,kBAAGA,IAAI,IAAI,IAAX,EAAgB;AACd,wBAAI,CAAC4+B,aAAL,GAAqB5+B,IAArB;AACD,eAFD,MAEK;AACH,wBAAI,CAAC4+B,aAAL,GAAqB,EAArB;AACD;AACF,aAPH,EAOI,UAAAt8B,KAAK,EAAE;AACP1B,qBAAO,CAACC,GAAR,CAAYyB,KAAZ;AACD,aATH;AAYA,iBAAK8uB,eAAL,CAAqBjW,oBAArB,CAA0Cpb,SAA1C,CACE,UAAAC,IAAI,EAAE;AACJY,qBAAO,CAACC,GAAR,CAAYb,IAAZ;;AACA,kBAAGA,IAAI,IAAI,IAAX,EAAgB;AACd,wBAAI,CAAC2zB,WAAL,GAAmB3zB,IAAnB;AAGD,eAJD,MAIK;AACH,wBAAI,CAAC2zB,WAAL,GAAmB,EAAnB;AACD;AACF,aAVH,EAUI,UAAArxB,KAAK,EAAE;AACP1B,qBAAO,CAACC,GAAR,CAAYyB,KAAZ;AACD,aAZH;AAeA,iBAAK8uB,eAAL,CAAqBhW,yBAArB,CAA+Crb,SAA/C,CACE,UAAAC,IAAI,EAAE;AACJY,qBAAO,CAACC,GAAR,CAAYb,IAAZ;;AACA,kBAAGA,IAAI,IAAI,IAAX,EAAgB;AACd,wBAAI,CAACs/B,iBAAL,GAAyBt/B,IAAzB;AAGD,eAJD,MAIK;AACH,wBAAI,CAACs/B,iBAAL,GAAyB,EAAzB;AACD;AACF,aAVH,EAUI,UAAAh9B,KAAK,EAAE;AACP1B,qBAAO,CAACC,GAAR,CAAYyB,KAAZ;AACD,aAZH;AAiBA,iBAAKu8B,YAAL,CAAkB/+B,IAAlB,CAAuB,oEAAa,GAAb,CAAvB,EAA0CC,SAA1C,CACE,UAAAC,IAAI,EAAI;AACN;AACA,sBAAI,CAAC4U,aAAL,CAAmB5U,IAAI,CAACsP,OAAxB,EAAiCtP,IAAI,CAAC0E,GAAtC,EAA2C1E,IAAI,CAAC2E,CAAhD;AACD,aAJH;AAOA,iBAAK4M,gBAAL,CAAsBwT,cAAtB,CAAqChlB,SAArC,CACE,UAAAC,IAAI,EAAG;AAEL,kBAAIshC,UAAU,GAAG,EAAjB;;AACA,kBAAGthC,IAAI,IAAI,IAAX,EAAgB;AAGd,wBAAI,CAACgX,eAAL,GAAuB,QAAI,CAACA,eAAL,CAAqBvS,MAArB,CACrB,UAAA1D,OAAO,EAAI;AACT,yBAAOA,OAAO,CAACuP,EAAR,IAActQ,IAAI,CAACsQ,EAA1B;AACD,iBAHoB,CAAvB,CAHc,CAQd;;AAEA,wBAAI,CAAC7P,MAAL,CAAYK,OAAZ,CAAoB,UAAAC,OAAO,EAAI;AAC7B,sBAAGA,OAAO,CAACuP,EAAR,IAActQ,IAAI,CAACuW,OAAtB,EAA8B;AAC5B;;;AAKA,wBAAIE,KAAK,GAAG1V,OAAO,CAAC8V,KAApB;AACA,wBAAIH,GAAG,GAAG3V,OAAO,CAAC2V,GAAlB;;AAEA,4BAAI,CAACM,eAAL,CAAqBlW,OAArB,CAA6B,UAAAC,OAAO,EAAI;AACtC,0BAAGA,OAAO,CAACwgC,KAAR,CAAc,CAAd,EAAiB9qB,KAAjB,IAA0BA,KAA1B,IAAoC1V,OAAO,CAACwgC,KAAR,CAAc,CAAd,EAAiB7qB,GAAjB,IAAwBA,GAA/D,EAAmE;AACjE4qB,kCAAU,CAACngC,IAAX,CAAgBJ,OAAhB;AACD;AACF,qBAJD;;AAMAH,2BAAO,CAACC,GAAR,CAAYygC,UAAZ,EAAwBA,UAAU,CAAC3+B,MAAnC;;AAEA,wBAAG2+B,UAAU,CAAC3+B,MAAX,IAAqB,CAAxB,EAA0B;AACxB,0BAAIkJ,QAAQ,GAAG9K,OAAO,CAAC8K,QAAvB;AACA,0BAAIwL,WAAW,GAAG7M,QAAQ,CAAC8M,sBAAT,CAAgC,YAAUzL,QAAQ,GAAC,CAAnB,CAAhC,EAAuD,CAAvD,CAAlB;;AACA,8BAAI,CAACpF,QAAL,CAAc6C,WAAd,CAA0B+N,WAA1B,EAAuC,YAAvC;AACD;AACF;AACF,iBAxBD;AAyBD;AACF,aAxCH;AA2CD;;;sCAGWjX,O,EAAwB;AAAA;;AAClCC,sBAAU,CAAC,YAAM;AACf,kBAAGD,OAAO,CAACqV,OAAR,CAAgBlV,YAAhB,IAAgC,IAAnC,EAAwC;AACtC,oBAAI,QAAI,CAACE,MAAL,IAAeL,OAAO,CAACqV,OAAR,CAAgBlV,YAAnC,EAAiD;AAC/C,0BAAI,CAACihC,UAAL,GAAkB,QAAI,CAACxC,aAAL,CAAmBt+B,GAAnB,CAAuB,QAAvB,CAAlB;;AACA,0BAAI,CAAC8gC,UAAL,CAAgB7gC,KAAhB;;AACA,0BAAI,CAACkV,aAAL,GAAqB,IAArB;AACA,0BAAI,CAACmB,eAAL,GAAuB,EAAvB;AACA,0BAAI,CAACooB,uBAAL,GAA+B,EAA/B;AAEA;;;;;;;;;AAcD;;AAGD,wBAAI,CAAC3+B,MAAL,GAAcL,OAAO,CAACqV,OAAR,CAAgBlV,YAAhB,CAA6B,QAA7B,CAAd;AACA,oBAAIiV,UAAU,GAAGpV,OAAO,CAACqV,OAAR,CAAgBlV,YAAhB,CAA6B,YAA7B,CAAjB;AACA,wBAAI,CAACkhC,MAAL,GAAcrhC,OAAO,CAACqV,OAAR,CAAgBlV,YAAhB,CAA6B,WAA7B,CAAd;AACAK,uBAAO,CAACC,GAAR,CAAY,QAAI,CAACJ,MAAjB;;AACA,oBAAI,QAAI,CAACA,MAAL,IAAe,IAAnB,EAAyB;AAEvB,sBAAG,QAAI,CAACA,MAAL,CAAYkC,MAAZ,IAAsB,CAAzB,EAA2B;AACzB,4BAAI,CAACiU,WAAL,GAAmB,IAAnB;AACAhW,2BAAO,CAACC,GAAR,CAAY,YAAZ;AACD,mBAHD,MAGK;AACH,4BAAI,CAAC+V,WAAL,GAAmB,KAAnB;AACAhW,2BAAO,CAACC,GAAR,CAAY,gBAAZ;AACD,mBARsB,CAUvB;AACA;;;AAEA,0BAAI,CAAC0Q,gBAAL,CAAsBmwB,aAAtB,CAAoClsB,UAApC,EAAgDzV,SAAhD,CACE,UAAAC,IAAI,EAAE;AACJY,2BAAO,CAACC,GAAR,CAAYb,IAAZ;;AACA,wBAAGA,IAAI,CAAC2hC,WAAL,IAAoBnhC,SAAvB,EAAiC;AAC/BR,0BAAI,CAAC2hC,WAAL,CAAiB7gC,OAAjB,CAAyB,UAAAC,OAAO,EAAI;AAClC;AACA,4BAAGA,OAAO,CAAC6gC,KAAR,IAAiB,aAApB,EAAkC;AAChC,8BAAG7gC,OAAO,CAACoW,UAAR,CAAmBf,YAAnB,IAAmC5V,SAAtC,EAAgD;AAC9CO,mCAAO,CAACoW,UAAR,CAAmB,cAAnB,IAAqC,EAArC;AACD;;AAED,8BAAG,CAAC7S,KAAK,CAACqS,OAAN,CAAc5V,OAAO,CAACoW,UAAR,CAAmBf,YAAjC,CAAJ,EAAmD;AACjD,gCAAIyrB,OAAO,GAAG,EAAd;AACAA,mCAAO,CAAC1gC,IAAR,CAAaJ,OAAO,CAACoW,UAAR,CAAmB,cAAnB,CAAb;AACApW,mCAAO,CAACoW,UAAR,CAAmB,cAAnB,IAAqC0qB,OAArC;AACD;;AAGD,8BAAGv9B,KAAK,CAACqS,OAAN,CAAc5V,OAAO,CAACoW,UAAR,CAAmB,cAAnB,CAAd,CAAH,EAAqD;AACnD7S,iCAAK,CAACC,IAAN,CAAWxD,OAAO,CAACoW,UAAR,CAAmB,cAAnB,CAAX,EAA+CrW,OAA/C,CAAuD,UAAAC,OAAO,EAAI;AAEhE,kCAAGA,OAAO,CAAC,MAAD,CAAP,IAAmBP,SAAtB,EAAgC;AAC9BI,uCAAO,CAACC,GAAR,CAAY,MAAZ;AACAE,uCAAO,CAAC,MAAD,CAAP,GAAkB,EAAlB;AACD;;AAED,kCAAGA,OAAO,CAAC,YAAD,CAAP,IAAwBP,SAA3B,EAAqC;AACnCO,uCAAO,CAAC,YAAD,CAAP,GAAwB,EAAxB;AACD;AACF,6BAVD;AAWD;;AACD,kCAAI,CAACiW,eAAL,CAAqB7V,IAArB,CAA0BJ,OAA1B;AACD,yBA1BD,MA0BM,IAAGA,OAAO,CAAC6gC,KAAR,IAAiB,QAApB,EAA6B;AACjC,kCAAI,CAACxC,uBAAL,CAA6Bj+B,IAA7B,CAAkCJ,OAAlC;AACD;AACF,uBA/BD,EAD+B,CAiC/B;;AACA,0BAAG,QAAI,CAACiW,eAAL,CAAqBrU,MAArB,GAA8B,CAAjC,EAAmC;AAEjC,gCAAI,CAAC5D,cAAL,CAAoB2J,uBAApB,CAA4C,IAA5C;;AACA,gCAAI,CAAC3J,cAAL,CAAoB0J,sBAApB,CAA2C,QAAI,CAACuO,eAAhD;;AAEA,4BAAI8qB,KAAK,GAAG,QAAZ;AACA,4BAAIC,YAAY,GAAGl3B,WAAW,CAAC,UAACC,GAAD,EAAO;AACpC,8BAAI;AACF,gCAAG,QAAI,CAACrK,MAAL,IAAe,IAAlB,EAAuB;AACrB,sCAAI,CAACA,MAAL,CAAYK,OAAZ,CAAoB,UAAAC,OAAO,EAAI;AAC7B,oCAAIihC,YAAY,GAAGjhC,OAAO,CAAC8V,KAA3B;AACA,oCAAIorB,UAAU,GAAGlhC,OAAO,CAAC2V,GAAzB;;AACA,wCAAI,CAACM,eAAL,CAAqBlW,OAArB,CAA6B,UAAAmW,UAAU,EAAI;AACzC,sCAAGA,UAAU,CAACsqB,KAAX,CAAiB5+B,MAAjB,IAA2B,CAA9B,EAAgC;AAC9B,wCAAIu/B,eAAe,GAAGjrB,UAAU,CAACsqB,KAAX,CAAiB,CAAjB,EAAoB9qB,KAA1C;AACA,wCAAI0rB,aAAa,GAAGlrB,UAAU,CAACsqB,KAAX,CAAiB,CAAjB,EAAoB7qB,GAAxC;;AAEA,wCAAGwrB,eAAe,IAAIF,YAAnB,IAAoCG,aAAa,IAAIF,UAAxD,EAAmE;AACjE,0CAAI7qB,eAAe,GAAGrW,OAAO,CAAC8K,QAA9B;AACA,0CAAIwL,WAAW,GAAG7M,QAAQ,CAAC8M,sBAAT,CAAgC,YAAUF,eAAe,GAAC,CAA1B,CAAhC,EAA8D,CAA9D,CAAlB;AACA,0CAAI9M,IAAI,GAAG,QAAX;AACA,0CAAIyb,KAAK,GAAGlb,WAAW,CAAC,UAACC,GAAD,EAAO;AAE3B,4CAAG;AACC,8CAAGuM,WAAW,IAAI7W,SAAlB,EAA4B;AAC1B8J,gDAAI,CAAC7D,QAAL,CAAcyE,QAAd,CAAuBmM,WAAvB,EAAoC,YAApC;AACAnJ,yDAAa,CAAC6X,KAAD,CAAb;AACD;AACJ,yCALD,CAKC,OAAM9gB,CAAN,EAAQ;AACLrE,iDAAO,CAACC,GAAR,CAAYoE,CAAZ;AACH;AAGJ,uCAZsB,EAYpB,GAZoB,CAAvB;AAgBD;AACF;AACF,iCA3BD;AA6BD,+BAhCD;;AAiCAiJ,2CAAa,CAAC6zB,YAAD,CAAb;AACD;AAEF,2BAtCD,CAsCE,OAAOz/B,KAAP,EAAc;AACd1B,mCAAO,CAACC,GAAR,CAAYyB,KAAZ;AACD;AACF,yBA1C6B,EA0C3B,GA1C2B,CAA9B;AA8CD,uBApDD,MAoDK;AACH,gCAAI,CAAC0U,eAAL,GAAuB,EAAvB;;AACA,gCAAI,CAACjY,cAAL,CAAoB2J,uBAApB,CAA4C,KAA5C;;AACA,gCAAI,CAAC3J,cAAL,CAAoB0J,sBAApB,CAA2C,IAA3C;AAED;AAED;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAsKD,qBAnQD,MAmQK;AACH,8BAAI,CAACuO,eAAL,GAAuB,EAAvB;AACA,8BAAI,CAACooB,uBAAL,GAA+B,EAA/B;;AACA,8BAAI,CAACrgC,cAAL,CAAoB2J,uBAApB,CAA4C,IAA5C;;AACA,8BAAI,CAAC3J,cAAL,CAAoB0J,sBAApB,CAA2C,IAA3C;AACD;AAEF,mBA7QH,EA6QI,UAAAnG,KAAK,EAAE;AACP1B,2BAAO,CAACC,GAAR,CAAYyB,KAAZ;AACD,mBA/QH;AAiRD;AACF,eA5TD,MA4TK;AACH,wBAAI,CAAC7B,MAAL,GAAc,IAAd;AACD;AAIF,aAnUS,EAmUP,EAnUO,CAAV;AAqUD;;;wCAEU,CAEV;;;sCAIW2hC,K,EAAQ;AAClB,gBAAIA,KAAK,IAAI5hC,SAAb,EAAwB;AACtB,qBAAO,KAAK1B,WAAL,CAAiBc,KAAjB,CAAuB;AAC5BsF,sBAAM,EAAE,IAAI,0DAAJ,CAAgBk9B,KAAhB;AADoB,eAAvB,CAAP;AAGD,aAJD,MAIO;AACL,qBAAO,KAAKtjC,WAAL,CAAiBc,KAAjB,CAAuB;AAC5BsF,sBAAM,EAAE,IAAI,0DAAJ,CAAgB,EAAhB;AADoB,eAAvB,CAAP;AAGD;AACF;;;oCAESR,G,EAAKC,C,EAAG;AAChB;AACA;AACA,gBAAGD,GAAG,CAACE,MAAJ,CAAWwf,SAAX,IAAwB,GAAxB,IAA+B1f,GAAG,CAACE,MAAJ,CAAWwf,SAAX,IAAwB,GAAvD,IAA8D1f,GAAG,CAACE,MAAJ,CAAWwf,SAAX,IAAwB,EAAzF,EAA4F;AAC1F,kBAAIgY,UAAU,GAAG13B,GAAG,CAACE,MAAJ,CAAWy9B,aAA5B;;AACA,kBAAIjG,UAAU,IAAI57B,SAAlB,EAA6B;AAC3B,oBAAIu/B,UAAU,GAAG3D,UAAU,CAAC4D,SAA5B;AACA,oBAAIC,SAAS,GAAG,kCAAkCC,IAAlC,CAAuCH,UAAvC,CAAhB;;AACA,oBAAIE,SAAJ,EAAe,CACb;AAED,iBAHD,MAGO;AACL,uBAAKx/B,MAAL,CAAYkE,CAAZ,EAAe,UAAf,IAA6B,IAA7B;;AAEA,sBAAI4Z,MAAM,CAAC+jB,YAAX,EAAyB;AACvB,wBAAI/jB,MAAM,CAAC+jB,YAAP,GAAsBC,KAA1B,EAAiC;AAAG;AAClChkB,4BAAM,CAAC+jB,YAAP,GAAsBC,KAAtB;AACD,qBAFD,MAEO,IAAIhkB,MAAM,CAAC+jB,YAAP,GAAsBE,eAA1B,EAA2C;AAAG;AACnDjkB,4BAAM,CAAC+jB,YAAP,GAAsBE,eAAtB;AACD;AACF;AACF;AACF;AACF;AAKF;;;sCAEW99B,G,EAAKC,C,EAAG;AAClB;AACA,iBAAKlE,MAAL,CAAYkE,CAAZ,EAAe,UAAf,IAA6B,KAA7B;AAED;;;0CAEe2K,O,EAAS5K,G,EAAKC,C,EAAG;AAC/BtE,sBAAU,CAAC,YAAM,CAEhB,CAFS,EAEP,EAFO,CAAV;AAGA,gBAAIoiC,WAAW,GAAGnzB,OAAO,CAACozB,WAAR,CAAoB13B,aAAtC,CAJ+B,CAK/B;;AACA,gBAAIy3B,WAAW,CAAC/3B,gBAAZ,CAA6B,aAA7B,EAA4C/H,MAA5C,GAAqD,CAAzD,EAA4D,CAE3D,CAFD,MAEO;AACL8/B,yBAAW,CAACzB,WAAZ,GAA0ByB,WAAW,CAACzB,WAAZ,CAAwBh/B,IAAxB,EAA1B;AACD;AACD;;;;;;;;;;;;;AAaD;;;sCAEWsN,O,EAAS5K,G,EAAKC,C,EAAG;AAC3B,gBAAI,CAAC,KAAKu6B,aAAV,EAAyB;AACvB,kBAAGx6B,GAAG,CAACE,MAAJ,CAAWwf,SAAX,IAAwB,GAAxB,IAA+B1f,GAAG,CAACE,MAAJ,CAAWwf,SAAX,IAAwB,GAAvD,IAA8D1f,GAAG,CAACE,MAAJ,CAAWwf,SAAX,IAAwB,EAAzF,EAA4F;AAC1F,qBAAKya,YAAL,CAAkBh6B,IAAlB,CAAuB;AAAEyK,yBAAO,EAAPA,OAAF;AAAW5K,qBAAG,EAAHA,GAAX;AAAgBC,mBAAC,EAADA;AAAhB,iBAAvB;AACD;AAEF,aALD,MAKO;AACL;AACA/D,qBAAO,CAACC,GAAR,CAAYyO,OAAZ;AACA,mBAAKqzB,gBAAL,CAAsBrzB,OAAtB,EAA+B5K,GAA/B,EAAoCC,CAApC;AACD;AACF;;;2CAGgB2K,O,EAAS5K,G,EAAKC,C,EAAG;AAChC,gBAAI87B,IAAI,GAAGnxB,OAAO,CAACozB,WAAR,CAAoB13B,aAApB,CAAkCoxB,UAAlC,CAA6CA,UAA7C,CAAwD5I,UAAxD,CAAmE7uB,CAAnE,CAAX;AACA,gBAAIi+B,WAAJ,EAAiBC,WAAjB;AACAD,uBAAW,GAAGtzB,OAAO,CAACozB,WAAR,CAAoB13B,aAApB,CAAkCoxB,UAAlC,CAA6C0G,eAA3D;AACAD,uBAAW,GAAGvzB,OAAO,CAACozB,WAAR,CAAoB13B,aAApB,CAAkCoxB,UAAlC,CAA6CyG,WAA3D;;AAIA,gBAAIpC,IAAI,CAACtf,SAAL,CAAegD,QAAf,CAAwB,WAAxB,CAAJ,EAA0C;AACxC,mBAAK1d,QAAL,CAAc6C,WAAd,CAA0Bm3B,IAA1B,EAAgC,WAAhC;;AACA,kBAAImC,WAAW,IAAI,IAAnB,EAAyB;AACvB,oBAAIA,WAAW,CAACzhB,SAAZ,CAAsBgD,QAAtB,CAA+B,WAA/B,CAAJ,EAAiD;AAC/C,uBAAK1d,QAAL,CAAc6C,WAAd,CAA0Bs5B,WAA1B,EAAuC,gBAAvC;AACD;AACF;;AACD,kBAAIC,WAAW,IAAI,IAAnB,EAAyB;AACvB,oBAAIA,WAAW,CAAC1hB,SAAZ,IAAyB3gB,SAA7B,EAAwC;AACtC,sBAAIqiC,WAAW,CAAC1hB,SAAZ,CAAsBgD,QAAtB,CAA+B,WAA/B,CAAJ,EAAiD;AAC/C,yBAAK1d,QAAL,CAAc6C,WAAd,CAA0Bm3B,IAA1B,EAAgC,gBAAhC;AACD;AACF;AAEF;;AACD,kBAAIf,cAAc,GAAGp7B,KAAK,CAACC,IAAN,CAAWiG,QAAQ,CAAC8M,sBAAT,CAAgC,WAAhC,CAAX,CAArB;AACAooB,4BAAc,CAAC5+B,OAAf,CAAuB,UAAAC,OAAO,EAAI;AAChC,oBAAI4J,QAAQ,GAAGrG,KAAK,CAACC,IAAN,CAAWxD,OAAO,CAAC4J,QAAnB,CAAf;AACAA,wBAAQ,CAAC7J,OAAT,CAAiB,UAAA6+B,QAAQ,EAAI;AAC3B,sBAAIA,QAAQ,CAACxe,SAAT,CAAmBgD,QAAnB,CAA4B,kBAA5B,CAAJ,EAAqD;AACnDwb,4BAAQ,CAAC/vB,MAAT;AACD;AACF,iBAJD;AAKD,eAPD;;AASA,kBAAI8vB,cAAc,CAAC/8B,MAAf,GAAwB,CAA5B,EAA+B;AAC7B/B,uBAAO,CAACC,GAAR,CAAY6+B,cAAc,CAACA,cAAc,CAAC/8B,MAAf,GAAwB,CAAzB,CAA1B;AACA,qBAAKogC,oBAAL,CAA0BrD,cAAc,CAACA,cAAc,CAAC/8B,MAAf,GAAwB,CAAzB,CAAxC;AACD;AAGF,aA/BD,MA+BO;AACL,mBAAK8D,QAAL,CAAcyE,QAAd,CAAuBu1B,IAAvB,EAA6B,WAA7B;;AACA,kBAAImC,WAAW,IAAI,IAAnB,EAAyB;AACvB,oBAAIA,WAAW,CAACzhB,SAAZ,CAAsBgD,QAAtB,CAA+B,WAA/B,CAAJ,EAAiD;AAC/C,uBAAK1d,QAAL,CAAcyE,QAAd,CAAuB03B,WAAvB,EAAoC,gBAApC;AACD;AACF;;AACD,kBAAIC,WAAW,IAAI,IAAnB,EAAyB;AACvB,oBAAIA,WAAW,CAAC1hB,SAAZ,IAAyB3gB,SAA7B,EAAwC;AACtC,sBAAIqiC,WAAW,CAAC1hB,SAAZ,CAAsBgD,QAAtB,CAA+B,WAA/B,CAAJ,EAAiD;AAC/C,yBAAK1d,QAAL,CAAcyE,QAAd,CAAuBu1B,IAAvB,EAA6B,gBAA7B;AACD;AACF;AACF;;AACD,kBAAIf,eAAc,GAAGp7B,KAAK,CAACC,IAAN,CAAWiG,QAAQ,CAAC8M,sBAAT,CAAgC,WAAhC,CAAX,CAArB;;AACAooB,6BAAc,CAAC5+B,OAAf,CAAuB,UAAAC,OAAO,EAAI;AAChC,oBAAI4J,QAAQ,GAAGrG,KAAK,CAACC,IAAN,CAAWxD,OAAO,CAAC4J,QAAnB,CAAf;AACAA,wBAAQ,CAAC7J,OAAT,CAAiB,UAAA6+B,QAAQ,EAAI;AAC3B,sBAAIA,QAAQ,CAACxe,SAAT,CAAmBgD,QAAnB,CAA4B,kBAA5B,CAAJ,EAAqD;AACnDwb,4BAAQ,CAAC/vB,MAAT;AACD;AACF,iBAJD;AAKD,eAPD;;AASA,kBAAI8vB,eAAc,CAAC/8B,MAAf,GAAwB,CAA5B,EAA+B;AAC7B,qBAAKogC,oBAAL,CAA0BtC,IAA1B;AACD,eAFD,MAEO,IAAIf,eAAc,CAAC/8B,MAAf,IAAyB,CAA7B,EAAgC;AACrC+8B,+BAAc,CAAC5+B,OAAf,CAAuB,UAAAC,OAAO,EAAI;AAChC,sBAAI4J,QAAQ,GAAGrG,KAAK,CAACC,IAAN,CAAWxD,OAAO,CAAC4J,QAAnB,CAAf;AACAA,0BAAQ,CAAC7J,OAAT,CAAiB,UAAA6+B,QAAQ,EAAI;AAC3B,wBAAIA,QAAQ,CAACxe,SAAT,CAAmBgD,QAAnB,CAA4B,kBAA5B,CAAJ,EAAqD;AACnDwb,8BAAQ,CAAC/vB,MAAT;AACD;AACF,mBAJD;AAKD,iBAPD;AAQD;AACF;AAEF;;;+CAEoB6wB,I,EAAM;AACzB,gBAAIuC,GAAG,GAAG,KAAKv8B,QAAL,CAAckF,aAAd,CAA4B,KAA5B,CAAV;AACA,iBAAKlF,QAAL,CAAcyE,QAAd,CAAuB83B,GAAvB,EAA4B,kBAA5B;AACA,gBAAIC,QAAQ,GAAG,KAAKx8B,QAAL,CAAckF,aAAd,CAA4B,QAA5B,CAAf;AACA,gBAAIu3B,WAAW,GAAG,KAAKz8B,QAAL,CAAckF,aAAd,CAA4B,QAA5B,CAAlB;AAEA,gBAAIw3B,MAAM,GAAG,KAAK18B,QAAL,CAAckF,aAAd,CAA4B,GAA5B,CAAb;AACA,iBAAKlF,QAAL,CAAcyE,QAAd,CAAuBi4B,MAAvB,EAA+B,KAA/B;AACA,iBAAK18B,QAAL,CAAcyE,QAAd,CAAuBi4B,MAAvB,EAA+B,UAA/B;AAEA,gBAAIC,SAAS,GAAG,KAAK38B,QAAL,CAAckF,aAAd,CAA4B,GAA5B,CAAhB;AACA,iBAAKlF,QAAL,CAAcyE,QAAd,CAAuBk4B,SAAvB,EAAkC,KAAlC;AACA,iBAAK38B,QAAL,CAAcyE,QAAd,CAAuBk4B,SAAvB,EAAkC,UAAlC;AAEA,iBAAK38B,QAAL,CAAcwF,WAAd,CAA0Bg3B,QAA1B,EAAoCE,MAApC;AACA,iBAAK18B,QAAL,CAAcwF,WAAd,CAA0Bi3B,WAA1B,EAAuCE,SAAvC;AACA,iBAAK38B,QAAL,CAAc6V,QAAd,CAAuB2mB,QAAvB,EAAiC,UAAjC,EAA6C,UAA7C;AACA,iBAAKx8B,QAAL,CAAc6V,QAAd,CAAuB2mB,QAAvB,EAAiC,KAAjC,EAAwC,SAAxC;AACA,iBAAKx8B,QAAL,CAAc6V,QAAd,CAAuB6mB,MAAvB,EAA+B,WAA/B,EAA4C,MAA5C;AACA,iBAAK18B,QAAL,CAAc6V,QAAd,CAAuB6mB,MAAvB,EAA+B,OAA/B,EAAwC,MAAxC;AAEA,iBAAK18B,QAAL,CAAcyE,QAAd,CAAuB+3B,QAAvB,EAAiC,WAAjC;AACA,iBAAKx8B,QAAL,CAAcyE,QAAd,CAAuBg4B,WAAvB,EAAoC,WAApC;AAEA,iBAAKz8B,QAAL,CAAc6V,QAAd,CAAuB4mB,WAAvB,EAAoC,UAApC,EAAgD,UAAhD;AACA,iBAAKz8B,QAAL,CAAc6V,QAAd,CAAuB4mB,WAAvB,EAAoC,KAApC,EAA2C,SAA3C;AACA,iBAAKz8B,QAAL,CAAc6V,QAAd,CAAuB8mB,SAAvB,EAAkC,WAAlC,EAA+C,MAA/C;AACA,iBAAK38B,QAAL,CAAc6V,QAAd,CAAuB8mB,SAAvB,EAAkC,OAAlC,EAA2C,MAA3C;AACA,iBAAK38B,QAAL,CAAc6V,QAAd,CAAuB4mB,WAAvB,EAAoC,MAApC,EAA4C,QAA5C;AAEA,iBAAKz8B,QAAL,CAAcwF,WAAd,CAA0B+2B,GAA1B,EAA+BC,QAA/B;AACA,iBAAKx8B,QAAL,CAAcwF,WAAd,CAA0B+2B,GAA1B,EAA+BE,WAA/B;AACA,iBAAKz8B,QAAL,CAAcwF,WAAd,CAA0Bw0B,IAA1B,EAAgCuC,GAAhC;AACD;;;kDAEuBztB,S,EAAS;AAAA;;AAC/B,iBAAK4pB,qBAAL,GAA6B,EAA7B,CAD+B,CAE/B;;AACA,iBAAKnoB,eAAL,CAAqBlW,OAArB,CACE,UAAAmW,UAAU,EAAI;AACZ;AACA,kBAAIosB,WAAJ,EAAiBC,SAAjB;;AACA,kBAAG,CAAC,QAAI,CAAC1sB,WAAT,EAAqB;AACnBysB,2BAAW,GAAG9tB,SAAS,CAACsB,KAAxB;AACAysB,yBAAS,GAAG/tB,SAAS,CAACmB,GAAtB;AACD,eAHD,MAGK;AACH2sB,2BAAW,GAAG9tB,SAAS,CAACgsB,KAAV,CAAgB,CAAhB,EAAmB9qB,KAAjC;AACA6sB,yBAAS,GAAG/tB,SAAS,CAACgsB,KAAV,CAAgB,CAAhB,EAAmB7qB,GAA/B;AACD;;AAEDO,wBAAU,CAACsqB,KAAX,CAAiBzgC,OAAjB,CAAyB,UAAAC,OAAO,EAAI;AAClC,oBAAIA,OAAO,CAAC0V,KAAR,IAAiB4sB,WAAjB,IAAkCtiC,OAAO,CAAC2V,GAAR,IAAe4sB,SAArD,EAA+D;AAC7D,0BAAI,CAACnE,qBAAL,CAA2Bh+B,IAA3B,CAAgC8V,UAAhC;AACD;AACF,eAJD;AAOD,aAnBH;;AAqBA,gBAAG,KAAKkoB,qBAAL,CAA2Bx8B,MAA3B,GAAoC,CAAvC,EAAyC;AACvC,mBAAK5D,cAAL,CAAoB2J,uBAApB,CAA4C,IAA5C;AACA,mBAAK3J,cAAL,CAAoB0J,sBAApB,CAA2C,KAAK02B,qBAAhD;AACD;AACF;;;wCAEa7vB,O,EAAS5K,G,EAAKC,C,EAAG;AAAA;;AAE7B/D,mBAAO,CAACC,GAAR,CAAY,KAAKJ,MAAL,CAAYkE,CAAZ,CAAZ;AACA,iBAAKw6B,qBAAL,GAA6B,EAA7B;AACA,iBAAKnoB,eAAL,CAAqBlW,OAArB,CACE,UAAAmW,UAAU,EAAI;AAEZ,kBAAIosB,WAAW,GAAG,QAAI,CAAC5iC,MAAL,CAAYkE,CAAZ,EAAekS,KAAjC;AACA,kBAAIysB,SAAS,GAAG,QAAI,CAAC7iC,MAAL,CAAYkE,CAAZ,EAAe+R,GAA/B,CAHY,CAKZ;;AAEA,kBAAGO,UAAU,CAACsqB,KAAX,CAAiB5+B,MAAjB,IAA2B,CAA9B,EAAgC;AAC9BsU,0BAAU,CAACsqB,KAAX,CAAiBzgC,OAAjB,CAAyB,UAAAC,OAAO,EAAI;AAClC,sBAAGA,OAAO,CAAC0V,KAAR,IAAiB4sB,WAAjB,IAAgCtiC,OAAO,CAAC2V,GAAR,IAAe4sB,SAAlD,EAA4D;AAC1D,4BAAI,CAACnE,qBAAL,CAA2Bh+B,IAA3B,CAAgC8V,UAAhC;AACD;AACF,iBAJD;AAKD,eAND,MAMK,CAEJ;AACF,aAjBH;;AAoBA,gBAAG,KAAKkoB,qBAAL,CAA2Bx8B,MAA3B,GAAoC,CAAvC,EAAyC;AACvC,mBAAK5D,cAAL,CAAoB2J,uBAApB,CAA4C,IAA5C;AACA,mBAAK3J,cAAL,CAAoB0J,sBAApB,CAA2C,KAAK02B,qBAAhD;AACD,aAHD,MAGK;AACH,mBAAKpgC,cAAL,CAAoB2J,uBAApB,CAA4C,KAA5C;AACA,mBAAK3J,cAAL,CAAoB0J,sBAApB,CAA2C,IAA3C;AACD,aA9B4B,CAgC7B;;;AACApI,sBAAU,CAAC,YAAM;AAEf,sBAAI,CAACsV,OAAL,GAAe,EAAf;AACA,sBAAI,CAAClV,MAAL,CAAYkE,CAAZ,EAAe,SAAf,IAA4B,IAA5B;AACA,sBAAI,CAACgR,OAAL,GAAe4I,MAAM,CAAC+jB,YAAP,GAAsBnsB,QAAtB,EAAf;;AACA,kBAAI,QAAI,CAACjD,eAAL,CAAqB6rB,YAArB,IAAqC,EAAzC,EAA6C;AAC3C,wBAAI,CAAC7rB,eAAL,CAAqB6rB,YAArB,GAAoCzvB,OAAO,CAACgxB,mBAA5C;AACA,wBAAI,CAACptB,eAAL,CAAqBC,OAArB,GAA+BxO,CAA/B;AACD,eAHD,MAIK,IAAI2K,OAAO,CAACgxB,mBAAR,IAA+B,QAAI,CAACptB,eAAxC,EAAyD;AAC5D,wBAAI,CAACA,eAAL,CAAqB6rB,YAArB,GAAoCzvB,OAAO,CAACgxB,mBAA5C;AACA,wBAAI,CAACptB,eAAL,CAAqBC,OAArB,GAA+BxO,CAA/B;;AACA,wBAAI,CAAClE,MAAL,CAAYK,OAAZ,CAAoB,UAAAC,OAAO,EAAI;AAC7B,sBAAIA,OAAO,CAACuP,EAAR,IAAc3L,CAAC,GAAG,CAAtB,EAAyB;AACvB;AACA5D,2BAAO,CAAC8/B,OAAR,GAAkB,KAAlB;AACD,mBAHD,MAGO;AACL;AACA9/B,2BAAO,CAAC8/B,OAAR,GAAkB,IAAlB;AACD;AACF,iBARD;AASD;;AAED,kBAAIvxB,OAAO,CAACgE,MAAR,EAAJ,EAAsB,CAErB,CAFD,MAEO,IAAI,CAAChE,OAAO,CAACgE,MAAR,EAAL,EAAuB;AAC5BhE,uBAAO,CAACkE,IAAR;AACD;;AAED,kBAAIivB,WAAW,GAAGnzB,OAAO,CAACozB,WAAR,CAAoB13B,aAAtC;AACA,kBAAIoZ,SAAS,GAAGqe,WAAW,CAACre,SAA5B;AACA,kBAAImf,SAAS,GAAG/4B,QAAQ,CAAC83B,YAAT,EAAhB;AACA,kBAAIkB,UAAU,GAAGD,SAAS,CAACC,UAA3B;AACA,kBAAIC,SAAS,GAAGF,SAAS,CAACE,SAA1B;AACA,kBAAIC,WAAJ,EAAiBC,mBAAjB,CAlCe,CAmCf;AACA;;AAEA,kBAAIH,UAAU,IAAI,IAAd,IAAsBC,SAAS,IAAI,IAAvC,EAA6C;AAC3C,oBAAIG,gBAAgB,GAAGL,SAAS,CAACC,UAAV,CAAqBpH,UAA5C;AACA,oBAAIyH,eAAe,GAAGN,SAAS,CAACE,SAAV,CAAoBrH,UAA1C;;AAEA,oBAAIwH,gBAAgB,IAAIC,eAApB,IAAuC,QAAI,CAACluB,OAAL,IAAgB,EAA3D,EAAgE;AAAE;AAChE;AAEA,sBAAI4tB,SAAS,CAACC,UAAV,CAAqBxC,WAArB,CAAiCh/B,IAAjC,GAAwCW,MAAxC,IAAkDyhB,SAAS,CAACzhB,MAA5D,IAAsE,QAAI,CAACgT,OAAL,IAAgByO,SAA1F,EAAqG;AAAE;AAErG,wBAAI0f,YAAY,GAAGP,SAAS,CAACO,YAA7B;AACA,wBAAIC,WAAW,GAAGR,SAAS,CAACQ,WAA5B;;AAGA,wBAAID,YAAY,GAAGC,WAAnB,EAAgC;AAC9B,0BAAIC,GAAG,GAAGF,YAAV;AACAA,kCAAY,GAAGC,WAAf;AACAA,iCAAW,GAAGC,GAAd;AACD,qBAVkG,CAYnG;;;AACApjC,2BAAO,CAACC,GAAR,CAAYijC,YAAZ;AACAljC,2BAAO,CAACC,GAAR,CAAYkjC,WAAZ;AAEAtB,+BAAW,CAACre,SAAZ,GAAwB,EAAxB;;AAEA,wBAAMqc,IAAI,GAAG,QAAI,CAACh6B,QAAL,CAAckF,aAAd,CAA4B,MAA5B,CAAb;;AACA,wBAAMs4B,MAAM,GAAG,QAAI,CAACx9B,QAAL,CAAcw6B,UAAd,CAAyB7c,SAAS,CAAC8f,SAAV,CAAoB,CAApB,EAAuBJ,YAAvB,CAAzB,CAAf;;AACA,wBAAM9gC,IAAI,GAAG,QAAI,CAACyD,QAAL,CAAcw6B,UAAd,CAAyB,QAAI,CAACtrB,OAA9B,CAAb;;AACA,wBAAMwuB,MAAM,GAAG,QAAI,CAAC19B,QAAL,CAAcw6B,UAAd,CAAyB7c,SAAS,CAAC8f,SAAV,CAAoBH,WAApB,EAAiC3f,SAAS,CAACzhB,MAA3C,CAAzB,CAAf;AAGA;;;;;AAKA,4BAAI,CAAC8D,QAAL,CAAcwF,WAAd,CAA0Bw0B,IAA1B,EAAgCz9B,IAAhC;;AACA,4BAAI,CAACyD,QAAL,CAAcwF,WAAd,CAA0Bw2B,WAA1B,EAAuChC,IAAvC;;AACA,4BAAI,CAACh6B,QAAL,CAAcyE,QAAd,CAAuBu1B,IAAvB,EAA6B,MAA7B,GACA,QAAI,CAACh6B,QAAL,CAAc29B,YAAd,CAA2B3D,IAA3B,EAAiC,aAAjC,EAAgDqD,YAAY,CAAC3tB,QAAb,EAAhD,CADA;;AAEA,4BAAI,CAAC1P,QAAL,CAAc29B,YAAd,CAA2B3D,IAA3B,EAAiC,WAAjC,EAA8CsD,WAAW,CAAC5tB,QAAZ,EAA9C;;AAEA,wBAAI8tB,MAAM,CAACjD,WAAP,IAAsB,EAA1B,EAA8B;AAC5B,8BAAI,CAACv6B,QAAL,CAAcy6B,YAAd,CAA2BuB,WAA3B,EAAwCwB,MAAxC,EAAgDxD,IAAhD;AACD;;AAED,wBAAI0D,MAAM,CAACnD,WAAP,IAAsB,EAA1B,EAA8B;AAC5B,8BAAI,CAACv6B,QAAL,CAAcwF,WAAd,CAA0Bw2B,WAA1B,EAAuC0B,MAAvC;AACD,qBAzCkG,CA0CnG;;;AACA,4BAAI,CAACtuB,aAAL,GAAqB,EAArB;AACA,4BAAI,CAACA,aAAL,CAAmB,OAAnB,IAA8B,QAAI,CAACpV,MAAL,CAAYkE,CAAZ,EAAekS,KAAf,GAAuBitB,YAArD;AACA,4BAAI,CAACjuB,aAAL,CAAmB,KAAnB,IAA4B,QAAI,CAACpV,MAAL,CAAYkE,CAAZ,EAAekS,KAAf,GAAuBktB,WAAnD;;AACA,4BAAI,CAACxyB,gBAAL,CAAsB2G,aAAtB,CAAoC,QAAI,CAACvC,OAAzC;AACD,mBA/CD,MA+CM,IAAG4tB,SAAS,CAACC,UAAV,CAAqBxC,WAArB,CAAiCh/B,IAAjC,GAAwCW,MAAxC,IAAkDyhB,SAAS,CAACzhB,MAA5D,IAAsE,QAAI,CAACgT,OAAL,IAAgByO,SAAzF,EAAmG;AACvG,4BAAI,CAACzO,OAAL,GAAe,EAAf;;AACA,4BAAI,CAACpE,gBAAL,CAAsB2G,aAAtB,CAAoCkM,SAApC;AACD;AACF,iBAtDD,CAuDA;AAvDA,qBAyDK,IAAG,QAAI,CAACzO,OAAL,IAAgB,EAAnB,EAAsB;AACzB,4BAAI,CAACpE,gBAAL,CAAsB2G,aAAtB,CAAoCkM,SAApC;;AACA,4BAAI,CAACvO,aAAL,GAAqB,EAArB;AACA,4BAAI,CAACA,aAAL,CAAmB,OAAnB,IAA8B,CAA9B;AACA,4BAAI,CAACA,aAAL,CAAmB,KAAnB,IAA4B,CAA5B;AACD;AACD;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAsND,eA/Tc,CAoUf;;;AACA,kBAAIumB,UAAU,GAAG13B,GAAG,CAACE,MAAJ,CAAWy9B,aAA5B;AACA,kBAAItC,UAAU,GAAG3D,UAAU,CAAC4D,SAA5B;;AAEA,kBAAG,kCAAkCE,IAAlC,CAAuCH,UAAvC,CAAH,EAAsD;AACpD,oBAAIQ,aAAa,GAAGj8B,KAAK,CAACC,IAAN,CAAWiG,QAAQ,CAACE,gBAAT,CAA0B,0BAA1B,CAAX,CAApB;AACA,oBAAI1H,KAAI,GAAG,EAAX;AACAu9B,6BAAa,CAACz/B,OAAd,CAAsB,UAAAC,OAAO,EAAI;AAC/BH,yBAAO,CAACC,GAAR,CAAYE,OAAZ;AACAiC,uBAAI,IAAIjC,OAAO,CAACigC,WAAR,GAAsB,GAA9B;AACD,iBAHD,EAHoD,CAOpD;AACD;AACF,aAjVS,EAiVP,EAjVO,CAAV;AAmVD;;;+CAEiB;AAChB,iBAAKzvB,gBAAL,CAAsB2G,aAAtB,CAAoC,EAApC;AACD;;;2CAEgBjB,U,EAAYlV,K,EAAOqgC,K,EAAK;AAAA;;AACvC,gBAAIiC,OAAO,GAAGptB,UAAU,CAAC3G,EAAzB;AACA,gBAAIg0B,cAAc,GAAGlC,KAAK,CAACv2B,QAA3B;AACA,iBAAK0F,gBAAL,CAAsBgzB,gBAAtB,CAAuCF,OAAvC,EAAgDtkC,SAAhD,CACE,UAAAC,IAAI,EAAG;AACLY,qBAAO,CAACC,GAAR,CAAYb,IAAZ;AACA;;;;AAIA,sBAAI,CAACjB,cAAL,CAAoB2J,uBAApB,CAA4C,KAA5C;AACD,aARH,EASE,UAAApG,KAAK,EAAI;AACP1B,qBAAO,CAACC,GAAR,CAAYyB,KAAZ;AACD,aAXH;AAaA,iBAAK68B,qBAAL,CAA2Bz5B,MAA3B,CAAkC3D,KAAlC,EAAyC,CAAzC;AACA,iBAAKiV,eAAL,CAAqBtR,MAArB,CAA4B3D,KAA5B,EAAmC,CAAnC;AACD;;;+CAGiB;AAChB,iBAAKhD,cAAL,CAAoB2J,uBAApB,CAA4C,IAA5C;AACA,iBAAK3J,cAAL,CAAoB0J,sBAApB,CAA2C,KAAKuO,eAAhD;AACD;;;yCAEcwtB,M,EAAQC,U,EAAYC,Q,EAAUC,S,EAAW;AACtD,mBAAOH,MAAM,CAACN,SAAP,CAAiB,CAAjB,EAAoBO,UAApB,IAAkCE,SAAlC,GAA8CH,MAAM,CAACN,SAAP,CAAiBQ,QAAjB,CAArD;AACD;;;;;;;yBAn5CUjG,sB,EAAsB,uH,EAAA,8J,EAAA,2J,EAAA,wH,EAAA,+K,EAAA,2H,EAAA,yH,EAAA,+K,EAAA,6I;AAAA,O;;;cAAtBA,sB;AAAsB,2C;AAAA;AAAA;;;;;;;;;;;;;;;;qBAAtB,qB;AAAiB,a,EAAA,K,EAAA,+D,EAAA,W,EAAA;AAAA,qBAAjB,yBAAiB;AAAI,a,EAAA,K,EAAA,+D,EAAA,S,EAAA;AAAA,qBAArB,2BAAqB;AAAE,a,EAAA,K,EAAA,6D,EAAA,O,EAAA;AAAA,qBAAvB,4BAAuB;AAAC,a,EAAA,K,EAAA,6D;;;;;;;;;;;;AC9BrC;;AACI;;AACI;;AAKA;;AAKA;;AA8BA;;AA+CJ;;AAEJ;;AAIA;;AAiBA;;;;AA9G4D;;AAAA;;AAKR;;AAAA;;AAKM;;AAAA;;AA8Bf;;AAAA;;AAqDnB;;AAAA;;AAiBA;;AAAA;;;;;;;;;wEDlFXA,sB,EAAsB;gBALlC,uDAKkC;iBALxB;AACT//B,oBAAQ,EAAE,oBADD;AAETC,uBAAW,EAAE,iCAFJ;AAGTC,qBAAS,EAAE,CAAC,iCAAD;AAHF,W;AAKwB,U;;;;;;;;;;;;;;;;;;;;;AAExB6W,iBAAO,EAAE,CAAF;kBAAf;AAAe,WAAE,C;AAsBUrC,sBAAY,EAAE,CAAF;kBAAvC,0DAAuC;mBAA1B,Y;AAA0B,WAAE,C;AAChBwxB,oBAAU;kBAAnC,uDAAmC;mBAAzB,a;AAAyB,Y;AAuBpCC,mBAAS;kBADR,0DACQ;mBADK,kB,EAAoB,CAAC,QAAD,C;AACzB,Y;AA+GTC,uBAAa;kBADZ,0DACY;mBADC,oB,EAAsB,CAAC,QAAD,C;AACvB,Y;AA0GbC,yBAAe;kBADd,0DACc;mBADD,gB,EAAkB,CAAC,QAAD,C;AACjB,Y;AA8DfC,0BAAgB;kBADf,0DACe;mBADF,c,EAAgB,CAAC,QAAD,C;AACd;;;;;;;;;;;;;;;;;;;AEvWlB;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;;;;;;;;;;UAsBaC,wB;AAOX,0CAAoB7T,eAApB,EAAoEqM,GAApE,EAA2F;AAAA;;AAAvE,eAAArM,eAAA,GAAAA,eAAA;AAAgD,eAAAqM,GAAA,GAAAA,GAAA;AAA0B;;;;qCAEtF;AAAA;;AACN,iBAAKA,GAAL,CAASe,cAAT,CAAwBz+B,SAAxB,CACE,UAAAyxB,SAAO,EAAI;AACT,kBAAGA,SAAH,EAAW;AACTnxB,0BAAU,CAAC,YAAM;AACf,sBAAIu9B,WAAW,GAAGpzB,QAAQ,CAACE,gBAAT,CAA0B,sBAA1B,CAAlB;AACAkzB,6BAAW,CAAC98B,OAAZ,CAAoB,UAAAC,OAAO,EAAI;AAC7B,wBAAG,CAACA,OAAO,CAACogB,SAAR,CAAkBgD,QAAlB,CAA2B,MAA3B,CAAJ,EAAuC;AACrCpjB,6BAAO,CAACogB,SAAR,CAAkBkD,GAAlB,CAAsB,MAAtB;AACD;AACF,mBAJD;AAKA,sBAAIoN,MAAM,GAAGjnB,QAAQ,CAACE,gBAAT,CAA0B,uCAA1B,CAAb;AACA+mB,wBAAM,CAAC3wB,OAAP,CAAe,UAAAC,OAAO,EAAI;AACxB,wBAAGA,OAAO,CAACogB,SAAR,CAAkBgD,QAAlB,CAA2B,WAA3B,CAAH,EAA2C;AACzCpjB,6BAAO,CAACogB,SAAR,CAAkBvR,MAAlB,CAAyB,WAAzB;AACD,qBAFD,MAEK,CACH;AACD;AACF,mBAND;AAOA,iBAfQ,EAeN,GAfM,CAAV;AAgBD;AACF,aApBH;AAuBA,iBAAKs1B,YAAL,GAAoB,KAAK9T,eAAL,CAAqBpW,cAArB,CAAoCjb,SAApC,CAClB,UAAAU,MAAM,EAAI;AACT;AACC,kBAAGA,MAAM,IAAI,IAAb,EAAkB;AAChBJ,0BAAU,CAAC,YAAM;AACf,sBAAIw9B,WAAW,GAAG,QAAI,CAACC,OAAL,CAAa9yB,aAAb,CAA2BN,gBAA3B,CAA4C,GAA5C,CAAlB;;AACA,0BAAI,CAACjK,MAAL,GAAcA,MAAd;AACA;;AACAo9B,6BAAW,CAAC/8B,OAAZ,CAAoB,UAAAC,OAAO,EAAI;AAC7B;AACA,wBAAGA,OAAO,CAACiC,IAAR,IAAgB,WAAnB,EAA+B;AAC7BjC,6BAAO,CAACogB,SAAR,CAAkBkD,GAAlB,CAAsB,QAAtB;AACD,qBAFD,MAEK;AACHtjB,6BAAO,CAACogB,SAAR,CAAkBvR,MAAlB,CAAyB,QAAzB,EADG,CAEH;AACD;AACF,mBARD;;AAUA,sBAAImuB,UAAU,GAAG,QAAI,CAACC,UAAL,CAAgBhzB,aAAhB,CAA8BN,gBAA9B,CAA+C,WAA/C,CAAjB;;AAEAqzB,4BAAU,CAACj9B,OAAX,CAAmB,UAAAC,OAAO,EAAI;AAE5B,wBAAGA,OAAO,CAACuP,EAAR,IAAc,WAAjB,EAA6B;AAC3BvP,6BAAO,CAACogB,SAAR,CAAkBkD,GAAlB,CAAsB,QAAtB;AACAtjB,6BAAO,CAACogB,SAAR,CAAkBkD,GAAlB,CAAsB,MAAtB;AACD,qBAHD,MAGK;AAEHtjB,6BAAO,CAACogB,SAAR,CAAkBvR,MAAlB,CAAyB,QAAzB;AACA7O,6BAAO,CAACogB,SAAR,CAAkBvR,MAAlB,CAAyB,MAAzB,EAHG,CAIH;AACD;AACF,mBAXD;AAYD,iBA5BS,EA4BP,GA5BO,CAAV;AA8BD,eA/BD,MA+BK;AACH,wBAAI,CAACnP,MAAL,GAAc,IAAd;AACAJ,0BAAU,CAAC,YAAM;AACf,sBAAIw9B,WAAW,GAAG,QAAI,CAACC,OAAL,CAAa9yB,aAAb,CAA2BN,gBAA3B,CAA4C,GAA5C,CAAlB;;AACA,0BAAI,CAACjK,MAAL,GAAcA,MAAd;AACA;;AACAo9B,6BAAW,CAAC/8B,OAAZ,CAAoB,UAAAC,OAAO,EAAI;AAC7B;AACA,wBAAGA,OAAO,CAACiC,IAAR,IAAgB,WAAnB,EAA+B;AAC7BjC,6BAAO,CAACogB,SAAR,CAAkBvR,MAAlB,CAAyB,QAAzB;AACD;AACF,mBALD;;AAOA,sBAAImuB,UAAU,GAAG,QAAI,CAACC,UAAL,CAAgBhzB,aAAhB,CAA8BN,gBAA9B,CAA+C,WAA/C,CAAjB;;AAEAqzB,4BAAU,CAACj9B,OAAX,CAAmB,UAAAC,OAAO,EAAI;AAE5B,wBAAGA,OAAO,CAACuP,EAAR,IAAc,WAAjB,EAA6B;AAC3BvP,6BAAO,CAACogB,SAAR,CAAkBvR,MAAlB,CAAyB,QAAzB;AACA7O,6BAAO,CAACogB,SAAR,CAAkBvR,MAAlB,CAAyB,MAAzB;AACD;AACF,mBAND;AAOD,iBApBS,EAoBP,GApBO,CAAV;AAqBD;AACF,aA1DiB,CAApB;AA4DD;;;sDAEwB;AAAA;;AAGvBvP,sBAAU,CAAC,YAAM;AACf,kBAAG,CAAC,QAAI,CAACo9B,GAAL,CAAS90B,aAAT,EAAD,IAA6B,QAAI,CAAC80B,GAAL,CAAS70B,kBAAT,EAAhC,EAA8D;AAC5D,oBAAG,CAAC,QAAI,CAAC60B,GAAL,CAAS50B,iBAAT,EAAD,IAAiC,QAAI,CAAC40B,GAAL,CAAS30B,sBAAT,EAApC,EAAsE;AACpE,0BAAI,CAAC20B,GAAL,CAASjJ,qBAAT;;AACA,0BAAI,CAACiJ,GAAL,CAASx0B,uBAAT;AACD;AACF,eALD,MAKM,IAAG,CAAC,QAAI,CAACw0B,GAAL,CAAS90B,aAAT,EAAD,IAA6B,CAAC,QAAI,CAAC80B,GAAL,CAAS70B,kBAAT,EAAjC,EAA+D;AACnE,oBAAG,CAAC,QAAI,CAAC60B,GAAL,CAAS50B,iBAAT,EAAD,IAAiC,CAAC,QAAI,CAAC40B,GAAL,CAAS30B,sBAAT,EAArC,EAAuE;AACrE,0BAAI,CAAC20B,GAAL,CAASjJ,qBAAT;;AACA,0BAAI,CAACiJ,GAAL,CAASx0B,uBAAT;AACD;AACF,eALK,MAKA,IAAG,QAAI,CAACw0B,GAAL,CAAS90B,aAAT,MAA4B,QAAI,CAAC80B,GAAL,CAAS70B,kBAAT,EAA/B,EAA6D;AACjE,wBAAI,CAAC60B,GAAL,CAASjJ,qBAAT;;AACA,wBAAI,CAACiJ,GAAL,CAAS10B,kBAAT,CAA4B,IAA5B;AACD,eAHK,MAGA,IAAG,QAAI,CAAC00B,GAAL,CAAS90B,aAAT,MAA4B,CAAC,QAAI,CAAC80B,GAAL,CAAS70B,kBAAT,EAAhC,EAA8D;AAClE,oBAAG,QAAI,CAAC60B,GAAL,CAAS50B,iBAAT,MAAgC,CAAC,QAAI,CAAC40B,GAAL,CAAS30B,sBAAT,EAApC,EAAsE;AACpE,0BAAI,CAAC20B,GAAL,CAAS10B,kBAAT,CAA4B,KAA5B;;AACA,0BAAI,CAAC00B,GAAL,CAASjJ,qBAAT,CAA+B,IAA/B;AACD;AAEF;AACF,aArBS,EAqBP,GArBO,CAAV;AAsBD;;;wCAEU;AACT,iBAAK0Q,YAAL,CAAkBrwB,WAAlB;AACD;;;;;;;yBA5HUowB,wB,EAAwB,+K,EAAA,2J;AAAA,O;;;cAAxBA,wB;AAAwB,6C;AAAA;AAAA;;;;;;;;;;;;;;;;;;ACnBjC;;AACI;;AACI;;AACI;;AACI;;AAAqI;;AAAS;;AAClJ;;AAEA;;AACI;;AAAuD;AAAA,qBAAS,IAAAE,yBAAA,EAAT;AAAoC,aAApC;;AACnD;;AACJ;;AACJ;;AACJ;;AAOJ;;AACA;;AACI;;AACI;;AAII;;AACI;;AACJ;;AACJ;;AACJ;;AACJ;;AACJ;;;;AA9BmF;;AAAA;;;;;;;;;wEDiB1EF,wB,EAAwB;gBALpC,uDAKoC;iBAL1B;AACTvmC,oBAAQ,EAAE,sBADD;AAETC,uBAAW,EAAE,mCAFJ;AAGTC,qBAAS,EAAE,CAAC,mCAAD;AAHF,W;AAK0B,U;;;;;;;AAEJk/B,iBAAO,EAAE,CAAF;kBAArC,uDAAqC;mBAA3B,kB;AAA2B,WAAE,C;AACNE,oBAAU,EAAE,CAAF;kBAA3C,uDAA2C;mBAAjC,qB;AAAiC,WAAE;;;;;;;;;;;;;;;;;;;AEzBhD;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;UAyBaoH,2B;AAQX,6CAAoB3H,GAApB,EAAkD1+B,cAAlD,EAAiGC,MAAjG,EAAgIyH,QAAhI,EAA6J2qB,eAA7J,EAAqM;AAAA;;AAAjL,eAAAqM,GAAA,GAAAA,GAAA;AAA8B,eAAA1+B,cAAA,GAAAA,cAAA;AAA+C,eAAAC,MAAA,GAAAA,MAAA;AAA+B,eAAAyH,QAAA,GAAAA,QAAA;AAA6B,eAAA2qB,eAAA,GAAAA,eAAA;AAN7J,eAAAiU,QAAA,GAAW,KAAX;AAMwM;;;;qCAEhM;AAAA;;AACN,iBAAKtmC,cAAL,CAAoBumC,iBAApB,CAAsCvlC,SAAtC,CACE,UAAAC,IAAI,EAAI;AACN,sBAAI,CAACymB,gBAAL,CAAsBzmB,IAAtB;AACD,aAHH;AAKD;;;6CAEkB;AACjB,iBAAKulC,OAAL,CAAal2B,cAAb;AACD;;;wCAEa;AACZ,iBAAKk2B,OAAL,CAAav+B,SAAb,GAAyB,CAAC,KAAKu+B,OAAL,CAAav+B,SAAvC;AACA,iBAAKu+B,OAAL,CAAat+B,MAAb,GAAsB,CAAC,KAAKs+B,OAAL,CAAat+B,MAApC;AACA,iBAAKo+B,QAAL,GAAgB,CAAC,KAAKA,QAAtB;AACD;;;kCAEOrlC,I,EAAM;AAAA;;AAEZ,gBAAIsK,IAAI,GAAG,IAAX;;AAEA,gBAAItK,IAAI,CAAC,UAAD,CAAJ,IAAoBQ,SAAxB,EAAmC;AAEjC,kBAAI6M,YAAY,GAAG,EAAnB;;AACA,kBAAIrN,IAAI,CAAC,0BAAD,CAAJ,IAAoCQ,SAAxC,EAAmD;AACjD6M,4BAAY,GAAGrN,IAAI,CAAC,0BAAD,CAAnB;AACD,eAFD,MAEO,IAAIA,IAAI,CAAC,kBAAD,CAAJ,IAA4BQ,SAAhC,EAA2C;AAChD6M,4BAAY,GAAGrN,IAAI,CAAC,kBAAD,CAAnB;AACD,eAFM,MAEA,IAAIA,IAAI,CAAC,mBAAD,CAAJ,IAA6BQ,SAAjC,EAA4C;AACjD6M,4BAAY,GAAGrN,IAAI,CAAC,mBAAD,CAAnB;AACD,eAFM,MAEA,IAAIA,IAAI,CAAC,uBAAD,CAAJ,IAAiCQ,SAArC,EAAgD;AACrD6M,4BAAY,GAAGrN,IAAI,CAAC,uBAAD,CAAnB;AACD;;AAAA;AACDK,wBAAU,CAAC,YAAM;AACf,wBAAI,CAACklC,OAAL,CAAa/3B,gBAAb,CAA8BC,SAA9B,CAAwCC,SAAxC,CACE,UAAUC,CAAV,EAAa;AACX,sBAAI3N,IAAI,CAAC,0BAAD,CAAJ,IAAoCQ,SAAxC,EAAmD;AACjD,wBAAImN,CAAC,CAAC3N,IAAF,CAAOwB,wBAAP,IAAmC6L,YAAvC,EAAqD;AAEnDM,uBAAC,CAAC3N,IAAF,CAAOwJ,IAAP,GAAcxJ,IAAI,CAAC,UAAD,CAAlB;AACAsK,0BAAI,CAACi7B,OAAL,CAAa/3B,gBAAb,CAA8BC,SAA9B,CAAwCa,MAAxC;AACAhE,0BAAI,CAACi7B,OAAL,CAAal2B,cAAb,GAJmD,CAMnD;AACA;;AACAvK,uBAAC,CAAC,WAAW6I,CAAC,CAAC3N,IAAF,CAAOsQ,EAAnB,CAAD,CAAwBk1B,IAAxB,CAA6B,qBAA7B,EAAoDxlC,IAAI,CAAC,UAAD,CAAxD;AAEAA,0BAAI,CAAC,UAAD,CAAJ,GAAmBQ,SAAnB;AACA,6BAAO,IAAP;AACD,qBAZD,MAYO;AACL,6BAAO,KAAP;AACD;AACF,mBAhBD,MAgBO,IAAIR,IAAI,CAAC,kBAAD,CAAJ,IAA4BQ,SAAhC,EAA2C;AAEhD,wBAAImN,CAAC,CAAC3N,IAAF,CAAO4B,gBAAP,IAA2ByL,YAA/B,EAA6C;AAC3CM,uBAAC,CAAC3N,IAAF,CAAOwJ,IAAP,GAAcxJ,IAAI,CAAC,UAAD,CAAlB;AACAsK,0BAAI,CAACi7B,OAAL,CAAa/3B,gBAAb,CAA8BC,SAA9B,CAAwCa,MAAxC;AACAhE,0BAAI,CAACi7B,OAAL,CAAal2B,cAAb;AACArP,0BAAI,CAAC,UAAD,CAAJ,GAAmBQ,SAAnB;AACA,6BAAO,IAAP;AACD,qBAND,MAMO;AACL,6BAAO,KAAP;AACD;AACF,mBAXM,MAWA,IAAIR,IAAI,CAAC,mBAAD,CAAJ,IAA6BQ,SAAjC,EAA4C;AAEjD,wBAAImN,CAAC,CAAC3N,IAAF,CAAO6B,iBAAP,IAA4BwL,YAAhC,EAA8C;AAC5CM,uBAAC,CAAC3N,IAAF,CAAOwJ,IAAP,GAAcxJ,IAAI,CAAC,UAAD,CAAlB;AACAsK,0BAAI,CAACi7B,OAAL,CAAa/3B,gBAAb,CAA8BC,SAA9B,CAAwCa,MAAxC;AACAhE,0BAAI,CAACi7B,OAAL,CAAal2B,cAAb;AACArP,0BAAI,CAAC,UAAD,CAAJ,GAAmBQ,SAAnB;AACA,6BAAO,IAAP;AACD,qBAND,MAMO;AACL,6BAAO,KAAP;AACD;AACF,mBAXM,MAYF,IAAIR,IAAI,CAAC,uBAAD,CAAJ,IAAiCQ,SAArC,EAAgD;AAEnD,wBAAImN,CAAC,CAAC3N,IAAF,CAAO6J,qBAAP,IAAgCwD,YAApC,EAAkD;AAChDM,uBAAC,CAAC3N,IAAF,CAAOwJ,IAAP,GAAcxJ,IAAI,CAAC,UAAD,CAAlB;AACAsK,0BAAI,CAACi7B,OAAL,CAAa/3B,gBAAb,CAA8BC,SAA9B,CAAwCa,MAAxC;AACAhE,0BAAI,CAACi7B,OAAL,CAAal2B,cAAb;AACArP,0BAAI,CAAC,UAAD,CAAJ,GAAmBQ,SAAnB;AACA,6BAAO,IAAP;AACD,qBAND,MAMO;AACL,6BAAO,KAAP;AACD;AACF,mBAXI,MAYA;AACH,2BAAO,KAAP;AACD;AACF,iBAxDH;AA0DD,eA3DS,EA2DP,GA3DO,CAAV;AA4DD,aAxED,MAwEO,IAAIR,IAAI,CAAC,WAAD,CAAJ,IAAqBQ,SAAzB,EAAoC;AACzC;AACA;AACA,kBAAI6M,aAAY,GAAG,EAAnB;;AACA,kBAAIrN,IAAI,CAAC,0BAAD,CAAJ,IAAoCQ,SAAxC,EAAmD;AACjD6M,6BAAY,GAAGrN,IAAI,CAAC,0BAAD,CAAnB;AACD,eAFD,MAEO,IAAIA,IAAI,CAAC,kBAAD,CAAJ,IAA4BQ,SAAhC,EAA2C;AAChD6M,6BAAY,GAAGrN,IAAI,CAAC,kBAAD,CAAnB;AACD,eAFM,MAEA,IAAIA,IAAI,CAAC,mBAAD,CAAJ,IAA6BQ,SAAjC,EAA4C;AACjD6M,6BAAY,GAAGrN,IAAI,CAAC,mBAAD,CAAnB;AACD,eAFM,MAEA,IAAIA,IAAI,CAAC,uBAAD,CAAJ,IAAiCQ,SAArC,EAAgD;AACrD6M,6BAAY,GAAGrN,IAAI,CAAC,uBAAD,CAAnB;AACD;;AAAA;AAAC;AACFK,wBAAU,CAAC,YAAM;AACf,wBAAI,CAACklC,OAAL,CAAa/3B,gBAAb,CAA8BC,SAA9B,CAAwCC,SAAxC,CACE,UAAUC,CAAV,EAAa;AACX,sBAAI3N,IAAI,CAAC,0BAAD,CAAJ,IAAoCQ,SAAxC,EAAmD;AACjD,wBAAImN,CAAC,CAAC3N,IAAF,CAAOwB,wBAAP,IAAmC6L,aAAvC,EAAqD;AACnDM,uBAAC,CAAC3N,IAAF,CAAOqE,KAAP,GAAerE,IAAI,CAAC,WAAD,CAAnB,CADmD,CAEnD;;AACA2N,uBAAC,CAAC83B,cAAF;AACAzlC,0BAAI,CAAC,WAAD,CAAJ,GAAoBQ,SAApB;AACA,6BAAO,IAAP;AACD,qBAND,MAMO;AACL,6BAAO,KAAP;AACD;AACF,mBAVD,MAUO,IAAIR,IAAI,CAAC,kBAAD,CAAJ,IAA4BQ,SAAhC,EAA2C;AAEhD,wBAAImN,CAAC,CAAC3N,IAAF,CAAO4B,gBAAP,IAA2ByL,aAA/B,EAA6C;AAC3CM,uBAAC,CAAC3N,IAAF,CAAOqE,KAAP,GAAerE,IAAI,CAAC,WAAD,CAAnB,CAD2C,CAE3C;;AACA2N,uBAAC,CAAC83B,cAAF;AACAzlC,0BAAI,CAAC,WAAD,CAAJ,GAAoBQ,SAApB;AACA,6BAAO,IAAP;AACD,qBAND,MAMO;AACL,6BAAO,KAAP;AACD;AACF,mBAXM,MAWA,IAAIR,IAAI,CAAC,mBAAD,CAAJ,IAA6BQ,SAAjC,EAA4C;AAEjD,wBAAImN,CAAC,CAAC3N,IAAF,CAAO6B,iBAAP,IAA4BwL,aAAhC,EAA8C;AAC5CM,uBAAC,CAAC3N,IAAF,CAAOqE,KAAP,GAAerE,IAAI,CAAC,WAAD,CAAnB,CAD4C,CAE5C;;AACA2N,uBAAC,CAAC83B,cAAF;AACAzlC,0BAAI,CAAC,WAAD,CAAJ,GAAoBQ,SAApB;AACA,6BAAO,IAAP;AACD,qBAND,MAMO;AACL,6BAAO,KAAP;AACD;AACF,mBAXM,MAWA,IAAIR,IAAI,CAAC,uBAAD,CAAJ,IAAiCQ,SAArC,EAAgD;AAErD,wBAAImN,CAAC,CAAC3N,IAAF,CAAO6J,qBAAP,IAAgCwD,aAApC,EAAkD;AAChDM,uBAAC,CAAC3N,IAAF,CAAOqE,KAAP,GAAerE,IAAI,CAAC,WAAD,CAAnB,CADgD,CAEhD;;AACA2N,uBAAC,CAAC83B,cAAF;AACAzlC,0BAAI,CAAC,WAAD,CAAJ,GAAoBQ,SAApB;AACA,6BAAO,IAAP;AACD,qBAND,MAMO;AACL,6BAAO,KAAP;AACD;AACF,mBAXM,MAYF;AACH,2BAAO,KAAP;AACD;AACF,iBAjDH;AAmDD,eApDS,EAoDP,GApDO,CAAV;AAqDD,aAlEM,MAkEA,IAAIR,IAAI,CAAC,UAAD,CAAJ,IAAoBQ,SAAxB,EAAmC;AACxC;AACA,kBAAI6M,cAAY,GAAG,EAAnB;;AACA,kBAAIrN,IAAI,CAAC,0BAAD,CAAJ,IAAoCQ,SAAxC,EAAmD;AACjD6M,8BAAY,GAAGrN,IAAI,CAAC,0BAAD,CAAnB;AACD,eAFD,MAEO,IAAIA,IAAI,CAAC,kBAAD,CAAJ,IAA4BQ,SAAhC,EAA2C;AAChD6M,8BAAY,GAAGrN,IAAI,CAAC,kBAAD,CAAnB;AACD,eAFM,MAEA,IAAIA,IAAI,CAAC,mBAAD,CAAJ,IAA6BQ,SAAjC,EAA4C;AACjD6M,8BAAY,GAAGrN,IAAI,CAAC,mBAAD,CAAnB;AACD;;AAAA;AACDK,wBAAU,CAAC,YAAM;AACf,wBAAI,CAACklC,OAAL,CAAa/3B,gBAAb,CAA8BC,SAA9B,CAAwCC,SAAxC,CACE,UAAUC,CAAV,EAAa;AACX,sBAAI3N,IAAI,CAAC,0BAAD,CAAJ,IAAoCQ,SAAxC,EAAmD;AACjD,wBAAImN,CAAC,CAAC3N,IAAF,CAAOwB,wBAAP,IAAmC6L,cAAvC,EAAqD;AACnDM,uBAAC,CAAC3N,IAAF,CAAOoB,IAAP,GAAcpB,IAAI,CAAC,UAAD,CAAlB,CADmD,CAEnD;;AACA2N,uBAAC,CAAC83B,cAAF;AACAzlC,0BAAI,CAAC,UAAD,CAAJ,GAAmBQ,SAAnB;AACA,6BAAO,IAAP;AAED,qBAPD,MAOO;AACL,6BAAO,KAAP;AACD;AACF,mBAXD,MAWO,IAAIR,IAAI,CAAC,kBAAD,CAAJ,IAA4BQ,SAAhC,EAA2C;AAEhD,wBAAImN,CAAC,CAAC3N,IAAF,CAAO4B,gBAAP,IAA2ByL,cAA/B,EAA6C;AAC3CM,uBAAC,CAAC3N,IAAF,CAAOoB,IAAP,GAAcpB,IAAI,CAAC,UAAD,CAAlB,CAD2C,CAE3C;;AACA2N,uBAAC,CAAC83B,cAAF;AACAzlC,0BAAI,CAAC,UAAD,CAAJ,GAAmBQ,SAAnB;AACA,6BAAO,IAAP;AACD,qBAND,MAMO;AACL,6BAAO,KAAP;AACD;AACF,mBAXM,MAWA,IAAIR,IAAI,CAAC,mBAAD,CAAJ,IAA6BQ,SAAjC,EAA4C;AAEjD,wBAAImN,CAAC,CAAC3N,IAAF,CAAO6B,iBAAP,IAA4BwL,cAAhC,EAA8C;AAC5CM,uBAAC,CAAC3N,IAAF,CAAOoB,IAAP,GAAcpB,IAAI,CAAC,UAAD,CAAlB,CAD4C,CAE5C;;AACA2N,uBAAC,CAAC83B,cAAF;AACAzlC,0BAAI,CAAC,UAAD,CAAJ,GAAmBQ,SAAnB;AACA,6BAAO,IAAP;AACD,qBAND,MAMO;AACL,6BAAO,KAAP;AACD;AACF,mBAXM,MAYF;AACH,2BAAO,KAAP;AACD;AACF,iBAvCH;AAyCD,eA1CS,EA0CP,GA1CO,CAAV;AA2CD,aArDM,MAqDA,IAAIR,IAAI,CAAC,UAAD,CAAJ,IAAoBQ,SAAxB,EAAmC;AACxC;AACA,kBAAI6M,cAAY,GAAG,EAAnB;;AACA,kBAAIrN,IAAI,CAAC,0BAAD,CAAJ,IAAoCQ,SAAxC,EAAmD;AACjD6M,8BAAY,GAAGrN,IAAI,CAAC,0BAAD,CAAnB;AACD,eAFD,MAEO,IAAIA,IAAI,CAAC,kBAAD,CAAJ,IAA4BQ,SAAhC,EAA2C;AAChD6M,8BAAY,GAAGrN,IAAI,CAAC,kBAAD,CAAnB;AACD,eAFM,MAEA,IAAIA,IAAI,CAAC,mBAAD,CAAJ,IAA6BQ,SAAjC,EAA4C;AACjD6M,8BAAY,GAAGrN,IAAI,CAAC,mBAAD,CAAnB;AACD;;AAAA;AACDK,wBAAU,CAAC,YAAM;AACf,wBAAI,CAACklC,OAAL,CAAa/3B,gBAAb,CAA8BC,SAA9B,CAAwCC,SAAxC,CACE,UAAUC,CAAV,EAAa;AACX,sBAAI3N,IAAI,CAAC,0BAAD,CAAJ,IAAoCQ,SAAxC,EAAmD;AACjD,wBAAImN,CAAC,CAAC3N,IAAF,CAAOwB,wBAAP,IAAmC6L,cAAvC,EAAqD;AACnDM,uBAAC,CAAC3N,IAAF,CAAOmS,QAAP,GAAkBnS,IAAI,CAAC,UAAD,CAAtB,CADmD,CAEnD;;AACA2N,uBAAC,CAAC83B,cAAF;AACAzlC,0BAAI,CAAC,UAAD,CAAJ,GAAmBQ,SAAnB;AACA,6BAAO,IAAP;AACD,qBAND,MAMO;AACL,6BAAO,KAAP;AACD;AACF,mBAVD,MAUO,IAAIR,IAAI,CAAC,kBAAD,CAAJ,IAA4BQ,SAAhC,EAA2C;AAEhD,wBAAImN,CAAC,CAAC3N,IAAF,CAAO4B,gBAAP,IAA2ByL,cAA/B,EAA6C;AAC3CM,uBAAC,CAAC3N,IAAF,CAAOmS,QAAP,GAAkBnS,IAAI,CAAC,UAAD,CAAtB,CAD2C,CAE3C;;AACA2N,uBAAC,CAAC83B,cAAF;AACAzlC,0BAAI,CAAC,UAAD,CAAJ,GAAmBQ,SAAnB;AACA,6BAAO,IAAP;AACD,qBAND,MAMO;AACL,6BAAO,KAAP;AACD;AACF,mBAXM,MAWA,IAAIR,IAAI,CAAC,mBAAD,CAAJ,IAA6BQ,SAAjC,EAA4C;AAEjD,wBAAImN,CAAC,CAAC3N,IAAF,CAAO6B,iBAAP,IAA4BwL,cAAhC,EAA8C;AAC5CM,uBAAC,CAAC3N,IAAF,CAAOmS,QAAP,GAAkBnS,IAAI,CAAC,UAAD,CAAtB,CAD4C,CAE5C;;AACA2N,uBAAC,CAAC83B,cAAF;AACAzlC,0BAAI,CAAC,UAAD,CAAJ,GAAmBQ,SAAnB;AACA,6BAAO,IAAP;AACD,qBAND,MAMO;AACL,6BAAO,KAAP;AACD;AACF,mBAXM,MAYF;AACH,2BAAO,KAAP;AACD;AACF,iBAtCH;AAwCD,eAzCS,EAyCP,GAzCO,CAAV;AA0CD,aApDM,MAoDA,IAAIR,IAAI,CAAC,SAAD,CAAJ,IAAmBQ,SAAvB,EAAkC;AACvC;AACA,kBAAI6M,cAAY,GAAG,EAAnB;;AACA,kBAAIrN,IAAI,CAAC,0BAAD,CAAJ,IAAoCQ,SAAxC,EAAmD;AACjD6M,8BAAY,GAAGrN,IAAI,CAAC,0BAAD,CAAnB;AACD,eAFD,MAEO,IAAIA,IAAI,CAAC,kBAAD,CAAJ,IAA4BQ,SAAhC,EAA2C;AAChD6M,8BAAY,GAAGrN,IAAI,CAAC,kBAAD,CAAnB;AACD,eAFM,MAEA,IAAIA,IAAI,CAAC,mBAAD,CAAJ,IAA6BQ,SAAjC,EAA4C;AACjD6M,8BAAY,GAAGrN,IAAI,CAAC,mBAAD,CAAnB;AACD;;AAAA;AACDK,wBAAU,CAAC,YAAM;AACf,wBAAI,CAACklC,OAAL,CAAa/3B,gBAAb,CAA8BC,SAA9B,CAAwCC,SAAxC,CACE,UAAUC,CAAV,EAAa;AACX,sBAAI3N,IAAI,CAAC,0BAAD,CAAJ,IAAoCQ,SAAxC,EAAmD;AACjD,wBAAImN,CAAC,CAAC3N,IAAF,CAAOwB,wBAAP,IAAmC6L,cAAvC,EAAqD;AACnDM,uBAAC,CAAC3N,IAAF,CAAOkD,GAAP,GAAalD,IAAI,CAAC,SAAD,CAAjB,CADmD,CAEnD;;AACA2N,uBAAC,CAAC83B,cAAF;AACAzlC,0BAAI,CAAC,SAAD,CAAJ,GAAkBQ,SAAlB;AACA,6BAAO,IAAP;AACD,qBAND,MAMO;AACL,6BAAO,KAAP;AACD;AACF,mBAVD,MAUO,IAAIR,IAAI,CAAC,kBAAD,CAAJ,IAA4BQ,SAAhC,EAA2C;AAEhD,wBAAImN,CAAC,CAAC3N,IAAF,CAAO4B,gBAAP,IAA2ByL,cAA/B,EAA6C;AAC3CM,uBAAC,CAAC3N,IAAF,CAAOkD,GAAP,GAAalD,IAAI,CAAC,SAAD,CAAjB,CAD2C,CAE3C;;AACA2N,uBAAC,CAAC83B,cAAF;AACAzlC,0BAAI,CAAC,SAAD,CAAJ,GAAkBQ,SAAlB;AACA,6BAAO,IAAP;AACD,qBAND,MAMO;AACL,6BAAO,KAAP;AACD;AACF,mBAXM,MAWA,IAAIR,IAAI,CAAC,mBAAD,CAAJ,IAA6BQ,SAAjC,EAA4C;AAEjD,wBAAImN,CAAC,CAAC3N,IAAF,CAAO6B,iBAAP,IAA4BwL,cAAhC,EAA8C;AAC5CM,uBAAC,CAAC3N,IAAF,CAAOkD,GAAP,GAAalD,IAAI,CAAC,SAAD,CAAjB,CAD4C,CAE5C;;AACA2N,uBAAC,CAAC83B,cAAF;AACAzlC,0BAAI,CAAC,SAAD,CAAJ,GAAkBQ,SAAlB;AACA,6BAAO,IAAP;AACD,qBAND,MAMO;AACL,6BAAO,KAAP;AACD;AACF,mBAXM,MAYF;AACH,2BAAO,KAAP;AACD;AACF,iBAtCH;AAwCD,eAzCS,EAyCP,GAzCO,CAAV;AA0CD;AAEF;;;gDAEqBR,I,EAAM;AAAA;;AAC1B,gBAAIsK,IAAI,GAAG,IAAX;AACAjK,sBAAU,CAAC,YAAM;AACf,sBAAI,CAACklC,OAAL,CAAa/3B,gBAAb,CAA8BC,SAA9B,CAAwCC,SAAxC,CACE,UAAUC,CAAV,EAAa;AACX,oBAAIA,CAAC,CAAC3N,IAAF,CAAO6B,iBAAP,IAA4BrB,SAAhC,EAA2C;AACzC,sBAAImN,CAAC,CAAC3N,IAAF,CAAO6B,iBAAP,IAA4B7B,IAAI,CAAC,mBAAD,CAApC,EAA2D;AACzD2N,qBAAC,CAAC3N,IAAF,CAAOqE,KAAP,GAAerE,IAAI,CAAC,gBAAD,CAAnB;AACAsK,wBAAI,CAACi7B,OAAL,CAAa/3B,gBAAb,CAA8BC,SAA9B,CAAwCa,MAAxC;AACAhE,wBAAI,CAACi7B,OAAL,CAAal2B,cAAb;AACA,2BAAO,IAAP;AACD,mBALD,MAKO;AACL,2BAAO,KAAP;AACD;AAEF,iBAVD,MAUO;AACL,yBAAO,KAAP;AACD;AACF,eAfH;AAiBD,aAlBS,EAkBP,GAlBO,CAAV;AAmBD;;;0CAEerP,I,EAAM;AAAA;;AACpB,gBAAIsK,IAAI,GAAG,IAAX;AACAjK,sBAAU,CAAC,YAAM;AACf,sBAAI,CAACklC,OAAL,CAAa/3B,gBAAb,CAA8BC,SAA9B,CAAwCC,SAAxC,CACE,UAAUC,CAAV,EAAa;AACX,oBAAIA,CAAC,CAAC3N,IAAF,CAAO4B,gBAAP,IAA2BpB,SAA/B,EAA0C;AACxC,sBAAImN,CAAC,CAAC3N,IAAF,CAAO4B,gBAAP,IAA2B5B,IAAI,CAAC,kBAAD,CAAnC,EAAyD;AACvD2N,qBAAC,CAAC3N,IAAF,CAAOqE,KAAP,GAAerE,IAAI,CAAC,WAAD,CAAnB;AACAsK,wBAAI,CAACi7B,OAAL,CAAa/3B,gBAAb,CAA8BC,SAA9B,CAAwCa,MAAxC;AACAhE,wBAAI,CAACi7B,OAAL,CAAal2B,cAAb;AACA,2BAAO,IAAP;AACD,mBALD,MAKO;AACL,2BAAO,KAAP;AACD;AAEF,iBAVD,MAUO;AACL,yBAAO,KAAP;AACD;AACF,eAfH;AAiBD,aAlBS,EAkBP,GAlBO,CAAV;AAmBD;;;yCAIcrP,I,EAAM;AAAA;;AACnB,gBAAIsK,IAAI,GAAG,IAAX,CADmB,CAEnB;;AACAjK,sBAAU,CAAC,YAAM;AACf,sBAAI,CAACklC,OAAL,CAAa/3B,gBAAb,CAA8BC,SAA9B,CAAwCC,SAAxC,CACE,UAAUC,CAAV,EAAa;AACX,oBAAIA,CAAC,CAAC3N,IAAF,CAAO4B,gBAAP,IAA2BpB,SAA/B,EAA0C;AACxC,sBAAImN,CAAC,CAAC3N,IAAF,CAAO4B,gBAAP,IAA2B5B,IAAI,CAAC,kBAAD,CAAnC,EAAyD;AACvD2N,qBAAC,CAAC3N,IAAF,CAAOoB,IAAP,GAAcpB,IAAI,CAAC,UAAD,CAAlB,CADuD,CAEvD;;AACAsK,wBAAI,CAACi7B,OAAL,CAAa/3B,gBAAb,CAA8BC,SAA9B,CAAwCa,MAAxC;AACAhE,wBAAI,CAACi7B,OAAL,CAAal2B,cAAb;AACA,2BAAO,IAAP;AACD,mBAND,MAMO;AACL,2BAAO,KAAP;AACD;AAEF,iBAXD,MAWO;AACL,yBAAO,KAAP;AACD;AACF,eAhBH;AAkBD,aAnBS,EAmBP,GAnBO,CAAV;AAoBD;;;2CAEgBrP,I,EAAM;AAAA;;AACrB;AACA;AACA;AACA;AACA,gBAAIA,IAAI,IAAI,IAAZ,EAAkB;AAChBK,wBAAU,CAAC,YAAM;AACf,wBAAQL,IAAI,CAAC,SAAD,CAAZ;AACE,uBAAK,CAAL;AAAQ,4BAAI,CAAC0lC,OAAL,CAAa1lC,IAAb;;AAAoB;;AAC5B,uBAAK,CAAL;AAAQ,4BAAI,CAAC2lC,eAAL,CAAqB3lC,IAArB;;AAA4B;;AACpC,uBAAK,CAAL;AAAQ,4BAAI,CAAC4lC,cAAL,CAAoB5lC,IAApB;;AAA2B;;AACnC,uBAAK,CAAL;AAAQ,4BAAI,CAAC6lC,qBAAL,CAA2B7lC,IAA3B;;AAAkC;AAJ5C;AAMD,eAPS,EAOP,GAPO,CAAV;AAQD;AAGF;;;wCAEa;AACZ,iBAAKjB,cAAL,CAAoB6nB,gBAApB;AACD;;;4CAEiB;AAAA;;AAEhB,iBAAK7nB,cAAL,CAAoB4Y,eAApB,GAAsC5X,SAAtC,CACE,UAAAC,IAAI,EAAI;AACNY,qBAAO,CAACC,GAAR,CAAYb,IAAZ;;AAEA,sBAAI,CAAChB,MAAL,CAAYuY,OAAZ,CAAoBvX,IAAI,CAAC,0BAAD,CAAJ,GAAmC,kBAAvD,EAA2E,EAA3E,EAA+E;AAC7EuC,uBAAO,EAAE;AADoE,eAA/E;;AAIAlC,wBAAU,CAAC,YAAM;AACf,oBAAIylC,gBAAgB,GAAG9lC,IAAI,CAAC,OAAD,CAA3B;;AACA,oBAAImC,UAAU,GAAG,QAAI,CAACojC,OAAL,CAAaQ,aAAb,EAAjB;;AACA5jC,0BAAU,CAAC,MAAD,CAAV,GAAqB2jC,gBAArB;AAAsC;;AACtC,wBAAI,CAACP,OAAL,CAAan4B,oBAAb,CAAkCjL,UAAlC;;AACA,wBAAI,CAACojC,OAAL,CAAa/3B,gBAAb,CAA8BC,SAA9B,CAAwCa,MAAxC;;AACA,wBAAI,CAACi3B,OAAL,CAAal2B,cAAb;;AAEAhP,0BAAU,CAAC,YAAM;AACf,0BAAI,CAACklC,OAAL,CAAa/3B,gBAAb,CAA8BC,SAA9B,CAAwCC,SAAxC,CACE,UAAUC,CAAV,EAAa;AACX,wBAAIA,CAAC,CAAC3N,IAAF,CAAOwB,wBAAP,IAAmCxB,IAAI,CAAC,0BAAD,CAA3C,EAAyE;AACvE2N,uBAAC,CAACM,mBAAF;AACA,6BAAO,IAAP;AACD,qBAHD,MAGO;AACL,6BAAO,KAAP;AACD;AACF,mBARH;AAUD,iBAXS,EAWP,GAXO,CAAV;AAYD,eApBS,EAoBP,GApBO,CAAV;AAqBD,aA7BH,EA8BE,UAAA3L,KAAK,EAAI;AACP;AACA,sBAAI,CAACtD,MAAL,CAAYsD,KAAZ,CAAkBA,KAAK,CAACA,KAAxB,EAA+B,OAA/B,EAAwC;AACtCC,uBAAO,EAAE;AAD6B,eAAxC;AAGD,aAnCH;AAqCD;;;0CAEY;AAAA;;AACX,gBAAIiT,UAAU,GAAG,CAAjB;AACA,gBAAIrT,UAAU,GAAG;AACfg0B,yBAAW,EAAG,QADC;AAEf,yBAAY,CAFG;AAGf,4BAAe3gB,UAHA;AAIf4gB,sBAAQ,EAAG,aAAW1S,IAAI,CAACC,KAAL,CAAWD,IAAI,CAACE,MAAL,MAAiB,QAAQ,EAAzB,IAA+B,EAA1C;AAJP,aAAjB;AAOA,iBAAKwN,eAAL,CAAqBiF,UAArB,CAAgCl0B,UAAhC,EAA4CpC,SAA5C,CACE,UAAAC,IAAI,EAAG;AACLY,qBAAO,CAACC,GAAR,CAAYb,IAAZ;;AACA,sBAAI,CAACgmC,QAAL,CAAcnR,QAAd,CAAuBpnB,SAAvB,CAAiCR,KAAjC,CAAuC9L,IAAvC,CAA4CnB,IAAI,CAACiG,IAAjD;;AACA,sBAAI,CAAC+/B,QAAL,CAAc9+B,OAAd,GAAwB,QAAI,CAAC8+B,QAAL,CAAcnR,QAAd,CAAuBpnB,SAAvB,CAAiCR,KAAjC,CAAuCtK,MAA/D;;AACA,sBAAI,CAACqjC,QAAL,CAAcnR,QAAd,CAAuBpnB,SAAvB,CAAiCa,MAAjC;;AACA,sBAAI,CAACtP,MAAL,CAAYsN,IAAZ,CAAiB,gBAAjB,EAAmC,EAAnC,EAAuC;AACrC/J,uBAAO,EAAE;AAD4B,eAAvC;;AAGA,sBAAI,CAACyjC,QAAL,CAAcnR,QAAd,CAAuBpnB,SAAvB,CAAiC4C,WAAjC,CAA6CrQ,IAAI,CAACiG,IAAL,CAAUqK,EAAvD,EAA2DrC,mBAA3D;AACD,aAVH,EAUI,UAAA3L,KAAK,EAAG;AACR1B,qBAAO,CAACC,GAAR,CAAYyB,KAAZ;AACD,aAZH;AAcD;;;qCAGUoC,G,EAAM;AAAA;;AACf,gBAAI8Q,UAAU,GAAG,CAAjB;AACA5U,mBAAO,CAACC,GAAR,CAAY6D,GAAG,CAACE,MAAJ,CAAWiyB,KAAvB;AACA,gBAAI10B,UAAJ,EAAgBy0B,SAAhB;;AAEA,gBAAIlyB,GAAG,CAACE,MAAJ,CAAWiyB,KAAX,IAAoBr2B,SAAxB,EAAmC;AACjC,kBAAIkE,GAAG,CAACE,MAAJ,CAAWiyB,KAAX,CAAiBl0B,MAAjB,IAA2B,CAA/B,EAAkC;AAChCi0B,yBAAS,GAAGlyB,GAAG,CAACE,MAAJ,CAAWiyB,KAAX,CAAiB,CAAjB,EAAoBne,IAAhC;AACAvW,0BAAU,GAAG;AACX,iCAAe,QADJ;AAEX,6BAAW,CAFA;AAGX,gCAAcqT,UAHH;AAIX,+BAAaohB;AAJF,iBAAb;AAMA,oBAAM9Q,QAAQ,GAAG,IAAIgR,QAAJ,EAAjB;AACAhR,wBAAQ,CAACiR,MAAT,CAAgB,MAAhB,EAAwBryB,GAAG,CAACE,MAAJ,CAAWiyB,KAAX,CAAiB,CAAjB,CAAxB;AAEA,qBAAKzF,eAAL,CAAqB4F,UAArB,CAAgClR,QAAhC,EAA0CtQ,UAA1C,EAAsD,EAAtD,EAA0DzV,SAA1D,CACE,UAAAC,IAAI,EAAI;AACNY,yBAAO,CAACC,GAAR,CAAYb,IAAZ;;AAEA,0BAAI,CAAChB,MAAL,CAAYsN,IAAZ,CAAiB,gBAAjB,EAAmC,EAAnC,EAAuC;AACrC/J,2BAAO,EAAE;AAD4B,mBAAvC;;AAGAlC,4BAAU,CAAC,YAAM;AAEf,4BAAI,CAAC2lC,QAAL,CAAcnR,QAAd,CAAuBpnB,SAAvB,CAAiCR,KAAjC,CAAuC9L,IAAvC,CAA4CnB,IAAI,CAACiG,IAAjD;;AACA,4BAAI,CAAC+/B,QAAL,CAAc9+B,OAAd,GAAwB,QAAI,CAAC8+B,QAAL,CAAcnR,QAAd,CAAuBpnB,SAAvB,CAAiCR,KAAjC,CAAuCtK,MAA/D,CAHe,CAIf;AACA;;AACA,4BAAI,CAACqjC,QAAL,CAAcnR,QAAd,CAAuBpnB,SAAvB,CAAiCa,MAAjC;;AACA,4BAAI,CAAC03B,QAAL,CAAcnR,QAAd,CAAuBpnB,SAAvB,CAAiC4C,WAAjC,CAA6CrQ,IAAI,CAACiG,IAAL,CAAUqK,EAAvD,EAA2DrC,mBAA3D;AAED,mBATS,EASP,GATO,CAAV;AAYD,iBAnBH,EAmBK,UAAA3L,KAAK,EAAI;AACV1B,yBAAO,CAACC,GAAR,CAAYyB,KAAZ;;AACA,0BAAI,CAACtD,MAAL,CAAYsD,KAAZ,CAAkB,4BAAlB,EAAgD,EAAhD,EAAoD;AAClDC,2BAAO,EAAE;AADyC,mBAApD;AAGD,iBAxBH;AA0BD,eArCD,MAqCO;AAEL,oBAAI00B,WAAW,GAAG3yB,KAAK,CAACC,IAAN,CAAWG,GAAG,CAACE,MAAJ,CAAWiyB,KAAtB,CAAlB;AACAI,2BAAW,CAACn2B,OAAZ,CAAoB,UAACC,OAAD,EAAmB;AAErC61B,2BAAS,GAAG71B,OAAO,CAAC2X,IAApB;AACAvW,4BAAU,GAAG;AACX,mCAAe,QADJ;AAEX,+BAAW,CAFA;AAGX,kCAAcqT,UAHH;AAIX,iCAAaohB;AAJF,mBAAb;AAOA,sBAAM9Q,QAAQ,GAAG,IAAIgR,QAAJ,EAAjB;AACAhR,0BAAQ,CAACiR,MAAT,CAAgB,MAAhB,EAAwBh2B,OAAxB;;AAEA,0BAAI,CAACqwB,eAAL,CAAqB4F,UAArB,CAAgClR,QAAhC,EAA0CtQ,UAA1C,EAAsD,EAAtD,EAA0DzV,SAA1D,CACE,UAAAC,IAAI,EAAI;AACNY,2BAAO,CAACC,GAAR,CAAYb,IAAZ;;AAEA,4BAAI,CAAChB,MAAL,CAAYsN,IAAZ,CAAiB,gBAAjB,EAAmC,EAAnC,EAAuC;AACrC/J,6BAAO,EAAE;AAD4B,qBAAvC;;AAGAlC,8BAAU,CAAC,YAAM;AAEf,8BAAI,CAAC2lC,QAAL,CAAcnR,QAAd,CAAuBpnB,SAAvB,CAAiCR,KAAjC,CAAuC9L,IAAvC,CAA4CnB,IAAI,CAACiG,IAAjD;;AACA,8BAAI,CAAC+/B,QAAL,CAAc9+B,OAAd,GAAwB,QAAI,CAAC8+B,QAAL,CAAcnR,QAAd,CAAuBpnB,SAAvB,CAAiCR,KAAjC,CAAuCtK,MAA/D,CAHe,CAIf;AACA;;AACA,8BAAI,CAACqjC,QAAL,CAAcnR,QAAd,CAAuBpnB,SAAvB,CAAiCa,MAAjC;;AACA,8BAAI,CAAC03B,QAAL,CAAcnR,QAAd,CAAuBpnB,SAAvB,CAAiC4C,WAAjC,CAA6CrQ,IAAI,CAACiG,IAAL,CAAUqK,EAAvD,EAA2DrC,mBAA3D;AAED,qBATS,EASP,GATO,CAAV;AAYD,mBAnBH,EAmBK,UAAA3L,KAAK,EAAI;AACV1B,2BAAO,CAACC,GAAR,CAAYyB,KAAZ;;AACA,4BAAI,CAACtD,MAAL,CAAYsD,KAAZ,CAAkB,4BAAlB,EAAgD,EAAhD,EAAoD;AAClDC,6BAAO,EAAE;AADyC,qBAApD;AAGD,mBAxBH;AA0BD,iBAvCD;AAwCD;AACF;;AAED3B,mBAAO,CAACC,GAAR,CAAY6D,GAAZ;AACD;;;yCAEc;AAAA;;AAEb,gBAAI8Q,UAAU,GAAG,CAAjB;AACA,gBAAIrT,UAAU,GAAG;AACf,6BAAe,QADA;AAEf,yBAAW,CAFI;AAGf,4BAAcqT;AAHC,aAAjB;AAOA,iBAAK4b,eAAL,CAAqBmF,SAArB,CAA+Bp0B,UAA/B,EAA2CpC,SAA3C,CACE,UAAAC,IAAI,EAAI;AACNY,qBAAO,CAACC,GAAR,CAAYb,IAAZ;AACA,kBAAIy2B,WAAW,GAAG,GAAlB;AACA;;;;;;;;;;AASA,kBAAIz2B,IAAI,CAACiG,IAAL,IAAazF,SAAjB,EAA4B;AAC1B,wBAAI,CAACxB,MAAL,CAAYsN,IAAZ,CAAiB,kBAAjB,EAAqC,EAArC,EAAyC;AACvC/J,yBAAO,EAAE;AAD8B,iBAAzC;;AAGA,wBAAI,CAACyjC,QAAL,CAAc/4B,KAAd,CAAoB9L,IAApB,CAAyBnB,IAAI,CAACiG,IAA9B;;AACA,wBAAI,CAAC+/B,QAAL,CAAc32B,cAAd;;AACA,wBAAI,CAAC22B,QAAL,CAAcnR,QAAd,CAAuBpnB,SAAvB,CAAiCa,MAAjC;AACD;AAEF,aAtBH,EAsBK,UAAAhM,KAAK,EAAI;AACV1B,qBAAO,CAACC,GAAR,CAAYyB,KAAZ;;AACA,sBAAI,CAACtD,MAAL,CAAYsD,KAAZ,CAAkB,gCAAlB,EAAoD,EAApD,EAAwD;AACtDC,uBAAO,EAAE;AAD6C,eAAxD;AAGD,aA3BH;AA8BD;;;;;;;yBAlnBU6iC,2B,EAA2B,2J,EAAA,+K,EAAA,yH,EAAA,wH,EAAA,+K;AAAA,O;;;cAA3BA,2B;AAA2B,iD;AAAA;AAAA;;;;;;;;;;;;;;;;;;;;;;;ACvBxC;;AAII;;AACI;;AACI;;AACI;;AAEI;;AAAmB;;AACvB;;AACA;;AACI;;AAAyI;;AAA0B;;AACnK;;AAA6B;;AAAiC;;AAC9D;;AAA6B;;AAA8B;;AAC3D;;AAA8C;;AAAoC;;AAClF;;AACI;;AAAyB;AAAA;;AAAA;;AAAA,qBAAS,WAAT;AAAwB,aAAxB;;AAAmD;;AAAY;;AACxF;;AAAiD;AAAA,qBAAU,IAAAa,UAAA,QAAV;AAA4B,aAA5B;;AAAjD;;AACA;;AAAyB;AAAA,qBAAS,IAAAC,YAAA,EAAT;AAAuB,aAAvB;;AAAkD;;AAAc;;AACzF;;AACA;;AAAyB;AAAA,qBAAS,IAAAvN,aAAA,EAAT;AAAwB,aAAxB;;AAAmD;;AAAiB;;AAC/F;;AACN;;AAEJ;;AACJ;;AACA;;AACI;;AACI;;AACJ;;AACJ;;AACJ;;AAGA;;AACI;;AACI;;AACI;;AAC4D;AAAA,qBAAS,IAAAwN,gBAAA,EAAT;AAA2B,aAA3B;;AACxD;;AAAmB;;AACvB;;AACA;;AACI;;AAGI;AAAS,kBAAAC,WAAA;AAAe,yBAAAD,gBAAA;AAAkB,aAA1C;;AAA6C;;AAA0B;;AAC3E;;AAA2D;AAAA,qBAAS,IAAAxuB,eAAA,EAAT;AAA0B,aAA1B;;AAA4B;;AACxD;;AAC/B;;AAA4C;;AAAiC;;AAC7E;;AAA8C;;AAA8B;;AAC5E;;AAAoD;AAAA;;AAAA;;AAAS;;AAA4B,yBAAA0uB,WAAA;AAAa,aAAlD;;AAAqD;;AACrE;;AAEpC;;AACI;;AAAuC;;AAAgB;;AACvD;;AAEI;;AAEJ;;AACJ;;AACJ;;AACJ;;AACJ;;AACA;;AACI;;AACI;;AACJ;;AACJ;;AACJ;;AAGA;;AACI;;AACI;;AACI;;AAEI;;AAAmB;;AACvB;;AAOJ;;AACJ;;AACA;;AACI;;AACI;;AACJ;;AACJ;;AACJ;;AACJ;;;;AAlDwB;;AAAA;;;;;;;;;wEDrBXjB,2B,EAA2B;gBANvC,uDAMuC;iBAN7B;AACT1mC,oBAAQ,EAAE,0BADD;AAETC,uBAAW,EAAE,uCAFJ;AAGTC,qBAAS,EAAE,CAAC,uCAAD;AAHF,W;AAM6B,U;;;;;;;;;;;;;AAGhB2mC,iBAAO,EAAE,CAAF;kBAA5B,uDAA4B;mBAAlB,S;AAAkB,WAAE,C;AACRS,kBAAQ,EAAE,CAAF;kBAA9B,uDAA8B;mBAApB,U;AAAoB,WAAE,C;AACPM,qBAAW,EAAE,CAAF;kBAApC,uDAAoC;mBAA1B,a;AAA0B,WAAE;;;;;;;;;;;;;;;;;;;AE9BzC;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;;;ACQgB;;AAA+B;;AAAwB;;;;;;AAAxB;;AAAA;;;;;;AAqB2I;;;;;;AAA2D;;;;;;AAEnM;;AAA6H;;AAA4B;;AAA+B;;AAAO;;;;;;;;AAAnJ;;;;;;;;AAJtD;;AAEI;;AAAM;;AAAgD;AAAA;;AAAA;;AAAA;AAAA;;AAAA;;AAAA,mDAAiC,cAAW,IAAX,EAAiBxkC,KAAlD,EAAyD,IAAzD;AAAiD,WAAjD;;AAA6D;;AAA2B;;AAA2D;;AAA6D;;AAAO;;AAAI;;AACjR;;AAAO;;AAA4J;;AAA4B;;AAAwC;;AAAO;;AAAI;;AAClP;;AAAM;;AAAmM;;AAC7M;;;;;;;;AAH8K;;AAAA;;AAA+D;;AAAA;;AAC/N;;AAAA;;AACA;;AAAA;;;;;;;;AAXlC;;AACI;;AACI;;AACI;;AAEI;;AACI;;AAAgJ;;AAA8B;;AAAG;;;;AAAiK;;AAAI;;AAAO;;AAC7V;;AAOA;;AAAmB;AAAA;;AAAA;;AAAA;;AAAA;AAAA;;AAAwB;;AAAyB;;AAAuC;;AAAO;;AAElH;;AACI;;AACI;;AACI;;AAAwD;;AAAM;;AAC9D;;AACI;;AACJ;;AACJ;;AACA;;AACI;;AAAwD;;AAAO;;AAC/D;;AACI;;AACJ;;AACJ;;AACA;;AACI;;AAAwD;;AAAK;;AAC7D;;AACI;;AACJ;;AACJ;;AACA;;AACI;;AAAwD;;AAAK;;AAC7D;;AAEI;;AAAU;AAAA;;AAAA;;AAAA;;AAAA,uDAAkC,MAAlC;AAAwC,WAAxC;;AAAyH;;AACvI;;AACJ;;AACA;;AACI;;AAAwD;;AAAQ;;AAChE;;AAEI;;AAAU;AAAA;;AAAA;;AAAA;;AAAA,uDAAkC,OAAlC;AAAyC,WAAzC;;AAAkJ;;AAChK;;AACJ;;AACJ;;AACJ;;AACJ;;AAEJ;;AACJ;;AACJ;;AACJ;;;;;;;;;AAxDS;;AAAA;;AAK4D;;AAAA,wGAAmC,eAAnC,EAAmC,mBAAnC;;AAAgI;;AAAA;;AAC1K;;AAAA;;AASF;;AAAA;;;;;;AAlBjC;;AACI;;AACI;;AA0DJ;;AACJ;;;;;;AA7DM;;AAE0B;;AAAA;;;;UDM/BykC,0B;AAgBX,4CAAoBxnC,cAApB,EAAoEqmB,aAApE,EAAiHtmB,WAAjH,EAAmJE,MAAnJ,EAA0K;AAAA;;AAAtJ,eAAAD,cAAA,GAAAA,cAAA;AAAgD,eAAAqmB,aAAA,GAAAA,aAAA;AAA6C,eAAAtmB,WAAA,GAAAA,WAAA;AAAkC,eAAAE,MAAA,GAAAA,MAAA;AAXnJ,eAAAwnC,YAAA,GAAe,CAAf;AACA,eAAAC,cAAA,GAAiB,EAAjB;AACA,eAAAC,gBAAA,GAAmB,IAAI,wDAAJ,CAAc;AAC/BtwB,wBAAY,EAAE,IAAI,wDAAJ,CAAc,CAAC,KAAKuwB,kBAAL,EAAD,CAAd;AADiB,WAAd,CAAnB;AAIA,eAAAC,UAAA,GAAa,EAAb;AACA,eAAAC,gBAAA,GAAmB,EAAnB;AAEQ,eAAA3nC,OAAA,GAAwB,IAAI,4CAAJ,EAAxB;AAEqK;;;;qCAErK;AAAA;;AACN,iBAAKwnC,gBAAL,GAAwB,KAAK5nC,WAAL,CAAiBc,KAAjB,CAAuB;AAC7CwW,0BAAY,EAAE,KAAKtX,WAAL,CAAiBe,KAAjB,CAAuB,EAAvB;AAD+B,aAAvB,CAAxB;AAIA,iBAAKulB,aAAL,CAAmBwG,aAAnB,CAAiC7rB,SAAjC,CACE,UAAA+mC,cAAc,EAAI;AAChB,kBAAGA,cAAc,IAAI,IAArB,EAA0B;AAExB,oBAAIx2B,EAAE,GAAGw2B,cAAc,CAACx2B,EAAf,IAAqB9P,SAArB,GAAiCsmC,cAAc,CAACx2B,EAAhD,GAAqD,EAA9D;AACA,oBAAId,KAAK,GAAGs3B,cAAc,CAACt3B,KAAf,IAAwBhP,SAAxB,GAAoCsmC,cAAc,CAACt3B,KAAnD,GAA2D,EAAvE;AACA,oBAAIpM,MAAM,GAAG0jC,cAAc,CAAC1jC,MAAf,IAAyB5C,SAAzB,GAAqCsmC,cAAc,CAAC1jC,MAApD,GAA6D,EAA1E;AACA,oBAAIokB,IAAI,GAAGsf,cAAc,CAACtf,IAAf,IAAuBhnB,SAAvB,GAAmCsmC,cAAc,CAACtf,IAAlD,GAAyD,EAApE;AACA,oBAAIhe,IAAI,GAAGs9B,cAAc,CAACt9B,IAAf,IAAuBhJ,SAAvB,GAAmCsmC,cAAc,CAACt9B,IAAlD,GAAyD,EAApE;AACA,oBAAIu9B,gBAAgB,GAAGD,cAAc,CAACC,gBAAf,IAAmCvmC,SAAnC,GAA+CsmC,cAAc,CAACC,gBAA9D,GAAiF,EAAxG;;AACA,wBAAI,CAACC,gBAAL,CAAsB7lC,IAAtB,CAA2B2lC,cAA3B;;AACA,wBAAI,CAACG,sBAAL,CAA4B32B,EAA5B,EAAgCd,KAAhC,EAAuCpM,MAAvC,EAA+CokB,IAA/C,EAAqDhe,IAArD,EAA2Du9B,gBAA3D;;AACA,wBAAI,CAACH,UAAL,CAAgBzlC,IAAhB,CAAqBqI,IAArB;;AACA,wBAAI,CAACq9B,gBAAL,CAAsB1lC,IAAtB,CAA2B4lC,gBAA3B;;AACA,wBAAI,CAACP,YAAL;AACD,eAbD,MAaK;AACH,wBAAI,CAAC/lC,MAAL,GAAc,IAAd;AACA,wBAAI,CAACumC,gBAAL,GAAwB,IAAxB;AACD;AACF,aAnBH;AAsBA,iBAAK9nC,OAAL,CAAaY,IAAb,CAAkB,oEAAa,IAAb,CAAlB,EAAsCC,SAAtC,CACE,UAAAC,IAAI,EAAI;AACN,sBAAI,CAACmL,SAAL,CAAenL,IAAf;AACD,aAHH;AAKD;;;sCAGWI,O,EAAsB;AAAA;;AAEhC,gBAAGA,OAAO,CAAC8mC,UAAR,CAAmB3mC,YAAnB,IAAmCC,SAAtC,EAAgD;AAC9C,mBAAKC,MAAL,GAAcL,OAAO,CAAC8mC,UAAR,CAAmB3mC,YAAjC;AACA,mBAAKymC,gBAAL,GAAwB,EAAxB;AACA,mBAAKR,YAAL,GAAoB,CAApB;AACA,mBAAKI,UAAL,GAAkB,EAAlB;AACA,mBAAKC,gBAAL,GAAwB,EAAxB;AACA,mBAAKM,WAAL,GAAmB,KAAKT,gBAAL,CAAsBhmC,GAAtB,CAA0B,cAA1B,CAAnB;AACA,mBAAKymC,WAAL,CAAiBxmC,KAAjB;;AAEA,kBAAG,KAAKF,MAAL,CAAYe,wBAAZ,IAAwChB,SAA3C,EAAqD;AACnD,oBAAIqC,KAAK,GAAG,KAAKpC,MAAL,CAAYe,wBAAxB;AACA,qBAAKzC,cAAL,CAAoBqoC,mBAApB,CAAwCvkC,KAAxC,EAA+C9C,SAA/C,CACE,UAAAC,IAAI,EAAE;AACJY,yBAAO,CAACC,GAAR,CAAYb,IAAZ;;AACA,sBAAGA,IAAI,IAAI,EAAX,EAAc;AACZ,wBAAIqO,KAAK,GAAG,CAAZ;AACArO,wBAAI,CAACc,OAAL,CAAa,UAAAC,OAAO,EAAI;AACtB,8BAAI,CAACimC,gBAAL,CAAsB7lC,IAAtB,CAA2BJ,OAA3B;;AAEA,8BAAI,CAACkmC,sBAAL,CAA4BlmC,OAAO,CAACuP,EAApC,EAAwCvP,OAAO,CAACyO,KAAhD,EAAuDzO,OAAO,CAACqC,MAA/D,EAAuErC,OAAO,CAACymB,IAA/E,EAAqFzmB,OAAO,CAACyI,IAA7F,EAAmGzI,OAAO,CAACgmC,gBAA3G;;AACA,8BAAI,CAACH,UAAL,CAAgBv4B,KAAhB,IAAyBtN,OAAO,CAACyI,IAAjC;AACA,8BAAI,CAACq9B,gBAAL,CAAsBx4B,KAAtB,IAA+BtN,OAAO,CAACgmC,gBAAvC;AACA14B,2BAAK;AACL,8BAAI,CAACm4B,YAAL;AACD,qBARD;AAUA;;AAED;AAIF,iBArBH,EAqBK,UAAAlkC,KAAK,EAAE;AAGR,0BAAI,CAACtD,MAAL,CAAYsD,KAAZ,CAAkBA,KAAK,CAACA,KAAxB,EAA+B,OAA/B,EAAwC;AACtCC,2BAAO,EAAE;AAD6B,mBAAxC;AAID,iBA5BH;AA+BD,eAjCD,MAiCM,IAAG,KAAK9B,MAAL,CAAYmB,gBAAZ,IAAgCpB,SAAnC,EAA6C;AACjD,oBAAIgF,MAAM,GAAG,KAAK/E,MAAL,CAAYmB,gBAAzB;AACA,qBAAK7C,cAAL,CAAoBqoC,mBAApB,CAAwC5hC,MAAxC,EAAgDzF,SAAhD,CACE,UAAAC,IAAI,EAAE;AACJY,yBAAO,CAACC,GAAR,CAAYb,IAAZ;AACA,sBAAIqO,KAAK,GAAE,CAAX;AACArO,sBAAI,CAACc,OAAL,CAAa,UAAAC,OAAO,EAAI;AACtB,4BAAI,CAACimC,gBAAL,CAAsB7lC,IAAtB,CAA2BJ,OAA3B;;AAEA,4BAAI,CAACkmC,sBAAL,CAA4BlmC,OAAO,CAACuP,EAApC,EAAwCvP,OAAO,CAACyO,KAAhD,EAAuDzO,OAAO,CAACqC,MAA/D,EAAuErC,OAAO,CAACymB,IAA/E,EAAqFzmB,OAAO,CAACyI,IAA7F,EAAmGzI,OAAO,CAACgmC,gBAA3G;;AACA,4BAAI,CAACH,UAAL,CAAgBv4B,KAAhB,IAAyBtN,OAAO,CAACyI,IAAjC;AACA,4BAAI,CAACq9B,gBAAL,CAAsBx4B,KAAtB,IAA+BtN,OAAO,CAACgmC,gBAAvC;AACA14B,yBAAK;AACL,4BAAI,CAACm4B,YAAL;AACD,mBARD;AAUA,0BAAI,CAACQ,gBAAL,CAAsB,iBAAtB,IAA0C,QAAI,CAACvmC,MAAL,CAAY,MAAZ,CAA1C;AACA,0BAAI,CAACumC,gBAAL,CAAsB,kBAAtB,IAA2C,QAAI,CAACvmC,MAAL,CAAY,kBAAZ,CAA3C;AACD,iBAhBH,EAgBK,UAAA6B,KAAK,EAAE;AACR,0BAAI,CAACtD,MAAL,CAAYsD,KAAZ,CAAkBA,KAAK,CAACA,KAAxB,EAA+B,OAA/B,EAAwC;AACtCC,2BAAO,EAAE;AAD6B,mBAAxC;;AAGA3B,yBAAO,CAACC,GAAR,CAAYyB,KAAZ;AAED,iBAtBH;AAyBD,eA3BK,MA2BA,IAAG,KAAK7B,MAAL,CAAYoB,iBAAZ,IAAiCrB,SAApC,EAA8C;AAClD,oBAAIiF,OAAO,GAAG,KAAKhF,MAAL,CAAYoB,iBAA1B;AACA,qBAAK9C,cAAL,CAAoBqoC,mBAApB,CAAwC3hC,OAAxC,EAAiD1F,SAAjD,CACE,UAAAC,IAAI,EAAE;AACJY,yBAAO,CAACC,GAAR,CAAYb,IAAZ;AACA,sBAAIqO,KAAK,GAAG,CAAZ;AACArO,sBAAI,CAACc,OAAL,CAAa,UAAAC,OAAO,EAAI;AACtB,4BAAI,CAACimC,gBAAL,CAAsB7lC,IAAtB,CAA2BJ,OAA3B;;AAEA,4BAAI,CAACkmC,sBAAL,CAA4BlmC,OAAO,CAACuP,EAApC,EAAwCvP,OAAO,CAACyO,KAAhD,EAAuDzO,OAAO,CAACqC,MAA/D,EAAuErC,OAAO,CAACymB,IAA/E,EAAqFzmB,OAAO,CAACyI,IAA7F,EAAmGzI,OAAO,CAACgmC,gBAA3G;;AACA,4BAAI,CAACH,UAAL,CAAgBv4B,KAAhB,IAAyBtN,OAAO,CAACyI,IAAjC;AACA,4BAAI,CAACq9B,gBAAL,CAAsBx4B,KAAtB,IAA+BtN,OAAO,CAACgmC,gBAAvC;AACA14B,yBAAK;AACL,4BAAI,CAACm4B,YAAL;AACD,mBARD;AAUA,0BAAI,CAACQ,gBAAL,CAAsB,iBAAtB,IAA0C,QAAI,CAACvmC,MAAL,CAAY,OAAZ,CAA1C;AACA,0BAAI,CAACumC,gBAAL,CAAsB,mBAAtB,IAA4C,QAAI,CAACvmC,MAAL,CAAY,mBAAZ,CAA5C;AACD,iBAhBH,EAgBK,UAAA6B,KAAK,EAAE;AACR,0BAAI,CAACtD,MAAL,CAAYsD,KAAZ,CAAkBA,KAAK,CAACA,KAAxB,EAA+B,OAA/B,EAAwC;AACtCC,2BAAO,EAAE;AAD6B,mBAAxC;;AAGA3B,yBAAO,CAACC,GAAR,CAAYyB,KAAZ;AAED,iBAtBH;AAwBD,eA1BK,MA0BA,IAAG,KAAK7B,MAAL,CAAYoJ,qBAAZ,IAAqCrJ,SAAxC,EAAkD;AACtD,oBAAIyvB,MAAM,GAAG,KAAKxvB,MAAL,CAAYoJ,qBAAzB;AACA,qBAAK9K,cAAL,CAAoBqoC,mBAApB,CAAwCnX,MAAxC,EAAgDlwB,SAAhD,CACE,UAAAC,IAAI,EAAE;AACJY,yBAAO,CAACC,GAAR,CAAYb,IAAZ;AACA,sBAAIqO,KAAK,GAAG,CAAZ;AACArO,sBAAI,CAACc,OAAL,CAAa,UAAAC,OAAO,EAAI;AACtB,4BAAI,CAACimC,gBAAL,CAAsB7lC,IAAtB,CAA2BJ,OAA3B;;AAEA,4BAAI,CAACkmC,sBAAL,CAA4BlmC,OAAO,CAACuP,EAApC,EAAwCvP,OAAO,CAACyO,KAAhD,EAAuDzO,OAAO,CAACqC,MAA/D,EAAuErC,OAAO,CAACymB,IAA/E,EAAqFzmB,OAAO,CAACyI,IAA7F,EAAmGzI,OAAO,CAACgmC,gBAA3G;;AACA,4BAAI,CAACH,UAAL,CAAgBv4B,KAAhB,IAAyBtN,OAAO,CAACyI,IAAjC;AACA,4BAAI,CAACq9B,gBAAL,CAAsBx4B,KAAtB,IAA+BtN,OAAO,CAACgmC,gBAAvC;AACA14B,yBAAK;AACL,4BAAI,CAACm4B,YAAL;AACD,mBARD;AAUA,0BAAI,CAACQ,gBAAL,CAAsB,iBAAtB,IAA0C,QAAI,CAACvmC,MAAL,CAAY,WAAZ,CAA1C;AACA,0BAAI,CAACumC,gBAAL,CAAsB,uBAAtB,IAAgD,QAAI,CAACvmC,MAAL,CAAY,uBAAZ,CAAhD;AACD,iBAhBH,EAgBK,UAAA6B,KAAK,EAAE;AACR,0BAAI,CAACtD,MAAL,CAAYsD,KAAZ,CAAkBA,KAAK,CAACA,KAAxB,EAA+B,OAA/B,EAAwC;AACtCC,2BAAO,EAAE;AAD6B,mBAAxC;;AAGA3B,yBAAO,CAACC,GAAR,CAAYyB,KAAZ;AAED,iBAtBH;AAwBD;AACF,aA1HD,MA0HK;AACH,mBAAKkkC,YAAL,GAAoB,CAApB;AACA,mBAAKQ,gBAAL,GAAwB,IAAxB;AACD;AACF;;;wCAEatiC,G,EAAK3C,K,EAAO2jB,K,EAAO;AAC/B,iBAAK3mB,cAAL,CAAoB0wB,aAApB,CAAkC,IAAlC;AACA,iBAAKvwB,OAAL,CAAa2F,IAAb,CAAkB;AAAEH,iBAAG,EAAHA,GAAF;AAAO3C,mBAAK,EAALA,KAAP;AAAe2jB,mBAAK,EAALA;AAAf,aAAlB;AACD;;;oCAGS1lB,I,EAAI;AAAA;;AACZ,gBAAIm7B,SAAS,GAAG,EAAhB;AACAv6B,mBAAO,CAACC,GAAR,CAAYb,IAAZ;;AACA,gBAAGA,IAAI,IAAIQ,SAAX,EAAqB;AAEnB,kBAAIsvB,QAAQ,GAAG9vB,IAAI,CAAC0E,GAAL,CAASE,MAAT,CAAgB9C,KAA/B;AACA,kBAAIvB,YAAJ;AACA,kBAAIwB,KAAK,GAAG/B,IAAI,SAAJ,IAAAA,IAAI,WAAJ,GAAI,MAAJ,GAAAA,IAAI,CAAE+B,KAAlB;;AAEA,kBAAG+tB,QAAQ,CAACntB,MAAT,GAAkB,CAArB,EAAuB;AACrB,oBAAIH,QAAQ,GAAG,EAAf;AACA24B,yBAAS,GAAGn7B,IAAI,CAAC,OAAD,CAAhB;;AACA,oBAAGm7B,SAAS,IAAI,MAAhB,EAAuB;AACrB34B,0BAAQ,GAAG,KAAKokC,UAAL,CAAgB7kC,KAAhB,CAAX;AACD,iBAFD,MAEM,IAAGo5B,SAAS,IAAI,OAAhB,EAAwB;AAC5B34B,0BAAQ,GAAG,KAAKqkC,gBAAL,CAAsB9kC,KAAtB,CAAX;AACD,iBAPoB,CASrB;;;AAIA,oBAAIsL,YAAY,GAAG,KAAK25B,gBAAL,CAAsBjlC,KAAtB,EAA6BslC,wBAAhD;AAGA,oBAAIllC,UAAJ;;AAEA,oBAAGK,QAAQ,IAAI,EAAf,EAAkB;AAChBL,4BAAU,GAAG;AACXf,wBAAI,EAAE,cADK;AAEXgB,4BAAQ,EAAE+4B,SAFC;AAGXr5B,yBAAK,EAAGguB;AAHG,mBAAb;AAKD,iBAND,MAMK;AACH3tB,4BAAU,GAAG;AACXf,wBAAI,EAAE,cADK;AAEXgB,4BAAQ,EAAE+4B,SAFC;AAGXr5B,yBAAK,EAAGguB,QAHG;AAIXvvB,gCAAY,EAAGiC;AAJJ,mBAAb;AAMD;;AAID5B,uBAAO,CAACC,GAAR,CAAY,KAAKsmC,WAAL,CAAiBpkC,EAAjB,CAAoBhB,KAApB,CAAZ;AACAnB,uBAAO,CAACC,GAAR,CAAYsB,UAAZ;AAEA,qBAAKpD,cAAL,CAAoBsD,qBAApB,CAA0CgL,YAA1C,EAAwDlL,UAAxD,EAAoEpC,SAApE,CACE,UAAAC,IAAI,EAAG;AACLY,yBAAO,CAACC,GAAR,CAAYb,IAAZ;;AACA,0BAAI,CAACjB,cAAL,CAAoB0wB,aAApB,CAAkC,KAAlC;;AACA,0BAAI,CAAC1wB,cAAL,CAAoBwG,aAApB,CAAkC,QAAI,CAAC9E,MAAvC;;AACA,0BAAI,CAACzB,MAAL,CAAYuY,OAAZ,CAAoB,2BAApB,EAAiD,EAAjD,EAAqD;AACnDhV,2BAAO,EAAE;AAD0C,mBAArD;AAGD,iBARH,EAQI,UAAAD,KAAK,EAAG;AACR1B,yBAAO,CAACC,GAAR,CAAYyB,KAAZ;;AACA,0BAAI,CAACvD,cAAL,CAAoBwG,aAApB,CAAkC;AAAEgD,8BAAU,EAAEjG,KAAK,CAACA,KAAN,CAAYU;AAA1B,mBAAlC;;AACA,0BAAI,CAACjE,cAAL,CAAoB0wB,aAApB,CAAkC,KAAlC;;AACA,sBAAGntB,KAAK,CAACgB,MAAN,IAAgB,GAAnB,EAAuB;AACrB,4BAAI,CAACtE,MAAL,CAAYuY,OAAZ,CAAoB,2BAApB,EAAiD,EAAjD,EAAqD;AACnDhV,6BAAO,EAAE;AAD0C,qBAArD;AAGD,mBAJD,MAIK;AACH,4BAAI,CAACvD,MAAL,CAAYsD,KAAZ,CAAkBA,KAAK,CAACA,KAAxB,EAA+B,OAA/B,EAAwC;AACtCC,6BAAO,EAAE;AAD6B,qBAAxC;AAGD;AAEF,iBAtBH;;AA0BA,oBAAG44B,SAAS,IAAI,MAAhB,EAAuB;AACrB,uBAAKyL,UAAL,CAAgB7kC,KAAhB,IAAyB+tB,QAAzB;AACD,iBAFD,MAEM,IAAGqL,SAAS,IAAI,OAAhB,EAAwB;AAC5B,uBAAK0L,gBAAL,CAAsB9kC,KAAtB,IAA+B+tB,QAA/B;AACD;AAEF,eAtED,MAsEK;AACH,qBAAK/wB,cAAL,CAAoB0wB,aAApB,CAAkC,KAAlC;AACA,qBAAKzwB,MAAL,CAAYsD,KAAZ,CAAkB,6BAAlB,EAAiD,OAAjD,EAA0D;AACxDC,yBAAO,EAAE;AAD+C,iBAA1D;AAGD;AAEF;AACF;;;qCAEUR,K,EAAO;AAAA;;AAChB,iBAAKolC,WAAL,GAAmB,KAAKT,gBAAL,CAAsBhmC,GAAtB,CAA0B,cAA1B,CAAnB;AACA,iBAAK8lC,YAAL;AAEA,gBAAIn5B,YAAY,GAAG,KAAK25B,gBAAL,CAAsBjlC,KAAtB,EAA6BslC,wBAAhD;AAEA,iBAAKtoC,cAAL,CAAoBuoC,sBAApB,CAA2Cj6B,YAA3C,EAAyDtN,SAAzD,CACE,UAAAC,IAAI,EAAI;AACNY,qBAAO,CAACC,GAAR,CAAYb,IAAZ;;AACA,sBAAI,CAACjB,cAAL,CAAoBwG,aAApB,CAAkC,QAAI,CAAC9E,MAAvC;;AACA,sBAAI,CAACzB,MAAL,CAAYuY,OAAZ,CAAoB,iBAApB,EAAuC,EAAvC,EAA2C;AACzChV,uBAAO,EAAE;AADgC,eAA3C;AAGD,aAPH,EAOK,UAAAD,KAAK,EAAI;AACV;AACA,sBAAI,CAACvD,cAAL,CAAoBwG,aAApB,CAAkC;AAAEgD,0BAAU,EAAEjG,KAAK,CAACA,KAAN,CAAYU;AAA1B,eAAlC;;AACA,sBAAI,CAAChE,MAAL,CAAYsD,KAAZ,CAAkBA,KAAK,CAACA,KAAxB,EAA+B,OAA/B,EAAwC;AACtCC,uBAAO,EAAE;AAD6B,eAAxC;AAGD,aAbH;AAiBA,iBAAK4kC,WAAL,CAAiBxhC,QAAjB,CAA0B5D,KAA1B;AACA,iBAAKilC,gBAAL,CAAsBthC,MAAtB,CAA6B3D,KAA7B,EAAoC,CAApC;AACA,iBAAK6kC,UAAL,CAAgBlhC,MAAhB,CAAuB3D,KAAvB,EAA8B,CAA9B;AACA,iBAAK8kC,gBAAL,CAAsBnhC,MAAtB,CAA6B3D,KAA7B,EAAoC,CAApC;AAED;;;iDAGsB4C,C,EAAI23B,C,EAAI9tB,C,EAAI+4B,C,EAAI5W,C,EAAI7M,C,EAAE;AAC3C,iBAAKqjB,WAAL,GAAmB,KAAKT,gBAAL,CAAsBhmC,GAAtB,CAA0B,cAA1B,CAAnB;;AACA,gBAAG47B,CAAC,IAAI97B,SAAR,EAAkB;AAChB,mBAAK2mC,WAAL,CAAiBhmC,IAAjB,CAAsB,KAAKwlC,kBAAL,EAAtB;AACD,aAFD,MAEK;AACH,mBAAKQ,WAAL,CAAiBhmC,IAAjB,CAAsB,KAAKwlC,kBAAL,CAAwBhiC,CAAxB,EAA2B23B,CAA3B,EAA8B9tB,CAA9B,EAAiC+4B,CAAjC,EAAoC5W,CAApC,EAAuC7M,CAAvC,CAAtB;AACD;AACF;;;6CAEkBnf,C,EAAI23B,C,EAAI9tB,C,EAAI+4B,C,EAAI5W,C,EAAI7M,C,EAAE;AACvC,gBAAGwY,CAAC,IAAI97B,SAAR,EAAkB;AAChB,qBAAO,KAAK1B,WAAL,CAAiBc,KAAjB,CAAuB;AAC5B0Q,kBAAE,EAAG,IAAI,0DAAJ,CAAgB,IAAhB,CADuB;AAE5Bd,qBAAK,EAAE,IAAI,0DAAJ,CAAgB,IAAhB,CAFqB;AAG5BpM,sBAAM,EAAE,IAAI,0DAAJ,CAAgB,IAAhB,CAHoB;AAI5BokB,oBAAI,EAAE,IAAI,0DAAJ,CAAgB,IAAhB,CAJsB;AAK5Bhe,oBAAI,EAAE,IAAI,0DAAJ,CAAgB,IAAhB,CALsB;AAM5Bu9B,gCAAgB,EAAE,IAAI,0DAAJ,CAAgB,IAAhB;AANU,eAAvB,CAAP;AAQD,aATD,MASK;AACH,qBAAO,KAAKjoC,WAAL,CAAiBc,KAAjB,CAAuB;AAC5B0Q,kBAAE,EAAE,IAAI,0DAAJ,CAAgB3L,CAAhB,CADwB;AAE5B6K,qBAAK,EAAE,IAAI,0DAAJ,CAAgB8sB,CAAhB,CAFqB;AAG5Bl5B,sBAAM,EAAE,IAAI,0DAAJ,CAAgBoL,CAAhB,CAHoB;AAI5BgZ,oBAAI,EAAE,IAAI,0DAAJ,CAAgB+f,CAAhB,CAJsB;AAK5B/9B,oBAAI,EAAE,IAAI,0DAAJ,CAAgBmnB,CAAhB,CALsB;AAM5BoW,gCAAgB,EAAE,IAAI,0DAAJ,CAAgBjjB,CAAhB;AANU,eAAvB,CAAP;AAQD;AACF;;;kDAEuBxT,E,EAAI3L,C,EAAC;AAAA;;AAC3B/D,mBAAO,CAACC,GAAR,CAAYyP,EAAZ;AACA,iBAAKm2B,cAAL,CAAoB9hC,CAApB,IAAyB,IAAzB;AACA,gBAAI9B,KAAK,GAAG,EAAZ;;AACA,gBAAG,KAAKpC,MAAL,CAAYe,wBAAZ,IAAwChB,SAAxC,IACE,KAAKC,MAAL,CAAYoB,iBAAZ,IAAiCrB,SADtC,EACgD;AAC5CI,qBAAO,CAACC,GAAR,CAAY,CAAZ;AACAgC,mBAAK,GAAG,KAAKpC,MAAL,CAAYe,wBAApB;AACH,aAJD,MAIM,IAAG,KAAKf,MAAL,CAAYmB,gBAAZ,IAAgCpB,SAAnC,EAA6C;AACjDqC,mBAAK,GAAG,KAAKpC,MAAL,CAAYmB,gBAApB;AACAhB,qBAAO,CAACC,GAAR,CAAY,CAAZ;AACD,aAHK,MAGA,IAAG,KAAKJ,MAAL,CAAYoB,iBAAZ,IAAiCrB,SAApC,EAA8C;AAClDqC,mBAAK,GAAG,KAAKpC,MAAL,CAAYoB,iBAApB;AACAjB,qBAAO,CAACC,GAAR,CAAY,CAAZ;AACD,aAHK,MAGA,IAAG,KAAKJ,MAAL,CAAYoJ,qBAAZ,IAAqCrJ,SAAxC,EAAkD;AACtDqC,mBAAK,GAAG,KAAKpC,MAAL,CAAYoJ,qBAApB;AACD;;AAED,iBAAK9K,cAAL,CAAoByoC,2BAApB,CAAgD3kC,KAAhD,EAAuDyN,EAAvD,EAA2DxQ,IAA3D,CAAgE,oEAAa,GAAb,CAAhE,EAAmFC,SAAnF,CACE,UAAAC,IAAI,EAAI;AACNY,qBAAO,CAACC,GAAR,CAAYb,IAAZ;AACA,sBAAI,CAACymC,cAAL,CAAoB9hC,CAApB,IAAyB,KAAzB;AACD,aAJH,EAII,UAAArC,KAAK,EAAE;AACP1B,qBAAO,CAACC,GAAR,CAAYyB,KAAZ;;AACA,kBAAGA,KAAK,CAACgB,MAAN,IAAgB,GAAnB,EAAuB;AACrB,wBAAI,CAACvE,cAAL,CAAoBwG,aAApB,CAAkC;AAAEgD,4BAAU,EAAEjG,KAAK,CAACA,KAAN,CAAYU;AAA1B,iBAAlC;;AACA,wBAAI,CAAChE,MAAL,CAAYuY,OAAZ,CAAoB,YAAUjH,EAAV,GAAa,eAAjC,EAAkD,EAAlD;AACD;;AACD,sBAAI,CAACm2B,cAAL,CAAoB9hC,CAApB,IAAyB,KAAzB;AACD,aAXH;AAaD;;;;;;;yBAnXU4hC,0B,EAA0B,+K,EAAA,+K,EAAA,2H,EAAA,yH;AAAA,O;;;cAA1BA,0B;AAA0B,+C;AAAA;AAAA;AAAA,S;AAAA,sF;AAAA,iB;AAAA,e;AAAA,+tE;AAAA;AAAA;ACxBvC;;AACI;;AACI;;AACI;;AAEI;;AACA;;AACA;;AACJ;;AACJ;;AACJ;;AACA;;AAEI;;AACI;;AAEA;;AA8DA;;AAEJ;;AACJ;;AACJ;;;;AA5EuB;;AAAA;;AAU2B;;AAAA;;;;;;;;;;wEDQrCA,0B,EAA0B;gBALtC,uDAKsC;iBAL5B;AACT7nC,oBAAQ,EAAE,wBADD;AAETC,uBAAW,EAAE,qCAFJ;AAGTC,qBAAS,EAAE,CAAC,qCAAD;AAHF,W;AAK4B,U;;;;;;;;;;;AAE5BsoC,oBAAU,EAAE,CAAF;kBAAlB;AAAkB,WAAE;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AEzBhB,eAASO,WAAT,CAAqB/pB,QAArB,EAA8C;AAAA;;AACjD,eAAO,YAAqB;AACxB,iBAAO,IAAI7M,OAAJ,CAAY,UAAOC,OAAP,EAAgBC,MAAhB;AAAA,mBAA2B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAE1C,6BAAM2M,QAAQ,CAACgqB,IAAT,CAAc;AAChB/I,8BAAM,EAAE;AACJlX,6BAAG,EAAE,sEAAY/J,QAAZ,CAAqBC,MADtB;AAEJE,+BAAK,EAAE,sEAAYH,QAAZ,CAAqBG,KAFxB;AAGJC,kCAAQ,EAAE,sEAAYJ,QAAZ,CAAqBI;AAH3B,yBADQ;AAMlB6pB,gDAAwB,EAAE,KANR;AAOlBC,+CAAuB,EAAE,IAPP;AAQlBC,oCAAY,EAAE,QARI;AASlBC,mCAAW,EAAE;AACXC,gCAAM,EAAE,WADG;AAEXC,0CAAgB,EAAE;AAFP,yBATK;AAalBC,0CAAkB,EAAE,CAClB,gBADkB;AAbF,uBAAd,CAAN;;AAF0C;AAmB1Cn3B,6BAAO;AAnBmC;AAAA;;AAAA;AAAA;AAAA;AAqB1CC,4BAAM,aAAN;;AArB0C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,eAA3B;AAAA,WAAZ,CAAP;AAwBD,SAzBH;AA0BH;;;;;;;;;;;;;;;;;AC9BD;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;;;;;ACYW;;AAA8E;AAAA;;AAAA;;AAAA;AAAA,aAAsB,OAAtB,EAAsB;AAAA;;AAAA;;AAAA;AAAA,WAAtB;;AAAoF;;;;;;AAAzH,wGAAoC,SAApC,EAAoC,eAApC,EAAoC,QAApC,EAAoC,mBAApC;;;;UDYvCm3B,kB;AA6EX,oCAAoBnpC,cAApB,EAAmEC,MAAnE,EAA0F;AAAA;;AAAtE,eAAAD,cAAA,GAAAA,cAAA;AAA+C,eAAAC,MAAA,GAAAA,MAAA;AAzE3D,eAAAE,OAAA,GAA4B,IAAI,4CAAJ,EAA5B;AAWR,eAAAipC,YAAA,GAAoC;AAClCC,oBAAQ,EAAE,IADwB;AAElCC,sBAAU,EAAE,IAFsB;AAGlC3rB,kBAAM,EAAE,MAH0B;AAIlC4rB,qBAAS,EAAE,GAJuB;AAKlCC,qBAAS,EAAE,OALuB;AAMlCC,iBAAK,EAAE,MAN2B;AAOlCC,oBAAQ,EAAE,GAPwB;AAQlCC,qBAAS,EAAE,KARuB;AASlCC,yBAAa,EAAE,IATmB;AAUlCC,uBAAW,EAAE,IAVqB;AAWlCC,uBAAW,EAAE,oBAXqB;AAYlCC,qCAAyB,EAAE,EAZO;AAalCC,yBAAa,EAAE,CACb;AACErwB,kBAAI,EAAE,OADR;AAEE,uBAAO;AAFT,aADa,EAKb;AACEA,kBAAI,EAAE,SADR;AAEE,uBAAO;AAFT,aALa,EASb;AACEA,kBAAI,EAAE,WADR;AAEE,uBAAO,WAFT;AAGE6f,iBAAG,EAAE;AAHP,aATa,CAbmB;AA4BlCyQ,qBAAS,EAAE,UA5BuB;AA6BlCC,iCAAqB,EAAE,KA7BW;AA8BlCC,oBAAQ,EAAE,IA9BwB;AA+BlCC,2BAAe,EAAE,KA/BiB;AAgClCC,gCAAoB,EAAE,CACpB,CACE,MADF,EAEE,MAFF,EAGE,eAHF,EAIE,aAJF,EAKE,eALF,EAME,cANF,EAOE,aAPF,EAQE,QARF,EASE,SATF,EAUE,qBAVF,EAWE,mBAXF,EAYE,SAZF,EAaE,UAbF,CADoB,EAgBpB,CACE,UADF,EAEE,WAFF,EAGE,iBAHF,EAIE,eAJF,EAKE,MALF,EAME,QANF,EAOE,aAPF,EAQE,aARF,EASE,sBATF,EAUE,kBAVF,CAhBoB;AAhCY,WAApC;AA8D6F;;;;mCAtEpFpoB,K,EAAsB;AAC7B;AACAA,iBAAK,CAAChI,cAAN;AACAgI,iBAAK,CAACsU,eAAN;AACA;AACD;;;qCAmEO;AAAA;;AACN,iBAAK6S,YAAL,CAAkBC,QAAlB,GAA6B,KAA7B;AAGA,iBAAKlpC,OAAL,CAAaY,IAAb,CAAkB,oEAAa,IAAb,CAAlB,EAAsCC,SAAtC,CACE,UAAAspC,OAAO,EAAI;AACT,kBAAG,QAAI,CAACC,QAAL,IAAiB,IAApB,EAAyB;AACvB,wBAAI,CAACvqC,cAAL,CAAoB0wB,aAApB,CAAkC,IAAlC;;AACA7uB,uBAAO,CAACC,GAAR,CAAY,QAAI,CAACJ,MAAjB,EAFuB,CAGvB;;AACA,oBAAG,QAAI,CAACA,MAAL,CAAYe,wBAAZ,IAAwChB,SAA3C,EAAqD;AACnD,sBAAIqC,KAAK,GAAG,QAAI,CAACpC,MAAL,CAAYe,wBAAxB;AACA,sBAAIW,UAAU,GAAG;AACfC,4BAAQ,EAAG,MADI;AAEfN,yBAAK,EAAGunC;AAFO,mBAAjB;;AAIA,0BAAI,CAACtqC,cAAL,CAAoB6Y,kBAApB,CAAuC/U,KAAvC,EAA8CV,UAA9C,EAA0DpC,SAA1D,CACE,UAAAC,IAAI,EAAI;AACN;AACAA,wBAAI,CAAC,SAAD,CAAJ,GAAkB,CAAlB;AACAA,wBAAI,CAAC,UAAD,CAAJ,GAAmBqpC,OAAnB;;AACA,4BAAI,CAACtqC,cAAL,CAAoB0nB,gBAApB,CAAqCzmB,IAArC;;AACA,4BAAI,CAACjB,cAAL,CAAoB0wB,aAApB,CAAkC,KAAlC;;AACA,4BAAI,CAACzwB,MAAL,CAAYuY,OAAZ,CAAoB,cAApB,EAAoC,EAApC,EAAwC;AACtChV,6BAAO,EAAE;AAD6B,qBAAxC;AAGD,mBAVH,EAWE,UAAAD,KAAK,EAAI;AACP;AACA,wBAAMtC,IAAI,GAAG,QAAI,CAACS,MAAlB;AACAT,wBAAI,CAAC,SAAD,CAAJ,GAAkB,CAAlB;AACAA,wBAAI,CAAC,UAAD,CAAJ,GAAmBqpC,OAAnB;;AACA,4BAAI,CAACtqC,cAAL,CAAoB0nB,gBAApB,CAAqCzmB,IAArC;;AACA,4BAAI,CAACjB,cAAL,CAAoBwG,aAApB,CAAkC;AAACgD,gCAAU,EAAGjG,KAAK,CAACA,KAAN,CAAYU;AAA1B,qBAAlC;;AACA,4BAAI,CAACjE,cAAL,CAAoB0wB,aAApB,CAAkC,KAAlC;;AACA,4BAAI,CAACzwB,MAAL,CAAYuY,OAAZ,CAAoB,cAApB,EAAoC,EAApC,EAAwC;AACtChV,6BAAO,EAAE;AAD6B,qBAAxC;AAGD,mBAtBH;AAwBD,iBA9BD,MA8BM,IAAG,QAAI,CAAC9B,MAAL,CAAYmB,gBAAZ,IAAgCpB,SAAnC,EAA6C;AACjD,sBAAIgF,MAAM,GAAG,QAAI,CAAC/E,MAAL,CAAYmB,gBAAzB;AACA,sBAAIO,UAAU,GAAG;AACfC,4BAAQ,EAAG,MADI;AAEfN,yBAAK,EAAGunC;AAFO,mBAAjB;;AAIA,0BAAI,CAACtqC,cAAL,CAAoBiZ,UAApB,CAA+BxS,MAA/B,EAAuCrD,UAAvC,EAAmDpC,SAAnD,CACE,UAAAC,IAAI,EAAI;AACN;AACAA,wBAAI,CAAC,SAAD,CAAJ,GAAkB,CAAlB;AACAA,wBAAI,CAAC,UAAD,CAAJ,GAAmBqpC,OAAnB;;AACA,4BAAI,CAACtqC,cAAL,CAAoB0nB,gBAApB,CAAqCzmB,IAArC;;AACA,4BAAI,CAACjB,cAAL,CAAoB0wB,aAApB,CAAkC,KAAlC;;AACA,4BAAI,CAACzwB,MAAL,CAAYuY,OAAZ,CAAoB,cAApB,EAAoC,EAApC,EAAwC;AACtChV,6BAAO,EAAE;AAD6B,qBAAxC;AAGD,mBAVH,EAWE,UAAAD,KAAK,EAAI;AACP;AACA,wBAAMtC,IAAI,GAAG,QAAI,CAACS,MAAlB;AACAT,wBAAI,CAAC,SAAD,CAAJ,GAAkB,CAAlB;AACAA,wBAAI,CAAC,UAAD,CAAJ,GAAmBqpC,OAAnB;;AACA,4BAAI,CAACtqC,cAAL,CAAoB0nB,gBAApB,CAAqCzmB,IAArC;;AACA,4BAAI,CAACjB,cAAL,CAAoBwG,aAApB,CAAkC;AAACgD,gCAAU,EAAGjG,KAAK,CAACA,KAAN,CAAYU;AAA1B,qBAAlC;;AACA,4BAAI,CAACjE,cAAL,CAAoB0wB,aAApB,CAAkC,KAAlC;;AACA,4BAAI,CAACzwB,MAAL,CAAYuY,OAAZ,CAAoB,cAApB,EAAoC,EAApC,EAAwC;AACtChV,6BAAO,EAAE;AAD6B,qBAAxC;AAGD,mBAtBH;AAwBD,iBA9BK,MA8BA,IAAG,QAAI,CAAC9B,MAAL,CAAYoB,iBAAZ,IAAiCrB,SAApC,EAA8C;AAClD,sBAAIiF,OAAO,GAAG,QAAI,CAAChF,MAAL,CAAYoB,iBAA1B;AACA,sBAAIM,UAAU,GAAG;AACfC,4BAAQ,EAAG,MADI;AAEfN,yBAAK,EAAGunC;AAFO,mBAAjB;;AAIA,0BAAI,CAACtqC,cAAL,CAAoBwqC,WAApB,CAAgC9jC,OAAhC,EAAyCtD,UAAzC,EAAqDpC,SAArD,CACE,UAAAC,IAAI,EAAI;AACN;AACAA,wBAAI,CAAC,SAAD,CAAJ,GAAkB,CAAlB;AACAA,wBAAI,CAAC,UAAD,CAAJ,GAAmBqpC,OAAnB;;AACA,4BAAI,CAACtqC,cAAL,CAAoB0nB,gBAApB,CAAqCzmB,IAArC;;AACA,4BAAI,CAACjB,cAAL,CAAoB0wB,aAApB,CAAkC,KAAlC;;AACA,4BAAI,CAACzwB,MAAL,CAAYuY,OAAZ,CAAoB,cAApB,EAAoC,EAApC,EAAwC;AACtChV,6BAAO,EAAE;AAD6B,qBAAxC;AAGD,mBAVH,EAWE,UAAAD,KAAK,EAAI;AACP;AACA,wBAAMtC,IAAI,GAAG,QAAI,CAACS,MAAlB;AACAT,wBAAI,CAAC,SAAD,CAAJ,GAAkB,CAAlB;AACAA,wBAAI,CAAC,UAAD,CAAJ,GAAmBqpC,OAAnB;;AACA,4BAAI,CAACtqC,cAAL,CAAoB0nB,gBAApB,CAAqCzmB,IAArC;;AACA,4BAAI,CAACjB,cAAL,CAAoBwG,aAApB,CAAkC;AAACgD,gCAAU,EAAGjG,KAAK,CAACA,KAAN,CAAYU;AAA1B,qBAAlC;;AACA,4BAAI,CAACjE,cAAL,CAAoB0wB,aAApB,CAAkC,KAAlC;;AACA,4BAAI,CAACzwB,MAAL,CAAYuY,OAAZ,CAAoB,cAApB,EAAoC,EAApC,EAAwC;AACtChV,6BAAO,EAAE;AAD6B,qBAAxC;AAGD,mBAtBH;AAwBD,iBA9BK,MA8BA,IAAG,QAAI,CAAC9B,MAAL,CAAYoJ,qBAAZ,IAAqCrJ,SAAxC,EAAkD;AACtD,sBAAIyvB,MAAM,GAAG,QAAI,CAACxvB,MAAL,CAAYoJ,qBAAzB;AACA,sBAAI1H,UAAU,GAAG;AACfC,4BAAQ,EAAG,MADI;AAEfN,yBAAK,EAAGunC;AAFO,mBAAjB;;AAIA,0BAAI,CAACtqC,cAAL,CAAoB6wB,eAApB,CAAoCK,MAApC,EAA4C9tB,UAA5C,EAAwDpC,SAAxD,CACE,UAAAC,IAAI,EAAI;AACN;AACAA,wBAAI,CAAC,SAAD,CAAJ,GAAkB,CAAlB;AACAA,wBAAI,CAAC,UAAD,CAAJ,GAAmBqpC,OAAnB;;AACA,4BAAI,CAACtqC,cAAL,CAAoB0nB,gBAApB,CAAqCzmB,IAArC;;AACA,4BAAI,CAACjB,cAAL,CAAoB0wB,aAApB,CAAkC,KAAlC;;AACA,4BAAI,CAACzwB,MAAL,CAAYuY,OAAZ,CAAoB,cAApB,EAAoC,EAApC,EAAwC;AACtChV,6BAAO,EAAE;AAD6B,qBAAxC;AAGD,mBAVH,EAWE,UAAAD,KAAK,EAAI;AACP;AACA,wBAAMtC,IAAI,GAAG,QAAI,CAACS,MAAlB;AACAT,wBAAI,CAAC,SAAD,CAAJ,GAAkB,CAAlB;AACAA,wBAAI,CAAC,UAAD,CAAJ,GAAmBqpC,OAAnB;;AACA,4BAAI,CAACtqC,cAAL,CAAoB0nB,gBAApB,CAAqCzmB,IAArC;;AACA,4BAAI,CAACjB,cAAL,CAAoBwG,aAApB,CAAkC;AAACgD,gCAAU,EAAGjG,KAAK,CAACA,KAAN,CAAYU;AAA1B,qBAAlC;;AACA,4BAAI,CAACjE,cAAL,CAAoB0wB,aAApB,CAAkC,KAAlC;;AACA,4BAAI,CAACzwB,MAAL,CAAYuY,OAAZ,CAAoB,cAApB,EAAoC,EAApC,EAAwC;AACtChV,6BAAO,EAAE;AAD6B,qBAAxC;AAGD,mBAtBH;AAwBD;AACF;AACF,aAhIH;AAmIA,iBAAKxD,cAAL,CAAoBqM,UAApB,CAA+BrL,SAA/B,CACE,UAAAC,IAAI,EAAI;AACN,sBAAI,CAACmoC,YAAL,CAAkBC,QAAlB,GAA6B,KAA7B;AACA,sBAAI,CAACkB,QAAL,GAAgB,IAAhB;AACA,sBAAI,CAAC7oC,MAAL,GAAc,IAAd;AACD,aALH;AAOD;;;sCAEWL,O,EAAwB;AAEhC,gBAAGA,OAAO,CAACkpC,QAAR,CAAiB/oC,YAAjB,IAAiC,IAApC,EAAyC;AACvC,mBAAK4nC,YAAL,CAAkBC,QAAlB,GAA6B,KAA7B;AACA,mBAAKkB,QAAL,GAAgB,IAAhB;AACA,mBAAK7oC,MAAL,GAAc,IAAd;AACD,aAJD,MAIK;AACH,mBAAK0nC,YAAL,CAAkBC,QAAlB,GAA6B,IAA7B;AACA,mBAAKkB,QAAL,GAAgBlpC,OAAO,CAACkpC,QAAR,CAAiB/oC,YAAjB,CAA8BiJ,IAA9C;AACA,mBAAK/I,MAAL,GAAcL,OAAO,CAACkpC,QAAR,CAAiB/oC,YAA/B;AACD;AAED;;AAEH;;;oCAESmE,G,EAAG;AACX,gBAAGA,GAAG,CAACoQ,GAAJ,IAAW,SAAX,IAAwBpQ,GAAG,CAACoQ,GAAJ,IAAW,KAAnC,IAA4CpQ,GAAG,CAACoQ,GAAJ,IAAW,OAA1D,EAAkE;AAChE,mBAAK5V,OAAL,CAAa2F,IAAb,CAAkB,KAAKykC,QAAvB;AACD;AAEF;;;;;;;yBApPUpB,kB,EAAkB,+K,EAAA,yH;AAAA,O;;;cAAlBA,kB;AAAkB,uC;AAAA;AAAA;;qBAAlB,oB;AAAgB,a,EAAA,K,EAAA,6D;;;;;;;;;;;;ACtB7B;;AACI;;AACI;;AACI;;AACI;;AAAU;;AACd;;AACJ;;AACJ;;AACA;;AACI;;AACG;;AACH;;AACJ;;AACJ;;;;AAH4B;;AAAA;;;;;;;;;wEDYfA,kB,EAAkB;gBAL9B,uDAK8B;iBALpB;AACTxpC,oBAAQ,EAAE,gBADD;AAETC,uBAAW,EAAE,6BAFJ;AAGTC,qBAAS,EAAE,CAAC,6BAAD;AAHF,W;AAKoB,U;;;;;;;AAEpB0qC,kBAAQ,EAAE,CAAF;kBAAhB;AAAgB,WAAE,C;AAKnBE,kBAAQ;kBADP,0DACO;mBADM,c,EAAgB,CAAC,QAAD,C;AACtB;;;;;;;;;;;;;;;;;;;AElBV;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;;UAQaC,qB;AA0CX,uCAAoBpxB,IAApB,EAA8C7G,IAA9C,EAAiE;AAAA;;AAA7C,eAAA6G,IAAA,GAAAA,IAAA;AAA0B,eAAA7G,IAAA,GAAAA,IAAA;AAxCtC,eAAAk4B,aAAA,GAAyC,IAAI,oDAAJ,CAAoB,IAApB,CAAzC;AACA,eAAAC,qBAAA,GAAiD,IAAI,oDAAJ,CAAoB,IAApB,CAAjD;AACR;;AACQ,eAAAC,cAAA,GAA0C,IAAI,oDAAJ,CAAoB,IAApB,CAA1C;AACA,eAAAC,eAAA,GAA2C,IAAI,oDAAJ,CAAoB,IAApB,CAA3C;AACA,eAAAC,sBAAA,GAA+C,IAAI,oDAAJ,CAAoB,IAApB,CAA/C;AACA,eAAAC,iBAAA,GAA0C,IAAI,oDAAJ,CAAoB,IAApB,CAA1C;AACA,eAAAC,iBAAA,GAA6C,IAAI,oDAAJ,CAAoB,IAApB,CAA7C;AACA,eAAAC,cAAA,GAA0C,IAAI,oDAAJ,CAAoB,IAApB,CAA1C;AACA,eAAAC,qBAAA,GAAiD,IAAI,oDAAJ,CAAoB,IAApB,CAAjD;AACA,eAAAC,iBAAA,GAA8C,IAAI,oDAAJ,CAAoB,IAApB,CAA9C;AACA,eAAAC,cAAA,GAA2C,IAAI,oDAAJ,CAAoB,IAApB,CAA3C;AACA,eAAAC,iBAAA,GAA8C,IAAI,oDAAJ,CAAoB,IAApB,CAA9C;AACA,eAAAC,iBAAA,GAA+C,IAAI,oDAAJ,CAAoB,IAApB,CAA/C;AACA,eAAAC,wBAAA,GAAsD,IAAI,oDAAJ,CAAoB,IAApB,CAAtD;AACA,eAAAC,kBAAA,GAA+C,IAAI,oDAAJ,CAAoB,IAApB,CAA/C;AACA,eAAAC,WAAA,GAAwC,IAAI,oDAAJ,CAAoB,IAApB,CAAxC;AAEA,eAAAhtB,OAAA,GAAU,8BAAV;AACA,eAAA3I,GAAA,GAAM,aAAN;AACA,eAAA1R,MAAA,GAAS,EAAT;AAER,eAAA6Y,SAAA,GAAY,KAAKytB,aAAL,CAAmBzuB,YAAnB,EAAZ;AACA,eAAA6B,WAAA,GAAc,KAAK2tB,WAAL,CAAiBxvB,YAAjB,EAAd;AACA,eAAA6W,qBAAA,GAAwB,KAAK6X,qBAAL,CAA2B1uB,YAA3B,EAAxB;AACA;;AACA,eAAAgjB,cAAA,GAAiB,KAAK2L,cAAL,CAAoB3uB,YAApB,EAAjB;AACA,eAAAiX,eAAA,GAAkB,KAAK2X,eAAL,CAAqB5uB,YAArB,EAAlB;AACA,eAAA7P,UAAA,GAAa,KAAK0+B,sBAAL,CAA4B7uB,YAA5B,EAAb;AACA,eAAA1P,UAAA,GAAa,KAAKw+B,iBAAL,CAAuB9uB,YAAvB,EAAb;AACA,eAAA8B,iBAAA,GAAoB,KAAKitB,iBAAL,CAAuB/uB,YAAvB,EAApB;AACA,eAAAoL,cAAA,GAAiB,KAAK4jB,cAAL,CAAoBhvB,YAApB,EAAjB;AACA,eAAA0P,iBAAA,GAAoB,KAAKuf,qBAAL,CAA2BjvB,YAA3B,EAApB;AACA,eAAAqqB,iBAAA,GAAoB,KAAK6E,iBAAL,CAAuBlvB,YAAvB,EAApB;AACA,eAAA1O,cAAA,GAAiB,KAAK69B,cAAL,CAAoBnvB,YAApB,EAAjB;AACA,eAAAyvB,iBAAA,GAAoB,KAAKL,iBAAL,CAAuBpvB,YAAvB,EAApB;AACA,eAAAsW,iBAAA,GAAoB,KAAK+Y,iBAAL,CAAuBrvB,YAAvB,EAApB;AACA,eAAA4W,wBAAA,GAA2B,KAAK0Y,wBAAL,CAA8BtvB,YAA9B,EAA3B;AACA,eAAAuf,kBAAA,GAAqB,KAAKgQ,kBAAL,CAAwBvvB,YAAxB,EAArB;AAEoE;;;;wCAEtDxa,M,EAAgB;AAC5B,iBAAKipC,aAAL,CAAmB7kC,IAAnB,CAAwBpE,MAAxB;AACD;;;0CAEeA,M,EAAc;AAC5B,iBAAKgqC,WAAL,CAAiB5lC,IAAjB,CAAsBpE,MAAtB;AACD;;;iDAEsBA,M,EAAgB;AACrC,iBAAKkpC,qBAAL,CAA2B9kC,IAA3B,CAAgCpE,MAAhC;AACD;;;4CAEiB8a,M,EAAa;AAC7B,iBAAKivB,kBAAL,CAAwB3lC,IAAxB,CAA6B0W,MAA7B;AACD;AAED;;;;;;yCAIe9a,M,EAAgB;AAC7B,iBAAKopC,eAAL,CAAqBhlC,IAArB,CAA0BpE,MAA1B;AACD;;;6CAEkBA,M,EAAgB;AACjC,iBAAKmpC,cAAL,CAAoB/kC,IAApB,CAAyBpE,MAAzB;AACD;;;wCAEa8M,O,EAAgB;AAC5B,iBAAKu8B,sBAAL,CAA4BjlC,IAA5B,CAAiC0I,OAAjC;AACD;;;+CAEoBA,O,EAAa;AAChC,iBAAKw8B,iBAAL,CAAuBllC,IAAvB,CAA4B0I,OAA5B;AACD;;;wCAEa9M,M,EAAgB;AAC5B,iBAAKupC,iBAAL,CAAuBnlC,IAAvB,CAA4BpE,MAA5B;AACD;;;wCAEa8a,M,EAAgB;AAC5B,iBAAK0uB,cAAL,CAAoBplC,IAApB,CAAyB0W,MAAzB;AACD;;;6CAEe;AACd,iBAAK2uB,qBAAL,CAA2BrlC,IAA3B,CAAgC,IAAhC;AACD;;;2CAEgBpE,M,EAAc;AAC7B,iBAAK0pC,iBAAL,CAAuBtlC,IAAvB,CAA4BpE,MAA5B;AACD;;;wCAEaA,M,EAAc;AAC1B,iBAAK2pC,cAAL,CAAoBvlC,IAApB,CAAyBpE,MAAzB;AACD;;;2CAEgBA,M,EAAc;AAC7B,iBAAK4pC,iBAAL,CAAuBxlC,IAAvB,CAA4BpE,MAA5B;AACD;;;2CAEgB+a,I,EAAa;AAC5B,iBAAK8uB,iBAAL,CAAuBzlC,IAAvB,CAA4B2W,IAA5B;AACD;;;kDAEuBA,I,EAAa;AACnC,iBAAK+uB,wBAAL,CAA8B1lC,IAA9B,CAAmC2W,IAAnC;AACD,W,CAED;;;;gDACsBrZ,U,EAAe;AACnC,mBAAO,KAAKkW,IAAL,CAAUoD,IAAV,CAAe,KAAKgC,OAAL,GAAe,6BAA9B,EAA6Dtb,UAA7D,CAAP;AACD,W,CAED;;;;+CACqBA,U,EAAe;AAClC,mBAAO,KAAKkW,IAAL,CAAUoD,IAAV,CAAe,KAAKgC,OAAL,GAAe,4BAA9B,EAA4Dtb,UAA5D,CAAP;AACD,W,CAED;;;;sCACYA,U,EAAe;AACzB,mBAAO,KAAKkW,IAAL,CAAUoD,IAAV,CAAe,KAAKgC,OAAL,GAAe,oBAA9B,EAAoDtb,UAApD,CAAP;AACD,W,CAED;;;;8CACoB2N,Q,EAAgB;AAClC,mBAAO,KAAKuI,IAAL,CAAU3X,GAAV,CAAc,KAAK+c,OAAL,GAAe,eAAf,GAAiC3N,QAAjC,GAA4C,WAA1D,CAAP;AACD,W,CAED;;;;0CACgBA,Q,EAAgB;AAC9B,mBAAO,KAAKuI,IAAL,CAAU3X,GAAV,CAAc,KAAK+c,OAAL,GAAe,eAAf,GAAiC3N,QAAjC,GAA4C,oBAA5C,GAAmE,KAAKgF,GAAxE,GAA8E,cAA5F,CAAP;AACD,W,CAED;;;;wDAC8BjS,K,EAAe8nC,Q,EAAgB;AAC3D,mBAAO,KAAKtyB,IAAL,CAAU3X,GAAV,CAAc,KAAK+c,OAAL,GAAe,eAAf,GAAiC5a,KAAjC,GAAyC,0BAAzC,GAAsE,KAAKiS,GAA3E,GAAiF,YAAjF,GAAgG61B,QAAhG,GAA2G,EAAzH,CAAP;AACD,W,CAGD;;;;2CACiB76B,Q,EAAgB;AAC/B,mBAAO,KAAKuI,IAAL,CAAU3X,GAAV,CAAc,KAAK+c,OAAL,GAAe,eAAf,GAAiC3N,QAAjC,GAA4C,QAA1D,CAAP;AACD,W,CAGD;;;;sCACYtK,M,EAAgBolC,M,EAAc;AACxC,mBAAO,KAAKvyB,IAAL,CAAU3X,GAAV,CAAc,KAAK+c,OAAL,GAAe,eAAf,GAAiCjY,MAAjC,GAA0C,YAA1C,GAAyD,KAAKsP,GAA9D,GAAoE,UAApE,GAAiF81B,MAA/F,CAAP;AACD,W,CAGD;;;;uCACanlC,O,EAAiBmlC,M,EAAc;AAC1C,mBAAO,KAAKvyB,IAAL,CAAU3X,GAAV,CAAc,KAAK+c,OAAL,GAAe,eAAf,GAAiChY,OAAjC,GAA2C,oBAA3C,GAAkE,KAAKqP,GAAvE,GAA6E,UAA7E,GAA0F81B,MAAxG,CAAP;AACD,W,CAED;;;;wCACc96B,Q,EAAgB;AAC5B,mBAAO,KAAKuI,IAAL,CAAU3X,GAAV,CAAc,KAAK+c,OAAL,GAAe,eAAf,GAAiC3N,QAAjC,GAA4C,SAA1D,CAAP;AACD,W,CAED;;;;gDACmB;AACjB,mBAAO,KAAKuI,IAAL,CAAU3X,GAAV,CAAc,KAAK+c,OAAL,GAAe,wBAA7B,CAAP;AACD,W,CAED;;;;yCACY;AACV,mBAAO,KAAKpF,IAAL,CAAU3X,GAAV,CAAc,KAAK+c,OAAL,GAAe,mCAAf,GAAqD,KAAK3I,GAA1D,GAAgE,EAA9E,CAAP;AACD,W,CAED;;;;qCACQ;AACN,mBAAO,KAAKuD,IAAL,CAAU3X,GAAV,CAAc,KAAK+c,OAAL,GAAe,+BAAf,GAAiD,KAAK3I,GAAtD,GAA4D,EAA1E,CAAP;AACD,W,CAED;;;;uCACU;AACR,mBAAO,KAAKuD,IAAL,CAAU3X,GAAV,CAAc,KAAK+c,OAAL,GAAe,iCAAf,GAAmD,KAAK3I,GAAxD,GAA8D,EAA5E,CAAP;AACD,W,CAED;;;;mCACM;AACJ,mBAAO,KAAKuD,IAAL,CAAU3X,GAAV,CAAc,KAAK+c,OAAL,GAAe,6BAAf,GAA+C,KAAK3I,GAApD,GAA0D,EAAxE,CAAP;AACD,W,CAED;;;;sCACS;AACP,mBAAO,KAAKuD,IAAL,CAAU3X,GAAV,CAAc,KAAK+c,OAAL,GAAe,gCAAf,GAAkD,KAAK3I,GAAvD,GAA6D,EAA3E,CAAP;AACD,W,CAGD;;;;4CACe;AACb,iBAAK1R,MAAL,GAAc,KAAKoO,IAAL,CAAUq5B,WAAV,EAAd;AACA,mBAAO,KAAKxyB,IAAL,CAAU3X,GAAV,CAAc,KAAK+c,OAAL,GAAe,oCAAf,GAAsD,KAAK3I,GAA3D,GAAiE,UAAjE,GAA8E,KAAK1R,MAAjG,CAAP;AACD,W,CAGD;;;;6CACmBP,K,EAAK;AACtB,mBAAO,KAAKwV,IAAL,CAAU3X,GAAV,CAAc,KAAK+c,OAAL,GAAe,iBAAf,GAAmC5a,KAAnC,GAA2C,oBAA3C,GAAkE,KAAKiS,GAArF,CAAP;AACD,W,CAED;;;;qCACWjS,K,EAAK;AACd,mBAAO,KAAKwV,IAAL,CAAU3X,GAAV,CAAc,KAAK+c,OAAL,GAAe,iBAAf,GAAmC5a,KAAnC,GAA2C,YAA3C,GAA0D,KAAKiS,GAA7E,CAAP;AACD,W,CAED;;;;sCACYjS,K,EAAK;AACf,mBAAO,KAAKwV,IAAL,CAAU3X,GAAV,CAAc,KAAK+c,OAAL,GAAe,iBAAf,GAAmC5a,KAAnC,GAA2C,oBAA3C,GAAkE,KAAKiS,GAArF,CAAP;AACD,W,CAED;;;;yCACeoW,M,EAAM;AACnB,mBAAO,KAAK7S,IAAL,CAAU3X,GAAV,CAAc,KAAK+c,OAAL,GAAe,iBAAf,GAAmCyN,MAAnC,GAA4C,gBAA5C,GAA+D,KAAKpW,GAAlF,CAAP;AACD,W,CAED;;;;mDACyBjS,K,EAAOV,U,EAAU;AACxC,mBAAO,KAAKkW,IAAL,CAAUoD,IAAV,CAAe,KAAKgC,OAAL,GAAe,iBAAf,GAAmC5a,KAAnC,GAA2C,gBAA3C,GAA8D,KAAKiS,GAAlF,EAAuF3S,UAAvF,CAAP;AACD,W,CAED;;;;6CACmBU,K,EAAOV,U,EAAU;AAClC,iBAAKiB,MAAL,GAAc,KAAKoO,IAAL,CAAUq5B,WAAV,EAAd;AACA,mBAAO,KAAKxyB,IAAL,CAAUoD,IAAV,CAAe,KAAKgC,OAAL,GAAe,iBAAf,GAAmC5a,KAAnC,GAA2C,oBAA3C,GAAkE,KAAKiS,GAAvE,GAA6E,QAA7E,GAAwF,KAAK1R,MAA5G,EAAoHjB,UAApH,CAAP;AACD,W,CAGD;;;;mDACyBU,K,EAAOV,U,EAAU;AACxC,iBAAKiB,MAAL,GAAc,KAAKoO,IAAL,CAAUq5B,WAAV,EAAd;AACA,mBAAO,KAAKxyB,IAAL,CAAUoD,IAAV,CAAe,KAAKgC,OAAL,GAAe,iBAAf,GAAmC5a,KAAnC,GAA2C,0BAA3C,GAAwE,KAAKiS,GAA7E,GAAmF,QAAnF,GAA8F,KAAK1R,MAAlH,EAA0HjB,UAA1H,CAAP;AACD,W,CAED;;;;gDACsBU,K,EAAOV,U,EAAY;AACvC,iBAAKiB,MAAL,GAAc,KAAKoO,IAAL,CAAUq5B,WAAV,EAAd;AACA,mBAAO,KAAKxyB,IAAL,CAAUoD,IAAV,CAAe,KAAKgC,OAAL,GAAe,iBAAf,GAAmC5a,KAAnC,GAA2C,uBAA3C,GAAqE,KAAKiS,GAA1E,GAAgF,QAAhF,GAA2F,KAAK1R,MAA/G,EAAuHjB,UAAvH,CAAP;AACD,W,CAED;;;;qCACWqD,M,EAAQrD,U,EAAU;AAC3B,iBAAKiB,MAAL,GAAc,KAAKoO,IAAL,CAAUq5B,WAAV,EAAd;AACA,mBAAO,KAAKxyB,IAAL,CAAUoD,IAAV,CAAe,KAAKgC,OAAL,GAAe,iBAAf,GAAmCjY,MAAnC,GAA4C,YAA5C,GAA2D,KAAKsP,GAAhE,GAAsE,QAAtE,GAAiF,KAAK1R,MAArG,EAA6GjB,UAA7G,CAAP;AACD,W,CAED;;;;sCACYsD,O,EAAStD,U,EAAU;AAC7B,iBAAKiB,MAAL,GAAc,KAAKoO,IAAL,CAAUq5B,WAAV,EAAd;AACA,mBAAO,KAAKxyB,IAAL,CAAUoD,IAAV,CAAe,KAAKgC,OAAL,GAAe,iBAAf,GAAmChY,OAAnC,GAA6C,oBAA7C,GAAoE,KAAKqP,GAAzE,GAA+E,QAA/E,GAA0F,KAAK1R,MAA9G,EAAsHjB,UAAtH,CAAP;AACD,W,CAED;;;;8CACiB;AACf,mBAAO,KAAKkW,IAAL,CAAU3X,GAAV,CAAc,KAAK+c,OAAL,GAAe,yBAA7B,CAAP;AACD,W,CAED;;;;yCACY;AACV,mBAAO,KAAKpF,IAAL,CAAU3X,GAAV,CAAc,KAAK+c,OAAL,GAAe,uBAA7B,CAAP;AACD,W,CAED;;;;6CACgB;AACd,mBAAO,KAAKpF,IAAL,CAAU3X,GAAV,CAAc,KAAK+c,OAAL,GAAe,+BAA7B,CAAP;AACD,W,CAGD;;;;wCACc5a,K,EAAK;AACjB,iBAAKO,MAAL,GAAc,KAAKoO,IAAL,CAAUq5B,WAAV,EAAd;AACA,mBAAO,KAAKxyB,IAAL,CAAU3X,GAAV,CAAc,KAAK+c,OAAL,GAAe,uCAAf,GAAwD5a,KAAxD,GAA+D,OAA/D,GAAyE,KAAKiS,GAA9E,GAAoF,UAApF,GAAiG,KAAK1R,MAApH,CAAP;AACD,W,CAED;;;;yCACeP,K,EAAK;AAClB,iBAAKO,MAAL,GAAc,KAAKoO,IAAL,CAAUq5B,WAAV,EAAd;AACA,mBAAO,KAAKxyB,IAAL,CAAU3X,GAAV,CAAc,KAAK+c,OAAL,GAAe,+CAAf,GAAgE5a,KAAhE,GAAuE,OAAvE,GAAiF,KAAKiS,GAAtF,GAA4F,UAA5F,GAAyG,KAAK1R,MAA5H,CAAP;AACD,W,CAED;;;;4CACkB8nB,M,EAAM;AACtB,iBAAK9nB,MAAL,GAAc,KAAKoO,IAAL,CAAUq5B,WAAV,EAAd;AACA,mBAAO,KAAKxyB,IAAL,CAAU3X,GAAV,CAAc,KAAK+c,OAAL,GAAe,gCAAf,GAAkD,KAAK3I,GAAvD,GAA6D,QAA7D,GAAuEoW,MAAvE,GAA+E,UAA/E,GAA4F,KAAK9nB,MAA/G,CAAP;AACD,W,CAED;;;;yCACe8nB,M,EAAQ/oB,U,EAAU;AAC/B,iBAAKiB,MAAL,GAAc,KAAKoO,IAAL,CAAUq5B,WAAV,EAAd;AACA,mBAAO,KAAKxyB,IAAL,CAAUoD,IAAV,CAAe,KAAKgC,OAAL,GAAe,iBAAf,GAAmCyN,MAAnC,GAA4C,gBAA5C,GAA+D,KAAKpW,GAApE,GAA0E,UAA1E,GAAuF,KAAK1R,MAA3G,EAAmHjB,UAAnH,CAAP;AACD,W,CAGD;;;;8CACoB2N,Q,EAAkB;AACpC,mBAAO,KAAKuI,IAAL,CAAU3X,GAAV,CAAc,KAAK+c,OAAL,GAAe,eAAf,GAAiC3N,QAAjC,GAA4C,4BAA1D,CAAP;AACD;;;8CAEmBA,Q,EAAmB3N,U,EAAU;AAC/C,iBAAKiB,MAAL,GAAc,KAAKoO,IAAL,CAAUq5B,WAAV,EAAd;AACA,mBAAO,KAAKxyB,IAAL,CAAUoD,IAAV,CAAe,KAAKgC,OAAL,GAAe,gDAAf,GAAkE3N,QAAlE,GAA6E,OAA7E,GAAsF,KAAKgF,GAA3F,GAAgG,UAAhG,GAA2G,KAAK1R,MAAhH,GAAuH,EAAtI,EAA0IjB,UAA1I,CAAP;AACD;;;iDAEsB2N,Q,EAAkB;AACvC,mBAAO,KAAKuI,IAAL,CAAU3X,GAAV,CAAc,KAAK+c,OAAL,GAAe,iBAAf,GAAmC3N,QAAnC,GAA8C,+BAA5D,CAAP;AACD;;;sDAE2BjN,K,EAAgBioC,O,EAAkB;AAC5D,mBAAO,KAAKzyB,IAAL,CAAUoD,IAAV,CAAe,KAAKgC,OAAL,GAAe,yDAAf,GAAyE5a,KAAzE,GAA+E,uCAA/E,GAAuHioC,OAAtI,EAA8I,EAA9I,CAAP;AACD,W,CAGD;;;;6CACmBh7B,Q,EAAkB;AACnC,iBAAK1M,MAAL,GAAc,KAAKoO,IAAL,CAAUq5B,WAAV,EAAd;AACA,mBAAO,KAAKxyB,IAAL,CAAU3X,GAAV,CAAc,KAAK+c,OAAL,GAAe,4CAAf,GAA4D3N,QAA5D,GAAqE,OAArE,GAA6E,KAAKgF,GAAlF,GAAsF,UAAtF,GAAiG,KAAK1R,MAAtG,GAA6G,EAA3H,CAAP;AACD;;;yCAEc0M,Q,EAAkB;AAC/B,mBAAO,KAAKuI,IAAL,CAAU3X,GAAV,CAAc,KAAK+c,OAAL,GAAe,eAAf,GAAiC3N,QAAjC,GAA4C,mBAA5C,GAAgE,KAAKgF,GAArE,GAAyE,EAAvF,CAAP;AACD;;;2CAEgBhF,Q,EAAkB;AACjC,mBAAO,KAAKuI,IAAL,CAAU3X,GAAV,CAAc,KAAK+c,OAAL,GAAe,eAAf,GAAiC3N,QAAjC,GAA4C,iBAA5C,GAA8D,KAAKgF,GAAnE,GAAuE,EAArF,CAAP;AACD;;;0CAEemb,M,EAAQ9tB,U,EAAU;AAChC,iBAAKiB,MAAL,GAAc,KAAKoO,IAAL,CAAUq5B,WAAV,EAAd;AACA,mBAAO,KAAKxyB,IAAL,CAAUoD,IAAV,CAAe,KAAKgC,OAAL,GAAe,iBAAf,GAAmCwS,MAAnC,GAA4C,iBAA5C,GAAgE,KAAKnb,GAArE,GAA2E,UAA3E,GAAwF,KAAK1R,MAA5G,EAAoHjB,UAApH,CAAP;AACD;;;2CAEgB4oC,W,EAAqBC,Y,EAAuB;AAC3D,mBAAO,KAAK3yB,IAAL,CAAU3X,GAAV,CAAc,KAAK+c,OAAL,GAAe,mDAAf,GAAmEstB,WAAnE,GAA+E,eAA/E,GAA+FC,YAA/F,GAA4G,OAA5G,GAAoH,KAAKl2B,GAAzH,GAA6H,UAA7H,GAAwI,KAAK1R,MAA7I,GAAoJ,EAAlK,CAAP;AACD;;;0CAEe4nC,Y,EAAuB;AACrC,iBAAK5nC,MAAL,GAAc,KAAKoO,IAAL,CAAUq5B,WAAV,EAAd;AACA,mBAAO,KAAKxyB,IAAL,CAAU3X,GAAV,CAAc,KAAK+c,OAAL,GAAe,iBAAf,GAAiCutB,YAAjC,GAA8C,iBAA9C,GAAgE,KAAKl2B,GAArE,GAAyE,UAAzE,GAAoF,KAAK1R,MAAzF,GAAgG,EAA9G,CAAP;AACD;;;wCAEa6sB,M,EAAQ9tB,U,EAAU;AAC9B,iBAAKiB,MAAL,GAAc,KAAKoO,IAAL,CAAUq5B,WAAV,EAAd;AACA,mBAAO,KAAKxyB,IAAL,CAAUoD,IAAV,CAAe,KAAKgC,OAAL,GAAe,iBAAf,GAAmCwS,MAAnC,GAA4C,wBAA5C,GAAuE,KAAKnb,GAA5E,GAAkF,UAAlF,GAA+F,KAAK1R,MAAnH,EAA2HjB,UAA3H,CAAP;AACD;;;wCAEa8oC,e,EAAyB;AACrC,iBAAK7nC,MAAL,GAAc,KAAKoO,IAAL,CAAUq5B,WAAV,EAAd;AACA,mBAAO,KAAKxyB,IAAL,CAAU3X,GAAV,CAAc,KAAK+c,OAAL,GAAe,iBAAf,GAAiCwtB,eAAjC,GAAiD,wBAAjD,GAA0E,KAAKn2B,GAA/E,GAAmF,UAAnF,GAA8F,KAAK1R,MAAnG,GAA0G,EAAxH,CAAP;AACD,W,CAED;;;;sCACY8nC,e,EAAyB;AACnC,mBAAO,KAAK7yB,IAAL,CAAU3X,GAAV,CAAc,KAAK+c,OAAL,GAAe,eAAf,GAA+BytB,eAA/B,GAA+C,gBAA/C,GAAgE,KAAKp2B,GAAnF,CAAP;AACD;;;0CAEeo2B,e,EAAyB;AACvC,mBAAO,KAAK7yB,IAAL,CAAU3X,GAAV,CAAc,KAAK+c,OAAL,GAAe,eAAf,GAA+BytB,eAA/B,GAA+C,oBAA/C,GAAoE,KAAKp2B,GAAvF,CAAP;AACD;;;0CAEeo2B,e,EAA0B;AACxC,iBAAK9nC,MAAL,GAAc,KAAKoO,IAAL,CAAUq5B,WAAV,EAAd;AACA,mBAAO,KAAKxyB,IAAL,CAAU3X,GAAV,CAAc,KAAK+c,OAAL,GAAe,gCAAf,GAAgDytB,eAAhD,GAAgE,OAAhE,GAAwE,KAAKp2B,GAA7E,GAAiF,UAAjF,GAA4F,KAAK1R,MAAjG,GAAwG,EAAtH,CAAP;AACD;;;0CAEe8G,M,EAAiB;AAC/B,mBAAO,KAAKmO,IAAL,CAAU3X,GAAV,CAAc,KAAK+c,OAAL,GAAe,iBAAf,GAAiCvT,MAAjC,GAAwC,iBAAxC,GAA0D,KAAK4K,GAA7E,CAAP;AACD;;;2CAEgB5K,M,EAAgB;AAC/B,mBAAO,KAAKmO,IAAL,CAAU3X,GAAV,CAAc,KAAK+c,OAAL,GAAe,eAAf,GAA+BvT,MAA/B,GAAsC,qBAAtC,GAA4D,KAAK4K,GAA/E,CAAP;AACD;;;;;;;yBAzXU20B,qB,EAAqB,uH,EAAA,sH;AAAA,O;;;eAArBA,qB;AAAqB,iBAArBA,qBAAqB,K;AAAA,oBAFpB;;;;;wEAEDA,qB,EAAqB;gBAHjC,wDAGiC;iBAHtB;AACV7wB,sBAAU,EAAE;AADF,W;AAGsB,U;;;;;;;;;;;;;;;;;;;;;;;;ACrBlC;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;;UAOauyB,yB;AAEX,6CAAc;AAAA;AAAG;;;;qCAET,CACP;;;;;;;yBALUA,yB;AAAyB,O;;;cAAzBA,yB;AAAyB,8C;AAAA,gB;AAAA,e;AAAA;AAAA;ACPtC;;AAAG;;AAAwB;;;;;;;;wEDOdA,yB,EAAyB;gBALrC,uDAKqC;iBAL3B;AACTzsC,oBAAQ,EAAE,uBADD;AAETC,uBAAW,EAAE,oCAFJ;AAGTC,qBAAS,EAAE,CAAC,oCAAD;AAHF,W;AAK2B,U;;;;;;;;;;;;;;;;;;;;AEPtC;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;;;AC2BY;;AACI;;AACI;;AACJ;;AACJ;;;;UDTCwsC,e;AAKX,iCAAoBC,KAApB,EAAmD3M,MAAnD,EAA2ElhB,eAA3E,EAAqHhM,IAArH,EAAyI;AAAA;;AAAA;;AAArH,eAAA65B,KAAA,GAAAA,KAAA;AAA+B,eAAA3M,MAAA,GAAAA,MAAA;AAAwB,eAAAlhB,eAAA,GAAAA,eAAA;AAA0C,eAAAhM,IAAA,GAAAA,IAAA;;AAwBrH,eAAA85B,OAAA,GAAU,YAAM;AACd,gBAAIC,KAAK,GAAG,SAARA,KAAQ,CAACxqC,OAAD;AAAA,qBAAaA,OAAO,IAAI,OAAxB;AAAA,aAAZ;;AACAH,mBAAO,CAACC,GAAR,CAAY,QAAI,CAAC2qC,SAAL,CAAezjB,IAAf,CAAoBwjB,KAApB,CAAZ;AACD,WAHD;AAxB4I;;;;qCAEpI;AAAA;;AACN,gBAAG,KAAK/5B,IAAL,CAAUyC,aAAV,GAA0B,oBAA1B,KAAmDzT,SAAtD,EAAgE;AAC9D,mBAAKqe,QAAL,GAAgB,KAAKrN,IAAL,CAAUyC,aAAV,GAA0B,oBAA1B,CAAhB;AACD;;AAED,iBAAKu3B,SAAL,GAAiB,KAAKh6B,IAAL,CAAUi6B,kBAAV,EAAjB;AAEA,iBAAKjuB,eAAL,CAAqBkuB,eAArB,CAAqC3rC,SAArC,CAA+C;AAC7C8E,kBAAI,EAAE,cAACI,CAAD,EAAO;AACX;AACA,oBAAIA,CAAC,CAAC7D,IAAF,IAAU,mEAAkBuqC,cAAhC,EAAgD;AAC9C,0BAAI,CAACnuB,eAAL,CAAqBouB,WAArB,CAAiC,EAAjC;AACD;AACF;AAN4C,aAA/C;AAQD;;;mCAEK;AACJ,iBAAKp6B,IAAL,CAAU6M,MAAV;AACD;;;;;;;yBA1BU+sB,e,EAAe,+H,EAAA,uH,EAAA,iI,EAAA,+I;AAAA,O;;;cAAfA,e;AAAe,mC;AAAA,iB;AAAA,e;AAAA,msD;AAAA;AAAA;ACpB5B;;AAEI;;AAEI;;AACJ;;AACA;;AACI;;AACI;;AACI;;AACI;;AACJ;;AACA;;AACI;;AAAyB;;AAA8C;AAAA,qBAAS,IAAA/sB,MAAA,EAAT;AAAiB,aAAjB;;AAAmB;;AAAK;;AAAM;;AACzG;;AACJ;;AACJ;;AACJ;;AACA;;AACI;;AAMI;;AAKA;;AACI;;AACI;;AACJ;;AACJ;;AACA;;AACI;;AACI;;AACJ;;AACJ;;AACJ;;AACA;;AACI;;AACI;;AAEI;;AAGJ;;AACA;;AACI;;AAAiC;AAAA,qBAAS,IAAAA,MAAA,EAAT;AAAiB,aAAjB;;AAAmB;;AAAmD;;AAAM;;AACjH;;AACJ;;AACA;;AACI;;AAGI;;AACJ;;AACJ;;AACJ;;AACJ;;AACJ;;;;AArCkC;;AAAA;;AAoBd;;AAAA;;;;;;;;;wEDzBP+sB,e,EAAe;gBAL3B,uDAK2B;iBALjB;AACT1sC,oBAAQ,EAAE,YADD;AAETC,uBAAW,EAAE,yBAFJ;AAGTC,qBAAS,EAAE,CAAC,yBAAD;AAHF,W;AAKiB,U;;;;;;;;;;;;;;;;;;;;;;;;;;;;AEtB5B;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;;;;;;;ACOoB;;AACI;;;;AACJ;;;;;;AADI;;AAAA;;;;;;AAIJ;;AACI;;AAAsB;;AAAU;;AACpC;;;;;;;;AA0DR;;AACI;;AACI;;AAC+C;;AAA4B;;AAC3E;;AACI;;AACI;AAAA;;AAAA;;AAAA;;AAAA;;AAAA,qCAA2B,KAA3B;AAAkC,mBAAF,8DAAE;AAAF,WAAhC;;AAA4F;;AAAM;;AACtG;;AACI;AAAA;;AAAA;;AAAA;;AAAA;;AAAA,qCAA2B,IAA3B;AAAiC,mBAAF,8DAAE;AAAF,WAA/B;;AAA2F;;AACvF;;AACZ;;AACJ;;AACA;;AAAqB;AAAA;;AAAA;;AAAA;;AAAA;;AAAA;AAAA;;AAArB;;AAIJ;;;;;;AAXe;;AAAA;;AAEA;;AAAA;;AAOP;;AAAA;;;;;;AAsCwB;;;;;;AACA;;;;;;AAMA;;;;;;AACA;;;;;;AAMA;;;;;;AACA;;;;;;AAYJ;;AACI;;AACJ;;;;;;AACA;;AACI;;AACJ;;;;;;AACA;;AACI;;AACJ;;;;;;AACA;;AACI;;AACJ;;;;;;AACA;;AACI;;AACJ;;;;;;AACA;;AACI;;AACJ;;;;;;AACA;;AACkE;;;;AAA8B;;;;;;AAA9B;;AAAA;;;;;;AAClE;;AACwB;;AAAQ;;;;;;AAKxB;;AACI;;;;;;AACJ;;;;;;AADI;;AAAA;;;;;;AAFR;;AACI;;AAGJ;;;;;;AAHW;;AAAA;;;;;;AAIX;;AACwB;;AAAO;;;;;;AAPnC;;AACI;;AAKA;;AAEJ;;;;;;;;AAP6B;;AAAA;;AAKlB;;AAAA;;;;;;AAGX;;AAAkE;;AAAO;;;;;;AAGzE;;AACI;;;;AACJ;;;;;;AADI;;AAAA;;;;;;AAEJ;;AAEI;;AACJ;;;;;;;;AA7CR;;AAAsC;AAAA;;AAAA;;AAAA;;AAAA;AAAA;;AAElC;;AACI;;AAGA;;AAGA;;AAGA;;AAGA;;AAGA;;AAGA;;AAEA;;AAEJ;;AACA;;AACI;;AASA;;AACJ;;AACA;;AACI;;AAGA;;AAIJ;;AACJ;;;;;;AA9CI;;AAEW;;AAAA;;AAGA;;AAAA;;AAGA;;AAAA;;AAGA;;AAAA;;AAGA;;AAAA;;AAGA;;AAAA;;AAIF;;AAAA;;AACE;;AAAA;;AAIA;;AAAA;;AASA;;AAAA;;AAGA;;AAAA;;AAGA;;AAAA;;;;;;AAQvB;;AAA8E;;AAAU;;;;;;AASpF;;AACI;;AACI;;AACI;;AACI;;AACJ;;AACJ;;AACJ;;AACJ;;;;;;AAEI;;AAEI;;AACI;;AACI;;AACJ;;AACJ;;AACA;;AACI;;AACI;;;;AACJ;;AACJ;;AACJ;;;;;;AAHY;;AAAA;;;;;;AAIZ;;AAEI;;AACI;;AACI;;AACJ;;AACJ;;AACA;;AACI;;AACI;;;;AACJ;;AACJ;;AACJ;;;;;;AAHY;;AAAA;;;;;;AAaA;;AACI;;AACI;;;;;;AACJ;;AACJ;;;;;;AAFQ;;AAAA;;;;;;AAHZ;;AACI;;AAKJ;;;;;;AALW;;AAAA;;;;;;AATnB;;AAEI;;AACI;;AACI;;AACJ;;AACJ;;AACA;;AACI;;AAOJ;;AACJ;;;;;;AARiC;;AAAA;;;;;;AAkBrB;;AACI;;AACI;;;;;;AACJ;;AACJ;;;;;;AAFQ;;AAAA;;;;;;AAHZ;;AACI;;AAKJ;;;;;;AALW;;AAAA;;;;;;AATnB;;AAEI;;AACI;;AACI;;AACJ;;AACJ;;AACA;;AACI;;AAOJ;;AACJ;;;;;;AARiC;;AAAA;;;;;;AASjC;;AAEI;;AACI;;AACI;;AACJ;;AACJ;;AACA;;AACI;;AACI;;;;AACJ;;AACJ;;AACJ;;;;;;AAHY;;AAAA;;;;;;AAIZ;;AAEI;;AACI;;AACI;;AACJ;;AACJ;;AACA;;AACI;;AACI;;;;AACJ;;AACJ;;AACJ;;;;;;AAHY;;AAAA;;;;;;AAIZ;;AAEI;;AACI;;AACI;;AACJ;;AACJ;;AACA;;AACI;;AACI;;;;AACJ;;AACJ;;AACJ;;;;;;AAHY;;AAAA;;;;;;AAIZ;;AAEI;;AACI;;AACI;;AACJ;;AACJ;;AACA;;AACI;;AACI;;;;AACJ;;AACJ;;AACJ;;;;;;AAHY;;AAAA;;;;;;AAIZ;;AAEI;;AACI;;AACI;;AACJ;;AACJ;;AACA;;AACI;;AACI;;;;AACJ;;AACJ;;AACJ;;;;;;AAHY;;AAAA;;;;;;AAIZ;;AAEI;;AACI;;AACI;;AACJ;;AACJ;;AACA;;AACI;;AACI;;;;AACJ;;AACJ;;AACJ;;;;;;AAHY;;AAAA;;;;;;AAIZ;;AAEI;;AACI;;AACI;;AACJ;;AACJ;;AACA;;AACI;;AACI;;;;AACJ;;AACJ;;AACJ;;;;;;AAHY;;AAAA;;;;;;AAIZ;;AAEI;;AACI;;AACI;;AACoB;;AAAI;;AAAwC;;AACpE;;AACJ;;AACA;;AACI;;AACI;;;;AACJ;;AACJ;;AACJ;;;;;;AATkC;;AAAA;;AAMtB;;AAAA;;;;;;AAIZ;;AAEI;;AACI;;AACI;;AACJ;;AACJ;;AACA;;AACI;;AACI;;;;AACJ;;AACJ;;AACJ;;;;;;AAHY;;AAAA;;;;;;AAIZ;;AAEI;;AACI;;AACI;;AAAuE;;AACnE;;AAAwC;;AAChD;;AACJ;;AACA;;AACI;;AACI;;AACJ;;AACJ;;AACJ;;;;;;AATkC;;AAAA;;AAMtB;;AAAA;;;;;;AAIZ;;AAEI;;AACI;;AACI;;AACJ;;AACJ;;AACA;;AACI;;AACI;;AACJ;;AACJ;;AACJ;;;;;;AAHY;;AAAA;;;;;;AA1MhB;;AACI;;AAaA;;AAaA;;AAiBA;;AAiBA;;AAaA;;AAaA;;AAaA;;AAaA;;AAaA;;AAaA;;AAaA;;AAcA;;AAaA;;AAcA;;AAaJ;;;;;;AA5MS;;AAAA;;AAaA;;AAAA;;AAaA;;AAAA;;AAiBA;;AAAA;;AAiBA;;AAAA;;AAaA;;AAAA;;AAaA;;AAAA;;AAaA;;AAAA;;AAaA;;AAAA;;AAaA;;AAAA;;AAaA;;AAAA;;AAaA;;AAAA;;AAcA;;AAAA;;AAaA;;AAAA;;AAcA;;AAAA;;;;;;AAkBT;;AACI;;AACI;;AACI;;AACI;;AACJ;;AACJ;;AACJ;;AACJ;;;;;;AACA;;AAEI;;AACI;;AACI;;AACI;;AACJ;;AACJ;;AACJ;;AACJ;;;;;;AACA;;AAEI;;AACI;;AACJ;;AACA;;AACI;;AACJ;;AACJ;;;;;;AAFQ;;AAAA;;;;;;;;;;UDrZvBitC,qB;AA0CX,uCAAoB9sC,cAApB,EAAmEqmB,aAAnE,EAA+GvX,MAA/G,EAAgJgO,IAAhJ,EAAyK7c,MAAzK,EAAgM;AAAA;;AAA5K,eAAAD,cAAA,GAAAA,cAAA;AAA+C,eAAAqmB,aAAA,GAAAA,aAAA;AAA4C,eAAAvX,MAAA,GAAAA,MAAA;AAAiC,eAAAgO,IAAA,GAAAA,IAAA;AAAyB,eAAA7c,MAAA,GAAAA,MAAA;AAxCzK,eAAA8c,IAAA,GAAO,CAAP;AAEA,eAAAC,QAAA,GAAW,EAAX;AAEA,eAAAC,cAAA,GAAiB,KAAjB;AACA,eAAAta,MAAA,GAAS,KAAT;AACA,eAAAC,OAAA,GAAU,KAAV;AACA,eAAA0jB,gBAAA,GAAmB,KAAnB;AACA,eAAAxe,iBAAA,GAAoB,KAApB;AACA,eAAAye,MAAA,GAAS,KAAT;AACA,eAAAwmB,WAAA,GAAc,KAAd;AAaA,eAAA11B,YAAA,GAAe,EAAf;AAEA,eAAAK,KAAA,GAAQ,CAAR;AACA,eAAA8O,SAAA,GAAY,OAAZ;AACA,eAAAC,SAAA,GAAY,KAAZ;AACA,eAAAC,UAAA,GAAa;AAAEC,iBAAK,EAAE,EAAT;AAAaF,qBAAS,EAAE;AAAxB,WAAb;AACA,eAAAG,UAAA,GAAa,EAAb;AACA,eAAAC,SAAA,GAAY,kBAAZ;AAEQ,eAAAC,aAAA,GAA8B,IAAI,4CAAJ,EAA9B;AAQ2L;;;;qCAE3L;AAAA;;AAEN,iBAAK9mB,cAAL,CAAoBk/B,cAApB,CAAmCl+B,SAAnC,CACE,UAAAU,MAAM,EAAI;AACR,kBAAI,QAAI,CAACA,MAAL,IAAeA,MAAnB,EAA2B;AACzB,wBAAI,CAACsrC,aAAL,GAAqB,IAArB;AACA,wBAAI,CAACrqC,MAAL,GAAc,KAAd;AACA,wBAAI,CAAC2jB,gBAAL,GAAwB,KAAxB;AACA,wBAAI,CAACrJ,cAAL,GAAsB,KAAtB;AACD;;AACD,sBAAI,CAACvb,MAAL,GAAcA,MAAd,CAPQ,CAQR;;AACA,kBAAI,QAAI,CAACA,MAAL,IAAe,IAAnB,EAAyB;AAEvB,wBAAI,CAACuN,OAAL,GAAe,QAAI,CAACvN,MAAL,CAAY,WAAZ,EAAyBuN,OAAxC;AACA,wBAAI,CAACiY,OAAL,GAAe,QAAI,CAACxlB,MAAL,CAAYwlB,OAA3B;AACA,wBAAI,CAAC8lB,aAAL,GAAqBtrC,MAArB;AACA,wBAAI,CAACqrC,WAAL,GAAmB,IAAnB;AACAzrC,0BAAU,CAAC,YAAM;AACf;AACAyE,mBAAC,CAAC,oBAAD,CAAD,CAAwBoE,KAAxB,CAA8B,MAA9B;AACApE,mBAAC,CAAC,iBAAD,CAAD,CAAqB8K,MAArB;AACA,sBAAImW,KAAK,GAAGlb,WAAW,CAAC,UAACC,GAAD,EAAO;AAC7B,wBAAG;AACC;AACAhG,uBAAC,CAAC,oBAAD,CAAD,CAAwBoE,KAAxB,CAA8B,MAA9B;;AACA,0BAAG,CAACpE,CAAC,CAAC,oBAAD,CAAD,CAAwBkhB,EAAxB,CAA2B,UAA3B,CAAJ,EAA2C;AACzC9X,qCAAa,CAAC6X,KAAD,CAAb;AACD;AAEJ,qBAPD,CAOC,OAAM9gB,CAAN,EAAQ;AACLrE,6BAAO,CAACC,GAAR,CAAYoE,CAAZ;AACH;AACF,mBAXsB,EAWpB,EAXoB,CAAvB;AAYD,iBAhBS,EAgBP,GAhBO,CAAV;AAiBD;AACF,aAlCH;AAqCA,iBAAK4I,MAAL,CAAYsO,QAAZ,CAAqBpc,SAArB,CACE,UAAAiF,OAAO,EAAI;AACT3E,wBAAU,CAAC,YAAM;AACf,oBAAG2E,OAAH,EAAW;AACT,sBAAIoX,cAAc,GAAG,QAAI,CAACvO,MAAL,CAAYhF,iBAAZ,EAArB;;AACA,sBAAIwT,mBAAmB,GAAG,QAAI,CAACxO,MAAL,CAAY/E,sBAAZ,EAA1B;;AAEA,sBAAG,CAACuT,mBAAJ,EAAwB;AACtB,4BAAI,CAACN,QAAL,GAAgB,IAAhB;;AACA,4BAAI,CAACF,IAAL,CAAUS,QAAV,CAAmB,QAAI,CAACC,aAAL,CAAmBvR,aAAtC,EAAqD,QAArD,EAA+D,qBAA/D;;AACA,4BAAI,CAAC6Q,IAAL,CAAUS,QAAV,CAAmB,QAAI,CAACC,aAAL,CAAmBvR,aAAtC,EAAqD,YAArD,EAAmE,qBAAnE;AACD,mBAJD,MAIK;AACH,4BAAI,CAAC6Q,IAAL,CAAUS,QAAV,CAAmB,QAAI,CAACC,aAAL,CAAmBvR,aAAtC,EAAqD,QAArD,EAA+D,sBAA/D;;AACA,4BAAI,CAAC6Q,IAAL,CAAUS,QAAV,CAAmB,QAAI,CAACC,aAAL,CAAmBvR,aAAtC,EAAqD,YAArD,EAAmE,sBAAnE;;AACA,4BAAI,CAAC+Q,QAAL,GAAgB,IAAhB;AACD;AAEF,iBAdD,MAcM,IAAG/W,OAAO,IAAE,IAAZ,EAAiB;AACrB;AACD,iBAFK,MAED;AACH,0BAAI,CAAC6W,IAAL,CAAUS,QAAV,CAAmB,QAAI,CAACC,aAAL,CAAmBvR,aAAtC,EAAqD,QAArD,EAA+D,sBAA/D;;AACA,0BAAI,CAAC6Q,IAAL,CAAUS,QAAV,CAAmB,QAAI,CAACC,aAAL,CAAmBvR,aAAtC,EAAqD,YAArD,EAAmE,sBAAnE;;AACA,0BAAI,CAAC+Q,QAAL,GAAgB,KAAhB;AACD;AACF,eAtBS,EAsBP,GAtBO,CAAV;AAwBD,aA1BH;AA6BA,iBAAKlO,MAAL,CAAY2O,aAAZ,CAA0Bzc,SAA1B,CACE,UAAAiF,OAAO,EAAI;AACT3E,wBAAU,CAAC,YAAM;AACf,oBAAG2E,OAAH,EAAW;AACT,0BAAI,CAAC+W,QAAL,GAAgB,IAAhB;;AACA,0BAAI,CAACF,IAAL,CAAUS,QAAV,CAAmB,QAAI,CAACC,aAAL,CAAmBvR,aAAtC,EAAqD,QAArD,EAA+D,sBAA/D;;AACA,0BAAI,CAAC6Q,IAAL,CAAUS,QAAV,CAAmB,QAAI,CAACC,aAAL,CAAmBvR,aAAtC,EAAqD,YAArD,EAAmE,sBAAnE;AACD,iBAJD,MAIM,IAAGhG,OAAO,IAAE,IAAZ,EAAiB;AACrB;AACD,iBAFK,MAED;AACH,0BAAI,CAAC6W,IAAL,CAAUS,QAAV,CAAmB,QAAI,CAACC,aAAL,CAAmBvR,aAAtC,EAAqD,YAArD,EAAmE,sBAAnE;;AACA,0BAAI,CAAC+Q,QAAL,GAAgB,KAAhB;AACD;AACF,eAXS,EAWP,GAXO,CAAV;AAaD,aAfH;AAkBA,iBAAKhd,cAAL,CAAoBge,iBAApB,CAAsChd,SAAtC,CACE,UAAAC,IAAI,EAAI;AACNY,qBAAO,CAACC,GAAR,CAAYb,IAAZ;;AACA,kBAAIA,IAAI,IAAI,IAAZ,EAAkB;AAChB,wBAAI,CAAComB,cAAL,GAAsBpmB,IAAI,CAAC,YAAD,CAA1B;;AACA,oBAAIA,IAAI,CAAC,cAAD,CAAJ,IAAwBQ,SAA5B,EAAuC;AACrC,0BAAI,CAACgI,YAAL,GAAoBxI,IAAI,CAAC,cAAD,CAAxB;AACD;AACF;AACF,aATH;AAYA,iBAAKjB,cAAL,CAAoBsnB,cAApB,CAAmCtmB,SAAnC,CACE,UAAAC,IAAI,EAAI;AACN,kBAAIA,IAAI,IAAI,IAAZ,EAAkB;AAChB,wBAAI,CAAC6G,iBAAL,GAAyB,IAAzB;AACD,eAFD,MAEO;AACL,wBAAI,CAACA,iBAAL,GAAyB,KAAzB;AACD;AACF,aAPH,EAQE,UAAAvE,KAAK,EAAI,CAER,CAVH;AAaA,iBAAKujB,aAAL,CAAmB/lB,IAAnB,CAAwB,oEAAa,IAAb,CAAxB,EAA4CC,SAA5C,CACE,UAAAC,IAAI,EAAI;AACN,sBAAI,CAAC2lB,UAAL,GAAkB3lB,IAAI,CAACsmB,KAAvB;AACAtmB,kBAAI,CAAC4lB,SAAL,GAAiB,QAAI,CAACA,SAAL,GAAiB,YAAlC,GAAiD,QAAI,CAACA,SAAL,GAAiB,kBAAlE;;AACA,sBAAI,CAACW,kBAAL,CAAwB,QAAI,CAACZ,UAA7B,EAAyC,QAAI,CAACC,SAA9C;AACD,aALH,EA/GM,CAuHN;;AACA9gB,aAAC,CAAC,kBAAD,CAAD,CAAsBoE,KAAtB,CAA4B,MAA5B;AACApE,aAAC,CAAC,iBAAD,CAAD,CAAqBqE,QAArB,CAA8B,WAA9B,EAzHM,CA0HN;;AACArE,aAAC,CAAC,kBAAD,CAAD,CAAsBoE,KAAtB,CAA4B;AAAEE,sBAAQ,EAAE,QAAZ;AAAsBC,sBAAQ,EAAE;AAAhC,aAA5B;AAEAvE,aAAC,CAAC,iBAAD,CAAD,CAAqByE,GAArB,CAAyB,QAAzB,EAAmC,SAAnC;AACAzE,aAAC,CAAC,MAAD,CAAD,CAAUwE,WAAV,CAAsB,YAAtB;AACAxE,aAAC,CAAC,MAAD,CAAD,CAAUyE,GAAV,CAAc,eAAd,EAA+B,EAA/B;AAEA,iBAAK6b,aAAL,CAAmBoB,aAAnB,CAAiC,KAAK/P,KAAtC,EAA6C,KAAK8O,SAAlD,EAA6D,KAAKC,SAAlE,EAA6EzlB,SAA7E,CACE,UAAAC,IAAI,EAAI;AACN,sBAAI,CAACylB,UAAL,GAAkB;AAAEC,qBAAK,EAAE,QAAI,CAACH,SAAd;AAAyBC,yBAAS,EAAE,QAAI,CAACA;AAAzC,eAAlB;AACA,sBAAI,CAACpP,YAAL,GAAoBpW,IAApB;;AACA,sBAAI,CAACoW,YAAL,CAAkBtV,OAAlB,CAA0B,UAAAC,OAAO,EAAI;AACnCA,uBAAO,CAAC,UAAD,CAAP,GAAsB,KAAtB;AACD,eAFD,EAHM,CAQN;;;AACA+D,eAAC,CAAC,kBAAD,CAAD,CAAsBoE,KAAtB,CAA4B,MAA5B;AACApE,eAAC,CAAC,iBAAD,CAAD,CAAqB8K,MAArB;AACD,aAZH,EAYK,UAAAtN,KAAK,EAAI;AACV1B,qBAAO,CAACC,GAAR,CAAYyB,KAAZ;AACD,aAdH;AAgBD;;;4CAIiB;AAAA;;AAChB,iBAAKuE,iBAAL,GAAyB,IAAzB;AACA,gBAAIopB,MAAM,GAAG,KAAKxvB,MAAL,CAAYuH,SAAZ,CAAsB6B,qBAAnC;AACA,iBAAK9K,cAAL,CAAoBitC,eAApB,CAAoC/b,MAApC,EAA4ClwB,SAA5C,CACE,UAAAC,IAAI,EAAI;AACN,sBAAI,CAAC6G,iBAAL,GAAyB,KAAzB;;AACA,sBAAI,CAAC9H,cAAL,CAAoB4nB,aAApB,CAAkC,QAAI,CAAClmB,MAAvC;;AACA,sBAAI,CAACyb,gBAAL,GAAwB,IAAxB;AACA,sBAAI,CAACF,cAAL,GAAsB,KAAtB;AACA,sBAAI,CAACvb,MAAL,GAAc,IAAd;;AACA,sBAAI,CAAC1B,cAAL,CAAoB6nB,gBAApB;;AACA,sBAAI,CAAC7nB,cAAL,CAAoB8nB,aAApB,CAAkC;AAAEtZ,uBAAO,EAAE;AAAX,eAAlC;;AACA,sBAAI,CAACxO,cAAL,CAAoBqJ,aAApB,CAAkC,IAAlC;;AACA,sBAAI,CAACrJ,cAAL,CAAoBsJ,cAApB,CAAmC,IAAnC;;AACA,sBAAI,CAAC+c,aAAL,CAAmB0B,2BAAnB,CAA+C,IAA/C;;AACA,sBAAI,CAAC9nB,MAAL,CAAYuY,OAAZ,CAAoB0Y,MAAM,GAAG,oBAA7B,EAAmD,EAAnD,EAAuD;AACrD1tB,uBAAO,EAAE;AAD4C,eAAvD;AAGD,aAfH,EAeK,UAAAD,KAAK,EAAI;AACV,sBAAI,CAACuE,iBAAL,GAAyB,KAAzB,CADU,CAEV;AACA;AACA;;AACA,sBAAI,CAAC7H,MAAL,CAAYsD,KAAZ,CAAkBA,KAAK,CAACA,KAAxB,EAA+B,OAA/B,EAAwC;AACtCC,uBAAO,EAAE;AAD6B,eAAxC;AAGD,aAvBH;AAyBD;;;4CAEiB;AAAA;;AAChB,iBAAKsE,iBAAL,GAAyB,IAAzB;AACA,iBAAKpG,MAAL,CAAY,SAAZ,IAAyB,WAAzB;AAGA,gBAAI2J,sBAAsB,GAAG,KAAK3J,MAAL,CAAY2J,sBAAzC;AACA,iBAAK3J,MAAL,CAAY,0BAAZ,IAA0C2J,sBAA1C;AACA,iBAAK3J,MAAL,CAAY,SAAZ,IAAyB,WAAzB;AAEAG,mBAAO,CAACC,GAAR,CAAY,KAAKJ,MAAjB,EAAyB2J,sBAAzB;AACA,iBAAKrL,cAAL,CAAoBoe,kBAApB,CAAuC/S,sBAAvC,EAA+DrK,SAA/D,CACE,UAAAC,IAAI,EAAI;AACNY,qBAAO,CAACC,GAAR,CAAYb,IAAZ;AACAA,kBAAI,CAAC,OAAD,CAAJ,GAAgB,mBAAmB,QAAI,CAACS,MAAL,CAAY,iBAAZ,CAAnC;;AACA,kBAAIT,IAAI,CAAC,SAAD,CAAJ,IAAmB,QAAI,CAACS,MAAL,CAAYuN,OAAnC,EAA4C;AAC1ChO,oBAAI,CAAC,YAAD,CAAJ,GAAqB,KAArB;AACD,eAFD,MAEO;AACLA,oBAAI,CAAC,YAAD,CAAJ,GAAqB,IAArB;AACD;;AACD,sBAAI,CAACjB,cAAL,CAAoBke,oBAApB,CAAyC;AAAE,uBAAO,QAAI,CAACxc,MAAd;AAAsB,wBAAQT;AAA9B,eAAzC;;AACA,sBAAI,CAAC6G,iBAAL,GAAyB,KAAzB;;AACA,sBAAI,CAAC7H,MAAL,CAAYuY,OAAZ,CAAoBvX,IAAI,CAAC,uBAAD,CAAJ,GAAgC,kBAApD,EAAwE,EAAxE,EAA4E;AAC1EuC,uBAAO,EAAE;AADiE,eAA5E;AAGD,aAdH,EAcK,UAAAD,KAAK,EAAI;AACV1B,qBAAO,CAACC,GAAR,CAAYyB,KAAZ;AACA,sBAAI,CAACuE,iBAAL,GAAyB,KAAzB;AACD,aAjBH;AAoBD;;;4CAEiB;AAChB,iBAAKqC,KAAL,CAAWxC,IAAX;AACD;;;8CAEmBwgB,I,EAAO;AACzB,mBAAOA,IAAI,CAACa,IAAL,CAAU,UAAAhnB,OAAO;AAAA,qBAAIA,OAAO,CAACsmB,WAAR,KAAwB,QAA5B;AAAA,aAAjB,CAAP;AACD;;;6CAEkBf,K,EAAgBV,S,EAAiB;AAAA;;AAClD,iBAAKnP,KAAL,GAAa,CAAb;AACA,iBAAKuR,YAAL,GAAoB,IAApB,CAFkD,CAGlD;;AACAljB,aAAC,CAAC,kBAAD,CAAD,CAAsBoE,KAAtB,CAA4B,MAA5B;AACApE,aAAC,CAAC,iBAAD,CAAD,CAAqBqE,QAArB,CAA8B,aAA9B,EALkD,CAMlD;;AACArE,aAAC,CAAC,kBAAD,CAAD,CAAsBoE,KAAtB,CAA4B;AAAEE,sBAAQ,EAAE,QAAZ;AAAsBC,sBAAQ,EAAE;AAAhC,aAA5B;AACAvE,aAAC,CAAC,MAAD,CAAD,CAAUwE,WAAV,CAAsB,YAAtB;AACAxE,aAAC,CAAC,MAAD,CAAD,CAAUyE,GAAV,CAAc,eAAd,EAA+B,EAA/B;AACA3I,mBAAO,CAACC,GAAR,CAAYylB,KAAZ,EAAmBV,SAAnB;AACA,iBAAKqC,SAAL,CAAejd,aAAf,CAA6BoE,SAA7B,GAAyC,CAAzC;;AACA,gBAAI,KAAKuW,UAAL,IAAmB,EAAvB,EAA2B;AACzB,mBAAKP,aAAL,CAAmB8C,kBAAnB,CAAsC,KAAKzR,KAA3C,EAAkD,KAAK8O,SAAvD,EAAkE,KAAKC,SAAvE,EAAkF,KAAKG,UAAvF,EAAmG,KAAKC,SAAxG,EAAmH7lB,SAAnH,CACE,UAAAC,IAAI,EAAI;AACNY,uBAAO,CAACC,GAAR,CAAYb,IAAZ;AACA,wBAAI,CAACoW,YAAL,GAAoB,EAApB;AACApW,oBAAI,CAACc,OAAL,CAAa,UAAAC,OAAO,EAAI;AACtB,0BAAI,CAACqV,YAAL,CAAkBjV,IAAlB,CAAuBJ,OAAvB;AACD,iBAFD;AAGAV,0BAAU,CAAC,YAAM;AACf;AACAyE,mBAAC,CAAC,kBAAD,CAAD,CAAsBoE,KAAtB,CAA4B,MAA5B;AACApE,mBAAC,CAAC,iBAAD,CAAD,CAAqB8K,MAArB;AACD,iBAJS,EAIP,GAJO,CAAV;AAMD,eAbH,EAcE,UAAAtN,KAAK,EAAI;AACP1B,uBAAO,CAACC,GAAR,CAAYyB,KAAZ;AACD,eAhBH;AAkBD,aAnBD,MAmBO;AACL,mBAAK8iB,aAAL,CAAmB8C,kBAAnB,CAAsC,KAAKzR,KAA3C,EAAkD,KAAK8O,SAAvD,EAAkE,KAAKC,SAAvE,EAAkF,KAAKG,UAAvF,EAAmG,KAAKC,SAAxG,EAAmH7lB,SAAnH,CACE,UAAAC,IAAI,EAAI;AACNY,uBAAO,CAACC,GAAR,CAAYb,IAAZ;AACA,wBAAI,CAACoW,YAAL,GAAoB,EAApB;AACApW,oBAAI,CAACc,OAAL,CAAa,UAAAC,OAAO,EAAI;AACtB,0BAAI,CAACqV,YAAL,CAAkBjV,IAAlB,CAAuBJ,OAAvB;AACD,iBAFD,EAHM,CAMN;;AACA+D,iBAAC,CAAC,kBAAD,CAAD,CAAsBoE,KAAtB,CAA4B,MAA5B;AACApE,iBAAC,CAAC,iBAAD,CAAD,CAAqB8K,MAArB;AACD,eAVH,EAWE,UAAAtN,KAAK,EAAI;AACP1B,uBAAO,CAACC,GAAR,CAAYyB,KAAZ;AACD,eAbH;AAeD;AACF;;;wCAEaoC,G,EAAK4hB,K,EAAOV,S,EAAW;AACnC,gBAAIlhB,GAAG,CAACoQ,GAAJ,IAAW,SAAX,IAAwBpQ,GAAG,CAACoQ,GAAJ,IAAW,OAAnC,IAA8CpQ,GAAG,CAACoQ,GAAJ,IAAW,KAA7D,EAAoE;AAClE,mBAAK+Q,aAAL,CAAmBhhB,IAAnB,CAAwB;AAAEyhB,qBAAK,EAALA,KAAF;AAASV,yBAAS,EAATA;AAAT,eAAxB;AACD;AACF;;;yCAEc;AAAA;;AACb;AACA9gB,aAAC,CAAC,kBAAD,CAAD,CAAsBoE,KAAtB,CAA4B,MAA5B;AACApE,aAAC,CAAC,iBAAD,CAAD,CAAqBqE,QAArB,CAA8B,aAA9B,EAHa,CAIb;;AACArE,aAAC,CAAC,kBAAD,CAAD,CAAsBoE,KAAtB,CAA4B;AAAEE,sBAAQ,EAAE,QAAZ;AAAsBC,sBAAQ,EAAE;AAAhC,aAA5B;AACAvE,aAAC,CAAC,iBAAD,CAAD,CAAqBqE,QAArB,CAA8B,aAA9B;AACArE,aAAC,CAAC,MAAD,CAAD,CAAUwE,WAAV,CAAsB,YAAtB;AACAxE,aAAC,CAAC,MAAD,CAAD,CAAUyE,GAAV,CAAc,eAAd,EAA+B,EAA/B;AAEA,iBAAKkN,KAAL,IAAc,EAAd;;AAEA,gBAAI,KAAKkP,UAAL,IAAmB,EAAvB,EAA2B;AACzB,mBAAKP,aAAL,CAAmB8C,kBAAnB,CAAsC,KAAKzR,KAA3C,EAAkD,KAAK8O,SAAvD,EAAkE,KAAKC,SAAvE,EAAkF,KAAKG,UAAvF,EAAmG,KAAKC,SAAxG,EAAmH7lB,SAAnH,CACE,UAAAC,IAAI,EAAI;AACNY,uBAAO,CAACC,GAAR,CAAYb,IAAZ,EADM,CAEN;;AACA8E,iBAAC,CAAC,kBAAD,CAAD,CAAsBoE,KAAtB,CAA4B,MAA5B;AACApE,iBAAC,CAAC,iBAAD,CAAD,CAAqB8K,MAArB;AACA5P,oBAAI,CAACc,OAAL,CAAa,UAAAC,OAAO,EAAI;AACtB,0BAAI,CAACqV,YAAL,CAAkBjV,IAAlB,CAAuBJ,OAAvB;AACD,iBAFD;AAGD,eATH,EASK,UAAAuB,KAAK,EAAI;AACV1B,uBAAO,CAACC,GAAR,CAAYyB,KAAZ;AACD,eAXH;AAaD,aAdD,MAcO;AACL,mBAAK8iB,aAAL,CAAmB8C,kBAAnB,CAAsC,KAAKzR,KAA3C,EAAkD,KAAK8O,SAAvD,EAAkE,KAAKC,SAAvE,EAAkF,KAAKG,UAAvF,EAAmG,KAAKC,SAAxG,EAAmH7lB,SAAnH,CACE,UAAAC,IAAI,EAAI;AAENA,oBAAI,CAACc,OAAL,CAAa,UAAAC,OAAO,EAAI;AACtB,0BAAI,CAACqV,YAAL,CAAkBjV,IAAlB,CAAuBJ,OAAvB;AACD,iBAFD,EAFM,CAMN;;AACA+D,iBAAC,CAAC,kBAAD,CAAD,CAAsBoE,KAAtB,CAA4B,MAA5B;AACApE,iBAAC,CAAC,iBAAD,CAAD,CAAqB8K,MAArB;AACD,eAVH,EAUK,UAAAtN,KAAK,EAAI;AACV1B,uBAAO,CAACC,GAAR,CAAYyB,KAAZ;AACD,eAZH;AAcD;AAGF;;;qCAEUoC,G,EAAKC,C,EAAG;AAAA;;AACjB;AACA,gBAAID,GAAG,CAACmU,QAAR,EAAkB,CAEjB;;AACD,iBAAKzC,YAAL,CAAkBtV,OAAlB,CAA0B,UAAAC,OAAO,EAAI;AACnC,kBAAIA,OAAO,CAAC+T,GAAR,IAAenQ,CAAC,CAACmQ,GAArB,EAA0B;AACxB/T,uBAAO,CAAConB,QAAR,GAAmB,CAACpnB,OAAO,CAAConB,QAA5B;AACApnB,uBAAO,CAAConB,QAAR,GAAmB,QAAI,CAACH,YAAL,GAAoBjnB,OAAvC,GAAiD,QAAI,CAACinB,YAAL,GAAoB,IAArE;AACA,uBAAO,IAAP;AACD,eAJD,MAIO;AACLjnB,uBAAO,CAAConB,QAAR,GAAmB,KAAnB;AACA,uBAAO,KAAP;AACD;AACF,aATD;AAWD;;;2CAEgBzjB,G,EAAMoG,G,EAAM;AAAA;;AAG3B,gBAAI,KAAK2a,UAAL,CAAgBC,KAAhB,IAAyB5a,GAA7B,EAAkC;AAChC,kBAAI,KAAK0a,SAAL,IAAkB,KAAtB,EAA6B;AAC3B,qBAAKA,SAAL,GAAiB,MAAjB;AACA,qBAAKC,UAAL,CAAgBD,SAAhB,GAA4B,MAA5B;AACD,eAHD,MAGO;AACL,qBAAKA,SAAL,GAAiB,KAAjB;AACA,qBAAKC,UAAL,CAAgBD,SAAhB,GAA4B,KAA5B;AACD;AACF,aARD,MAQO;AACL,mBAAKD,SAAL,GAAiBza,GAAjB;AACA,mBAAK0a,SAAL,GAAiB,KAAjB;AACA,mBAAKC,UAAL,GAAkB;AAAEC,qBAAK,EAAE,KAAKH,SAAd;AAAyBC,yBAAS,EAAE,KAAKA;AAAzC,eAAlB;AACD,aAf0B,CAiB3B;;;AACA1gB,aAAC,CAAC,kBAAD,CAAD,CAAsBoE,KAAtB,CAA4B,MAA5B;AACApE,aAAC,CAAC,iBAAD,CAAD,CAAqBqE,QAArB,CAA8B,aAA9B,EAnB2B,CAoB3B;;AACArE,aAAC,CAAC,kBAAD,CAAD,CAAsBoE,KAAtB,CAA4B;AAAEE,sBAAQ,EAAE,QAAZ;AAAsBC,sBAAQ,EAAE;AAAhC,aAA5B;AACAvE,aAAC,CAAC,iBAAD,CAAD,CAAqBqE,QAArB,CAA8B,aAA9B;AACArE,aAAC,CAAC,MAAD,CAAD,CAAUwE,WAAV,CAAsB,YAAtB;AACAxE,aAAC,CAAC,MAAD,CAAD,CAAUyE,GAAV,CAAc,eAAd,EAA+B,EAA/B;AACA,iBAAKkN,KAAL,GAAa,CAAb;AACA,iBAAKwR,SAAL,CAAejd,aAAf,CAA6BoE,SAA7B,GAAyC,CAAzC;AAEA,iBAAKgW,aAAL,CAAmB8C,kBAAnB,CAAsC,KAAKzR,KAA3C,EAAkD,KAAK8O,SAAvD,EAAkE,KAAKC,SAAvE,EAAkF,KAAKG,UAAvF,EAAmG,KAAKC,SAAxG,EAAmH7lB,SAAnH,CACE,UAAAC,IAAI,EAAI;AACNY,qBAAO,CAACC,GAAR,CAAYb,IAAZ;AACA,sBAAI,CAACoW,YAAL,GAAoB,EAApB,CAFM,CAGN;;AACAtR,eAAC,CAAC,kBAAD,CAAD,CAAsBoE,KAAtB,CAA4B,MAA5B;AACApE,eAAC,CAAC,iBAAD,CAAD,CAAqB8K,MAArB;AACA5P,kBAAI,CAACc,OAAL,CAAa,UAAAC,OAAO,EAAI;AACtB,wBAAI,CAACqV,YAAL,CAAkBjV,IAAlB,CAAuBJ,OAAvB;AACD,eAFD;AAGD,aAVH,EAUK,UAAAuB,KAAK,EAAI;AACV1B,qBAAO,CAACC,GAAR,CAAYyB,KAAZ;AACD,aAZH;AAeD;;;uCAEY;AAAA;;AACX,iBAAKuE,iBAAL,GAAyB,IAAzB;AACA;;AACA,iBAAKpG,MAAL,CAAY,SAAZ,IAAyB,MAAzB;AAEA,gBAAI2J,sBAAsB,GAAG,KAAK3J,MAAL,CAAY2J,sBAAzC;AACA,iBAAK3J,MAAL,CAAY,SAAZ,IAAyB,MAAzB;AACA,iBAAKA,MAAL,CAAY,0BAAZ,IAA0C2J,sBAA1C,CAPW,CAQX;;AACA,iBAAKrL,cAAL,CAAoB+Y,aAApB,CAAkC1N,sBAAlC,EAA0DrK,SAA1D,CACE,UAAAC,IAAI,EAAI;AACN,kBAAIA,IAAI,CAAC,SAAD,CAAJ,IAAmB,QAAI,CAACS,MAAL,CAAYuN,OAAnC,EAA4C;AAC1ChO,oBAAI,CAAC,YAAD,CAAJ,GAAqB,KAArB;AACD,eAFD,MAEO;AACLA,oBAAI,CAAC,YAAD,CAAJ,GAAqB,IAArB;AACD;;AACD,sBAAI,CAACjB,cAAL,CAAoBke,oBAApB,CAAyC;AAAE,uBAAO,QAAI,CAACxc,MAAd;AAAsB,wBAAQT;AAA9B,eAAzC;;AACA,sBAAI,CAAC6G,iBAAL,GAAyB,KAAzB;;AACA,sBAAI,CAAC7H,MAAL,CAAYuY,OAAZ,CAAoBvX,IAAI,CAAC,kBAAD,CAAJ,GAA2B,kBAA/C,EAAmE,EAAnE,EAAuE;AACrEuC,uBAAO,EAAE;AAD4D,eAAvE;AAGD,aAZH,EAYK,UAAAD,KAAK,EAAI;AACV,sBAAI,CAACuE,iBAAL,GAAyB,KAAzB;;AACA,sBAAI,CAAC7H,MAAL,CAAYsD,KAAZ,CAAkB,sBAAlB,EAA0C,OAA1C,EAAmD;AACjDC,uBAAO,EAAE;AADwC,eAAnD;AAGD,aAjBH;AAqBD;;;wCAEa;AAAA;;AACZ,iBAAKsE,iBAAL,GAAyB,IAAzB;AACA,iBAAKpG,MAAL,CAAY,SAAZ,IAAyB,OAAzB;AAEA,gBAAI2J,sBAAsB,GAAG,KAAK3J,MAAL,CAAY2J,sBAAzC;AACA,iBAAK3J,MAAL,CAAY,0BAAZ,IAA0C2J,sBAA1C;AACA,iBAAK3J,MAAL,CAAY,SAAZ,IAAyB,OAAzB;AACAG,mBAAO,CAACC,GAAR,CAAY,KAAKJ,MAAjB;AACA,iBAAK1B,cAAL,CAAoBme,cAApB,CAAmC9S,sBAAnC,EAA2DrK,SAA3D,CACE,UAAAC,IAAI,EAAI;AACN,kBAAIA,IAAI,CAAC,SAAD,CAAJ,IAAmB,QAAI,CAACS,MAAL,CAAYuN,OAAnC,EAA4C;AAC1ChO,oBAAI,CAAC,YAAD,CAAJ,GAAqB,KAArB;AACD,eAFD,MAEO;AACLA,oBAAI,CAAC,YAAD,CAAJ,GAAqB,IAArB;AACD;;AACD,sBAAI,CAACjB,cAAL,CAAoBke,oBAApB,CAAyC;AAAE,uBAAO,QAAI,CAACxc,MAAd;AAAsB,wBAAQT;AAA9B,eAAzC;;AACA,sBAAI,CAAC6G,iBAAL,GAAyB,KAAzB;;AACA,sBAAI,CAAC7H,MAAL,CAAYuY,OAAZ,CAAoBvX,IAAI,CAAC,mBAAD,CAAJ,GAA4B,kBAAhD,EAAoE,EAApE,EAAwE;AACtEuC,uBAAO,EAAE;AAD6D,eAAxE,EARM,CAWN;;AACD,aAbH,EAaK,UAAAD,KAAK,EAAI;AACV,sBAAI,CAACuE,iBAAL,GAAyB,KAAzB,CADU,CAEV;;AACA,sBAAI,CAAC7H,MAAL,CAAYsD,KAAZ,CAAkBA,KAAK,CAACA,KAAxB,EAA+B,OAA/B,EAAwC;AACtCC,uBAAO,EAAE;AAD6B,eAAxC;AAGD,aAnBH;AAsBD;;;8CAEmB2kB,I,EAAO;AAAA;;AACzB;AACApiB,aAAC,CAAC,kBAAD,CAAD,CAAsBoE,KAAtB,CAA4B,MAA5B;AACApE,aAAC,CAAC,iBAAD,CAAD,CAAqBqE,QAArB,CAA8B,WAA9B,EAHyB,CAIzB;;AACArE,aAAC,CAAC,kBAAD,CAAD,CAAsBoE,KAAtB,CAA4B;AAAEE,sBAAQ,EAAE,QAAZ;AAAsBC,sBAAQ,EAAE;AAAhC,aAA5B;AAEAvE,aAAC,CAAC,iBAAD,CAAD,CAAqByE,GAArB,CAAyB,QAAzB,EAAmC,SAAnC;AACAzE,aAAC,CAAC,MAAD,CAAD,CAAUwE,WAAV,CAAsB,YAAtB;AACAxE,aAAC,CAAC,MAAD,CAAD,CAAUyE,GAAV,CAAc,eAAd,EAA+B,EAA/B;AAEA,gBAAIuG,QAAQ,GAAG,KAAKrP,MAAL,CAAYuH,SAAZ,CAAsB6B,qBAArC;AACAjJ,mBAAO,CAACC,GAAR,CAAY,KAAKJ,MAAjB;;AAEA,gBAAIymB,IAAI,IAAI1mB,SAAZ,EAAuB;AAErB,kBAAI8P,EAAE,GAAG4W,IAAI,CAAClnB,IAAL,CAAU8U,GAAV,IAAiBtU,SAAjB,GAA6B0mB,IAAI,CAAClnB,IAAL,CAAU8U,GAAvC,GAA6C,EAAtD;AACA,kBAAItF,KAAK,GAAG0X,IAAI,CAAClnB,IAAL,CAAUwP,KAAV,IAAmBhP,SAAnB,GAA+B0mB,IAAI,CAAClnB,IAAL,CAAUwP,KAAzC,GAAiD,EAA7D;AACA,kBAAIpM,MAAJ;AAEA8jB,kBAAI,CAAClnB,IAAL,CAAUonB,QAAV,CAAmBtmB,OAAnB,CAA2B,UAAAC,OAAO,EAAI;AACpC,oBAAIA,OAAO,CAACsmB,WAAR,IAAuB,QAA3B,EAAqC;AACnCjkB,wBAAM,GAAGrC,OAAO,CAACumB,QAAR,GAAmB,GAAnB,GAAyBvmB,OAAO,CAACwmB,SAA1C;AACA,yBAAO,IAAP;AACD,iBAHD,MAGO;AACL,yBAAO,KAAP;AACD;AACF,eAPD;AAQAnkB,oBAAM,GAAGA,MAAM,IAAI5C,SAAV,GAAsB4C,MAAtB,GAA+B,EAAxC;AACA,kBAAIokB,IAAI,GAAGN,IAAI,CAAClnB,IAAL,CAAUwnB,IAAV,IAAkBhnB,SAAlB,GAA8B0mB,IAAI,CAAClnB,IAAL,CAAUwnB,IAAxC,GAA+C,EAA1D;AACA,kBAAIC,GAAG,GAAGP,IAAI,CAAClnB,IAAL,CAAUynB,GAAV,IAAiBjnB,SAAjB,GAA6B0mB,IAAI,CAAClnB,IAAL,CAAUynB,GAAvC,GAA6C,EAAvD;AACA,kBAAIC,WAAW,GAAG,EAAlB;AAEA,kBAAIvlB,UAAU,GAAG;AACfmO,kBAAE,EAAEA,EADW;AAEfd,qBAAK,EAAEA,KAFQ;AAGfpM,sBAAM,EAAEA,MAHO;AAIfokB,oBAAI,EAAEA,IAJS;AAKfC,mBAAG,EAAEA,GALU;AAMfC,2BAAW,EAAEA;AANE,eAAjB;AAQA9mB,qBAAO,CAACC,GAAR,CAAYiP,QAAZ,EAAsB3N,UAAtB;AACA,mBAAKpD,cAAL,CAAoB4oB,mBAApB,CAAwC7X,QAAxC,EAAkD3N,UAAlD,EAA8DpC,SAA9D,CACE,UAAAC,IAAI,EAAI;AACN;AAEAK,0BAAU,CAAC,YAAM;AACf;AACAyE,mBAAC,CAAC,kBAAD,CAAD,CAAsBoE,KAAtB,CAA4B,MAA5B;AACApE,mBAAC,CAAC,iBAAD,CAAD,CAAqB8K,MAArB;;AACA,0BAAI,CAAC5Q,MAAL,CAAYuY,OAAZ,CAAoB,sCAApB,EAA4D,EAA5D,EAAgE;AAC9DhV,2BAAO,EAAE;AADqD,mBAAhE;;AAGA,0BAAI,CAAC6iB,aAAL,CAAmBwC,YAAnB,CAAgC5nB,IAAhC;;AACAK,4BAAU,CAAC,YAAM;AACf,4BAAI,CAAC6I,KAAL,CAAW2e,IAAX;AACD,mBAFS,EAEP,EAFO,CAAV;AAGD,iBAXS,EAWP,GAXO,CAAV;;AAYA,wBAAI,CAACzC,aAAL,CAAmB0B,2BAAnB,CAA+C9mB,IAA/C;AACD,eAjBH,EAiBK,UAAAsC,KAAK,EAAI;AACV1B,uBAAO,CAACC,GAAR,CAAYyB,KAAZ;;AACA,wBAAI,CAACtD,MAAL,CAAYsD,KAAZ,CAAkBA,KAAK,CAACA,KAAxB,EAA+B,OAA/B,EAAwC;AACtCC,yBAAO,EAAE;AAD6B,iBAAxC;;AAGAlC,0BAAU,CAAC,YAAM;AACf;AACAyE,mBAAC,CAAC,kBAAD,CAAD,CAAsBoE,KAAtB,CAA4B,MAA5B;AACApE,mBAAC,CAAC,iBAAD,CAAD,CAAqB8K,MAArB;AACD,iBAJS,EAIP,GAJO,CAAV;AAMD,eA5BH;AA8BD;AAEF;;;yCAEc;AAAA;;AACb,iBAAKoY,YAAL,GAAoB,IAApB;AACA,iBAAKvR,KAAL,GAAa,CAAb;AACA,iBAAK8O,SAAL,GAAiB,OAAjB;AACA,iBAAKC,SAAL,GAAiB,KAAjB;AACA,iBAAKyC,SAAL,CAAejd,aAAf,CAA6BoE,SAA7B,GAAyC,CAAzC;AACA,iBAAKqW,UAAL,GAAkB;AAAEC,mBAAK,EAAE,KAAKH,SAAd;AAAyBC,uBAAS,EAAE,KAAKA;AAAzC,aAAlB;AACA,iBAAKJ,aAAL,CAAmBoB,aAAnB,CAAiC,KAAK/P,KAAtC,EAA6C,KAAK8O,SAAlD,EAA6D,KAAKC,SAAlE,EAA6EzlB,SAA7E,CACE,UAAAC,IAAI,EAAI;AACN,sBAAI,CAACoW,YAAL,GAAoBpW,IAApB;;AACA,sBAAI,CAACoW,YAAL,CAAkBtV,OAAlB,CAA0B,UAAAC,OAAO,EAAI;AACnCA,uBAAO,CAAC,UAAD,CAAP,GAAsB,KAAtB;AACD,eAFD;AAKD,aARH,EAQK,UAAAuB,KAAK,EAAI;AACV1B,qBAAO,CAACC,GAAR,CAAYyB,KAAZ;AACD,aAVH;AAYD;;;;;;;yBA3kBUupC,qB,EAAqB,wK,EAAA,+K,EAAA,2J,EAAA,wH,EAAA,yH;AAAA,O;;;cAArBA,qB;AAAqB,0C;AAAA;AAAA;;;;;;;;;;;;;;;;;;;;;;;;AC9ClC;;AACI;;AACI;;AACI;;AACI;;AACI;;AAGJ;;AACA;;AACI;;AAGA;;AAA6B;AAAA,qBAAS,IAAAG,eAAA,EAAT;AAA0B,aAA1B;;AACzB;;AACJ;;AACJ;;AACJ;;AACJ;;AACA;;AACI;;AACI;;AAGI;;AACI;;AACI;;AACI;;AACI;;AAAsB;;AAAU;;AACpC;;AACJ;;AACJ;;AACJ;;AAEJ;;AACJ;;AACA;;AAEJ;;AACA;;AACI;;AACI;;AACI;;AAAM;;;;AAA+D;;AACzE;;AACA;;AACI;;AACgD;;AAA4B;;AAC5E;;AACI;;AAAmD;AAAA,qBAAS,IAAAh5B,UAAA,EAAT;AAAqB,aAArB;;AAAuB;;AAAQ;;AAClF;;AAA8B;AAAA,qBAAS,IAAAoK,WAAA,EAAT;AAAsB,aAAtB;;AAAwB;;AAAS;;AAC/D;;AAA8B;AAAA,qBAAS,IAAAC,eAAA,EAAT;AAA0B,aAA1B;;AAA4B;;AAAa;;AACvE;;AAA8B;AAAA,qBAAS,IAAA+K,eAAA,EAAT;AAA0B,aAA1B;;AAA4B;;AAAgB;;AAC9E;;AACJ;;AACJ;;AACJ;;AACJ;;AACJ;;AAGA;;AAAwF;AAAA,qBAAc,IAAAC,YAAA,EAAd;AAA4B,aAA5B;;AAEpF;;AACI;;AACA;;AAAuC;;AAA2B;;AACtE;;AAEA;;AAEI;;AACI;;AAkBJ;;AAIA;;AACI;;AACI;;AAII;;AACI;;AACI;;AAGI;;AACI;;AACI;;AACI;;AACI;;AAAsB;;AAAU;;AACpC;;AACJ;;AACJ;;AACJ;;AAEJ;;AACJ;;AAEA;;AACI;;AACI;;AACI;;AAAqD;AAAA,qBAAS,IAAAC,gBAAA,SAAyB,OAAzB,CAAT;AAA0C,aAA1C;;AACjD;;AAAM;;AAAK;;AACX;;AACI;;AACA;;AACJ;;AACJ;;AACA;;AAAqD;AAAA,qBAAS,IAAAA,gBAAA,SAAyB,SAAzB,CAAT;AAA4C,aAA5C;;AACjD;;AAAM;;AAAO;;AACb;;AACI;;AACA;;AACJ;;AACJ;;AACA;;AAAqD;AAAA,qBAAS,IAAAA,gBAAA,SAAyB,MAAzB,CAAT;AAAyC,aAAzC;;AACjD;;AAAM;;AAAI;;AACV;;AACI;;AACA;;AACJ;;AACJ;;AACJ;;AACJ;;AACA;;AAC0D;AAAA,qBAAY,IAAArX,YAAA,EAAZ;AAA0B,aAA1B;;AAGtD;;AAgDJ;;AACJ;;AACA;;AACJ;;AAGJ;;AACA;;AACI;;AACI;;AAEI;;AASA;;AAgNJ;;AACJ;;AACA;;AACI;;AACI;;AASA;;AAUA;;AASJ;;AACJ;;AACJ;;AACJ;;AACA;;AACI;;AACI;;AAAkE;AAAA,qBAAS,IAAAsX,mBAAA,kBAAT;AAA0C,aAA1C;;AAA4C;;AAAI;;AAEtH;;AACJ;;AACJ;;AACJ;;AAEA;;AAEJ;;;;AArd2C;;AAKJ;;AAAA;;AAK8C;;AAAA;;AAS9D;;AAAA;;AAiBS;;AAAA;;AAMN;;AAAA;;AAkBuB;;AAAA,wFAAkB,YAAlB,EAAkB,IAAlB;;AAUN;;AAAA;;AA8C4B;;AAAA;;AAMA;;AAAA;;AACE;;AAAA;;AAMF;;AAAA;;AACE;;AAAA;;AAMF;;AAAA;;AACE;;AAAA;;AAKX;;AAAA,oGAA8B,wBAA9B,EAA8B,GAA9B,EAA8B,cAA9B,EAA8B,KAA9B;;AAIT;;AAAA;;AAkDiB;;AAAA;;AASpC;;AAAA;;AASA;;AAAA;;AAoNA;;AAAA;;AAUD;;AAAA;;AAUA;;AAAA;;AAc0B;;AAAA;;;;;;;qBD5a7C,CACV,oEAAQ,YAAR,EAAsB,CACpB,kEAAM,IAAN,EAAY,kEAAM;AAChB7L,kBAAM,EAAE;AADQ,WAAN,CAAZ,CADoB,EAKpB,kEAAM,KAAN,EAAa,kEAAM;AACjBA,kBAAM,EAAE;AADS,WAAN,CAAb,CALoB,EAQpB,uEAAW,WAAX,EAAwB,oEAAQ,mBAAR,CAAxB,CARoB,EASpB,uEAAW,WAAX,EAAwB,oEAAQ,mBAAR,CAAxB,CAToB,CAAtB,CADU;;;;;;wEAcDmvB,qB,EAAqB;gBAlBjC,uDAkBiC;iBAlBvB;AACTntC,oBAAQ,EAAE,mBADD;AAETC,uBAAW,EAAE,gCAFJ;AAGTC,qBAAS,EAAE,CAAC,gCAAD,CAHF;AAIT+d,sBAAU,EAAE,CACV,oEAAQ,YAAR,EAAsB,CACpB,kEAAM,IAAN,EAAY,kEAAM;AAChBD,oBAAM,EAAE;AADQ,aAAN,CAAZ,CADoB,EAKpB,kEAAM,KAAN,EAAa,kEAAM;AACjBA,oBAAM,EAAE;AADS,aAAN,CAAb,CALoB,EAQpB,uEAAW,WAAX,EAAwB,oEAAQ,mBAAR,CAAxB,CARoB,EASpB,uEAAW,WAAX,EAAwB,oEAAQ,mBAAR,CAAxB,CAToB,CAAtB,CADU;AAJH,W;AAkBuB,U;;;;;;;;;;;;;AAqCTH,uBAAa,EAAE,CAAF;kBAAnC,uDAAmC;mBAAzB,U;AAAyB,WAAE,C;AAC7BwvB,uBAAa,EAAE,CAAF;kBAArB;AAAqB,WAAE,C;AACyB7iC,eAAK,EAAE,CAAF;kBAArD,uDAAqD;mBAA3C,iB,EAAmB;AAAE,wBAAQ;AAAV,a;AAAwB,WAAE,C;AAC/B+e,mBAAS,EAAE,CAAF;kBAAjC,uDAAiC;mBAAvB,Y;AAAuB,WAAE;;;;;;;;;;;;;;;;;;;AExFtC;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;UAmBagkB,mB;AAEX,uCAAc;AAAA;AAAG;;;;qCAET,CACP;;;;;;;yBALUA,mB;AAAmB,O;;;cAAnBA,mB;AAAmB,wC;AAAA,gB;AAAA,e;AAAA,+C;AAAA;AAAA;ACjBhC;;AAEA;;AACA;;AAEA;;;;;;;;;wEDYaA,mB,EAAmB;gBAL/B,uDAK+B;iBALrB;AACTvtC,oBAAQ,EAAE,iBADD;AAETC,uBAAW,EAAE,8BAFJ;AAGTC,qBAAS,EAAE,CAAC,8BAAD;AAHF,W;AAKqB,U;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;UEZnBstC,S;;;;;AAEX,2BACqBxN,MADrB,EAEqBhhB,QAFrB,EAE8C;AAAA;;AAAA;;AAE5C,uCAAMghB,MAAN,EAAchhB,QAAd;AAHmB,mBAAAghB,MAAA,GAAAA,MAAA;AACA,mBAAAhhB,QAAA,GAAAA,QAAA;AAAyB;AAG7C;;;;0CAGC2tB,K,EACAc,K,EAA0B;;;;;;;;;0BAErB,KAAKC,a;;;;;;AACR,6BAAM,KAAK1uB,QAAL,CAAcU,KAAd,CAAoB;AACxBiuB,mCAAW,EAAE9tB,MAAM,CAACC,QAAP,CAAgBgmB,MAAhB,GAAyB2H,KAAK,CAAC1kB;AADpB,uBAApB,CAAN;;;AAKI6kB,mC,GAAgBjB,KAAK,CAACrrC,IAAN,CAAW2e,K;;4BAC7B,EAAE2tB,aAAa,YAAYhoC,KAA3B,KAAqCgoC,aAAa,CAAC3pC,MAAd,KAAyB,C;;;;;wDACzD,I;;;4BAEH,CAAC,KAAKgc,KAAN,IAAe,KAAKA,KAAL,CAAWhc,MAAX,KAAsB,C;;;;;wDAChC,K;;;AAGX,0BAAI,CAAC2pC,aAAa,CAACC,KAAd,CAAoB,UAACC,IAAD;AAAA,+BAAU,QAAI,CAAC7tB,KAAL,CAAW0D,QAAX,CAAoBmqB,IAApB,CAAV;AAAA,uBAApB,CAAL,EAA+D;AAC7D,6BAAK9N,MAAL,CAAY+N,QAAZ,CAAqB,CAAC,GAAD,CAArB;AACD;;wDACMH,aAAa,CAACC,KAAd,CAAoB,UAACC,IAAD;AAAA,+BAAU,QAAI,CAAC7tB,KAAL,CAAW0D,QAAX,CAAoBmqB,IAApB,CAAV;AAAA,uBAApB,C;;;;;;;;;AACR;;;;QA/B4B,kE;;;yBAAlBN,S,EAAS,8G,EAAA,wH;AAAA,O;;;eAATA,S;AAAS,iBAATA,SAAS,K;AAAA,oBAFR;;;;;wEAEDA,S,EAAS;gBAHrB,wDAGqB;iBAHV;AACVtzB,sBAAU,EAAE;AADF,W;AAGU,U;;;;;;;;;;;;;;;;;;;;;;;;ACPtB;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;;;;;ACSoB;;AAWd;;AACc;;;;;;AADd;;AAAA;;;;UDmBO8zB,qB;AAUX,uCAAoBtb,eAApB,EAAoEvjB,MAApE,EAAsGgO,IAAtG,EAAuH;AAAA;;AAAnG,eAAAuV,eAAA,GAAAA,eAAA;AAAgD,eAAAvjB,MAAA,GAAAA,MAAA;AAAkC,eAAAgO,IAAA,GAAAA,IAAA;AATtG,eAAAE,QAAA,GAAW,EAAX;AAS0H;;;;qCAElH;AAAA;;AAEN,iBAAKmpB,YAAL,GAAoB,KAAK9T,eAAL,CAAqBpW,cAArB,CAAoCjb,SAApC,CAClB,UAAAU,MAAM,EAAI;AACR,kBAAG,QAAI,CAACA,MAAL,IAAeA,MAAlB,EAAyB;AACvB,wBAAI,CAACksC,aAAL,GAAqB,IAArB;AACD;;AAED/rC,qBAAO,CAACC,GAAR,CAAYJ,MAAZ;;AAEA,kBAAGA,MAAM,IAAE,IAAX,EAAgB;AACd,wBAAI,CAACA,MAAL,GAAcA,MAAd;AAEA,wBAAI,CAACksC,aAAL,GAAqB,QAAI,CAAClsC,MAA1B;;AACA,oBAAG,QAAI,CAACA,MAAL,IAAe,IAAlB,EAAuB;AACrBJ,4BAAU,CAAC,YAAM;AACf;AACAyE,qBAAC,CAAC,oBAAD,CAAD,CAAwBoE,KAAxB,CAA8B,MAA9B;AACApE,qBAAC,CAAC,iBAAD,CAAD,CAAqB8K,MAArB;AACA,wBAAImW,KAAK,GAAGlb,WAAW,CAAC,UAACC,GAAD,EAAO;AAC7B,0BAAG;AACC;AACAhG,yBAAC,CAAC,oBAAD,CAAD,CAAwBoE,KAAxB,CAA8B,MAA9B;;AACA,4BAAG,CAACpE,CAAC,CAAC,oBAAD,CAAD,CAAwBkhB,EAAxB,CAA2B,UAA3B,CAAJ,EAA2C;AACzC9X,uCAAa,CAAC6X,KAAD,CAAb;AACD;AAEJ,uBAPD,CAOC,OAAM9gB,CAAN,EAAQ;AACLrE,+BAAO,CAACC,GAAR,CAAYoE,CAAZ;AACH;AACF,qBAXsB,EAWpB,EAXoB,CAAvB;AAYD,mBAhBS,EAgBP,GAhBO,CAAV;AAiBA;;AACV;;AAGS;AACF,eA3BD,MA2BK;AACH,wBAAI,CAAC0nC,aAAL,GAAqB,IAArB;AACD;AAEF,aAvCiB,EAuChB,UAAArqC,KAAK,EAAI,CAAE,CAvCK,CAApB;AA2CA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA2CA,iBAAKuL,MAAL,CAAY2O,aAAZ,CAA0Bzc,SAA1B,CACE,UAAAiF,OAAO,EAAI;AACT3E,wBAAU,CAAC,YAAM;AAChB;AACC,oBAAG2E,OAAH,EAAW;AACT,sBAAIoX,cAAc,GAAG,QAAI,CAACvO,MAAL,CAAYhF,iBAAZ,EAArB;;AACA,sBAAIwT,mBAAmB,GAAG,QAAI,CAACxO,MAAL,CAAY/E,sBAAZ,EAA1B,CAFS,CAGZ;;;AAEG,sBAAG,CAACsT,cAAJ,EAAmB;AAEjB,4BAAI,CAACP,IAAL,CAAUS,QAAV,CAAmB,QAAI,CAACC,aAAL,CAAmBvR,aAAtC,EAAqD,QAArD,EAA+D,qBAA/D;;AACA,4BAAI,CAAC+Q,QAAL,GAAgB,IAAhB;;AACA,4BAAI,CAACF,IAAL,CAAUS,QAAV,CAAmB,QAAI,CAACC,aAAL,CAAmBvR,aAAtC,EAAqD,YAArD,EAAmE,qBAAnE;AACD,mBALD,MAKK;AAEH,4BAAI,CAAC6Q,IAAL,CAAUS,QAAV,CAAmB,QAAI,CAACC,aAAL,CAAmBvR,aAAtC,EAAqD,QAArD,EAA+D,oBAA/D;;AACA,4BAAI,CAAC+Q,QAAL,GAAgB,IAAhB;;AACA,4BAAI,CAACF,IAAL,CAAUS,QAAV,CAAmB,QAAI,CAACC,aAAL,CAAmBvR,aAAtC,EAAqD,YAArD,EAAmE,oBAAnE;AAED;AAGF,iBAnBD,MAmBM,IAAGhG,OAAO,IAAE,IAAZ,EAAiB;AACrB;AACD,iBAFK,MAED;AACH,0BAAI,CAAC6W,IAAL,CAAUS,QAAV,CAAmB,QAAI,CAACC,aAAL,CAAmBvR,aAAtC,EAAqD,QAArD,EAA+D,oBAA/D;;AACA,0BAAI,CAAC6Q,IAAL,CAAUS,QAAV,CAAmB,QAAI,CAACC,aAAL,CAAmBvR,aAAtC,EAAqD,YAArD,EAAmE,oBAAnE;;AACA,0BAAI,CAAC+Q,QAAL,GAAgB,KAAhB;AACD;AACF,eA5BS,EA4BP,GA5BO,CAAV;AA8BD,aAhCH;AAmCA,iBAAKlO,MAAL,CAAYsO,QAAZ,CAAqBpc,SAArB,CACE,UAAAiF,OAAO,EAAI;AACT3E,wBAAU,CAAC,YAAM;AACf,oBAAG2E,OAAH,EAAW;AACT,0BAAI,CAAC+W,QAAL,GAAgB,IAAhB;;AACA,0BAAI,CAACF,IAAL,CAAUS,QAAV,CAAmB,QAAI,CAACC,aAAL,CAAmBvR,aAAtC,EAAqD,QAArD,EAA+D,oBAA/D;;AACA,0BAAI,CAAC6Q,IAAL,CAAUS,QAAV,CAAmB,QAAI,CAACC,aAAL,CAAmBvR,aAAtC,EAAqD,YAArD,EAAmE,oBAAnE;AACD,iBAJD,MAIM,IAAGhG,OAAO,IAAE,IAAZ,EAAiB;AACrB;AACD,iBAFK,MAED;AACH,0BAAI,CAAC6W,IAAL,CAAUS,QAAV,CAAmB,QAAI,CAACC,aAAL,CAAmBvR,aAAtC,EAAqD,YAArD,EAAmE,oBAAnE;;AACA,0BAAI,CAAC+Q,QAAL,GAAgB,KAAhB;AACD;AACF,eAXS,EAWP,GAXO,CAAV;AAaD,aAfH;AAiBD;;;wCAEU;AACT,iBAAKmpB,YAAL,CAAkBrwB,WAAlB;AACD;;;;;;;yBA5JU63B,qB,EAAqB,+K,EAAA,2J,EAAA,wH;AAAA,O;;;cAArBA,qB;AAAqB,0C;AAAA;AAAA;;;;;;;;;;;;;;;ACnClC;;AACI;;AACI;;AACI;;AACI;;AACI;;AAaJ;;AACA;;AAqBJ;;AACJ;;AACA;;AAEI;;AACI;;AAGI;;AACI;;AACI;;AACI;;AACI;;AAAsB;;AAAU;;AACpC;;AACJ;;AACJ;;AACJ;;AAEJ;;AACJ;;AACT;;AAOK;;AACA;;AACI;;AAeJ;;AACJ;;AACJ;;;;AAtF2C;;AAKJ;;AAAA;;AAqCP;;AAAA;;AAkBT;;AAAA;;;;;;qBDxCT,CACV,oEAAQ,YAAR,EAAsB,CACpB,kEAAM,IAAN,EAAY,kEAAM;AAChBhwB,kBAAM,EAAE;AADQ,WAAN,CAAZ,CADoB,EAKpB,kEAAM,KAAN,EAAa,kEAAM;AACjBA,kBAAM,EAAE;AADS,WAAN,CAAb,CALoB,EAQpB,uEAAW,WAAX,EAAwB,oEAAQ,mBAAR,CAAxB,CARoB,EASpB,uEAAW,WAAX,EAAwB,oEAAQ,mBAAR,CAAxB,CAToB,CAAtB,CADU;;;;;;wEAeDgwB,qB,EAAqB;gBAnBjC,uDAmBiC;iBAnBvB;AACThuC,oBAAQ,EAAE,mBADD;AAETC,uBAAW,EAAE,gCAFJ;AAGTC,qBAAS,EAAE,CAAC,gCAAD,CAHF;AAIT+d,sBAAU,EAAE,CACV,oEAAQ,YAAR,EAAsB,CACpB,kEAAM,IAAN,EAAY,kEAAM;AAChBD,oBAAM,EAAE;AADQ,aAAN,CAAZ,CADoB,EAKpB,kEAAM,KAAN,EAAa,kEAAM;AACjBA,oBAAM,EAAE;AADS,aAAN,CAAb,CALoB,EAQpB,uEAAW,WAAX,EAAwB,oEAAQ,mBAAR,CAAxB,CARoB,EASpB,uEAAW,WAAX,EAAwB,oEAAQ,mBAAR,CAAxB,CAToB,CAAtB,CADU;AAJH,W;AAmBuB,U;;;;;;;;;AAQAH,uBAAa,EAAE,CAAF;kBAA5C,uDAA4C;mBAAlC,mB;AAAkC,WAAE;;;;;;;;;;;;;;;;;;;AE/CjD;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;UAmBaqwB,qB;AAEX,yCAAc;AAAA;AAAG;;;;qCAET,CACP;;;;;;;yBALUA,qB;AAAqB,O;;;cAArBA,qB;AAAqB,2C;AAAA,gB;AAAA,e;AAAA;AAAA;ACjBlC;;AAAG;;AAAqB;;;;;;;;wEDiBXA,qB,EAAqB;gBALjC,uDAKiC;iBALvB;AACTluC,oBAAQ,EAAE,oBADD;AAETC,uBAAW,EAAE,iCAFJ;AAGTC,qBAAS,EAAE,CAAC,iCAAD;AAHF,W;AAKuB,U;;;;;;;;;;;;;;;;;;;;AEnBlC;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;;;;;ACmB4C;;AACI;AAAA;;AAAA;;AAAA;;AAAA;;AAAA;AAAA,aAAsC,OAAtC,EAAsC;AAAA;;AAAA;;AAAA;AAAA,WAAtC,EAAsC,OAAtC,EAAsC;AAAA;;AAAA;;AAAA;AAAA,WAAtC;;AAKJ;;;;;;;;AAH6C,kGAAuB,UAAvB,EAAuB,iBAAvB;;;;;;;;AAI7C;;AACI;AAAA;;AAAA;;AAAA;;AAAA;;AAAA;AAAA,aAAsC,OAAtC,EAAsC;AAAA;;AAAA;;AAAA;AAAA,WAAtC,EAAsC,OAAtC,EAAsC;AAAA;;AAAA;;AAAA;AAAA,WAAtC;;AAKJ;;;;;;;;AAHkD,kGAAuB,UAAvB,EAAuB,iBAAvB;;;;;;;;AAIlD;;AAC0B;AAAA;;AAAA;;AAAA;;AAAA;AAAA;;AAD1B;;;;;;;;AAIA;;AACI;;AACI;;AACI;AAAA;;AAAA;;AAAA;;AAAA;AAAA,2CAA8D,eAAY,WAAZ,EAAyBkD,KAAzB,GAAiC,UAA/F,GAA4G,eAAY,WAAZ,EAAyBA,KAAzB,GAAiC,UAA7I;AAAuJ,WAAvJ;;AADJ;;AAMA;;AACJ;;AAkCA;;AACI;;AAAQ;AAAA;;AAAA;;AAAA;;AAAA;AAAA;;AACU;;AAA+B;;AACrD;;AACJ;;;;;;AAxCY;;AAAA;;;;;;AA3BhB;;AAEI;;AAOA;;AAOA;;AAIA;;AAgDJ;;;;;;;;;;AA7DS;;AAAA;;AAOA;;AAAA;;AAIyB;;AAAA;;AAEG;;AAAA;;;;;;;;;;;;AArBzC;;AACI;;AAqEJ;;;;;;AArE8B;;AAAA;;;;;;;;;;;;AAJ1C;;AACI;;AACI;;AACI;;AAuEJ;;AACJ;;AACJ;;;;;;;AA3ES;;AAAA;;AAEiD;;AAAA;;;;UDSrE+qC,gB;AA2BX,kCAAoB/tC,WAApB,EAAsDC,cAAtD,EAAqGC,MAArG,EAA4H;AAAA;;AAAxG,eAAAF,WAAA,GAAAA,WAAA;AAAkC,eAAAC,cAAA,GAAAA,cAAA;AAA+C,eAAAC,MAAA,GAAAA,MAAA;AAxB3F,eAAA8tC,YAAA,GAAe,IAAI,0DAAJ,EAAf;AAEF,eAAA5tC,OAAA,GAAwB,IAAI,4CAAJ,EAAxB;AACA,eAAAC,aAAA,GAA8B,IAAI,4CAAJ,EAA9B;AAIR,eAAAypB,MAAA,GAAmB,EAAnB;AACA,eAAAC,aAAA,GAAgB,KAAhB;AAOA,eAAAkkB,aAAA,GAAgB,EAAhB;AACA,eAAA1tC,aAAA,GAAgB,KAAhB;AAEA,eAAA2tC,WAAA,GAAc,IAAI,wDAAJ,CAAc;AAC1BC,wBAAY,EAAE,IAAI,wDAAJ,CAAc,CAAC,KAAKC,kBAAL,EAAD,CAAd;AADY,WAAd,CAAd;AAOC;;;;qCAEU;AAAA;;AACT,iBAAKF,WAAL,GAAmB,KAAKluC,WAAL,CAAiBc,KAAjB,CAAuB;AACxCqtC,0BAAY,EAAE,KAAKnuC,WAAL,CAAiBe,KAAjB,CAAuB,EAAvB;AAD0B,aAAvB,CAAnB;AAIA,iBAAKsL,SAAL;AACA;;AACA,iBAAKjM,OAAL,CAAaY,IAAb,CAAkB,oEAAa,IAAb,CAAlB,EAAsCC,SAAtC,CACE,UAAAC,IAAI,EAAI;AACNY,qBAAO,CAACC,GAAR,CAAYb,IAAZ;;AACA,sBAAI,CAACC,cAAL,CAAoBD,IAApB;AACD,aAJH;AAOA,iBAAKb,aAAL,CAAmBW,IAAnB,CAAwB,oEAAa,IAAb,CAAxB,EAA4CC,SAA5C,CACE,UAAAC,IAAI,EAAI;AACN,sBAAI,CAACmtC,sBAAL,CAA4BntC,IAAI,CAAC,OAAD,CAAhC,EAA2CA,IAAI,CAAC,GAAD,CAA/C;AACD,aAHH;AAKA,iBAAKG,cAAL;AACD;;;2CAGgB;AACfE,sBAAU,CAAC,YAAM;AACf;AACAyE,eAAC,CAAC,mBAAD,CAAD,CAAuBC,OAAvB,CAA+B;AAC7BC,uBAAO,EAAE;AADoB,eAA/B;AAGD,aALS,EAKP,GALO,CAAV;AAMD;;;sCAEW5E,O,EAAwB;AAAA;;AAClCC,sBAAU,CAAC,YAAM;AACf,kBAAID,OAAO,CAACgtC,WAAR,CAAoB7sC,YAApB,IAAoC,IAAxC,EAA8C;AAC5C,wBAAI,CAACE,MAAL,GAAcL,OAAO,CAACgtC,WAAR,CAAoB7sC,YAAlC;AACA,wBAAI,CAAC0sC,YAAL,GAAoB,QAAI,CAACD,WAAL,CAAiBtsC,GAAjB,CAAqB,cAArB,CAApB;;AACA,wBAAI,CAACusC,YAAL,CAAkBtsC,KAAlB;;AACA,wBAAI,CAACosC,aAAL,GAAqB,EAArB,CAJ4C,CAM5C;;AAEA,wBAAI,CAACtsC,MAAL,CAAYZ,KAAZ,CAAkBiB,OAAlB,CAA0B,UAAAC,OAAO,EAAI;AACnC,sBAAGA,OAAO,CAACsD,KAAR,IAAiB,EAApB,EAAuB;AACrB,4BAAI,CAACgpC,eAAL,CAAqBtsC,OAAO,CAACsD,KAA7B,EAAoCtD,OAAO,CAACG,QAA5C,EAAsDH,OAAO,CAACusC,yBAA9D,EAAyFvsC,OAAO,CAACwsC,QAAjG;;AACA,4BAAI,CAACR,aAAL,CAAmB5rC,IAAnB,CAAwBJ,OAAO,CAACusC,yBAAhC;AACD,mBAHD,MAGK;AACH,4BAAI,CAACD,eAAL,CAAqBtsC,OAAO,CAACE,aAA7B,EAA4CF,OAAO,CAACG,QAApD,EAA8DH,OAAO,CAACusC,yBAAtE,EAAiGvsC,OAAO,CAACwsC,QAAzG;;AACA,4BAAI,CAACR,aAAL,CAAmB5rC,IAAnB,CAAwBJ,OAAO,CAACE,aAAhC;AACD;AAGF,iBAVD;;AAYA,oBAAI,QAAI,CAACR,MAAL,CAAYe,wBAAZ,IAAwChB,SAA5C,EAAuD;AACrD,0BAAI,CAACiB,UAAL,GAAkB,IAAlB;AACA,0BAAI,CAACC,MAAL,GAAc,KAAd;AACA,0BAAI,CAACC,OAAL,GAAe,KAAf;AACD,iBAJD,MAIO,IAAI,QAAI,CAAClB,MAAL,CAAYmB,gBAAZ,IAAgCpB,SAApC,EAA+C;AACpD,0BAAI,CAACiB,UAAL,GAAkB,KAAlB;AACA,0BAAI,CAACC,MAAL,GAAc,IAAd;AACA,0BAAI,CAACC,OAAL,GAAe,KAAf;AACD,iBAJM,MAIA,IAAI,QAAI,CAAClB,MAAL,CAAYoB,iBAAZ,IAAiCrB,SAArC,EAAgD;AACrD,0BAAI,CAACiB,UAAL,GAAkB,KAAlB;AACA,0BAAI,CAACC,MAAL,GAAc,KAAd;AACA,0BAAI,CAACC,OAAL,GAAe,IAAf;AACD;AAEF,eAlCD,MAkCO;AACL,wBAAI,CAAClB,MAAL,GAAc,IAAd;AACD;AACF,aAtCS,EAsCP,EAtCO,CAAV;AAwCD;;;iDAEsBqB,K,EAAOC,K,EAAO;AAAA;;AAEnC,gBAAGD,KAAK,CAACE,IAAN,MAAgB,EAAnB,EAAsB;AACpB,kBAAIC,cAAc,GAAGH,KAArB;AACA,kBAAII,gBAAgB,GAAG,EAAvB;;AACA,kBAAI,KAAKzB,MAAL,CAAYe,wBAAZ,IAAwChB,SAA5C,EAAuD;AACrD0B,gCAAgB,GAAG,KAAKzB,MAAL,CAAYe,wBAA/B;AACD,eAFD,MAEO,IAAI,KAAKf,MAAL,CAAYmB,gBAAZ,IAAgCpB,SAApC,EAA+C;AACpD0B,gCAAgB,GAAG,KAAKzB,MAAL,CAAYmB,gBAA/B;AACD,eAFM,MAEA,IAAI,KAAKnB,MAAL,CAAYoB,iBAAZ,IAAiCrB,SAArC,EAAgD;AACrD0B,gCAAgB,GAAG,KAAKzB,MAAL,CAAYoB,iBAA/B;AACD,eAFM,MAED,IAAI,KAAKpB,MAAL,CAAYuH,SAAZ,CAAsB6B,qBAAtB,IAA+CrJ,SAAnD,EAA8D;AAClE0B,gCAAgB,GAAG,KAAKzB,MAAL,CAAYuH,SAAZ,CAAsB6B,qBAAzC;AACD;;AAEDjJ,qBAAO,CAACC,GAAR,CAAY,KAAKJ,MAAjB;;AAEA,kBAAI,KAAKssC,aAAL,CAAmBhrC,KAAnB,KAA6B,EAA7B,IAAmC,KAAKgrC,aAAL,CAAmBhrC,KAAnB,KAA6BvB,SAApE,EAA+E;AAC7E,oBAAI2B,UAAU,GAAG;AACff,sBAAI,EAAE,WADS;AAEfgB,0BAAQ,EAAE,SAFK;AAGfN,uBAAK,EAAEG;AAHQ,iBAAjB,CAD6E,CAM7E;;AACA,qBAAKlD,cAAL,CAAoBsD,qBAApB,CAA0CH,gBAA1C,EAA4DC,UAA5D,EAAwEpC,SAAxE,CACE,UAAAC,IAAI,EAAI,CACN;AACD,iBAHH,EAGK,UAAAsC,KAAK,EAAI;AACX1B,yBAAO,CAACC,GAAR,CAAYyB,KAAZ;AACA,sBAAG,OAAOA,KAAK,CAACA,KAAb,IAAsB,QAAzB,EACC,QAAI,CAACtD,MAAL,CAAYsD,KAAZ,CAAkBA,KAAK,CAACA,KAAxB,EAA+B,OAA/B,EAAwC;AACtCC,2BAAO,EAAE;AAD6B,mBAAxC;;AAGA,sBAAGD,KAAK,CAACwlB,UAAN,IAAoB,IAAvB,EAA4B;AAC1B,4BAAI,CAACilB,aAAL,CAAmB5rC,IAAnB,CAAwBc,cAAxB;;AACA,4BAAI,CAACjD,MAAL,CAAYuY,OAAZ,CAAoB,iBAApB,EAAuC,EAAvC,EAA2C;AACzChV,6BAAO,EAAE;AADgC,qBAA3C;AAGD;AACF,iBAfH;AAiBD,eAxBD,MAwBO;AACL,oBAAIC,QAAQ,GAAG,KAAKuqC,aAAL,CAAmBhrC,KAAnB,CAAf;AACA,oBAAII,aAAU,GAAG;AACff,sBAAI,EAAE,WADS;AAEfgB,0BAAQ,EAAE,SAFK;AAGfN,uBAAK,EAAEG,cAHQ;AAIf1B,8BAAY,EAAEiC;AAJC,iBAAjB;AAMA5B,uBAAO,CAACC,GAAR,CAAYsB,aAAZ;AACA,qBAAKpD,cAAL,CAAoBsD,qBAApB,CAA0CH,gBAA1C,EAA4DC,aAA5D,EAAwEpC,SAAxE,CACE,UAAAC,IAAI,EAAI,CACN;AACD,iBAHH,EAGK,UAAAsC,KAAK,EAAI;AACV1B,yBAAO,CAACC,GAAR,CAAYyB,KAAZ;;AAEA,sBAAGA,KAAK,CAACgB,MAAN,IAAgB,GAAnB,EAAuB;AACrB,4BAAI,CAACypC,aAAL,CAAmB5rC,IAAnB,CAAwBc,cAAxB;;AACA,4BAAI,CAACjD,MAAL,CAAYuY,OAAZ,CAAoB,iBAApB,EAAuC,EAAvC,EAA2C;AACzChV,6BAAO,EAAE;AADgC,qBAA3C;AAGD,mBALD,MAKK;AACH,4BAAI,CAACvD,MAAL,CAAYsD,KAAZ,CAAkBA,KAAK,CAACA,KAAxB,EAA+B,OAA/B,EAAwC;AACtCC,6BAAO,EAAE;AAD6B,qBAAxC;AAGD;AACF,iBAhBH;AAkBD;AACF;AAGF;;;0CAEeirC,O,EAASzrC,K,EAAO;AAAA;;AAC9B;AACA,gBAAIyrC,OAAO,CAAC9qC,aAAR,CAAsBC,MAAtB,IAAgC,CAApC,EAAuC;AACrC,kBAAIV,cAAc,GAAGurC,OAAO,CAAC9qC,aAAR,CAAsB,CAAtB,EAAyBZ,KAAzB,CAA+BN,wBAApD;AACA,kBAAIU,gBAAgB,GAAG,EAAvB;;AACA,kBAAI,KAAKzB,MAAL,CAAYe,wBAAZ,IAAwChB,SAA5C,EAAuD;AACrD0B,gCAAgB,GAAG,KAAKzB,MAAL,CAAYe,wBAA/B;AACD,eAFD,MAEO,IAAI,KAAKf,MAAL,CAAYmB,gBAAZ,IAAgCpB,SAApC,EAA+C;AACpD0B,gCAAgB,GAAG,KAAKzB,MAAL,CAAYmB,gBAA/B;AACD,eAFM,MAEA,IAAI,KAAKnB,MAAL,CAAYoB,iBAAZ,IAAiCrB,SAArC,EAAgD;AACrD0B,gCAAgB,GAAG,KAAKzB,MAAL,CAAYoB,iBAA/B;AACD,eAFM,MAED,IAAI,KAAKpB,MAAL,CAAYoJ,qBAAZ,IAAqCrJ,SAAzC,EAAoD;AACxD0B,gCAAgB,GAAG,KAAKzB,MAAL,CAAYoJ,qBAA/B;AACD;;AAED,kBAAI,KAAKkjC,aAAL,CAAmBhrC,KAAnB,KAA6BvB,SAAjC,EAA4C;AAC1C,oBAAI2B,UAAU,GAAG;AACff,sBAAI,EAAE,WADS;AAEfgB,0BAAQ,EAAE,SAFK;AAGfN,uBAAK,EAAEG;AAHQ,iBAAjB;AAKArB,uBAAO,CAACC,GAAR,CAAYsB,UAAZ;AACA,qBAAKpD,cAAL,CAAoBsD,qBAApB,CAA0CH,gBAA1C,EAA4DC,UAA5D,EAAwEpC,SAAxE,CACE,UAAAC,IAAI,EAAI;AACNY,yBAAO,CAACC,GAAR,CAAYb,IAAZ;;AACA,0BAAI,CAAChB,MAAL,CAAYuY,OAAZ,CAAoB,iBAApB,EAAuC,EAAvC,EAA2C;AACzChV,2BAAO,EAAE;AADgC,mBAA3C;AAGD,iBANH,EAMK,UAAAD,KAAK,EAAI;AACX1B,yBAAO,CAACC,GAAR,CAAYyB,KAAZ;;AACA,sBAAGA,KAAK,CAACgB,MAAN,IAAgB,GAAnB,EAAuB;AACpB,4BAAI,CAACypC,aAAL,CAAmBhrC,KAAnB,IAA4BE,cAA5B;;AACA,4BAAI,CAACjD,MAAL,CAAYuY,OAAZ,CAAoB,iBAApB,EAAuC,EAAvC,EAA2C;AACzChV,6BAAO,EAAE;AADgC,qBAA3C;AAGD,mBALF,MAKM;AACH,4BAAI,CAACvD,MAAL,CAAYsD,KAAZ,CAAkBA,KAAK,CAACA,KAAxB,EAA+B,OAA/B,EAAwC;AACtCC,6BAAO,EAAE;AAD6B,qBAAxC;AAGD;AACF,iBAlBH;AAoBD,eA3BD,MA2BO;AACL,oBAAIC,QAAQ,GAAG,KAAKuqC,aAAL,CAAmBhrC,KAAnB,CAAf;AACA,oBAAII,aAAU,GAAG;AACff,sBAAI,EAAE,WADS;AAEfgB,0BAAQ,EAAE,SAFK;AAGfN,uBAAK,EAAEG,cAHQ;AAIf1B,8BAAY,EAAEiC;AAJC,iBAAjB;AAMA5B,uBAAO,CAACC,GAAR,CAAYsB,aAAZ;AACA,qBAAKpD,cAAL,CAAoBsD,qBAApB,CAA0CH,gBAA1C,EAA4DC,aAA5D,EAAwEpC,SAAxE,CACE,UAAAC,IAAI,EAAI;AACNY,yBAAO,CAACC,GAAR,CAAYb,IAAZ;;AACA,0BAAI,CAAChB,MAAL,CAAYuY,OAAZ,CAAoB,iBAApB,EAAuC,EAAvC,EAA2C;AACzChV,2BAAO,EAAE;AADgC,mBAA3C;AAGD,iBANH,EAMK,UAAAD,KAAK,EAAI;AACV1B,yBAAO,CAACC,GAAR,CAAYyB,KAAZ;;AACA,sBAAGA,KAAK,CAACwlB,UAAN,IAAoB,IAAvB,EAA4B;AAC1B,4BAAI,CAACilB,aAAL,CAAmBhrC,KAAnB,IAA4BE,cAA5B;;AACA,4BAAI,CAACjD,MAAL,CAAYuY,OAAZ,CAAoB,iBAApB,EAAuC,EAAvC,EAA2C;AACzChV,6BAAO,EAAE;AADgC,qBAA3C;AAGD;AACF,iBAdH;AAgBD;AAEF;AAGF;;;uCAEY;AACX,iBAAKnD,aAAL,GAAqB,EAArB;AACD;;;yCAIcY,I,EAAM;AAAA;;AACnB,iBAAKX,aAAL,GAAqB,IAArB;AACA,iBAAKD,aAAL,GAAqB,EAArB;AACAwB,mBAAO,CAACC,GAAR,CAAY,KAAKJ,MAAjB;;AACA,gBAAI,KAAKA,MAAL,CAAYe,wBAAZ,IAAwChB,SAA5C,EAAuD;AACrD,kBAAI2B,UAAU,GAAG;AACfa,oBAAI,EAAEhD,IADS;AAEfiD,0BAAU,EAAE,YAFG;AAGf7B,oBAAI,EAAE,EAHS;AAIf8B,mBAAG,EAAE,EAJU;AAKfC,wBAAQ,EAAE,OALK;AAMfC,sBAAM,EAAE,EANO;AAOfC,oBAAI,EAAE,EAPS;AAQfC,sBAAM,EAAE,EARO;AASfC,sBAAM,EAAE,CATO;AAUfC,qBAAK,EAAE;AAVQ,eAAjB,CADqD,CAarD;;AAEA,mBAAKzE,cAAL,CAAoB0E,qBAApB,CAA0CtB,UAA1C,EAAsDpC,SAAtD,CACE,UAAAC,IAAI,EAAI;AACNY,uBAAO,CAACC,GAAR,CAAYb,IAAZ;AACA,wBAAI,CAACZ,aAAL,GAAqBY,IAAI,CAAC,MAAD,CAAzB;AACA,wBAAI,CAACX,aAAL,GAAqB,KAArB;AACD,eALH,EAKK,UAAAiD,KAAK,EAAI;AACV;AACA,wBAAI,CAACjD,aAAL,GAAqB,KAArB;AACD,eARH;AAWD,aA1BD,MA0BO,IAAI,KAAKoB,MAAL,CAAYmB,gBAAZ,IAAgCpB,SAApC,EAA+C;AACpD,kBAAIqC,KAAK,GAAG,KAAKpC,MAAL,CAAYiD,kBAAxB;AACA,kBAAIvB,aAAU,GAAG;AACfa,oBAAI,EAAEhD,IADS;AAEfmD,wBAAQ,EAAE,OAFK;AAGfP,4BAAY,EAAEC,KAHC;AAIfe,yBAAS,EAAE,EAJI;AAKfC,wBAAQ,EAAE,EALK;AAMfC,+BAAe,EAAE;AANF,eAAjB;AASA,mBAAK/E,cAAL,CAAoBgF,WAApB,CAAgC5B,aAAhC,EAA4CpC,SAA5C,CACE,UAAAC,IAAI,EAAI;AACN;AACA,wBAAI,CAACZ,aAAL,GAAqBY,IAAI,CAAC,MAAD,CAAzB;AACA,wBAAI,CAACX,aAAL,GAAqB,KAArB;AACD,eALH,EAKK,UAAAiD,KAAK,EAAI;AACV;AACA,wBAAI,CAACjD,aAAL,GAAqB,KAArB;AACD,eARH;AAUD,aArBM,MAqBA,IAAI,KAAKoB,MAAL,CAAYoB,iBAAZ,IAAiCrB,SAArC,EAAgD;AAErD,kBAAI2B,aAAU,GAAG;AACfa,oBAAI,EAAEhD,IADS;AAEfiD,0BAAU,EAAE,YAFG;AAGf7B,oBAAI,EAAE,EAHS;AAIf8B,mBAAG,EAAE,EAJU;AAKfC,wBAAQ,EAAE,OALK;AAMfC,sBAAM,EAAE,EANO;AAOfC,oBAAI,EAAE,EAPS;AAQfC,sBAAM,EAAE,EARO;AASfC,sBAAM,EAAE,CATO;AAUfC,qBAAK,EAAE;AAVQ,eAAjB;AAaA,mBAAKzE,cAAL,CAAoBiF,oBAApB,CAAyC7B,aAAzC,EAAqDpC,SAArD,CACE,UAAAC,IAAI,EAAI;AACN;AACA,wBAAI,CAACZ,aAAL,GAAqBY,IAArB;AACA,wBAAI,CAACX,aAAL,GAAqB,KAArB;AACD,eALH,EAKK,UAAAiD,KAAK,EAAI;AACV;AACA,wBAAI,CAACjD,aAAL,GAAqB,KAArB;AACD,eARH;AAUD,aAzBM,MAyBA,IAAI,KAAKoB,MAAL,CAAYoJ,qBAAZ,IAAqCrJ,SAAzC,EAAoD;AAEzD,kBAAI2B,aAAU,GAAG;AACfa,oBAAI,EAAEhD,IADS;AAEfiD,0BAAU,EAAE,YAFG;AAGf7B,oBAAI,EAAE,EAHS;AAIf8B,mBAAG,EAAE,EAJU;AAKfC,wBAAQ,EAAE,OALK;AAMfC,sBAAM,EAAE,EANO;AAOfC,oBAAI,EAAE,EAPS;AAQfC,sBAAM,EAAE,EARO;AASfC,sBAAM,EAAE,CATO;AAUfC,qBAAK,EAAE;AAVQ,eAAjB;AAaA,mBAAKzE,cAAL,CAAoB0E,qBAApB,CAA0CtB,aAA1C,EAAsDpC,SAAtD,CACE,UAAAC,IAAI,EAAI;AACNY,uBAAO,CAACC,GAAR,CAAYb,IAAZ;AACA,wBAAI,CAACZ,aAAL,GAAqBY,IAAI,CAAC,MAAD,CAAzB;AACA,wBAAI,CAACX,aAAL,GAAqB,KAArB;AACD,eALH,EAKK,UAAAiD,KAAK,EAAI;AACV;AACA,wBAAI,CAACjD,aAAL,GAAqB,KAArB;AACD,eARH;AAUD,aAzBM,MAyBA;AACL,mBAAKA,aAAL,GAAqB,KAArB;AACD,aAvGkB,CAwGnB;;AAED;;;8CAEmBqF,G,EAAKC,C,EAAG;AAC1B,gBAAID,GAAG,CAACE,MAAJ,IAAcpE,SAAlB,EAA6B;AAC3B,kBAAIsB,KAAK,GAAG4C,GAAG,CAACE,MAAJ,CAAW9C,KAAvB;AACA,mBAAK3C,aAAL,CAAmB0F,IAAnB,CAAwB;AAAE/C,qBAAK,EAALA,KAAF;AAAS6C,iBAAC,EAADA;AAAT,eAAxB;AACD;AACF;;;yCAEcD,G,EAAK;AAClB,gBAAIA,GAAG,CAACE,MAAJ,IAAcpE,SAAlB,EAA6B;AAC3B,mBAAKtB,OAAL,CAAa2F,IAAb,CAAkBH,GAAG,CAACE,MAAJ,CAAW9C,KAA7B;AACD;AAEF;;;sCACQ;AACP,iBAAKkrC,WAAL,CAAiB9/B,YAAjB,CAA8BpN,IAA9B,CAAmC,oEAAa,GAAb,CAAnC,EAAsDC,SAAtD,CAAgE,UAAAoN,YAAY,EAAI,CAC9E;AACD,aAFD;AAGD;;;6CAEkBlI,C,EAAIN,C,EAAI4rB,E,EAAKkd,E,EAAK;AACnC,gBAAIxoC,CAAC,IAAIzE,SAAT,EAAoB;AAClB,qBAAO,KAAK1B,WAAL,CAAiBc,KAAjB,CAAuB;AAC5BsF,sBAAM,EAAE,IADoB;AAE5BhE,wBAAQ,EAAE,KAFkB;AAG5BmE,8BAAc,EAAE,IAHY;AAI5BqoC,yBAAS,EAAG;AAJgB,eAAvB,CAAP;AAMD,aAPD,MAOO;AACL,qBAAO,KAAK5uC,WAAL,CAAiBc,KAAjB,CAAuB;AAC5BsF,sBAAM,EAAED,CADoB;AAE5B/D,wBAAQ,EAAEyD,CAFkB;AAG5BU,8BAAc,EAAEkrB,EAHY;AAI5Bmd,yBAAS,EAAGD;AAJgB,eAAvB,CAAP;AAMD;AAEF;;;0CAEexoC,C,EAAIN,C,EAAI4rB,E,EAAKkd,E,EAAK;AAChC,iBAAKR,YAAL,GAAoB,KAAKD,WAAL,CAAiBtsC,GAAjB,CAAqB,cAArB,CAApB;;AAEA,gBAAIuE,CAAC,IAAIzE,SAAT,EAAoB;AAClB,mBAAKysC,YAAL,CAAkB9rC,IAAlB,CAAuB,KAAK+rC,kBAAL,EAAvB;AACD,aAFD,MAEO;AACL,mBAAKD,YAAL,CAAkB9rC,IAAlB,CAAuB,KAAK+rC,kBAAL,CAAwBjoC,CAAxB,EAA2BN,CAA3B,EAA8B4rB,EAA9B,EAAkCkd,EAAlC,CAAvB;AACD;;AAED,iBAAKX,YAAL,CAAkBa,IAAlB,CAAuB,KAAKV,YAAL,CAAkBtqC,MAAzC;AACA,iBAAKxC,cAAL;AACD;;;wCAEa4B,K,EAAO;AAAA;;AACnB,iBAAKkrC,YAAL,GAAoB,KAAKD,WAAL,CAAiBtsC,GAAjB,CAAqB,cAArB,CAApB;AAEA,gBAAI2E,cAAc,GAAG,KAAK4nC,YAAL,CAAkBlqC,EAAlB,CAAqBhB,KAArB,EAA4BrB,GAA5B,CAAgC,gBAAhC,EAAkDoB,KAAvE,CAHmB,CAInB;;AACA,gBAAGuD,cAAc,IAAI,EAAlB,IAAwBA,cAAc,IAAI,IAA7C,EAAkD;AAChDA,4BAAc,GAAG,KAAK4nC,YAAL,CAAkBlqC,EAAlB,CAAqBhB,KAArB,EAA4BrB,GAA5B,CAAgC,QAAhC,EAA0CoB,KAA3D,CADgD,CAEhD;AACD;;AAED,gBAAI,KAAKrB,MAAL,CAAYe,wBAAZ,IAAwChB,SAA5C,EAAuD;AAErD,kBAAIqC,KAAK,GAAG,KAAKpC,MAAL,CAAYe,wBAAxB;AAEA,kBAAIW,UAAU,GAAG;AACfC,wBAAQ,EAAE,SADK;AAEfN,qBAAK,EAAEuD;AAFQ,eAAjB,CAJqD,CASrD;AACA;;AACA,mBAAKtG,cAAL,CAAoBuG,wBAApB,CAA6CzC,KAA7C,EAAoDV,UAApD,EAAgEpC,SAAhE,CACE,UAAAC,IAAI,EAAI;AACN;AACA,wBAAI,CAACjB,cAAL,CAAoBwG,aAApB,CAAkC,QAAI,CAAC9E,MAAvC;;AACA,wBAAI,CAACzB,MAAL,CAAYuY,OAAZ,CAAoB,iBAApB,EAAuC,EAAvC,EAA2C;AACzChV,yBAAO,EAAE;AADgC,iBAA3C;AAGD,eAPH,EAOK,UAAAD,KAAK,EAAI;AACV1B,uBAAO,CAACC,GAAR,CAAYyB,KAAZ;;AACA,wBAAI,CAACtD,MAAL,CAAYsD,KAAZ,CAAkBA,KAAK,CAACA,KAAxB,EAA+B,OAA/B,EAAwC;AACtCC,yBAAO,EAAE;AAD6B,iBAAxC;AAGD,eAZH;AAcD,aAzBD,MAyBO,IAAI,KAAK9B,MAAL,CAAYmB,gBAAZ,IAAgCpB,SAApC,EAA+C;AACpD,kBAAIgF,MAAM,GAAG,KAAK/E,MAAL,CAAYmB,gBAAzB;AAEA,kBAAIO,aAAU,GAAG;AACfC,wBAAQ,EAAE,SADK;AAEfN,qBAAK,EAAEuD;AAFQ,eAAjB,CAHoD,CAQpD;;AAEA,mBAAKtG,cAAL,CAAoBuG,wBAApB,CAA6CE,MAA7C,EAAqDrD,aAArD,EAAiEpC,SAAjE,CACE,UAAAC,IAAI,EAAI;AACN;AACA,wBAAI,CAACjB,cAAL,CAAoBwG,aAApB,CAAkC,QAAI,CAAC9E,MAAvC;;AACA,wBAAI,CAACzB,MAAL,CAAYuY,OAAZ,CAAoB,iBAApB,EAAuC,EAAvC,EAA2C;AACzChV,yBAAO,EAAE;AADgC,iBAA3C;AAGD,eAPH,EAOK,UAAAD,KAAK,EAAI;AACV;AACA,wBAAI,CAACtD,MAAL,CAAYsD,KAAZ,CAAkBA,KAAK,CAACA,KAAxB,EAA+B,OAA/B,EAAwC;AACtCC,yBAAO,EAAE;AAD6B,iBAAxC;AAGD,eAZH;AAeD,aAzBM,MAyBA,IAAI,KAAK9B,MAAL,CAAYoB,iBAAZ,IAAiCrB,SAArC,EAAgD;AACrD,kBAAIiF,OAAO,GAAG,KAAKhF,MAAL,CAAYoB,iBAA1B;AAEA,kBAAIM,aAAU,GAAG;AACff,oBAAI,EAAE,YADS;AAEfgB,wBAAQ,EAAE,SAFK;AAGfN,qBAAK,EAAEuD;AAHQ,eAAjB,CAHqD,CASrD;;AAEA,mBAAKtG,cAAL,CAAoBuG,wBAApB,CAA6CG,OAA7C,EAAsDtD,aAAtD,EAAkEpC,SAAlE,CACE,UAAAC,IAAI,EAAI;AACN;AACA,wBAAI,CAACjB,cAAL,CAAoBwG,aAApB,CAAkC,QAAI,CAAC9E,MAAvC;;AACA,wBAAI,CAACzB,MAAL,CAAYuY,OAAZ,CAAoB,iBAApB,EAAuC,EAAvC,EAA2C;AACzChV,yBAAO,EAAE;AADgC,iBAA3C;AAGD,eAPH,EAOK,UAAAD,KAAK,EAAI;AACV1B,uBAAO,CAACC,GAAR,CAAYyB,KAAZ;AACD,eATH;AAWD,aAtBM,MAsBA,IAAI,KAAK7B,MAAL,CAAYoJ,qBAAZ,IAAqCrJ,SAAzC,EAAoD;AACzD,kBAAIyvB,MAAM,GAAG,KAAKxvB,MAAL,CAAYoJ,qBAAzB;AAEA,kBAAI1H,aAAU,GAAG;AACff,oBAAI,EAAE,YADS;AAEfgB,wBAAQ,EAAE,SAFK;AAGfN,qBAAK,EAAEuD;AAHQ,eAAjB,CAHyD,CASzD;;AAEA,mBAAKtG,cAAL,CAAoBuG,wBAApB,CAA6C2qB,MAA7C,EAAqD9tB,aAArD,EAAiEpC,SAAjE,CACE,UAAAC,IAAI,EAAI;AACN;AACA,wBAAI,CAACjB,cAAL,CAAoBwG,aAApB,CAAkC,QAAI,CAAC9E,MAAvC;;AACA,wBAAI,CAACzB,MAAL,CAAYuY,OAAZ,CAAoB,iBAApB,EAAuC,EAAvC,EAA2C;AACzChV,yBAAO,EAAE;AADgC,iBAA3C;AAGD,eAPH,EAOK,UAAAD,KAAK,EAAI;AACV1B,uBAAO,CAACC,GAAR,CAAYyB,KAAZ;AACD,eATH;AAWD;;AACD,iBAAKyqC,aAAL,CAAmBrnC,MAAnB,CAA0B3D,KAA1B,EAAiC,CAAjC;AACA,iBAAKkrC,YAAL,CAAkBtnC,QAAlB,CAA2B5D,KAA3B;AAEA,iBAAK+qC,YAAL,CAAkBa,IAAlB,CAAuB,KAAKV,YAAL,CAAkBtqC,MAAzC;AACD;;;;;;;yBA/gBUkqC,gB,EAAgB,2H,EAAA,+K,EAAA,yH;AAAA,O;;;cAAhBA,gB;AAAgB,qC;AAAA;AAAA;AAAA,S;AAAA;AAAA;AAAA,S;AAAA,sF;AAAA,iB;AAAA,e;AAAA,g2E;AAAA;AAAA;ACvB7B;;AACI;;AACI;;AACI;;AACI;;AAAsB;;AAAQ;;AAC9B;;AAAG;AAAA,qBAAS,IAAAQ,eAAA,EAAT;AAA0B,aAA1B;;AAA4C;;AAA4B;;AACjC;;AAAO;;AACjD;;AAEI;;AAEI;;AA6EJ;;AACJ;;AACJ;;AACJ;;AACJ;;AACJ;;;;AA7FM;;AAW2C;;AAAA;;;;;;;;;wEDYpCR,gB,EAAgB;gBAL5B,uDAK4B;iBALlB;AACTnuC,oBAAQ,EAAE,cADD;AAETC,uBAAW,EAAE,2BAFJ;AAGTC,qBAAS,EAAE,CAAC,2BAAD;AAHF,W;AAKkB,U;;;;;;;;;AAElBwuC,qBAAW,EAAE,CAAF;kBAAnB;AAAmB,WAAE,C;AACZN,sBAAY;kBAArB;AAAqB;;;;;;;;;;;;;;;;;;;AE5BxB;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;UAmBac,oB;AAEX,wCAAc;AAAA;AAAG;;;;qCAET,CACP;;;;;;;yBALUA,oB;AAAoB,O;;;cAApBA,oB;AAAoB,yC;AAAA,gB;AAAA,e;AAAA,+F;AAAA;AAAA;ACjBjC;;AACI;;AACI;;AACI;;AACJ;;AACJ;;AACJ;;;;;;;;;wEDWaA,oB,EAAoB;gBALhC,uDAKgC;iBALtB;AACTlvC,oBAAQ,EAAE,kBADD;AAETC,uBAAW,EAAE,+BAFJ;AAGTC,qBAAS,EAAE,CAAC,+BAAD;AAHF,W;AAKsB,U;;;;;;;;;;;;;;;;;;;;AEnBjC;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;;;ACkC4B;;;;;;AAAkD,2FAAgB,SAAhB,EAAgB,oBAAhB;;;;;;AAGlD;;;;;;;;AAJJ;;AACI;;AAGA;;AACA;;AACI;;AAAiE;AAAA;AAAA;AAAA;;AAAjE;;AACJ;;AACA;;AACI;;AAA8C;;AACN;AAAA;;AAAA;;AAAA,mBAAS,WAAT;AAAyB,WAAzB;;AAA2B;;AAAI;;AACvE;;AACI;;AAAuC;;AAAU;;AACjD;;AACI;;AAAI;;AAAY;;AAChB;;AAAG;;AAC8E;;AACrF;;AACA;;AACI;;AAA6C;AAAA;;AAAA;;AAAA,mBAAS,WAAT;AAAyB,WAAzB;;AAA2B;;AAAM;;AAC9E;;AAA6C;AAAA;;AAAA;;AAAA,mBAAS,WAAT;AAAyB,WAAzB;;AAA2B;;AAAI;;AAC5E;;AACI;AAAA;;AAAA;;AAAA,mBAAS,WAAT;AAAyB,WAAzB;;AAA2B;;AAC/B;;AACJ;;AACJ;;AACJ;;AACA;;AACI;;AAAQ;AAAA;;AAAA;;AAAA;;AAAA;AAAA;;AAA4E;;AAA+B;;AACvH;;AACJ;;;;;;;;AA9ByE;;AAEtC;;AAAA;;AAE0E;;AAAA;;AAO5D;;AAAA,wFAAoB,UAApB,EAAoB,KAApB;;;;;;;;;;;;AAlBrD;;AACI;;AACI;;AACI;;AAAQ;;AAAY;;AACpB;;AAAQ;;AAAG;;AACf;;AACJ;;AACA;;AA+BJ;;;;;;AArC0B;;AAAA;;AAMa;;AAAA;;;;;;AAmDvB;;;;;;AAAkD,4FAAgB,SAAhB,EAAgB,qBAAhB;;;;;;AAGlD;;;;;;;;AAJJ;;AACI;;AAGA;;AACA;;AACI;;AAAiE;AAAA;AAAA;AAAA;;AAAjE;;AACJ;;AACA;;AACI;;AAA8C;;AACD;;AACjD;;AACA;;AACI;;AAAQ;AAAA;;AAAA;;AAAA;;AAAA;AAAA;;AAA+D;;AAA+B;;AAC1G;;AACA;;AACI;;AAAsD;AAAA;;AAAA;;AAAA,mBAAS,WAAT;AAAyB,WAAzB;;AAClD;;AACJ;;AACA;;AACI;;AAAuC;;AAAuB;;AAC9D;;AACI;;AACI;;AAAwD;;AAAM;;AAC9D;;AACI;;AACJ;;AACJ;;AAEA;;AACI;;AAAwD;;AAAW;;AACnE;;AACI;;AACJ;;AACJ;;AACJ;;AACJ;;AACJ;;AACJ;;;;;;;;AAtCyE;;AAEtC;;AAAA;;AAE0E;;AAAA;;;;;;AAPrH;;AAEI;;AACI;;AAuCJ;;AACJ;;;;AAxC2C;;AAAA;;;;;;AA6D/B;;;;;;AAAkD,4FAAgB,SAAhB,EAAgB,qBAAhB;;;;;;AAGlD;;;;;;;;AAJJ;;AACI;;AAGA;;AACA;;AACI;;AAAiE;AAAA;AAAA;AAAA;;AAAjE;;AACJ;;AACA;;AACI;;AAA8C;;AACD;;AACjD;;AACA;;AACI;;AAAQ;AAAA;;AAAA;;AAAA;;AAAA;AAAA;;AAAyE;;AAA+B;;AACpH;;AACJ;;;;;;;;AAfyE;;AAEtC;;AAAA;;AAE0E;;AAAA;;;;;;AAPrH;;AAEI;;AACI;;AAgBJ;;AACJ;;;;AAjB2C;;AAAA;;;;;;;;AA7InE;;AACI;;AACI;;AAAwD;;AAAM;;AAC9D;;AACI;;AACJ;;AACJ;;AAEA;;AACI;;AAAwD;;AAAW;;AACnE;;AACI;;AACJ;;AACJ;;AAIA;;AACI;;AACI;;AACI;;AAAsB;;AAAG;;AAAqB;;AAAI;;AAClD;;AAAG;AAAA;;AAAA;;AAAA;AAAA;;AAAmD;;AAA4B;;AAAiC;;AAAO;;AAE1H;;AACI;;AAwCJ;;AACJ;;AACJ;;AACJ;;AAGA;;AACI;;AACI;;AACI;;AAAsB;;AAAG;;AAAM;;AAAI;;AACnC;;AAAmB;AAAA;;AAAA;;AAAA;AAAA;;AAAsB;;AAA4B;;AAAiC;;AAAO;;AAE7G;;AACI;;AACI;;AA4CJ;;AAEJ;;AACJ;;AACJ;;AACJ;;AAGC;;AACG;;AACI;;AACI;;AAAsB;;AAAG;;AAAiB;;AAAI;;AAC9C;;AAAmB;AAAA;;AAAA;;AAAA;AAAA;;AAAgC;;AAA4B;;AAAiC;;AAAO;;AAEvH;;AACI;;AACI;;AAqBJ;;AAEJ;;AACJ;;AACJ;;AACJ;;AA8DJ;;;;;;AAlOM;;AAwBgH;;AAAA;;AAsDtE;;AAAA;;AA4DA;;AAAA;;;;UDpHnCivC,2B;AAwBX,6CAAoBnlB,WAApB,EAAsD3pB,cAAtD,EAAqGD,WAArG,EAA+H;AAAA;;AAA3G,eAAA4pB,WAAA,GAAAA,WAAA;AAAkC,eAAA3pB,cAAA,GAAAA,cAAA;AAA+C,eAAAD,WAAA,GAAAA,WAAA;AAtBrG,eAAA6pB,WAAA,GAAc,KAAd;AAGA,eAAAC,MAAA,GAAmB,EAAnB;AACA,eAAAC,aAAA,GAAgB,KAAhB;AACA,eAAA3hB,OAAA,GAAU,CAAV;AAKA,eAAA4mC,kBAAA,GAAqB,IAAI,wDAAJ,CAAc;AACjCzpC,iBAAK,EAAE,IAAI,0DAAJ,CAAgB,EAAhB,CAD0B;AAEjC0pC,sBAAU,EAAG,IAAI,0DAAJ,CAAgB,EAAhB,CAFoB;AAGjCC,+BAAmB,EAAE,IAAI,wDAAJ,CAAc,CAAC,KAAKC,yBAAL,EAAD,CAAd,CAHY;AAIjCC,kBAAM,EAAE,IAAI,wDAAJ,CAAc,CAAC,KAAKC,YAAL,EAAD,CAAd,CAJyB;AAKjCC,4BAAgB,EAAE,IAAI,wDAAJ,CAAc,CAAC,KAAKC,sBAAL,EAAD,CAAd;AALe,WAAd,CAArB;AAaC;;;;qCAEU;AAET,iBAAKP,kBAAL,GAA0B,KAAKhvC,WAAL,CAAiBc,KAAjB,CAAuB;AAC/CyE,mBAAK,EAAE,EADwC;AAE/C0pC,wBAAU,EAAG,EAFkC;AAG/CC,iCAAmB,EAAE,KAAKlvC,WAAL,CAAiBe,KAAjB,CAAuB,CAAC,KAAKouC,yBAAL,EAAD,CAAvB,CAH0B;AAI/CC,oBAAM,EAAE,KAAKpvC,WAAL,CAAiBe,KAAjB,CAAuB,CAAC,KAAKsuC,YAAL,EAAD,CAAvB,CAJuC;AAK/CC,8BAAgB,EAAE,KAAKtvC,WAAL,CAAiBe,KAAjB,CAAuB,CAAC,KAAKwuC,sBAAL,EAAD,CAAvB;AAL6B,aAAvB,CAA1B;AAOA,iBAAKljC,SAAL;AACA,iBAAKke,UAAL;AACA,iBAAKlpB,cAAL;AACD;;;sCAEWC,O,EAAwB;AAAA;;AAClCC,sBAAU,CAAC,YAAK;AACd,kBAAG,QAAI,CAACI,MAAL,IAAeL,OAAO,CAAC8lB,kBAAR,CAA2B3lB,YAA7C,EAA0D;AACxD,oBAAG,QAAI,CAAC6tC,gBAAL,IAAyB,IAA5B,EAAiC;AAC/B,0BAAI,CAACA,gBAAL,CAAsBztC,KAAtB;;AACA,0BAAI,CAACqtC,mBAAL,CAAyBrtC,KAAzB;;AACA,0BAAI,CAACutC,MAAL,CAAYvtC,KAAZ;AACD;AACF;;AACD,sBAAI,CAAC0oB,UAAL;;AACA,sBAAI,CAAC5oB,MAAL,GAAcL,OAAO,CAAC8lB,kBAAR,CAA2B3lB,YAAzC;;AACA,kBAAG,QAAI,CAACE,MAAL,IAAe,IAAlB,EAAuB;AACrB,wBAAI,CAACqtC,kBAAL,CAAwBptC,GAAxB,CAA4B,OAA5B,EAAqCY,QAArC,CAA8C,QAAI,CAACb,MAAL,CAAY4D,KAA1D,EAAiE;AAAC9C,2BAAS,EAAC;AAAX,iBAAjE;AACD;;AACD,sBAAI,CAACpB,cAAL;AACH,aAdW,EAcT,EAdS,CAAV;AAeD;;;2CAEa;AACZE,sBAAU,CAAC,YAAM;AACf;AACAyE,eAAC,CAAC,mBAAD,CAAD,CAAuBC,OAAvB,CAA+B;AAC7BC,uBAAO,EAAG;AADmB,eAA/B;AAGD,aALS,EAKP,GALO,CAAV;AAMD;;;uCAEoB;AAAA;;AACnB,iBAAK6jB,aAAL,GAAqB,IAArB;AACA,iBAAKH,WAAL,CAAiBc,SAAjB,GAA6BzpB,SAA7B,CAAuC,UAAA4N,CAAC,EAAI;AAC1C,sBAAI,CAACib,MAAL,GAAcjb,CAAd;AACA,sBAAI,CAACkb,aAAL,GAAqB,KAArB;AACD,aAHD;AAID;;;sCAEQ;AACP,iBAAKilB,kBAAL,CAAwB5gC,YAAxB,CAAqCpN,IAArC,CAA0C,oEAAa,GAAb,CAA1C,EAA6DC,SAA7D,CAAuE,UAAAoN,YAAY,EAAI,CACrF;AACD,aAFD;AAGD;;;yCAEW;AACV,mBAAO,KAAKrO,WAAL,CAAiBc,KAAjB,CAAuB;AAC5BgF,oBAAM,EAAE;AADoB,aAAvB,CAAP;AAGD;;;sCAEW;AACV,iBAAKspC,MAAL,GAAc,KAAKJ,kBAAL,CAAwBptC,GAAxB,CAA4B,QAA5B,CAAd;AACA,iBAAKwtC,MAAL,CAAY/sC,IAAZ,CAAiB,KAAKgtC,YAAL,EAAjB;AACA,iBAAKhuC,cAAL;AACD;;;uCAEY4B,K,EAAO;AAClB,iBAAKmsC,MAAL,GAAc,KAAKJ,kBAAL,CAAwBptC,GAAxB,CAA4B,QAA5B,CAAd;AACA,iBAAKwtC,MAAL,CAAYvoC,QAAZ,CAAqB5D,KAArB;AACD;;;mDAEwB;AACvB,iBAAKisC,mBAAL,GAA2B,KAAKF,kBAAL,CAAwBptC,GAAxB,CAA4B,qBAA5B,CAA3B;AACA,iBAAKstC,mBAAL,CAAyB7sC,IAAzB,CAA8B,KAAK8sC,yBAAL,EAA9B;AACA,iBAAK9tC,cAAL;AACD;;;oDAEyB4B,K,EAAO;AAC/B,iBAAKisC,mBAAL,GAA2B,KAAKF,kBAAL,CAAwBptC,GAAxB,CAA4B,qBAA5B,CAA3B;AACA,iBAAKstC,mBAAL,CAAyBroC,QAAzB,CAAkC5D,KAAlC;AACD;;;gDAEqB;AACpB,iBAAKqsC,gBAAL,GAAwB,KAAKN,kBAAL,CAAwBptC,GAAxB,CAA4B,kBAA5B,CAAxB;AACA,iBAAK0tC,gBAAL,CAAsBjtC,IAAtB,CAA2B,KAAKktC,sBAAL,EAA3B;AACA,iBAAKluC,cAAL;AACD;;;iDAEsB4B,K,EAAO;AAC5B,iBAAKqsC,gBAAL,GAAwB,KAAKN,kBAAL,CAAwBptC,GAAxB,CAA4B,kBAA5B,CAAxB;AACA,iBAAK0tC,gBAAL,CAAsBzoC,QAAtB,CAA+B5D,KAA/B;AACD;;;sDAGwB;AACvB,mBAAO,KAAKjD,WAAL,CAAiBc,KAAjB,CAAuB;AAC5BwC,sBAAQ,EAAE,EADkB;AAE5B8C,oBAAM,EAAE;AAFoB,aAAvB,CAAP;AAID;;;mDAEqB;AACpB,mBAAO,KAAKpG,WAAL,CAAiBc,KAAjB,CAAuB;AAC5BgF,oBAAM,EAAE;AADoB,aAAvB,CAAP;AAGD;;;;;;;yBArIUipC,2B,EAA2B,2J,EAAA,+K,EAAA,2H;AAAA,O;;;cAA3BA,2B;AAA2B,iD;AAAA;AAAA;AAAA,S;AAAA,sF;AAAA,gB;AAAA,e;AAAA,67G;AAAA;AAAA;ACtBxC;;;;AAAwC;;;;;;;;;wEDsB3BA,2B,EAA2B;gBALvC,uDAKuC;iBAL7B;AACTnvC,oBAAQ,EAAE,0BADD;AAETC,uBAAW,EAAE,uCAFJ;AAGTC,qBAAS,EAAE,CAAC,uCAAD;AAHF,W;AAK6B,U;;;;;;;;;AAU7BsnB,4BAAkB;kBAA1B;AAA0B;;;;;;;;;;;;;;;;;;;AElC7B;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;;;;;ACmB4B;;AAAK;AAAA;;AAAA;;AAAA;;AAAA;AAAA;;AAAoG;;AAEjD;;AAChB;;AACxC;;;;;;AACA;;AACI;;AACJ;;;;;;;;AAdR;;AACI;;AACI;;AAAwD;;AAAgB;;AAC5E;;AACA;;AACI;;AACmB;AAAA;;AAAA;;AAAA;;AAAA;AAAA;;AAAwF;;AAC3G;;AAKA;;AAIJ;;AACJ;;;;;;;;;AAfgE;;AAAA;;AAIM;;AAAA;;AACM;;AAAA;;AAKrC;;AAAA;;;;;;AAa3B;;AAAqI;;AAAM;;;;;;;;;;AAAjG,8HAA8C,UAA9C,EAA8C,sCAA9C;;AAA2F;;AAAA;;;;;;AAEzI;;AACI;;AACJ;;;;;;;;AARJ;;AACI;;AAC2C;AAAA;;AAAA;;AAAA;;AAAA;AAAA;;AACvC;;AAAiB;;AAAiB;;AAClC;;AACJ;;AACA;;AAGJ;;;;;;;;;;;AATsB;;AAIS;;AAAA;;AAEI;;AAAA;;;;;;AAY/B;;AACI;;AACJ;;;;;;;;AAVJ;;AACI;;AACmB;AAAA;;AAAA;;AAAA;;AAAA;AAAA;;AAAyD;;AAC5E;;AAAK;AAAA;;AAAA;;AAAA;;AAAA;AAAA;;AAA+D;;AAEZ;;AAChB;;AACxC;;AACA;;AAGJ;;;;;;;;;AAXkC;;AAQC;;AAAA;;;;;;AApBvC;;AAEI;;AAUA;;AAYJ;;;;;;;;AAtB+C;;AAAA;;AAUY;;AAAA;;;;;;AAwBnE;;;;;;AAAuL;;;;;;;;AACvL;;AAAiG;AAAA;;AAAA;;AAAA;AAAA;;AAAqD;;AAA2B;;;;;;;;AACjL;;AAAgG;AAAA;;AAAA;;AAAA;;AAAA;AAAA;AAAA;;AAAuE;;AAA4B;;;;;;AAP3M;;AACI;;AACI;;AAA0B;;AAAS;;AACvC;;AACA;;AACI;;AACA;;AACA;;AACJ;;AACJ;;;;;;AAJgB;;AAAA;;AAC6D;;AAAA;;AACA;;AAAA;;;;;;AAyBzD;;;;;;AAAkD,4FAAgB,SAAhB,EAAgB,qBAAhB;;;;;;AAIlD;;;;;;;;AALJ;;AACI;;AAIA;;AAEA;;AACI;;AACI;AAAA;AAAA;AAAA;;AADJ;;AAIJ;;AACA;;AACI;;AAA8C;;AACF;;AAChD;;AACA;;AACI;;AAAQ;AAAA;;AAAA;;AAAA;;AAAA;AAAA;;AAAkE;;AACtC;;AACxC;;AACJ;;;;;;AAlBS;;AAAA;;AAGyB;;AAAA;;;;;;;;;;;;AAV9C;;AACI;;AACI;;AACI;;AAAwD;;AAAU;;AAClE;;AAsBJ;;AACJ;;AACJ;;;;;;AA3BS;;AAAA;;AAGsC;;AAAA;;;;;;AA4C3B;;;;;;AAA4D,4FAAgB,SAAhB,EAAgB,qBAAhB;;;;;;AAI5D;;;;;;;;AALJ;;AACI;;AAIA;;AAEA;;AACI;;AACI;AAAA;AAAA;AAAA;;AADJ;;AAIJ;;AACA;;AACI;;AAA8C;;AACF;;AAChD;;AACA;;AACI;;AAAQ;AAAA;;AAAA;;AAAA;;AAAA;AAAA;;AAAuE;;AAC3C;;AACxC;;AACJ;;;;;;;;AArB0E;;AAGvC;;AAAA;;AAGD;;AAAA;;;;;;AARtC;;AAEI;;AAsBJ;;;;AAtBwC;;AAAA;;;;;;;;;;;;;;;;UD9G/CooB,sB;AAkCX,wCAAoB5lB,WAApB,EAAsD3pB,cAAtD,EAAqGD,WAArG,EAAuIE,MAAvI,EAA8J;AAAA;;AAA1I,eAAA0pB,WAAA,GAAAA,WAAA;AAAkC,eAAA3pB,cAAA,GAAAA,cAAA;AAA+C,eAAAD,WAAA,GAAAA,WAAA;AAAkC,eAAAE,MAAA,GAAAA,MAAA;AA9B/H,eAAAuvC,WAAA,GAA4B,IAAI,4CAAJ,EAA5B;AACA,eAAAC,cAAA,GAA+B,IAAI,4CAAJ,EAA/B;AAER,eAAA7lB,WAAA,GAAc,KAAd;AAGA,eAAAC,MAAA,GAAmB,EAAnB;AACA,eAAAC,aAAA,GAAgB,KAAhB;AACA,eAAA3hB,OAAA,GAAU,CAAV;AAEA,eAAAunC,aAAA,GAAgB,KAAhB;AAEA,eAAAC,cAAA,GAAiB,EAAjB;AACA,eAAAC,gBAAA,GAAmB,EAAnB;AAEA,eAAAC,SAAA,GAAY,EAAZ;AAEA,eAAAC,SAAA,GAAY,IAAI,wDAAJ,CAAc;AACxBd,sBAAU,EAAE,IAAI,wDAAJ,CAAc,CAAC,KAAKe,gBAAL,EAAD,CAAd,CADY;AAExB/4B,sBAAU,EAAE,IAAI,0DAAJ,CAAgB,IAAhB,CAFY;AAGxBg5B,iBAAK,EAAE,IAAI,0DAAJ,CAAgB,EAAhB,EAAoB,CAAC,0DAAW/8B,QAAZ,EAAsB,0DAAWmO,SAAX,CAAqB,CAArB,CAAtB,CAApB,CAHiB;AAIxB6uB,iBAAK,EAAE,IAAI,0DAAJ,CAAgB,EAAhB,EAAoB,CAAC,0DAAWh9B,QAAZ,EAAsB,0DAAWmO,SAAX,CAAqB,CAArB,CAAtB,CAApB,CAJiB;AAKxB8uB,qBAAS,EAAE,IAAI,wDAAJ,CAAc,CAAC,KAAKC,eAAL,EAAD,CAAd,CALa;AAMxBC,2BAAe,EAAE,IAAI,wDAAJ,CAAc,CAAC,KAAKC,oBAAL,EAAD,CAAd,CANO;AAOxBC,oBAAQ,EAAE,IAAI,0DAAJ,CAAgB,EAAhB,EAAoB,CAAC,0DAAWr9B,QAAZ,EAAsB,0DAAWmO,SAAX,CAAqB,CAArB,CAAtB,CAApB;AAPc,WAAd,CAAZ;AAaiK;;;;qCAEtJ;AAAA;;AACT9f,sBAAU,CAAC,YAAM;AACf;AACAyE,eAAC,CAAC,kBAAD,CAAD,CAAsBC,OAAtB,CAA8B;AAC5BC,uBAAO,EAAE;AADmB,eAA9B;AAGD,aALS,EAKP,IALO,CAAV;AAMA,iBAAKqkB,UAAL;AAEA,iBAAKklB,WAAL,CAAiBzuC,IAAjB,CAAsB,oEAAa,IAAb,CAAtB,EAA0CC,SAA1C,CACE,UAAAC,IAAI,EAAI;AACN,sBAAI,CAACsvC,kBAAL,CAAwBtvC,IAAxB;AACD,aAHH;AAMA,iBAAKwuC,cAAL,CAAoB1uC,IAApB,CAAyB,oEAAa,IAAb,CAAzB,EAA6CC,SAA7C,CACE,UAAAC,IAAI,EAAI;AACN,sBAAI,CAACuvC,0BAAL,CAAgCvvC,IAAI,CAAC,KAAD,CAApC,EAA6CA,IAAI,CAAC,GAAD,CAAjD;AACD,aAHH;AAMA,iBAAK6uC,SAAL,GAAiB,KAAK/vC,WAAL,CAAiBc,KAAjB,CAAuB;AACtCmuC,wBAAU,EAAE,KAAKjvC,WAAL,CAAiBe,KAAjB,CAAuB,EAAvB,CAD0B;AAEtCkW,wBAAU,EAAE,KAF0B;AAGtCg5B,mBAAK,EAAE,EAH+B;AAItCC,mBAAK,EAAE,EAJ+B;AAKtCC,uBAAS,EAAE,KAAKnwC,WAAL,CAAiBe,KAAjB,CAAuB,CAAC,KAAKqvC,eAAL,EAAD,CAAvB,CAL2B;AAMtCC,6BAAe,EAAE,KAAKrwC,WAAL,CAAiBe,KAAjB,CAAuB,EAAvB,CANqB;AAOtCwvC,sBAAQ,EAAE;AAP4B,aAAvB,CAAjB;AAUA,iBAAKlkC,SAAL;AAED;;;uCAEoB;AAAA;;AACnB,iBAAK0d,aAAL,GAAqB,IAArB;AACA,iBAAKH,WAAL,CAAiBc,SAAjB,GAA6BzpB,SAA7B,CAAuC,UAAA4N,CAAC,EAAI;AAC1C,sBAAI,CAACib,MAAL,GAAcjb,CAAd;AACA,sBAAI,CAACkb,aAAL,GAAqB,KAArB;AACD,aAHD;AAID;;;sCAEWzoB,O,EAAwB;AAAA;;AAClCC,sBAAU,CAAC,YAAM;AACf,kBAAI,QAAI,CAACI,MAAL,IAAeL,OAAO,CAAC8kB,SAAR,CAAkB3kB,YAArC,EAAmD;AACjD,wBAAI,CAACivC,mBAAL,GAA2B,QAAI,CAACX,SAAL,CAAenuC,GAAf,CAAmB,iBAAnB,CAA3B;;AACA,wBAAI,CAAC8uC,mBAAL,CAAyB7uC,KAAzB;;AAEA,wBAAI,CAAC8uC,eAAL,GAAuB,QAAI,CAACZ,SAAL,CAAenuC,GAAf,CAAmB,YAAnB,CAAvB;;AACA,wBAAI,CAAC+uC,eAAL,CAAqB9uC,KAArB;;AAEA,wBAAI,CAACiuC,SAAL,GAAiB,EAAjB;AACD;;AACD,sBAAI,CAACnuC,MAAL,GAAcL,OAAO,CAAC8kB,SAAR,CAAkB3kB,YAAhC;;AACA,kBAAI,QAAI,CAACE,MAAL,IAAe,IAAnB,EAAyB;AAEvB,wBAAI,CAACiuC,cAAL,GAAsB,EAAtB;AACA,wBAAI,CAACC,gBAAL,GAAwB,EAAxB;;AAEA,qBAAK,IAAIhqC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG,QAAI,CAAClE,MAAL,CAAYstC,UAAZ,CAAuBprC,MAA3C,EAAmDgC,CAAC,EAApD,EAAwD;AACtD,sBAAM+qC,GAAG,GAAG,QAAI,CAACjvC,MAAL,CAAYstC,UAAZ,CAAuBppC,CAAvB,EAA0B,YAA1B,CAAZ;AACA,sBAAMgrC,IAAI,GAAG,QAAI,CAAClvC,MAAL,CAAYstC,UAAZ,CAAuBppC,CAAvB,EAA0B,eAA1B,CAAb;;AACA,0BAAI,CAAC+pC,cAAL,CAAoBvtC,IAApB,CAAyBuuC,GAAzB;;AAEA,sBAAIA,GAAG,IAAI,YAAP,IAAuBC,IAAI,IAAI,EAAnC,EAAuC;AACrC,4BAAI,CAAChB,gBAAL,CAAsBxtC,IAAtB,CAA2BuuC,GAA3B;;AACA,4BAAI,CAACE,aAAL,CAAmBF,GAAnB,EAAwBC,IAAxB;;AAEA,4BAAI,CAACf,SAAL,CAAeztC,IAAf,CAAoB;AAAE8vB,2BAAK,EAAEye,GAAT;AAAc5tC,2BAAK,EAAE6tC;AAArB,qBAApB;AACD;;AAED,sBAAIA,IAAI,IAAI,EAAZ,EAAgB;AACd,4BAAI,CAAChB,gBAAL,CAAsBxtC,IAAtB,CAA2BuuC,GAA3B;;AACA,4BAAI,CAACE,aAAL,CAAmBF,GAAnB,EAAwBC,IAAxB;;AAEA,4BAAI,CAACf,SAAL,CAAeztC,IAAf,CAAoB;AAAE8vB,2BAAK,EAAEye,GAAT;AAAc5tC,2BAAK,EAAE6tC;AAArB,qBAApB;AACD;AACF,iBAvBsB,CAwBvB;;;AACA,wBAAI,CAACd,SAAL,CAAenuC,GAAf,CAAmB,YAAnB,EAAiCY,QAAjC,CAA0C,QAAI,CAACb,MAAL,CAAYsV,UAAtD,EAAkE;AAAExU,2BAAS,EAAE;AAAb,iBAAlE;;AACA,wBAAI,CAACstC,SAAL,CAAenuC,GAAf,CAAmB,OAAnB,EAA4BY,QAA5B,CAAqC,QAAI,CAACb,MAAL,CAAYuuC,KAAjD,EAAwD;AAAEztC,2BAAS,EAAE;AAAb,iBAAxD;;AACA,wBAAI,CAACstC,SAAL,CAAenuC,GAAf,CAAmB,OAAnB,EAA4BY,QAA5B,CAAqC,QAAI,CAACb,MAAL,CAAYsuC,KAAjD,EAAwD;AAAExtC,2BAAS,EAAE;AAAb,iBAAxD;;AACA,wBAAI,CAACsuC,iBAAL,CAAuB,QAAI,CAACpvC,MAAL,CAAYqvC,OAAnC;;AACA,wBAAI,CAACjB,SAAL,CAAenuC,GAAf,CAAmB,UAAnB,EAA+BY,QAA/B,CAAwC,QAAI,CAACb,MAAL,CAAYsH,KAApD,EAA2D;AAAExG,2BAAS,EAAE;AAAb,iBAA3D;AACD;AACF,aA1CS,EA0CP,EA1CO,CAAV;AA2CD;;;sCAGQ;AAAA;;AACP,iBAAKstC,SAAL,CAAenuC,GAAf,CAAmB,OAAnB,EAA4BwM,YAA5B,CAAyCpN,IAAzC,CAA8C,oEAAa,IAAb,CAA9C,EAAkEC,SAAlE,CAA4E,UAAAgwC,MAAM,EAAI;AACpF,sBAAI,CAAChxC,cAAL,CAAoB0wB,aAApB,CAAkC,IAAlC;;AACA,kBAAIhqB,OAAO,GAAG,QAAI,CAAChF,MAAL,CAAYoB,iBAA1B;AACA,kBAAIM,UAAU,GAAG;AACfC,wBAAQ,EAAE,OADK;AAEfN,qBAAK,EAAEiuC;AAFQ,eAAjB;;AAIA,sBAAI,CAAChxC,cAAL,CAAoBwqC,WAApB,CAAgC9jC,OAAhC,EAAyCtD,UAAzC,EAAqDpC,SAArD,CACE,UAAAC,IAAI,EAAI;AACNY,uBAAO,CAACC,GAAR,CAAYb,IAAZ;;AACA,wBAAI,CAACjB,cAAL,CAAoB0wB,aAApB,CAAkC,KAAlC,EAFM,CAGN;;;AACA,wBAAI,CAAC1wB,cAAL,CAAoBwG,aAApB,CAAkC,QAAI,CAAC9E,MAAvC;AACD,eANH,EAMK,UAAA6B,KAAK,EAAI;AACV1B,uBAAO,CAACC,GAAR,CAAYyB,KAAZ,EADU,CAEV;;AACA,wBAAI,CAACvD,cAAL,CAAoBwG,aAApB,CAAkC;AAAEgD,4BAAU,EAAEjG,KAAK,CAACA,KAAN,CAAYU;AAA1B,iBAAlC;;AACA,wBAAI,CAACjE,cAAL,CAAoB0wB,aAApB,CAAkC,KAAlC;;AACA,oBAAIntB,KAAK,CAACgB,MAAN,IAAgB,GAApB,EAAyB;AACvB,0BAAI,CAACtE,MAAL,CAAYsD,KAAZ,CAAkBA,KAAK,CAACA,KAAxB,EAA+B,OAA/B,EAAwC;AACtCC,2BAAO,EAAE;AAD6B,mBAAxC;AAGD,iBAJD,MAIO;AACL,0BAAI,CAACvD,MAAL,CAAYuY,OAAZ,CAAoB,qBAApB,EAA2C,EAA3C,EAA+C;AAC7ChV,2BAAO,EAAE;AADoC,mBAA/C;AAGD;AACF,eApBH;AAsBD,aA7BD;AA+BA,iBAAKssC,SAAL,CAAetqB,QAAf,CAAwB,YAAxB,EAAsCrX,YAAtC,CAAmDpN,IAAnD,CAAwD,iEAAUU,SAAV,CAAxD,EAA8E,oEAAa,IAAb,CAA9E,EAAkG,iEAAlG,EAA8GT,SAA9G,CAAwH,UAAAwvB,aAAa,EAAI;AACvI3uB,qBAAO,CAACC,GAAR,CAAY,aAAZ,EAA2B0uB,aAAa,CAAC,CAAD,CAAxC;AACA3uB,qBAAO,CAACC,GAAR,CAAY,aAAZ,EAA2B0uB,aAAa,CAAC,CAAD,CAAxC;;AACA,sBAAI,CAACxwB,cAAL,CAAoB0wB,aAApB,CAAkC,IAAlC;;AACA,kBAAIttB,UAAU,GAAG,EAAjB;AACA,kBAAIsD,OAAO,GAAG,QAAI,CAAChF,MAAL,CAAYoB,iBAA1B;AACA,kBAAIW,QAAQ,GAAG+sB,aAAa,CAAC,CAAD,CAA5B;AACA,kBAAIO,QAAQ,GAAGP,aAAa,CAAC,CAAD,CAA5B;;AAEA,kBAAI/sB,QAAQ,IAAIhC,SAAhB,EAA2B;AACzB2B,0BAAU,GAAG;AACXf,sBAAI,EAAE,YADK;AAEXgB,0BAAQ,EAAE,YAFC;AAGXN,uBAAK,EAAEguB;AAHI,iBAAb;AAKD,eAND,MAMO,IAAIttB,QAAQ,IAAIhC,SAAZ,IAAyB,QAAI,CAACC,MAAL,CAAYsV,UAAZ,IAA0B,CAAC,CAAxD,EAA2D;AAChE5T,0BAAU,GAAG;AACXf,sBAAI,EAAE,YADK;AAEXgB,0BAAQ,EAAE,YAFC;AAGXN,uBAAK,EAAEguB,QAHI;AAIXvvB,8BAAY,EAAE,CAAC;AAJJ,iBAAb;AAMD,eAPM,MAOA;AACL4B,0BAAU,GAAG;AACXf,sBAAI,EAAE,YADK;AAEXgB,0BAAQ,EAAE,YAFC;AAGXN,uBAAK,EAAEguB,QAHI;AAIXvvB,8BAAY,EAAEiC;AAJH,iBAAb;AAMD;;AAED5B,qBAAO,CAACC,GAAR,CAAYsB,UAAZ;;AACA,sBAAI,CAACpD,cAAL,CAAoBsD,qBAApB,CAA0CoD,OAA1C,EAAmDtD,UAAnD,EAA+DpC,SAA/D,CACE,UAAAC,IAAI,EAAI;AACNY,uBAAO,CAACC,GAAR,CAAYb,IAAZ;;AAEA,wBAAI,CAACjB,cAAL,CAAoBwG,aAApB,CAAkCvF,IAAlC;;AACA,wBAAI,CAACjB,cAAL,CAAoB0wB,aAApB,CAAkC,KAAlC;AACD,eANH,EAOE,UAAAntB,KAAK,EAAI;AACP1B,uBAAO,CAACC,GAAR,CAAYyB,KAAZ;;AAEA,wBAAI,CAACvD,cAAL,CAAoB0wB,aAApB,CAAkC,KAAlC;;AAEA,oBAAIntB,KAAK,CAACgB,MAAN,IAAgB,GAApB,EAAyB;AACvB,0BAAI,CAACtE,MAAL,CAAYuY,OAAZ,CAAoB,oBAApB,EAA0C,EAA1C,EAA8C;AAAEhV,2BAAO,EAAE;AAAX,mBAA9C;;AACA,0BAAI,CAACxD,cAAL,CAAoBwG,aAApB,CAAkC;AAAEgD,8BAAU,EAAEjG,KAAK,CAACA,KAAN,CAAYU;AAA1B,mBAAlC;;AACA,0BAAI,CAAC6rC,SAAL,CAAenuC,GAAf,CAAmB,YAAnB,EAAiCY,QAAjC,CAA0CwuB,QAA1C,EAAoD;AAAEvuB,6BAAS,EAAE;AAAb,mBAApD;;AACA,0BAAI,CAACd,MAAL,CAAYsV,UAAZ,GAAyB+Z,QAAzB;AACD,iBALD,MAKO;AACL,0BAAI,CAAC9wB,MAAL,CAAYsD,KAAZ,CAAkBA,KAAK,CAACA,KAAxB,EAA+B,OAA/B,EAAwC;AAAEC,2BAAO,EAAE;AAAX,mBAAxC;AAED;AACF,eArBH;AAuBD,aAvDD;AAyDA,iBAAKssC,SAAL,CAAenuC,GAAf,CAAmB,OAAnB,EAA4BwM,YAA5B,CAAyCpN,IAAzC,CAA8C,oEAAa,IAAb,CAA9C,EAAkEC,SAAlE,CAA4E,UAAAiwC,QAAQ,EAAI;AACtF,kBAAIA,QAAQ,CAAChuC,IAAT,MAAmB,EAAvB,EAA2B;AACzB,wBAAI,CAACjD,cAAL,CAAoB0wB,aAApB,CAAkC,IAAlC;;AACA,oBAAIhqB,OAAO,GAAG,QAAI,CAAChF,MAAL,CAAYoB,iBAA1B;AACA,oBAAIM,UAAU,GAAG;AACfC,0BAAQ,EAAE,SADK;AAEfN,uBAAK,EAAEkuC;AAFQ,iBAAjB;;AAIA,wBAAI,CAACjxC,cAAL,CAAoBwqC,WAApB,CAAgC9jC,OAAhC,EAAyCtD,UAAzC,EAAqDpC,SAArD,CACE,UAAAC,IAAI,EAAI;AACNY,yBAAO,CAACC,GAAR,CAAYb,IAAZ;;AACA,0BAAI,CAACjB,cAAL,CAAoB0wB,aAApB,CAAkC,KAAlC,EAFM,CAGN;;;AACA,0BAAI,CAAC1wB,cAAL,CAAoBwG,aAApB,CAAkC,QAAI,CAAC9E,MAAvC;;AACA,0BAAI,CAACzB,MAAL,CAAYuY,OAAZ,CAAoB,qBAApB,EAA2C,EAA3C,EAA+C;AAC7ChV,2BAAO,EAAE;AADoC,mBAA/C;AAID,iBAVH,EAUK,UAAAD,KAAK,EAAI;AACV1B,yBAAO,CAACC,GAAR,CAAYyB,KAAZ,EADU,CAEV;;AACA,0BAAI,CAACvD,cAAL,CAAoBwG,aAApB,CAAkC;AAAEgD,8BAAU,EAAEjG,KAAK,CAACA,KAAN,CAAYU;AAA1B,mBAAlC;;AACA,0BAAI,CAACjE,cAAL,CAAoB0wB,aAApB,CAAkC,KAAlC;;AACA,sBAAI,OAAQntB,KAAK,CAACA,KAAd,IAAwB,QAA5B,EAAsC;AACpC,4BAAI,CAACtD,MAAL,CAAYsD,KAAZ,CAAkBA,KAAK,CAACA,KAAxB,EAA+B,OAA/B,EAAwC;AACtCC,6BAAO,EAAE;AAD6B,qBAAxC;AAGD;AAEF,iBArBH;AAuBD;AAEF,aAjCD;AAmCA,iBAAKssC,SAAL,CAAenuC,GAAf,CAAmB,WAAnB,EAAgCwM,YAAhC,CAA6CpN,IAA7C,CAAkD,oEAAa,IAAb,CAAlD,EAAsEC,SAAtE,CAAgF,UAAAgwC,MAAM,EAAI;AACxF,sBAAI,CAAChxC,cAAL,CAAoB0wB,aAApB,CAAkC,IAAlC;;AACA,kBAAIhqB,OAAO,GAAG,QAAI,CAAChF,MAAL,CAAYoB,iBAA1B;AACA,kBAAIM,UAAU,GAAG;AACfC,wBAAQ,EAAE,WADK;AAEfN,qBAAK,EAAEiuC,MAAM,CAAC,CAAD,CAAN,CAAU,QAAV;AAFQ,eAAjB,CAHwF,CAOxF;;AACAnvC,qBAAO,CAACC,GAAR,CAAYsB,UAAZ;;AACA,sBAAI,CAACpD,cAAL,CAAoBwqC,WAApB,CAAgC9jC,OAAhC,EAAyCtD,UAAzC,EAAqDpC,SAArD,CACE,UAAAC,IAAI,EAAI;AACNY,uBAAO,CAACC,GAAR,CAAYb,IAAZ;;AACA,wBAAI,CAACjB,cAAL,CAAoB0wB,aAApB,CAAkC,KAAlC,EAFM,CAGN;;;AACA,wBAAI,CAAC1wB,cAAL,CAAoBwG,aAApB,CAAkC,QAAI,CAAC9E,MAAvC;AACD,eANH,EAMK,UAAA6B,KAAK,EAAI;AACV1B,uBAAO,CAACC,GAAR,CAAYyB,KAAZ,EADU,CAEV;;AACA,wBAAI,CAACvD,cAAL,CAAoBwG,aAApB,CAAkC;AAAEgD,4BAAU,EAAEjG,KAAK,CAACA,KAAN,CAAYU;AAA1B,iBAAlC;;AACA,wBAAI,CAACjE,cAAL,CAAoB0wB,aAApB,CAAkC,KAAlC;;AACA,oBAAIntB,KAAK,CAACgB,MAAN,IAAgB,GAApB,EAAyB;AACvB,0BAAI,CAACtE,MAAL,CAAYsD,KAAZ,CAAkBA,KAAK,CAACA,KAAxB,EAA+B,OAA/B,EAAwC;AACtCC,2BAAO,EAAE;AAD6B,mBAAxC;AAGD,iBAJD,MAIO;AACL,0BAAI,CAACvD,MAAL,CAAYuY,OAAZ,CAAoB,yBAApB,EAA+C,EAA/C,EAAmD;AACjDhV,2BAAO,EAAE;AADwC,mBAAnD;AAGD;AACF,eApBH;AAsBD,aA/BD;AAgCD;;;2CAEgB;AAAA;;AACf,iBAAKxD,cAAL,CAAoB0wB,aAApB,CAAkC,IAAlC;AACA,gBAAIjtB,QAAQ,GAAG,KAAKqsC,SAAL,CAAenuC,GAAf,CAAmB,YAAnB,EAAiCoB,KAAhD;AACA,gBAAI2D,OAAO,GAAG,KAAKhF,MAAL,CAAYoB,iBAA1B;AACA,gBAAIM,UAAU,GAAG;AACfC,sBAAQ,EAAE,YADK;AAEfN,mBAAK,EAAE;AAFQ,aAAjB;AAIAlB,mBAAO,CAACC,GAAR,CAAYsB,UAAZ;AACA,iBAAKpD,cAAL,CAAoBuG,wBAApB,CAA6CG,OAA7C,EAAsDtD,UAAtD,EAAkEpC,SAAlE,CACE,UAAAC,IAAI,EAAI;AACNY,qBAAO,CAACC,GAAR,CAAYb,IAAZ;AACA;;;;AAGA,sBAAI,CAACjB,cAAL,CAAoBwG,aAApB,CAAkCvF,IAAlC;;AACA,sBAAI,CAACjB,cAAL,CAAoB0wB,aAApB,CAAkC,KAAlC;;AACA,sBAAI,CAACof,SAAL,CAAenuC,GAAf,CAAmB,YAAnB,EAAiCY,QAAjC,CAA0C,CAAC,CAA3C,EAA8C;AAAEC,yBAAS,EAAE;AAAb,eAA9C;;AACA,sBAAI,CAACd,MAAL,CAAYsV,UAAZ,GAAyB,CAAC,CAA1B;AACD,aAVH,EAWE,UAAAzT,KAAK,EAAI;AACP1B,qBAAO,CAACC,GAAR,CAAYyB,KAAZ;AACA;;;;;AAIA,sBAAI,CAACvD,cAAL,CAAoB0wB,aAApB,CAAkC,KAAlC;;AACA,sBAAI,CAAC1wB,cAAL,CAAoBwG,aAApB,CAAkC;AAAEgD,0BAAU,EAAEjG,KAAK,CAACA,KAAN,CAAYU;AAA1B,eAAlC;;AACA,kBAAIV,KAAK,CAACgB,MAAN,IAAgB,GAApB,EAAyB;AACvB,wBAAI,CAACtE,MAAL,CAAYuY,OAAZ,CAAoB,oBAApB,EAA0C,EAA1C,EAA8C;AAAEhV,yBAAO,EAAE;AAAX,iBAA9C;;AACA,wBAAI,CAACssC,SAAL,CAAenuC,GAAf,CAAmB,YAAnB,EAAiCY,QAAjC,CAA0C,CAAC,CAA3C,EAA8C;AAAEC,2BAAS,EAAE;AAAb,iBAA9C;;AACA,wBAAI,CAACd,MAAL,CAAYsV,UAAZ,GAAyB,CAAC,CAA1B;AACD,eAJD,MAIO;AACL,wBAAI,CAAC/W,MAAL,CAAYsD,KAAZ,CAAkBA,KAAK,CAACA,KAAxB,EAA+B,OAA/B,EAAwC;AAAEC,yBAAO,EAAE;AAAX,iBAAxC;AAED;AACF,aA3BH;AA6BD;;;kDAEuBmC,G,EAAKC,C,EAAG;AAAA;;AAE9BtE,sBAAU,CAAC,YAAM;AACf,sBAAI,CAACovC,eAAL,GAAuB,QAAI,CAACZ,SAAL,CAAenuC,GAAf,CAAmB,YAAnB,CAAvB;;AACA,sBAAI,CAAC+uC,eAAL,CAAqB1sC,EAArB,CAAwB4B,CAAxB,EAA2B8S,UAA3B,CAAsC;AAAEw4B,0BAAU,EAAEvrC,GAAG,CAACE,MAAJ,CAAW9C,KAAzB;AAAgCouC,6BAAa,EAAE;AAA/C,eAAtC;;AACA,kBAAIxrC,GAAG,CAACE,MAAJ,CAAW9C,KAAX,IAAoB,EAAxB,EAA4B;AAE1B,wBAAI,CAAC6sC,gBAAL,CAAsBhqC,CAAtB,IAA2BD,GAAG,CAACE,MAAJ,CAAW9C,KAAtC;AACD,eAHD,MAGO;AAEL,wBAAI,CAAC6sC,gBAAL,CAAsBjpC,MAAtB,CAA6Bf,CAA7B,EAAgC,CAAhC;AACD;AAIF,aAbS,EAaP,GAbO,CAAV;AAcD;;;4CAEiB;AAChB,mBAAO,KAAK7F,WAAL,CAAiBc,KAAjB,CAAuB;AAC5BsF,oBAAM,EAAE,IAAI,0DAAJ,CAAgB,IAAhB,EAAsB,CAAC,0DAAW8M,QAAZ,EAAsB,0DAAWmO,SAAX,CAAqB,CAArB,CAAtB,CAAtB;AADoB,aAAvB,CAAP;AAGD;;;wCAEauvB,G,EAAMC,I,EAAO;AACzB,iBAAKF,eAAL,GAAuB,KAAKZ,SAAL,CAAenuC,GAAf,CAAmB,YAAnB,CAAvB;;AACA,gBAAIgvC,GAAG,IAAIlvC,SAAX,EAAsB;AACpB,mBAAKivC,eAAL,CAAqBtuC,IAArB,CAA0B,KAAK2tC,gBAAL,CAAsBY,GAAtB,EAA2BC,IAA3B,CAA1B;AACD,aAFD,MAEO;AACL,mBAAKlB,aAAL,GAAqB,IAArB;AACA,mBAAKgB,eAAL,CAAqBtuC,IAArB,CAA0B,KAAK2tC,gBAAL,EAA1B;AACD;AACF;;;2CAEgB/sC,K,EAAO;AAAA;;AACtB,gBAAM0tC,eAAe,GAAG,KAAKZ,SAAL,CAAenuC,GAAf,CAAmB,YAAnB,CAAxB;AAEA,gBAAMuwB,KAAK,GAAG,KAAKwe,eAAL,CAAqB1sC,EAArB,CAAwBhB,KAAxB,EAA+BrB,GAA/B,CAAmC,YAAnC,EAAiDoB,KAA/D;AACA,gBAAMA,KAAK,GAAG,KAAK2tC,eAAL,CAAqB1sC,EAArB,CAAwBhB,KAAxB,EAA+BrB,GAA/B,CAAmC,eAAnC,EAAoDoB,KAAlE,CAJsB,CAMtB;;AAEA,gBAAImvB,KAAK,IAAI,IAAb,EAAmB;AAEjB,kBAAIxrB,OAAO,GAAG,KAAKhF,MAAL,CAAYoB,iBAA1B;AAEA,kBAAIM,UAAU,GAAG;AACfC,wBAAQ,EAAE6uB,KADK;AAEfnvB,qBAAK,EAAEA;AAFQ,eAAjB;AAKA,mBAAK/C,cAAL,CAAoBuG,wBAApB,CAA6CG,OAA7C,EAAsDtD,UAAtD,EAAkEpC,SAAlE,CACE,UAAAC,IAAI,EAAI;AACNY,uBAAO,CAACC,GAAR,CAAYb,IAAZ;;AACA,wBAAI,CAACjB,cAAL,CAAoBwG,aAApB,CAAkC,QAAI,CAAC9E,MAAvC;;AAEA,wBAAI,CAACzB,MAAL,CAAYuY,OAAZ,CAAoB,0BAApB,EAAgD,EAAhD,EAAoD;AAClDhV,yBAAO,EAAE;AADyC,iBAApD;AAID,eATH,EASK,UAAAD,KAAK,EAAI;AACV1B,uBAAO,CAACC,GAAR,CAAYyB,KAAZ;;AACA,wBAAI,CAACvD,cAAL,CAAoBwG,aAApB,CAAkC;AAAEgD,4BAAU,EAAEjG,KAAK,CAACA,KAAN,CAAYU;AAA1B,iBAAlC;;AACA,oBAAI,OAAQV,KAAK,CAACA,KAAd,IAAwB,QAA5B,EAAsC;AACpC,0BAAI,CAACtD,MAAL,CAAYsD,KAAZ,CAAkBA,KAAK,CAACA,KAAxB,EAA+B,OAA/B,EAAwC;AACtCC,2BAAO,EAAE;AAD6B,mBAAxC;AAGD;AACF,eAjBH;AAmBD,aA5BD,MA4BO;AACL,mBAAKksC,aAAL,GAAqB,KAArB;AACD;;AACD,iBAAKE,gBAAL,CAAsBjpC,MAAtB,CAA6B3D,KAA7B,EAAoC,CAApC;AACA,iBAAK6sC,SAAL,CAAelpC,MAAf,CAAsB3D,KAAtB,EAA6B,CAA7B;AACA0tC,2BAAe,CAAC9pC,QAAhB,CAAyB5D,KAAzB;AACD;;;gDAEqB2C,G,EAAKC,C,EAAG;AAC5B,iBAAK5F,cAAL,CAAoB0wB,aAApB,CAAkC,IAAlC;AACA,iBAAK+e,cAAL,CAAoB3pC,IAApB,CAAyB;AAAEH,iBAAG,EAAHA,GAAF;AAAOC,eAAC,EAADA;AAAP,aAAzB;AACD;;;wCAEaD,G,EAAKC,C,EAAG;AACpB,iBAAK5F,cAAL,CAAoB0wB,aAApB,CAAkC,IAAlC;AACA,iBAAK8e,WAAL,CAAiB1pC,IAAjB,CAAsB;AAAEH,iBAAG,EAAHA,GAAF;AAAOC,eAAC,EAADA;AAAP,aAAtB;AACD;;;2CAEgB+qC,G,EAAMC,I,EAAO;AAC5B,gBAAID,GAAG,IAAIlvC,SAAX,EAAsB;AACpB,qBAAO,KAAK1B,WAAL,CAAiBc,KAAjB,CAAuB;AAC5BqwC,0BAAU,EAAE,IAAI,0DAAJ,CAAgBP,GAAhB,EAAqB,CAAC,0DAAW19B,QAAZ,EAAsB,0DAAWmO,SAAX,CAAqB,CAArB,CAAtB,CAArB,CADgB;AAE5B+vB,6BAAa,EAAE,IAAI,0DAAJ,CAAgBP,IAAhB,EAAsB,CAAC,0DAAW39B,QAAZ,EAAsB,0DAAWmO,SAAX,CAAqB,CAArB,CAAtB,CAAtB;AAFa,eAAvB,CAAP;AAID,aALD,MAKO;AACL,qBAAO,KAAKrhB,WAAL,CAAiBc,KAAjB,CAAuB;AAC5BqwC,0BAAU,EAAE,IAAI,0DAAJ,CAAgB,IAAhB,EAAsB,CAAC,0DAAWj+B,QAAZ,EAAsB,0DAAWmO,SAAX,CAAqB,CAArB,CAAtB,CAAtB,CADgB;AAE5B+vB,6BAAa,EAAE,IAAI,0DAAJ,CAAgB,IAAhB,EAAsB,CAAC,0DAAWl+B,QAAZ,EAAsB,0DAAWmO,SAAX,CAAqB,CAArB,CAAtB,CAAtB;AAFa,eAAvB,CAAP;AAID;AAEF;;;qDAE0Bzb,G,EAAKC,C,EAAG;AAAA;;AAEjC,iBAAK8qC,eAAL,GAAuB,KAAKZ,SAAL,CAAenuC,GAAf,CAAmB,YAAnB,CAAvB;AACA,gBAAMuwB,KAAK,GAAG,KAAKwe,eAAL,CAAqB1sC,EAArB,CAAwB4B,CAAxB,EAA2BjE,GAA3B,CAA+B,YAA/B,EAA6CoB,KAA3D;AACA,gBAAMguB,QAAQ,GAAGprB,GAAG,CAACE,MAAJ,CAAW9C,KAA5B;AACA,gBAAM2D,OAAO,GAAG,KAAKhF,MAAL,CAAYoB,iBAA5B;AACA,gBAAMM,UAAU,GAAG;AAAEC,sBAAQ,EAAE6uB,KAAZ;AAAmBnvB,mBAAK,EAAEguB;AAA1B,aAAnB;;AAEA,gBAAImB,KAAK,IAAIzwB,SAAT,IAAsBsvB,QAAQ,IAAI,EAAtC,EAA0C;AAExC,mBAAK8e,SAAL,CAAejqC,CAAf,IAAoB;AAAEssB,qBAAK,EAAEA,KAAT;AAAgBnvB,qBAAK,EAAEguB;AAAvB,eAApB;AACA,mBAAK/wB,cAAL,CAAoBwqC,WAApB,CAAgC9jC,OAAhC,EAAyCtD,UAAzC,EAAqDrC,IAArD,CAA0D,oEAAa,IAAb,CAA1D,EAA8EC,SAA9E,CACE,UAAAC,IAAI,EAAI;AACNY,uBAAO,CAACC,GAAR,CAAYb,IAAZ;;AACA,wBAAI,CAACjB,cAAL,CAAoB0wB,aAApB,CAAkC,KAAlC,EAFM,CAGN;;;AACA,oBAAIwB,KAAK,IAAI,YAAb,EAA2B,CAE1B;;AACD,wBAAI,CAAClyB,cAAL,CAAoBwG,aAApB,CAAkCvF,IAAlC;AACD,eATH,EASK,UAAAsC,KAAK,EAAI;AACV1B,uBAAO,CAACC,GAAR,CAAYyB,KAAZ,EADU,CAEV;;AACA,oBAAI2uB,KAAK,IAAI,YAAb,EAA2B;AACzB,sBAAMjxB,IAAI,GAAG,QAAI,CAACS,MAAlB;AACAT,sBAAI,CAAC,cAAD,CAAJ,GAAuB,OAAvB;AACAA,sBAAI,CAAC,gBAAD,CAAJ,GAAyB8vB,QAAzB;AACA9vB,sBAAI,CAAC,SAAD,CAAJ,GAAkB,CAAlB;;AACA,0BAAI,CAACjB,cAAL,CAAoB0nB,gBAApB,CAAqCzmB,IAArC;AACD;;AACD,wBAAI,CAACjB,cAAL,CAAoBwG,aAApB,CAAkC;AAAEgD,4BAAU,EAAEjG,KAAK,CAACA,KAAN,CAAYU;AAA1B,iBAAlC;;AACA,wBAAI,CAACjE,cAAL,CAAoB0wB,aAApB,CAAkC,KAAlC;;AACA,oBAAIntB,KAAK,CAACgB,MAAN,IAAgB,GAApB,EAAyB;AACvB,0BAAI,CAACtE,MAAL,CAAYsD,KAAZ,CAAkBA,KAAK,CAACA,KAAxB,EAA+B,OAA/B,EAAwC;AACtCC,2BAAO,EAAE;AAD6B,mBAAxC;AAGD,iBAJD,MAIO;AACL,0BAAI,CAACvD,MAAL,CAAYuY,OAAZ,CAAoB,0BAApB,EAAgD,EAAhD,EAAoD;AAClDhV,2BAAO,EAAE;AADyC,mBAApD;AAGD;AACF,eA9BH;AAgCD,aAnCD,MAmCO;AACL,mBAAKxD,cAAL,CAAoB0wB,aAApB,CAAkC,KAAlC;AACA,mBAAKmf,SAAL,CAAejqC,CAAf,IAAoB;AAAEssB,qBAAK,EAAEA,KAAT;AAAgBnvB,qBAAK,EAAE;AAAvB,eAApB;AACD;AACF;;;6CAEkBrB,M,EAAQ;AAAA;;AAEzB,iBAAKgvC,eAAL,GAAuB,KAAKZ,SAAL,CAAenuC,GAAf,CAAmB,YAAnB,CAAvB;AACA,gBAAMuwB,KAAK,GAAG,KAAKwe,eAAL,CAAqB1sC,EAArB,CAAwBtC,MAAM,CAACkE,CAA/B,EAAkCjE,GAAlC,CAAsC,YAAtC,EAAoDoB,KAAlE;AACA,gBAAMguB,QAAQ,GAAGrvB,MAAM,CAACiE,GAAP,CAAWE,MAAX,CAAkB9C,KAAnC;AACA,gBAAM2D,OAAO,GAAG,KAAKhF,MAAL,CAAYoB,iBAA5B;AACA,gBAAMM,UAAU,GAAG;AAAEC,sBAAQ,EAAE6uB,KAAZ;AAAmBnvB,mBAAK,EAAEguB;AAA1B,aAAnB;;AAEA,gBAAImB,KAAK,IAAIzwB,SAAT,IAAsBsvB,QAAQ,IAAI,EAAtC,EAA0C;AAExC,mBAAK8e,SAAL,CAAeztC,IAAf,CAAoB;AAAE8vB,qBAAK,EAAEA,KAAT;AAAgBnvB,qBAAK,EAAEguB;AAAvB,eAApB;AACA,mBAAK/wB,cAAL,CAAoBwqC,WAApB,CAAgC9jC,OAAhC,EAAyCtD,UAAzC,EAAqDrC,IAArD,CAA0D,oEAAa,IAAb,CAA1D,EAA8EC,SAA9E,CACE,UAAAC,IAAI,EAAI;AACNY,uBAAO,CAACC,GAAR,CAAYb,IAAZ;;AACA,wBAAI,CAACjB,cAAL,CAAoB0wB,aAApB,CAAkC,KAAlC,EAFM,CAGN;;;AACA,wBAAI,CAAC1wB,cAAL,CAAoBwG,aAApB,CAAkCvF,IAAlC;;AACA,wBAAI,CAACyuC,aAAL,GAAqB,KAArB;AACD,eAPH,EAOK,UAAAnsC,KAAK,EAAI;AACV1B,uBAAO,CAACC,GAAR,CAAYyB,KAAZ,EADU,CAEV;;AACA,wBAAI,CAACmsC,aAAL,GAAqB,KAArB;;AACA,oBAAIxd,KAAK,IAAI,YAAb,EAA2B;AACzB,sBAAMjxB,IAAI,GAAG,QAAI,CAACS,MAAlB;AACAT,sBAAI,CAAC,cAAD,CAAJ,GAAuB,OAAvB;AACAA,sBAAI,CAAC,gBAAD,CAAJ,GAAyB8vB,QAAzB;AACA9vB,sBAAI,CAAC,SAAD,CAAJ,GAAkB,CAAlB;;AAEA,0BAAI,CAACjB,cAAL,CAAoB0nB,gBAApB,CAAqCzmB,IAArC;;AACA,sBAAIsC,KAAK,CAACgB,MAAN,IAAgB,GAApB,EAAyB;AACvB,4BAAI,CAACtE,MAAL,CAAYsD,KAAZ,CAAkBA,KAAK,CAACA,KAAxB,EAA+B,OAA/B,EAAwC;AACtCC,6BAAO,EAAE;AAD6B,qBAAxC;AAGD,mBAJD,MAIO;AACL,4BAAI,CAACvD,MAAL,CAAYuY,OAAZ,CAAoB,WAAW0Z,KAAX,GAAmB,UAAvC,EAAmD,EAAnD,EAAuD;AACrD1uB,6BAAO,EAAE;AAD4C,qBAAvD;AAGD;AACF;;AACD,wBAAI,CAACxD,cAAL,CAAoBwG,aAApB,CAAkC;AAAEgD,4BAAU,EAAEjG,KAAK,CAACA,KAAN,CAAYU;AAA1B,iBAAlC;;AACA,wBAAI,CAACjE,cAAL,CAAoB0wB,aAApB,CAAkC,KAAlC;AACD,eA9BH;AAgCD,aAnCD,MAmCO;AACL,mBAAK1wB,cAAL,CAAoB0wB,aAApB,CAAkC,KAAlC;AACD;AACF;;;0CAGe1tB,K,EAAO;AACrB,gBAAMouC,cAAc,GAAG,KAAKtB,SAAL,CAAenuC,GAAf,CAAmB,WAAnB,CAAvB;AACAyvC,0BAAc,CAACxqC,QAAf,CAAwB5D,KAAxB;AACD;;;+CAEoBkD,C,EAAI;AACvB,gBAAIA,CAAC,IAAIzE,SAAT,EAAoB;AAClB,qBAAO,KAAK1B,WAAL,CAAiBc,KAAjB,CAAuB;AAC5BwwC,2BAAW,EAAE,IAAI,0DAAJ,CAAgBnrC,CAAhB,EAAmB,CAAC,0DAAW+M,QAAZ,EAAsB,0DAAWmO,SAAX,CAAqB,CAArB,CAAtB,CAAnB;AADe,eAAvB,CAAP;AAGD,aAJD,MAIO;AACL,qBAAO,KAAKrhB,WAAL,CAAiBc,KAAjB,CAAuB;AAC5BwwC,2BAAW,EAAE,IAAI,0DAAJ,CAAgB,IAAhB,EAAsB,CAAC,0DAAWp+B,QAAZ,EAAsB,0DAAWmO,SAAX,CAAqB,CAArB,CAAtB,CAAtB;AADe,eAAvB,CAAP;AAGD;AAEF;;;4CAEiBjb,M,EAAS;AACzB,iBAAKsqC,mBAAL,GAA2B,KAAKX,SAAL,CAAenuC,GAAf,CAAmB,iBAAnB,CAA3B;;AACA,gBAAIwE,MAAM,IAAI1E,SAAd,EAAyB;AACvB,mBAAKgvC,mBAAL,CAAyBruC,IAAzB,CAA8B,KAAKiuC,oBAAL,CAA0BlqC,MAA1B,CAA9B;AACD,aAFD,MAEO;AACL,mBAAKsqC,mBAAL,CAAyBruC,IAAzB,CAA8B,KAAKiuC,oBAAL,EAA9B;AACD;AACF;;;+CAEoBrtC,K,EAAO;AAC1B,iBAAKytC,mBAAL,GAA2B,KAAKX,SAAL,CAAenuC,GAAf,CAAmB,iBAAnB,CAA3B;AACA,iBAAK8uC,mBAAL,CAAyB7pC,QAAzB,CAAkC5D,KAAlC;AACD;;;;;;;yBA3iBUusC,sB,EAAsB,kJ,EAAA,+K,EAAA,2H,EAAA,yH;AAAA,O;;;cAAtBA,sB;AAAsB,4C;AAAA;AAAA;AAAA,S;AAAA,sF;AAAA,iB;AAAA,gB;AAAA,iwJ;AAAA;AAAA;ACxBnC;;AAEI;;AACI;;AACI;;AACI;;AAAsB;;AAAG;;AAAW;;AAAI;;AACxC;;AAAmB;AAAA,qBAAS,IAAAsB,aAAA,EAAT;AAAwB,aAAxB;;AAAkE;;AAA4B;;AACvE;;AAAO;;AACjD;;AAEI;;AAmBA;;AA0BJ;;AACJ;;AACJ;;AACJ;;AAEA;;AAWA;;AACI;;AAAwD;;AAAM;;AAC9D;;AACI;;AACJ;;AACJ;;AAEA;;AACI;;AAAwD;;AAAM;;AAC9D;;AACI;;AACJ;;AACJ;;AAGA;;AACI;;AA6BJ;;AAEA;;AAMA;;AACI;;AACI;;AACI;;AAAsB;;AAAG;;AAAe;;AAAI;;AAC5C;;AAAmB;AAAA,qBAAS,IAAAC,iBAAA,EAAT;AAA4B,aAA5B;;AAA8B;;AAA4B;;AACnC;;AAAO;;AAEjD;;AACI;;AAyBJ;;AACJ;;AACJ;;AACJ;;AAkFJ;;;;AAlPM;;AAMuD;;AAAA;;AAIA;;AAAA;;AAoBrB;;AAAA;;AA8BQ;;AAAA;;AA2BnB;;AAAA;;AA8Ca;;AAAA;;;;;;;;;wED7G7BvB,sB,EAAsB;gBALlC,uDAKkC;iBALxB;AACT5vC,oBAAQ,EAAE,qBADD;AAETC,uBAAW,EAAE,kCAFJ;AAGTC,qBAAS,EAAE,CAAC,kCAAD;AAHF,W;AAKwB,U;;;;;;;;;;;AAExBsmB,mBAAS,EAAE,CAAF;kBAAjB;AAAiB,WAAE;;;;;;;;;;;;;;;;;;;AE5BtB;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;;;ACwCoC;;;;;;AAAkD,2FAAgB,SAAhB,EAAgB,oBAAhB;;;;;;AAGlD;;;;;;;;AAJJ;;AACI;;AAGA;;AACA;;AACI;;AAAiE;AAAA;AAAA;AAAA;;AAAjE;;AACJ;;AACA;;AACI;;AAA8C;AAAA;;AAAA;;AAAA,mBAAS,WAAT;AAAyB,WAAzB;;AAA2B;;AAC5B;;AACrC;;AACI;;AAAuC;;AAAU;;AACjD;;AACI;;AAAI;;AAAY;;AAChB;;AAAG;;AAC8E;;AACrF;;AACA;;AACI;;AAA6C;AAAA;;AAAA;;AAAA,mBAAS,WAAT;AAAyB,WAAzB;;AAA2B;;AAAM;;AAC9E;;AAA6C;AAAA;;AAAA;;AAAA,mBAAS,WAAT;AAAyB,WAAzB;;AAA2B;;AAAI;;AAC5E;;AACI;AAAA;;AAAA;;AAAA,mBAAS,WAAT;AAAyB,WAAzB;;AAA2B;;AAC/B;;AACJ;;AACJ;;AACZ;;AACA;;AACI;;AAAQ;AAAA;;AAAA;;AAAA;;AAAA;AAAA;;AAAoE;;AAA+B;;AAC/G;;AACJ;;;;;;;;AA9ByE;;AAEtC;;AAAA;;AAE0E;;AAAA;;AAOpD;;AAAA,wFAAoB,UAApB,EAAoB,KAApB;;;;;;;;;;;;AA/BjE;;AACI;;AAEI;;AAA8D;;AAAK;;AACnE;;AACI;;AACI;;AAAQ;;AAAY;;AACpB;;AAAQ;;AAAG;;AACf;;AACJ;;AACJ;;AACA;;AACI;;AAA8D;;AAAW;;AACzE;;AACI;;AACJ;;AACJ;;AAEA;;AACI;;AAA8D;;AAAO;;AACrE;;AA+BJ;;AACJ;;;;;;AAhD+C;;AAAA;;AASA;;AAAA;;AAOJ;;AAAA;;;;;;AAwDvC;;;;;;AAAkD,4FAAgB,SAAhB,EAAgB,qBAAhB;;;;;;AAGlD;;;;;;;;AAJJ;;AACI;;AAGA;;AACA;;AACI;;AAAiE;AAAA;AAAA;AAAA;;AAAjE;;AACJ;;AACA;;AACI;;AAA8C;;AACN;AAAA;;AAAA;;AAAA,mBAAS,WAAT;AAAyB,WAAzB;;AAA2B;;AAAI;;AACvE;;AACI;;AAAuC;;AAAU;;AACjD;;AACI;;AAAI;;AAAY;;AAChB;;AAAG;;AAC8E;;AACrF;;AACA;;AACI;;AAA6C;AAAA;;AAAA;;AAAA,mBAAS,WAAT;AAAyB,WAAzB;;AAA2B;;AAAM;;AAC9E;;AAA6C;AAAA;;AAAA;;AAAA,mBAAS,WAAT;AAAyB,WAAzB;;AAA2B;;AAAI;;AAC5E;;AACI;AAAA;;AAAA;;AAAA,mBAAS,WAAT;AAAyB,WAAzB;;AAA2B;;AAC/B;;AACJ;;AACJ;;AACJ;;AACA;;AACI;;AAAQ;AAAA;;AAAA;;AAAA;;AAAA;AAAA;;AAAyE;;AAA+B;;AACpH;;AACJ;;;;;;;;AA9ByE;;AAEtC;;AAAA;;AAE0E;;AAAA;;AAO5D;;AAAA,wFAAoB,UAApB,EAAoB,KAApB;;;;;;AAlBrD;;AACI;;AACI;;AACI;;AAAQ;;AAAY;;AACpB;;AAAQ;;AAAG;;AACf;;AACJ;;AACA;;AA+BJ;;;;;;AArC0B;;AAAA;;AAMa;;AAAA;;;;;;AA4DnB;;;;;;AAAsD,4FAAgB,SAAhB,EAAgB,qBAAhB;;;;;;AAGtD;;;;;;;;AAJJ;;AACI;;AAGA;;AACA;;AACI;;AAAiE;AAAA;AAAA;AAAA;;AAAjE;;AACJ;;AACA;;AACI;;AAA8C;;AACF;;AAChD;;AACA;;AACI;;AAAQ;AAAA;;AAAA;;AAAA;;AAAA;AAAA;;AAA+E;;AAA+B;;AAC1H;;AACA;;AACI;;AAAQ;AAAA;;AAAA;;AAAA;;AAAA;AAAA;;AAAwF;;AAA0B;;AAC9H;;AACJ;;;;;;AAhBmC;;AAAA;;AAE8E;;AAAA;;;;;;AA4BjG;;;;;;AAA0D,4FAAgB,SAAhB,EAAgB,qBAAhB;;;;;;AAG1D;;;;;;;;AAJJ;;AACI;;AAGA;;AACA;;AACI;;AAAiE;AAAA;AAAA;AAAA;;AAAjE;;AACJ;;AACA;;AACI;;AAA8C;;AACF;;AAChD;;AACA;;AACI;;AAAQ;AAAA;;AAAA;;AAAA;;AAAA;;AAAA;AAAA;;AAAqF;;AAA+B;;AAChI;;AACA;;AACI;;AAAiE;;AAA0B;;AAC/F;;AACJ;;;;;;AAhBmC;;AAAA;;AAEoG;;AAAA;;;;;;AAdnJ;;AACI;;AACI;;AACI;;AACA;;AACI;;AACI;;AAAQ;;AAA6B;;AACrC;;AAAQ;;AAAG;;AACf;;AACJ;;AACA;;AAmBJ;;AACJ;;AACJ;;;;;;;AA9BS;;AAAA;;AAKmB;;AAAA;;AAImB;;AAAA;;;;;;AA3C3D;;AACI;;AACI;;AACI;;AACI;;AACJ;;AACA;;AACI;;AACI;;AAAQ;;AAAQ;;AAChB;;AAAQ;;AAAG;;AACf;;AACJ;;AACA;;AAmBJ;;AACA;;AACI;;AAgCJ;;AACJ;;AACJ;;;;;;;AAlES;;AAAA;;AAWsC;;AAAA;;AAqBd;;AAAA;;;;;;;;AA5KzD;;AACI;;AACI;;AAAwD;;AAAM;;AAC9D;;AACI;;AACJ;;AACJ;;AAGA;;AACI;;AACI;;AACI;;AAAsB;;AAAG;;AAAW;;AAAI;;AACxC;;AAAmB;AAAA;;AAAA;;AAAA;AAAA;;AAA2B;;AAA4B;;AAAiC;;AAAO;;AAElH;;AACI;;AACI;;AAqDJ;;AAEJ;;AACJ;;AACJ;;AACJ;;AAGA;;AACI;;AACI;;AACI;;AAAsB;;AAAG;;AAAc;;AAAI;;AAAuC;;AAAM;;AAAO;;AAC/F;;AAAG;AAAA;;AAAA;;AAAA;AAAA;;AAAgD;;AAA4B;;AAAiC;;AAAO;;AAEvH;;AACI;;AAwCJ;;AACJ;;AACJ;;AACJ;;AAIA;;AACI;;AACI;;AACI;;AAAsB;;AAAG;;AAAuB;;AAAI;;AAAuC;;AAAQ;;AAAO;;AAC1G;;AAAmB;AAAA;;AAAA;;AAAA;AAAA;;AAAsC;;AAA4B;;AAAiC;;AAAO;;AAC7H;;AACI;;AACI;;AAoEJ;;AACJ;;AACJ;;AACJ;;AACJ;;AA8DJ;;;;;;AAjRM;;AAiByC;;AAAA;;AAoEoE;;AAAA;;AAsDjE;;AAAA;;;;UDpHrCmrB,0B;AAwBX,4CAAoB3nB,WAApB,EAAsD3pB,cAAtD,EAAqGD,WAArG,EAA+H;AAAA;;AAA3G,eAAA4pB,WAAA,GAAAA,WAAA;AAAkC,eAAA3pB,cAAA,GAAAA,cAAA;AAA+C,eAAAD,WAAA,GAAAA,WAAA;AAtBrG,eAAA6pB,WAAA,GAAc,KAAd;AAGA,eAAAC,MAAA,GAAmB,EAAnB;AACA,eAAAC,aAAA,GAAgB,KAAhB;AACA,eAAA3hB,OAAA,GAAU,CAAV;AAKA,eAAAopC,iBAAA,GAAoB,IAAI,wDAAJ,CAAc;AAChCjsC,iBAAK,EAAE,IAAI,0DAAJ,CAAgB,EAAhB,CADyB;AAEhCksC,uBAAW,EAAE,IAAI,wDAAJ,CAAc,CAAC,KAAKC,iBAAL,EAAD,CAAd,CAFmB;AAGhCC,4BAAgB,EAAE,IAAI,wDAAJ,CAAc,CAAC,KAAKC,sBAAL,EAAD,CAAd,CAHc;AAIhCC,kCAAsB,EAAE,IAAI,wDAAJ,CAAc,CAAC,KAAKC,4BAAL,EAAD,CAAd;AAJQ,WAAd,CAApB;AAaC;;;;qCAEU;AAET,iBAAKN,iBAAL,GAAyB,KAAKxxC,WAAL,CAAiBc,KAAjB,CAAuB;AAC9CyE,mBAAK,EAAE,EADuC;AAE9CksC,yBAAW,EAAE,KAAKzxC,WAAL,CAAiBe,KAAjB,CAAuB,CAAC,KAAK2wC,iBAAL,EAAD,CAAvB,CAFiC;AAG9CC,8BAAgB,EAAE,KAAK3xC,WAAL,CAAiBe,KAAjB,CAAuB,CAAC,KAAK6wC,sBAAL,EAAD,CAAvB,CAH4B;AAI9CC,oCAAsB,EAAE,KAAK7xC,WAAL,CAAiBe,KAAjB,CAAuB,CAAC,KAAK+wC,4BAAL,EAAD,CAAvB;AAJsB,aAAvB,CAAzB;AAMA,iBAAKzlC,SAAL;AACA,iBAAKke,UAAL;AACA,iBAAKlpB,cAAL;AACD;;;sCAEWC,O,EAAwB;AAAA;;AAClCC,sBAAU,CAAC,YAAK;AACd,kBAAG,QAAI,CAACI,MAAL,IAAeL,OAAO,CAAC8kB,SAAR,CAAkB3kB,YAApC,EAAiD;AAC/C,oBAAG,QAAI,CAACowC,sBAAL,IAA+B,IAAlC,EAAuC;AACrC,0BAAI,CAACA,sBAAL,CAA4BhwC,KAA5B;;AACA,0BAAI,CAAC8vC,gBAAL,CAAsB9vC,KAAtB;;AACA,0BAAI,CAAC4vC,WAAL,CAAiB5vC,KAAjB;AACD;AACF;;AACD,sBAAI,CAAC0oB,UAAL;;AACA,sBAAI,CAAC5oB,MAAL,GAAcL,OAAO,CAAC8kB,SAAR,CAAkB3kB,YAAhC;;AACA,kBAAG,QAAI,CAACE,MAAL,IAAe,IAAlB,EAAuB;AACrB,wBAAI,CAAC6vC,iBAAL,CAAuB5vC,GAAvB,CAA2B,OAA3B,EAAoCY,QAApC,CAA6C,QAAI,CAACb,MAAL,CAAY4D,KAAzD,EAAgE;AAAC9C,2BAAS,EAAC;AAAX,iBAAhE;AACD;;AACD,sBAAI,CAACpB,cAAL;AACH,aAdW,EAcT,EAdS,CAAV;AAeD;;;2CAEa;AACZE,sBAAU,CAAC,YAAM;AACf;AACAyE,eAAC,CAAC,mBAAD,CAAD,CAAuBC,OAAvB,CAA+B;AAC7BC,uBAAO,EAAG;AADmB,eAA/B;AAGD,aALS,EAKP,GALO,CAAV;AAMD;;;uCAEoB;AAAA;;AACnB,iBAAK6jB,aAAL,GAAqB,IAArB;AACA,iBAAKH,WAAL,CAAiBc,SAAjB,GAA6BzpB,SAA7B,CAAuC,UAAA4N,CAAC,EAAI;AAC1C,sBAAI,CAACib,MAAL,GAAcjb,CAAd;AACA,sBAAI,CAACkb,aAAL,GAAqB,KAArB;AACD,aAHD;AAID;;;sCAEQ;AACP,iBAAKynB,iBAAL,CAAuBpjC,YAAvB,CAAoCpN,IAApC,CAAyC,oEAAa,GAAb,CAAzC,EAA4DC,SAA5D,CAAsE,UAAAoN,YAAY,EAAI,CACpF;AACD,aAFD;AAGD;;;8CAEgB;AACf,mBAAO,KAAKrO,WAAL,CAAiBc,KAAjB,CAAuB;AAC5BwB,kBAAI,EAAE,EADsB;AAE5B2U,wBAAU,EAAE,GAFgB;AAG5BnR,oBAAM,EAAE;AAHoB,aAAvB,CAAP;AAKD;;;2CAEgB;AACf,iBAAK2rC,WAAL,GAAmB,KAAKD,iBAAL,CAAuB5vC,GAAvB,CAA2B,aAA3B,CAAnB;AACA,iBAAK6vC,WAAL,CAAiBpvC,IAAjB,CAAsB,KAAKqvC,iBAAL,EAAtB;AACA,iBAAKrwC,cAAL;AACD;;;4CAEiB4B,K,EAAO;AACvB,iBAAKwuC,WAAL,GAAmB,KAAKD,iBAAL,CAAuB5vC,GAAvB,CAA2B,aAA3B,CAAnB;AACA,iBAAK6vC,WAAL,CAAiB5qC,QAAjB,CAA0B5D,KAA1B;AACD;;;gDAEqB;AACpB,iBAAK0uC,gBAAL,GAAwB,KAAKH,iBAAL,CAAuB5vC,GAAvB,CAA2B,kBAA3B,CAAxB;AACA,iBAAK+vC,gBAAL,CAAsBtvC,IAAtB,CAA2B,KAAKuvC,sBAAL,EAA3B;AACA,iBAAKvwC,cAAL;AACD;;;iDAEsB4B,K,EAAO;AAC5B,iBAAK0uC,gBAAL,GAAwB,KAAKH,iBAAL,CAAuB5vC,GAAvB,CAA2B,kBAA3B,CAAxB;AACA,iBAAK+vC,gBAAL,CAAsB9qC,QAAtB,CAA+B5D,KAA/B;AACD;;;sDAE2B;AAC1B,iBAAK4uC,sBAAL,GAA8B,KAAKL,iBAAL,CAAuB5vC,GAAvB,CAA2B,wBAA3B,CAA9B;AACA,iBAAKiwC,sBAAL,CAA4BxvC,IAA5B,CAAiC,KAAKyvC,4BAAL,EAAjC;AACA,iBAAKzwC,cAAL;AACD;;;uDAE4B4B,K,EAAO;AAClC,iBAAK4uC,sBAAL,GAA8B,KAAKL,iBAAL,CAAuB5vC,GAAvB,CAA2B,wBAA3B,CAA9B;AACA,iBAAKiwC,sBAAL,CAA4BhrC,QAA5B,CAAqC5D,KAArC;AACD;;;uDAE4BA,K,EAAO;AAClC,gBAAM0nB,OAAO,GAAe,KAAK6mB,iBAAL,CAAuB/rB,QAAvB,CAAgC,wBAAhC,EAA2DxhB,EAA3D,CAA8DhB,KAA9D,EAAqErB,GAArE,CAAyE,SAAzE,CAA5B;AACA+oB,mBAAO,CAACC,MAAR,CAAe3nB,KAAf,EAAsB,KAAK8uC,+BAAL,EAAtB;AACA,iBAAK1wC,cAAL;AACD;;;0DAE+B4B,K,EAAO6nB,E,EAAI;AACzC,gBAAMH,OAAO,GAAe,KAAK6mB,iBAAL,CAAuB/rB,QAAvB,CAAgC,wBAAhC,EAA2DxhB,EAA3D,CAA8DhB,KAA9D,EAAqErB,GAArE,CAAyE,SAAzE,CAA5B;AACA+oB,mBAAO,CAAC9jB,QAAR,CAAiBikB,EAAjB;AACD;;;mDAEqB;AACpB,mBAAO,KAAK9qB,WAAL,CAAiBc,KAAjB,CAAuB;AAC5BwC,sBAAQ,EAAE,EADkB;AAE5B8C,oBAAM,EAAE;AAFoB,aAAvB,CAAP;AAID;;;yDAE2B;AAC1B,mBAAO,KAAKpG,WAAL,CAAiBc,KAAjB,CAAuB;AAC5BiqB,sBAAQ,EAAE,EADkB;AAE5BznB,sBAAQ,EAAE,EAFkB;AAG5B0nB,sBAAQ,EAAE,EAHkB;AAI5BC,qBAAO,EAAE,IAAI,wDAAJ,CAAc,EAAd;AAJmB,aAAvB,CAAP;AAMD;;;4DAE8B;AAC7B,mBAAO,KAAKjrB,WAAL,CAAiBc,KAAjB,CAAuB;AAC5BoqB,0BAAY,EAAE,KADc;AAE5BC,wBAAU,EAAE;AAFgB,aAAvB,CAAP;AAID;;;;;;;yBA1JUomB,0B,EAA0B,2J,EAAA,+K,EAAA,2H;AAAA,O;;;cAA1BA,0B;AAA0B,gD;AAAA;AAAA;AAAA,S;AAAA,sF;AAAA,gB;AAAA,e;AAAA,szK;AAAA;AAAA;ACvBvC;;;;AAAuC;;;;;;;;;wEDuB1BA,0B,EAA0B;gBALtC,uDAKsC;iBAL5B;AACT3xC,oBAAQ,EAAE,yBADD;AAETC,uBAAW,EAAE,sCAFJ;AAGTC,qBAAS,EAAE,CAAC,sCAAD;AAHF,W;AAK4B,U;;;;;;;;;AAU5BsmB,mBAAS;kBAAjB;AAAiB;;;;;;;;;;;;;;;;;;;AEnCpB;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;;;;;;ACgCgC;;AAA6P;;AAAiB;;;;;;AAAjB;;AAAA;;;;;;AAGzP;;AAA4E;;AAAkB;;;;;;AAAlB;;AAAA;;;;;;;;AAC5E;;AASc;AAAA;;AAAA;;AAAA;;AAAA;;AAAA;;AAAA;AAAA;;AATd;;;;;;AAS0L;;;;;;;;AAC1L;;AACc;AAAA;;AAAA;;AAAA;;AAAA;;AAAA;;AAAA;AAAA,aAAgF,QAAhF,EAAgF;AAAA;;AAAA;;AAAA;;AAAA;;AAAA;;AAAA;AAAA,WAAhF;;AADd;;;;;;AACuS;;;;;;;;AAEvS;;AAAqB;AAAA;;AAAA;;AAAA;;AAAA;;AAAA;;AAAA;AAAA;;AAA8N;;AAAkB;;;;;;AAAlB;;AAAA;;;;;;AAlB3P;;AACI;;AAEA;;AACI;;AACA;;AAUA;;AAGA;;AACJ;;AACJ;;;;;;AAnBuE;;AAAA;;AAGlB;;AAAA;;AACvB;;AAAA;;AAUF;;AAAA;;AAGkF;;AAAA;;;;;;AAMtG;;AACI;;AACJ;;;;;;AACA;;AACI;;AACJ;;;;;;AADI;;AAAA;;;;;;AAuBoB;;AAAwC;;AAAqC;;;;;;AAArC;;AAAA;;;;;;AAD5C;;AACI;;AACJ;;;;;;AADQ;;AAAA;;;;;;AAYN;;AAAuG;;AAA4B;;AAA+B;;AAAO;;;;;;AAAxI;;;;;;AAJ3C;;AAGI;;AAAO;;AAAkJ;;AAA4B;;AAAwC;;AAAO;;AAAI;;AACxO;;AAAM;;AAA6K;;AACvL;;;;;;AAFc;;AAAA;;AACA;;AAAA;;;;;;AAgBE;;AACI;;AACJ;;;;;;AADgG;;AAAA;;;;;;;;AAtChI;;AACI;;AAEI;;AACI;;AACI;;AAEI;;AACI;;AAGA;;AAAG;;;;AAAqF;;AAC5F;;AAIJ;;AACA;;AAOA;;AAAmB;AAAA;;AAAA;;AAAA;;AAAA;;AAAA;AAAA;;AAA8B;;AAAyB;;AAAuC;;AAAO;;AAExH;;AACI;;AACI;;AACI;;AAA6D;;AAAM;;AACnE;;AACI;;AACJ;;AACJ;;AACA;;AACI;;AAA6D;;AAAO;;AACpE;;AACI;;AAIJ;;AACJ;;AACA;;AACI;;AAA6D;;AAAK;;AAClE;;AACI;;AACJ;;AACJ;;AACA;;AACI;;AAA6D;;AAAK;;AAClE;;AACI;;AAAiC;AAAA;;AAAA;;AAAA;;AAAA;;AAAA;;AAAA,sEAA6D,MAA7D;AAAmE,WAAnE;;AAAyJ;;AAC9L;;AACJ;;AACA;;AACI;;AAA6D;;AAAW;;AACxE;;AACI;;AAAmC;AAAA;;AAAA;;AAAA;;AAAA;;AAAA;;AAAA,sEAA+D,YAA/D;AAA2E,WAA3E;;AAAmL;;AAC1N;;AACJ;;AACJ;;AACJ;;AACJ;;AACJ;;AAGJ;;AACJ;;;;;;;;;AA/DiE;;AAAA,4KAAmE,eAAnE,EAAmE,uFAAnE;;AAGjB;;AAAA;;AAGrB;;AAAA;;AAMJ;;AAAA;;AASF;;AAAA;;AAKoG;;AAAA;;AAMlE;;AAAA;;AASiE;;AAAA;;AAMuE;;AAAA;;AAMsB;;AAAA;;;;;;AA3DzN;;AACI;;AAqEJ;;;;;;AArE6E;;AAAA;;;;;;;;AA3DzF;;AACI;;AAC2E;;AAA8B;;AACjE;;AAAkF;;AAAI;;AAAO;;AAErI;;AAAG;AAAA;;AAAA;;AAAA;;AAAA;AAAA;;AAA4D;;AAA4B;;AAAuC;;AAAO;;AACzI;;AAAG;AAAA;;AAAA;AAAA;;AAAA;;AAAA;AAAA;;AAAmF;;AAAyB;;AAA2B;;AAAO;;AAEjJ;;AACI;;AAQI;;;;AAqBA;;AACI;;AAAkE;;AAAa;;AAC/E;;AACI;;AAGA;;AAGA;;AAAQ;AAAA;;AAAA;;AAAA;;AAAA;AAAA;;AAKJ;;AACJ;;AACJ;;AAGJ;;AACA;;AAuEJ;;AACJ;;AAIJ;;;;;;;;;AArI0D;;AAAA,qHAA+C,eAA/C,EAA+C,gCAA/C;;AAEd;;AAAA;;AAKnC;;AAAA;;AASkE;;AAAA;;AAwBV;;AAAA;;AAGA;;AAAA;;AAc/C;;AAAA;;;;;;AA3DtB;;AACI;;AAuIJ;;;;;;AAvIiD;;AAAA;;;;;;;;AA2JjD;;AACI;;AACI;;AAC+C;;AAA4B;;AAC3E;;AACI;;AACI;AAAA;;AAAA;;AAAA;;AAAA;;AAAA,qCAA2B,KAA3B;AAAkC,mBAAF,8DAAE;AAAF,WAAhC;;AAA4F;;AAAM;;AACtG;;AACI;AAAA;;AAAA;;AAAA;;AAAA;;AAAA,qCAA2B,IAA3B;AAAiC,mBAAF,8DAAE;AAAF,WAA/B;;AAA2F;;AACvF;;AACZ;;AACJ;;AACA;;AAAqB;AAAA;;AAAA;;AAAA;;AAAA;;AAAA;AAAA;;AAArB;;AAIJ;;;;;;AAXe;;AAAA;;AAEA;;AAAA;;AAOP;;AAAA;;;;;;AAsCwB;;;;;;AACA;;;;;;AAMA;;;;;;AACA;;;;;;AAMA;;;;;;AACA;;;;;;AAYJ;;AACI;;AACJ;;;;;;AACA;;AACI;;AACJ;;;;;;AACA;;AACI;;AACJ;;;;;;AACA;;AACI;;AACJ;;;;;;AACA;;AACI;;AACJ;;;;;;AACA;;AACI;;AACJ;;;;;;AACA;;AACkE;;;;AAA8B;;;;;;AAA9B;;AAAA;;;;;;AAClE;;AACwB;;AAAQ;;;;;;AAKxB;;AACI;;;;;;AACJ;;;;;;AADI;;AAAA;;;;;;AAFR;;AACI;;AAGJ;;;;;;AAHW;;AAAA;;;;;;AAIX;;AACwB;;AAAO;;;;;;AAPnC;;AACI;;AAKA;;AAEJ;;;;;;;;AAP6B;;AAAA;;AAKlB;;AAAA;;;;;;AAGX;;AAAkE;;AAAO;;;;;;AAGzE;;AACI;;;;AACJ;;;;;;AADI;;AAAA;;;;;;AAEJ;;AAEI;;AACJ;;;;;;;;AA7CR;;AAAsC;AAAA;;AAAA;;AAAA;;AAAA;AAAA;;AAElC;;AACI;;AAGA;;AAGA;;AAGA;;AAGA;;AAGA;;AAGA;;AAEA;;AAEJ;;AACA;;AACI;;AASA;;AACJ;;AACA;;AACI;;AAGA;;AAIJ;;AACJ;;;;;;AA9CI;;AAEW;;AAAA;;AAGA;;AAAA;;AAGA;;AAAA;;AAGA;;AAAA;;AAGA;;AAAA;;AAGA;;AAAA;;AAIF;;AAAA;;AACE;;AAAA;;AAIA;;AAAA;;AASA;;AAAA;;AAGA;;AAAA;;AAGA;;AAAA;;;;;;AAQvB;;AAA8E;;AAAU;;;;;;AASpF;;AACI;;AACI;;AACI;;AACI;;AACJ;;AACJ;;AACJ;;AACJ;;;;;;AAEI;;AAEI;;AACI;;AACI;;AACJ;;AACJ;;AACA;;AACI;;AACI;;;;AACJ;;AACJ;;AACJ;;;;;;AAHY;;AAAA;;;;;;AAIZ;;AAEI;;AACI;;AACI;;AACJ;;AACJ;;AACA;;AACI;;AACI;;;;AACJ;;AACJ;;AACJ;;;;;;AAHY;;AAAA;;;;;;AAaA;;AACI;;AACI;;;;;;AACJ;;AACJ;;;;;;AAFQ;;AAAA;;;;;;AAHZ;;AACI;;AAKJ;;;;;;AALW;;AAAA;;;;;;AATnB;;AAEI;;AACI;;AACI;;AACJ;;AACJ;;AACA;;AACI;;AAOJ;;AACJ;;;;;;AARiC;;AAAA;;;;;;AAkBrB;;AACI;;AACI;;;;;;AACJ;;AACJ;;;;;;AAFQ;;AAAA;;;;;;AAHZ;;AACI;;AAKJ;;;;;;AALW;;AAAA;;;;;;AATnB;;AAEI;;AACI;;AACI;;AACJ;;AACJ;;AACA;;AACI;;AAOJ;;AACJ;;;;;;AARiC;;AAAA;;;;;;AASjC;;AAEI;;AACI;;AACI;;AACJ;;AACJ;;AACA;;AACI;;AACI;;;;AACJ;;AACJ;;AACJ;;;;;;AAHY;;AAAA;;;;;;AAIZ;;AAEI;;AACI;;AACI;;AACJ;;AACJ;;AACA;;AACI;;AACI;;;;AACJ;;AACJ;;AACJ;;;;;;AAHY;;AAAA;;;;;;AAIZ;;AAEI;;AACI;;AACI;;AACJ;;AACJ;;AACA;;AACI;;AACI;;;;AACJ;;AACJ;;AACJ;;;;;;AAHY;;AAAA;;;;;;AAIZ;;AAEI;;AACI;;AACI;;AACJ;;AACJ;;AACA;;AACI;;AACI;;;;AACJ;;AACJ;;AACJ;;;;;;AAHY;;AAAA;;;;;;AAIZ;;AAEI;;AACI;;AACI;;AACJ;;AACJ;;AACA;;AACI;;AACI;;;;AACJ;;AACJ;;AACJ;;;;;;AAHY;;AAAA;;;;;;AAIZ;;AAEI;;AACI;;AACI;;AACJ;;AACJ;;AACA;;AACI;;AACI;;;;AACJ;;AACJ;;AACJ;;;;;;AAHY;;AAAA;;;;;;AAIZ;;AAEI;;AACI;;AACI;;AACJ;;AACJ;;AACA;;AACI;;AACI;;;;AACJ;;AACJ;;AACJ;;;;;;AAHY;;AAAA;;;;;;AAIZ;;AAEI;;AACI;;AACI;;AACoB;;AAAI;;AAAwC;;AACpE;;AACJ;;AACA;;AACI;;AACI;;;;AACJ;;AACJ;;AACJ;;;;;;AATkC;;AAAA;;AAMtB;;AAAA;;;;;;AAIZ;;AAEI;;AACI;;AACI;;AACJ;;AACJ;;AACA;;AACI;;AACI;;;;AACJ;;AACJ;;AACJ;;;;;;AAHY;;AAAA;;;;;;AAIZ;;AAEI;;AACI;;AACI;;AAAuE;;AACnE;;AAAwC;;AAChD;;AACJ;;AACA;;AACI;;AACI;;AACJ;;AACJ;;AACJ;;;;;;AATkC;;AAAA;;AAMtB;;AAAA;;;;;;AAIZ;;AAEI;;AACI;;AACI;;AACJ;;AACJ;;AACA;;AACI;;AACI;;AACJ;;AACJ;;AACJ;;;;;;AAHY;;AAAA;;;;;;AA1MhB;;AACI;;AAaA;;AAaA;;AAiBA;;AAiBA;;AAaA;;AAaA;;AAaA;;AAaA;;AAaA;;AAaA;;AAaA;;AAcA;;AAaA;;AAcA;;AAaJ;;;;;;AA5MS;;AAAA;;AAaA;;AAAA;;AAaA;;AAAA;;AAiBA;;AAAA;;AAiBA;;AAAA;;AAaA;;AAAA;;AAaA;;AAAA;;AAaA;;AAAA;;AAaA;;AAAA;;AAaA;;AAAA;;AAaA;;AAAA;;AAaA;;AAAA;;AAcA;;AAAA;;AAaA;;AAAA;;AAcA;;AAAA;;;;;;AAkBT;;AACI;;AACI;;AACI;;AACI;;AACJ;;AACJ;;AACJ;;AACJ;;;;;;AACA;;AAEI;;AACI;;AACI;;AACI;;AACJ;;AACJ;;AACJ;;AACJ;;;;;;AACA;;AAEI;;AACI;;AACJ;;AACA;;AACI;;AACJ;;AACJ;;;;;;AAFQ;;AAAA;;;;;;;;;;UD3gBvB4rB,yB;AAoBX,2CAAoB9xC,MAApB,EAAmDomB,aAAnD,EAAgG5e,QAAhG,EAAmI+K,gBAAnI,EAAgLxS,cAAhL,EAAwN;AAAA;;AAApM,eAAAC,MAAA,GAAAA,MAAA;AAA+B,eAAAomB,aAAA,GAAAA,aAAA;AAA6C,eAAA5e,QAAA,GAAAA,QAAA;AAAmC,eAAA+K,gBAAA,GAAAA,gBAAA;AAA6C,eAAAxS,cAAA,GAAAA,cAAA;AAfhL,eAAAqX,YAAA,GAAe,EAAf;AACQ,eAAA26B,mBAAA,GAAoC,IAAI,4CAAJ,EAApC;AACA,eAAAC,0BAAA,GAA2C,IAAI,4CAAJ,EAA3C;AACA,eAAAnrB,aAAA,GAA+B,IAAI,4CAAJ,EAA/B;AAER,eAAApP,KAAA,GAAQ,CAAR;AACA,eAAA8O,SAAA,GAAY,OAAZ;AACA,eAAAC,SAAA,GAAY,KAAZ;AACA,eAAAC,UAAA,GAAa;AAACC,iBAAK,EAAG,EAAT;AAAaF,qBAAS,EAAG;AAAzB,WAAb;AACA,eAAAG,UAAA,GAAa,EAAb;AACA,eAAAC,SAAA,GAAY,kBAAZ;AAQA,eAAAE,QAAA,GAAW,EAAX;AAH2N;;;;qCAInN;AAAA;;AAEN,iBAAKvU,gBAAL,CAAsByT,UAAtB,CAAiCjlB,SAAjC,CACE,UAAAC,IAAI,EAAE;AACJY,qBAAO,CAACC,GAAR,CAAYb,IAAZ;AACA,sBAAI,CAACyhC,MAAL,GAAczhC,IAAd;AACD,aAJH,EAII,UAAAsC,KAAK,EAAE;AACP1B,qBAAO,CAACC,GAAR,CAAYyB,KAAZ;AACD,aANH;AASA,iBAAKyuC,mBAAL,CAAyBjxC,IAAzB,CAA8B,oEAAa,IAAb,CAA9B,EAAkDC,SAAlD,CACE,UAAAC,IAAI,EAAI;AACN,kBAAGA,IAAI,IAAI,IAAX,EAAgB;AACd,wBAAI,CAACixC,gBAAL,CAAsBjxC,IAAtB;AACD;AACF,aALH;AASA,iBAAKgxC,0BAAL,CAAgClxC,IAAhC,CAAqC,oEAAa,GAAb,CAArC,EAAwDC,SAAxD,CACE,UAAAC,IAAI,EAAI;AACN,kBAAGA,IAAI,IAAI,IAAX,EAAgB;AACd,wBAAI,CAACkxC,sBAAL,CAA4BlxC,IAA5B;AACD;AACF,aALH;AAQA,iBAAKolB,aAAL,CAAmBoB,aAAnB,CAAiC,KAAK/P,KAAtC,EAA6C,KAAK8O,SAAlD,EAA6D,KAAKC,SAAlE,EAA6EzlB,SAA7E,CACE,UAAAC,IAAI,EAAG;AACL,sBAAI,CAACylB,UAAL,GAAkB;AAACC,qBAAK,EAAG,QAAI,CAACH,SAAd;AAAyBC,yBAAS,EAAG,QAAI,CAACA;AAA1C,eAAlB;AACA,sBAAI,CAACpP,YAAL,GAAoBpW,IAApB;;AACA,sBAAI,CAACoW,YAAL,CAAkBtV,OAAlB,CAA0B,UAAAC,OAAO,EAAI;AACnCA,uBAAO,CAAC,UAAD,CAAP,GAAsB,KAAtB;AACD,eAFD,EAHK,CAQL;;;AACA+D,eAAC,CAAC,wBAAD,CAAD,CAA4BoE,KAA5B,CAAkC,MAAlC;AACApE,eAAC,CAAC,iBAAD,CAAD,CAAqB8K,MAArB;AACD,aAZH,EAYI,UAAAtN,KAAK,EAAE;AACP1B,qBAAO,CAACC,GAAR,CAAYyB,KAAZ;AACD,aAdH;AAiBA,iBAAKujB,aAAL,CAAmB/lB,IAAnB,CAAwB,oEAAa,IAAb,CAAxB,EAA4CC,SAA5C,CACE,UAAAC,IAAI,EAAI;AACN,sBAAI,CAAC2lB,UAAL,GAAmB3lB,IAAI,CAACsmB,KAAxB;AACAtmB,kBAAI,CAAC4lB,SAAL,GAAiB,QAAI,CAACA,SAAL,GAAiB,YAAlC,GAAiD,QAAI,CAACA,SAAL,GAAiB,kBAAlE;;AACA,sBAAI,CAACW,kBAAL,CAAwB,QAAI,CAACZ,UAA7B,EAAyC,QAAI,CAACC,SAA9C;AACD,aALH;AAOD;;;sCAGWxlB,O,EAAwB;AAAA;;AAElCQ,mBAAO,CAACC,GAAR,CAAYT,OAAZ;;AACA,gBAAGA,OAAO,CAAC+wC,eAAR,CAAwB5wC,YAAxB,IAAwC,IAA3C,EAAgD;AAC9CF,wBAAU,CAAC,YAAM;AAEf,oBAAGD,OAAO,CAAC+wC,eAAR,CAAwB5wC,YAAxB,IAAwC,QAAI,CAACulB,QAAhD,EAAyD;AACvD,0BAAI,CAACA,QAAL,GAAgB,EAAhB;AACA,0BAAI,CAACkC,YAAL,GAAoB,IAApB;AACA,0BAAI,CAACopB,kBAAL,GAA0B,IAA1B;AACD;;AACD,wBAAI,CAACtrB,QAAL,GAAgB1lB,OAAO,CAAC+wC,eAAR,CAAwB5wC,YAAxC;AACAK,uBAAO,CAACC,GAAR,CAAY,QAAI,CAACilB,QAAjB;;AACA,oBAAG,QAAI,CAACA,QAAL,CAAcnjB,MAAd,IAAwB,CAA3B,EAA6B;AAC3B,0BAAI,CAAC5D,cAAL,CAAoB2J,uBAApB,CAA4C,KAA5C;AACD;AAEF,eAbS,EAaP,EAbO,CAAV;AAeD,aAhBD,MAgBK;AACH,mBAAKod,QAAL,GAAgB,EAAhB;AACA,mBAAKkC,YAAL,GAAoB,IAApB;AACA,mBAAKopB,kBAAL,GAA0B,IAA1B;AACD;AACF;;;4CAEiBrvC,K,EAAOuO,E,EAAIiG,O,EAAO;AAAA;;AAClC,iBAAKuP,QAAL,CAAcpgB,MAAd,CAAqB3D,KAArB,EAA2B,CAA3B;AACA,iBAAKwP,gBAAL,CAAsB8/B,uBAAtB,CAA8C/gC,EAA9C,EAAkDiG,OAAlD;AACA,iBAAKhF,gBAAL,CAAsBgzB,gBAAtB,CAAuCj0B,EAAvC,EAA2CvQ,SAA3C,CACE,UAAAC,IAAI,EAAG;AACLY,qBAAO,CAACC,GAAR,CAAYb,IAAZ;;AACA,sBAAI,CAAChB,MAAL,CAAYuY,OAAZ,CAAoB,+BAApB,EAAqD,MAArD,EAA6D;AAC3DhV,uBAAO,EAAG;AADiD,eAA7D;AAGD,aANH,EAMI,UAAAD,KAAK,EAAI;AACT1B,qBAAO,CAACC,GAAR,CAAYyB,KAAZ;;AACA,sBAAI,CAACtD,MAAL,CAAYsD,KAAZ,CAAkB,+BAAlB,EAAmD,OAAnD,EAA4D;AAC1DC,uBAAO,EAAG;AADgD,eAA5D;AAGD,aAXH;;AAaA,gBAAG,KAAKujB,QAAL,CAAcnjB,MAAd,IAAwB,CAA3B,EAA6B;AAC3B,mBAAK5D,cAAL,CAAoB2J,uBAApB,CAA4C,KAA5C,EAD2B,CAE3B;;AACA;;;;AAKD;AACF;;;mDAEwBhE,G,EAAKorB,Q,EAAUwhB,O,EAASr6B,U,EAAU;AACzD,iBAAK85B,mBAAL,CAAyBlsC,IAAzB,CAA8B;AAACmc,mBAAK,EAAGtc,GAAT;AAAcorB,sBAAQ,EAAGA,QAAzB;AAAmCwhB,qBAAO,EAAEA,OAA5C;AAAqDr6B,wBAAU,EAAGA;AAAlE,aAA9B;AACD;;;wCAEanV,K,EAAOmV,U,EAAYlV,K,EAAO2jB,K,EAAK;AAC3C,iBAAKsrB,0BAAL,CAAgCnsC,IAAhC,CAAqC;AAAC4G,eAAC,EAAE3J,KAAJ;AAAW0M,eAAC,EAAEyI,UAAd;AAA0BtS,eAAC,EAAE5C,KAA7B;AAAoC06B,eAAC,EAAE/W;AAAvC,aAArC;AACD;;;2CAEgB1lB,I,EAAI;AAAA;;;;AACnB,gBAAGA,IAAI,IAAG,IAAV,EAAe;AACb,kBAAIuxC,aAAa,GAAG,CAAH,KAAGvxC,IAAI,SAAJ,IAAAA,IAAI,WAAJ,GAAI,MAAJ,GAAAA,IAAI,CAAEiX,UAAN,MAAgB,IAAhB,IAAgB,aAAhB,GAAgB,MAAhB,GAAgB,GAAE3G,EAAtC;AACA,kBAAIwf,QAAQ,GAAG9vB,IAAI,SAAJ,IAAAA,IAAI,WAAJ,GAAI,MAAJ,GAAAA,IAAI,CAAE8vB,QAArB;AACA,kBAAI6a,QAAQ,GAAG3qC,IAAI,SAAJ,IAAAA,IAAI,WAAJ,GAAI,MAAJ,GAAAA,IAAI,CAAEsxC,OAArB;AAEA,kBAAIr6B,UAAU,GAAGjX,IAAI,SAAJ,IAAAA,IAAI,WAAJ,GAAI,MAAJ,GAAAA,IAAI,CAAEiX,UAAvB;AAEAA,wBAAU,CAACE,UAAX,CAAsBwzB,QAAtB,IAAkC7a,QAAlC;AAEA,mBAAKve,gBAAL,CAAsB0/B,gBAAtB,CAAuCh6B,UAAvC,EAAmDlX,SAAnD,CACE,UAAAC,IAAI,EAAG;AACLY,uBAAO,CAACC,GAAR,CAAYb,IAAZ;;AACA,wBAAI,CAAChB,MAAL,CAAYuY,OAAZ,CAAoB,+BAApB,EAAqD,MAArD,EAA6D;AAC3DhV,yBAAO,EAAG;AADiD,iBAA7D;AAGD,eANH,EAMI,UAAAD,KAAK,EAAI;AACT1B,uBAAO,CAACC,GAAR,CAAYyB,KAAZ;;AACA,wBAAI,CAACtD,MAAL,CAAYsD,KAAZ,CAAkB,+BAAlB,EAAmD,OAAnD,EAA4D;AAC1DC,yBAAO,EAAG;AADgD,iBAA5D;AAGD,eAXH;AAcD;AACF;;;iDAEsBvC,I,EAAI;AAAA;;AACzB,gBAAGA,IAAI,IAAI,IAAX,EAAgB;AACdY,qBAAO,CAACC,GAAR,CAAYb,IAAZ;AAEA,kBAAIuxC,aAAa,GAAGvxC,IAAI,SAAJ,IAAAA,IAAI,WAAJ,GAAI,MAAJ,GAAAA,IAAI,CAAEwO,CAAN,CAAQ8B,EAA5B;AACA,kBAAIwf,QAAQ,GAAG9vB,IAAI,SAAJ,IAAAA,IAAI,WAAJ,GAAI,MAAJ,GAAAA,IAAI,CAAEyL,CAArB;AACA,kBAAI1J,KAAK,GAAG/B,IAAI,SAAJ,IAAAA,IAAI,WAAJ,GAAI,MAAJ,GAAAA,IAAI,CAAE2E,CAAlB;AACA,kBAAI+gB,KAAK,GAAG1lB,IAAI,SAAJ,IAAAA,IAAI,WAAJ,GAAI,MAAJ,GAAAA,IAAI,CAAEy8B,CAAlB;AAEA,mBAAK3W,QAAL,CAAchlB,OAAd,CACE,UAAAC,OAAO,EAAE;AACP,oBAAGA,OAAO,CAACuP,EAAR,IAAcihC,aAAjB,EAA+B;AAC7BxwC,yBAAO,CAACoW,UAAR,CAAmBf,YAAnB,CAAgCrU,KAAhC,EAAuC2jB,KAAvC,IAAgDoK,QAAhD;AACD;AACF,eALH;AAOA,kBAAI7Y,UAAU,GAAGjX,IAAI,SAAJ,IAAAA,IAAI,WAAJ,GAAI,MAAJ,GAAAA,IAAI,CAAEwO,CAAvB;AACA5N,qBAAO,CAACC,GAAR,CAAYoW,UAAZ;AACA,mBAAK1F,gBAAL,CAAsB0/B,gBAAtB,CAAuCh6B,UAAvC,EAAmDlX,SAAnD,CACE,UAAAC,IAAI,EAAG;AACLY,uBAAO,CAACC,GAAR,CAAYb,IAAZ;;AACA,wBAAI,CAAChB,MAAL,CAAYuY,OAAZ,CAAoB,+BAApB,EAAqD,MAArD,EAA6D;AAC3DhV,yBAAO,EAAG;AADiD,iBAA7D;AAGD,eANH,EAMI,UAAAD,KAAK,EAAI;AACT1B,uBAAO,CAACC,GAAR,CAAYyB,KAAZ;;AACA,wBAAI,CAACtD,MAAL,CAAYsD,KAAZ,CAAkB,+BAAlB,EAAmD,OAAnD,EAA4D;AAC1DC,yBAAO,EAAG;AADgD,iBAA5D;AAGD,eAXH;AAcD;AACF;;;kCAEOiD,M,EAAM;AAAA;;AAEZ,iBAAKzG,cAAL,CAAoB2K,WAApB,CAAgClE,MAAhC,EAAwC,MAAxC,EAAgDzF,SAAhD,CACE,UAAAC,IAAI,EAAE;AACJY,qBAAO,CAACC,GAAR,CAAYb,IAAZ;;AACA,sBAAI,CAACjB,cAAL,CAAoBqJ,aAApB,CAAkCpI,IAAlC;;AACA,sBAAI,CAACjB,cAAL,CAAoBuJ,kBAApB,CAAuC,IAAvC;;AACA,sBAAI,CAACvJ,cAAL,CAAoBsJ,cAApB,CAAmCrI,IAAnC;;AACA,sBAAI,CAACjB,cAAL,CAAoBwG,aAApB,CAAkC;AAACgD,0BAAU,EAAGvI,IAAI,CAAC,YAAD,CAAlB;AAAkCwI,4BAAY,EAAGxI,IAAI,CAAC,cAAD;AAArD,eAAlC;;AAEA,kBAAG,QAAI,CAACwG,QAAL,CAAcoC,kBAAd,MAAsC,CAAC,QAAI,CAACpC,QAAL,CAAcmC,aAAd,EAA1C,EAAwE;AACtE,oBAAG,QAAI,CAACnC,QAAL,CAAcsC,sBAAd,MAA0C,CAAC,QAAI,CAACtC,QAAL,CAAcqC,iBAAd,EAA9C,EAAgF;AAC9E,0BAAI,CAACrC,QAAL,CAAcwC,gBAAd,CAA+B,IAA/B;;AACA,0BAAI,CAACxC,QAAL,CAAcyC,uBAAd,CAAsC,KAAtC;AACD;AACF;;AAED,kBAAI20B,WAAW,GAAGpzB,QAAQ,CAACE,gBAAT,CAA0B,iBAA1B,CAAlB;AACAkzB,yBAAW,CAAC98B,OAAZ,CAAoB,UAAAC,OAAO,EAAI;AAC7B,oBAAG,CAACA,OAAO,CAACogB,SAAR,CAAkBgD,QAAlB,CAA2B,MAA3B,CAAJ,EAAuC;AACrCpjB,yBAAO,CAACogB,SAAR,CAAkBkD,GAAlB,CAAsB,MAAtB;AACD;AACF,eAJD;AAKD,aArBH,EAsBE,UAAA/hB,KAAK,EAAE;AACL1B,qBAAO,CAACC,GAAR,CAAYyB,KAAZ;AACD,aAxBH;AA0BD;;;0CAEe4kB,I,EAAI;AAClB,iBAAKkqB,kBAAL,GAA0BlqB,IAA1B;AACA,iBAAKhe,KAAL,CAAWxC,IAAX;AACD;;;8CAEmBwgB,I,EAAK;AACvB,mBAAOA,IAAI,CAACa,IAAL,CAAU,UAAAhnB,OAAO;AAAA,qBAAIA,OAAO,CAACsmB,WAAR,KAAwB,QAA5B;AAAA,aAAjB,CAAP;AACD;;;qCAEU3iB,G,EAAKC,C,EAAC;AAAA;;AACf;AACA,gBAAGD,GAAG,CAACmU,QAAP,EAAgB,CAEf;;AACD,iBAAKzC,YAAL,CAAkBtV,OAAlB,CAA0B,UAAAC,OAAO,EAAG;AAClC,kBAAGA,OAAO,CAAC+T,GAAR,IAAenQ,CAAC,CAACmQ,GAApB,EAAwB;AACtB/T,uBAAO,CAAConB,QAAR,GAAmB,CAACpnB,OAAO,CAAConB,QAA5B;AACApnB,uBAAO,CAAConB,QAAR,GAAmB,QAAI,CAACH,YAAL,GAAoBjnB,OAAvC,GAAiD,QAAI,CAACinB,YAAL,GAAoB,IAArE;AACA,uBAAO,IAAP;AACD,eAJD,MAIK;AACHjnB,uBAAO,CAAConB,QAAR,GAAmB,KAAnB;AACA,uBAAO,KAAP;AACD;AACF,aATD;AAWD;;;yCAEW;AAAA;;AACV,iBAAKH,YAAL,GAAoB,IAApB;AACA,iBAAKvR,KAAL,GAAa,CAAb;AACA,iBAAK8O,SAAL,GAAiB,OAAjB;AACA,iBAAKC,SAAL,GAAiB,KAAjB;AACA,iBAAKyC,SAAL,CAAejd,aAAf,CAA6BoE,SAA7B,GAAyC,CAAzC;AACA,iBAAKqW,UAAL,GAAkB;AAAEC,mBAAK,EAAE,KAAKH,SAAd;AAAyBC,uBAAS,EAAE,KAAKA;AAAzC,aAAlB;AACA,iBAAKJ,aAAL,CAAmBoB,aAAnB,CAAiC,KAAK/P,KAAtC,EAA6C,KAAK8O,SAAlD,EAA6D,KAAKC,SAAlE,EAA6EzlB,SAA7E,CACE,UAAAC,IAAI,EAAG;AACL,sBAAI,CAACoW,YAAL,GAAoBpW,IAApB;;AACA,sBAAI,CAACoW,YAAL,CAAkBtV,OAAlB,CAA0B,UAAAC,OAAO,EAAI;AACnCA,uBAAO,CAAC,UAAD,CAAP,GAAsB,KAAtB;AACD,eAFD;AAKD,aARH,EAQI,UAAAuB,KAAK,EAAE;AACP1B,qBAAO,CAACC,GAAR,CAAYyB,KAAZ;AACD,aAVH;AAYD;;;yCAEW;AAAA;;AACV;AACAwC,aAAC,CAAC,wBAAD,CAAD,CAA4BoE,KAA5B,CAAkC,MAAlC;AACApE,aAAC,CAAC,iBAAD,CAAD,CAAqBqE,QAArB,CAA8B,aAA9B,EAHU,CAIV;;AACArE,aAAC,CAAC,wBAAD,CAAD,CAA4BoE,KAA5B,CAAkC;AAACE,sBAAQ,EAAE,QAAX;AAAqBC,sBAAQ,EAAE;AAA/B,aAAlC;AACAvE,aAAC,CAAC,iBAAD,CAAD,CAAqBqE,QAArB,CAA8B,aAA9B;AACArE,aAAC,CAAC,MAAD,CAAD,CAAUwE,WAAV,CAAsB,YAAtB;AACAxE,aAAC,CAAC,MAAD,CAAD,CAAUyE,GAAV,CAAc,eAAd,EAA+B,EAA/B;AAEA,iBAAKkN,KAAL,IAAc,EAAd;;AAEA,gBAAG,KAAKkP,UAAL,IAAmB,EAAtB,EAAyB;AACvB,mBAAKP,aAAL,CAAmB8C,kBAAnB,CAAsC,KAAKzR,KAA3C,EAAkD,KAAK8O,SAAvD,EAAkE,KAAKC,SAAvE,EAAkF,KAAKG,UAAvF,EAAmG,KAAKC,SAAxG,EAAmH7lB,SAAnH,CACE,UAAAC,IAAI,EAAE;AACJY,uBAAO,CAACC,GAAR,CAAYb,IAAZ,EADI,CAEJ;;AACA8E,iBAAC,CAAC,wBAAD,CAAD,CAA4BoE,KAA5B,CAAkC,MAAlC;AACApE,iBAAC,CAAC,iBAAD,CAAD,CAAqB8K,MAArB;AACA5P,oBAAI,CAACc,OAAL,CAAa,UAAAC,OAAO,EAAI;AACtB,0BAAI,CAACqV,YAAL,CAAkBjV,IAAlB,CAAuBJ,OAAvB;AACD,iBAFD;AAGD,eATH,EASI,UAAAuB,KAAK,EAAE;AACP1B,uBAAO,CAACC,GAAR,CAAYyB,KAAZ;AACD,eAXH;AAaD,aAdD,MAcK;AACH,mBAAK8iB,aAAL,CAAmB8C,kBAAnB,CAAsC,KAAKzR,KAA3C,EAAkD,KAAK8O,SAAvD,EAAkE,KAAKC,SAAvE,EAAkF,KAAKG,UAAvF,EAAmG,KAAKC,SAAxG,EAAmH7lB,SAAnH,CACE,UAAAC,IAAI,EAAG;AAELA,oBAAI,CAACc,OAAL,CAAa,UAAAC,OAAO,EAAI;AACtB,0BAAI,CAACqV,YAAL,CAAkBjV,IAAlB,CAAuBJ,OAAvB;AACD,iBAFD,EAFK,CAML;;AACA+D,iBAAC,CAAC,wBAAD,CAAD,CAA4BoE,KAA5B,CAAkC,MAAlC;AACApE,iBAAC,CAAC,iBAAD,CAAD,CAAqB8K,MAArB;AACD,eAVH,EAUI,UAAAtN,KAAK,EAAE;AACP1B,uBAAO,CAACC,GAAR,CAAYyB,KAAZ;AACD,eAZH;AAcD;AAGF;;;8CAEmB4kB,I,EAAK;AAAA;;AACvB;AACApiB,aAAC,CAAC,wBAAD,CAAD,CAA4BoE,KAA5B,CAAkC,MAAlC;AACApE,aAAC,CAAC,iBAAD,CAAD,CAAqBqE,QAArB,CAA8B,WAA9B,EAHuB,CAIvB;;AACArE,aAAC,CAAC,wBAAD,CAAD,CAA4BoE,KAA5B,CAAkC;AAACE,sBAAQ,EAAE,QAAX;AAAqBC,sBAAQ,EAAE;AAA/B,aAAlC;AAEAvE,aAAC,CAAC,iBAAD,CAAD,CAAqByE,GAArB,CAAyB,QAAzB,EAAmC,SAAnC;AACAzE,aAAC,CAAC,MAAD,CAAD,CAAUwE,WAAV,CAAsB,YAAtB;AACAxE,aAAC,CAAC,MAAD,CAAD,CAAUyE,GAAV,CAAc,eAAd,EAA+B,EAA/B;AAEA,gBAAIuG,QAAQ,GAAG,EAAf;AACA;;;;;;;;;AASA,gBAAGoX,IAAI,IAAI1mB,SAAX,EAAqB;AAEnB,kBAAI8P,EAAE,GAAG4W,IAAI,CAAClnB,IAAL,CAAU8U,GAAV,IAAiBtU,SAAjB,GAA6B0mB,IAAI,CAAClnB,IAAL,CAAU8U,GAAvC,GAA6C,EAAtD;AACA,kBAAItF,KAAK,GAAG0X,IAAI,CAAClnB,IAAL,CAAUwP,KAAV,IAAmBhP,SAAnB,GAA+B0mB,IAAI,CAAClnB,IAAL,CAAUwP,KAAzC,GAAiD,EAA7D;AACA,kBAAIpM,MAAJ;AAEA8jB,kBAAI,CAAClnB,IAAL,CAAUonB,QAAV,CAAmBtmB,OAAnB,CAA2B,UAAAC,OAAO,EAAI;AACpC,oBAAGA,OAAO,CAACsmB,WAAR,IAAuB,QAA1B,EAAmC;AACjCjkB,wBAAM,GAAGrC,OAAO,CAACumB,QAAR,GAAmB,GAAnB,GAAyBvmB,OAAO,CAACwmB,SAA1C;AACA,yBAAO,IAAP;AACD,iBAHD,MAGK;AACH,yBAAO,KAAP;AACD;AACF,eAPD;AAQAnkB,oBAAM,GAAGA,MAAM,IAAI5C,SAAV,GAAsB4C,MAAtB,GAA+B,EAAxC;AACA,kBAAIokB,IAAI,GAAGN,IAAI,CAAClnB,IAAL,CAAUwnB,IAAV,IAAkBhnB,SAAlB,GAA8B0mB,IAAI,CAAClnB,IAAL,CAAUwnB,IAAxC,GAA+C,EAA1D;AACA,kBAAIC,GAAG,GAAGP,IAAI,CAAClnB,IAAL,CAAUynB,GAAV,IAAiBjnB,SAAjB,GAA6B0mB,IAAI,CAAClnB,IAAL,CAAUynB,GAAvC,GAA6C,EAAvD;AACA,kBAAIC,WAAW,GAAG,EAAlB;AAEAR,kBAAI,CAAClnB,IAAL,CAAU,MAAV,IAAoB,EAApB;AAAuB;AACvBknB,kBAAI,CAAClnB,IAAL,CAAU,YAAV,IAA0B,EAA1B;AAEA,kBAAImC,UAAU,GAAG;AACfmO,kBAAE,EAAGA,EADU;AAEfd,qBAAK,EAAEA,KAFQ;AAGfpM,sBAAM,EAAEA,MAHO;AAIfokB,oBAAI,EAAEA,IAJS;AAKfC,mBAAG,EAAEA,GALU;AAMfC,2BAAW,EAAEA;AANE,eAAjB;AASA9mB,qBAAO,CAACC,GAAR,CAAYqmB,IAAZ,EAAkB,KAAKkqB,kBAAvB;AACA,mBAAKloC,KAAL,CAAW2e,IAAX;AAED,kBAAIwc,OAAO,GAAG,KAAK+M,kBAAL,CAAwB9gC,EAAtC;AAEC,mBAAKwV,QAAL,CAAchlB,OAAd,CACE,UAAAixB,WAAW,EAAI;;;AACb,oBAAGA,WAAW,CAACzhB,EAAZ,IAAkB+zB,OAArB,EAA6B;AAC3BzjC,yBAAO,CAACC,GAAR,CAAYkxB,WAAZ;AACA,wBAAAA,WAAW,SAAX,IAAAA,WAAW,WAAX,GAAW,MAAX,GAAAA,WAAW,CAAE5a,UAAb,MAAuB,IAAvB,IAAuB,aAAvB,GAAuB,MAAvB,GAAuB,GAAEf,YAAF,CAAejV,IAAf,CAAoB+lB,IAAI,SAAJ,IAAAA,IAAI,WAAJ,GAAI,MAAJ,GAAAA,IAAI,CAAElnB,IAA1B,CAAvB;AACD;AACF,eANH;AASA,mBAAKuR,gBAAL,CAAsB0/B,gBAAtB,CAAuC,KAAKG,kBAA5C,EAAgErxC,SAAhE,CACE,UAAAC,IAAI,EAAE;AACJY,uBAAO,CAACC,GAAR,CAAYb,IAAZ,EADI,CAEJ;;AACA8E,iBAAC,CAAC,wBAAD,CAAD,CAA4BoE,KAA5B,CAAkC,MAAlC;AACApE,iBAAC,CAAC,iBAAD,CAAD,CAAqB8K,MAArB;;AAEA,wBAAI,CAAC1G,KAAL,CAAW2e,IAAX;;AAEA,wBAAI,CAAC7oB,MAAL,CAAYuY,OAAZ,CAAoB,sBAApB,EAA4C,MAA5C,EAAoD;AAClDhV,yBAAO,EAAG;AADwC,iBAApD;AAID,eAbH,EAaI,UAAAD,KAAK,EAAE;AACP1B,uBAAO,CAACC,GAAR,CAAYyB,KAAZ,EADO,CAEP;;AACAwC,iBAAC,CAAC,wBAAD,CAAD,CAA4BoE,KAA5B,CAAkC,MAAlC;AACApE,iBAAC,CAAC,iBAAD,CAAD,CAAqB8K,MAArB;;AAEA,wBAAI,CAAC1G,KAAL,CAAW2e,IAAX;;AAEA,wBAAI,CAAC7oB,MAAL,CAAYsD,KAAZ,CAAkB,sBAAlB,EAA0C,MAA1C,EAAkD;AAChDC,yBAAO,EAAG;AADsC,iBAAlD;AAID,eAzBH;AA2BA;;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAyCD;AAEF;;;2CAEgBmC,G,EAAMoG,G,EAAI;AAAA;;AAGzB,gBAAG,KAAK2a,UAAL,CAAgBC,KAAhB,IAAyB5a,GAA5B,EAAgC;AAC9B,kBAAG,KAAK0a,SAAL,IAAkB,KAArB,EAA2B;AACzB,qBAAKA,SAAL,GAAiB,MAAjB;AACA,qBAAKC,UAAL,CAAgBD,SAAhB,GAA4B,MAA5B;AACD,eAHD,MAGK;AACH,qBAAKA,SAAL,GAAiB,KAAjB;AACA,qBAAKC,UAAL,CAAgBD,SAAhB,GAA4B,KAA5B;AACD;AACF,aARD,MAQK;AACH,mBAAKD,SAAL,GAAiBza,GAAjB;AACA,mBAAK0a,SAAL,GAAiB,KAAjB;AACA,mBAAKC,UAAL,GAAkB;AAACC,qBAAK,EAAG,KAAKH,SAAd;AAAyBC,yBAAS,EAAG,KAAKA;AAA1C,eAAlB;AACD,aAfwB,CAiBzB;;;AACA1gB,aAAC,CAAC,wBAAD,CAAD,CAA4BoE,KAA5B,CAAkC,MAAlC;AACApE,aAAC,CAAC,iBAAD,CAAD,CAAqBqE,QAArB,CAA8B,aAA9B,EAnByB,CAoBzB;;AACArE,aAAC,CAAC,wBAAD,CAAD,CAA4BoE,KAA5B,CAAkC;AAACE,sBAAQ,EAAE,QAAX;AAAqBC,sBAAQ,EAAE;AAA/B,aAAlC;AACAvE,aAAC,CAAC,iBAAD,CAAD,CAAqBqE,QAArB,CAA8B,aAA9B;AACArE,aAAC,CAAC,MAAD,CAAD,CAAUwE,WAAV,CAAsB,YAAtB;AACAxE,aAAC,CAAC,MAAD,CAAD,CAAUyE,GAAV,CAAc,eAAd,EAA+B,EAA/B;AACA,iBAAKkN,KAAL,GAAa,CAAb;AACA,iBAAKwR,SAAL,CAAejd,aAAf,CAA6BoE,SAA7B,GAAyC,CAAzC;AAEA,iBAAKgW,aAAL,CAAmB8C,kBAAnB,CAAsC,KAAKzR,KAA3C,EAAkD,KAAK8O,SAAvD,EAAkE,KAAKC,SAAvE,EAAkF,KAAKG,UAAvF,EAAmG,KAAKC,SAAxG,EAAmH7lB,SAAnH,CACE,UAAAC,IAAI,EAAE;AACJY,qBAAO,CAACC,GAAR,CAAYb,IAAZ;AACA,sBAAI,CAACoW,YAAL,GAAoB,EAApB,CAFI,CAGJ;;AACAtR,eAAC,CAAC,wBAAD,CAAD,CAA4BoE,KAA5B,CAAkC,MAAlC;AACApE,eAAC,CAAC,iBAAD,CAAD,CAAqB8K,MAArB;AACA5P,kBAAI,CAACc,OAAL,CAAa,UAAAC,OAAO,EAAI;AACtB,wBAAI,CAACqV,YAAL,CAAkBjV,IAAlB,CAAuBJ,OAAvB;AACD,eAFD;AAGD,aAVH,EAUI,UAAAuB,KAAK,EAAE;AACP1B,qBAAO,CAACC,GAAR,CAAYyB,KAAZ;AACD,aAZH;AAeD;;;qCAEU4kB,I,EAAMrD,C,EAAG;AAAA;;AAClBjjB,mBAAO,CAACC,GAAR,CAAYqmB,IAAZ,EAAkBrD,CAAlB;AAEA,iBAAKiC,QAAL,CAAchlB,OAAd,CACE,UAAAmW,UAAU,EAAE;AACV,kBAAG,CAAAiQ,IAAI,SAAJ,IAAAA,IAAI,WAAJ,GAAI,MAAJ,GAAAA,IAAI,CAAE5W,EAAN,KAAY2G,UAAU,CAAC3G,EAA1B,EAA6B;AAC3B2G,0BAAU,CAACE,UAAX,CAAsBf,YAAtB,CAAmC1Q,MAAnC,CAA0Cme,CAA1C,EAA6C,CAA7C;AACD;AACF,aALH;AAQA,iBAAKtS,gBAAL,CAAsB0/B,gBAAtB,CAAuC/pB,IAAvC,EAA6CnnB,SAA7C,CACE,UAAAC,IAAI,EAAE;AACJY,qBAAO,CAACC,GAAR,CAAYb,IAAZ;;AACA,sBAAI,CAAChB,MAAL,CAAYuY,OAAZ,CAAoB,+BAApB,EAAqD,MAArD,EAA6D;AAC3DhV,uBAAO,EAAG;AADiD,eAA7D;AAGD,aANH,EAOE,UAAAD,KAAK,EAAE;AACL1B,qBAAO,CAACC,GAAR,CAAYyB,KAAZ;;AACA,sBAAI,CAACtD,MAAL,CAAYsD,KAAZ,CAAkB,+BAAlB,EAAmD,OAAnD,EAA4D;AAC1DC,uBAAO,EAAG;AADgD,eAA5D;AAGD,aAZH;AAcA3B,mBAAO,CAACC,GAAR,CAAY,KAAKilB,QAAjB,EAA2BoB,IAA3B;AACD;;;wCAEaxiB,G,EAAK4hB,K,EAAOV,S,EAAW;AACnC,gBAAGlhB,GAAG,CAACoQ,GAAJ,IAAW,SAAX,IAAwBpQ,GAAG,CAACoQ,GAAJ,IAAW,OAAnC,IAA8CpQ,GAAG,CAACoQ,GAAJ,IAAW,KAA5D,EAAkE;AAChE,mBAAK+Q,aAAL,CAAmBhhB,IAAnB,CAAwB;AAACyhB,qBAAK,EAALA,KAAD;AAAQV,yBAAS,EAATA;AAAR,eAAxB;AACD;AACF;;;6CAEkBU,K,EAAeV,S,EAAc;AAAA;;AAC9C,iBAAKnP,KAAL,GAAa,CAAb;AACA,iBAAKuR,YAAL,GAAoB,IAApB,CAF8C,CAG9C;;AACAljB,aAAC,CAAC,wBAAD,CAAD,CAA4BoE,KAA5B,CAAkC,MAAlC;AACApE,aAAC,CAAC,iBAAD,CAAD,CAAqBqE,QAArB,CAA8B,aAA9B,EAL8C,CAM9C;;AACArE,aAAC,CAAC,wBAAD,CAAD,CAA4BoE,KAA5B,CAAkC;AAACE,sBAAQ,EAAE,QAAX;AAAqBC,sBAAQ,EAAE;AAA/B,aAAlC;AACAvE,aAAC,CAAC,MAAD,CAAD,CAAUwE,WAAV,CAAsB,YAAtB;AACAxE,aAAC,CAAC,MAAD,CAAD,CAAUyE,GAAV,CAAc,eAAd,EAA+B,EAA/B;AACA,iBAAK0e,SAAL,CAAejd,aAAf,CAA6BoE,SAA7B,GAAyC,CAAzC;;AACA,gBAAG,KAAKuW,UAAL,IAAmB,EAAtB,EAAyB;AACvB,mBAAKP,aAAL,CAAmB8C,kBAAnB,CAAsC,KAAKzR,KAA3C,EAAkD,KAAK8O,SAAvD,EAAkE,KAAKC,SAAvE,EAAkF,KAAKG,UAAvF,EAAmG,KAAKC,SAAxG,EAAmH7lB,SAAnH,CACE,UAAAC,IAAI,EAAI;AACNY,uBAAO,CAACC,GAAR,CAAYb,IAAZ;AACA,wBAAI,CAACoW,YAAL,GAAoB,EAApB;AACApW,oBAAI,CAACc,OAAL,CAAa,UAAAC,OAAO,EAAI;AACtB,0BAAI,CAACqV,YAAL,CAAkBjV,IAAlB,CAAuBJ,OAAvB;AACD,iBAFD,EAHM,CAMN;;AACA+D,iBAAC,CAAC,wBAAD,CAAD,CAA4BoE,KAA5B,CAAkC,MAAlC;AACApE,iBAAC,CAAC,iBAAD,CAAD,CAAqB8K,MAArB;AACD,eAVH,EAWE,UAAAtN,KAAK,EAAI;AACP1B,uBAAO,CAACC,GAAR,CAAYyB,KAAZ;AACD,eAbH;AAeD,aAhBD,MAgBK;AACH,mBAAK8iB,aAAL,CAAmB8C,kBAAnB,CAAsC,KAAKzR,KAA3C,EAAkD,KAAK8O,SAAvD,EAAkE,KAAKC,SAAvE,EAAkF,KAAKG,UAAvF,EAAmG,KAAKC,SAAxG,EAAmH7lB,SAAnH,CACE,UAAAC,IAAI,EAAI;AACNY,uBAAO,CAACC,GAAR,CAAYb,IAAZ;AACA,wBAAI,CAACoW,YAAL,GAAoB,EAApB;AACApW,oBAAI,CAACc,OAAL,CAAa,UAAAC,OAAO,EAAI;AACtB,0BAAI,CAACqV,YAAL,CAAkBjV,IAAlB,CAAuBJ,OAAvB;AACD,iBAFD,EAHM,CAMN;;AACA+D,iBAAC,CAAC,wBAAD,CAAD,CAA4BoE,KAA5B,CAAkC,MAAlC;AACApE,iBAAC,CAAC,iBAAD,CAAD,CAAqB8K,MAArB;AACD,eAVH,EAWE,UAAAtN,KAAK,EAAI;AACP1B,uBAAO,CAACC,GAAR,CAAYyB,KAAZ;AACD,eAbH;AAeD;AACF;;;;;;;yBA5kBUwuC,yB,EAAyB,yH,EAAA,+K,EAAA,2J,EAAA,8J,EAAA,+K;AAAA,O;;;cAAzBA,yB;AAAyB,8C;AAAA;AAAA;;;;;;;;;;;;;;;;;;;;;;ACzBtC;;AACI;;AACI;;AACI;;AAEI;;AAAiB;;AACrB;;AACJ;;AACJ;;AACA;;AACI;;AACI;;AA0IJ;;AACJ;;AAEJ;;AAKA;;AAAmG;AAAA,qBAAc,IAAAzoB,YAAA,EAAd;AAA4B,aAA5B;;AAE/F;;AACI;;AACA;;AAAuC;;AAA2B;;AACtE;;AAEA;;AAEI;;AACI;;AAkBJ;;AAIA;;AACI;;AACI;;AAII;;AACI;;AACI;;AAGI;;AACI;;AACI;;AACI;;AACI;;AAAsB;;AAAU;;AACpC;;AACJ;;AACJ;;AACJ;;AAEJ;;AACJ;;AAEA;;AACI;;AACI;;AACI;;AAAqD;AAAA,qBAAS,IAAAC,gBAAA,SAAyB,OAAzB,CAAT;AAA0C,aAA1C;;AACjD;;AAAM;;AAAK;;AACX;;AACI;;AACA;;AACJ;;AACJ;;AACA;;AAAqD;AAAA,qBAAS,IAAAA,gBAAA,SAAyB,SAAzB,CAAT;AAA4C,aAA5C;;AACjD;;AAAM;;AAAO;;AACb;;AACI;;AACA;;AACJ;;AACJ;;AACA;;AAAqD;AAAA,qBAAS,IAAAA,gBAAA,SAAyB,MAAzB,CAAT;AAAyC,aAAzC;;AACjD;;AAAM;;AAAI;;AACV;;AACI;;AACA;;AACJ;;AACJ;;AACJ;;AACJ;;AACA;;AAC0D;AAAA,qBAAY,IAAArX,YAAA,EAAZ;AAA0B,aAA1B;;AAGtD;;AAgDJ;;AACJ;;AACA;;AACJ;;AAGJ;;AACA;;AACI;;AACI;;AAEI;;AASA;;AAgNJ;;AACJ;;AACA;;AACI;;AACI;;AASA;;AAUA;;AASJ;;AACJ;;AACJ;;AACJ;;AACA;;AACI;;AACI;;AAAkE;AAAA,qBAAS,IAAAsX,mBAAA,kBAAT;AAA0C,aAA1C;;AAA4C;;AAAI;;AAEtH;;AACJ;;AACJ;;AACJ;;AAEA;;AAEJ;;;;AA3iBkB;;AAAA;;AAkJ0C;;AAAA,wFAAkB,YAAlB,EAAkB,IAAlB;;AAUjB;;AAAA;;AA8C4B;;AAAA;;AAMA;;AAAA;;AACE;;AAAA;;AAMF;;AAAA;;AACE;;AAAA;;AAMF;;AAAA;;AACE;;AAAA;;AAKX;;AAAA,oGAA8B,wBAA9B,EAA8B,GAA9B,EAA8B,cAA9B,EAA8B,KAA9B;;AAIT;;AAAA;;AAkDiB;;AAAA;;AASpC;;AAAA;;AASA;;AAAA;;AAoNA;;AAAA;;AAUD;;AAAA;;AAUA;;AAAA;;AAc0B;;AAAA;;;;;;;;;;wEDphB9CuoB,yB,EAAyB;gBALrC,uDAKqC;iBAL3B;AACTpyC,oBAAQ,EAAE,uBADD;AAETC,uBAAW,EAAE,oCAFJ;AAGTC,qBAAS,EAAE,CAAC,oCAAD;AAHF,W;AAK2B,U;;;;;;;;;;;;;AAE3BuyC,yBAAe,EAAE,CAAF;kBAAvB;AAAuB,WAAE,C;AACgCjoC,eAAK,EAAE,CAAF;kBAA9D,uDAA8D;mBAApD,4B,EAA8B;AAAC,wBAAQ;AAAT,a;AAAsB,WAAE,C;AACxC+e,mBAAS,EAAE,CAAF;kBAAjC,uDAAiC;mBAAvB,Y;AAAuB,WAAE;;;;;;;;;;;;;;;;;;;AE/BtC;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;UAmBaupB,mB;AAEX,uCAAc;AAAA;AAAG;;;;qCAET,CACP;;;;;;;yBALUA,mB;AAAmB,O;;;cAAnBA,mB;AAAmB,wC;AAAA,gB;AAAA,e;AAAA,wI;AAAA;AAAA;ACjBhC;;AACC;;AACC;;AACI;;AACA;;AACF;;AACA;;AAGH;;AACD;;;;;;;;;wEDOaA,mB,EAAmB;gBAL/B,uDAK+B;iBALrB;AACT9yC,oBAAQ,EAAE,iBADD;AAETC,uBAAW,EAAE,8BAFJ;AAGTC,qBAAS,EAAE,CAAC,8BAAD;AAHF,W;AAKqB,U;;;;;;;;;;;;;;;;;;;;AEnBhC;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;AAsBA,UAAM6yC,MAAM,GAAW,CACrB;AAAChd,YAAI,EAAE,EAAP;AAAWid,kBAAU,EAAE,SAAvB;AAAkCC,iBAAS,EAAE;AAA7C,OADqB;AAErB;;AACA;AACA;AAACld,YAAI,EAAE,SAAP;AAAkBzqB,iBAAS,EAAE,+FAA7B;AAAmD4nC,mBAAW,EAAE,CAAC,oEAAD,CAAhE;AAA6E5xC,YAAI,EAAE;AAAC2e,eAAK,EAAE,CAAC,MAAD;AAAR;AAAnF,OAJqB,EAKrB;AAAC8V,YAAI,EAAE,MAAP;AAAezqB,iBAAS,EAAE,+FAA1B;AAAgD4nC,mBAAW,EAAE,CAAC,oEAAD,CAA7D;AAA0E5xC,YAAI,EAAE;AAAC2e,eAAK,EAAE,CAAC,OAAD;AAAR;AAAhF,OALqB,EAMrB;AAAC8V,YAAI,EAAE,QAAP;AAAiBzqB,iBAAS,EAAE;AAA5B,OANqB,EAOrB;AAACyqB,YAAI,EAAE,IAAP;AAAazqB,iBAAS,EAAE;AAAxB,OAPqB,CAAvB;;UAca6nC,gB;;;;;cAAAA;;;;2BAAAA,gB;AAAgB,S;AAAA,kBAHlB,CAAC,6DAAa7U,OAAb,CAAqByU,MAArB,CAAD,CAGkB,EAFjB,4DAEiB;;;;4HAAhBI,gB,EAAgB;AAAA;AAAA,oBAFjB,4DAEiB;AAAA,S;AAFL,O;;;;;wEAEXA,gB,EAAgB;gBAJ5B,sDAI4B;iBAJnB;AACR1U,mBAAO,EAAE,CAAC,6DAAaH,OAAb,CAAqByU,MAArB,CAAD,CADD;AAERK,mBAAO,EAAE,CAAC,4DAAD;AAFD,W;AAImB,U;;;;;;;;;;;;;;;;;;ACvB7B;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;;UAMaC,W;AAKX,6BAAoB15B,IAApB,EAAsC;AAAA;;AAAlB,eAAAA,IAAA,GAAAA,IAAA;AAHZ,eAAAoC,gBAAA,GAAmB,0CAAnB;AACA,eAAAu3B,QAAA,GAAW,uDAAX;AAEiC;;;;uCAE5B3tC,K,EAAa;AACxB,mBAAO,KAAKgU,IAAL,CAAUoD,IAAV,CAAe,KAAKhB,gBAAL,GAAsB,eAAtB,GAAsCw3B,kBAAkB,CAAC,+OAA6O5tC,KAA7O,GAAmP,0BAApP,CAAxD,GAAwU,YAAxU,GAAqV,KAAK2tC,QAAzW,EAAmX,IAAnX,CAAP;AACD;;;sCAEW3tC,K,EAAa;AACvB,mBAAO,KAAKgU,IAAL,CAAUoD,IAAV,CAAe,KAAKhB,gBAAL,GAAsB,eAAtB,GAAsCw3B,kBAAkB,CAAC,kPAAgP5tC,KAAhP,GAAsP,kCAAvP,CAAxD,GAAmV,YAAnV,GAAgW,KAAK2tC,QAApX,EAA8X,IAA9X,CAAP;AACD;;;;;;;yBAbUD,W,EAAW,uH;AAAA,O;;;eAAXA,W;AAAW,iBAAXA,WAAW,K;AAAA,oBAFV;;;;;wEAEDA,W,EAAW;gBAHvB,wDAGuB;iBAHZ;AACVn5B,sBAAU,EAAE;AADF,W;AAGY,U;;;;;;;;;;;;;;;;;;;;;;ACnBxB;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;;;ACQoB;;AAEI;;AACI;;AAA6B;;AAAwB;;AACzD;;AACA;;AAEI;;AAEJ;;AACJ;;;;;;;AAR0B;;AAAA;;AACW;;AAAA;;AAEC;;AAAA;;AAG1B;;AAAA;;;;;;AAYhB;;AAAoF;;AACpF;;;;;;;;AADuC;;AAA6C;;AAAA;;;;;;AAgBxF;;;;;;AAAuL;;;;;;;;AACvL;;AAAiG;AAAA;;AAAA;;AAAA;AAAA;;AAAqD;;AAA2B;;;;;;;;AACjL;;AAAgG;AAAA;;AAAA;;AAAA;;AAAA;AAAA;AAAA;;AAAuE;;AAA4B;;;;;;AAP3M;;AACI;;AACI;;AAA0B;;AAAS;;AACvC;;AACA;;AACI;;AACA;;AACA;;AACJ;;AACJ;;;;;;AAJgB;;AAAA;;AAC6D;;AAAA;;AACA;;AAAA;;;;;;;;AAkBrD;;AAA0C;AAAA;;AAAA;;AAAA;;AAAA;AAAA;;AAA0D;;AAE5C;;AAChB;;AACxC;;;;;;AACA;;AACI;;AACJ;;;;;;;;AAdR;;AACI;;AACI;;AAA8B;;AAAgB;;AAClD;;AACA;;AACI;;AACmB;AAAA;;AAAA;;AAAA;;AAAA;AAAA;;AADnB;;AAEA;;AAKA;;AAIJ;;AACJ;;;;;;;;;AAfsC;;AAAA;;AAIgC;;AAAA;;AACxD;;AAAA;;AAKyB;;AAAA;;;;;;AAY3B;;AAC8C;;AAAM;;;;;;;;;;AADf,qHAAyC,UAAzC,EAAyC,wCAAzC;;AACS;;AAAA;;;;;;AAElD;;AACI;;AACJ;;;;;;;;AATJ;;AACI;;AAC6B;AAAA;;AAAA;;AAAA;;AAAA;AAAA;;AACzB;;AAAiB;;AAAiB;;AAClC;;AAEJ;;AACA;;AAGJ;;;;;;;;;;;AAVsB;;AAIS;;AAAA;;AAGI;;AAAA;;;;;;AAY/B;;AACI;;AACJ;;;;;;;;AAVJ;;AACI;;AACmB;AAAA;;AAAA;;AAAA;;AAAA;AAAA;;AADnB;;AAEA;;AAAK;AAAA;;AAAA;;AAAA;;AAAA;AAAA;;AAA0D;;AAEP;;AAChB;;AACxC;;AACA;;AAGJ;;;;;;;;;AAXkC;;AAQC;;AAAA;;;;;;AArBvC;;AAEI;;AAWA;;AAYJ;;;;;;;;AAvB+C;;AAAA;;AAWY;;AAAA;;;;;;AAqC/C;;AACgD;;AAAgB;;;;;;;;AAA5D;;AAA4C;;AAAA;;;;;;AAIhD;;AAEoD;;AAA+B;;;;;;;;AADzC;;;;;;;;AAdtD;;AAEI;;AACI;;AAA8B;;AAAiB;;AACnD;;AACA;;AACI;;AACI;AAAA;;AAAA;;AAAA;;AAAA;AAAA;;AACA;;AAEJ;;AAEA;;AACI;;AAGJ;;AACA;;AAAK;AAAA;;AAAA;;AAAA;;AAAA;AAAA;;AAA4D;;AAET;;AAChB;;AACxC;;AACJ;;AACJ;;;;;;;;;AApBsC;;AAAA;;AAKD;;AAAA;;AAKhB;;AAAA;;;;;;AAsBT;;AAE0D;;AAAiB;;;;;;;;;;AADvE,gIAAoD,UAApD,EAAoD,oDAApD;;AACsD;;AAAA;;;;;;AAE9D;;AACI;;AACJ;;;;;;;;AAVJ;;AACI;;AAC6B;AAAA;;AAAA;;AAAA;;AAAA;AAAA;;AACzB;;AAAiB;;AAAiB;;AAClC;;AAGJ;;AACA;;AAGJ;;;;;;;;;;;AAX2B;;AAII;;AAAA;;AAII;;AAAA;;;;;;AAQ3B;;AACwD;;AAAgB;;;;;;;;;;;AAApE;;AADyC;;AACW;;AAAA;;;;;;AAQ5D;;AACI;;AACJ;;;;;;;;AAfJ;;AACI;;AAC4B;AAAA;;AAAA;;AAAA;;AAAA;AAAA;;AACxB;;AAAiB;;AAAiB;;AAClC;;AAEJ;;AAEA;;AAAK;AAAA;;AAAA;;AAAA;;AAAA;AAAA;;AAA4D;;AAET;;AAChB;;AACxC;;AACA;;AAGJ;;;;;;;;;;;AAhBuC;;AAIN;;AAAA;;AASE;;AAAA;;;;;;AA3BvC;;AAEI;;AAYA;;AAiBJ;;;;;;;;AA7BoD;;AAAA;;AAYY;;AAAA;;;;;;;;;;;;;;;;;;;;AA9JpF;;AACI;;AACI;;AACI;;AACI;;AAAsB;;AAAG;;AAAW;;AAAI;;AACxC;;AACI;;AAYJ;;AACJ;;AACJ;;AACJ;;AACA;;AACI;;AAAuD;;AAAK;;AAC5D;;AACI;;AAAgE;AAAA;;AAAA;;AAAA;AAAA;;AAC5D;;AAEJ;;AACA;;AACK;;AAEmD;;AAA+B;;AACvF;;AACJ;;AACJ;;AAEA;;AAWA;;AACI;;AACI;;AACI;;AAAsB;;AAAG;;AAAoB;;AAAI;;AACjD;;AAAmB;AAAA;;AAAA;;AAAA;AAAA;;AAA+D;;AAA4B;;AACpE;;AAAO;;AACjD;;AACI;;AAkBA;;AA2BJ;;AACJ;;AACJ;;AACJ;;AAIA;;AACI;;AACI;;AACI;;AAAsB;;AAAG;;AAAU;;AAAI;;AACvC;;AAAmB;AAAA;;AAAA;;AAAA;AAAA;;AAAuE;;AAA4B;;AAC5E;;AAAO;;AACjD;;AAEI;;AAyBA;;AAIA;;AAgCJ;;AACJ;;AACJ;;AACJ;;AACJ;;;;;;AApLM;;AAOoC;;AAAA;;AAmBD;;AAAA;;AAKiB;;AAAA;;AAMV;;AAAA;;AAeQ;;AAAA;;AAGK;;AAAA;;AAmBvB;;AAAA;;AAqCyB;;AAAA;;AAID;;AAAA;;AA8BnB;;AAAA;;;;UD1H9Bs5B,qB;AA0CX,uCAAoBxpB,WAApB,EAAsD3pB,cAAtD,EAAqGD,WAArG,EAAuIE,MAAvI,EAA8J;AAAA;;AAA1I,eAAA0pB,WAAA,GAAAA,WAAA;AAAkC,eAAA3pB,cAAA,GAAAA,cAAA;AAA+C,eAAAD,WAAA,GAAAA,WAAA;AAAkC,eAAAE,MAAA,GAAAA,MAAA;AAtC/H,eAAAmzC,aAAA,GAA8B,IAAI,4CAAJ,EAA9B;AACA,eAAAC,gBAAA,GAAiC,IAAI,4CAAJ,EAAjC;AAER,eAAAzpB,WAAA,GAAc,KAAd;AAGA,eAAAC,MAAA,GAAmB,EAAnB;AACA,eAAAC,aAAA,GAAgB,KAAhB;AACA,eAAA3hB,OAAA,GAAU,CAAV;AACA,eAAAwN,SAAA,GAAY,EAAZ;AACA,eAAA/C,cAAA,GAAiB,EAAjB;AACA,eAAA0oB,WAAA,GAAc,EAAd;AACA,eAAAgY,YAAA,GAAe,EAAf;AAGA,eAAAC,QAAA,GAAW,IAAI,wDAAJ,CAAc;AACvBC,uBAAW,EAAE,IAAI,wDAAJ,CAAc,CAAC,KAAKC,iBAAL,EAAD,CAAd,CADU;AAEvBpxC,gBAAI,EAAE,IAAI,0DAAJ,CAAgB,EAAhB,CAFiB;AAGvB2U,sBAAU,EAAG,IAAI,0DAAJ,CAAgB,IAAhB,CAHU;AAIvB1R,iBAAK,EAAE,IAAI,wDAAJ,CAAc,CAAC,KAAKouC,WAAL,EAAD,CAAd,CAJgB;AAKvBC,wBAAY,EAAE,IAAI,wDAAJ,CAAc,CAAC,KAAKC,kBAAL,EAAD,CAAd;AALS,WAAd,CAAX;AAQA,eAAAC,SAAA,GAAY,EAAZ;AACA,eAAAC,WAAA,GAAc,EAAd;AAEA,eAAAC,QAAA,GAAW,EAAX;AAEA,eAAAC,cAAA,GAAiB,EAAjB;AACA,eAAA3Y,YAAA,GAAe,EAAf;AAMA,eAAA4Y,eAAA,GAAkB,KAAlB;AACA,eAAAC,gBAAA,GAAmB,KAAnB;AAEiK;;;;qCAEtJ;AAAA;;AACT,iBAAKl0C,cAAL,CAAoBqV,iBAApB,GAAwCrU,SAAxC,CACE,UAAAC,IAAI,EAAI;AACN,sBAAI,CAAC2R,cAAL,GAAsB3R,IAAtB;AACA,sBAAI,CAAC2R,cAAL,GAAsB,QAAI,CAACA,cAAL,CAAoBlN,MAApB,CAA2B,UAAAkJ,CAAC,EAAI;AACpD,oBAAIA,CAAC,CAAC2G,UAAF,IAAgB,cAApB,EAAoC;AAClC,yBAAO,IAAP;AACD,iBAFD,MAEO;AACL,yBAAO,KAAP;AACD;AACF,eANqB,CAAtB;AAOA;AACD,aAXH;AAcAjU,sBAAU,CAAC,YAAM;AACf;AACAyE,eAAC,CAAC,kBAAD,CAAD,CAAsBC,OAAtB,CAA8B;AAC5BC,uBAAO,EAAE;AADmB,eAA9B;AAGD,aALS,EAKP,IALO,CAAV;AAMA,iBAAKqkB,UAAL;AAEA,iBAAKipB,QAAL,GAAgB,KAAKxzC,WAAL,CAAiBc,KAAjB,CAAuB;AACrC2yC,yBAAW,EAAE,KAAKzzC,WAAL,CAAiBe,KAAjB,CAAuB,EAAvB,CADwB;AAErCuB,kBAAI,EAAE,EAF+B;AAGrC2U,wBAAU,EAAG,IAHwB;AAIrC1R,mBAAK,EAAE,KAAKvF,WAAL,CAAiBe,KAAjB,CAAuB,EAAvB,CAJ8B;AAKrC6yC,0BAAY,EAAE,KAAK5zC,WAAL,CAAiBe,KAAjB,CAAuB,EAAvB;AALuB,aAAvB,CAAhB;AAQA,iBAAKsL,SAAL;AACA,iBAAKgnC,aAAL,CAAmBryC,IAAnB,CAAwB,oEAAa,IAAb,CAAxB,EAA4CC,SAA5C,CACE,UAAAC,IAAI,EAAI;AACN,sBAAI,CAACkzC,aAAL,CAAmBlzC,IAAnB;AACD,aAHH;AAMA,iBAAKoyC,gBAAL,CAAsBtyC,IAAtB,CAA2B,oEAAa,IAAb,CAA3B,EAA+CC,SAA/C,CACE,UAAAC,IAAI,EAAI;AAEN,sBAAI,CAACmzC,0BAAL,CAAgCnzC,IAAI,CAAC,KAAD,CAApC,EAA6CA,IAAI,CAAC,GAAD,CAAjD;AACD,aAJH;AAOA,iBAAKjB,cAAL,CAAoB0V,YAApB,GAAmC1U,SAAnC,CACE,UAAAC,IAAI,EAAI;AACN,sBAAI,CAAC0U,SAAL,GAAiB1U,IAAjB,CADM,CAEN;AACD,aAJH,EAKE,UAAAsC,KAAK,EAAI,CACP;AACD,aAPH;AAUD;;;uCAEoB;AAAA;;AACnB,iBAAKumB,aAAL,GAAqB,IAArB;AACA,iBAAKH,WAAL,CAAiBc,SAAjB,GAA6BzpB,SAA7B,CAAuC,UAAA4N,CAAC,EAAI;AAC1C,sBAAI,CAACib,MAAL,GAAcjb,CAAd;AACA,sBAAI,CAACkb,aAAL,GAAqB,KAArB;AACD,aAHD;AAID;;;sCAEWzoB,O,EAAwB;AAAA;;AAClCC,sBAAU,CAAC,YAAM;AACf,kBAAI,QAAI,CAACI,MAAL,IAAeL,OAAO,CAAC0lB,QAAR,CAAiBvlB,YAApC,EAAkD;AAChD,wBAAI,CAACmyC,YAAL,GAAoB,QAAI,CAACJ,QAAL,CAAc5xC,GAAd,CAAkB,cAAlB,CAApB;;AACA,wBAAI,CAACgyC,YAAL,CAAkB/xC,KAAlB;;AAEA,wBAAI,CAACyyC,gBAAL,GAAwB,QAAI,CAACd,QAAL,CAAc5xC,GAAd,CAAkB,aAAlB,CAAxB;;AACA,wBAAI,CAAC0yC,gBAAL,CAAsBzyC,KAAtB;;AAEA,wBAAI,CAAC0yC,UAAL,GAAkB,QAAI,CAACf,QAAL,CAAc5xC,GAAd,CAAkB,OAAlB,CAAlB;;AACA,wBAAI,CAAC2yC,UAAL,CAAgB1yC,KAAhB;;AAEA,wBAAI,CAACy5B,YAAL,GAAoB,EAApB;AACA,wBAAI,CAAC2Y,cAAL,GAAsB,EAAtB;AACD;;AACD,sBAAI,CAACtyC,MAAL,GAAcL,OAAO,CAAC0lB,QAAR,CAAiBvlB,YAA/B,CAde,CAef;;AACA,kBAAI,QAAI,CAACE,MAAL,IAAe,IAAnB,EAAyB;AAEvB,wBAAI,CAAC45B,WAAL,GAAmB,EAAnB;AACA,wBAAI,CAACgY,YAAL,GAAoB,EAApB;AACA,wBAAI,CAACQ,WAAL,GAAmB,EAAnB;AACA,wBAAI,CAACD,SAAL,GAAiB,EAAjB;;AAEA,qBAAK,IAAIjuC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG,QAAI,CAAClE,MAAL,CAAY6yC,mBAAZ,CAAgC3wC,MAApD,EAA4DgC,CAAC,EAA7D,EAAiE;AAC/D,sBAAMssB,KAAK,GAAG,QAAI,CAACxwB,MAAL,CAAY6yC,mBAAZ,CAAgC3uC,CAAhC,EAAmC,OAAnC,CAAd;AACA,sBAAM7C,KAAK,GAAG,QAAI,CAACrB,MAAL,CAAY6yC,mBAAZ,CAAgC3uC,CAAhC,EAAmC,OAAnC,CAAd;;AACA,0BAAI,CAAC4uC,cAAL,CAAoBtiB,KAApB,EAA2BnvB,KAA3B;AACD;;AAED,wBAAI,CAACwwC,QAAL,CAAc5xC,GAAd,CAAkB,YAAlB,EAAgCY,QAAhC,CAAyC,QAAI,CAACb,MAAL,CAAYsV,UAArD,EAAiE;AAAExU,2BAAS,EAAG;AAAd,iBAAjE;;AACA,wBAAI,CAAC+wC,QAAL,CAAc5xC,GAAd,CAAkB,MAAlB,EAA0BY,QAA1B,CAAmC,QAAI,CAACb,MAAL,CAAYW,IAA/C,EAAqD;AAAEG,2BAAS,EAAE;AAAb,iBAArD;;AAEA,qBAAK,IAAIoD,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG,QAAI,CAAClE,MAAL,CAAY4D,KAAZ,CAAkB1B,MAAtC,EAA8CgC,CAAC,EAA/C,EAAmD;AAEjD,sBAAMssB,MAAK,GAAG,QAAI,CAACxwB,MAAL,CAAY4D,KAAZ,CAAkBM,CAAlB,EAAqB,YAArB,CAAd;AACA,sBAAM7C,MAAK,GAAG,QAAI,CAACrB,MAAL,CAAY4D,KAAZ,CAAkBM,CAAlB,EAAqB,eAArB,CAAd;;AAEA,0BAAI,CAACiuC,SAAL,CAAezxC,IAAf,CAAoB8vB,MAApB;;AAEA,sBAAInvB,MAAK,IAAI,EAAb,EAAiB;AACf,4BAAI,CAAC0xC,QAAL,CAAcviB,MAAd,EAAqBnvB,MAArB;;AACA,4BAAI,CAAC+wC,WAAL,CAAiB1xC,IAAjB,CAAsB8vB,MAAtB;;AAGA,4BAAI,CAAC8hB,cAAL,CAAoB5xC,IAApB,CAAyB;AAAE8vB,2BAAK,EAAEA,MAAT;AAAgBnvB,2BAAK,EAAEA;AAAvB,qBAAzB;AACD;AAEF;;AAEDzB,0BAAU,CAAC,YAAM;AAAA;AAEb,wBAAM4wB,KAAK,GAAG,QAAI,CAACxwB,MAAL,CAAY26B,UAAZ,CAAuBz2B,CAAvB,EAA0B,OAA1B,CAAd;AACA,wBAAM7C,KAAK,GAAG,QAAI,CAACrB,MAAL,CAAY26B,UAAZ,CAAuBz2B,CAAvB,EAA0B,OAA1B,CAAd;AAEA,wBAAI22B,gBAAgB,GAAG,EAAvB;;AACA,4BAAI,CAAC3pB,cAAL,CAAoBlN,MAApB,CAA2B,UAAAkJ,CAAC,EAAI;AAC9B,0BAAIA,CAAC,CAAC2G,UAAF,IAAgB2c,KAAhB,IAAyBA,KAAK,IAAI,cAAtC,EAAsD;AACpDtjB,yBAAC,CAAC4tB,cAAF,CAAiB92B,MAAjB,CAAwB,UAAAsJ,CAAC,EAAI;AAC3B,8BAAIA,CAAC,CAACytB,OAAF,IAAa15B,KAAjB,EAAwB;AACtBw5B,4CAAgB,GAAGvtB,CAAC,CAAC0tB,gBAArB;AACA,mCAAO,IAAP;AACD,2BAHD,MAGO;AACL,mCAAO,KAAP;AACD;AACF,yBAPD;AAQA,+BAAO,IAAP;AACD,uBAVD,MAUO;AACL,+BAAO,KAAP;AACD;AACF,qBAdD;;AAeA,4BAAI,CAACgY,eAAL,CAAqBxiB,KAArB,EAA4BnvB,KAA5B,EAAmCw5B,gBAAnC;;AACA,4BAAI,CAACoY,aAAL,CAAmBziB,KAAnB,EAA0BtsB,CAA1B;;AAEA,4BAAI,CAACy1B,YAAL,CAAkBj5B,IAAlB,CAAuB;AAAE8vB,2BAAK,EAAEA,KAAT;AAAgBnvB,2BAAK,EAAEA;AAAvB,qBAAvB;AAxBa;;AACf,uBAAK,IAAI6C,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG,QAAI,CAAClE,MAAL,CAAY26B,UAAZ,CAAuBz4B,MAA3C,EAAmDgC,CAAC,EAApD,EAAwD;AAAA;AAwBvD;AACF,iBA1BS,EA0BP,GA1BO,CAAV;AA6BAtE,0BAAU,CAAC,YAAM;AACf,sBAAIe,IAAI,GAAG,QAAI,CAACkxC,QAAL,CAAc5xC,GAAd,CAAkB,MAAlB,EAA0BoB,KAArC;;AACA,0BAAI,CAAC4S,SAAL,CAAe5T,OAAf,CAAuB,UAAA8vB,EAAE,EAAI;AAC3B,wBAAIA,EAAE,CAAC4K,OAAH,IAAcp6B,IAAlB,EAAwB;AAEtB,8BAAI,CAAC0xC,QAAL,GAAgBliB,EAAE,CAAC6K,gBAAnB;AACD;AACF,mBALD,EAFe,CAQf;;;AACA32B,mBAAC,CAAC,eAAD,CAAD,CAAmBC,OAAnB,CAA2B;AACzBC,2BAAO,EAAE;AADgB,mBAA3B;AAKD,iBAdS,EAcP,IAdO,CAAV;AAgBA3E,0BAAU,CAAC,YAAM;AAEf;AACAyE,mBAAC,CAAC,gBAAD,CAAD,CAAoBC,OAApB,CAA4B;AAC1BC,2BAAO,EAAE;AADiB,mBAA5B;AAKD,iBARS,EAQP,IARO,CAAV;AASD;AACF,aAxGS,EAwGP,GAxGO,CAAV;AA0GD;;;sCAEQ;AAAA;;AAEP,iBAAKstC,QAAL,CAAc/tB,QAAd,CAAuB,YAAvB,EAAqCrX,YAArC,CAAkDpN,IAAlD,CAAuD,iEAAUU,SAAV,CAAvD,EAA6E,oEAAa,IAAb,CAA7E,EAAiG,iEAAjG,EAA6GT,SAA7G,CAAuH,UAAAwvB,aAAa,EAAI;AACtI3uB,qBAAO,CAACC,GAAR,CAAY,aAAZ,EAA2B0uB,aAAa,CAAC,CAAD,CAAxC;AACA3uB,qBAAO,CAACC,GAAR,CAAY,aAAZ,EAA2B0uB,aAAa,CAAC,CAAD,CAAxC;;AACA,sBAAI,CAACxwB,cAAL,CAAoB0wB,aAApB,CAAkC,IAAlC;;AACA,kBAAIttB,UAAU,GAAG,EAAjB;AACA,kBAAIU,KAAK,GAAG,QAAI,CAACpC,MAAL,CAAYmB,gBAAxB;AACA,kBAAIY,QAAQ,GAAG+sB,aAAa,CAAC,CAAD,CAA5B;AACA,kBAAIO,QAAQ,GAAGP,aAAa,CAAC,CAAD,CAA5B;;AAEA,kBAAI/sB,QAAQ,IAAIhC,SAAhB,EAA2B;AACzB2B,0BAAU,GAAG;AACXf,sBAAI,EAAE,YADK;AAEXgB,0BAAQ,EAAE,YAFC;AAGXN,uBAAK,EAAEguB;AAHI,iBAAb;AAKD,eAND,MAMO,IAAIttB,QAAQ,IAAIhC,SAAZ,IAAyB,QAAI,CAACC,MAAL,CAAYsV,UAAZ,IAA0B,CAAC,CAAxD,EAA2D;AAChE5T,0BAAU,GAAG;AACXf,sBAAI,EAAE,YADK;AAEXgB,0BAAQ,EAAE,YAFC;AAGXN,uBAAK,EAAEguB,QAHI;AAIXvvB,8BAAY,EAAE,CAAC;AAJJ,iBAAb;AAMD,eAPM,MAOA;AACL4B,0BAAU,GAAG;AACXf,sBAAI,EAAE,YADK;AAEXgB,0BAAQ,EAAE,YAFC;AAGXN,uBAAK,EAAEguB,QAHI;AAIXvvB,8BAAY,EAAEiC;AAJH,iBAAb;AAMD;;AAED5B,qBAAO,CAACC,GAAR,CAAYsB,UAAZ;;AACA,sBAAI,CAACpD,cAAL,CAAoBsD,qBAApB,CAA0CQ,KAA1C,EAAiDV,UAAjD,EAA6DpC,SAA7D,CACE,UAAAC,IAAI,EAAI;AACNY,uBAAO,CAACC,GAAR,CAAYb,IAAZ;;AAEA,wBAAI,CAACjB,cAAL,CAAoBwG,aAApB,CAAkCvF,IAAlC;;AACA,wBAAI,CAACjB,cAAL,CAAoB0wB,aAApB,CAAkC,KAAlC;AACD,eANH,EAOE,UAAAntB,KAAK,EAAI;AACP1B,uBAAO,CAACC,GAAR,CAAYyB,KAAZ;;AAEA,wBAAI,CAACvD,cAAL,CAAoB0wB,aAApB,CAAkC,KAAlC;;AAEA,oBAAIntB,KAAK,CAACgB,MAAN,IAAgB,GAApB,EAAyB;AACvB,0BAAI,CAACtE,MAAL,CAAYuY,OAAZ,CAAoB,oBAApB,EAA0C,EAA1C,EAA8C;AAAEhV,2BAAO,EAAE;AAAX,mBAA9C;;AACA,0BAAI,CAACxD,cAAL,CAAoBwG,aAApB,CAAkC;AAAEgD,8BAAU,EAAEjG,KAAK,CAACA,KAAN,CAAYU;AAA1B,mBAAlC;;AACA,0BAAI,CAACsvC,QAAL,CAAc5xC,GAAd,CAAkB,YAAlB,EAAgCY,QAAhC,CAAyCwuB,QAAzC,EAAmD;AAAEvuB,6BAAS,EAAE;AAAb,mBAAnD;;AACA,0BAAI,CAACd,MAAL,CAAYsV,UAAZ,GAAyB+Z,QAAzB;AACD,iBALD,MAKO;AACL,0BAAI,CAAC9wB,MAAL,CAAYsD,KAAZ,CAAkBA,KAAK,CAACA,KAAxB,EAA+B,OAA/B,EAAwC;AAAEC,2BAAO,EAAE;AAAX,mBAAxC;AAED;AACF,eArBH;AAuBD,aAvDD;AAwDD;;;2CAEgB;AAAA;;AACf,iBAAKxD,cAAL,CAAoB0wB,aAApB,CAAkC,IAAlC;AACA,gBAAIjtB,QAAQ,GAAG,KAAK8vC,QAAL,CAAc5xC,GAAd,CAAkB,YAAlB,EAAgCoB,KAA/C;AACA,gBAAIe,KAAK,GAAG,KAAKpC,MAAL,CAAYmB,gBAAxB;AACA,gBAAIO,UAAU,GAAG;AACfC,sBAAQ,EAAE,YADK;AAEfN,mBAAK,EAAE;AAFQ,aAAjB;AAIAlB,mBAAO,CAACC,GAAR,CAAYsB,UAAZ;AACA,iBAAKpD,cAAL,CAAoBuG,wBAApB,CAA6CzC,KAA7C,EAAoDV,UAApD,EAAgEpC,SAAhE,CACE,UAAAC,IAAI,EAAI;AACNY,qBAAO,CAACC,GAAR,CAAYb,IAAZ;AACA;;;;AAGA,sBAAI,CAACjB,cAAL,CAAoBwG,aAApB,CAAkCvF,IAAlC;;AACA,sBAAI,CAACjB,cAAL,CAAoB0wB,aAApB,CAAkC,KAAlC;;AACA,sBAAI,CAAC6iB,QAAL,CAAc5xC,GAAd,CAAkB,YAAlB,EAAgCY,QAAhC,CAAyC,CAAC,CAA1C,EAA6C;AAAEC,yBAAS,EAAE;AAAb,eAA7C;;AACA,sBAAI,CAACd,MAAL,CAAYsV,UAAZ,GAAyB,CAAC,CAA1B;AACD,aAVH,EAWE,UAAAzT,KAAK,EAAI;AACP1B,qBAAO,CAACC,GAAR,CAAYyB,KAAZ;AACA;;;;;AAIA,sBAAI,CAACvD,cAAL,CAAoB0wB,aAApB,CAAkC,KAAlC;;AACA,sBAAI,CAAC1wB,cAAL,CAAoBwG,aAApB,CAAkC;AAAEgD,0BAAU,EAAEjG,KAAK,CAACA,KAAN,CAAYU;AAA1B,eAAlC;;AACA,kBAAIV,KAAK,CAACgB,MAAN,IAAgB,GAApB,EAAyB;AACvB,wBAAI,CAACtE,MAAL,CAAYuY,OAAZ,CAAoB,oBAApB,EAA0C,EAA1C,EAA8C;AAAEhV,yBAAO,EAAE;AAAX,iBAA9C;;AACA,wBAAI,CAAC+vC,QAAL,CAAc5xC,GAAd,CAAkB,YAAlB,EAAgCY,QAAhC,CAAyC,CAAC,CAA1C,EAA6C;AAAEC,2BAAS,EAAE;AAAb,iBAA7C;;AACA,wBAAI,CAACd,MAAL,CAAYsV,UAAZ,GAAyB,CAAC,CAA1B;AAED,eALD,MAKO;AACL,wBAAI,CAAC/W,MAAL,CAAYsD,KAAZ,CAAkBA,KAAK,CAACA,KAAxB,EAA+B,OAA/B,EAAwC;AAAEC,yBAAO,EAAE;AAAX,iBAAxC;AAED;AACF,aA5BH;AA8BD;;;uCAEYmC,G,EAAK;AAAA;;AAChB,iBAAK3F,cAAL,CAAoB0wB,aAApB,CAAkC,IAAlC;AACA,gBAAMkkB,OAAO,GAAGjvC,GAAG,CAACE,MAAJ,CAAW9C,KAA3B;AACA,gBAAM0D,MAAM,GAAG,KAAK/E,MAAL,CAAYmB,gBAA3B;AACA,gBAAMO,UAAU,GAAG;AAAEC,sBAAQ,EAAE,MAAZ;AAAoBN,mBAAK,EAAE6xC;AAA3B,aAAnB;AACA,iBAAK50C,cAAL,CAAoBiZ,UAApB,CAA+BxS,MAA/B,EAAuCrD,UAAvC,EAAmDrC,IAAnD,CAAwD,oEAAa,GAAb,CAAxD,EAA2EC,SAA3E,CACE,UAAAC,IAAI,EAAI;AACNY,qBAAO,CAACC,GAAR,CAAYb,IAAZ;;AACA,sBAAI,CAACjB,cAAL,CAAoB0wB,aAApB,CAAkC,KAAlC;;AACAzvB,kBAAI,CAAC,SAAD,CAAJ,GAAkB,CAAlB;AACAA,kBAAI,CAAC,UAAD,CAAJ,GAAmB2zC,OAAnB;;AACA,sBAAI,CAAC50C,cAAL,CAAoB0nB,gBAApB,CAAqCzmB,IAArC;;AACA,sBAAI,CAACjB,cAAL,CAAoBwG,aAApB,CAAkC,QAAI,CAAC9E,MAAvC;;AAEAJ,wBAAU,CAAC,YAAM;AACf,oBAAIe,IAAI,GAAG,QAAI,CAACkxC,QAAL,CAAc5xC,GAAd,CAAkB,MAAlB,EAA0BoB,KAArC;;AACA,wBAAI,CAAC4S,SAAL,CAAe5T,OAAf,CAAuB,UAAA8vB,EAAE,EAAI;AAC3B,sBAAIA,EAAE,CAAC4K,OAAH,IAAcp6B,IAAlB,EAAwB;AAEtB,4BAAI,CAAC0xC,QAAL,GAAgBliB,EAAE,CAAC6K,gBAAnB;AACD;AACF,iBALD,EAFe,CAQf;;;AACA32B,iBAAC,CAAC,eAAD,CAAD,CAAmBC,OAAnB,CAA2B;AACzBC,yBAAO,EAAE;AADgB,iBAA3B;AAKD,eAdS,EAcP,IAdO,CAAV;AAeD,aAxBH,EAwBK,UAAA1C,KAAK,EAAI;AACV1B,qBAAO,CAACC,GAAR,CAAYyB,KAAZ;AACA,kBAAMtC,IAAI,GAAG,QAAI,CAACS,MAAlB;AACAT,kBAAI,CAAC,SAAD,CAAJ,GAAkB,CAAlB;AACAA,kBAAI,CAAC,UAAD,CAAJ,GAAmB2zC,OAAnB;;AACA,sBAAI,CAAC50C,cAAL,CAAoB0nB,gBAApB,CAAqCzmB,IAArC;;AACA,sBAAI,CAACjB,cAAL,CAAoBwG,aAApB,CAAkC;AAAEgD,0BAAU,EAAEjG,KAAK,CAACA,KAAN,CAAYU;AAA1B,eAAlC;;AACA,sBAAI,CAACjE,cAAL,CAAoB0wB,aAApB,CAAkC,KAAlC;;AAEA,kBAAI,OAAQntB,KAAK,CAACA,KAAd,IAAwB,QAA5B,EAAsC;AACpC,wBAAI,CAACtD,MAAL,CAAYsD,KAAZ,CAAkBA,KAAK,CAACA,KAAxB,EAA+B,OAA/B,EAAwC;AACtCC,yBAAO,EAAE;AAD6B,iBAAxC;AAGD,eAJD,MAIO;AACL,wBAAI,CAACvD,MAAL,CAAYuY,OAAZ,CAAoB,cAApB,EAAoC,EAApC,EAAwC;AACtChV,yBAAO,EAAE;AAD6B,iBAAxC;AAGD;;AAEDlC,wBAAU,CAAC,YAAM;AACf,oBAAIe,IAAI,GAAG,QAAI,CAACkxC,QAAL,CAAc5xC,GAAd,CAAkB,MAAlB,EAA0BoB,KAArC;;AACA,wBAAI,CAAC4S,SAAL,CAAe5T,OAAf,CAAuB,UAAA8vB,EAAE,EAAI;AAC3B,sBAAIA,EAAE,CAAC4K,OAAH,IAAcp6B,IAAlB,EAAwB;AAEtB,4BAAI,CAAC0xC,QAAL,GAAgBliB,EAAE,CAAC6K,gBAAnB;AACD;AACF,iBALD,EAFe,CAQf;;;AACA32B,iBAAC,CAAC,eAAD,CAAD,CAAmBC,OAAnB,CAA2B;AACzBC,yBAAO,EAAE;AADgB,iBAA3B;AAKD,eAdS,EAcP,IAdO,CAAV;AAeD,aA1DH;AA4DD;;;wCAEaN,G,EAAKC,C,EAAG;AACpB,iBAAK5F,cAAL,CAAoB0wB,aAApB,CAAkC,IAAlC;AACA,iBAAK0iB,aAAL,CAAmBttC,IAAnB,CAAwB;AAAEH,iBAAG,EAAHA,GAAF;AAAOC,eAAC,EAADA;AAAP,aAAxB;AACD;;;gDAEqBD,G,EAAKC,C,EAAG;AAC5B,iBAAK5F,cAAL,CAAoB0wB,aAApB,CAAkC,IAAlC;AACA,iBAAK2iB,gBAAL,CAAsBvtC,IAAtB,CAA2B;AAAEH,iBAAG,EAAHA,GAAF;AAAOC,eAAC,EAADA;AAAP,aAA3B;AACD;;;gDAEqBD,G,EAAKC,C,EAAG;AAAA;;AAC5B,iBAAK5F,cAAL,CAAoB0wB,aAApB,CAAkC,IAAlC;AACA,iBAAKijB,YAAL,GAAoB,KAAKJ,QAAL,CAAc5xC,GAAd,CAAkB,cAAlB,CAApB;AACA,gBAAMuwB,KAAK,GAAG,KAAKyhB,YAAL,CAAkB3vC,EAAlB,CAAqB4B,CAArB,EAAwBjE,GAAxB,CAA4B,OAA5B,EAAqCoB,KAAnD;AACA,gBAAMU,QAAQ,GAAG,KAAKkwC,YAAL,CAAkB3vC,EAAlB,CAAqB4B,CAArB,EAAwBjE,GAAxB,CAA4B,OAA5B,EAAqCoB,KAAtD;AACA,gBAAMguB,QAAQ,GAAGprB,GAAG,CAACE,MAAJ,CAAW9C,KAA5B;AAEA,iBAAK4wC,YAAL,CAAkB3vC,EAAlB,CAAqB4B,CAArB,EAAwBjE,GAAxB,CAA4B,OAA5B,EAAqCY,QAArC,CAA8CwuB,QAA9C,EAAwD;AAAEvuB,uBAAS,EAAE;AAAb,aAAxD;;AAEA,gBAAIuuB,QAAQ,IAAI,EAAhB,EAAoB;AAClB,kBAAI3tB,UAAU,GAAG;AACff,oBAAI,EAAE,YADS;AAEfgB,wBAAQ,EAAE6uB,KAFK;AAGfnvB,qBAAK,EAAEguB,QAHQ;AAIfvvB,4BAAY,EAAEiC;AAJC,eAAjB;AAOA,mBAAK43B,YAAL,CAAkBz1B,CAAlB,IAAuB;AAAEssB,qBAAK,EAAEA,KAAT;AAAgBnvB,qBAAK,EAAEguB;AAAvB,eAAvB;AACA,kBAAItqB,MAAM,GAAG,KAAK/E,MAAL,CAAYmB,gBAAzB;AACAhB,qBAAO,CAACC,GAAR,CAAYsB,UAAZ;AAEA,mBAAKpD,cAAL,CAAoB8Y,wBAApB,CAA6CrS,MAA7C,EAAqDrD,UAArD,EAAiErC,IAAjE,CAAsE,oEAAa,IAAb,CAAtE,EAA0FC,SAA1F,CACE,UAAAC,IAAI,EAAI;AACNY,uBAAO,CAACC,GAAR,CAAYb,IAAZ,EADM,CAEN;;AACA,wBAAI,CAACjB,cAAL,CAAoBwG,aAApB,CAAkCvF,IAAlC;;AACA,wBAAI,CAACjB,cAAL,CAAoB0wB,aAApB,CAAkC,KAAlC;AACD,eANH,EAOE,UAAAntB,KAAK,EAAI;AACP1B,uBAAO,CAACC,GAAR,CAAYyB,KAAZ,EADO,CAEP;;AACA,wBAAI,CAACvD,cAAL,CAAoBwG,aAApB,CAAkC;AAAEgD,4BAAU,EAAEjG,KAAK,CAACA,KAAN,CAAYU;AAA1B,iBAAlC;;AACA,wBAAI,CAACjE,cAAL,CAAoB0wB,aAApB,CAAkC,KAAlC;;AACA,oBAAIntB,KAAK,CAACgB,MAAN,IAAgB,GAApB,EAAyB;AACvB,0BAAI,CAACtE,MAAL,CAAYsD,KAAZ,CAAkBA,KAAK,CAACA,KAAxB,EAA+B,OAA/B,EAAwC;AACtCC,2BAAO,EAAE;AAD6B,mBAAxC;AAGD,iBAJD,MAIO;AACL,0BAAI,CAACvD,MAAL,CAAYuY,OAAZ,CAAoB,2BAApB,EAAiD,EAAjD,EAAqD;AACnDhV,2BAAO,EAAE;AAD0C,mBAArD;AAGD;AACF,eArBH;AAwBD,aApCD,MAoCO;AACL,mBAAKxD,cAAL,CAAoB0wB,aAApB,CAAkC,KAAlC;AACD;AACF;;;wCAEa9qB,C,EAAG;AAAA;;AACf,iBAAK5F,cAAL,CAAoB0wB,aAApB,CAAkC,IAAlC;AACA,iBAAKijB,YAAL,GAAoB,KAAKJ,QAAL,CAAc5xC,GAAd,CAAkB,cAAlB,CAApB;AACA,gBAAMuwB,KAAK,GAAG,KAAKyhB,YAAL,CAAkB3vC,EAAlB,CAAqB4B,CAArB,EAAwBjE,GAAxB,CAA4B,OAA5B,EAAqCoB,KAAnD;AACA,gBAAMA,KAAK,GAAG,KAAK4wC,YAAL,CAAkB3vC,EAAlB,CAAqB4B,CAArB,EAAwBjE,GAAxB,CAA4B,OAA5B,EAAqCoB,KAAnD;;AACA,gBAAImvB,KAAK,IAAI,EAAT,IAAenvB,KAAK,IAAI,EAA5B,EAAgC;AAE9B,kBAAIK,UAAU,GAAG;AACff,oBAAI,EAAE,YADS;AAEfgB,wBAAQ,EAAE6uB,KAFK;AAGfnvB,qBAAK,EAAEA;AAHQ,eAAjB;AAKA,kBAAI0D,MAAM,GAAG,KAAK/E,MAAL,CAAYmB,gBAAzB;AAEA,kBAAI05B,gBAAgB,GAAG,EAAvB;AACA,mBAAK3pB,cAAL,CAAoBlN,MAApB,CAA2B,UAAAkJ,CAAC,EAAI;AAC9B,oBAAIA,CAAC,CAAC2G,UAAF,IAAgB2c,KAAhB,IAAyBA,KAAK,IAAI,cAAtC,EAAsD;AACpDtjB,mBAAC,CAAC4tB,cAAF,CAAiB92B,MAAjB,CAAwB,UAAAsJ,CAAC,EAAI;AAC3B,wBAAIA,CAAC,CAACytB,OAAF,IAAa15B,KAAjB,EAAwB;AACtBw5B,sCAAgB,GAAGvtB,CAAC,CAAC0tB,gBAArB;AACA,6BAAO,IAAP;AACD,qBAHD,MAGO;AACL,6BAAO,KAAP;AACD;AACF,mBAPD;AAQA,yBAAO,IAAP;AACD,iBAVD,MAUO;AACL,yBAAO,KAAP;AACD;AACF,eAdD;AAeA76B,qBAAO,CAACC,GAAR,CAAYsB,UAAZ;AACA,mBAAKuwC,YAAL,CAAkB3vC,EAAlB,CAAqB4B,CAArB,EAAwBjE,GAAxB,CAA4B,aAA5B,EAA2CY,QAA3C,CAAoDg6B,gBAApD,EAAsE;AAAE/5B,yBAAS,EAAE;AAAb,eAAtE;AAEA,mBAAK64B,YAAL,CAAkBj5B,IAAlB,CAAuB;AAAE8vB,qBAAK,EAAEA,KAAT;AAAgBnvB,qBAAK,EAAEA;AAAvB,eAAvB;AAEA,mBAAK/C,cAAL,CAAoB8Y,wBAApB,CAA6CrS,MAA7C,EAAqDrD,UAArD,EAAiErC,IAAjE,CAAsE,oEAAa,IAAb,CAAtE,EAA0FC,SAA1F,CACE,UAAAC,IAAI,EAAI;AACNY,uBAAO,CAACC,GAAR,CAAYb,IAAZ;;AACA,wBAAI,CAACjB,cAAL,CAAoB0wB,aAApB,CAAkC,KAAlC;;AACA,wBAAI,CAAC1wB,cAAL,CAAoBwG,aAApB,CAAkC,QAAI,CAAC9E,MAAvC;;AACA,wBAAI,CAACwyC,gBAAL,GAAwB,KAAxB;AACA5yC,0BAAU,CAAC,YAAM;AAEf;AACAyE,mBAAC,CAAC,gBAAD,CAAD,CAAoBC,OAApB,CAA4B;AAC1BC,2BAAO,EAAE;AADiB,mBAA5B;AAKD,iBARS,EAQP,IARO,CAAV;AASD,eAfH,EAgBE,UAAA1C,KAAK,EAAI;AACP1B,uBAAO,CAACC,GAAR,CAAYyB,KAAZ;;AACA,wBAAI,CAACvD,cAAL,CAAoBwG,aAApB,CAAkC;AAAEgD,4BAAU,EAAEjG,KAAK,CAACA,KAAN,CAAYU;AAA1B,iBAAlC;;AACA,wBAAI,CAACjE,cAAL,CAAoB0wB,aAApB,CAAkC,KAAlC;;AACA,wBAAI,CAACwjB,gBAAL,GAAwB,KAAxB;;AACA,oBAAI,OAAQ3wC,KAAK,CAACA,KAAd,IAAwB,QAA5B,EAAsC;AACpC,0BAAI,CAACtD,MAAL,CAAYsD,KAAZ,CAAkBA,KAAK,CAACA,KAAxB,EAA+B,OAA/B,EAAwC;AACtCC,2BAAO,EAAE;AAD6B,mBAAxC;AAGD,iBAJD,MAIO;AACL,0BAAI,CAACvD,MAAL,CAAYsN,IAAZ,CAAiB,EAAjB,EAAqB,IAArB,EAA2B;AACzB/J,2BAAO,EAAE;AADgB,mBAA3B;AAGD;;AAEDlC,0BAAU,CAAC,YAAM;AAEf;AACAyE,mBAAC,CAAC,gBAAD,CAAD,CAAoBC,OAApB,CAA4B;AAC1BC,2BAAO,EAAE;AADiB,mBAA5B;AAKD,iBARS,EAQP,IARO,CAAV;AASD,eAxCH;AA0CD,aAxED,MAwEO;AACL,mBAAKjG,cAAL,CAAoB0wB,aAApB,CAAkC,KAAlC;AACD;AACF;;;wCAEa/qB,G,EAAKC,C,EAAG;AAAA;;AAEpB,gBAAID,GAAG,CAACE,MAAJ,IAAcpE,SAAlB,EAA6B;AAC3BH,wBAAU,CAAC,YAAM;AACf,wBAAI,CAACqyC,YAAL,GAAoB,QAAI,CAACJ,QAAL,CAAc5xC,GAAd,CAAkB,cAAlB,CAApB;;AACA,wBAAI,CAACgyC,YAAL,CAAkB3vC,EAAlB,CAAqB4B,CAArB,EAAwB8S,UAAxB,CAAmC;AAAEwZ,uBAAK,EAAEvsB,GAAG,CAACE,MAAJ,CAAW9C,KAApB;AAA2BA,uBAAK,EAAE;AAAlC,iBAAnC,EAFe,CAGf;;;AACA,oBAAI4C,GAAG,CAACE,MAAJ,CAAW9C,KAAX,IAAoB,EAAxB,EAA4B;AAC1B,sBAAI45B,WAAW,GAAG,QAAI,CAAC/pB,cAAL,CAAoBlN,MAApB,CAA2B,UAAAkJ,CAAC,EAAI;AAChD,2BAAOA,CAAC,CAAC,YAAD,CAAD,IAAmBjJ,GAAG,CAACE,MAAJ,CAAW9C,KAArC;AACD,mBAFiB,EAEf,GAFe,EAEV,gBAFU,CAAlB;;AAGA,0BAAI,CAACu4B,WAAL,CAAiB11B,CAAjB,IAAsB+2B,WAAtB;AACA,0BAAI,CAAC2W,YAAL,CAAkB1tC,CAAlB,IAAuBD,GAAG,CAACE,MAAJ,CAAW9C,KAAlC;AACD,iBAND,MAMO;AACL,sBAAI45B,aAAW,GAAG,EAAlB;AACA,0BAAI,CAACrB,WAAL,CAAiB11B,CAAjB,IAAsB+2B,aAAtB;;AACA,0BAAI,CAAC2W,YAAL,CAAkB3sC,MAAlB,CAAyBf,CAAzB,EAA4B,CAA5B;AACD;AAIF,eAlBS,EAkBP,GAlBO,CAAV;AAmBD,aApBD,MAoBO;AAEL,kBAAIohB,KAAK,GAAGlb,WAAW,CAAC,UAACC,GAAD,EAAS;AAC/B,oBAAI;AACF,sBAAI4wB,WAAW,GAAG,QAAI,CAAC/pB,cAAL,CAAoBlN,MAApB,CAA2B,UAAAkJ,CAAC,EAAI;AAChD,2BAAOA,CAAC,CAAC,YAAD,CAAD,IAAmBjJ,GAA1B;AACD,mBAFiB,EAEf,GAFe,EAEV,gBAFU,CAAlB;;AAGA,0BAAI,CAAC21B,WAAL,CAAiB11B,CAAjB,IAAsB+2B,WAAtB;;AACA,0BAAI,CAAC2W,YAAL,CAAkBlxC,IAAlB,CAAuBuD,GAAvB,EALE,CAMF;;;AACA,sBAAI,QAAI,CAAC21B,WAAL,IAAoB75B,SAAxB,EAAmC;AACjC0N,iCAAa,CAAC6X,KAAD,CAAb;AACD;AAEF,iBAXD,CAWE,OAAO9gB,CAAP,EAAU;AACVrE,yBAAO,CAACC,GAAR,CAAYoE,CAAZ;AACD;AACF,eAfsB,EAepB,GAfoB,CAAvB;AAiBA;;;;;;;;AAUD;AACF;;;6CAEkBP,G,EAAKC,C,EAAG;AAAA;;AAEzBtE,sBAAU,CAAC,YAAM;AACf,sBAAI,CAACgzC,UAAL,GAAkB,QAAI,CAACf,QAAL,CAAc5xC,GAAd,CAAkB,OAAlB,CAAlB;;AACA,sBAAI,CAAC2yC,UAAL,CAAgBtwC,EAAhB,CAAmB4B,CAAnB,EAAsB8S,UAAtB,CAAiC;AAAEw4B,0BAAU,EAAEvrC,GAAG,CAACE,MAAJ,CAAW9C,KAAzB;AAAgCouC,6BAAa,EAAE;AAA/C,eAAjC,EAFe,CAGf;;;AACA,kBAAIxrC,GAAG,CAACE,MAAJ,CAAW9C,KAAX,IAAoB,EAAxB,EAA4B;AAE1B,wBAAI,CAAC+wC,WAAL,CAAiBluC,CAAjB,IAAsBD,GAAG,CAACE,MAAJ,CAAW9C,KAAjC;AACD,eAHD,MAGO;AAEL,wBAAI,CAAC+wC,WAAL,CAAiBntC,MAAjB,CAAwBf,CAAxB,EAA2B,CAA3B;AACD;AAIF,aAdS,EAcP,GAdO,CAAV;AAeD;;;qDAE0BD,G,EAAKC,C,EAAG;AAAA;;AACjC,iBAAK5F,cAAL,CAAoB0wB,aAApB,CAAkC,IAAlC;AACA,iBAAK4jB,UAAL,GAAkB,KAAKf,QAAL,CAAc5xC,GAAd,CAAkB,OAAlB,CAAlB;AACA,gBAAMuwB,KAAK,GAAG,KAAKoiB,UAAL,CAAgBtwC,EAAhB,CAAmB4B,CAAnB,EAAsBjE,GAAtB,CAA0B,YAA1B,EAAwCoB,KAAtD;AACA,gBAAMguB,QAAQ,GAAGprB,GAAG,CAACE,MAAJ,CAAW9C,KAA5B,CAJiC,CAMjC;;AAEA,gBAAIguB,QAAQ,IAAI,EAAhB,EAAoB;AAClB,kBAAM3tB,UAAU,GAAG;AAAEC,wBAAQ,EAAE6uB,KAAZ;AAAmBnvB,qBAAK,EAAEguB;AAA1B,eAAnB;AAEA,mBAAKijB,cAAL,CAAoBpuC,CAApB,IAAyB;AAAEssB,qBAAK,EAAEA,KAAT;AAAgBnvB,qBAAK,EAAEguB;AAAvB,eAAzB;AACA,kBAAItqB,MAAM,GAAG,KAAK/E,MAAL,CAAYmB,gBAAzB;AAIA,mBAAK7C,cAAL,CAAoBiZ,UAApB,CAA+BxS,MAA/B,EAAuCrD,UAAvC,EAAmDrC,IAAnD,CAAwD,oEAAa,IAAb,CAAxD,EAA4EC,SAA5E,CACE,UAAAC,IAAI,EAAI;AACNY,uBAAO,CAACC,GAAR,CAAYb,IAAZ;;AACA,wBAAI,CAACjB,cAAL,CAAoB0wB,aAApB,CAAkC,KAAlC,EAFM,CAGN;;;AACA,wBAAI,CAAC1wB,cAAL,CAAoBwG,aAApB,CAAkCvF,IAAlC;AACD,eANH,EAMK,UAAAsC,KAAK,EAAI;AACV1B,uBAAO,CAACC,GAAR,CAAYyB,KAAZ,EADU,CAEV;;AAEA,wBAAI,CAACvD,cAAL,CAAoBwG,aAApB,CAAkC;AAAEgD,4BAAU,EAAEjG,KAAK,CAACA,KAAN,CAAYU;AAA1B,iBAAlC;;AACA,wBAAI,CAACjE,cAAL,CAAoB0wB,aAApB,CAAkC,KAAlC;;AAEA,oBAAI,OAAQntB,KAAK,CAACA,KAAd,IAAwB,QAA5B,EAAsC;AACpC,0BAAI,CAACtD,MAAL,CAAYsD,KAAZ,CAAkBA,KAAK,CAACA,KAAxB,EAA+B,OAA/B,EAAwC;AACtCC,2BAAO,EAAE;AAD6B,mBAAxC;AAGD,iBAJD,MAIO;AACL,0BAAI,CAACvD,MAAL,CAAYuY,OAAZ,CAAoB,eAApB,EAAqC,EAArC,EAAyC;AACvChV,2BAAO,EAAE;AAD8B,mBAAzC;AAGD;AACF,eAtBH;;AAyBA,kBAAI0uB,KAAK,IAAI,YAAb,EAA2B;AACzB,oBAAMjxB,IAAI,GAAG,KAAKS,MAAlB;AACAT,oBAAI,CAAC,cAAD,CAAJ,GAAuB,MAAvB;AACAA,oBAAI,CAAC,WAAD,CAAJ,GAAoB8vB,QAApB;AACA9vB,oBAAI,CAAC,SAAD,CAAJ,GAAkB,CAAlB;AACA,qBAAKjB,cAAL,CAAoB0nB,gBAApB,CAAqCzmB,IAArC;AACD;AAEF,aAzCD,MAyCO;AACL,mBAAKjB,cAAL,CAAoB0wB,aAApB,CAAkC,KAAlC;AACA,mBAAKsjB,cAAL,CAAoBpuC,CAApB,IAAyB;AAAEssB,qBAAK,EAAEA,KAAT;AAAgBnvB,qBAAK,EAAE;AAAvB,eAAzB;AACD;AACF;;;wCAEarB,M,EAAQ;AAAA;;AAEpB,iBAAK4yC,UAAL,GAAkB,KAAKf,QAAL,CAAc5xC,GAAd,CAAkB,OAAlB,CAAlB;AACA,gBAAMuwB,KAAK,GAAG,KAAKoiB,UAAL,CAAgBtwC,EAAhB,CAAmBtC,MAAM,CAACkE,CAA1B,EAA6BjE,GAA7B,CAAiC,YAAjC,EAA+CoB,KAA7D;AACA,gBAAMguB,QAAQ,GAAGrvB,MAAM,CAACiE,GAAP,CAAWE,MAAX,CAAkB9C,KAAnC;AACA,gBAAM0D,MAAM,GAAG,KAAK/E,MAAL,CAAYmB,gBAA3B;AACA,gBAAMO,UAAU,GAAG;AAAEC,sBAAQ,EAAE6uB,KAAZ;AAAmBnvB,mBAAK,EAAEguB;AAA1B,aAAnB,CANoB,CAOpB;;AAEA,iBAAKijB,cAAL,CAAoB5xC,IAApB,CAAyB;AAAE8vB,mBAAK,EAAEA,KAAT;AAAgBnvB,mBAAK,EAAEguB;AAAvB,aAAzB;;AAEA,gBAAImB,KAAK,IAAIzwB,SAAT,IAAsBsvB,QAAQ,IAAI,EAAtC,EAA0C;AACxC,mBAAK/wB,cAAL,CAAoBiZ,UAApB,CAA+BxS,MAA/B,EAAuCrD,UAAvC,EAAmDrC,IAAnD,CAAwD,oEAAa,IAAb,CAAxD,EAA4EC,SAA5E,CACE,UAAAC,IAAI,EAAI;AACNY,uBAAO,CAACC,GAAR,CAAYb,IAAZ;;AACA,wBAAI,CAACjB,cAAL,CAAoB0wB,aAApB,CAAkC,KAAlC;AACA;;;AACA,wBAAI,CAAC1wB,cAAL,CAAoBwG,aAApB,CAAkCvF,IAAlC;;AACA,wBAAI,CAACgzC,eAAL,GAAuB,KAAvB;AACD,eAPH,EAOK,UAAA1wC,KAAK,EAAI;AACV1B,uBAAO,CAACC,GAAR,CAAYyB,KAAZ;AACA,wBAAI,CAAC0wC,eAAL,GAAuB,KAAvB;;AAEA,wBAAI,CAACj0C,cAAL,CAAoBwG,aAApB,CAAkC;AAAEgD,4BAAU,EAAEjG,KAAK,CAACA,KAAN,CAAYU;AAA1B,iBAAlC;;AACA,wBAAI,CAACjE,cAAL,CAAoB0wB,aAApB,CAAkC,KAAlC;AACD,eAbH;AAeD,aAhBD,MAgBO;AACL,mBAAK1wB,cAAL,CAAoB0wB,aAApB,CAAkC,KAAlC;AACD;AACF;;;6CAEkB6M,C,EAAI7wB,C,EAAI87B,C,EAAE;AAC3B,gBAAIjL,CAAC,IAAI97B,SAAT,EAAoB;AAClB,qBAAO,KAAK1B,WAAL,CAAiBc,KAAjB,CAAuB;AAC5BqxB,qBAAK,EAAE,IAAI,0DAAJ,CAAgBqL,CAAhB,EAAmB,CAAC,0DAAWtqB,QAAZ,EAAsB,0DAAWmO,SAAX,CAAqB,CAArB,CAAtB,CAAnB,CADqB;AAE5Bre,qBAAK,EAAE,IAAI,0DAAJ,CAAgB2J,CAAhB,EAAmB,CAAC,0DAAWuG,QAAZ,EAAsB,0DAAWmO,SAAX,CAAqB,CAArB,CAAtB,CAAnB,CAFqB;AAG5BqK,2BAAW,EAAE,IAAI,0DAAJ,CAAgB+c,CAAhB,EAAmB,CAAC,0DAAWv1B,QAAZ,EAAsB,0DAAWmO,SAAX,CAAqB,CAArB,CAAtB,CAAnB;AAHe,eAAvB,CAAP;AAKD,aAND,MAMO;AACL,qBAAO,KAAKrhB,WAAL,CAAiBc,KAAjB,CAAuB;AAC5BqxB,qBAAK,EAAE,IAAI,0DAAJ,CAAgB,EAAhB,EAAoB,CAAC,0DAAWjf,QAAZ,EAAsB,0DAAWmO,SAAX,CAAqB,CAArB,CAAtB,CAApB,CADqB;AAE5Bre,qBAAK,EAAE,IAAI,0DAAJ,CAAgB,EAAhB,EAAoB,CAAC,0DAAWkQ,QAAZ,EAAsB,0DAAWmO,SAAX,CAAqB,CAArB,CAAtB,CAApB,CAFqB;AAG5BqK,2BAAW,EAAE,IAAI,0DAAJ,CAAgB,EAAhB,EAAoB,CAAC,0DAAWxY,QAAZ,EAAsB,0DAAWmO,SAAX,CAAqB,CAArB,CAAtB,CAApB;AAHe,eAAvB,CAAP;AAKD;AACF;;;4CAEiBmc,C,EAAI7wB,C,EAAE;AACtB,mBAAO,KAAK3M,WAAL,CAAiBc,KAAjB,CAAuB;AAC5BqxB,mBAAK,EAAEqL,CADqB;AAE5Bx6B,mBAAK,EAAE2J;AAFqB,aAAvB,CAAP;AAID;;;sCAEW6wB,C,EAAI7wB,C,EAAE;AAChB,gBAAI6wB,CAAC,IAAI97B,SAAT,EAAoB;AAClB,qBAAO,KAAK1B,WAAL,CAAiBc,KAAjB,CAAuB;AAC5BqwC,0BAAU,EAAE,IAAI,0DAAJ,CAAgB3T,CAAhB,EAAmB,CAAC,0DAAWtqB,QAAZ,EAAsB,0DAAWmO,SAAX,CAAqB,CAArB,CAAtB,CAAnB,CADgB;AAE5B+vB,6BAAa,EAAE,IAAI,0DAAJ,CAAgBzkC,CAAhB,EAAmB,CAAC,0DAAWuG,QAAZ,EAAsB,0DAAWmO,SAAX,CAAqB,CAArB,CAAtB,CAAnB;AAFa,eAAvB,CAAP;AAID,aALD,MAKO;AACL,qBAAO,KAAKrhB,WAAL,CAAiBc,KAAjB,CAAuB;AAC5BqwC,0BAAU,EAAE,IAAI,0DAAJ,CAAgB,EAAhB,EAAoB,CAAC,0DAAWj+B,QAAZ,EAAsB,0DAAWmO,SAAX,CAAqB,CAArB,CAAtB,CAApB,CADgB;AAE5B+vB,6BAAa,EAAE,IAAI,0DAAJ,CAAgB,EAAhB,EAAoB,CAAC,0DAAWl+B,QAAZ,EAAsB,0DAAWmO,SAAX,CAAqB,CAArB,CAAtB,CAApB;AAFa,eAAvB,CAAP;AAID;AAEF;;;mCAEQmc,C,EAAI7wB,C,EAAI;AACf,iBAAK4nC,UAAL,GAAkB,KAAKf,QAAL,CAAc5xC,GAAd,CAAkB,OAAlB,CAAlB;;AACA,gBAAI47B,CAAC,IAAI97B,SAAT,EAAoB;AAClB,mBAAK6yC,UAAL,CAAgBlyC,IAAhB,CAAqB,KAAKsxC,WAAL,CAAiBnW,CAAjB,EAAoB7wB,CAApB,CAArB;AACD,aAFD,MAEO;AACL,mBAAKunC,eAAL,GAAuB,IAAvB;AACA,mBAAKK,UAAL,CAAgBlyC,IAAhB,CAAqB,KAAKsxC,WAAL,EAArB;AACD;AAEF;;;yCAEcnW,C,EAAI7wB,C,EAAI;AACrB,iBAAK2nC,gBAAL,GAAwB,KAAKd,QAAL,CAAc5xC,GAAd,CAAkB,aAAlB,CAAxB;AACA,iBAAK0yC,gBAAL,CAAsBjyC,IAAtB,CAA2B,KAAKqxC,iBAAL,CAAuBlW,CAAvB,EAA0B7wB,CAA1B,CAA3B;AACD;;;0CAEe6wB,C,EAAI7wB,C,EAAI87B,C,EAAI;AAC1B,iBAAKmL,YAAL,GAAoB,KAAKJ,QAAL,CAAc5xC,GAAd,CAAkB,cAAlB,CAApB;;AACA,gBAAI47B,CAAC,IAAI97B,SAAT,EAAoB;AAClB,mBAAKkyC,YAAL,CAAkBvxC,IAAlB,CAAuB,KAAKwxC,kBAAL,CAAwBrW,CAAxB,EAA2B7wB,CAA3B,EAA8B87B,CAA9B,CAAvB;AACD,aAFD,MAEO;AACL,mBAAKmL,YAAL,CAAkBvxC,IAAlB,CAAuB,KAAKwxC,kBAAL,EAAvB;AACA,mBAAKM,gBAAL,GAAwB,IAAxB;AACD;AACF;;;wCAEalxC,K,EAAO;AAAA;;AACnB,iBAAK2wC,YAAL,GAAoB,KAAKJ,QAAL,CAAc5xC,GAAd,CAAkB,cAAlB,CAApB;AAEA,gBAAMuwB,KAAK,GAAG,KAAKyhB,YAAL,CAAkB3vC,EAAlB,CAAqBhB,KAArB,EAA4BrB,GAA5B,CAAgC,OAAhC,EAAyCoB,KAAvD;AACA,gBAAMA,KAAK,GAAG,KAAK4wC,YAAL,CAAkB3vC,EAAlB,CAAqBhB,KAArB,EAA4BrB,GAA5B,CAAgC,OAAhC,EAAyCoB,KAAvD,CAJmB,CAMnB;;AAEA,gBAAImvB,KAAK,IAAI,EAAb,EAAiB;AAEf,kBAAIzrB,MAAM,GAAG,KAAK/E,MAAL,CAAYmB,gBAAzB;AAEA,kBAAIO,UAAU,GAAG;AACff,oBAAI,EAAE,YADS;AAEfgB,wBAAQ,EAAE6uB,KAFK;AAGfnvB,qBAAK,EAAEA;AAHQ,eAAjB;AAMA,mBAAK/C,cAAL,CAAoBuG,wBAApB,CAA6CE,MAA7C,EAAqDrD,UAArD,EAAiEpC,SAAjE,CACE,UAAAC,IAAI,EAAI;AACNY,uBAAO,CAACC,GAAR,CAAYb,IAAZ;;AACA,wBAAI,CAAChB,MAAL,CAAYuY,OAAZ,CAAoB,iBAApB,EAAuC,EAAvC,EAA2C;AACzChV,yBAAO,EAAE;AADgC,iBAA3C;;AAGA,wBAAI,CAACxD,cAAL,CAAoBwG,aAApB,CAAkC,QAAI,CAAC9E,MAAvC;AACD,eAPH,EAOK,UAAA6B,KAAK,EAAI;AACV1B,uBAAO,CAACC,GAAR,CAAYyB,KAAZ;;AACA,oBAAIA,KAAK,CAACgB,MAAN,IAAgB,GAApB,EAAyB;AACvB,0BAAI,CAACtE,MAAL,CAAYsD,KAAZ,CAAkBA,KAAK,CAACA,KAAxB,EAA+B,OAA/B,EAAwC;AACtCC,2BAAO,EAAE;AAD6B,mBAAxC;AAGD;AACF,eAdH;AAgBD,aA1BD,MA0BO;AACL,mBAAK0wC,gBAAL,GAAwB,KAAxB;AACD;;AAED,iBAAK7Y,YAAL,CAAkB10B,MAAlB,CAAyB3D,KAAzB,EAAgC,CAAhC;AACA,iBAAK2wC,YAAL,CAAkB/sC,QAAlB,CAA2B5D,KAA3B;AACA,iBAAKswC,YAAL,CAAkB3sC,MAAlB,CAAyB3D,KAAzB,EAAgC,CAAhC;AACA,iBAAKs4B,WAAL,CAAiB30B,MAAjB,CAAwB3D,KAAxB,EAA+B,CAA/B;AACD;;;sCAEWA,K,EAAO;AAAA;;AACjB,iBAAKsxC,UAAL,GAAkB,KAAKf,QAAL,CAAc5xC,GAAd,CAAkB,OAAlB,CAAlB;AAGA,gBAAMuwB,KAAK,GAAG,KAAKoiB,UAAL,CAAgBtwC,EAAhB,CAAmBhB,KAAnB,EAA0BrB,GAA1B,CAA8B,YAA9B,EAA4CoB,KAA1D;AACA,gBAAMA,KAAK,GAAG,KAAKuxC,UAAL,CAAgBtwC,EAAhB,CAAmBhB,KAAnB,EAA0BrB,GAA1B,CAA8B,eAA9B,EAA+CoB,KAA7D,CALiB,CAOjB;;AAEA,gBAAImvB,KAAK,IAAI,EAAb,EAAiB;AAEf,kBAAIzrB,MAAM,GAAG,KAAK/E,MAAL,CAAYmB,gBAAzB;AAEA,kBAAIO,UAAU,GAAG;AACff,oBAAI,EAAE,YADS;AAEfgB,wBAAQ,EAAE6uB,KAFK;AAGfnvB,qBAAK,EAAEA;AAHQ,eAAjB;AAMA,mBAAK/C,cAAL,CAAoBuG,wBAApB,CAA6CE,MAA7C,EAAqDrD,UAArD,EAAiEpC,SAAjE,CACE,UAAAC,IAAI,EAAI;AACNY,uBAAO,CAACC,GAAR,CAAYb,IAAZ;;AACA,wBAAI,CAACjB,cAAL,CAAoBwG,aAApB,CAAkC,QAAI,CAAC9E,MAAvC;AACD,eAJH,EAIK,UAAA6B,KAAK,EAAI;AACV1B,uBAAO,CAACC,GAAR,CAAYyB,KAAZ;AACD,eANH;AAQD,aAlBD,MAkBO;AACL,mBAAK0wC,eAAL,GAAuB,KAAvB;AAED;;AACD,iBAAKD,cAAL,CAAoBrtC,MAApB,CAA2B3D,KAA3B,EAAkC,CAAlC;AACA,iBAAKsxC,UAAL,CAAgB1tC,QAAhB,CAAyB5D,KAAzB;AACD;;;;;;;yBA7zBUmwC,qB,EAAqB,kJ,EAAA,+K,EAAA,2H,EAAA,yH;AAAA,O;;;cAArBA,qB;AAAqB,2C;AAAA;AAAA;AAAA,S;AAAA,sF;AAAA,gB;AAAA,e;AAAA,qlI;AAAA;AAAA;ACvBlC;;;;AAA8B;;;;;;;;;wEDuBjBA,qB,EAAqB;gBALjC,uDAKiC;iBALvB;AACTxzC,oBAAQ,EAAE,oBADD;AAETC,uBAAW,EAAE,iCAFJ;AAGTC,qBAAS,EAAE,CAAC,iCAAD;AAHF,W;AAKuB,U;;;;;;;;;;;AAEvBknB,kBAAQ,EAAE,CAAF;kBAAhB;AAAgB,WAAE;;;;;;;;;;;;;;;;;;;AE3BrB;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;UAmBa8tB,uB;AAEX,2CAAc;AAAA;AAAG;;;;qCAET,CACP;;;qCAEO;AACN;AAEAhzC,mBAAO,CAACizC,IAAR,CAAa,+BAAb;AAED;;;;;;;yBAZUD,uB;AAAuB,O;;;cAAvBA,uB;AAAuB,6C;AAAA,kB;AAAA,e;AAAA,++I;AAAA;AAAA;ACjBpC;;AAAM;AAAA,qBAAY,IAAApoB,QAAA,EAAZ;AAAsB,aAAtB;;AAEF;;AACI;;AACI;;AACI;;AACI;;AACJ;;AACJ;;AACJ;;AACA;;AACI;;AACI;;AACI;;AACI;;AAA2B;;AAAO;;AAClC;;AACJ;;AACJ;;AACA;;AACI;;AACI;;AAA4B;;AAA+B;;AAC3D;;AACI;;AAAQ;;AAAe;;AACvB;;AAAQ;;AAA0B;;AAClC;;AAAQ;;AAAe;;AAC3B;;AACJ;;AACJ;;AAEJ;;AACJ;;AACJ;;AAEA;;AAGI;;AACI;;AACI;;AACI;;AAEI;;AAAkB;;AACtB;;AACJ;;AACJ;;AACA;;AAEI;;AACI;;AACI;;AAAoB;;AAAe;;AACnC;;AACJ;;AACA;;AACI;;AAAwB;;AAAQ;;AAChC;;AACJ;;AACA;;AACI;;AAAyB;;AAA+B;;AACxD;;AACI;;AAAQ;;AAAe;;AACvB;;AAAQ;;AAA0B;;AAClC;;AAAQ;;AAAe;;AAC3B;;AACJ;;AACJ;;AACJ;;AACJ;;AAGA;;AACI;;AACI;;AACI;;AAEI;;AAAkB;;AACtB;;AACJ;;AACJ;;AACA;;AACI;;AACI;;AACI;;AACI;;AAA6B;;AAAoB;;AACjD;;AACI;;AAAQ;;AAAS;;AACjB;;AAAQ;;AAAG;;AACX;;AAAQ;;AAAU;;AACtB;;AACJ;;AACJ;;AACA;;AACI;;AACI;;AAAwB;;AAAiB;;AACzC;;AACI;;AAAQ;;AAAK;;AACb;;AAAQ;;AAAM;;AACd;;AAAQ;;AAAM;;AAClB;;AACJ;;AACJ;;AACA;;AACI;;AACI;;AAA8B;;AAAqC;;AACnE;;AACJ;;AACJ;;AACA;;AACI;;AACI;;AAA6B;;AAAsC;;AACnE;;AACJ;;AACJ;;AACJ;;AACJ;;AACJ;;AAIA;;AACI;;AACI;;AACI;;AAEI;;AAAkB;;AACtB;;AACJ;;AACJ;;AACA;;AAEI;;AACI;;AACI;;AACI;;AAA0B;;AAAQ;;AAClC;;AACI;;AAAQ;;AAAG;;AACf;;AACJ;;AACJ;;AACA;;AACI;;AACI;;AAAwB;;AAAQ;;AAChC;;AACJ;;AACJ;;AACA;;AACI;;AACI;;AAA6B;;AAA2C;;AACxE;;AACJ;;AACJ;;AACJ;;AACJ;;AACJ;;AAGA;;AACI;;AACI;;AACI;;AAEI;;AAAkB;;AACtB;;AACJ;;AACJ;;AACA;;AAEI;;AACI;;AACI;;AACI;;AAEA;;AACI;;AACJ;;AACJ;;AACJ;;AAEA;;AACI;;AAAsB;;AAA2B;;AACjD;;AACJ;;AACA;;AACI;;AAAoB;;AAA0B;;AAC9C;;AACJ;;AAEJ;;AACJ;;AACJ;;AAGA;;AACI;;AACI;;AACI;;AAEI;;AAAkB;;AACtB;;AACJ;;AACJ;;AACA;;AACI;;AACI;;AACI;;AACI;;AAAwC;;AAAM;;AAC9C;;AACJ;;AACA;;AACI;;AACI;;AACA;;AAAiE;;AAAU;;AAC/E;;AACJ;;AACA;;AACI;;AAA2C;;AAAc;;AACzD;;AACI;;AAAQ;;AAAW;;AACnB;;AAAQ;;AAAc;;AACtB;;AAAQ;;AAAQ;;AACpB;;AACJ;;AACJ;;AACA;;AACI;;AACI;;AAAwB;;AAAM;;AAC9B;;AACI;;AAAQ;;AAAG;;AACf;;AACJ;;AACA;;AACI;;AAAwB;;AAAQ;;AAChC;;AACI;;AAAQ;;AAAG;;AACf;;AACJ;;AACA;;AACI;;AAAuB;;AAAM;;AAC7B;;AACI;;AAAQ;;AAAG;;AACf;;AACJ;;AACJ;;AACJ;;AACJ;;AACJ;;AACJ;;AAGA;;AACI;;AACI;;AACI;;AAGA;;AACI;;AAAoE;;AAChE;;AAAK;;AACb;;AACA;;AACI;;AAAuE;;AACnE;;AAAK;;AACb;;AACA;;AAGJ;;AACJ;;AACJ;;AACJ;;;;;;;;;wED3PaooB,uB,EAAuB;gBALnC,uDAKmC;iBALzB;AACTl1C,oBAAQ,EAAE,sBADD;AAETC,uBAAW,EAAE,mCAFJ;AAGTC,qBAAS,EAAE,CAAC,mCAAD;AAHF,W;AAKyB,U;;;;;;;;;;;;;;;;;;;;AEnBpC;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;;;ACSgB;;AACI;;AACJ;;;;;;AA+BA;;;;;;AAAuL;;;;;;;;AACvL;;AAAmG;AAAA;;AAAA;;AAAA;AAAA;;AAAqD;;AAA2B;;;;;;;;AACnL;;AAAkG;AAAA;;AAAA;;AAAA;;AAAA;AAAA;AAAA;;AAAuE;;AAA4B;;;;;;AAP7M;;AACI;;AACI;;AAA0B;;AAAS;;AACvC;;AACA;;AACI;;AACA;;AACA;;AACJ;;AACJ;;;;;;AAJgB;;AAAA;;AAC+D;;AAAA;;AACA;;AAAA;;;;;;AAUnE;;AACI;;AACJ;;;;;;;;AAF6C;;AACzC;;AAAA;;;;;;AAIJ;;AAEoD;;AAA+B;;;;;;AADzC;;;;;;AAE1C;;AAEgD;;AAA+B;;;;;;AAhB3F;;AACI;;AACI;;AAAuB;;AAAK;;AAChC;;AACA;;AACI;;AACI;;AAGJ;;AACA;;AACI;;AAGA;;AAGJ;;AACA;;AACI;;AAEoD;;AAAO;;AAC/D;;AACJ;;AACJ;;;;;;;;AAlBmC;;AAAA;;AAKd;;AAAA;;AAGA;;AAAA;;AAKD;;AAAA;;;;;;AAWR;;AAAiJ;;AACjJ;;;;;;;;AADqC,2GAAmC,UAAnC,EAAmC,sEAAnC;;AAA4G;;AAAA;;;;;;AAGrJ;;AACI;;AACJ;;;;;;;;;;;;;;AAhFZ;;AACI;;AACI;;AAAwD;;AAAM;;AAC9D;;AACI;;AAEA;;AAGJ;;AACJ;;AAYA;;AACI;;AACI;;AAAyB;;AAAM;;AACnC;;AACA;;AACI;;AACI;;AAA8P;AAAA;;AAAA;;AAAA;;AAAA;AAAA;AAAA;;AAA9P;;AACA;;AACH;;AACL;;AACJ;;AAEA;;AAWA;;AAyBA;;AACI;;AAA2D;;AAAS;;AACpE;;AACI;;AAAwE;AAAA;;AAAA;;AAAA;AAAA;;AACpE;;AAAiB;;AAAmB;;AACpC;;AAEJ;;AACA;;AAGJ;;AACJ;;AACJ;;;;;;;;AA7E2C;;AAAA;;AAsB2E;;AAAA;;AAMjF;;AAAA;;AAWA;;AAAA;;AA8BE;;AAAA;;AAGI;;AAAA;;;;;;AAwBf;;AACI;;AAAgB;;;;;;;;AADmB;;AACnC;;AAAA;;;;;;AAQR;;AAEI;;AACJ;;;;;;AAcQ;;AACgD;;AAAgB;;;;;;;;AAA5D;;AAA4C;;AAAA;;;;;;AAGhD;;AAEoD;;AAA+B;;;;;;;;AADzC;;;;;;;;AAZtD;;AACI;;AACI;;AAA8B;;AAAiB;;AACnD;;AACA;;AACI;;AACI;AAAA;;AAAA;;AAAA;;AAAA;AAAA;;AACA;;AAEJ;;AACA;;AACI;;AAIJ;;AACA;;AAAK;AAAA;;AAAA;;AAAA;;AAAA;AAAA;;AAA4D;;AAET;;AAChB;;AACxC;;AACJ;;AACJ;;;;;;;;;;;AApBsC;;AAAA;;AAKD;;AAAA;;AAIhB;;AAAA;;;;;;AAZzB;;AACI;;AAuBJ;;;;;;AAvB8B;;AAAA;;;;;;AAgCd;;AAE6F;;AAAiB;;;;;;;;;;AAD1G,gIAAoD,UAApD,EAAoD,2FAApD;;AACyF;;AAAA;;;;;;AAEjG;;AAEI;;AACJ;;;;;;AAMI;;AACwD;;AAAgB;;;;;;;;;;;AAApE;;AADyC;;AACW;;AAAA;;;;;;AAO5D;;AAEI;;AACJ;;;;;;;;AA7BR;;AACI;;AACI;;AAC6B;AAAA;;AAAA;;AAAA;;AAAA;AAAA;;AACzB;;AAAiB;;AAAiB;;AAClC;;AAGJ;;AACA;;AAIJ;;AACA;;AACI;;AAC4B;AAAA;;AAAA;;AAAA;;AAAA;AAAA;;AACxB;;AAAiB;;AAAiB;;AAClC;;AAEJ;;AACA;;AAAK;AAAA;;AAAA;;AAAA;;AAAA;AAAA;;AAA4D;;AAET;;AAChB;;AACxC;;AACA;;AAIJ;;AACJ;;;;;;;;;;;AA9B0B;;AAAA;;AAIS;;AAAA;;AAII;;AAAA;;AAKD;;AAAA;;AAID;;AAAA;;AAQE;;AAAA;;;;;;AA5B3C;;AAEI;;AAiCJ;;;;;;;;AAjC8B;;AAAA;;;;;;;;AA6D9B;;AAEI;;AACI;;AAGI;AAAA;;AAAA;;AAAA;;AAAA;AAAA;;AAHJ;;AAIA;;AACI;;AAA8C;;AACF;;AAChD;;AACA;;AACI;;AAAQ;AAAA;;AAAA;;AAAA;;AAAA;AAAA;;AAAgE;;AACpC;;AACxC;;AACJ;;AACJ;;;;;;;AAdwC;;AAAA;;AAC0B;;AAAA;;;;;;AAmClD;;AACI;;AAAM;;AAAe;;AAAO;;AAA2B;;AAAkB;;AAC7E;;;;;;AADU;;AAAA;;AAAiD;;AAAA;;;;;;;;AAPnE;;AACI;AAAA;;AAAA;;AAAA;;AAAA;AAAA,aAAoC,QAApC,EAAoC;AAAA;;AAAA;;AAAA;;AAAA;;AAAA;AAAA,WAApC,EAAoC,OAApC,EAAoC;AAAA;;AAAA;;AAAA;AAAA,WAApC;;AAIA;;AAMJ;;;;;;AAXmE,8FAA0B,OAA1B,EAA0B,qBAA1B;;;;;;;;AAYnE;;AAGI;AAAA;;AAAA;;AAAA;;AAAA;AAAA;;AAHJ;;;;;;AAA0D;;;;;;;;AAb9D;;AACI;;AAYA;;AAIA;;AAEI;;AACI;AAAA;AAAA;AAAA;;AADJ;;AAIJ;;AASA;;AACI;;AAAQ;AAAA;;AAAA;;AAAA;;AAAA;AAAA;;AAAiE;;AACrC;;AACxC;;AACJ;;;;;;;;;;;AApCoC;;AAK3B;;AAAA;;AAUA;;AAAA;;AAGD;;AAAA;;;;;;;;;;;;AApBZ;;AAEI;;AAqCJ;;;;AArC6D;;AAAA;;;;;;;;;;;;;;;;;;;;AAjPjF;;AACI;;AAuFA;;AACI;;AACI;;AACI;;AAAsB;;AAAG;;AAAU;;AAAI;;AACvC;;AAAmB;AAAA;;AAAA;;AAAA;AAAA;;AAAuE;;AAA4B;;AAC5E;;AAAO;;AACjD;;AACI;;AACI;;AACI;;AAA8C;;AAAe;;AACjE;;AACA;;AACI;;AAC4B;AAAA;;AAAA;;AAAA;AAAA;;AACxB;;AAAiB;;AAAiB;;AAClC;;AAEJ;;AACA;;AACI;;AAEoD;;AAA+B;;AACvF;;AAEA;;AAKJ;;AACJ;;AAGA;;AA0BA;;AAuCJ;;AACJ;;AACJ;;AACJ;;AAEA;;AACI;;AAAwD;;AAAU;;AAClE;;AACI;;AAKJ;;AACJ;;AAGA;;AACI;;AACI;;AACI;;AAAsB;;AAAG;;AAAO;;AAAI;;AACpC;;AAAmB;AAAA;;AAAA;;AAAA;AAAA;;AAAuB;;AAA4B;;AAC5B;;AAAO;;AACjD;;AACI;;AAiBJ;;AACJ;;AACJ;;AACJ;;AAEA;;AACI;;AACI;;AACI;;AAAsB;;AAAG;;AAAQ;;AAAI;;AACrC;;AAAmB;AAAA;;AAAA;;AAAA;AAAA;;AAAwB;;AAA4B;;AAC7B;;AAAO;;AACjD;;AACI;;AAwCJ;;AACJ;;AACJ;;AACJ;;AAEJ;;;;;;AA5RM;;AACI;;AAAA;;AA2FqD;;AAAA;;AAWN;;AAAA;;AAKiB;;AAAA;;AAIf;;AAAA;;AASR;;AAAA;;AA2BR;;AAAA;;AA+DH;;AAAA;;AA6BA;;AAAA;;;;UDpN3Bk1C,6B;AAkET,+CAAoB/0C,cAApB,EACoBD,WADpB,EAEoBE,MAFpB,EAGoBC,WAHpB,EAG+C;AAAA;;AAH3B,eAAAF,cAAA,GAAAA,cAAA;AACA,eAAAD,WAAA,GAAAA,WAAA;AACA,eAAAE,MAAA,GAAAA,MAAA;AACA,eAAAC,WAAA,GAAAA,WAAA;AAjEZ,eAAAC,OAAA,GAAwB,IAAI,4CAAJ,EAAxB;AACR,eAAAypB,WAAA,GAAc,KAAd;AAGA,eAAAC,MAAA,GAAmB,EAAnB;AACA,eAAAC,aAAA,GAAgB,KAAhB;AACA,eAAA3hB,OAAA,GAAU,CAAV;AACA,eAAAsN,iBAAA,GAAoB,EAApB;AACA,eAAA7C,cAAA,GAAiB,EAAjB;AACA,eAAA0oB,WAAA,GAAc,EAAd;AACA,eAAAgY,YAAA,GAAe,EAAf;AACA,eAAAtY,YAAA,GAAe,EAAf;AACA,eAAAttB,SAAA,GAAY,EAAZ;AAEA,eAAAsnC,aAAA,GAAgB,EAAhB;AACA,eAAAC,cAAA,GAAiB,EAAjB;AACA,eAAAC,YAAA,GAAe,EAAf;AAEA,eAAAC,QAAA,GAAW,EAAX;AACA,eAAAC,SAAA,GAAY,EAAZ;AAEA,eAAAC,cAAA,GAAiB,EAAjB;AACA,eAAAtB,QAAA,GAAW,EAAX;AACA,eAAA1Y,YAAA,GAAe,EAAf;AAIA,eAAAh7B,aAAA,GAAe,EAAf;AACA,eAAAC,aAAA,GAAgB,KAAhB;AAEQ,eAAAg1C,eAAA,GAAgC,IAAI,4CAAJ,EAAhC;AACA,eAAAC,gBAAA,GAAiC,IAAI,4CAAJ,EAAjC;AACA,eAAAC,cAAA,GAA+B,IAAI,4CAAJ,EAA/B;AAER;;AACO,eAAAC,QAAA,GAAW,yBAAX;AAEP,eAAAC,cAAA,GAAiB,KAAjB;AACA,eAAAC,SAAA,GAAY,KAAZ;AAEA,eAAAzB,gBAAA,GAAmB,KAAnB;AAEA,eAAA0B,QAAA,GAAW,IAAI,wDAAJ,CAAc;AACrBtwC,iBAAK,EAAE,IAAI,0DAAJ,CAAgB,EAAhB,EAAoB,CAAC,0DAAW2N,QAAZ,EAAsB,0DAAWmO,SAAX,CAAqB,CAArB,CAAtB,CAApB,CADc;AAErB/e,gBAAI,EAAE,IAAI,0DAAJ,CAAgB,EAAhB,CAFe;AAGrB2U,sBAAU,EAAG,IAAI,0DAAJ,CAAgB,IAAhB,CAHQ;AAIrB5D,oBAAQ,EAAE,IAAI,0DAAJ,CAAgB,EAAhB,EAAoB,CAAC,0DAAWH,QAAZ,EAAsB,0DAAWmO,SAAX,CAAqB,CAArB,CAAtB,CAApB,CAJW;AAKrBjd,eAAG,EAAE,IAAI,0DAAJ,CAAgB,EAAhB,CALgB;AAMrBwvC,wBAAY,EAAE,IAAI,wDAAJ,CAAc,CAAC,KAAKC,kBAAL,EAAD,CAAd,CANO;AAOrBiC,oBAAQ,EAAG,IAAI,0DAAJ,CAAgB,EAAhB,CAPU;AAQrBC,kBAAM,EAAE,IAAI,wDAAJ,CAAc,CAAC,KAAKC,YAAL,EAAD,CAAd,CARa;AASrBC,mBAAO,EAAE,IAAI,wDAAJ,CAAc,CAAC,KAAKC,aAAL,EAAD,CAAd,CATY;AAUrBrnB,oBAAQ,EAAG,IAAI,wDAAJ,CAAc,CAAC,KAAKsnB,cAAL,EAAD,CAAd,CAVU;AAWrBt1C,qBAAS,EAAG,IAAI,0DAAJ,CAAgB,IAAhB,CAXS;AAYrBD,oBAAQ,EAAG,IAAI,0DAAJ,CAAgB,IAAhB;AAZU,WAAd,CAAX;AAyBC;;;;qCAEU;AAAA;;AACP;;;;;;AAUA,iBAAK20C,eAAL,CAAqBv0C,IAArB,CAA0B,oEAAa,IAAb,CAA1B,EAA8CC,SAA9C,CACI,UAAAC,IAAI,EAAI;AACJ,sBAAI,CAACk1C,eAAL,CAAqBl1C,IAArB;AACH,aAHL;AAMA,iBAAKs0C,gBAAL,CAAsBx0C,IAAtB,CAA2B,oEAAa,IAAb,CAA3B,EAA+CC,SAA/C,CACI,UAAAC,IAAI,EAAI;AACJ,sBAAI,CAACm1C,gBAAL,CAAsBn1C,IAAtB;AACH,aAHL;AAMA;;;;;;AAMA,iBAAKjB,cAAL,CAAoB2rC,iBAApB,CAAsC3qC,SAAtC,CACI,UAAAsL,MAAM,EAAI;AAEN,kBAAGA,MAAM,IAAI,IAAb,EAAkB;AAEd,wBAAI,CAACoB,SAAL,GAAiB,EAAjB;;AACA,wBAAI,CAAC1N,cAAL,CAAoBoV,mBAApB,GAA0CpU,SAA1C,CACI,UAAAC,IAAI,EAAI;AACJY,yBAAO,CAACC,GAAR,CAAYb,IAAZ;;AACA,uBAAK,IAAI2E,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG3E,IAAI,CAAC2C,MAAzB,EAAiCgC,CAAC,EAAlC,EAAsC;AAClC,4BAAI,CAAC8H,SAAL,CAAe9H,CAAf,IAAoB3E,IAAI,CAAC2E,CAAD,CAAxB;AACH;AACJ,iBANL;AAQH;AACJ,aAfL;AAkBA,iBAAK5F,cAAL,CAAoBoV,mBAApB,GAA0CpU,SAA1C,CACI,UAAAC,IAAI,EAAI;AACJ,sBAAI,CAACyM,SAAL,GAAiB,EAAjB;;AACA,mBAAK,IAAI9H,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG3E,IAAI,CAAC2C,MAAzB,EAAiCgC,CAAC,EAAlC,EAAsC;AAClC,wBAAI,CAAC8H,SAAL,CAAe9H,CAAf,IAAoB3E,IAAI,CAAC2E,CAAD,CAAxB;AACH;AACJ,aANL;AASA,iBAAKzF,OAAL,CAAaY,IAAb,CAAkB,oEAAa,IAAb,CAAlB,EAAsCC,SAAtC,CACI,UAAAC,IAAI,EAAI;AACJ,sBAAI,CAACC,cAAL,CAAoBD,IAApB;AACH,aAHL;AAMA,iBAAKu6B,kBAAL;AACA,iBAAK6a,oBAAL;AAEA,iBAAKT,QAAL,GAAgB,KAAK71C,WAAL,CAAiBc,KAAjB,CAAuB;AACnCyE,mBAAK,EAAE,EAD4B;AAEnCjD,kBAAI,EAAE,EAF6B;AAGnC2U,wBAAU,EAAG,IAHsB;AAInC5D,sBAAQ,EAAE,EAJyB;AAKnCjP,iBAAG,EAAE,EAL8B;AAMnCwvC,0BAAY,EAAE,KAAK5zC,WAAL,CAAiBe,KAAjB,CAAuB,EAAvB,CANqB;AAOnC+0C,sBAAQ,EAAG,EAPwB;AAQnCC,oBAAM,EAAE,KAAK/1C,WAAL,CAAiBe,KAAjB,CAAuB,CAAC,KAAKi1C,YAAL,EAAD,CAAvB,CAR2B;AASnCC,qBAAO,EAAE,KAAKj2C,WAAL,CAAiBe,KAAjB,CAAuB,CAAC,KAAKm1C,aAAL,EAAD,CAAvB,CAT0B;AAUnCrnB,sBAAQ,EAAE,KAAK7uB,WAAL,CAAiBe,KAAjB,CAAuB,CAAC,KAAKo1C,cAAL,EAAD,CAAvB,CAVyB;AAWnCt1C,uBAAS,EAAG,KAXuB;AAYnCD,sBAAQ,EAAG;AAZwB,aAAvB,CAAhB;AAeA,iBAAKyL,SAAL;AACH;AAED;;;;;;;;0CAMgBzG,G,EAAKC,C,EAAG;AACpB/D,mBAAO,CAACC,GAAR,CAAY6D,GAAZ;;AACA,gBAAIA,GAAG,CAACE,MAAJ,IAAcpE,SAAlB,EAA6B;AAEzB,mBAAKtB,OAAL,CAAa2F,IAAb,CAAkB;AAAC/C,qBAAK,EAAE4C,GAAG,CAACE,MAAJ,CAAW9C,KAAnB;AAA0BC,qBAAK,EAAE4C;AAAjC,eAAlB;AACH;AACJ;;;iDAEsB;AAAA;;AACnB,iBAAK5F,cAAL,CAAoBwV,gBAApB,GAAuCxU,SAAvC,CACI,UAAAC,IAAI,EAAI;AACJ,sBAAI,CAACwU,iBAAL,GAAyBxU,IAAzB;AAEH,aAJL;AAMH;;;yCAEcA,I,EAAM;AAAA;;AACjB,iBAAKX,aAAL,GAAqB,IAArB;AACA,iBAAKD,aAAL,GAAqB,EAArB;AAEA,gBAAI0C,KAAK,GAAG9B,IAAI,CAAC8B,KAAjB;AACA,gBAAIC,KAAK,GAAG/B,IAAI,CAAC+B,KAAjB;AAEA,iBAAK0sB,aAAL,GAAqB,KAAKkmB,QAAL,CAAcj0C,GAAd,CAAkB,UAAlB,CAArB;;AAEA,gBAAI,KAAKD,MAAL,CAAYe,wBAAZ,IAAwChB,SAAxC,IAAqD,CAAC,KAAKiuB,aAAL,CAAmB1rB,EAAnB,CAAsBhB,KAAtB,EAA6BrB,GAA7B,CAAiC,MAAjC,EAAyCoB,KAAnG,EAA0G;AACtG,kBAAIK,UAAU,GAAG;AACba,oBAAI,EAAEhD,IADO;AAEbiD,0BAAU,EAAE,YAFC;AAGb7B,oBAAI,EAAE,EAHO;AAIb8B,mBAAG,EAAE,EAJQ;AAKbC,wBAAQ,EAAE,OALG;AAMbC,sBAAM,EAAE,EANK;AAObC,oBAAI,EAAE,EAPO;AAQbC,sBAAM,EAAE,EARK;AASbC,sBAAM,EAAE,CATK;AAUbC,qBAAK,EAAE;AAVM,eAAjB;AAaA;;AACA,mBAAKzE,cAAL,CAAoB0E,qBAApB,CAA0CtB,UAA1C,EAAsDpC,SAAtD,CACI,UAAAC,IAAI,EAAI;AACJY,uBAAO,CAACC,GAAR,CAAYb,IAAZ;AAEA,oBAAIq1C,WAAW,GAAGr1C,IAAI,CAACkE,IAAL,CAAUO,MAAV,CACd,UAAAkJ,CAAC,EAAI;AACD,yBAAOA,CAAC,CAACwE,QAAF,IAAc,QAAI,CAAC1R,MAAL,CAAY0R,QAAjC;AACH,iBAHa,CAAlB;AAKAkjC,2BAAW,CAACv0C,OAAZ,CAAoB,UAAAC,OAAO,EAAI;AAC3BA,yBAAO,CAAC,YAAD,CAAP,GAAwBA,OAAO,CAACsD,KAAR,GAAc,GAAd,GAAkBtD,OAAO,CAACoR,QAAlD;AACH,iBAFD;AAGAvR,uBAAO,CAACC,GAAR,CAAYw0C,WAAZ;AACA,wBAAI,CAACj2C,aAAL,GAAqBi2C,WAArB;AACA,wBAAI,CAACh2C,aAAL,GAAqB,KAArB;AACH,eAfL,EAeO,UAAAiD,KAAK,EAAI;AACR;AACA,wBAAI,CAACjD,aAAL,GAAqB,KAArB;AACH,eAlBL;AAqBH,aApCD,MAoCO,IAAG,KAAKoB,MAAL,CAAYe,wBAAZ,IAAwChB,SAAxC,IAAqD,KAAKiuB,aAAL,CAAmB1rB,EAAnB,CAAsBhB,KAAtB,EAA6BrB,GAA7B,CAAiC,MAAjC,EAAyCoB,KAAjG,EAAuG;AAE1G,mBAAK1C,aAAL,GAAqB,EAArB;;AACA,kBAAG,KAAKu1C,QAAL,CAAcj0C,GAAd,CAAkB,UAAlB,EAA8BoB,KAAjC,EAAuC;AACnC,qBAAK7C,WAAL,CAAiBgF,WAAjB,CAA6BnC,KAA7B,EAAoC/B,SAApC,CACI,UAAAC,IAAI,EAAE;AACFY,yBAAO,CAACC,GAAR,CAAYb,IAAZ;;AACA,sBAAGA,IAAI,CAACkE,IAAL,CAAUvB,MAAV,GAAmB,CAAtB,EAAwB;AACpB3C,wBAAI,CAACkE,IAAL,CAAUpD,OAAV,CAAkB,UAAAC,OAAO,EAAI;AACzB,8BAAI,CAAC3B,aAAL,CAAmB+B,IAAnB,CAAwBJ,OAAxB;AACH,qBAFD;AAGH;AACJ,iBARL,EASI,UAAAuB,KAAK,EAAE;AACH1B,yBAAO,CAACC,GAAR,CAAYyB,KAAZ;AACH,iBAXL;AAaH;;AAGD,kBAAG,KAAKqyC,QAAL,CAAcj0C,GAAd,CAAkB,WAAlB,EAA+BoB,KAAlC,EAAwC;AACpC,qBAAK7C,WAAL,CAAiBkF,YAAjB,CAA8BrC,KAA9B,EAAqC/B,SAArC,CACI,UAAAC,IAAI,EAAE;AACFY,yBAAO,CAACC,GAAR,CAAYb,IAAZ;;AACA,sBAAGA,IAAI,CAACkE,IAAL,CAAUvB,MAAV,GAAmB,CAAtB,EAAwB;AACpB3C,wBAAI,CAACkE,IAAL,CAAUpD,OAAV,CAAkB,UAAAC,OAAO,EAAI;AACzB,8BAAI,CAAC3B,aAAL,CAAmB+B,IAAnB,CAAwBJ,OAAxB;AACH,qBAFD;AAGH;AACJ,iBARL,EASI,UAAAuB,KAAK,EAAE;AACH1B,yBAAO,CAACC,GAAR,CAAYyB,KAAZ;AACH,iBAXL;AAaH;AAEJ,aApCM,MAoCA;AACH,mBAAKjD,aAAL,GAAqB,KAArB;AACH;AAEJ;;;uCAEY;AACT,iBAAKD,aAAL,GAAqB,EAArB;AACH;;;+CAEoB;AAAA;;AACjB,iBAAKL,cAAL,CAAoBqV,iBAApB,GAAwCrU,SAAxC,CACI,UAAAC,IAAI,EAAI;AACJ,sBAAI,CAAC2R,cAAL,GAAsB3R,IAAtB;AACA;;AACA,sBAAI,CAACk0C,QAAL,GAAgB,QAAI,CAACviC,cAAL,CAAoBlN,MAApB,CAA2B,UAAAkJ,CAAC,EAAI;AAC5C,oBAAIA,CAAC,CAAC2G,UAAF,IAAgB,cAApB,EAAoC;AAChC,yBAAO,IAAP;AACH,iBAFD,MAEO;AACH,yBAAO,KAAP;AACH;AACJ,eANe,CAAhB;AAQA,sBAAI,CAAC4/B,QAAL,GAAgB,QAAI,CAACA,QAAL,CAAc,CAAd,EAAiB,gBAAjB,CAAhB;AAEH,aAdL;AAgBH;;;sCAGW9zC,O,EAAwB;AAAA;;AAChCC,sBAAU,CAAC,YAAM;AACb,kBAAI,QAAI,CAACI,MAAL,IAAeL,OAAO,CAACkpB,OAAR,CAAgB/oB,YAAnC,EAAiD;AAC7C,wBAAI,CAACmyC,YAAL,GAAoB,QAAI,CAACiC,QAAL,CAAcj0C,GAAd,CAAkB,cAAlB,CAApB;;AACA,wBAAI,CAACgyC,YAAL,CAAkB/xC,KAAlB;;AAEA,wBAAI,CAAC20C,YAAL,GAAoB,QAAI,CAACX,QAAL,CAAcj0C,GAAd,CAAkB,SAAlB,CAApB;;AACA,wBAAI,CAAC40C,YAAL,CAAkB30C,KAAlB;;AAEA,wBAAI,CAAC8tB,aAAL,GAAqB,QAAI,CAACkmB,QAAL,CAAcj0C,GAAd,CAAkB,UAAlB,CAArB;;AACA,wBAAI,CAAC+tB,aAAL,CAAmB9tB,KAAnB;;AAEA,wBAAI,CAAC40C,WAAL,GAAmB,QAAI,CAACZ,QAAL,CAAcj0C,GAAd,CAAkB,QAAlB,CAAnB;;AACA,wBAAI,CAAC60C,WAAL,CAAiB50C,KAAjB;;AAEA,wBAAI,CAACwzC,SAAL,GAAiB,EAAjB;AAEA,wBAAI,CAAC/Z,YAAL,GAAoB,EAApB;AACH;;AACD,sBAAI,CAAC35B,MAAL,GAAcL,OAAO,CAACkpB,OAAR,CAAgB/oB,YAA9B;;AAGA,kBAAI,QAAI,CAACE,MAAL,IAAe,IAAnB,EAAyB;AAErB,oBAAMoC,KAAK,GAAG,QAAI,CAACpC,MAAL,CAAYe,wBAA1B;;AACA,wBAAI,CAACmzC,QAAL,CAAcj0C,GAAd,CAAkB,OAAlB,EAA2BY,QAA3B,CAAoC,QAAI,CAACb,MAAL,CAAY4D,KAAhD,EAAuD;AAAE9C,2BAAS,EAAE;AAAb,iBAAvD;;AACA,wBAAI,CAACozC,QAAL,CAAcj0C,GAAd,CAAkB,UAAlB,EAA8BY,QAA9B,CAAuC,QAAI,CAACb,MAAL,CAAYm0C,QAAnD,EAA6D;AAAErzC,2BAAS,EAAE;AAAb,iBAA7D;;AACA,oBAAG,QAAI,CAACd,MAAL,CAAYW,IAAZ,IAAoB,QAAvB,EAAgC;AAC5B,0BAAI,CAACuzC,QAAL,CAAcj0C,GAAd,CAAkB,MAAlB,EAA0B80C,OAA1B,CAAkC;AAACC,4BAAQ,EAAE,IAAX;AAAiBl0C,6BAAS,EAAE;AAA5B,mBAAlC;AACH,iBAFD,MAEK;AACD,0BAAI,CAACozC,QAAL,CAAcj0C,GAAd,CAAkB,MAAlB,EAA0Bg1C,MAA1B,CAAiC;AAACD,4BAAQ,EAAE,IAAX;AAAiBl0C,6BAAS,EAAE;AAA5B,mBAAjC;AACH;;AACD,wBAAI,CAACozC,QAAL,CAAcj0C,GAAd,CAAkB,YAAlB,EAAgCY,QAAhC,CAAyC,QAAI,CAACb,MAAL,CAAYsV,UAArD,EAAiE;AAAExU,2BAAS,EAAE;AAAb,iBAAjE;;AAGA,wBAAI,CAACd,MAAL,CAAYW,IAAZ,CAAiBN,OAAjB,CAAyB,UAAAC,OAAO,EAAI;AAChC,sBAAGA,OAAO,IAAI,SAAd,EAAwB;AACpB,4BAAI,CAAC4zC,QAAL,CAAcj0C,GAAd,CAAkB,MAAlB,EAA0BY,QAA1B,CAAmCP,OAAnC,EAA4C;AAAEQ,+BAAS,EAAE;AAAb,qBAA5C;;AACA,2BAAO,IAAP;AACH,mBAHD,MAGK;AACD,2BAAO,KAAP;AACH;AACJ,iBAPD;;AASA,oBAAI5B,SAAS,GAAG,QAAI,CAACc,MAAL,CAAYW,IAAZ,CAAiBC,IAAjB,CAAsB,UAAAN,OAAO;AAAA,yBAAIA,OAAO,IAAI,SAAf;AAAA,iBAA7B,CAAhB;;AACA,oBAAGpB,SAAH,EAAa;AACT,0BAAI,CAACg1C,QAAL,CAAcj0C,GAAd,CAAkB,WAAlB,EAA+BY,QAA/B,CAAwC,IAAxC,EAA8C;AAACC,6BAAS,EAAE;AAAZ,mBAA9C;AACH,iBAFD,MAEK;AACD,0BAAI,CAACozC,QAAL,CAAcj0C,GAAd,CAAkB,WAAlB,EAA+BY,QAA/B,CAAwC,KAAxC,EAA+C;AAACC,6BAAS,EAAE;AAAZ,mBAA/C;AACH;;AAED,oBAAI7B,QAAQ,GAAG,QAAI,CAACe,MAAL,CAAYW,IAAZ,CAAiBC,IAAjB,CAAsB,UAAAN,OAAO;AAAA,yBAAIA,OAAO,IAAI,QAAf;AAAA,iBAA7B,CAAf;;AACA,oBAAGrB,QAAH,EAAY;AACR,0BAAI,CAACi1C,QAAL,CAAcj0C,GAAd,CAAkB,UAAlB,EAA8BY,QAA9B,CAAuC,IAAvC,EAA6C;AAACC,6BAAS,EAAE;AAAZ,mBAA7C;AACH,iBAFD,MAEK;AACD,0BAAI,CAACozC,QAAL,CAAcj0C,GAAd,CAAkB,UAAlB,EAA8BY,QAA9B,CAAuC,KAAvC,EAA8C;AAACC,6BAAS,EAAE;AAAZ,mBAA9C;AACH,iBAlCoB,CAoCrB;;;AACA,wBAAI,CAACozC,QAAL,CAAcj0C,GAAd,CAAkB,UAAlB,EAA8BY,QAA9B,CAAuC,QAAI,CAACb,MAAL,CAAY0R,QAAnD,EAA6D;AAAE5Q,2BAAS,EAAE;AAAb,iBAA7D;;AACA,wBAAI,CAACozC,QAAL,CAAcj0C,GAAd,CAAkB,KAAlB,EAAyBY,QAAzB,CAAkC,QAAI,CAACb,MAAL,CAAYyC,GAA9C,EAAmD;AAAE3B,2BAAS,EAAE;AAAb,iBAAnD;;AAEA,wBAAI,CAAC4yC,SAAL,GAAiB,QAAI,CAAC1zC,MAAL,CAAYyC,GAA7B;AAEA,wBAAI,CAACm3B,WAAL,GAAmB,EAAnB;AACA,wBAAI,CAACgY,YAAL,GAAoB,EAApB;AACA,wBAAI,CAAC0B,aAAL,GAAqB,EAArB;AACA,wBAAI,CAACC,cAAL,GAAsB,EAAtB;AACA,wBAAI,CAACja,YAAL,GAAoB,EAApB;AAED;;;AAEC15B,0BAAU,CAAC,YAAM;AAAA;AAET,wBAAM4wB,KAAK,GAAG,QAAI,CAACxwB,MAAL,CAAY26B,UAAZ,CAAuBz2B,CAAvB,EAA0B,OAA1B,CAAd;AACA,wBAAM7C,KAAK,GAAG,QAAI,CAACrB,MAAL,CAAY26B,UAAZ,CAAuBz2B,CAAvB,EAA0B,OAA1B,CAAd;AAEA,wBAAI22B,gBAAgB,GAAG,EAAvB;;AACA,4BAAI,CAAC3pB,cAAL,CAAoBlN,MAApB,CAA2B,UAAAkJ,CAAC,EAAI;AAC5B,0BAAIA,CAAC,CAAC2G,UAAF,IAAgB2c,KAAhB,IAAyBA,KAAK,IAAI,cAAtC,EAAsD;AAClDtjB,yBAAC,CAAC4tB,cAAF,CAAiB92B,MAAjB,CAAwB,UAAAsJ,CAAC,EAAI;AACzB,8BAAGA,CAAC,CAACytB,OAAF,IAAa15B,KAAhB,EAAsB;AAClBw5B,4CAAgB,GAAGvtB,CAAC,CAAC0tB,gBAArB;AACA,mCAAO,IAAP;AACH,2BAHD,MAGK;AACD,mCAAO,KAAP;AACH;AACJ,yBAPD;AAQA,+BAAO,IAAP;AACH,uBAVD,MAUO;AACH,+BAAO,KAAP;AACH;AACJ,qBAdD;;AAgBA,4BAAI,CAAC1B,YAAL,CAAkBp1B,CAAlB,IAAuB7C,KAAvB;;AAEA,4BAAI,CAAC2xC,eAAL,CAAqBxiB,KAArB,EAA4BnvB,KAA5B,EAAmCw5B,gBAAnC;;AACA,4BAAI,CAACoY,aAAL,CAAmBziB,KAAnB,EAA0BtsB,CAA1B;;AAEA,4BAAI,CAACy1B,YAAL,CAAkBj5B,IAAlB,CAAuB;AAAE8vB,2BAAK,EAAEA,KAAT;AAAgBnvB,2BAAK,EAAEA;AAAvB,qBAAvB;AA3BS;;AACb,uBAAK,IAAI6C,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG,QAAI,CAAClE,MAAL,CAAY26B,UAAZ,CAAuBz4B,MAA3C,EAAmDgC,CAAC,EAApD,EAAwD;AAAA;AA4BvD;AACJ,iBA9BS,EA8BP,GA9BO,CAAV;AAiCAtE,0BAAU,CAAC,YAAM;AACb,sBAAI6C,GAAG,GAAG,QAAI,CAACyxC,QAAL,CAAcj0C,GAAd,CAAkB,KAAlB,EAAyBoB,KAAnC;;AACA,0BAAI,CAACoyC,QAAL,CAAcpzC,OAAd,CAAsB,UAAA8vB,EAAE,EAAI;AACxB,wBAAGA,EAAE,CAAC4K,OAAH,IAAct4B,GAAjB,EAAqB;AAEjB,8BAAI,CAACkxC,cAAL,GAAsBxjB,EAAE,CAAC6K,gBAAzB;AACH;AACJ,mBALD,EAFa,CAQb;;;AACA32B,mBAAC,CAAC,cAAD,CAAD,CAAkBC,OAAlB,CAA0B;AACtBC,2BAAO,EAAE;AADa,mBAA1B;AAKH,iBAdS,EAcP,IAdO,CAAV;AAgBA3E,0BAAU,CAAC,YAAM;AAEb;AACAyE,mBAAC,CAAC,gBAAD,CAAD,CAAoBC,OAApB,CAA4B;AACxBC,2BAAO,EAAE;AADe,mBAA5B;AAKH,iBARS,EAQP,IARO,CAAV;AAUA3E,0BAAU,CAAC,YAAM;AACb,sBAAIe,IAAI,GAAG,QAAI,CAACuzC,QAAL,CAAcj0C,GAAd,CAAkB,MAAlB,EAA0BoB,KAArC;;AACA,0BAAI,CAAC0S,iBAAL,CAAuB1T,OAAvB,CAA+B,UAAA8vB,EAAE,EAAI;AACjC,wBAAGA,EAAE,CAAC4K,OAAH,IAAcp6B,IAAjB,EAAsB;AAElB,8BAAI,CAAC0xC,QAAL,GAAgBliB,EAAE,CAAC6K,gBAAnB;AACH;AACJ,mBALD,EAFa,CAQb;;;AACA32B,mBAAC,CAAC,eAAD,CAAD,CAAmBC,OAAnB,CAA2B;AACvBC,2BAAO,EAAE;AADc,mBAA3B;AAKH,iBAdS,EAcP,IAdO,CAAV;;AAgBA,wBAAI,CAACjG,cAAL,CAAoB42C,6BAApB,CAAkD9yC,KAAlD,EAAyD,SAAzD,EAAoE9C,SAApE,CACI,UAAAC,IAAI,EAAI;AACJ;AACA,uBAAK,IAAI2E,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG3E,IAAI,CAAC2C,MAAzB,EAAiCgC,CAAC,EAAlC,EAAsC;AAClC,wBAAIO,MAAM,GAAGlF,IAAI,CAAC2E,CAAD,CAAJ,CAAQ,eAAR,CAAb;AACA,wBAAIvD,IAAI,GAAGpB,IAAI,CAAC2E,CAAD,CAAJ,CAAQ,UAAR,CAAX;;AACA,4BAAI,CAACixC,UAAL,CAAgB1wC,MAAhB,EAAwB9D,IAAxB;;AACA,4BAAI,CAAC2yC,aAAL,CAAmB5yC,IAAnB,CAAwBnB,IAAI,CAAC2E,CAAD,CAA5B;AACH;AACJ,iBATL,EASO,UAAArC,KAAK,EAAI,CACR;AACH,iBAXL;;AAcA,wBAAI,CAACvD,cAAL,CAAoB42C,6BAApB,CAAkD9yC,KAAlD,EAAyD,SAAzD,EAAoE9C,SAApE,CACI,UAAAC,IAAI,EAAI;AACJY,yBAAO,CAACC,GAAR,CAAYb,IAAZ;;AACA,uBAAK,IAAI2E,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG3E,IAAI,CAAC2C,MAAzB,EAAiCgC,CAAC,EAAlC,EAAsC;AAClC,wBAAIO,MAAM,GAAGlF,IAAI,CAAC2E,CAAD,CAAJ,CAAQ,eAAR,CAAb;AACA,wBAAIvD,IAAI,GAAGpB,IAAI,CAAC2E,CAAD,CAAJ,CAAQ,UAAR,CAAX;;AACA,4BAAI,CAACkxC,WAAL,CAAiB3wC,MAAjB,EAAyB9D,IAAzB;;AACA,4BAAI,CAAC4yC,cAAL,CAAoB7yC,IAApB,CAAyBnB,IAAI,CAAC2E,CAAD,CAA7B;AACH;AACJ,iBATL,EASO,UAAArC,KAAK,EAAI;AACR1B,yBAAO,CAACC,GAAR,CAAYyB,KAAZ;AACH,iBAXL;AAaH;AAGJ,aAhLS,EAgLP,EAhLO,CAAV;AAkLH;;;2CAEgBoC,G,EAAK;AAAA;;AAElB,iBAAK3F,cAAL,CAAoB0wB,aAApB,CAAkC,IAAlC;AACA,gBAAIqmB,SAAS,GAAGpxC,GAAG,CAACE,MAAJ,CAAW9C,KAA3B;AACA,gBAAIi0C,SAAJ;AACA,iBAAKtpC,SAAL,CAAe3L,OAAf,CAAuB,UAAAC,OAAO,EAAI;AAC9B,kBAAIA,OAAO,CAAC,OAAD,CAAP,CAAiBi1C,WAAjB,MAAkCF,SAAS,CAACE,WAAV,EAAtC,EAA+D;AAC3DD,yBAAS,GAAGh1C,OAAO,CAAC,OAAD,CAAnB;AACA;AACH;AACJ,aALD;;AAOA,gBAAIg1C,SAAS,IAAIv1C,SAAjB,EAA4B;AACxB,kBAAIqC,KAAK,GAAG,KAAKpC,MAAL,CAAYe,wBAAxB;AACA,kBAAIW,UAAU,GAAG;AACbC,wBAAQ,EAAE,UADG;AAEbN,qBAAK,EAAEi0C;AAFM,eAAjB;AAKA,mBAAKh3C,cAAL,CAAoB6Y,kBAApB,CAAuC/U,KAAvC,EAA8CV,UAA9C,EAA0DpC,SAA1D,CACI,UAAAC,IAAI,EAAI;AACJ;AACA,wBAAI,CAACjB,cAAL,CAAoB0wB,aAApB,CAAkC,KAAlC;;AACA,wBAAI,CAAC1wB,cAAL,CAAoBwG,aAApB,CAAkCvF,IAAlC;;AACAA,oBAAI,CAAC,SAAD,CAAJ,GAAkB,CAAlB;AACAA,oBAAI,CAAC,UAAD,CAAJ,GAAmB+1C,SAAS,CAACC,WAAV,EAAnB;;AACA,wBAAI,CAACj3C,cAAL,CAAoB0nB,gBAApB,CAAqCzmB,IAArC;;AACA,wBAAI,CAACjB,cAAL,CAAoB6nB,gBAApB;;AACA,wBAAI,CAAC7nB,cAAL,CAAoB8nB,aAApB,CAAkC;AAAEtZ,yBAAO,EAAE;AAAX,iBAAlC;AACH,eAVL,EAUO,UAAAjL,KAAK,EAAI;AACR;AACA,oBAAMtC,IAAI,GAAG,QAAI,CAACS,MAAlB;AACAT,oBAAI,CAAC,SAAD,CAAJ,GAAkB,CAAlB;AACAA,oBAAI,CAAC,UAAD,CAAJ,GAAmB+1C,SAAS,CAACC,WAAV,EAAnB;;AACA,wBAAI,CAACj3C,cAAL,CAAoB0nB,gBAApB,CAAqCzmB,IAArC;;AACA,wBAAI,CAACjB,cAAL,CAAoB0wB,aAApB,CAAkC,KAAlC;;AACA,wBAAI,CAAC1wB,cAAL,CAAoB6nB,gBAApB;;AACA,wBAAI,CAAC7nB,cAAL,CAAoB8nB,aAApB,CAAkC;AAAEtZ,yBAAO,EAAE;AAAX,iBAAlC;;AACA,wBAAI,CAACxO,cAAL,CAAoBwG,aAApB,CAAkC;AAAEgD,4BAAU,EAAEjG,KAAK,CAACA,KAAN,CAAYU;AAA1B,iBAAlC;;AACA,oBAAG,OAAOV,KAAK,CAACA,KAAb,IAAuB,QAA1B,EAAmC;AAC/B,0BAAI,CAACtD,MAAL,CAAYsD,KAAZ,CAAkBA,KAAK,CAACA,KAAxB,EAA+B,OAA/B,EAAwC;AACtCC,2BAAO,EAAE;AAD6B,mBAAxC;AAGH,iBAJD,MAIK;AACD,0BAAI,CAACvD,MAAL,CAAYuY,OAAZ,CAAoB,oCAAoC1U,KAAxD,EAA+D,EAA/D,EAAmE;AAC/DN,2BAAO,EAAE;AADsD,mBAAnE;AAGH;AACJ,eA7BL;AA+BH,aAtCD,MAsCO;AACH,mBAAKxD,cAAL,CAAoB0wB,aAApB,CAAkC,KAAlC;AACH;AAEJ;;;sCAEW/qB,G,EAAK;AAAA;;AACb,iBAAK3F,cAAL,CAAoB0wB,aAApB,CAAkC,IAAlC;AACA,gBAAIwmB,QAAQ,GAAGvxC,GAAG,CAACE,MAAJ,CAAW9C,KAA1B;AACA,gBAAIe,KAAK,GAAG,KAAKpC,MAAL,CAAYe,wBAAxB;AACA,gBAAIW,UAAJ;;AACA,gBAAI,KAAKgyC,SAAL,IAAkB,EAAtB,EAA0B;AAEtBhyC,wBAAU,GAAG;AACTf,oBAAI,EAAE,YADG;AAETgB,wBAAQ,EAAE,cAFD;AAGTN,qBAAK,EAAEm0C;AAHE,eAAb;AAMH,aARD,MAQO;AACH9zC,wBAAU,GAAG;AACTf,oBAAI,EAAE,YADG;AAETgB,wBAAQ,EAAE,cAFD;AAGTN,qBAAK,EAAEm0C,QAHE;AAIT11C,4BAAY,EAAE,KAAK4zC;AAJV,eAAb;AAMH;;AAEDvzC,mBAAO,CAACC,GAAR,CAAYsB,UAAZ;AACA,iBAAKpD,cAAL,CAAoB8Y,wBAApB,CAA6ChV,KAA7C,EAAoDV,UAApD,EAAgErC,IAAhE,CAAqE,oEAAa,IAAb,CAArE,EAAyFC,SAAzF,CACI,UAAAm2C,QAAQ,EAAI;AACRt1C,qBAAO,CAACC,GAAR,CAAYq1C,QAAZ;AACA,sBAAI,CAAC/B,SAAL,GAAiB8B,QAAjB;AACA,kBAAIj2C,IAAI,GAAE,EAAV;AACAA,kBAAI,CAAC,SAAD,CAAJ,GAAkB,CAAlB;AACAA,kBAAI,CAAC,SAAD,CAAJ,GAAkBi2C,QAAlB;AACAj2C,kBAAI,CAAC,0BAAD,CAAJ,GAAmC,QAAI,CAACS,MAAL,CAAYe,wBAA/C,CANQ,CAOR;;AACA,sBAAI,CAACzC,cAAL,CAAoB0wB,aAApB,CAAkC,KAAlC;;AACA,sBAAI,CAAC1wB,cAAL,CAAoB0nB,gBAApB,CAAqCzmB,IAArC;;AACA,sBAAI,CAACjB,cAAL,CAAoB8nB,aAApB,CAAkC;AAAEtZ,uBAAO,EAAE;AAAX,eAAlC;;AAEAlN,wBAAU,CAAC,YAAM;AAEb,wBAAI,CAAC6zC,QAAL,CAAcpzC,OAAd,CAAsB,UAAA8vB,EAAE,EAAI;AACxB,sBAAGA,EAAE,CAAC4K,OAAH,IAAcya,QAAjB,EAA0B;AACtB,4BAAI,CAAC7B,cAAL,GAAsBxjB,EAAE,CAAC6K,gBAAzB;AACH;AACJ,iBAJD,EAFa,CAOb;;;AACA32B,iBAAC,CAAC,cAAD,CAAD,CAAkBC,OAAlB,CAA0B;AACtBC,yBAAO,EAAE;AADa,iBAA1B;AAIH,eAZS,EAYP,IAZO,CAAV;AAaH,aA1BL,EA2BI,UAAA1C,KAAK,EAAI;AACL1B,qBAAO,CAACC,GAAR,CAAYyB,KAAZ;AACA,sBAAI,CAAC6xC,SAAL,GAAiB8B,QAAjB;;AACA,sBAAI,CAACl3C,cAAL,CAAoB0wB,aAApB,CAAkC,KAAlC;;AACA,kBAAMzvB,IAAI,GAAG,QAAI,CAACS,MAAlB;AACAT,kBAAI,CAAC,SAAD,CAAJ,GAAkB,CAAlB;AACAA,kBAAI,CAAC,SAAD,CAAJ,GAAkBi2C,QAAlB;;AACA,sBAAI,CAACl3C,cAAL,CAAoB0nB,gBAApB,CAAqCzmB,IAArC;;AACA,sBAAI,CAACjB,cAAL,CAAoB8nB,aAApB,CAAkC;AAAEtZ,uBAAO,EAAE;AAAX,eAAlC;;AACA,sBAAI,CAACxO,cAAL,CAAoBwG,aAApB,CAAkC;AAAEgD,0BAAU,EAAEjG,KAAK,CAACA,KAAN,CAAYU;AAA1B,eAAlC;;AACA,kBAAG,OAAOV,KAAK,CAACA,KAAb,IAAuB,QAA1B,EAAmC;AAC/B,wBAAI,CAACtD,MAAL,CAAYsD,KAAZ,CAAkBA,KAAK,CAACA,KAAxB,EAA+B,OAA/B,EAAwC;AACtCC,yBAAO,EAAE;AAD6B,iBAAxC;AAGH,eAJD,MAIK;AACD,wBAAI,CAACvD,MAAL,CAAYuY,OAAZ,CAAoB,+BAA+B1U,KAAnD,EAA0D,EAA1D,EAA8D;AAC1DN,yBAAO,EAAE;AADiD,iBAA9D;AAGH;;AACDlC,wBAAU,CAAC,YAAM;AAEb,wBAAI,CAAC6zC,QAAL,CAAcpzC,OAAd,CAAsB,UAAA8vB,EAAE,EAAI;AACxB,sBAAGA,EAAE,CAAC4K,OAAH,IAAcya,QAAjB,EAA0B;AACtB,4BAAI,CAAC7B,cAAL,GAAsBxjB,EAAE,CAAC6K,gBAAzB;AACH;AACJ,iBAJD,EAFa,CAOb;;;AACA32B,iBAAC,CAAC,cAAD,CAAD,CAAkBC,OAAlB,CAA0B;AACtBC,yBAAO,EAAE;AADa,iBAA1B;AAIH,eAZS,EAYP,IAZO,CAAV;AAaH,aA3DL;AA+DH;;;gDAEqBN,G,EAAKC,C,EAAG;AAAA;;AAC1B,iBAAK5F,cAAL,CAAoB0wB,aAApB,CAAkC,IAAlC;AACA,iBAAKijB,YAAL,GAAoB,KAAKiC,QAAL,CAAcj0C,GAAd,CAAkB,cAAlB,CAApB;AACA,gBAAMuwB,KAAK,GAAG,KAAKyhB,YAAL,CAAkB3vC,EAAlB,CAAqB4B,CAArB,EAAwBjE,GAAxB,CAA4B,OAA5B,EAAqCoB,KAAnD;AACA,gBAAMU,QAAQ,GAAG,KAAKkwC,YAAL,CAAkB3vC,EAAlB,CAAqB4B,CAArB,EAAwBjE,GAAxB,CAA4B,OAA5B,EAAqCoB,KAAtD;AACA,gBAAMguB,QAAQ,GAAGprB,GAAG,CAACE,MAAJ,CAAW9C,KAA5B;;AACA,gBAAIguB,QAAQ,IAAI,EAAhB,EAAoB;AAChB,kBAAI3tB,UAAU,GAAG;AACbf,oBAAI,EAAE,YADO;AAEbgB,wBAAQ,EAAE6uB,KAFG;AAGbnvB,qBAAK,EAAEguB,QAHM;AAIbvvB,4BAAY,EAAEiC;AAJD,eAAjB;AAOA,mBAAKkwC,YAAL,CAAkB3vC,EAAlB,CAAqB4B,CAArB,EAAwBjE,GAAxB,CAA4B,OAA5B,EAAqCY,QAArC,CAA8CwuB,QAA9C,EAAwD;AAAEvuB,yBAAS,EAAE;AAAb,eAAxD;AAEA,mBAAK64B,YAAL,CAAkBz1B,CAAlB,IAAuB;AAAEssB,qBAAK,EAAEA,KAAT;AAAgBnvB,qBAAK,EAAEguB;AAAvB,eAAvB;AACA,kBAAIjtB,KAAK,GAAG,KAAKpC,MAAL,CAAYe,wBAAxB;AAEA,mBAAKzC,cAAL,CAAoB8Y,wBAApB,CAA6ChV,KAA7C,EAAoDV,UAApD,EAAgErC,IAAhE,CAAqE,oEAAa,IAAb,CAArE,EAAyFC,SAAzF,CACI,UAAAC,IAAI,EAAI;AACJ;AACAA,oBAAI,CAAC,SAAD,CAAJ,GAAkB,CAAlB;;AACA,wBAAI,CAACjB,cAAL,CAAoB0nB,gBAApB,CAAqCzmB,IAArC;;AACA,wBAAI,CAACjB,cAAL,CAAoB0wB,aAApB,CAAkC,KAAlC;;AACA,wBAAI,CAAC1wB,cAAL,CAAoB8nB,aAApB,CAAkC;AAAEtZ,yBAAO,EAAE;AAAX,iBAAlC;;AACA,wBAAI,CAACxO,cAAL,CAAoBwG,aAApB,CAAkCvF,IAAlC;AACH,eARL,EASI,UAAAsC,KAAK,EAAI;AACL;AACA,wBAAI,CAACvD,cAAL,CAAoB0nB,gBAApB,CAAqC;AAAElZ,yBAAO,EAAE,CAAX;AAAclJ,uBAAK,EAAE,QAAI,CAAC5D,MAAL,CAAY4D;AAAjC,iBAArC;;AACA,wBAAI,CAACtF,cAAL,CAAoB0wB,aAApB,CAAkC,KAAlC;;AACA,wBAAI,CAAC1wB,cAAL,CAAoB8nB,aAApB,CAAkC;AAAEtZ,yBAAO,EAAE;AAAX,iBAAlC;;AACA,wBAAI,CAACxO,cAAL,CAAoBwG,aAApB,CAAkC;AAAEgD,4BAAU,EAAEjG,KAAK,CAACA,KAAN,CAAYU;AAA1B,iBAAlC;;AACA,oBAAG,OAAOV,KAAK,CAACA,KAAb,IAAuB,QAA1B,EAAmC;AAC/B,0BAAI,CAACtD,MAAL,CAAYsD,KAAZ,CAAkBA,KAAK,CAACA,KAAxB,EAA+B,OAA/B,EAAwC;AACtCC,2BAAO,EAAE;AAD6B,mBAAxC;AAGH,iBAJD,MAIK;AACD,0BAAI,CAACvD,MAAL,CAAYuY,OAAZ,CAAoB,wCAAwC1U,KAA5D,EAAmE,EAAnE,EAAuE;AACnEN,2BAAO,EAAE;AAD0D,mBAAvE;AAGH;AACJ,eAxBL;AA2BH,aAxCD,MAwCO;AACH,mBAAKxD,cAAL,CAAoB0wB,aAApB,CAAkC,IAAlC;AACH;AACJ;;;wCAEa9qB,C,EAAG;AAAA;;AACb,iBAAK5F,cAAL,CAAoB0wB,aAApB,CAAkC,IAAlC;AACA,iBAAKijB,YAAL,GAAoB,KAAKiC,QAAL,CAAcj0C,GAAd,CAAkB,cAAlB,CAApB;AACA,gBAAMuwB,KAAK,GAAG,KAAKyhB,YAAL,CAAkB3vC,EAAlB,CAAqB4B,CAArB,EAAwBjE,GAAxB,CAA4B,OAA5B,EAAqCoB,KAAnD;AACA,gBAAMA,KAAK,GAAG,KAAK4wC,YAAL,CAAkB3vC,EAAlB,CAAqB4B,CAArB,EAAwBjE,GAAxB,CAA4B,OAA5B,EAAqCoB,KAAnD;;AAEA,gBAAImvB,KAAK,IAAI,EAAT,IAAenvB,KAAK,IAAI,EAA5B,EAAgC;AAC5B,kBAAIK,UAAJ;;AACA,kBAAI,KAAK43B,YAAL,CAAkBp1B,CAAlB,KAAwB,EAA5B,EAAgC;AAC5BxC,0BAAU,GAAG;AACTf,sBAAI,EAAE,YADG;AAETgB,0BAAQ,EAAE6uB,KAFD;AAGTnvB,uBAAK,EAAEA;AAHE,iBAAb;AAKH,eAND,MAMO;AACHK,0BAAU,GAAG;AACTf,sBAAI,EAAE,YADG;AAETgB,0BAAQ,EAAE6uB,KAFD;AAGTnvB,uBAAK,EAAEA,KAHE;AAITvB,8BAAY,EAAE,KAAKw5B,YAAL,CAAkBp1B,CAAlB;AAJL,iBAAb;AAMH;;AAED,mBAAKy1B,YAAL,CAAkBj5B,IAAlB,CAAuB;AAAE8vB,qBAAK,EAAEA,KAAT;AAAgBnvB,qBAAK,EAAEA;AAAvB,eAAvB;AACA,kBAAIe,KAAK,GAAG,KAAKpC,MAAL,CAAYe,wBAAxB;AAEA,mBAAKzC,cAAL,CAAoB8Y,wBAApB,CAA6ChV,KAA7C,EAAoDV,UAApD,EAAgErC,IAAhE,CAAqE,oEAAa,IAAb,CAArE,EAAyFC,SAAzF,CACI,UAAAC,IAAI,EAAI;AACJ;AACAA,oBAAI,CAAC,SAAD,CAAJ,GAAkB,CAAlB;;AACA,wBAAI,CAACjB,cAAL,CAAoB0nB,gBAApB,CAAqCzmB,IAArC;;AACA,wBAAI,CAACjB,cAAL,CAAoB0wB,aAApB,CAAkC,KAAlC;;AACA,wBAAI,CAAC1wB,cAAL,CAAoB8nB,aAApB,CAAkC;AAAEtZ,yBAAO,EAAE;AAAX,iBAAlC;;AACA,wBAAI,CAACxO,cAAL,CAAoBwG,aAApB,CAAkCvF,IAAlC;;AAEA,wBAAI,CAACizC,gBAAL,GAAwB,KAAxB;AACA5yC,0BAAU,CAAC,YAAM;AAEb,sBAAIi7B,gBAAgB,GAAG,EAAvB;;AACA,0BAAI,CAAC3pB,cAAL,CAAoBlN,MAApB,CAA2B,UAAAkJ,CAAC,EAAI;AAC5B,wBAAIA,CAAC,CAAC2G,UAAF,IAAgB2c,KAAhB,IAAyBA,KAAK,IAAI,cAAtC,EAAsD;AAClDtjB,uBAAC,CAAC4tB,cAAF,CAAiB92B,MAAjB,CAAwB,UAAAsJ,CAAC,EAAI;AACzB,4BAAGA,CAAC,CAACytB,OAAF,IAAa15B,KAAhB,EAAsB;AAClBw5B,0CAAgB,GAAGvtB,CAAC,CAAC0tB,gBAArB;AACA,iCAAO,IAAP;AACH,yBAHD,MAGK;AACD,iCAAO,KAAP;AACH;AACJ,uBAPD;AAQA,6BAAO,IAAP;AACH,qBAVD,MAUO;AACH,6BAAO,KAAP;AACH;AACJ,mBAdD,EAHa,CAmBb;;;AACA32B,mBAAC,CAAC,gBAAD,CAAD,CAAoBC,OAApB,CAA4B;AACxBC,2BAAO,EAAE;AADe,mBAA5B;AAKH,iBAzBS,EAyBP,IAzBO,CAAV;AA0BH,eApCL,EAqCI,UAAA1C,KAAK,EAAI;AACL;AACA,wBAAI,CAACvD,cAAL,CAAoB0nB,gBAApB,CAAqC;AAAElZ,yBAAO,EAAE,CAAX;AAAclJ,uBAAK,EAAE,QAAI,CAAC5D,MAAL,CAAY4D;AAAjC,iBAArC;;AACA,wBAAI,CAACtF,cAAL,CAAoB0wB,aAApB,CAAkC,KAAlC;;AACA,wBAAI,CAAC1wB,cAAL,CAAoB8nB,aAApB,CAAkC;AAAEtZ,yBAAO,EAAE;AAAX,iBAAlC;;AACA,wBAAI,CAAC0lC,gBAAL,GAAwB,KAAxB;;AACA,wBAAI,CAACl0C,cAAL,CAAoBwG,aAApB,CAAkC;AAAEgD,4BAAU,EAAEjG,KAAK,CAACA,KAAN,CAAYU;AAA1B,iBAAlC;;AACA3C,0BAAU,CAAC,YAAM;AAEb,sBAAIi7B,gBAAgB,GAAG,EAAvB;;AACA,0BAAI,CAAC3pB,cAAL,CAAoBlN,MAApB,CAA2B,UAAAkJ,CAAC,EAAI;AAC5B,wBAAIA,CAAC,CAAC2G,UAAF,IAAgB2c,KAAhB,IAAyBA,KAAK,IAAI,cAAtC,EAAsD;AAClDtjB,uBAAC,CAAC4tB,cAAF,CAAiB92B,MAAjB,CAAwB,UAAAsJ,CAAC,EAAI;AACzB,4BAAGA,CAAC,CAACytB,OAAF,IAAa15B,KAAhB,EAAsB;AAClBw5B,0CAAgB,GAAGvtB,CAAC,CAAC0tB,gBAArB;AACA,iCAAO,IAAP;AACH,yBAHD,MAGK;AACD,iCAAO,KAAP;AACH;AACJ,uBAPD;AAQA,6BAAO,IAAP;AACH,qBAVD,MAUO;AACH,6BAAO,KAAP;AACH;AACJ,mBAdD;;AAgBA,0BAAI,CAACiX,YAAL,GAAoB,QAAI,CAACiC,QAAL,CAAcj0C,GAAd,CAAkB,cAAlB,CAApB;;AACA,0BAAI,CAACgyC,YAAL,CAAkB3vC,EAAlB,CAAqB4B,CAArB,EAAwB8S,UAAxB,CAAmC;AAAEwZ,yBAAK,EAAEA,KAAT;AAAgBnvB,yBAAK,EAAEA,KAAvB;AAA8B0oB,+BAAW,EAAE8Q;AAA3C,mBAAnC,EApBa,CAsBb;;;AACAx2B,mBAAC,CAAC,gBAAD,CAAD,CAAoBC,OAApB,CAA4B;AACxBC,2BAAO,EAAE;AADe,mBAA5B;;AAGA,sBAAG,OAAO1C,KAAK,CAACA,KAAb,IAAuB,QAA1B,EAAmC;AAC/B,4BAAI,CAACtD,MAAL,CAAYsD,KAAZ,CAAkBA,KAAK,CAACA,KAAxB,EAA+B,OAA/B,EAAwC;AACtCC,6BAAO,EAAE;AAD6B,qBAAxC;AAGH,mBAJD,MAIK;AACD,4BAAI,CAACvD,MAAL,CAAYuY,OAAZ,CAAoB,wCAAwC1U,KAA5D,EAAmE,EAAnE,EAAuE;AACnEN,6BAAO,EAAE;AAD0D,qBAAvE;AAGH;AAEJ,iBApCS,EAoCP,IApCO,CAAV;AAqCH,eAjFL;AAmFH,aAvGD,MAuGO;AACH,mBAAKxD,cAAL,CAAoB0wB,aAApB,CAAkC,KAAlC;AACH;AACJ;;;wCAEa/qB,G,EAAKC,C,EAAG;AAAA;;AAElB,gBAAID,GAAG,CAACE,MAAJ,IAAcpE,SAAlB,EAA6B;AACzBH,wBAAU,CAAC,YAAM;AACb,wBAAI,CAACqyC,YAAL,GAAoB,QAAI,CAACiC,QAAL,CAAcj0C,GAAd,CAAkB,cAAlB,CAApB;;AACA,wBAAI,CAACgyC,YAAL,CAAkB3vC,EAAlB,CAAqB4B,CAArB,EAAwB8S,UAAxB,CAAmC;AAAEwZ,uBAAK,EAAEvsB,GAAG,CAACE,MAAJ,CAAW9C,KAApB;AAA2BA,uBAAK,EAAE;AAAlC,iBAAnC;;AACA,oBAAI4C,GAAG,CAACE,MAAJ,CAAW9C,KAAX,IAAoB,EAAxB,EAA4B;AACxB,sBAAI45B,WAAW,GAAG,QAAI,CAAC/pB,cAAL,CAAoBlN,MAApB,CAA2B,UAAAkJ,CAAC,EAAI;AAC9C,2BAAOA,CAAC,CAAC,YAAD,CAAD,IAAmBjJ,GAAG,CAACE,MAAJ,CAAW9C,KAArC;AACH,mBAFiB,EAEf,GAFe,EAEV,gBAFU,CAAlB;;AAGA,0BAAI,CAACu4B,WAAL,CAAiB11B,CAAjB,IAAsB+2B,WAAtB;AACA,0BAAI,CAAC2W,YAAL,CAAkB1tC,CAAlB,IAAuBD,GAAG,CAACE,MAAJ,CAAW9C,KAAlC;AACA,0BAAI,CAACi4B,YAAL,CAAkBp1B,CAAlB,IAAuB,EAAvB;AACH,iBAPD,MAOO;AACH,0BAAI,CAACo1B,YAAL,CAAkBr0B,MAAlB,CAAyBf,CAAzB,EAA4B,CAA5B;;AACA,sBAAI+2B,aAAW,GAAG,EAAlB;AACA,0BAAI,CAACrB,WAAL,CAAiB11B,CAAjB,IAAsB+2B,aAAtB;;AACA,0BAAI,CAAC2W,YAAL,CAAkB3sC,MAAlB,CAAyBf,CAAzB,EAA4B,CAA5B;AACH;AACJ,eAhBS,EAgBP,GAhBO,CAAV;AAiBH,aAlBD,MAkBO;AAEH,kBAAI2F,IAAI,GAAG,IAAX;AACA,kBAAIyb,KAAK,GAAGlb,WAAW,CAAC,UAACC,GAAD,EAAO;AAE3B,oBAAG;AACC,sBAAI4wB,WAAW,GAAG,QAAI,CAAC/pB,cAAL,CAAoBlN,MAApB,CAA2B,UAAAkJ,CAAC,EAAI;AAC9C,2BAAOA,CAAC,CAAC,YAAD,CAAD,IAAmBjJ,GAA1B;AACH,mBAFiB,EAEf,GAFe,EAEV,gBAFU,CAAlB;;AAGA,0BAAI,CAAC21B,WAAL,CAAiB11B,CAAjB,IAAsB+2B,WAAtB;;AACA,0BAAI,CAAC2W,YAAL,CAAkBlxC,IAAlB,CAAuBuD,GAAvB;;AACAwJ,+BAAa,CAAC6X,KAAD,CAAb;AACH,iBAPD,CAOC,OAAM9gB,CAAN,EAAQ;AACLrE,yBAAO,CAACC,GAAR,CAAYoE,CAAZ;AACH;AAGJ,eAdsB,EAcpB,GAdoB,CAAvB;AAgBH;AACJ;;;sCAGQ;AAAA;;AAEL,iBAAK0vC,QAAL,CAAcj0C,GAAd,CAAkB,OAAlB,EAA2BwM,YAA3B,CAAwCpN,IAAxC,CAA6C,oEAAa,IAAb,CAA7C,EAAiEC,SAAjE,CACI,UAAA4vB,YAAY,EAAI;AACZ,kBAAIA,YAAY,CAAChtB,MAAb,GAAsB,CAAtB,IAA2BgtB,YAAY,CAAC3tB,IAAb,MAAuB,EAAtD,EAA0D;AACtD,wBAAI,CAACyyC,cAAL,GAAsB,KAAtB;;AACA,wBAAI,CAAC11C,cAAL,CAAoB0wB,aAApB,CAAkC,IAAlC;;AACA,oBAAI5sB,KAAK,GAAG,QAAI,CAACpC,MAAL,CAAYe,wBAAxB;AACA,oBAAIW,UAAU,GAAG;AACbC,0BAAQ,EAAE,OADG;AAEbN,uBAAK,EAAE6tB;AAFM,iBAAjB;;AAIA,wBAAI,CAAC5wB,cAAL,CAAoB6Y,kBAApB,CAAuC/U,KAAvC,EAA8CV,UAA9C,EAA0DpC,SAA1D,CACI,UAAAC,IAAI,EAAI;AACJY,yBAAO,CAACC,GAAR,CAAYb,IAAZ;AACAA,sBAAI,CAAC,SAAD,CAAJ,GAAkB,CAAlB;AACAA,sBAAI,CAAC,WAAD,CAAJ,GAAoB2vB,YAApB;;AACA,0BAAI,CAAC5wB,cAAL,CAAoB0nB,gBAApB,CAAqCzmB,IAArC;;AACA,0BAAI,CAACjB,cAAL,CAAoB0wB,aAApB,CAAkC,KAAlC;;AACA,0BAAI,CAAC1wB,cAAL,CAAoBwG,aAApB,CAAkCvF,IAAlC;AAEH,iBATL,EAUI,UAAAsC,KAAK,EAAI;AACL1B,yBAAO,CAACC,GAAR,CAAYyB,KAAZ;AACA,sBAAMtC,IAAI,GAAG,QAAI,CAACS,MAAlB;AACAT,sBAAI,CAAC,SAAD,CAAJ,GAAkB,CAAlB;AACAA,sBAAI,CAAC,WAAD,CAAJ,GAAoB2vB,YAApB;;AACA,0BAAI,CAAC5wB,cAAL,CAAoB0nB,gBAApB,CAAqCzmB,IAArC;;AACA,0BAAI,CAACjB,cAAL,CAAoB0wB,aAApB,CAAkC,KAAlC;;AACA,0BAAI,CAAC1wB,cAAL,CAAoBwG,aAApB,CAAkC;AAAEgD,8BAAU,EAAEjG,KAAK,CAACA,KAAN,CAAYU;AAA1B,mBAAlC;;AACA,0BAAI,CAACjE,cAAL,CAAoBo3C,iBAApB,CAAsCxmB,YAAtC;;AACA,sBAAG,OAAOrtB,KAAK,CAACA,KAAb,IAAuB,QAA1B,EAAmC;AAC/B,4BAAI,CAACtD,MAAL,CAAYsD,KAAZ,CAAkBA,KAAK,CAACA,KAAxB,EAA+B,OAA/B,EAAwC;AACtCC,6BAAO,EAAE;AAD6B,qBAAxC;AAGH,mBAJD,MAIK;AACD,4BAAI,CAACvD,MAAL,CAAYuY,OAAZ,CAAoB,iCAAiC1U,KAArD,EAA4D,EAA5D,EAAgE;AAC5DN,6BAAO,EAAE;AADmD,qBAAhE;AAGH;AACJ,iBA5BL;AA8BH,eAtCD,MAsCO,IAAIotB,YAAY,CAAChtB,MAAb,GAAsB,CAA1B,EAA6B;AAEhC,wBAAI,CAAC8xC,cAAL,GAAsB,IAAtB;AACH;AACJ,aA5CL;AA+CA,iBAAKE,QAAL,CAAcpwB,QAAd,CAAuB,YAAvB,EAAqCrX,YAArC,CAAkDpN,IAAlD,CAAuD,iEAAUU,SAAV,CAAvD,EAA6E,oEAAa,IAAb,CAA7E,EAAiG,iEAAjG,EAA6GT,SAA7G,CAAuH,UAAAwvB,aAAa,EAAI;AACpI3uB,qBAAO,CAACC,GAAR,CAAY,aAAZ,EAA2B0uB,aAAa,CAAC,CAAD,CAAxC;AACA3uB,qBAAO,CAACC,GAAR,CAAY,aAAZ,EAA2B0uB,aAAa,CAAC,CAAD,CAAxC;;AACA,sBAAI,CAACxwB,cAAL,CAAoB0wB,aAApB,CAAkC,IAAlC;;AACA,kBAAIttB,UAAU,GAAG,EAAjB;AACA,kBAAIU,KAAK,GAAG,QAAI,CAACpC,MAAL,CAAYe,wBAAxB;AACA,kBAAIgB,QAAQ,GAAG+sB,aAAa,CAAC,CAAD,CAA5B;AACA,kBAAIO,QAAQ,GAAGP,aAAa,CAAC,CAAD,CAA5B;;AAEA,kBAAG/sB,QAAQ,IAAIhC,SAAf,EAAyB;AACrB2B,0BAAU,GAAG;AACTf,sBAAI,EAAE,YADG;AAETgB,0BAAQ,EAAE,YAFD;AAGTN,uBAAK,EAAEguB;AAHE,iBAAb;AAKH,eAND,MAMM,IAAGttB,QAAQ,IAAIhC,SAAZ,IAAyB,QAAI,CAACC,MAAL,CAAYsV,UAAZ,IAA0B,CAAC,CAAvD,EAAyD;AAC3D5T,0BAAU,GAAG;AACTf,sBAAI,EAAE,YADG;AAETgB,0BAAQ,EAAE,YAFD;AAGTN,uBAAK,EAAEguB,QAHE;AAITvvB,8BAAY,EAAG,CAAC;AAJP,iBAAb;AAMH,eAPK,MAOD;AACD4B,0BAAU,GAAG;AACTf,sBAAI,EAAE,YADG;AAETgB,0BAAQ,EAAE,YAFD;AAGTN,uBAAK,EAAEguB,QAHE;AAITvvB,8BAAY,EAAGiC;AAJN,iBAAb;AAMH;;AAED5B,qBAAO,CAACC,GAAR,CAAYsB,UAAZ;;AACA,sBAAI,CAACpD,cAAL,CAAoBsD,qBAApB,CAA0CQ,KAA1C,EAAiDV,UAAjD,EAA6DpC,SAA7D,CACI,UAAAC,IAAI,EAAI;AACJY,uBAAO,CAACC,GAAR,CAAYb,IAAZ;;AAEA,wBAAI,CAACjB,cAAL,CAAoBwG,aAApB,CAAkCvF,IAAlC;;AACA,wBAAI,CAACjB,cAAL,CAAoB0wB,aAApB,CAAkC,KAAlC;AACH,eANL,EAOI,UAAAntB,KAAK,EAAI;AACL1B,uBAAO,CAACC,GAAR,CAAYyB,KAAZ;;AAEA,wBAAI,CAACvD,cAAL,CAAoB0wB,aAApB,CAAkC,KAAlC;;AAEA,oBAAGntB,KAAK,CAACgB,MAAN,IAAgB,GAAnB,EAAuB;AACrB,0BAAI,CAACtE,MAAL,CAAYuY,OAAZ,CAAoB,oBAApB,EAA0C,EAA1C,EAA8C;AAAChV,2BAAO,EAAE;AAAV,mBAA9C;;AACA,0BAAI,CAACxD,cAAL,CAAoBwG,aAApB,CAAkC;AAAEgD,8BAAU,EAAEjG,KAAK,CAACA,KAAN,CAAYU;AAA1B,mBAAlC;;AACA,0BAAI,CAAC2xC,QAAL,CAAcj0C,GAAd,CAAkB,YAAlB,EAAgCY,QAAhC,CAAyCwuB,QAAzC,EAAmD;AAAEvuB,6BAAS,EAAE;AAAb,mBAAnD;;AACA,0BAAI,CAACd,MAAL,CAAYsV,UAAZ,GAAyB+Z,QAAzB;AACD,iBALD,MAKK;AACH,0BAAI,CAAC9wB,MAAL,CAAYsD,KAAZ,CAAkBA,KAAK,CAACA,KAAxB,EAA+B,OAA/B,EAAwC;AAACC,2BAAO,EAAE;AAAV,mBAAxC;AAED;AACJ,eArBL;AAuBH,aAvDD;AA2DA,iBAAKoyC,QAAL,CAAcj0C,GAAd,CAAkB,UAAlB,EAA8BwM,YAA9B,CAA2CpN,IAA3C,CAAgD,oEAAa,IAAb,CAAhD,EAAoEC,SAApE,CACI,UAAAq2C,UAAU,EAAI;AAEV,sBAAI,CAACr3C,cAAL,CAAoB0wB,aAApB,CAAkC,IAAlC;;AACA,kBAAI5sB,KAAK,GAAG,QAAI,CAACpC,MAAL,CAAYe,wBAAxB;AACA,kBAAIW,UAAU,GAAG;AACbf,oBAAI,EAAE,WADO;AAEbgB,wBAAQ,EAAG,UAFE;AAGbN,qBAAK,EAAEs0C;AAHM,eAAjB;;AAKA,sBAAI,CAACr3C,cAAL,CAAoBsD,qBAApB,CAA0CQ,KAA1C,EAAiDV,UAAjD,EAA6DpC,SAA7D,CACI,UAAAC,IAAI,EAAI;AACJY,uBAAO,CAACC,GAAR,CAAYb,IAAZ;;AAEA,wBAAI,CAACjB,cAAL,CAAoB0wB,aAApB,CAAkC,KAAlC;;AACA,wBAAI,CAAC1wB,cAAL,CAAoBwG,aAApB,CAAkCvF,IAAlC;AAEH,eAPL,EAQI,UAAAsC,KAAK,EAAI;AACL1B,uBAAO,CAACC,GAAR,CAAYyB,KAAZ;;AAEA,wBAAI,CAACvD,cAAL,CAAoB0wB,aAApB,CAAkC,KAAlC;;AACA,wBAAI,CAAC1wB,cAAL,CAAoBwG,aAApB,CAAkC;AAAEgD,4BAAU,EAAEjG,KAAK,CAACA,KAAN,CAAYU;AAA1B,iBAAlC;;AACA,oBAAG,OAAOV,KAAK,CAACA,KAAb,IAAuB,QAA1B,EAAmC;AAC/B,0BAAI,CAACtD,MAAL,CAAYsD,KAAZ,CAAkBA,KAAK,CAACA,KAAxB,EAA+B,OAA/B,EAAwC;AACpCC,2BAAO,EAAE;AAD2B,mBAAxC;AAGH,iBAJD,MAIK;AACD,0BAAI,CAACvD,MAAL,CAAYuY,OAAZ,CAAoB,oCAAoC1U,KAAxD,EAA+D,EAA/D,EAAmE;AAC/DN,2BAAO,EAAE;AADsD,mBAAnE;AAGH;AACJ,eAtBL;AAyBH,aAnCL;AAsCA,iBAAKoyC,QAAL,CAAcj0C,GAAd,CAAkB,MAAlB,EAA0BwM,YAA1B,CAAuCpN,IAAvC,CAA4C,oEAAa,GAAb,CAA5C,EAA+DC,SAA/D,CACI,UAAA4zC,OAAO,EAAI;AACP,sBAAI,CAAC50C,cAAL,CAAoB0wB,aAApB,CAAkC,IAAlC;;AACA,kBAAI5sB,KAAK,GAAG,QAAI,CAACpC,MAAL,CAAYe,wBAAxB;AACA,kBAAIW,UAAU,GAAG;AACbC,wBAAQ,EAAE,MADG;AAEbN,qBAAK,EAAE6xC;AAFM,eAAjB;;AAIA,sBAAI,CAAC50C,cAAL,CAAoB6Y,kBAApB,CAAuC/U,KAAvC,EAA8CV,UAA9C,EAA0DpC,SAA1D,CACI,UAAAC,IAAI,EAAI;AACJ;AACA,wBAAI,CAACjB,cAAL,CAAoB0wB,aAApB,CAAkC,KAAlC;;AACAzvB,oBAAI,CAAC,SAAD,CAAJ,GAAkB,CAAlB;AACAA,oBAAI,CAAC,UAAD,CAAJ,GAAmB2zC,OAAnB;;AACA,wBAAI,CAAC50C,cAAL,CAAoB0nB,gBAApB,CAAqCzmB,IAArC;;AACA,wBAAI,CAACjB,cAAL,CAAoB8nB,aAApB,CAAkC;AAAEtZ,yBAAO,EAAE;AAAX,iBAAlC;;AACA,wBAAI,CAACxO,cAAL,CAAoBwG,aAApB,CAAkCvF,IAAlC;;AAEAK,0BAAU,CAAC,YAAM;AACb,sBAAIe,IAAI,GAAG,QAAI,CAACuzC,QAAL,CAAcj0C,GAAd,CAAkB,MAAlB,EAA0BoB,KAArC;;AACA,0BAAI,CAAC0S,iBAAL,CAAuB1T,OAAvB,CAA+B,UAAA8vB,EAAE,EAAI;AACjC,wBAAGA,EAAE,CAAC4K,OAAH,IAAcp6B,IAAjB,EAAsB;AAElB,8BAAI,CAAC0xC,QAAL,GAAgBliB,EAAE,CAAC6K,gBAAnB;AACH;AACJ,mBALD,EAFa,CAQb;;;AACA32B,mBAAC,CAAC,eAAD,CAAD,CAAmBC,OAAnB,CAA2B;AACvBC,2BAAO,EAAE;AADc,mBAA3B;AAKH,iBAdS,EAcP,IAdO,CAAV;AAgBH,eA1BL,EA2BI,UAAA1C,KAAK,EAAI;AACL;AACA,oBAAMtC,IAAI,GAAG,QAAI,CAACS,MAAlB;AACAT,oBAAI,CAAC,SAAD,CAAJ,GAAkB,CAAlB;AACAA,oBAAI,CAAC,UAAD,CAAJ,GAAmB2zC,OAAnB;;AACA,wBAAI,CAAC50C,cAAL,CAAoB0nB,gBAApB,CAAqCzmB,IAArC;;AACA,wBAAI,CAACjB,cAAL,CAAoB0wB,aAApB,CAAkC,KAAlC;;AACA,wBAAI,CAAC1wB,cAAL,CAAoBwG,aAApB,CAAkC;AAAEgD,4BAAU,EAAEjG,KAAK,CAACA,KAAN,CAAYU;AAA1B,iBAAlC;;AACA,wBAAI,CAACjE,cAAL,CAAoB8nB,aAApB,CAAkC;AAAEtZ,yBAAO,EAAE;AAAX,iBAAlC;;AACA,oBAAG,OAAOjL,KAAK,CAACA,KAAb,IAAuB,QAA1B,EAAmC;AAC/B,0BAAI,CAACtD,MAAL,CAAYsD,KAAZ,CAAkBA,KAAK,CAACA,KAAxB,EAA+B,OAA/B,EAAwC;AACtCC,2BAAO,EAAE;AAD6B,mBAAxC;AAGH,iBAJD,MAIK;AACD,0BAAI,CAACvD,MAAL,CAAYuY,OAAZ,CAAoB,gCAAgC1U,KAApD,EAA2D,EAA3D,EAA+D;AAC3DN,2BAAO,EAAE;AADkD,mBAA/D;AAGH;;AACDlC,0BAAU,CAAC,YAAM;AACb,sBAAIe,IAAI,GAAG,QAAI,CAACuzC,QAAL,CAAcj0C,GAAd,CAAkB,MAAlB,EAA0BoB,KAArC;;AACA,0BAAI,CAAC0S,iBAAL,CAAuB1T,OAAvB,CAA+B,UAAA8vB,EAAE,EAAI;AACjC,wBAAGA,EAAE,CAAC4K,OAAH,IAAcp6B,IAAjB,EAAsB;AAElB,8BAAI,CAAC0xC,QAAL,GAAgBliB,EAAE,CAAC6K,gBAAnB;AACH;AACJ,mBALD,EAFa,CAQb;;;AACA32B,mBAAC,CAAC,eAAD,CAAD,CAAmBC,OAAnB,CAA2B;AACvBC,2BAAO,EAAE;AADc,mBAA3B;AAKH,iBAdS,EAcP,IAdO,CAAV;AAeH,eA5DL;AA8DH,aAtEL;AAwEH;;;2CAEa;AAAA;;AACV,iBAAKjG,cAAL,CAAoB0wB,aAApB,CAAkC,IAAlC;AACA,gBAAIjtB,QAAQ,GAAG,KAAKmyC,QAAL,CAAcj0C,GAAd,CAAkB,YAAlB,EAAgCoB,KAA/C;AACA,gBAAIe,KAAK,GAAG,KAAKpC,MAAL,CAAYe,wBAAxB;AACA,gBAAIW,UAAU,GAAG;AACbC,sBAAQ,EAAE,YADG;AAEbN,mBAAK,EAAE;AAFM,aAAjB;AAIAlB,mBAAO,CAACC,GAAR,CAAYsB,UAAZ;AACA,iBAAKpD,cAAL,CAAoBuG,wBAApB,CAA6CzC,KAA7C,EAAoDV,UAApD,EAAgEpC,SAAhE,CACI,UAAAC,IAAI,EAAI;AACJY,qBAAO,CAACC,GAAR,CAAYb,IAAZ;AACA;;;;AAGA,sBAAI,CAACjB,cAAL,CAAoBwG,aAApB,CAAkCvF,IAAlC;;AACA,sBAAI,CAACjB,cAAL,CAAoB0wB,aAApB,CAAkC,KAAlC;;AACA,sBAAI,CAACklB,QAAL,CAAcj0C,GAAd,CAAkB,YAAlB,EAAgCY,QAAhC,CAAyC,CAAC,CAA1C,EAA6C;AAAEC,yBAAS,EAAE;AAAb,eAA7C;;AACA,sBAAI,CAACd,MAAL,CAAYsV,UAAZ,GAAyB,CAAC,CAA1B;AACH,aAVL,EAWI,UAAAzT,KAAK,EAAI;AACL1B,qBAAO,CAACC,GAAR,CAAYyB,KAAZ;AACA;;;;;AAIA,sBAAI,CAACvD,cAAL,CAAoB0wB,aAApB,CAAkC,KAAlC;;AACA,sBAAI,CAAC1wB,cAAL,CAAoBwG,aAApB,CAAkC;AAAEgD,0BAAU,EAAEjG,KAAK,CAACA,KAAN,CAAYU;AAA1B,eAAlC;;AACA,kBAAGV,KAAK,CAACgB,MAAN,IAAgB,GAAnB,EAAuB;AACnB,wBAAI,CAACtE,MAAL,CAAYuY,OAAZ,CAAoB,oBAApB,EAA0C,EAA1C,EAA8C;AAAChV,yBAAO,EAAE;AAAV,iBAA9C;;AACA,wBAAI,CAACoyC,QAAL,CAAcj0C,GAAd,CAAkB,YAAlB,EAAgCY,QAAhC,CAAyC,CAAC,CAA1C,EAA6C;AAAEC,2BAAS,EAAE;AAAb,iBAA7C;;AACA,wBAAI,CAACd,MAAL,CAAYsV,UAAZ,GAAyB,CAAC,CAA1B;AACH,eAJD,MAIK;AACD,wBAAI,CAAC/W,MAAL,CAAYsD,KAAZ,CAAkBA,KAAK,CAACA,KAAxB,EAA+B,OAA/B,EAAwC;AAACC,yBAAO,EAAE;AAAV,iBAAxC;AAEH;AACJ,aA3BL;AA6BH;;;6CAEkB+5B,C,EAAI7wB,C,EAAI87B,C,EAAE;AACzB,gBAAIjL,CAAC,IAAI97B,SAAT,EAAoB;AAChB,qBAAO,KAAK1B,WAAL,CAAiBc,KAAjB,CAAuB;AAC1BqxB,qBAAK,EAAE,IAAI,0DAAJ,CAAgBqL,CAAhB,EAAmB,CAAC,0DAAWtqB,QAAZ,EAAsB,0DAAWmO,SAAX,CAAqB,CAArB,CAAtB,CAAnB,CADmB;AAE1Bre,qBAAK,EAAE,IAAI,0DAAJ,CAAgB2J,CAAhB,EAAmB,CAAC,0DAAWuG,QAAZ,EAAsB,0DAAWmO,SAAX,CAAqB,CAArB,CAAtB,CAAnB,CAFmB;AAG1BqK,2BAAW,EAAG,IAAI,0DAAJ,CAAgB+c,CAAhB,EAAmB,CAAC,0DAAWv1B,QAAZ,EAAsB,0DAAWmO,SAAX,CAAqB,CAArB,CAAtB,CAAnB;AAHY,eAAvB,CAAP;AAKH,aAND,MAMO;AACH,qBAAO,KAAKrhB,WAAL,CAAiBc,KAAjB,CAAuB;AAC1BqxB,qBAAK,EAAE,IAAI,0DAAJ,CAAgB,EAAhB,EAAoB,CAAC,0DAAWjf,QAAZ,EAAsB,0DAAWmO,SAAX,CAAqB,CAArB,CAAtB,CAApB,CADmB;AAE1Bre,qBAAK,EAAE,IAAI,0DAAJ,CAAgB,EAAhB,EAAoB,CAAC,0DAAWkQ,QAAZ,EAAsB,0DAAWmO,SAAX,CAAqB,CAArB,CAAtB,CAApB,CAFmB;AAG1BqK,2BAAW,EAAG,IAAI,0DAAJ,CAAgB,IAAhB,EAAsB,CAAC,0DAAWxY,QAAZ,EAAsB,0DAAWmO,SAAX,CAAqB,CAArB,CAAtB,CAAtB;AAHY,eAAvB,CAAP;AAKH;AACJ;;;uCAEYlb,C,EAAE;AAEX,gBAAIA,CAAC,IAAIzE,SAAT,EAAoB;AAChB,qBAAO,KAAK1B,WAAL,CAAiBc,KAAjB,CAAuB;AAC1BsF,sBAAM,EAAE,IAAI,0DAAJ,CAAgBD,CAAhB,EAAmB,CAAC,0DAAW+M,QAAZ,EAAsB,0DAAWoO,OAAX,CAAmB,KAAKo0B,QAAxB,CAAtB,CAAnB;AADkB,eAAvB,CAAP;AAGH,aAJD,MAIO;AACH,qBAAO,KAAK11C,WAAL,CAAiBc,KAAjB,CAAuB;AAC1BsF,sBAAM,EAAE,IAAI,0DAAJ,CAAgB,EAAhB,EAAoB,CAAC,0DAAW8M,QAAZ,EAAsB,0DAAWoO,OAAX,CAAmB,KAAKo0B,QAAxB,CAAtB,CAApB;AADkB,eAAvB,CAAP;AAGH;AACJ;;;wCAEavvC,C,EAAIq3B,C,EAAE;AAChB,gBAAIr3B,CAAC,IAAIzE,SAAT,EAAoB;AAChB,qBAAO,KAAK1B,WAAL,CAAiBc,KAAjB,CAAuB;AAC1BsF,sBAAM,EAAE,IAAI,0DAAJ,CAAgBD,CAAhB,EAAmB,CAAC,0DAAW+M,QAAZ,EAAsB,0DAAWoO,OAAX,CAAmB,KAAKo0B,QAAxB,CAAtB,CAAnB,CADkB;AAE1BpzC,oBAAI,EAAEk7B;AAFoB,eAAvB,CAAP;AAIH,aALD,MAKO;AACH,qBAAO,KAAKx9B,WAAL,CAAiBc,KAAjB,CAAuB;AAC1BsF,sBAAM,EAAE,IAAI,0DAAJ,CAAgB,IAAhB,EAAsB,CAAC,0DAAW8M,QAAZ,EAAsB,0DAAWoO,OAAX,CAAmB,KAAKo0B,QAAxB,CAAtB,CAAtB,CADkB;AAE1BpzC,oBAAI,EAAE;AAFoB,eAAvB,CAAP;AAIH;AACJ;;;yCAEc6D,C,EAAIq3B,C,EAAE;AACjB,gBAAIr3B,CAAC,IAAIzE,SAAT,EAAoB;AAChB,qBAAO,KAAK1B,WAAL,CAAiBc,KAAjB,CAAuB;AAC1BsF,sBAAM,EAAE,IAAI,0DAAJ,CAAgBD,CAAhB,EAAmB,CAAC,0DAAW+M,QAAZ,EAAsB,0DAAWoO,OAAX,CAAmB,KAAKo0B,QAAxB,CAAtB,CAAnB,CADkB;AAE1BpzC,oBAAI,EAAEk7B,CAFoB;AAG1Bn3B,oBAAI,EAAE;AAHoB,eAAvB,CAAP;AAKH,aAND,MAMO;AACH,qBAAO,KAAKrG,WAAL,CAAiBc,KAAjB,CAAuB;AAC1BsF,sBAAM,EAAE,IAAI,0DAAJ,CAAgB,IAAhB,EAAsB,CAAC,0DAAW8M,QAAZ,EAAsB,0DAAWoO,OAAX,CAAmB,KAAKo0B,QAAxB,CAAtB,CAAtB,CADkB;AAE1BpzC,oBAAI,EAAE,IAFoB;AAG1B+D,oBAAI,EAAE;AAHoB,eAAvB,CAAP;AAKH;AACJ;;;wCAGaT,G,EAAKC,C,EAAG;AAElB,gBAAID,GAAG,YAAY,sEAAnB,EAAsC;AAClC,kBAAIA,GAAG,CAAChC,aAAJ,CAAkBC,MAAlB,GAA2B,CAA/B,EAAkC;AAC9B,oBAAI0B,KAAK,GAAGK,GAAG,CAAChC,aAAJ,CAAkB,CAAlB,EAAqB,OAArB,EAA8B,cAA9B,CAAZ;AACA,qBAAKwyC,eAAL,CAAqB;AAAEx8B,sBAAI,EAAErU,KAAR;AAAeM,mBAAC,EAAEA;AAAlB,iBAArB;AACH;AACJ,aALD,MAKO;AACH,kBAAIN,OAAK,GAAGK,GAAG,CAACE,MAAJ,CAAW9C,KAAvB;AACA,mBAAKuyC,eAAL,CAAqBxvC,IAArB,CAA0B;AAAE6T,oBAAI,EAAErU,OAAR;AAAeM,iBAAC,EAAEA;AAAlB,eAA1B;AACH;AACJ;;;yCAEcD,G,EAAKC,C,EAAG;AAEnB,gBAAID,GAAG,YAAY,sEAAnB,EAAsC;AAClC,kBAAIA,GAAG,CAAChC,aAAJ,CAAkBC,MAAlB,GAA2B,CAA/B,EAAkC;AAC9B/B,uBAAO,CAACC,GAAR,CAAY6D,GAAG,CAAChC,aAAJ,CAAkB,CAAlB,CAAZ;AACA,oBAAI2B,KAAK,GAAGK,GAAG,CAAChC,aAAJ,CAAkB,CAAlB,EAAqB,OAArB,EAA8B,0BAA9B,CAAZ;AACA,qBAAKyyC,gBAAL,CAAsB;AAAEz8B,sBAAI,EAAErU,KAAR;AAAeM,mBAAC,EAAEA;AAAlB,iBAAtB;AACH;AACJ,aAND,MAMO;AACH,kBAAIN,OAAK,GAAGK,GAAG,CAACE,MAAJ,CAAW9C,KAAvB;AACA,mBAAKwyC,gBAAL,CAAsBzvC,IAAtB,CAA2B;AAAE6T,oBAAI,EAAErU,OAAR;AAAeM,iBAAC,EAAEA;AAAlB,eAA3B;AACH;AACJ;;;0CAEe3E,I,EAAM;AAAA;;AAClB,gBAAI+B,KAAK,GAAG/B,IAAI,CAAC,GAAD,CAAhB;AACA,iBAAKs1C,YAAL,GAAoB,KAAKX,QAAL,CAAcj0C,GAAd,CAAkB,SAAlB,CAApB;;AACA,gBAAI,KAAKqzC,aAAL,CAAmBhyC,KAAnB,KAA6BvB,SAAjC,EAA4C;AACxC,kBAAMsvB,QAAQ,GAAG9vB,IAAI,CAAC,MAAD,CAArB;AACA,kBAAMmC,UAAU,GAAG;AACff,oBAAI,EAAE,YADS;AAEfgB,wBAAQ,EAAE,SAFK;AAGfN,qBAAK,EAAEguB;AAHQ,eAAnB,CAFwC,CAOxC;;AACA,kBAAIjtB,KAAK,GAAG,KAAKpC,MAAL,CAAYe,wBAAxB;AACA,mBAAKzC,cAAL,CAAoB8Y,wBAApB,CAA6ChV,KAA7C,EAAoDV,UAApD,EAAgEpC,SAAhE,CACI,UAAAC,IAAI,EAAI;AACJ;AACA,wBAAI,CAACjB,cAAL,CAAoB0wB,aAApB,CAAkC,KAAlC;;AACAzvB,oBAAI,CAAC,SAAD,CAAJ,GAAkB,CAAlB;;AACA,wBAAI,CAACjB,cAAL,CAAoB0nB,gBAApB,CAAqCzmB,IAArC;;AACA,wBAAI,CAACjB,cAAL,CAAoBwG,aAApB,CAAkCvF,IAAlC;AACH,eAPL,EAOO,UAAAsC,KAAK,EAAI;AACR;;AAEA;;;AAGA,wBAAI,CAACvD,cAAL,CAAoBwG,aAApB,CAAkC;AAAEgD,4BAAU,EAAEjG,KAAK,CAACA,KAAN,CAAYU;AAA1B,iBAAlC;;AAEA,wBAAI,CAACjE,cAAL,CAAoB0wB,aAApB,CAAkC,KAAlC;;AACA,oBAAGntB,KAAK,CAACgB,MAAN,IAAgB,GAAnB,EAAuB;AACnB,0BAAI,CAACtE,MAAL,CAAYuY,OAAZ,CAAoB,mCAAmC1U,KAAvD,EAA8D,EAA9D,EAAkE;AAC9DN,2BAAO,EAAE;AADqD,mBAAlE;AAGH,iBAJD,MAIK;AACD,0BAAI,CAACvD,MAAL,CAAYsD,KAAZ,CAAkBA,KAAK,CAACA,KAAxB,EAA+B,OAA/B,EAAwC;AACpCC,2BAAO,EAAE;AAD2B,mBAAxC;AAIH;AACJ,eA1BL;AA4BA,mBAAKwxC,aAAL,CAAmBhyC,KAAnB,IAA4B/B,IAA5B;AAGH,aAxCD,MAwCO;AACH,kBAAMwC,QAAQ,GAAG,KAAKuxC,aAAL,CAAmBhyC,KAAnB,EAA0B,eAA1B,CAAjB;AACA,kBAAM+tB,UAAQ,GAAG9vB,IAAI,CAAC,MAAD,CAArB;AACA,kBAAMmC,aAAU,GAAG;AACff,oBAAI,EAAE,YADS;AAEfgB,wBAAQ,EAAE,SAFK;AAGfN,qBAAK,EAAEguB,UAHQ;AAIfvvB,4BAAY,EAAEiC;AAJC,eAAnB;AAOA,kBAAIK,OAAK,GAAG,KAAKpC,MAAL,CAAYe,wBAAxB,CAVG,CAWH;;AACA,mBAAKzC,cAAL,CAAoB8Y,wBAApB,CAA6ChV,OAA7C,EAAoDV,aAApD,EAAgEpC,SAAhE,CACI,UAAAC,IAAI,EAAI;AACJ;AACA,wBAAI,CAACjB,cAAL,CAAoB0wB,aAApB,CAAkC,KAAlC;;AACA,wBAAI,CAAC1wB,cAAL,CAAoBwG,aAApB,CAAkCvF,IAAlC;;AACAA,oBAAI,CAAC,SAAD,CAAJ,GAAkB,CAAlB;;AACA,wBAAI,CAACjB,cAAL,CAAoB0nB,gBAApB,CAAqCzmB,IAArC;AACH,eAPL,EAOO,UAAAsC,KAAK,EAAI;AACR;AACA,oBAAMtC,IAAI,GAAG,QAAI,CAACS,MAAlB;AACAT,oBAAI,CAAC,SAAD,CAAJ,GAAkB,CAAlB;;AACA,wBAAI,CAAChB,MAAL,CAAYsD,KAAZ,CAAkBA,KAAK,CAACA,KAAxB,EAA+B,OAA/B,EAAwC;AACpCC,yBAAO,EAAE;AAD2B,iBAAxC,EAJQ,CAOR;;;AACA,wBAAI,CAACxD,cAAL,CAAoBwG,aAApB,CAAkC;AAAEgD,4BAAU,EAAEjG,KAAK,CAACA,KAAN,CAAYU;AAA1B,iBAAlC;;AACA,wBAAI,CAACjE,cAAL,CAAoB0wB,aAApB,CAAkC,KAAlC;;AACA,oBAAG,OAAOntB,KAAK,CAACA,KAAb,IAAuB,QAA1B,EAAmC;AAC/B,0BAAI,CAACtD,MAAL,CAAYsD,KAAZ,CAAkBA,KAAK,CAACA,KAAxB,EAA+B,OAA/B,EAAwC;AACtCC,2BAAO,EAAE;AAD6B,mBAAxC;AAGH,iBAJD,MAIK;AACD,0BAAI,CAACvD,MAAL,CAAYuY,OAAZ,CAAoB,iCAAiC1U,OAArD,EAA4D,EAA5D,EAAgE;AAC5DN,2BAAO,EAAE;AADmD,mBAAhE;AAGH;AACJ,eA1BL;AA4BA,mBAAKwxC,aAAL,CAAmBhyC,KAAnB,IAA4B/B,IAA5B;AACH;AAGJ;;;2CAEgBA,I,EAAM;AAAA;;AACnB,gBAAI+B,KAAK,GAAG/B,IAAI,CAAC,GAAD,CAAhB;AACA,iBAAKyuB,aAAL,GAAqB,KAAKkmB,QAAL,CAAcj0C,GAAd,CAAkB,UAAlB,CAArB;;AACA,gBAAI,KAAKszC,cAAL,CAAoBjyC,KAApB,KAA8BvB,SAAlC,EAA6C;AACzC,kBAAMsvB,QAAQ,GAAG9vB,IAAI,CAAC,MAAD,CAArB;AACA,kBAAMmC,UAAU,GAAG;AACff,oBAAI,EAAE,YADS;AAEfgB,wBAAQ,EAAE,SAFK;AAGfN,qBAAK,EAAEguB;AAHQ,eAAnB;AAKAlvB,qBAAO,CAACC,GAAR,CAAYsB,UAAZ;AACA,kBAAIU,KAAK,GAAG,KAAKpC,MAAL,CAAYe,wBAAxB;AACA,mBAAKzC,cAAL,CAAoB8Y,wBAApB,CAA6ChV,KAA7C,EAAoDV,UAApD,EAAgEpC,SAAhE,CACI,UAAAC,IAAI,EAAI;AACJY,uBAAO,CAACC,GAAR,CAAYb,IAAZ;;AACA,wBAAI,CAACjB,cAAL,CAAoB0wB,aAApB,CAAkC,KAAlC;;AACAzvB,oBAAI,CAAC,SAAD,CAAJ,GAAkB,CAAlB;;AACA,wBAAI,CAACjB,cAAL,CAAoB0nB,gBAApB,CAAqCzmB,IAArC;;AACA,wBAAI,CAACjB,cAAL,CAAoBwG,aAApB,CAAkCvF,IAAlC;AACH,eAPL,EAOO,UAAAsC,KAAK,EAAI;AACR1B,uBAAO,CAACC,GAAR,CAAYyB,KAAZ;AAEA;;;;AAGA,wBAAI,CAACvD,cAAL,CAAoBwG,aAApB,CAAkC;AAAEgD,4BAAU,EAAEjG,KAAK,CAACA,KAAN,CAAYU;AAA1B,iBAAlC;;AACA,wBAAI,CAACjE,cAAL,CAAoB0wB,aAApB,CAAkC,KAAlC;;AACA,oBAAGntB,KAAK,CAACgB,MAAN,IAAgB,GAAnB,EAAuB;AACnB,0BAAI,CAACtE,MAAL,CAAYuY,OAAZ,CAAoB,oCAAoC1U,KAAxD,EAA+D,EAA/D,EAAmE;AAC/DN,2BAAO,EAAE;AADsD,mBAAnE;AAGH,iBAJD,MAIK;AACD,0BAAI,CAACvD,MAAL,CAAYsD,KAAZ,CAAkBA,KAAK,CAACA,KAAxB,EAA+B,OAA/B,EAAwC;AACpCC,2BAAO,EAAE;AAD2B,mBAAxC;AAIH;AACJ,eAzBL;AA2BA,mBAAKyxC,cAAL,CAAoBjyC,KAApB,IAA6B/B,IAA7B;AAGH,aAvCD,MAuCO;AACH,kBAAMwC,QAAQ,GAAG,KAAKwxC,cAAL,CAAoBjyC,KAApB,EAA2B,eAA3B,CAAjB;AACA,kBAAM+tB,UAAQ,GAAG9vB,IAAI,CAAC,MAAD,CAArB;AACA,kBAAMmC,aAAU,GAAG;AACff,oBAAI,EAAE,YADS;AAEfgB,wBAAQ,EAAE,SAFK;AAGfN,qBAAK,EAAEguB,UAHQ;AAIfvvB,4BAAY,EAAEiC;AAJC,eAAnB;AAOA,kBAAIK,OAAK,GAAG,KAAKpC,MAAL,CAAYe,wBAAxB;AACAZ,qBAAO,CAACC,GAAR,CAAYsB,aAAZ;AACA,mBAAKpD,cAAL,CAAoB8Y,wBAApB,CAA6ChV,OAA7C,EAAoDV,aAApD,EAAgEpC,SAAhE,CACI,UAAAC,IAAI,EAAI;AACJY,uBAAO,CAACC,GAAR,CAAYb,IAAZ;;AACA,wBAAI,CAACjB,cAAL,CAAoB0wB,aAApB,CAAkC,KAAlC;;AACA,wBAAI,CAAC1wB,cAAL,CAAoBwG,aAApB,CAAkCvF,IAAlC;;AACAA,oBAAI,CAAC,SAAD,CAAJ,GAAkB,CAAlB;;AACA,wBAAI,CAACjB,cAAL,CAAoB0nB,gBAApB,CAAqCzmB,IAArC;AACH,eAPL,EAOO,UAAAsC,KAAK,EAAI;AACR1B,uBAAO,CAACC,GAAR,CAAYyB,KAAZ;AACA,oBAAMtC,IAAI,GAAG,QAAI,CAACS,MAAlB;AACAT,oBAAI,CAAC,SAAD,CAAJ,GAAkB,CAAlB,CAHQ,CAKR;;AACA,wBAAI,CAACjB,cAAL,CAAoBwG,aAApB,CAAkC;AAAEgD,4BAAU,EAAEjG,KAAK,CAACA,KAAN,CAAYU;AAA1B,iBAAlC;;AACA,wBAAI,CAACjE,cAAL,CAAoB0wB,aAApB,CAAkC,KAAlC;;AACA,oBAAGntB,KAAK,CAACgB,MAAN,IAAgB,GAAnB,EAAuB;AACnB,0BAAI,CAACtE,MAAL,CAAYuY,OAAZ,CAAoB,iCAAiC1U,OAArD,EAA4D,EAA5D,EAAgE;AAC5DN,2BAAO,EAAE;AADmD,mBAAhE;AAGH,iBAJD,MAIK;AACD,0BAAI,CAACvD,MAAL,CAAYsD,KAAZ,CAAkBA,KAAK,CAACA,KAAxB,EAA+B,OAA/B,EAAwC;AACpCC,2BAAO,EAAE;AAD2B,mBAAxC;AAGH;AACJ,eAxBL;AA0BA,mBAAKyxC,cAAL,CAAoBjyC,KAApB,IAA6B/B,IAA7B;AACH;AAGJ;AAEF;;;;;;;;;;;;;;;qCAgBYiF,C,EAAIq3B,C,EAAI;AACf,iBAAKgZ,YAAL,GAAoB,KAAKX,QAAL,CAAcj0C,GAAd,CAAkB,SAAlB,CAApB;;AACA,gBAAIuE,CAAC,IAAIzE,SAAT,EAAoB;AAChB,mBAAK80C,YAAL,CAAkBn0C,IAAlB,CAAuB,KAAK6zC,aAAL,CAAmB/vC,CAAnB,EAAsBq3B,CAAtB,CAAvB;AACH,aAFD,MAEO;AACH,mBAAKgZ,YAAL,CAAkBn0C,IAAlB,CAAuB,KAAK6zC,aAAL,EAAvB;AACH;AAEJ;;;sCAEW/vC,C,EAAIq3B,C,EAAI;AAChBj8B,sBAAU,CAAC,YAAM;AACb;AACAyE,eAAC,CAAC,mBAAD,CAAD,CAAuBC,OAAvB,CAA+B;AAC3BC,uBAAO,EAAE;AADkB,eAA/B;AAGH,aALS,EAKP,IALO,CAAV;AAMA,iBAAKypB,aAAL,GAAqB,KAAKkmB,QAAL,CAAcj0C,GAAd,CAAkB,UAAlB,CAArB;;AACA,gBAAIuE,CAAC,IAAIzE,SAAT,EAAoB;AAChB,mBAAKiuB,aAAL,CAAmBttB,IAAnB,CAAwB,KAAK8zC,cAAL,CAAoBhwC,CAApB,EAAuBq3B,CAAvB,CAAxB;AACH,aAFD,MAEO;AACH,mBAAK7N,aAAL,CAAmBttB,IAAnB,CAAwB,KAAK8zC,cAAL,EAAxB;AACH;AAEJ;;;0CAIe3Y,C,EAAI7wB,C,EAAI87B,C,EAAI;AAExB,iBAAKmL,YAAL,GAAoB,KAAKiC,QAAL,CAAcj0C,GAAd,CAAkB,cAAlB,CAApB;;AACA,gBAAI47B,CAAC,IAAI97B,SAAT,EAAoB;AAChB,mBAAKkyC,YAAL,CAAkBvxC,IAAlB,CAAuB,KAAKwxC,kBAAL,CAAwBrW,CAAxB,EAA2B7wB,CAA3B,EAA8B87B,CAA9B,CAAvB;AACH,aAFD,MAEO;AACH,mBAAK0L,gBAAL,GAAwB,IAAxB;AACA,mBAAKP,YAAL,CAAkBvxC,IAAlB,CAAuB,KAAKwxC,kBAAL,EAAvB;AACH;AACJ;;;wCAEa5wC,K,EAAO;AAAA;;AAEjB,iBAAKswC,YAAL,CAAkB3sC,MAAlB,CAAyB3D,KAAzB,EAAgC,CAAhC;AACA,iBAAKs4B,WAAL,CAAiB30B,MAAjB,CAAwB3D,KAAxB,EAA+B,CAA/B;AACA,iBAAKq4B,YAAL,CAAkB10B,MAAlB,CAAyB3D,KAAzB,EAAgC,CAAhC;AAEA,iBAAK2wC,YAAL,GAAoB,KAAKiC,QAAL,CAAcj0C,GAAd,CAAkB,cAAlB,CAApB;AAEA,gBAAMuwB,KAAK,GAAG,KAAKyhB,YAAL,CAAkB3vC,EAAlB,CAAqBhB,KAArB,EAA4BrB,GAA5B,CAAgC,OAAhC,EAAyCoB,KAAvD;AACA,gBAAMA,KAAK,GAAG,KAAK4wC,YAAL,CAAkB3vC,EAAlB,CAAqBhB,KAArB,EAA4BrB,GAA5B,CAAgC,OAAhC,EAAyCoB,KAAvD;;AAIA,gBAAImvB,KAAK,IAAI,EAAb,EAAiB;AAEb,kBAAIpuB,KAAK,GAAG,KAAKpC,MAAL,CAAYe,wBAAxB;AAEA,kBAAIW,UAAU,GAAG;AACbf,oBAAI,EAAE,YADO;AAEbgB,wBAAQ,EAAE6uB,KAFG;AAGbnvB,qBAAK,EAAEA;AAHM,eAAjB,CAJa,CAUb;;AAEA,mBAAK/C,cAAL,CAAoBuG,wBAApB,CAA6CzC,KAA7C,EAAoDV,UAApD,EAAgEpC,SAAhE,CACI,UAAAC,IAAI,EAAI;AACJ;AACA,wBAAI,CAACjB,cAAL,CAAoBwG,aAApB,CAAkC,QAAI,CAAC9E,MAAvC;;AACA,wBAAI,CAAC1B,cAAL,CAAoB0nB,gBAApB,CAAqC;AAAElZ,yBAAO,EAAE,CAAX;AAAclJ,uBAAK,EAAE,QAAI,CAAC5D,MAAL,CAAY4D;AAAjC,iBAArC;;AACA,wBAAI,CAACtF,cAAL,CAAoB0wB,aAApB,CAAkC,KAAlC;;AACA,wBAAI,CAAC1wB,cAAL,CAAoB8nB,aAApB,CAAkC;AAAEtZ,yBAAO,EAAE;AAAX,iBAAlC;AACH,eAPL,EAOO,UAAAjL,KAAK,EAAI;AACR;AACA,wBAAI,CAACvD,cAAL,CAAoB0nB,gBAApB,CAAqC;AAAElZ,yBAAO,EAAE,CAAX;AAAclJ,uBAAK,EAAE,QAAI,CAAC5D,MAAL,CAAY4D;AAAjC,iBAArC;;AACA,wBAAI,CAACtF,cAAL,CAAoB0wB,aAApB,CAAkC,KAAlC;;AACA,wBAAI,CAAC1wB,cAAL,CAAoB8nB,aAApB,CAAkC;AAAEtZ,yBAAO,EAAE;AAAX,iBAAlC;;AACA,wBAAI,CAACxO,cAAL,CAAoBwG,aAApB,CAAkC;AAAEgD,4BAAU,EAAEjG,KAAK,CAACA,KAAN,CAAYU;AAA1B,iBAAlC;;AACA,oBAAG,OAAOV,KAAK,CAACA,KAAb,IAAuB,QAA1B,EAAmC;AAC/B,0BAAI,CAACtD,MAAL,CAAYsD,KAAZ,CAAkBA,KAAK,CAACA,KAAxB,EAA+B,OAA/B,EAAwC;AACtCC,2BAAO,EAAE;AAD6B,mBAAxC;AAGH,iBAJD,MAIK;AACD,0BAAI,CAACvD,MAAL,CAAYuY,OAAZ,CAAoB,mCAAmC1U,KAAvD,EAA8D,EAA9D,EAAkE;AAC9DN,2BAAO,EAAE;AADqD,mBAAlE;AAGH;AACJ,eAtBL;AAwBH,aApCD,MAoCK;AACD,mBAAK0wC,gBAAL,GAAwB,KAAxB;AACH;;AAGD,iBAAKP,YAAL,CAAkB/sC,QAAlB,CAA2B5D,KAA3B;AACH;;;wCAEaA,K,EAAO;AAAA;;AACjB,iBAAKuzC,YAAL,GAAoB,KAAKX,QAAL,CAAcj0C,GAAd,CAAkB,SAAlB,CAApB;AAEA,gBAAMwE,MAAM,GAAG,KAAKowC,YAAL,CAAkBvyC,EAAlB,CAAqBhB,KAArB,EAA4BrB,GAA5B,CAAgC,QAAhC,EAA0CoB,KAAzD;AAEA,gBAAIe,KAAK,GAAG,KAAKpC,MAAL,CAAYe,wBAAxB;AAEA,gBAAIW,UAAU,GAAG;AACbC,sBAAQ,EAAE,SADG;AAEbN,mBAAK,EAAEoD;AAFM,aAAjB;;AAMA,gBAAIA,MAAM,IAAI,EAAd,EAAkB;AACd,mBAAKnG,cAAL,CAAoBuG,wBAApB,CAA6CzC,KAA7C,EAAoDV,UAApD,EAAgEpC,SAAhE,CACI,UAAAC,IAAI,EAAI;AACJY,uBAAO,CAACC,GAAR,CAAYb,IAAZ;;AACA,wBAAI,CAACjB,cAAL,CAAoBwG,aAApB,CAAkC,QAAI,CAAC9E,MAAvC;AAEH,eALL,EAKO,UAAA6B,KAAK,EAAI;AACR1B,uBAAO,CAACC,GAAR,CAAYyB,KAAZ,EADQ,CAER;;AACA,wBAAI,CAACtD,MAAL,CAAYsD,KAAZ,CAAkBA,KAAK,CAACA,KAAxB,EAA+B,OAA/B,EAAwC;AACpCC,yBAAO,EAAE;AAD2B,iBAAxC;AAGH,eAXL;AAaH;;AAGD,iBAAK+yC,YAAL,CAAkB3vC,QAAlB,CAA2B5D,KAA3B;AAEA,iBAAKgyC,aAAL,CAAmBruC,MAAnB,CAA0B3D,KAA1B,EAAiC,CAAjC;AACH;;;yCAEcA,K,EAAO;AAAA;;AAClB,iBAAK0sB,aAAL,GAAqB,KAAKkmB,QAAL,CAAcj0C,GAAd,CAAkB,UAAlB,CAArB;AAEA,gBAAMwE,MAAM,GAAG,KAAKupB,aAAL,CAAmB1rB,EAAnB,CAAsBhB,KAAtB,EAA6BrB,GAA7B,CAAiC,QAAjC,EAA2CoB,KAA1D;AAEA,gBAAIe,KAAK,GAAG,KAAKpC,MAAL,CAAYe,wBAAxB;AAEA,gBAAIW,UAAU,GAAG;AACbC,sBAAQ,EAAE,SADG;AAEbN,mBAAK,EAAEoD;AAFM,aAAjB;;AAMA,gBAAIA,MAAM,IAAI,EAAd,EAAkB;AACd,mBAAKnG,cAAL,CAAoBuG,wBAApB,CAA6CzC,KAA7C,EAAoDV,UAApD,EAAgEpC,SAAhE,CACI,UAAAC,IAAI,EAAI;AACJY,uBAAO,CAACC,GAAR,CAAYb,IAAZ;;AACA,wBAAI,CAACjB,cAAL,CAAoBwG,aAApB,CAAkC,QAAI,CAAC9E,MAAvC;;AACA,wBAAI,CAACzB,MAAL,CAAYuY,OAAZ,CAAoB,8BAApB,EAAoD,EAApD,EAAwD;AACpDhV,yBAAO,EAAE;AAD2C,iBAAxD;AAIH,eARL,EAQO,UAAAD,KAAK,EAAI;AACR1B,uBAAO,CAACC,GAAR,CAAYyB,KAAZ,EADQ,CAER;;AACA,wBAAI,CAACtD,MAAL,CAAYsD,KAAZ,CAAkBA,KAAK,CAACA,KAAxB,EAA+B,OAA/B,EAAwC;AACpCC,yBAAO,EAAE;AAD2B,iBAAxC;AAGH,eAdL;AAgBH;;AAGD,iBAAKksB,aAAL,CAAmB9oB,QAAnB,CAA4B5D,KAA5B;AAEA,iBAAKiyC,cAAL,CAAoBtuC,MAApB,CAA2B3D,KAA3B,EAAkC,CAAlC;AACH;;;mCAEQyvB,S,EAAgB;AAAA;;AAErBnxB,sBAAU,CAAC,YAAM;AACb;AACJyE,eAAC,CAAC,eAAD,CAAD,CAAmBC,OAAnB,CAA2B;AACvBC,uBAAO,EAAE;AADc,eAA3B;AAGC,aALS,EAKP,GALO,CAAV;AAOA,iBAAKjG,cAAL,CAAoB0wB,aAApB,CAAkC,IAAlC;AACA,gBAAI5sB,KAAK,GAAG,KAAKpC,MAAL,CAAYe,wBAAxB;AACA,gBAAIM,KAAK,GAAG,EAAZ;;AACA,gBAAG0vB,SAAH,EAAW;AACP1vB,mBAAK,GAAG,QAAR;AACA,mBAAK6yC,QAAL,CAAcj0C,GAAd,CAAkB,MAAlB,EAA0BY,QAA1B,CAAmC,QAAnC,EAA6C;AAAEC,yBAAS,EAAE;AAAb,eAA7C;AACA,mBAAKozC,QAAL,CAAcj0C,GAAd,CAAkB,MAAlB,EAA0B80C,OAA1B,CAAkC;AAACC,wBAAQ,EAAE,IAAX;AAAiBl0C,yBAAS,EAAE;AAA5B,eAAlC;AACH,aAJD,MAIK;AACDO,mBAAK,GAAG,cAAR;AACA,mBAAK6yC,QAAL,CAAcj0C,GAAd,CAAkB,MAAlB,EAA0BY,QAA1B,CAAmC,cAAnC,EAAmD;AAAEC,yBAAS,EAAE;AAAb,eAAnD;AACA,mBAAKozC,QAAL,CAAcj0C,GAAd,CAAkB,MAAlB,EAA0Bg1C,MAA1B,CAAiC;AAACD,wBAAQ,EAAE,IAAX;AAAiBl0C,yBAAS,EAAE;AAA5B,eAAjC;AACH;;AAED,gBAAIY,UAAU,GAAG;AACbC,sBAAQ,EAAE,MADG;AAEbN,mBAAK,EAAEA;AAFM,aAAjB;AAKA,iBAAK/C,cAAL,CAAoB6Y,kBAApB,CAAuC/U,KAAvC,EAA8CV,UAA9C,EAA0DpC,SAA1D,CACI,UAAAC,IAAI,EAAI;AACJ;AACA,sBAAI,CAACjB,cAAL,CAAoB0wB,aAApB,CAAkC,KAAlC;;AACA,sBAAI,CAAC1wB,cAAL,CAAoBwG,aAApB,CAAkCvF,IAAlC;;AACA,sBAAI,CAACjB,cAAL,CAAoB8nB,aAApB,CAAkC;AAAEtZ,uBAAO,EAAE;AAAX,eAAlC;AAGH,aARL,EASI,UAAAjL,KAAK,EAAI;AACL;AACA,kBAAMtC,IAAI,GAAG,QAAI,CAACS,MAAlB;;AACA,sBAAI,CAAC1B,cAAL,CAAoB0wB,aAApB,CAAkC,KAAlC;;AACA,sBAAI,CAAC1wB,cAAL,CAAoB8nB,aAApB,CAAkC;AAAEtZ,uBAAO,EAAE;AAAX,eAAlC;;AACA,sBAAI,CAACxO,cAAL,CAAoBwG,aAApB,CAAkC;AAAEgD,0BAAU,EAAEjG,KAAK,CAACA,KAAN,CAAYU;AAA1B,eAAlC;AACH,aAfL;AAiBH;;;;;;;yBAtiDQ8wC,6B,EAA6B,wK,EAAA,2H,EAAA,yH,EAAA,+I;AAAA,O;;;cAA7BA,6B;AAA6B,oD;AAAA;AAAA;AAAA,S;AAAA,sF;AAAA,gB;AAAA,e;AAAA,mlO;AAAA;AAAA;AC5B1C;;;;AAA8B;;;;;;;;;wED4BjBA,6B,EAA6B;gBALzC,uDAKyC;iBAL/B;AACPp1C,oBAAQ,EAAE,6BADH;AAEPC,uBAAW,EAAE,0CAFN;AAGPC,qBAAS,EAAE,CAAC,0CAAD;AAHJ,W;AAK+B,U;;;;;;;;;;;AAE7B0qB,iBAAO,EAAE,CAAF;kBAAf;AAAe,WAAE;;;;;;;;;;;;;;;;;;;AEhCtB;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;AAkBA,UAAI,sEAAYjK,UAAhB,EAA4B;AAC1B;AACD;;AAED,kFAAyBg3B,eAAzB,CAAyC,yDAAzC,WACS,UAAAC,GAAG;AAAA,eAAI11C,OAAO,CAAC0B,KAAR,CAAcg0C,GAAd,CAAJ;AAAA,OADZ;;;;;;;;;;;;;;;ACtBA,eAASC,wBAAT,CAAkCnhC,GAAlC,EAAuC;AACtC;AACA;AACA,eAAOvE,OAAO,CAACC,OAAR,GAAkB0lC,IAAlB,CAAuB,YAAW;AACxC,cAAIvxC,CAAC,GAAG,IAAIwxC,KAAJ,CAAU,yBAAyBrhC,GAAzB,GAA+B,GAAzC,CAAR;AACAnQ,WAAC,CAACo8B,IAAF,GAAS,kBAAT;AACA,gBAAMp8B,CAAN;AACA,SAJM,CAAP;AAKA;;AACDsxC,8BAAwB,CAACr9B,IAAzB,GAAgC,YAAW;AAAE,eAAO,EAAP;AAAY,OAAzD;;AACAq9B,8BAAwB,CAACzlC,OAAzB,GAAmCylC,wBAAnC;AACAG,YAAM,CAAC5E,OAAP,GAAiByE,wBAAjB;AACAA,8BAAwB,CAACjmC,EAAzB,GAA8B,MAA9B;;;;;;;;;;;;;;;;ACZA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;;;ACOiC;;AAAiC;;AAAoB;;;;;;AAApB;;AAAA;;;;;;;;AAMtD;;AAAc;AAAA;;AAAA;;AAAA;AAAA;;AAAqG;;;;;;AAA5B;;;;;;AACvF;;;;;;AAA8C;;;;UDM7CqmC,kB;AAQX,oCAAoB53C,cAApB,EAA2D;AAAA;;AAAvC,eAAAA,cAAA,GAAAA,cAAA;AAFpB,eAAA63C,cAAA,GAAiB,CAAjB;AAE8D;;;;qCAEtD,CACP;;;sCAEWx2C,O,EAAsB;AAAA;;AAChC,gBAAGA,OAAO,CAACy2C,QAAR,CAAiBt2C,YAAjB,IAAiC,IAApC,EAAyC;AACvC,mBAAKq2C,cAAL,GAAsB,CAAtB;AACA,mBAAKn2C,MAAL,GAAcL,OAAO,CAACy2C,QAAR,CAAiBt2C,YAA/B;AACA,mBAAKD,UAAL,GAAkB,IAAlB;AACA,mBAAK8sC,WAAL,GAAmB,IAAnB;AAEA;;AAEA,kBAAG,KAAK3sC,MAAL,CAAYe,wBAAZ,IAAwChB,SAA3C,EAAqD;AACnD,oBAAIqC,KAAK,GAAG,KAAKpC,MAAL,CAAYe,wBAAxB;AACA,qBAAKzC,cAAL,CAAoB42C,6BAApB,CAAkD9yC,KAAlD,EAAyD,QAAzD,EAAmE9C,SAAnE,CACE,UAAAC,IAAI,EAAE;AACJY,yBAAO,CAACC,GAAR,CAAYb,IAAZ,EAAkB,QAAI,CAACS,MAAvB;AACA,0BAAI,CAACH,UAAL,GAAkB,EAAlB;AACA,0BAAI,CAACA,UAAL,CAAgB,OAAhB,IAA2BN,IAA3B;AACA,0BAAI,CAACM,UAAL,CAAgB,iBAAhB,IAAoC,QAAI,CAACG,MAAL,CAAY,cAAZ,CAApC;AACA,0BAAI,CAACH,UAAL,CAAgB,0BAAhB,IAA6C,QAAI,CAACG,MAAL,CAAY,0BAAZ,CAA7C;AACA,0BAAI,CAACH,UAAL,CAAgB,MAAhB,IAA0B,QAAI,CAACG,MAAL,CAAYW,IAAtC;AACD,iBARH,EAQK,UAAAkB,KAAK,EAAE;AACR1B,yBAAO,CAACC,GAAR,CAAY,QAAI,CAACJ,MAAjB;AACA,0BAAI,CAACH,UAAL,GAAkB,EAAlB;AACA,0BAAI,CAACA,UAAL,CAAgB,OAAhB,IAA2B,EAA3B;AACA,0BAAI,CAACA,UAAL,CAAgB,iBAAhB,IAAoC,QAAI,CAACG,MAAL,CAAY,cAAZ,CAApC;AACA,0BAAI,CAACH,UAAL,CAAgB,0BAAhB,IAA6C,QAAI,CAACG,MAAL,CAAY,0BAAZ,CAA7C;AACA,0BAAI,CAACH,UAAL,CAAgB,OAAhB,IAA0B,QAAI,CAACG,MAAL,CAAY,OAAZ,CAA1B;AACA,0BAAI,CAACH,UAAL,CAAgB,MAAhB,IAA0B,QAAI,CAACG,MAAL,CAAYW,IAAtC;AACAR,yBAAO,CAACC,GAAR,CAAYyB,KAAZ;AAED,iBAlBH;AAqBA,qBAAKvD,cAAL,CAAoB42C,6BAApB,CAAkD9yC,KAAlD,EAAyD,SAAzD,EAAoE9C,SAApE,CACE,UAAAC,IAAI,EAAE;AACJY,yBAAO,CAACC,GAAR,CAAYb,IAAZ;AACA,0BAAI,CAACotC,WAAL,GAAmB,EAAnB;AACA,0BAAI,CAACA,WAAL,CAAiB,OAAjB,IAA4BptC,IAA5B;AACA,0BAAI,CAACotC,WAAL,CAAiB,iBAAjB,IAAqC,QAAI,CAAC3sC,MAAL,CAAY,cAAZ,CAArC;AACA,0BAAI,CAAC2sC,WAAL,CAAiB,0BAAjB,IAA8C,QAAI,CAAC3sC,MAAL,CAAY,0BAAZ,CAA9C;AACD,iBAPH,EAOK,UAAA6B,KAAK,EAAE;AACR,0BAAI,CAAC8qC,WAAL,GAAmB,EAAnB;AACA,0BAAI,CAACA,WAAL,CAAiB,OAAjB,IAA4B,EAA5B;AACA,0BAAI,CAACA,WAAL,CAAiB,iBAAjB,IAAqC,QAAI,CAAC3sC,MAAL,CAAY,cAAZ,CAArC;AACA,0BAAI,CAAC2sC,WAAL,CAAiB,0BAAjB,IAA8C,QAAI,CAAC3sC,MAAL,CAAY,0BAAZ,CAA9C,CAJQ,CAKR;AAED,iBAdH,EAvBmD,CAwCnD;;AACA,qBAAKA,MAAL,CAAYwjB,KAAZ,CAAkBnjB,OAAlB,CAA0B,UAAAC,OAAO,EAAI;AACnC,sBAAGA,OAAO,CAACK,IAAR,IAAgBZ,SAAnB,EAA6B;AAC3B,wBAAGO,OAAO,CAACK,IAAR,IAAgB,WAAnB,EAA+B;AAC7BL,6BAAO,CAAC+0B,QAAR,CAAiBh1B,OAAjB,CAAyB,UAAA8gB,GAAG,EAAI;AAC9B,gCAAI,CAACg1B,cAAL,IAAuBh1B,GAAG,CAACvT,KAA3B;AACD,uBAFD;AAGD;AACF;AACF,iBARD;AASD,eAlDD,MAkDM,IAAG,KAAK5N,MAAL,CAAYmB,gBAAZ,IAAgCpB,SAAnC,EAA6C;AACjD,oBAAIgF,MAAM,GAAG,KAAK/E,MAAL,CAAYmB,gBAAzB;AACA,qBAAK7C,cAAL,CAAoB42C,6BAApB,CAAkDnwC,MAAlD,EAA0D,QAA1D,EAAoEzF,SAApE,CACE,UAAAC,IAAI,EAAE;AACJ;AACA,0BAAI,CAACM,UAAL,GAAkB,EAAlB;AACA,0BAAI,CAACA,UAAL,CAAgB,OAAhB,IAA2BN,IAA3B;AACA,0BAAI,CAACM,UAAL,CAAgB,kBAAhB,IAAqC,QAAI,CAACG,MAAL,CAAY,kBAAZ,CAArC;AACD,iBANH,EAMK,UAAA6B,KAAK,EAAE;AACR,0BAAI,CAAChC,UAAL,GAAkB,EAAlB;AACA,0BAAI,CAACA,UAAL,CAAgB,OAAhB,IAA2B,EAA3B;AACA,0BAAI,CAACA,UAAL,CAAgB,kBAAhB,IAAqC,QAAI,CAACG,MAAL,CAAY,kBAAZ,CAArC,CAHQ,CAIR;AAED,iBAZH;AAeA,qBAAK1B,cAAL,CAAoB42C,6BAApB,CAAkDnwC,MAAlD,EAA0D,SAA1D,EAAqEzF,SAArE,CACE,UAAAC,IAAI,EAAE;AACJ,0BAAI,CAACotC,WAAL,GAAmB,EAAnB;AACA,0BAAI,CAACA,WAAL,CAAiB,OAAjB,IAA4BptC,IAA5B;AACA,0BAAI,CAACotC,WAAL,CAAiB,kBAAjB,IAAsC,QAAI,CAAC3sC,MAAL,CAAY,kBAAZ,CAAtC;AACD,iBALH,EAKK,UAAA6B,KAAK,EAAE;AACR,0BAAI,CAAC8qC,WAAL,GAAmB,EAAnB;AACA,0BAAI,CAACA,WAAL,CAAiB,OAAjB,IAA4B,EAA5B;AACA,0BAAI,CAACA,WAAL,CAAiB,kBAAjB,IAAsC,QAAI,CAAC3sC,MAAL,CAAY,kBAAZ,CAAtC,CAHQ,CAIR;AAED,iBAXH,EAjBiD,CA+BjD;;AACA,oBAAG,KAAKA,MAAL,CAAYwjB,KAAZ,IAAqB,IAAxB,EAA6B;AAC3B,uBAAKxjB,MAAL,CAAYwjB,KAAZ,CAAkBnjB,OAAlB,CAA0B,UAAAC,OAAO,EAAI;AACnC,wBAAGA,OAAO,CAACK,IAAR,IAAgBZ,SAAnB,EAA6B;AAC3B,0BAAGO,OAAO,CAACK,IAAR,IAAgB,WAAnB,EAA+B;AAC7BL,+BAAO,CAAC+0B,QAAR,CAAiBh1B,OAAjB,CAAyB,UAAA8gB,GAAG,EAAI;AAC9B,kCAAI,CAACg1B,cAAL,IAAuBh1B,GAAG,CAACvT,KAA3B;AACD,yBAFD;AAGD;AACF;AACF,mBARD;AASD;AAEF,eA5CK,MA4CA,IAAG,KAAK5N,MAAL,CAAYoB,iBAAZ,IAAiCrB,SAApC,EAA8C;AAClD,oBAAIiF,OAAO,GAAG,KAAKhF,MAAL,CAAYoB,iBAA1B;AACA,qBAAK9C,cAAL,CAAoB42C,6BAApB,CAAkDlwC,OAAlD,EAA2D,QAA3D,EAAqE1F,SAArE,CACE,UAAAC,IAAI,EAAE;AACJ;AACA,0BAAI,CAACM,UAAL,GAAkB,EAAlB;AACA,0BAAI,CAACA,UAAL,CAAgB,OAAhB,IAA2BN,IAA3B;AACA,0BAAI,CAACM,UAAL,CAAgB,mBAAhB,IAAsC,QAAI,CAACG,MAAL,CAAY,mBAAZ,CAAtC;AACD,iBANH,EAMK,UAAA6B,KAAK,EAAE;AACR,0BAAI,CAAChC,UAAL,GAAkB,EAAlB;AACA,0BAAI,CAACA,UAAL,CAAgB,OAAhB,IAA2B,EAA3B;AACA,0BAAI,CAACA,UAAL,CAAgB,mBAAhB,IAAsC,QAAI,CAACG,MAAL,CAAY,mBAAZ,CAAtC,CAHQ,CAIR;AAED,iBAZH;AAeA,qBAAK1B,cAAL,CAAoB42C,6BAApB,CAAkDlwC,OAAlD,EAA2D,SAA3D,EAAsE1F,SAAtE,CACE,UAAAC,IAAI,EAAE;AACJ;AACA,0BAAI,CAACotC,WAAL,GAAmB,EAAnB;AACA,0BAAI,CAACA,WAAL,CAAiB,OAAjB,IAA4BptC,IAA5B;AACA,0BAAI,CAACotC,WAAL,CAAiB,mBAAjB,IAAuC,QAAI,CAAC3sC,MAAL,CAAY,mBAAZ,CAAvC;AACD,iBANH,EAMK,UAAA6B,KAAK,EAAE;AACR,0BAAI,CAAC8qC,WAAL,GAAmB,EAAnB;AACA,0BAAI,CAACA,WAAL,CAAiB,OAAjB,IAA4B,EAA5B;AACA,0BAAI,CAACA,WAAL,CAAiB,mBAAjB,IAAuC,QAAI,CAAC3sC,MAAL,CAAY,mBAAZ,CAAvC,CAHQ,CAIR;AAED,iBAZH,EAjBkD,CAgClD;;AACA,oBAAG,KAAKA,MAAL,CAAYwjB,KAAZ,IAAqB,IAAxB,EAA6B;AAC3B,uBAAKxjB,MAAL,CAAYwjB,KAAZ,CAAkBnjB,OAAlB,CAA0B,UAAAC,OAAO,EAAI;AACnC,wBAAGA,OAAO,CAACK,IAAR,IAAgBZ,SAAnB,EAA6B;AAC3B,0BAAGO,OAAO,CAACK,IAAR,IAAgB,WAAnB,EAA+B;AAC7BL,+BAAO,CAAC+0B,QAAR,CAAiBh1B,OAAjB,CAAyB,UAAA8gB,GAAG,EAAI;AAC9B,kCAAI,CAACg1B,cAAL,IAAuBh1B,GAAG,CAACvT,KAA3B;AACD,yBAFD;AAGD;AACF;AACF,mBARD;AASD;AACF,eA5CK,MA4CA,IAAG,KAAK5N,MAAL,CAAYoJ,qBAAZ,IAAqCrJ,SAAxC,EAAkD;AACtD,oBAAIyvB,MAAM,GAAG,KAAKxvB,MAAL,CAAYoJ,qBAAzB;AACA,qBAAK9K,cAAL,CAAoB42C,6BAApB,CAAkD1lB,MAAlD,EAA0D,QAA1D,EAAoElwB,SAApE,CACE,UAAAC,IAAI,EAAE;AACJ;AACA,0BAAI,CAACM,UAAL,GAAkB,EAAlB;AACA,0BAAI,CAACA,UAAL,CAAgB,OAAhB,IAA2BN,IAA3B;AACA,0BAAI,CAACM,UAAL,CAAgB,uBAAhB,IAA0C,QAAI,CAACG,MAAL,CAAY,uBAAZ,CAA1C;AACD,iBANH,EAMK,UAAA6B,KAAK,EAAE;AACR,0BAAI,CAAChC,UAAL,GAAkB,EAAlB;AACA,0BAAI,CAACA,UAAL,CAAgB,OAAhB,IAA2B,EAA3B;AACA,0BAAI,CAACA,UAAL,CAAgB,uBAAhB,IAA0C,QAAI,CAACG,MAAL,CAAY,uBAAZ,CAA1C,CAHQ,CAIR;AAED,iBAZH;AAeA,qBAAK1B,cAAL,CAAoB42C,6BAApB,CAAkD1lB,MAAlD,EAA0D,SAA1D,EAAqElwB,SAArE,CACE,UAAAC,IAAI,EAAE;AACJ;AACA,0BAAI,CAACotC,WAAL,GAAmB,EAAnB;AACA,0BAAI,CAACA,WAAL,CAAiB,OAAjB,IAA4BptC,IAA5B;AACA,0BAAI,CAACotC,WAAL,CAAiB,uBAAjB,IAA2C,QAAI,CAAC3sC,MAAL,CAAY,uBAAZ,CAA3C;AACD,iBANH,EAMK,UAAA6B,KAAK,EAAE;AACR,0BAAI,CAAC8qC,WAAL,GAAmB,EAAnB;AACA,0BAAI,CAACA,WAAL,CAAiB,OAAjB,IAA4B,EAA5B;AACA,0BAAI,CAACA,WAAL,CAAiB,uBAAjB,IAA2C,QAAI,CAAC3sC,MAAL,CAAY,uBAAZ,CAA3C,CAHQ,CAIR;AAED,iBAZH,EAjBsD,CAgCtD;;AACA,oBAAG,KAAKA,MAAL,CAAYwjB,KAAZ,IAAqB,IAAxB,EAA6B;AAC3B,uBAAKxjB,MAAL,CAAYwjB,KAAZ,CAAkBnjB,OAAlB,CAA0B,UAAAC,OAAO,EAAI;AACnC,wBAAGA,OAAO,CAACK,IAAR,IAAgBZ,SAAnB,EAA6B;AAC3B,0BAAGO,OAAO,CAACK,IAAR,IAAgB,WAAnB,EAA+B;AAC7BL,+BAAO,CAAC+0B,QAAR,CAAiBh1B,OAAjB,CAAyB,UAAA8gB,GAAG,EAAI;AAC9B,kCAAI,CAACg1B,cAAL,IAAuBh1B,GAAG,CAACvT,KAA3B;AACD,yBAFD;AAGD;AACF;AACF,mBARD;AASD;AACF;AACF,aA/LD,MA+LK;AACH,mBAAKuoC,cAAL,GAAsB,CAAtB;AACA,mBAAKt2C,UAAL,GAAkB,IAAlB;AACA,mBAAK8sC,WAAL,GAAmB,IAAnB;AACD;AACF;;;yCAEc1oC,G,EAAI;AACjB,iBAAKkyC,cAAL,GAAsBlyC,GAAtB;AACD;;;;;;;yBAtNUiyC,kB,EAAkB,+K;AAAA,O;;;cAAlBA,kB;AAAkB,uC;AAAA;AAAA;AAAA,S;AAAA,sF;AAAA,iB;AAAA,e;AAAA,gjB;AAAA;AAAA;AClB/B;;AACI;;AACI;;AACI;;AAEI;;AAAiB;;AAA4D;;AACjF;;AACJ;;AACJ;;AACA;;AACI;;AACI;;AACA;;AACJ;;AACJ;;AACJ;;;;AAVwC;;AAAA;;AAM2B;;AAAA;;AACzC;;AAAA;;;;;;;;;wEDMbA,kB,EAAkB;gBAL9B,uDAK8B;iBALpB;AACTj4C,oBAAQ,EAAE,gBADD;AAETC,uBAAW,EAAE,6BAFJ;AAGTC,qBAAS,EAAE,CAAC,6BAAD;AAHF,W;AAKoB,U;;;;;AAEpBi4C,kBAAQ,EAAE,CAAF;kBAAhB;AAAgB,WAAE","file":"main-es5.js","sourcesContent":["/*\n   Copyright 2021-2022  Istituto di Linguistica Computazionale \"A. Zampolli\", Consiglio Nazionale delle Ricerche, Pisa, Italy.\n \nThis file is part of EpiLexo.\n\nEpiLexo is free software: you can redistribute it and/or modify it under the terms of the GNU General Public License as published by the Free Software Foundation, either version 3 of the License, or (at your option) any later version.\n\nEpiLexo is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for more details.\n\nYou should have received a copy of the GNU General Public License along with EpiLexo. If not, see <https://www.gnu.org/licenses/>.\n*/\n\nimport { Component, OnInit } from '@angular/core';\n\n@Component({\n  selector: 'app-lexicon-panel',\n  templateUrl: './lexicon-panel.component.html',\n  styleUrls: ['./lexicon-panel.component.scss']\n})\nexport class LexiconPanelComponent implements OnInit {\n\n  constructor() { }\n\n  ngOnInit(): void {\n  }\n\n}\n","\n\n<div class=\"container-fluid\" >\n    <div class=\"row\" >\n        <div class=\"col-md-4\" >\n            <app-document-system-tree></app-document-system-tree>\n        </div>\n        <div class=\"col-md-8\" >\n            <app-text-detail></app-text-detail>\n        </div>\n    </div>\n</div>","/*\n   Copyright 2021-2022  Istituto di Linguistica Computazionale \"A. Zampolli\", Consiglio Nazionale delle Ricerche, Pisa, Italy.\n \nThis file is part of EpiLexo.\n\nEpiLexo is free software: you can redistribute it and/or modify it under the terms of the GNU General Public License as published by the Free Software Foundation, either version 3 of the License, or (at your option) any later version.\n\nEpiLexo is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for more details.\n\nYou should have received a copy of the GNU General Public License along with EpiLexo. If not, see <https://www.gnu.org/licenses/>.\n*/\n\nimport { Component, Input, OnInit, QueryList, SimpleChanges, ViewChildren } from '@angular/core';\nimport { FormArray, FormBuilder, FormControl, FormGroup } from '@angular/forms';\nimport { Subject, Subscription } from 'rxjs';\nimport { debounceTime } from 'rxjs/operators';\nimport { LexicalEntriesService } from 'src/app/services/lexical-entries/lexical-entries.service';\nimport { ToastrService } from 'ngx-toastr';\nimport { LilaService } from 'src/app/services/lila/lila.service';\nimport { NgSelectComponent } from '@ng-select/ng-select';\n\n@Component({\n  selector: 'app-same-as',\n  templateUrl: './same-as.component.html',\n  styleUrls: ['./same-as.component.scss']\n})\nexport class SameAsComponent implements OnInit {\n\n  @Input() sameAsData: any[] | any;\n\n  private subject: Subject<any> = new Subject();\n  private subject_input: Subject<any> = new Subject();\n  subscription: Subscription;\n  object: any;\n  searchResults=[];\n  filterLoading = false;\n\n  @ViewChildren('sameAs') sameAsList: QueryList<NgSelectComponent>;\n\n\n  memorySameAs = [];\n  isSense;\n  isForm;\n  isLexEntry;\n\n  sameAsForm = new FormGroup({\n    sameAsArray: new FormArray([this.createSameAsEntry()]),\n    isEtymon: new FormControl(null),\n    isCognate: new FormControl(null)\n  })\n\n  sameAsArray: FormArray;\n\n  constructor(private formBuilder: FormBuilder, \n              private lexicalService : LexicalEntriesService, \n              private toastr: ToastrService,\n              private lilaService: LilaService) {\n  }\n\n  ngOnInit() {\n    this.sameAsForm = this.formBuilder.group({\n      sameAsArray: this.formBuilder.array([]),\n      isEtymon: false,\n      isCognate: false,\n    })\n\n    this.subject.pipe(debounceTime(1000)).subscribe(\n      data => {\n        this.onSearchFilter(data)\n      }\n    )\n\n    this.subject_input.pipe(debounceTime(1000)).subscribe(\n      data => {        \n        this.onChangeSameAsByInput(data['value'], data['i'])\n      }\n    )\n  \n    this.triggerTooltip();\n  }\n\n  ngOnChanges(changes: SimpleChanges) {\n    setTimeout(() => {\n      if(changes.sameAsData.currentValue != undefined){\n        this.object = changes.sameAsData.currentValue;\n        this.sameAsArray = this.sameAsForm.get('sameAsArray') as FormArray;\n        this.sameAsArray.clear();\n        \n        this.memorySameAs = [];\n        console.log(this.object)\n  \n        this.object.array.forEach(element => {\n          this.addSameAsEntry(element.lexicalEntity, element.inferred)\n          this.memorySameAs.push(element.lexicalEntity);\n        });\n\n        //console.log(this.memorySameAs)\n\n        let isCognate = this.object.type.find(element => element == 'Cognate');\n        if(isCognate){\n            this.sameAsForm.get('isCognate').setValue(true, {emitEvent: false})\n        }else{\n            this.sameAsForm.get('isCognate').setValue(false, {emitEvent: false})\n        }\n\n        let isEtymon = this.object.type.find(element => element == 'Etymon');\n        if(isEtymon){\n            this.sameAsForm.get('isEtymon').setValue(true, {emitEvent: false})\n        }else{\n            this.sameAsForm.get('isEtymon').setValue(false, {emitEvent: false})\n        }\n\n        if(this.object.lexicalEntryInstanceName != undefined){\n          this.isLexEntry = true;\n          this.isForm = false;\n          this.isSense = false;\n        }else if(this.object.formInstanceName != undefined){\n          this.isLexEntry = false;\n          this.isForm = true;\n          this.isSense = false;\n        }else if(this.object.senseInstanceName != undefined){\n          this.isLexEntry = false;\n          this.isForm = false;\n          this.isSense = true;\n        }\n        \n      }else {\n        this.object = null;\n      }\n    }, 10);\n  }\n\n  onChangeSameAsByInput(value, index){\n    if(value.trim() != ''){\n      var selectedValues = value;\n      var lexicalElementId = '';\n      if (this.object.lexicalEntryInstanceName != undefined) {\n        lexicalElementId = this.object.lexicalEntryInstanceName;\n      } else if (this.object.formInstanceName != undefined) {\n        lexicalElementId = this.object.formInstanceName;\n      } else if (this.object.senseInstanceName != undefined) {\n        lexicalElementId = this.object.senseInstanceName;\n      }\n  \n      //console.log(this.memorySameAs[index])\n      if (this.memorySameAs[index] == \"\") {\n        let parameters = {\n          type: \"reference\",\n          relation: \"sameAs\",\n          value: selectedValues\n        }\n        //console.log(parameters)\n        this.lexicalService.updateGenericRelation(lexicalElementId, parameters).subscribe(\n          data => {\n            //console.log(data)\n          }, error => {\n            //console.log(error)\n            this.toastr.error(error.error, 'Error', {\n              timeOut: 5000,\n            });\n          }\n        )\n  \n        this.memorySameAs[index] = selectedValues;\n      } else {\n        let oldValue = this.memorySameAs[index];\n        let parameters = {\n          type: \"reference\",\n          relation: \"sameAs\",\n          value: selectedValues,\n          currentValue: oldValue\n        }\n        //console.log(parameters)\n        this.lexicalService.updateGenericRelation(lexicalElementId, parameters).subscribe(\n          data => {\n            //console.log(data)\n          }, error => {\n            //console.log(error)\n            this.toastr.error(error.error, 'Error', {\n              timeOut: 5000,\n            });\n          }\n        )\n      }\n    }\n    \n  }\n\n  onChangeSameAs(sameAs, index){\n    console.log(sameAs.selectedItems)\n    if(sameAs.selectedItems.length != 0){\n      var selectedValues = sameAs.selectedItems[0].value.lexicalEntry;\n      let lexId = this.object.lexicalEntryInstanceName;\n    \n      let parameters = {\n        type : \"reference\",\n        relation : \"sameAs\",\n        value : selectedValues\n      }\n      console.log(parameters)\n      this.lexicalService.updateGenericRelation(lexId, parameters).subscribe(\n        data=>{\n          console.log(data)\n        }, error=>{\n          console.log(error)\n        }\n      )\n    }\n    \n    \n  }\n\n  onSearchFilter(data){\n    this.filterLoading = true;\n    this.searchResults = [];\n\n    let value = data.value;\n    let index = data.index;\n    console.log(data)\n    this.sameAsArray = this.sameAsForm.get('sameAsArray') as FormArray;\n    let isLila = this.sameAsArray.at(index).get('lila').value;\n\n    if(!isLila){\n      if(this.object.lexicalEntryInstanceName != undefined){\n        let parameters = {\n          text: data,\n          searchMode: \"startsWith\",\n          type: \"\",\n          pos: \"\",\n          formType: \"entry\",\n          author: \"\",\n          lang: \"\",\n          status: \"\",\n          offset: 0,\n          limit: 500\n        }\n        console.log(data.length)\n          this.lexicalService.getLexicalEntriesList(parameters).subscribe(\n            data=>{\n              console.log(data)\n              this.searchResults = data['list']\n              console.log(this.searchResults)\n              this.filterLoading = false;\n            },error=>{\n              console.log(error)\n              this.filterLoading = false;\n            }\n          )\n        \n      }else if(this.object.formInstanceName != undefined){\n          let lexId = this.object.parentInstanceName;\n          let parameters = {\n            form: \"pesca\",\n            formType: \"lemma\",\n            lexicalEntry: lexId,\n            senseUris: \"\",\n            extendTo: \"\",\n            extensionDegree: 3\n          \n          }\n          console.log(parameters);\n          this.lexicalService.getFormList(parameters).subscribe(\n            data=>{\n              console.log(data)\n              this.searchResults = data['list']\n              this.filterLoading = false;\n            },error=>{\n              console.log(error)\n              this.filterLoading = false;\n            }\n          )\n        \n        \n      }else if(this.object.senseInstanceName != undefined){\n          let parameters = {\n            text: data,\n            searchMode: \"startsWith\",\n            type: \"\",\n            pos: \"\",\n            formType: \"entry\",\n            author: \"\",\n            lang: \"\",\n            status: \"\",\n            offset: 0,\n            limit: 500\n          }\n    \n          this.lexicalService.getLexicalSensesList(parameters).subscribe(\n            data=>{\n              this.searchResults = data\n              this.filterLoading = false;\n            },error=>{\n              console.log(error)\n              this.filterLoading = false;\n            }\n          )\n      }\n    }else if(isLila){\n      this.searchResults = [];\n      if(this.sameAsForm.get('isEtymon').value){\n          this.lilaService.queryEtymon(value).subscribe(\n              data=>{\n                  console.log(data)\n                  if(data.list.length > 0){\n                      data.list.forEach(element => {\n                          this.searchResults.push(element)\n                      });\n                  }\n              },\n              error=>{\n                  console.log(error)\n              }\n          )\n      }\n\n\n      if(this.sameAsForm.get('isCognate').value){\n          this.lilaService.queryCognate(value).subscribe(\n              data=>{\n                  console.log(data);\n                  if(data.list.length > 0){\n\n                    \n                    const map = data.list.map(element => ({label: element[0].value, pos : element[1].value}))\n\n                    /* map.forEach(element => {\n                      this.searchResults.push(element)\n                    }); */\n\n                    this.searchResults = map;\n\n                  }\n\n              },\n              error=>{\n                  console.log(error)\n              }\n          )\n      }\n    }\n    \n\n    console.log(data)\n  \n  }\n\n  triggerLilaSearch(index){\n    const element = Array.from(this.sameAsList)[index];\n    setTimeout(() => {\n      \n      if(element!=undefined){\n        element.filter(this.object.label)\n        this.onSearchFilter({value: this.object.label, index: index})\n      }\n      \n\n    }, 250);\n  }\n\n  deleteData(){\n    this.searchResults = [];\n  }\n\n  triggerSameAsInput(evt, i){\n    if(evt.target != undefined){\n      let value = evt.target.value;\n      this.subject_input.next({value, i})\n    }\n  }\n\n  triggerSameAs(evt,i){\n    console.log(evt.target.value)\n    if(evt.target != undefined){\n      this.subject.next({value: evt.target.value, index: i})\n    }\n  }\n\n  triggerTooltip() {\n    setTimeout(() => {\n      //@ts-ignore\n      $('.same-as-tooltip').tooltip({\n        trigger: 'hover'\n      });\n    }, 500);\n  }\n\n  createSameAsEntry(e?, i?) {\n    if(e == undefined){\n      return this.formBuilder.group({\n        entity: null,\n        inferred : false,\n        lila: false\n      })\n    }else{\n      return this.formBuilder.group({\n        entity: e,\n        inferred : i,\n        lila: false\n      })\n    }\n    \n  }\n\n  addSameAsEntry(e?, i?) {\n\n\n    this.sameAsArray = this.sameAsForm.get('sameAsArray') as FormArray;\n    if(e == undefined){\n      this.sameAsArray.push(this.createSameAsEntry());\n    }else{\n      this.sameAsArray.push(this.createSameAsEntry(e, i));\n    }\n    \n    this.triggerTooltip();\n\n    setTimeout(() => {\n      const index = this.sameAsList.length-1;\n      const element = this.sameAsList.last;\n      element.filter(this.object.label)\n      this.onSearchFilter({value: this.object.label, index: index})\n    }, 250);\n  }\n\n  removeElement(index) {\n    this.sameAsArray = this.sameAsForm.get('sameAsArray') as FormArray;\n    const lexical_entity = this.sameAsArray.at(index).get('entity').value;\n\n    if (this.object.lexicalEntryInstanceName != undefined) {\n\n      let lexId = this.object.lexicalEntryInstanceName;\n\n      let parameters = {\n        relation: 'sameAs',\n        value: lexical_entity\n      }\n\n      \n\n      this.lexicalService.deleteLinguisticRelation(lexId, parameters).subscribe(\n        data => {\n          //console.log(data)\n          this.lexicalService.updateLexCard(this.object)\n        }, error => {\n          //console.log(error)\n          this.toastr.error(error.error, 'Error', {\n            timeOut: 5000,\n          });\n        }\n      )\n    } else if (this.object.formInstanceName != undefined) {\n      let formId = this.object.formInstanceName;\n\n      let parameters = {\n        relation: 'sameAs',\n        value: lexical_entity\n      }\n\n      \n\n      this.lexicalService.deleteLinguisticRelation(formId, parameters).subscribe(\n        data => {\n          //console.log(data)\n          this.lexicalService.updateLexCard(this.object)\n        }, error => {\n          //console.log(error)\n        }\n      )\n\n    } else if (this.object.senseInstanceName != undefined) {\n      let senseId = this.object.senseInstanceName;\n\n      let parameters = {\n        type: 'morphology',\n        relation: 'sameAs',\n        value: lexical_entity\n      }\n\n      //console.log(parameters)\n\n      this.lexicalService.deleteLinguisticRelation(senseId, parameters).subscribe(\n        data => {\n          //console.log(data)\n          this.lexicalService.updateLexCard(this.object)\n        }, error => {\n          //console.log(error)\n        }\n      )\n    }\n    this.memorySameAs.splice(index, 1)\n    this.sameAsArray.removeAt(index);\n  }\n\n}\n","\n\n<form [formGroup]=\"sameAsForm\">\n    <div class=\"form-group row mt-3\">\n        <div class=\"input-group col-sm-12\">\n            <div class=\"card\">\n                <span class=\"text-id\">SAME AS</span>\n                <a (click)=\"addSameAsEntry()\" class=\"pointer\"><span class=\"collapse-icon\"><i\n                            class=\"fa fa-plus-square\"></i></span></a>\n                <div class=\"card-body\">\n                    <div formArrayName=\"sameAsArray\" class=\"mt-3\">\n                        <div *ngFor=\"let sameAs of sameAsForm.get('sameAsArray')['controls']; let i = index\">\n                            <div [formGroupName]=\"i\">\n                                <div class=\"d-flex\">\n                                    <div class=\"form-group row ml-2  mr-2 w-100\" *ngIf=\"{switch : false}; let variable\">\n                                        <div class=\"input-group\" *ngIf=\"{boolean : sameAs.get('inferred').value}; let inf\">\n                                            <ng-select [isOpen]=\"dropdown\" #sameAs formControlName=\"entity\" name=\"entity\"\n                                                (change)=\"onChangeSameAs(sameAs, i)\" (focus)=\"deleteData()\"\n                                                (keyup)=\"triggerSameAs($event, i)\" formControlName=\"entity\" name=\"entity\"\n                                                bindValue=\"label\" class=\"resizeNgSelect\" [items]=\"searchResults\"\n                                                bindLabel=\"label\" placeholder=\"Search entity\" appendTo=\"body\"\n                                                *ngIf=\"!variable.switch\" [readonly]=\"inf.boolean\">\n                                                <!-- <ng-template ng-option-tmp let-item=\"item\" let-search=\"searchTerm\" *ngIf=\"!sameAsForm.get('isEtymon').value || !sameAsForm.get('isCognate').value\">\n                                           \n                                                    <div class=\"card-body p-0\">\n                                                        <h6 class=\"card-title m-0\" [ngOptionHighlight]=\"search\">{{item.label}}</h6>\n                                                        <small *ngFor=\"let sub of item.morphology\">\n                                                            <span *ngIf=\"sub.trait == 'case' || sub.trait == 'gender' || sub.trait == 'number' || sub.trait == 'partOfSpeech'\">\n                                                                {{sub.trait}} : {{sub.value}} <br>\n                                                            </span>\n                                                        </small>\n                                                        <small class=\"card-text\">\n                                                           \n                                        \n                                                        </small>\n                                                       \n                                                    </div>\n                                        \n                                                </ng-template>\n\n                                                <ng-template ng-option-tmp let-item=\"item\" let-search=\"searchTerm\" *ngIf=\"sameAsForm.get('isEtymon').value || sameAsForm.get('isCognate').value\">\n                                           \n                                                    <div class=\"card-body p-0\">\n                                                        <h6 class=\"card-title m-0\" [ngOptionHighlight]=\"search\">{{item.label}}</h6>\n                                                        <small >\n                                                            {{item.pos}}\n                                                        </small>\n                                                        <small class=\"card-text\">\n                                                           \n                                        \n                                                        </small>\n                                                       \n                                                    </div>\n                                        \n                                                </ng-template> -->\n                                            </ng-select>\n                                            \n                                            <input formControlName=\"entity\" name=\"entity\" type=\"text\"\n                                                class=\"form-control \" (keyup)=\"triggerSameAsInput($event, i)\"\n                                                placeholder=\"Insert URI\"  *ngIf=\"variable.switch\">\n\n                                            <div class=\"input-group-append\" *ngIf=\"!inf.boolean\">\n                                                <div class=\"input-group-append ml-2 form-check\">\n                                                    <input class=\"form-check-input same-as-tooltip\" type=\"checkbox\"\n                                                        (change)=\"variable.switch=!variable.switch\"\n                                                        data-toggle=\"tooltip\" data-placement=\"bottom\"\n                                                        data-trigger=\"hover\"\n                                                        title=\"Clicca per inserire un URI manualmente\">\n                                                    <label class=\"form-check-label\" for=\"extCheck\"></label>\n                                                </div>\n                                                \n                                                <div class=\"input-group-append ml-2\">\n                                                    <div class=\"btn-group-toggle\" data-toggle=\"buttons\" placement=\"top\" ngbTooltip=\"Enable LiLa endpoint\" title=\"Enable LiLa endpoint\" >\n                                                        <label class=\"btn btn-secondary\" >\n                                                          <input (click)=\"triggerLilaSearch(i)\" type=\"checkbox\" autocomplete=\"off\" autocomplete=\"off\" formControlName=\"lila\" name=\"lila\" style=\"border-radius: .3rem;\" *ngIf=\"sameAsForm.get('isCognate').value || sameAsForm.get('isEtymon').value\"> \n                                                            <img src=\"../../../../../../../assets/images/graphql.png\" alt=\"Avatar\" class=\"image\" style=\"height: 20px;\">\n                                                        </label>\n                                                    </div>\n                                                </div>\n                                                <div class=\"input-group-append ml-2\">\n                                                    <button (click)=\"removeElement(i)\" class=\"btn btn-danger\"\n                                                        type=\"button\"><i class=\"fa fa-trash-alt\"></i></button>\n                                                </div>\n                                            </div>\n\n                                           \n                                        </div>\n                                    </div>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n</form>","/*\n   Copyright 2021-2022  Istituto di Linguistica Computazionale \"A. Zampolli\", Consiglio Nazionale delle Ricerche, Pisa, Italy.\n \nThis file is part of EpiLexo.\n\nEpiLexo is free software: you can redistribute it and/or modify it under the terms of the GNU General Public License as published by the Free Software Foundation, either version 3 of the License, or (at your option) any later version.\n\nEpiLexo is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for more details.\n\nYou should have received a copy of the GNU General Public License along with EpiLexo. If not, see <https://www.gnu.org/licenses/>.\n*/\n\nimport { ApplicationRef, Component, ElementRef, Input, OnInit, Renderer2, ViewChild } from '@angular/core';\nimport { TreeNode, TreeModel, TREE_ACTIONS, KEYS, IActionMapping, ITreeOptions, ITreeState } from '@circlon/angular-tree-component';\nimport { formTypeEnum, LexicalEntryRequest, searchModeEnum, typeEnum } from './interfaces/lexical-entry-interface'\nimport { LexicalEntriesService } from 'src/app/services/lexical-entries/lexical-entries.service';\nimport { FormControl, FormGroup } from '@angular/forms';\nimport { ContextMenuComponent } from 'ngx-contextmenu';\n\nimport * as _ from 'underscore';\ndeclare var $: JQueryStatic;\n\n\nimport { debounceTime } from 'rxjs/operators';\nimport { ExpanderService } from 'src/app/services/expander/expander.service';\nimport { Subject } from 'rxjs';\nimport { ToastrService } from 'ngx-toastr';\n\n\nconst actionMapping: IActionMapping = {\n  mouse: {\n\n    dblClick: (tree, node, $event) => {\n      if (node.hasChildren) {\n        TREE_ACTIONS.TOGGLE_EXPANDED(tree, node, $event);\n      }\n    },\n    click: (tree, node, $event) => {\n\n      TREE_ACTIONS.TOGGLE_ACTIVE(tree, node, $event);\n      TREE_ACTIONS.TOGGLE_EXPANDED(tree, node, $event);\n    },\n    contextMenu: (tree, node, $event) => {\n\n      TREE_ACTIONS.TOGGLE_ACTIVE(tree, node, $event);\n      TREE_ACTIONS.TOGGLE_EXPANDED(tree, node, $event);\n    },\n  }\n};\n\n@Component({\n  selector: 'app-lexical-entry-tree',\n  templateUrl: './lexical-entry-tree.component.html',\n  styleUrls: ['./lexical-entry-tree.component.scss']\n})\n\nexport class LexicalEntryTreeComponent implements OnInit {\n  state!: ITreeState;\n  show = false;\n  modalShow = false;\n  flagAuthor = false;\n  searchIconSpinner = false;\n  viewPort: any;\n  titlePopover = \"Search examples\"\n  popoverWildcards = \"<span><b>Multiple character wildcard search:</b></span>&nbsp;<span><i>te*</i></span><br><span><b>Single character wildcard search:</b></span>&nbsp;<span><i>te?t</i></span><br> <b>Fuzzy search:</b></span>&nbsp;<span><i>test~</i></span><br><b>Weighted fuzzy search:</b></span>&nbsp;<span><i>test~0.8</i></span>\"\n  labelView = true;\n  idView = false;\n  offset = 0;\n  limit = 500;\n  interval;\n\n  @ViewChild(ContextMenuComponent) public basicMenu: ContextMenuComponent;\n  /* sub : Subscription; */\n\n  counter = 0;\n\n  @Input() triggerShowTree: any;\n  @ViewChild('lexicalEntry') lexicalEntryTree: any;\n\n  nodes;\n  languages;\n  types;\n  authors;\n  partOfSpeech;\n  selectedNodeId;\n  status = [{ \"label\": \"false\", \"count\": 0 }, { \"label\": \"true\", \"count\": 0 }];\n  parameters: LexicalEntryRequest = {\n    text: \"\",\n    searchMode: searchModeEnum.startsWith,\n    type: \"\",\n    pos: \"\",\n    formType: \"entry\",\n    author: \"\",\n    lang: \"\",\n    status: \"\",\n    offset: this.offset,\n    limit: this.limit\n  }\n\n\n  options: ITreeOptions = {\n    useVirtualScroll: true,\n    scrollOnActivate: false,\n    nodeHeight: 13,\n    actionMapping,\n    getChildren: this.getChildren.bind(this)\n  };\n\n\n  filterForm = new FormGroup({\n    text: new FormControl(''),\n    searchMode: new FormControl('startsWith'),\n    type: new FormControl(''),\n    pos: new FormControl(''),\n    formType: new FormControl('entry'),\n    author: new FormControl(''),\n    lang: new FormControl(''),\n    status: new FormControl('')\n  });\n\n  initialValues = this.filterForm.value;\n\n  copySubject: Subject<string> = new Subject();\n\n  constructor(private expander: ExpanderService, private renderer: Renderer2, private element: ElementRef, private lexicalService: LexicalEntriesService, private toastr: ToastrService) {\n\n    var refreshTooltip = setInterval((val) => {\n      //console.log('called'); \n      //@ts-ignore\n      $('.lexical-tooltip').tooltip('disable');\n      //@ts-ignore\n      $('.lexical-tooltip').tooltip('enable');\n      //@ts-ignore\n      $('.note-tooltip').tooltip('disable');\n      //@ts-ignore\n      $('.note-tooltip').tooltip('enable');\n    }, 2000)\n  }\n\n  ngOnInit(): void {\n\n    this.viewPort = this.element.nativeElement.querySelector('tree-viewport');\n    this.renderer.addClass(this.viewPort, 'search-results');\n\n    this.onChanges();\n\n    this.lexicalService.deleteReq$.subscribe(\n      signal => {\n\n        ////console.log(\"richiesta eliminazione lexical entry\");\n        if (signal != null) {\n          this.lexEntryDeleteReq(signal);\n        }\n\n      }\n    )\n\n    this.lexicalService.addSubReq$.subscribe(\n      signal => {\n\n        if (signal != null) {\n          this.addSubElement(signal)\n        }\n      }\n    )\n\n    this.copySubject.pipe(debounceTime(500)).subscribe(v => {\n      let selBox = document.createElement('textarea');\n      selBox.style.position = 'fixed';\n      selBox.style.left = '0';\n      selBox.style.top = '0';\n      selBox.style.opacity = '0';\n      selBox.value = v;\n      document.body.appendChild(selBox);\n      selBox.focus();\n      selBox.select();\n      document.execCommand('copy');\n      document.body.removeChild(selBox);\n\n      this.toastr.info('URI copied', 'Info', {\n        timeOut: 5000,\n      });\n    })\n\n    this.lexicalService.refreshFilter$.subscribe(\n      signal => {\n\n        if (signal != null) {\n\n          this.lexicalService.getLexicalEntriesList(this.parameters).subscribe(\n            data => {\n              this.counter = data['totalHits'];\n            },\n            error => {\n              //console.log(error)\n            }\n          );\n\n\n          this.lexicalService.getLanguages().subscribe(\n            data => {\n\n              this.languages = data;\n            }\n          );\n\n          this.lexicalService.getTypes().subscribe(\n            data => {\n              this.types = data;\n            }\n          );\n\n          this.lexicalService.getAuthors().subscribe(\n            data => {\n              this.authors = data;\n            }\n          );\n\n          this.lexicalService.getPos().subscribe(\n            data => {\n              this.partOfSpeech = data;\n            }\n          )\n\n          this.lexicalService.getStatus().subscribe(\n            data => {\n              this.status = data;\n            }\n          )\n\n\n        }\n      }\n    )\n\n    /* //console.log(this.parameters) */\n    this.lexicalService.getLexicalEntriesList(this.parameters).subscribe(\n      data => {\n        this.nodes = data['list'];\n        this.counter = data['totalHits'];\n      },\n      error => {\n        //console.log(error)\n      }\n    );\n\n    this.lexicalService.getLanguages().subscribe(\n      data => {\n        this.languages = data;\n      }\n    );\n\n    this.lexicalService.getTypes().subscribe(\n      data => {\n        this.types = data;\n      }\n    );\n\n    this.lexicalService.getAuthors().subscribe(\n      data => {\n        this.authors = data;\n      }\n    );\n\n    this.lexicalService.getPos().subscribe(\n      data => {\n        this.partOfSpeech = data;\n      }\n    )\n\n    this.lexicalService.getStatus().subscribe(\n      data => {\n        this.status = data;\n      }\n    )\n  }\n\n  onChanges() {\n    this.filterForm.valueChanges.pipe(debounceTime(500)).subscribe(searchParams => {\n      this.offset = 0;\n      this.lexicalEntriesFilter(searchParams);\n    })\n  }\n\n  addSubElement(signal?) {\n\n    setTimeout(() => {\n      let instanceName;\n      let lex = signal.lex;\n      let data = signal.data;\n      console.log(lex)\n      console.log(data)\n      switch (lex.request) {\n        case 'form': instanceName = 'formInstanceName'; break;\n        case 'sense': instanceName = 'senseInstanceName'; break;\n        case 'etymology': instanceName = 'etymologyInstanceName'; break;\n        case 'subterm': instanceName = 'lexicalEntryInstanceName'; break;\n        case 'constituent': instanceName = 'componentInstanceName'; break;\n      }\n      this.lexicalEntryTree.treeModel.getNodeBy(x => {\n        if (lex.lexicalEntryInstanceName != undefined) {\n          if (x.data.lexicalEntryInstanceName === lex.lexicalEntryInstanceName) {\n            if (x.data.children == undefined && !x.isExpanded) {\n              x.expand();\n              var that = this;\n              this.interval = setInterval((val) => {\n                if (x.data.children != undefined) {\n                  this.lexicalEntryTree.treeModel.getNodeBy(y => {\n                    if (y.data[instanceName] != undefined) {\n                      /* console.log(y.data[instanceName]) */\n                      if (y.data['creator'] == x.data.creator) {\n                        y.data['flagAuthor'] = false;\n                      } else {\n                        y.data['flagAuthor'] = true;\n                      }\n                      if (y.data[instanceName] === data[instanceName]) {\n                        y.setActiveAndVisible();\n                        clearInterval(that.interval)\n                        return true;\n                      } else {\n                        return false;\n                      }\n                    } else {\n                      return false;\n                    }\n                  })\n                }\n              }, 3000)\n\n            } else if (x.data.children != undefined) {\n              let checkExistence = x.data.children.filter(element => {\n                return element.label === lex.request\n              });\n              if (checkExistence.length == 1) {\n                x.data.children.filter(element => {\n                  if (element.label === lex.request) {\n                    if (lex.request == 'sense') {\n                      data['label'] = 'no definition'\n                      data['definition'] = 'no definition'\n                    } else if (lex.request == 'etymology') {\n                      data['label'] = \"Etymology of: \" + lex.parentNodeLabel;\n                      console.log(data['label'])\n                    } else if (lex.request == 'subterm') {\n                      data.label = data.label;\n                      data.children = null;\n                      data.hasChildren = false;\n                    } else if (lex.request == 'constituent') {\n                      data.label = '';\n                      data.children = null;\n                      data.hasChildren = false;\n                    } else {\n                      data['label'] = data[instanceName];\n                    }\n                    /* console.log(data['creator'] == x.data.creator);\n                    console.log(data['creator'], x.data.creator) */\n\n                    if (data['creator'] == x.data.creator) {\n                      data['flagAuthor'] = false;\n                    } else {\n                      data['flagAuthor'] = true;\n                    }\n\n                    element.count++;\n                    element.children.push(data);\n                    this.lexicalEntryTree.treeModel.update();\n                    this.lexicalEntryTree.treeModel.getNodeBy(y => {\n                      if (y.data.etymology == undefined && y.data.label === data['label'] && lex.request != 'subterm') {\n                        y.setActiveAndVisible();\n                      } else if (y.data.etymology != undefined && y.data.etymologyInstanceName === data['etymologyInstanceName'] && lex.request != 'subterm') {\n                        y.setActiveAndVisible();\n                      }\n                    })\n                    return true;\n                  } else {\n                    return false;\n                  }\n                });\n              } else if (checkExistence.length == 0) {\n                let node = {\n                  hasChildren: true,\n                  label: lex.request,\n                  children: [],\n                  count: 0\n                }\n                x.data.children.push(node);\n                x.data.children.sort(function (a, b) {\n                  var textA = a.label.toUpperCase();\n                  var textB = b.label.toUpperCase();\n                  return (textA < textB) ? -1 : (textA > textB) ? 1 : 0;\n                })\n                this.lexicalEntryTree.treeModel.update();\n                x.data.children.filter(element => {\n                  if (element.label === lex.request) {\n                    console.log(data['creator'] == x.data.creator);\n                    console.log(data['creator'], x.data.creator)\n                    if (data['creator'] == x.data.creator) {\n                      data['flagAuthor'] = false;\n                    } else {\n                      data['flagAuthor'] = true;\n                    }\n                    if (lex.request == 'sense') {\n                      data['definition'] = 'no definition'\n                    }else if (lex.request == 'subterm') {\n                      data.label = data.label;\n                      data.children = null;\n                      data.hasChildren = false;\n                    }else{\n                      data['label'] = data[instanceName];\n                    }\n                    \n\n                    if (lex.request == 'subterm') {\n                      data.children == null;\n                      data.hasChildren = false;\n                      data.label = data.label;\n                    }\n\n                    if (lex.request == 'constituent') {\n                      data.children == null;\n                      data.label = '';\n                    }\n\n                    element.count++;\n                    element.children.push(data);\n                    this.lexicalEntryTree.treeModel.update();\n                    this.lexicalEntryTree.treeModel.getNodeBy(y => {\n                      if (y.data.label === data['label']  && lex.request != 'subterm') { /* && lex.request != 'subterm' */\n                        y.setActiveAndVisible();\n                      }\n                    })\n                    return true;\n                  } else {\n                    return false;\n                  }\n                });\n              }\n            } else {\n              return false;\n            }\n            return true;\n          } else {\n            return false;\n          }\n        } else {\n          return false;\n        }\n      })\n    }, 300);\n  }\n\n  lexEntryDeleteReq(signal?) {\n\n\n    setTimeout(() => {\n\n      this.lexicalEntryTree.treeModel.getNodeBy(x => {\n        if (signal.lexicalEntryInstanceName != undefined) {\n          if (x.data.lexicalEntryInstanceName === signal.lexicalEntryInstanceName) {\n\n            x.parent.data.children.splice(x.parent.data.children.indexOf(x.data), 1);\n\n            let countSubterm = x.parent.data.count;\n            if (countSubterm != 0) {\n              x.parent.data.count--;\n              countSubterm--;\n            }\n\n            //this.lexicalEntryTree.treeModel.update();\n            if (this.nodes.length == 0) {\n              this.lexicalEntriesFilter(this.parameters);\n            }\n\n\n\n            if (countSubterm == 0) {\n              x.parent.parent.data.children.splice(x.parent.parent.data.children.indexOf(x.parent.data), 1)\n            }\n            console.log(x.parent)\n\n            this.lexicalEntryTree.treeModel.update()\n\n            return true;\n          } else {\n            return false;\n          }\n        } else if (signal.formInstanceName != undefined) {\n          if (x.data.formInstanceName === signal.formInstanceName) {\n\n            x.parent.data.children.splice(x.parent.data.children.indexOf(x.data), 1);\n            let countForm = x.parent.data.count;\n            if (countForm != 0) {\n              x.parent.data.count--;\n              countForm--;\n            }\n\n            if (countForm == 0) {\n              x.parent.parent.data.children.splice(x.parent.parent.data.children.indexOf(x.parent.data), 1)\n            }\n            console.log(x.parent)\n\n            this.lexicalEntryTree.treeModel.update()\n\n            return true;\n          } else {\n            return false;\n          }\n        } else if (signal.senseInstanceName != undefined) {\n          if (x.data.senseInstanceName === signal.senseInstanceName) {\n\n            x.parent.data.children.splice(x.parent.data.children.indexOf(x.data), 1);\n            let countSense = x.parent.data.count;\n            if (countSense != 0) {\n              x.parent.data.count--;\n              countSense--;\n            }\n\n            if (countSense == 0) {\n              x.parent.parent.data.children.splice(x.parent.parent.data.children.indexOf(x.parent.data), 1)\n            }\n            console.log(x.parent)\n\n            this.lexicalEntryTree.treeModel.update()\n\n            return true;\n          } else {\n            return false;\n          }\n        } else if (signal.etymology != undefined) {\n          if (x.data.etymologyInstanceName === signal.etymology.etymologyInstanceName) {\n            x.parent.data.children.splice(x.parent.data.children.indexOf(x.data), 1);\n            let countSense = x.parent.data.count;\n            if (countSense != 0) {\n              x.parent.data.count--;\n              countSense--;\n            }\n\n            if (countSense == 0) {\n              x.parent.parent.data.children.splice(x.parent.parent.data.children.indexOf(x.parent.data), 1)\n            }\n            console.log(x.parent)\n\n            this.lexicalEntryTree.treeModel.update()\n\n            return true;\n          } else {\n            return false;\n          }\n        } else if (signal.componentInstanceName != undefined) {\n          if (x.data.componentInstanceName === signal.componentInstanceName) {\n            x.parent.data.children.splice(x.parent.data.children.indexOf(x.data), 1);\n            let countSense = x.parent.data.count;\n            if (countSense != 0) {\n              x.parent.data.count--;\n              countSense--;\n            }\n\n            if (countSense == 0) {\n              x.parent.parent.data.children.splice(x.parent.parent.data.children.indexOf(x.parent.data), 1)\n            }\n            console.log(x.parent)\n\n            this.lexicalEntryTree.treeModel.update()\n\n            return true;\n          } else {\n            return false;\n          }\n        } else if(signal.subtermInstanceName != undefined){\n          let parent = signal.parentNodeInstanceName;\n          if(x.data.lexicalEntryInstanceName == signal.parentNodeInstanceName ){\n            console.log(x)\n            let children = x.data.children;\n\n            if(children.length >= 1){\n              Array.from(children).forEach((y : any) => {\n                if(y.lexicalEntryInstanceName == signal.subtermInstanceName){\n                \n                  console.log(y, x)\n\n                  x.data.children.splice(x.data.children.indexOf(y), 1);\n\n                  let countSubterm = x.data.count;\n                  if (countSubterm != 0) {\n                    x.data.count--;\n                    countSubterm--;\n                  }\n\n                  if (this.nodes.length == 0) {\n                    this.lexicalEntriesFilter(this.parameters);\n                  }\n      \n      \n      \n                  if (countSubterm == 0) {\n                    x.parent.data.children.splice(x.parent.data.children.indexOf(x.data), 1)\n                  }\n\n                  this.lexicalEntryTree.treeModel.update()\n                  return true\n                  \n                }else{\n                  return false\n                }\n              })\n            }\n          }\n        }else {\n          return false;\n        }\n        return false;\n      })\n\n    }, 300);\n  }\n\n  lexicalEntriesFilter(newPar) {\n\n    setTimeout(() => {\n      const viewPort_prova = this.element.nativeElement.querySelector('tree-viewport') as HTMLElement;\n      viewPort_prova.scrollTop = 0\n    }, 300);\n\n    this.searchIconSpinner = true;\n    let parameters = newPar;\n    parameters['offset'] = this.offset;\n    parameters['limit'] = this.limit;\n    console.log(parameters)\n    this.lexicalService.getLexicalEntriesList(newPar).subscribe(\n      data => {\n        console.log(data)\n        if (data['list'].length > 0) {\n          this.show = false;\n        } else {\n          this.show = true;\n        }\n        this.nodes = data['list'];\n        this.counter = data['totalHits'];\n        this.lexicalEntryTree.treeModel.update();\n        this.updateTreeView();\n        this.searchIconSpinner = false;\n      },\n      error => {\n\n      }\n    )\n  }\n\n  getParameters() {\n    return this.initialValues;\n  }\n\n  ngAfterViewInit(): void {\n    //@ts-ignore\n    $('[data-toggle=\"popover\"]').popover({\n      html: true,\n      title: this.titlePopover,\n      content: this.popoverWildcards\n    });\n  }\n\n  resetFields() {\n    this.initialValues.text = '';\n    this.offset = 0;\n    this.filterForm.reset(this.initialValues, { emitEvent: false });\n    setTimeout(() => {\n      //this.filterForm.get('text').setValue('', {eventEmit : false});\n      this.lexicalEntriesFilter(this.parameters);\n      this.lexicalEntryTree.treeModel.update();\n      //this.updateTreeView();\n      /* this.lexicalService.sendToCoreTab(null);\n      this.lexicalService.sendToRightTab(null); */\n    }, 500);\n\n  }\n\n  updateTreeView() {\n\n    setTimeout(() => {\n      this.lexicalEntryTree.sizeChanged();\n      //@ts-ignore\n      $('.lexical-tooltip').tooltip();\n    }, 1000);\n  }\n\n  onEvent = ($event: any) => {\n\n    console.log($event)\n    setTimeout(() => {\n      //@ts-ignore\n      $('.lexical-tooltip').tooltip();\n    }, 2000);\n\n    if ($event.eventName == 'activate' && $event.node.data.lexicalEntry != undefined\n      && $event.node.data.form == undefined\n      && $event.node.data.sense == undefined\n      && $event.node.data.etymology == undefined\n      && $event.node.data.lexicalEntryInstanceName != this.selectedNodeId) {\n      //this.lexicalService.sendToCoreTab($event.node.data);\n      let idLexicalEntry = $event.node.data.lexicalEntryInstanceName;\n      this.lexicalService.getLexEntryData(idLexicalEntry).subscribe(\n        data => {\n\n          console.log(data);\n          this.selectedNodeId = $event.node.data.lexicalEntryInstanceName;\n          this.lexicalService.sendToCoreTab(data);\n          this.lexicalService.sendToRightTab(data);\n          this.lexicalService.sendToEtymologyTab(null);\n          this.lexicalService.updateLexCard({ lastUpdate: data['lastUpdate'], creationDate: data['creationDate'] });\n\n          this.lexicalService.sendToAttestationPanel(null);\n          this.lexicalService.triggerAttestationPanel(false);\n\n\n          /* if(this.expander.isEpigraphyTabExpanded() && !this.expander.isEditTabExpanded()){\n            this.expander.expandCollapseEdit(false);\n            this.expander.expandCollapseEpigraphy(false);\n          }else if(!this.expander.isEpigraphyTabExpanded() && !this.expander.isEditTabExpanded()){\n            this.expander.expandCollapseEdit(true);\n          } */\n\n          if (!this.expander.isEditTabOpen() && !this.expander.isEpigraphyTabOpen()) {\n            if (!this.expander.isEditTabExpanded() && !this.expander.isEpigraphyTabExpanded()) {\n\n              this.expander.expandCollapseEdit(true);\n              this.expander.openCollapseEdit(true);\n            }\n          } else if (!this.expander.isEditTabOpen() && this.expander.isEpigraphyTabOpen()) {\n            if (!this.expander.isEditTabExpanded() && this.expander.isEpigraphyTabExpanded()) {\n              this.expander.expandCollapseEpigraphy(false);\n              this.expander.openCollapseEdit(true)\n            }\n          }\n\n\n          //@ts-ignore\n          $(\"#coreTabModal\").modal(\"show\");\n          $('.modal-backdrop').appendTo('.core-tab-body');\n          //@ts-ignore\n          $('#coreTabModal').modal({ backdrop: 'static', keyboard: false })\n          $('body').removeClass(\"modal-open\")\n          $('body').css(\"padding-right\", \"\");\n\n          if (data.note != undefined) {\n            if (data.note != \"\") {\n              this.lexicalService.triggerNotePanel(true);\n            } else {\n              this.lexicalService.triggerNotePanel(false);\n            }\n          }\n        },\n        error => {\n\n        }\n      )\n    } else if ($event.eventName == 'activate'\n      && $event.node.data.form != undefined\n      && $event.node.data.formInstanceName != this.selectedNodeId) {\n\n      let formId = $event.node.data.formInstanceName;\n\n      this.lexicalService.getFormData(formId, 'core').subscribe(\n        data => {\n          console.log(data)\n          this.selectedNodeId = $event.node.data.formInstanceName;\n          data['parentNodeLabel'] = $event.node.parent.parent.data.label;\n          data['parentNodeInstanceName'] = $event.node.parent.parent.data.lexicalEntryInstanceName;\n          this.lexicalService.sendToCoreTab(data)\n          this.lexicalService.sendToEtymologyTab(null);\n          this.lexicalService.sendToRightTab(data);\n          this.lexicalService.updateLexCard({ lastUpdate: data['lastUpdate'], creationDate: data['creationDate'] })\n          //@ts-ignore\n          $(\"#coreTabModal\").modal(\"show\");\n          $('.modal-backdrop').appendTo('.core-tab-body');\n          //@ts-ignore\n          $('#coreTabModal').modal({ backdrop: 'static', keyboard: false })\n          $('body').removeClass(\"modal-open\")\n          $('body').css(\"padding-right\", \"\");\n\n          this.lexicalService.sendToAttestationPanel(null);\n          this.lexicalService.triggerAttestationPanel(false);\n\n          if (!this.expander.isEditTabOpen() && !this.expander.isEpigraphyTabOpen()) {\n            if (!this.expander.isEditTabExpanded() && !this.expander.isEpigraphyTabExpanded()) {\n\n              this.expander.expandCollapseEdit(true);\n              this.expander.openCollapseEdit(true);\n            }\n          } else if (!this.expander.isEditTabOpen() && this.expander.isEpigraphyTabOpen()) {\n            if (!this.expander.isEditTabExpanded() && this.expander.isEpigraphyTabExpanded()) {\n              this.expander.expandCollapseEpigraphy(false);\n              this.expander.openCollapseEdit(true)\n            }\n          }\n\n          if (data.note != undefined) {\n            if (data.note != \"\") {\n              this.lexicalService.triggerNotePanel(true);\n            } else {\n              this.lexicalService.triggerNotePanel(false);\n            }\n          }\n        },\n        error => {\n          //console.log(error)\n        }\n      )\n\n    } else if ($event.eventName == 'activate'\n      && $event.node.data.sense != undefined\n      && $event.node.data.senseInstanceName != this.selectedNodeId) {\n\n      let senseId = $event.node.data.senseInstanceName;\n\n      this.lexicalService.getSenseData(senseId, 'core').subscribe(\n        data => {\n          this.selectedNodeId = $event.node.data.senseInstanceName;\n          data['parentNodeLabel'] = $event.node.parent.parent.data.label;\n          data['parentNodeInstanceName'] = $event.node.parent.parent.data.lexicalEntryInstanceName;\n          console.log(data)\n          this.lexicalService.sendToCoreTab(data)\n          this.lexicalService.sendToEtymologyTab(null);\n          this.lexicalService.sendToRightTab(data);\n          this.lexicalService.updateLexCard({ lastUpdate: data['lastUpdate'], creationDate: data['creationDate'] })\n\n          this.lexicalService.sendToAttestationPanel(null);\n          this.lexicalService.triggerAttestationPanel(false);\n          //@ts-ignore\n          $(\"#coreTabModal\").modal(\"show\");\n          $('.modal-backdrop').appendTo('.core-tab-body');\n          //@ts-ignore\n          $('#coreTabModal').modal({ backdrop: 'static', keyboard: false })\n          $('body').removeClass(\"modal-open\")\n          $('body').css(\"padding-right\", \"\");\n\n          if (!this.expander.isEditTabOpen() && !this.expander.isEpigraphyTabOpen()) {\n            if (!this.expander.isEditTabExpanded() && !this.expander.isEpigraphyTabExpanded()) {\n\n              this.expander.expandCollapseEdit(true);\n              this.expander.openCollapseEdit(true);\n            }\n          } else if (!this.expander.isEditTabOpen() && this.expander.isEpigraphyTabOpen()) {\n            if (!this.expander.isEditTabExpanded() && this.expander.isEpigraphyTabExpanded()) {\n              this.expander.expandCollapseEpigraphy(false);\n              this.expander.openCollapseEdit(true)\n            }\n          }\n\n          if (data.note != undefined) {\n            if (data.note != \"\") {\n              this.lexicalService.triggerNotePanel(true);\n            } else {\n              this.lexicalService.triggerNotePanel(false);\n            }\n          }\n        },\n        error => {\n          //console.log(error)\n        }\n      )\n    } else if ($event.eventName == 'activate'\n      && $event.node.data.etymology != undefined\n      && $event.node.data.etymologyInstanceName != this.selectedNodeId) {\n\n      let etymologyId = $event.node.data.etymologyInstanceName;\n\n      this.lexicalService.getEtymologyData(etymologyId).subscribe(\n        data => {\n          this.selectedNodeId = $event.node.data.etymologyInstanceName;\n          data['parentNodeLabel'] = $event.node.parent.parent.data.label;\n          data['parentNodeInstanceName'] = $event.node.parent.parent.data.lexicalEntryInstanceName;\n          console.log(data)\n\n          this.lexicalService.sendToAttestationPanel(null);\n          this.lexicalService.triggerAttestationPanel(false);\n\n          this.lexicalService.sendToCoreTab(null);\n          this.lexicalService.sendToEtymologyTab(data);\n          this.lexicalService.sendToRightTab(data);\n          this.lexicalService.updateLexCard({ lastUpdate: data['etymology']['lastUpdate'], creationDate: data['etymology']['creationDate'] })\n          //@ts-ignore\n          $(\"#etymologyTabModal\").modal(\"show\");\n          $('.modal-backdrop').appendTo('.etym-tab-body');\n          //@ts-ignore\n          $('#etymologyTabModal').modal({ backdrop: 'static', keyboard: false })\n          $('body').removeClass(\"modal-open\")\n          $('body').css(\"padding-right\", \"\");\n\n          if (!this.expander.isEditTabOpen() && !this.expander.isEpigraphyTabOpen()) {\n            if (!this.expander.isEditTabExpanded() && !this.expander.isEpigraphyTabExpanded()) {\n\n              this.expander.expandCollapseEdit(true);\n              this.expander.openCollapseEdit(true);\n            }\n          } else if (!this.expander.isEditTabOpen() && this.expander.isEpigraphyTabOpen()) {\n            if (!this.expander.isEditTabExpanded() && this.expander.isEpigraphyTabExpanded()) {\n              this.expander.expandCollapseEpigraphy(false);\n              this.expander.openCollapseEdit(true)\n            }\n          }\n\n          if (data.note != undefined) {\n            if (data.note != \"\") {\n              this.lexicalService.triggerNotePanel(true);\n            } else {\n              this.lexicalService.triggerNotePanel(false);\n            }\n          }\n        },\n        error => {\n          console.log(error)\n        }\n      )\n    } else if ($event.eventName == 'activate'\n      && $event.node.data.component != undefined\n      && $event.node.data.componentInstanceName != this.selectedNodeId) {\n\n      let compId = $event.node.data.componentInstanceName;\n      let parentInstanceLabel = $event.node.parent.parent.data.label;\n      let parentInstanceName = $event.node.parent.parent.data.lexicalEntryInstanceName;\n\n      this.lexicalService.getLexEntryData(parentInstanceName).subscribe(\n        data => {\n          this.selectedNodeId = $event.node.data.parentNodeInstanceName;\n          \n          console.log(data)\n          //this.lexicalService.sendToCoreTab(data);\n          //this.lexicalService.sendToEtymologyTab(data);\n          //this.lexicalService.sendToDecompTab(data);\n          this.lexicalService.sendToRightTab(data);\n          this.lexicalService.sendToAttestationPanel(null);\n          this.lexicalService.triggerAttestationPanel(false);\n          this.lexicalService.updateLexCard({ lastUpdate: data['lastUpdate'], creationDate: data['creationDate'] })\n          //@ts-ignore\n          $(\"#etymologyTabModal\").modal(\"show\");\n          $('.modal-backdrop').appendTo('.etym-tab-body');\n          //@ts-ignore\n          $('#etymologyTabModal').modal({ backdrop: 'static', keyboard: false })\n          $('body').removeClass(\"modal-open\")\n          $('body').css(\"padding-right\", \"\");\n\n          if (!this.expander.isEditTabOpen() && !this.expander.isEpigraphyTabOpen()) {\n            if (!this.expander.isEditTabExpanded() && !this.expander.isEpigraphyTabExpanded()) {\n\n              this.expander.expandCollapseEdit(true);\n              this.expander.openCollapseEdit(true);\n            }\n          } else if (!this.expander.isEditTabOpen() && this.expander.isEpigraphyTabOpen()) {\n            if (!this.expander.isEditTabExpanded() && this.expander.isEpigraphyTabExpanded()) {\n              this.expander.expandCollapseEpigraphy(false);\n              this.expander.openCollapseEdit(true)\n            }\n          }\n\n          if (data.note != undefined) {\n            if (data.note != \"\") {\n              this.lexicalService.triggerNotePanel(true);\n            } else {\n              this.lexicalService.triggerNotePanel(false);\n            }\n          }\n        },\n        error => {\n          console.log(error)\n        }\n      )\n    }\n\n  };\n\n  onKey = ($event: any) => {\n    var that = this;\n    setTimeout(function () {\n      var results = document.body.querySelectorAll('tree-node-collection > div')[1].children.length;\n      if (results == 0) {\n        that.show = true;\n      } else {\n        that.show = false;\n      }\n    }, 5);\n  };\n\n  onScrollDown(treeModel: TreeModel) {\n\n    this.offset += 500;\n    this.modalShow = true;\n\n    //@ts-ignore\n    $(\"#lazyLoadingModal\").modal(\"show\");\n    $('.modal-backdrop').appendTo('.tree-view');\n    $('body').removeClass(\"modal-open\")\n    $('body').css(\"padding-right\", \"\");\n\n    let parameters = this.filterForm.value;\n    parameters['offset'] = this.offset;\n    parameters['limit'] = this.limit;\n\n    this.lexicalService.getLexicalEntriesList(parameters).pipe(debounceTime(200)).subscribe(\n      data => {\n        //@ts-ignore\n        $('#lazyLoadingModal').modal('hide');\n        $('.modal-backdrop').remove();\n        for (var i = 0; i < data['list'].length; i++) {\n          this.nodes.push(data['list'][i]);\n        };\n        //this.counter = this.nodes.length;\n        this.lexicalEntryTree.treeModel.update();\n        this.updateTreeView();\n        this.modalShow = false;\n\n        setTimeout(() => {\n          //@ts-ignore\n          $('#lazyLoadingModal').modal('hide');\n          $('.modal-backdrop').remove();\n        }, 300);\n      },\n      error => {\n\n      }\n    )\n  }\n\n  getChildren(node: any) {\n\n    let newNodes: any;\n    if (node.data.lexicalEntryInstanceName != undefined) {\n      let instance = node.data.lexicalEntryInstanceName;\n      this.lexicalService.getLexEntryElements(instance).subscribe(\n        data => {\n          console.log(data['elements'])\n          data[\"elements\"] = data[\"elements\"].filter(function (obj) {\n            return obj.count != 0;\n          })\n          newNodes = data[\"elements\"].map((c) => Object.assign({}, c));\n\n          newNodes.forEach(element => {\n            setTimeout(() => {\n              try {\n                const someNode = this.lexicalEntryTree.treeModel.getNodeById(element.id);\n\n                someNode.expand();\n                //console.log(someNode)\n                var that = this;\n                /* this.interval = setInterval((val)=>{                \n                               \n                  \n                }, 2000) */\n              } catch (e) {\n                console.log(e)\n              }\n\n            }, 1000);\n\n          });\n\n        },\n        error => {\n\n        }\n      );\n    } else if (node.data.label == \"form\") {\n      let parentInstance = node.parent.data.lexicalEntryInstanceName;\n      this.lexicalService.getLexEntryForms(parentInstance).subscribe(\n        data => {\n          newNodes = data.map((c) => Object.assign({}, c));\n          for (var i = 0; i < newNodes.length; i++) {\n            if (newNodes[i].creator == node.parent.data.creator) {\n              newNodes[i]['flagAuthor'] = false\n            } else {\n              newNodes[i]['flagAuthor'] = true\n            }\n          }\n        }\n      )\n    } else if (node.data.label == \"sense\") {\n      let parentInstance = node.parent.data.lexicalEntryInstanceName;\n      this.lexicalService.getSensesList(parentInstance).subscribe(\n        data => {\n          /* //console.log(data) */\n          newNodes = data.map((c) => Object.assign({}, c));\n          for (var i = 0; i < newNodes.length; i++) {\n            newNodes[i]['hasChildren'] = null;\n            if (newNodes[i].creator == node.parent.data.creator) {\n              newNodes[i]['flagAuthor'] = false\n            } else {\n              newNodes[i]['flagAuthor'] = true\n            }\n          }\n        }, error => {\n          //console.log(error)\n        }\n      )\n    } else if (node.data.label == \"etymology\") {\n      let parentInstance = node.parent.data.lexicalEntryInstanceName;\n      this.lexicalService.getEtymologies(parentInstance).subscribe(\n        data => {\n          console.log(data)\n          newNodes = data.map((c) => Object.assign({}, c));\n          for (var i = 0; i < newNodes.length; i++) {\n            newNodes[i]['hasChildren'] = null;\n            if (newNodes[i].creator == node.parent.data.creator) {\n              newNodes[i]['flagAuthor'] = false\n            } else {\n              newNodes[i]['flagAuthor'] = true\n            }\n          }\n        }, error => {\n          //console.log(error)\n        }\n      )\n\n    } else if (node.data.label == \"constituent\") {\n      let parentInstance = node.parent.data.lexicalEntryInstanceName;\n      this.lexicalService.getConstituents(parentInstance).subscribe(\n        data => {\n          console.log(data)\n          newNodes = data.map((c) => Object.assign({}, c));\n          for (var i = 0; i < newNodes.length; i++) {\n            newNodes[i]['hasChildren'] = null;\n            /* if (newNodes[i].creator == node.parent.data.creator) {\n              newNodes[i]['flagAuthor'] = false\n            } else {\n              newNodes[i]['flagAuthor'] = true\n            } */\n          }\n        }, error => {\n          //console.log(error)\n        }\n      )\n\n    } else if (node.data.label == \"subterm\") {\n      let parentInstance = node.parent.data.lexicalEntryInstanceName;\n      this.lexicalService.getSubTerms(parentInstance).subscribe(\n        data => {\n          console.log(data)\n          newNodes = data.map((c) => Object.assign({}, c));\n          for (var i = 0; i < newNodes.length; i++) {\n            newNodes[i]['hasChildren'] = null;\n            /* if (newNodes[i].creator == node.parent.data.creator) {\n              newNodes[i]['flagAuthor'] = false\n            } else {\n              newNodes[i]['flagAuthor'] = true\n            } */\n          }\n        }, error => {\n          //console.log(error)\n        }\n      )\n\n    }\n\n    return new Promise((resolve, reject) => {\n      setTimeout(() => resolve(newNodes), 1000);\n    });\n  }\n\n\n  /* To copy any Text */\n  copyText(val: string) {\n    console.log(val)\n\n    let value = '';\n    if (val['lexicalEntry'] != undefined && val['sense'] == undefined && val['etymology'] == undefined) {\n      value = val['lexicalEntry']\n    } else if (val['form'] != undefined) {\n      value = val['form']\n    } else if (val['sense'] != undefined) {\n      value = val['sense']\n    } else if (val['etymology'] != undefined) {\n      value = val['etymology']\n    }\n    this.copySubject.next(value);\n  }\n}","\n\n<form [formGroup]=\"filterForm\">\n    <div class=\"input-group col-md-12 mt-3\">\n        <div class=\" input-group col-md-12 p-0\">\n            <input formControlName=\"text\" id=\"filterLexicalEntry\" name=\"text\" type=\"text\" class=\"form-control\"\n            placeholder=\"Search\" />\n            <div class=\"input-group-append\">\n                <span class=\"input-group-text loading_icon_append\" id=\"basic-addon2\">\n                    <div class=\"spinner-border spinner-border-sm m-1\" role=\"status\" *ngIf=\"searchIconSpinner\">\n                        <span class=\"sr-only\">Loading...</span>\n                    </div>\n                </span>\n            </div>\n        </div>\n       \n        <div id=\"buttons-container \" class=\"input-group-append d-flex align-items-sm-stretch w-100\">\n            <button class=\"btn btn-sm btn-info btn-block filter-button rounded-left \" type=\"button\" data-toggle=\"popover\"\n                data-placement=\"bottom\" data-trigger=\"hover\"><i class=\"fa fa-question\"></i></button>\n            <button class=\"btn btn-sm btn-secondary btn-block filter-button\" type=\"button\" value=\"Filter\" title=\"Filter\"\n                data-toggle=\"collapse\" data-target=\"#filterCollapse\" aria-expanded=\"false\"\n                aria-controls=\"filterCollapse\"><i class=\"fa fa-filter\"></i></button>\n            <button class=\"btn btn-sm btn-danger btn-block reset-button\" type=\"button\" value=\"Reset\" title=\"Reset\"\n                (click)=\"resetFields();\" style=\"border-top-right-radius: .25rem; border-bottom-right-radius: .25rem;\"><i\n                    class=\"fa fa-times\"></i></button>\n            <button class=\"btn btn-sm btn-block counter-button\" type=\"button\"><span\n                    class=\"font-weight-bold font-italic text-muted\">{{counter}}</span></button>\n        </div>\n    </div>\n\n    <div class=\"d-flex flex-wrap mt-3\">\n        <div class=\"col-md-6 col-sm-3\">\n            <div class=\"form-check\">\n                <input formControlName=\"searchMode\" class=\"form-check-input\" type=\"radio\" name=\"searchMode\"\n                    id=\"equalsRadio\" value=\"equals\">\n                <label class=\"form-check-label\" for=\"equalsRadio\">\n                    Equals\n                </label>\n            </div>\n        </div>\n        <div class=\"col-md-6 col-sm-3\">\n            <div class=\"form-check\">\n                <input formControlName=\"searchMode\" class=\"form-check-input\" type=\"radio\" name=\"searchMode\"\n                    id=\"startRadio\" value=\"startsWith\">\n                <label class=\"form-check-label\" for=\"startRadio\">\n                    Starts\n                </label>\n            </div>\n        </div>\n        <div class=\"col-md-6 col-sm-3\">\n            <div class=\"form-check\">\n                <input formControlName=\"searchMode\" class=\"form-check-input\" type=\"radio\" name=\"searchMode\"\n                    id=\"containsRadio\" value=\"contains\">\n                <label class=\"form-check-label\" for=\"containsRadio\">\n                    Contains\n                </label>\n            </div>\n        </div>\n        <div class=\"col-md-6 col-sm-3\">\n            <div class=\"form-check\">\n                <input formControlName=\"searchMode\" class=\"form-check-input\" type=\"radio\" name=\"searchMode\"\n                    id=\"endRadio\" value=\"end\">\n                <label class=\"form-check-label\" for=\"endRadio\">\n                    Ends\n                </label>\n            </div>\n        </div>\n    </div>\n\n    <div class=\"collapse multi-collapse\" id=\"filterCollapse\">\n        <div class=\"d-flex flex-wrap mt-3\">\n            <div class=\"col-md-4 col-sm-12\">\n                <select formControlName=\"type\" class=\"form-control\" id=\"type\" name=\"type\">\n                    <option value=\"\">Type</option>\n                    <option *ngFor=\"let type of types\" [value]=\"type.label\">{{type.label}} - {{type.count}}</option>\n                </select>\n            </div>\n            <div class=\"col-md-4 col-sm-12\">\n                <div class=\"d-md-none mt-3\"></div>\n                <select formControlName=\"pos\" class=\"form-control\" id=\"pos\" name=\"pos\">\n                    <option value=\"\">Pos</option>\n                    <option *ngFor=\"let ps of partOfSpeech\" [value]=\"ps.label\">{{ps.label}} - {{ps.count}} </option>\n                </select>\n            </div>\n            <div class=\"col-md-4 col-sm-12\">\n                <div class=\"d-md-none mt-3\"></div>\n                <select formControlName=\"formType\" class=\"form-control\" id=\"formType\" name=\"formType\">\n                    <option value=\"entry\">entry</option>\n                    <option value=\"flexed\">flexed</option>\n                </select>\n            </div>\n        </div>\n\n        <div class=\"d-flex flex-wrap mt-3\">\n            <div class=\"col-md-4 col-sm-12\">\n                <div class=\"d-md-none mt-3\"></div>\n                <select formControlName=\"author\" class=\"form-control\" id=\"author\" name=\"author\">\n                    <option value=\"\">Author</option>\n                    <option *ngFor=\"let auth of authors\" [value]=\"auth.label\">{{auth.label}} - {{auth.count}}</option>\n                </select>\n            </div>\n            <div class=\"col-md-4 col-sm-12\">\n                <div class=\"d-md-none mt-3\"></div>\n                <select formControlName=\"lang\" class=\"form-control\" id=\"lang\" name=\"lang\">\n                    <option value=\"\">Language</option>\n                    <option *ngFor=\"let lang of languages\" [value]=\"lang.label\">{{lang.label}} - {{lang.count}}\n                    </option>\n                </select>\n            </div>\n            <div class=\"col-md-4 col-sm-12\">\n                <div class=\"d-md-none mt-3\"></div>\n                <select formControlName=\"status\" class=\"form-control\" id=\"status\" name=\"status\">\n                    <option value=\"\">Status</option>\n                    <option value=\"working\">working</option>\n                    <option value=\"completed\">completed</option>\n                    <option value=\"reviewed\">reviewed</option>\n                </select>\n            </div>\n        </div>\n    </div>\n</form>\n\n\n<!-- INFINITE SCROLL AND TREE VIEW -->\n<div class=\"col-md-12 mt-3 rounded border border-secondary tree-view\" infiniteScroll [infiniteScrollDistance]=\"0.4\"\n    [infiniteScrollThrottle]=\"150\" [infiniteScrollContainer]=\"'.search-results'\" [fromRoot]=\"true\"\n    (scrolled)=\"onScrollDown(lexicalEntry.treeModel)\" style=\"height: calc(100vh - 22rem); overflow-x: auto;\">\n\n    <div id=\"lazyLoadingModal\" class=\"modal fade\" role=\"dialog\">\n        <div class=\"modal-dialog\">\n\n            <!-- Modal content-->\n            <div class=\"modal-content\">\n                <div class=\"modal-body\">\n                    <div class=\"d-flex justify-content-center\">\n                        <div class=\"spinner-border\" role=\"status\">\n                            <span class=\"sr-only\">Loading...</span>\n                        </div>\n                    </div>\n                </div>\n            </div>\n\n        </div>\n    </div>\n\n    <p class=\"mx-3\" *ngIf=\"show\">Nessun risultato</p>\n    <tree-root #lexicalEntry [(state)]=\"state\" [nodes]=\"nodes\" [options]=\"options\" [focused]=\"true\"\n        (activate)=\"onEvent($event)\" (deactivate)=\"onEvent($event)\" class=\"lexicalEntryTree\">\n        \n        <ng-template #treeNodeWrapperTemplate let-node let-index=\"index\">\n            <div class=\"node-wrapper\"  style=\"justify-content: space-between; padding: 0px 15px;\" > <!-- [style.padding-left]=\"node.getNodePadding()\" -->\n                <div>\n                    <tree-node-expander [node]=\"node\" *ngIf=\"node.data.hasChildren == true\"></tree-node-expander>\n                    <div class=\"node-content-wrapper\" [class.node-content-wrapper-active]=\"node.isActive\"\n                        [class.node-content-wrapper-focused]=\"node.isFocused\" (click)=\"node.mouseAction('click', $event)\"\n                        (dblclick)=\"node.mouseAction('dblClick', $event)\" [contextMenu]=\"basicMenu\" [contextMenuSubject]=\"node.data\">\n    \n                        <span\n                            *ngIf=\"node.data.count == undefined && labelView && node.data.componentInstanceName == undefined && node.data.definition == undefined && node.data.type!='canonicalForm' && node.data.sense == undefined\">{{\n                            node.data.label }}</span>\n                        <span\n                            *ngIf=\"node.data.count == undefined && idView && node.data.definition == undefined && node.data.type!='canonicalForm' && node.data.sense == undefined && node.data.etymologyInstanceName == undefined\">{{\n                            node.data.lexicalEntryInstanceName }}</span>\n    \n                        <span\n                            *ngIf=\"node.data.count == undefined && labelView && node.data.definition == undefined && node.data.type=='canonicalForm' && node.data.sense == undefined\"><b>{{\n                                node.data.label }}</b></span>\n                        <span\n                            *ngIf=\"node.data.count == undefined && idView && node.data.definition == undefined && node.data.type=='canonicalForm' && node.data.sense == undefined\"><b>{{\n                                node.data.formInstanceName }}</b></span>\n                        <span\n                            *ngIf=\"node.data.count == undefined && idView && node.data.definition == undefined && node.data.type!='canonicalForm' && node.data.sense == undefined\">{{\n                            node.data.formInstanceName }}</span>\n                        <span *ngIf=\"node.data.count == undefined && idView && node.data.definition != undefined\">{{\n                            node.data.senseInstanceName }}</span>\n\n                        <span *ngIf=\"node.data.count == undefined && idView && node.data.etymologyInstanceName != undefined\">{{\n                            node.data.etymologyInstanceName }}</span>\n\n                        <span *ngIf=\"node.data.count == undefined && labelView && node.data.componentInstanceName != undefined && node.data.label == ''\">\n                           Anonimous component</span>\n\n                        <span *ngIf=\"node.data.count == undefined && labelView && node.data.componentInstanceName != undefined && node.data.label != ''\">\n                            {{node.data.label}}</span>\n                        \n                        <span *ngIf=\"node.data.count == undefined && idView && node.data.componentInstanceName != undefined\">\n                            {{node.data.componentInstanceName}}</span>\n    \n                        <span class=\"lexical-tooltip\"\n                            *ngIf=\"node.data.count == undefined && labelView && node.data.definition != undefined && node.data.label != undefined\"\n                            data-toggle=\"tooltip\" data-html=\"true\" [title]=\"node.data.definition\">{{node.data.label.length >\n                            10 ? (node.data.label | slice:0:10) +'...' : node.data.label}}</span>\n                        <span class=\"lexical-tooltip\"\n                            *ngIf=\"node.data.count == undefined && idView && node.data.definition != undefined && node.data.label != undefined\"\n                            data-toggle=\"tooltip\" data-html=\"true\" [title]=\"node.data.definition\">{{ node.data.instanceName\n                            }}</span>\n    \n                        <span *ngIf=\"node.data.count != undefined\"><i><span\n                                    style=\"color: #6e6e6e\">{{node.data.label}}</span></i>&nbsp;({{ node.data.count\n                            }})</span>\n                        <span *ngIf=\"node.data.writtenRep != ''\">{{ node.data.writtenRep }}</span>\n                        <sub *ngIf=\"labelView && node.data.sense == undefined\">{{node.data.pos}}</sub>\n                        <span *ngIf=\"node.data.language != null && labelView\" class=\"lang\">@{{node.data.language}}</span>\n                        <!-- <span  *ngIf=\"node.data.count == undefined\" >\n                            {{ node.data.name }}\n                        </span> -->\n                    </div>\n                    <!-- <span *ngIf=\"node.data.count == undefined && node.data.definition == undefined && node.data.type!='canonicalForm' && node.data.sense == undefined && node.data.etymologyInstanceName == undefined\">\n                        <button class=\"btn btn-outline-primary btn-sm\" (click)=\"copyText(node.data.lexicalEntry)\" style=\"padding: 0 0.25rem;\"><i style=\"font-size: 12px;\" class=\"fa fa-copy\"></i></button>\n                    </span> -->\n                    \n                </div>\n                \n                <div class=\"icons-container\">\n                    <div style=\"width: 30%;\">\n                        <i *ngIf=\"node.data.note != '' && node.data.note != null\"\n                            class=\"far fa-comment-dots note-tooltip note_{{node.data.id}}\" data-toggle=\"tooltip\"\n                            data-html=\"true\" [title]=\"node.data.note\"></i>\n                    </div>\n                    <div style=\"width: 30%;\">\n                        <i *ngIf=\"node.data.lexicalEntryInstanceName != undefined && !flagAuthor && node.data.status == 'working'\"\n                            class=\"fas fa-user lexical-tooltip\" data-toggle=\"tooltip\" data-html=\"true\"\n                            [title]=\"node.data.creator\"></i>\n\n                        <i *ngIf=\"node.data.lexicalEntryInstanceName != undefined && !flagAuthor && node.data.status == 'completed'\"\n                            class=\"fas fa-user lexical-tooltip\" data-toggle=\"tooltip\" data-html=\"true\"\n                            [title]=\"node.data.author\"></i>\n\n                        <i *ngIf=\"node.data.lexicalEntryInstanceName != undefined && !flagAuthor && node.data.status == 'reviewed'\"\n                            class=\"fas fa-user lexical-tooltip\" data-toggle=\"tooltip\" data-html=\"true\"\n                            [title]=\"node.data.revisor\"></i>\n\n                        <i *ngIf=\"node.data.formInstanceName != undefined && node.data.flagAuthor\"\n                            class=\"fas fa-user lexical-tooltip\" data-toggle=\"tooltip\" data-html=\"true\"\n                            [title]=\"node.data.creator\"></i>\n                        <i *ngIf=\"node.data.senseInstanceName != undefined && node.data.flagAuthor\"\n                            class=\"fas fa-user lexical-tooltip\" data-toggle=\"tooltip\" data-html=\"true\"\n                            [title]=\"node.data.creator\"></i>\n                            <i *ngIf=\"node.data.etymologyInstanceName != undefined && node.data.flagAuthor\"\n                            class=\"fas fa-user lexical-tooltip\" data-toggle=\"tooltip\" data-html=\"true\"\n                            [title]=\"node.data.creator\"></i>\n                    </div>\n                    <div style=\"width: 30%;\">\n                        <i *ngIf=\"node.data.status != undefined && node.data.status == 'working'\" class=\"fa fa-circle\"\n                            style=\"color:red;\"></i>\n                        <i *ngIf=\"node.data.status != undefined && node.data.status == 'completed'\" class=\"fa fa-circle\"\n                            style=\"color:yellow;\"></i>\n                        <i *ngIf=\"node.data.status != undefined && node.data.status == 'reviewed'\"\n                            class=\"fa fa-circle lexical-tooltip\" style=\"color: green;\" data-toggle=\"tooltip\"\n                            data-html=\"true\" [title]=\"node.data.revisor\"></i>\n                    </div>\n\n                </div>\n            </div>\n        </ng-template>\n        <context-menu>\n\n            <!-- FOLDER CONTEXT MENU -->\n            <ng-template contextMenuItem let-item (execute)=\"copyText($event.item)\">\n              Copy URI\n            </ng-template>\n        </context-menu>\n        <ng-template #loadingTemplate let-loadingNode>\n            <div *ngIf=\"loadingNode.hasChildren\">\n                <div class=\"spinner-border spinner-border-sm m-1\" role=\"status\">\n                    <span class=\"sr-only\">Loading...</span>\n                </div>\n            </div>\n        </ng-template>\n    </tree-root>\n\n    \n</div>","/*\n   Copyright 2021-2022  Istituto di Linguistica Computazionale \"A. Zampolli\", Consiglio Nazionale delle Ricerche, Pisa, Italy.\n \nThis file is part of EpiLexo.\n\nEpiLexo is free software: you can redistribute it and/or modify it under the terms of the GNU General Public License as published by the Free Software Foundation, either version 3 of the License, or (at your option) any later version.\n\nEpiLexo is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for more details.\n\nYou should have received a copy of the GNU General Public License along with EpiLexo. If not, see <https://www.gnu.org/licenses/>.\n*/\n\nimport { Component, Input, OnInit, Renderer2, ViewChild } from '@angular/core';\nimport { FormBuilder, FormControl, FormGroup, Validators } from '@angular/forms';\nimport { NgbModal } from '@ng-bootstrap/ng-bootstrap';\nimport { NgSelectComponent } from '@ng-select/ng-select';\nimport { data } from 'jquery';\nimport { ToastrService } from 'ngx-toastr';\nimport { Subject } from 'rxjs';\nimport { debounceTime } from 'rxjs/operators';\nimport { AnnotatorService } from 'src/app/services/annotator/annotator.service';\nimport { AuthService } from 'src/app/services/auth/auth.service';\nimport { ExpanderService } from 'src/app/services/expander/expander.service';\nimport { LexicalEntriesService } from 'src/app/services/lexical-entries/lexical-entries.service';\n\n@Component({\n  selector: 'app-search-form',\n  templateUrl: './search-form.component.html',\n  styleUrls: ['./search-form.component.scss']\n})\nexport class SearchFormComponent implements OnInit {\n  private search_subject: Subject<any> = new Subject();\n  private search_lex_entries_subject: Subject<any> = new Subject();\n  searchResults: any[];\n  lex_searchResuts: any[];\n  languages = [];\n  morphologyData = [];\n  lexEntryTypesData: any;\n  typesData: any;\n  addTagFormText: any;\n  creator : any;\n\n\n  constructor(private formBuilder: FormBuilder, private modalService: NgbModal, private toastr: ToastrService, private annotatorService: AnnotatorService, private lexicalService: LexicalEntriesService, private expander: ExpanderService, private renderer: Renderer2, private auth : AuthService) { }\n\n  @Input() bind;\n  @ViewChild('addFormModal') addFormModal: any;\n  @ViewChild('select_form') select_form: NgSelectComponent;\n  @ViewChild('search_lexicalEntry') search_lexicalEntry: NgSelectComponent;\n  loader = false;\n  modalStep = 0;\n\n  stepOneForm = new FormGroup({\n    existOrNot: new FormControl('', Validators.required),\n  })\n\n  stepTwoForm = new FormGroup({\n    lexicalEntry: new FormControl('', Validators.required)\n  })\n\n  stepThreeForm = new FormGroup({\n    label: new FormControl('', Validators.required),\n    type: new FormControl('', Validators.required),\n    language: new FormControl('', Validators.required),\n    pos: new FormControl('', Validators.required),\n  });\n\n  stepFourForm = new FormGroup({\n    writtenForm: new FormControl('', Validators.required),\n    type: new FormControl('', Validators.required),\n  });\n\n  statusForm = new FormGroup({\n    lexicalEntryCreation: new FormControl(''),\n    attachingLanguage: new FormControl(''),\n    attachingType: new FormControl(''),\n    attachingLabel: new FormControl(''),\n    attachingPos: new FormControl(''),\n    creatingForm: new FormControl(''),\n    attachingWrittenForm: new FormControl(''),\n    attachingFormType: new FormControl(''),\n    finish: new FormControl(''),\n    error: new FormControl(null)\n  })\n\n  ngOnInit(): void {\n    setTimeout(() => {\n      //console.log(this.select_form);\n    }, 1000);\n\n    if(this.auth.getLoggedUser()['preferred_username'] != undefined){\n      this.creator = this.auth.getLoggedUser()['preferred_username'];\n    }\n\n    this.search_lex_entries_subject.pipe(debounceTime(1000)).subscribe(\n      data => {\n        this.onSearchLexicalEntriesFilter(data)\n      }\n    )\n\n    this.search_subject.pipe(debounceTime(1000)).subscribe(\n      data => {\n        this.onSearchFilter(data)\n      }\n    )\n\n    this.lexicalService.getLexiconLanguages().subscribe(\n      data => {\n        this.languages = [];\n        for (var i = 0; i < data.length; i++) {\n          this.languages[i] = data[i]\n        }\n      }\n    );\n\n    this.lexicalService.getMorphologyData().subscribe(\n      data => {\n        /* this.morphologyData = data; */\n\n        let morphoData = data;\n\n        this.morphologyData = morphoData.filter(x => {\n          if (x.propertyId == 'partOfSpeech') {\n            return true;\n          } else {\n            return false;\n          }\n        })\n\n        this.morphologyData = this.morphologyData[0]['propertyValues'];\n      }\n    )\n\n    this.lexicalService.getLexEntryTypes().subscribe(\n      data => {\n        //console.log(data)\n        this.lexEntryTypesData = data;\n\n      }\n    )\n\n    this.lexicalService.getFormTypes().subscribe(\n      data => {\n        this.typesData = data;\n        //console.log(this.typesData)\n      },\n      error => {\n        //console.log(error)\n      }\n    )\n\n    this.annotatorService.triggerSearch$.subscribe(\n      request => {\n        console.log(request);\n        if (request != null) {\n          this.bindSelection(request);\n        }\n      }, error => {\n\n      }\n    ).unsubscribe();\n\n\n    this.stepOneForm = this.formBuilder.group({\n      existOrNot: ['', Validators.required]\n    })\n\n    this.stepTwoForm = this.formBuilder.group({\n      lexicalEntry: ['', Validators.required]\n    })\n\n    this.stepThreeForm = this.formBuilder.group({\n      label: ['', Validators.required],\n      type: ['', Validators.required],\n      language: ['', Validators.required],\n      pos: ['', Validators.required],\n    });\n\n    this.stepFourForm = this.formBuilder.group({\n      writtenForm: ['', Validators.required],\n      type: ['', Validators.required]\n    });\n\n    this.statusForm = this.formBuilder.group({\n      lexicalEntryCreation: ['pause'],\n      attachingLanguage: ['pause'],\n      attachingType: ['pause'],\n      attachingLabel: ['pause'],\n      attachingPos: ['pause'],\n      creatingForm: ['pause'],\n      attachingWrittenForm: ['pause'],\n      attachingFormType: ['pause'],\n      finish: ['pause'],\n      error: [null]\n    })\n  }\n\n\n  triggerSearch(evt) {\n    //console.log(evt)\n    if (evt.target != undefined && evt.key != 'Control') {\n\n      this.search_subject.next(evt.target.value)\n    }\n  }\n\n  triggerSearchLexicalEntries(evt) {\n    if (evt.target != undefined && evt.key != 'Control') {\n\n      this.search_lex_entries_subject.next(evt.target.value)\n    }\n  }\n\n  onSearchFilter(data) {\n    this.searchResults = [];\n    /* console.log(data) */\n    let parameters = {\n      text: data,\n      searchMode: \"startsWith\",\n      representationType: \"writtenRep\",\n      author: \"\",\n      offset: 0,\n      limit: 500\n    }\n    console.log(parameters)\n    if (data != undefined) { /* && data.length >= 3 */\n\n      this.lexicalService.getFormList(parameters).subscribe(\n        data => {\n          console.log(data)\n          this.searchResults = data['list'];\n          this.loader = false;\n        }, error => {\n          console.log(error)\n          this.loader = false;\n        }\n      )\n    }\n\n  }\n\n  onSearchLexicalEntriesFilter(data) {\n    this.searchResults = [];\n    /* console.log(data) */\n    let parameters = {\n      text: data,\n      searchMode: \"startsWith\",\n      type: \"\",\n      pos: \"\",\n      formType: \"entry\",\n      author: \"\",\n      lang: \"\",\n      status: \"\",\n      offset: 0,\n      limit: 500\n    }\n\n    console.log(parameters)\n    if (data != \"\") { /* && data.length >= 3 */\n\n      this.lexicalService.getLexicalEntriesList(parameters).subscribe(\n        data => {\n          console.log(data)\n          this.lex_searchResuts = data['list'];\n          this.loader = false;\n        }, error => {\n          //console.log(error)\n        }\n      )\n    }\n\n  }\n\n  clearAll() {\n    this.select_form.handleClearClick();\n  }\n\n  clearAllLexicalEntries() {\n    this.search_lexicalEntry.handleClearClick();\n  }\n\n  bindSelection(req) {\n    this.loader = true;\n    setTimeout(() => {\n      this.select_form.filter(req);\n      this.onSearchFilter(req)\n    }, 100);\n\n  }\n\n  /* ngOnDestroy(){\n    this.lexicalService.\n  } */\n\n  handleForm(evt) {\n\n    if (evt instanceof NgSelectComponent) {\n      if (evt.selectedItems.length > 0) {\n        /* console.log(evt.selectedItems[0]) */\n        let label;\n        if (evt.selectedItems[0]['value']['formInstanceName'] != undefined) {\n          label = evt.selectedItems[0]['value']['formInstanceName'];\n        } else {\n          label = evt.selectedItems[0].label;\n        }\n        this.onChangeForm(evt.selectedItems[0]['value'])\n      }\n    } /* else {\n        let label = evt.target.value;\n        this.form_subject.next({ name: label})\n    } */\n  }\n\n\n  onChangeForm(data) {\n\n\n\n    let parameters = {}\n    let idPopover = this.bind.selectedPopover.tokenId;\n    let tokenData = this.bind.object[idPopover];\n    let element_id = this.bind.epiData.element_id;\n    let textSelection = this.bind.message;\n    let selectionSpan = this.bind.spanSelection;\n    let formValue = data.form;\n\n    if(this.creator == undefined){\n      this.creator = '';\n    }\n\n    console.log(selectionSpan)\n    console.log(textSelection)\n    if (textSelection != '' && textSelection != undefined) {\n      //console.log(111)\n      parameters[\"value\"] = formValue;\n      parameters[\"layer\"] = \"attestation\";\n      parameters[\"attributes\"] = {\n        author: this.creator,\n        creator: this.creator,\n        note: \"\",\n        confidence: 1,\n        timestamp: new Date().getTime().toString(),\n        bibliography: [],\n        validity: \"\",\n        externalRef: \"\",\n        node_id: tokenData.id,\n        label: data.label,\n        form_id: data.formInstanceName\n      };\n      parameters[\"spans\"] = [\n        {\n          start: selectionSpan.start.toString(),\n          end: selectionSpan.end.toString()\n        }\n      ];\n      parameters[\"id\"] = tokenData.node;\n    } else if (textSelection == '' && !Array.isArray(selectionSpan) && !this.bind.isEmptyFile) {\n      //console.log(222)\n      parameters[\"value\"] = formValue;\n      parameters[\"layer\"] = \"attestation\";\n      parameters[\"attributes\"] = {\n        author: this.creator,\n        creator: this.creator,\n        note: \"\",\n        confidence: 1,\n        timestamp: new Date().getTime().toString(),\n        bibliography: [],\n        validity: \"\",\n        externalRef: \"\",\n        node_id: tokenData.id,\n        label: data.label,\n        form_id: data.formInstanceName\n      };\n      parameters[\"spans\"] = [\n        {\n          start: tokenData.begin.toString(),\n          end: tokenData.end.toString()\n        }\n      ];\n      parameters[\"id\"] = tokenData.node;\n    } else if (Array.isArray(selectionSpan)) { //MULTIWORD\n      //console.log(333)\n      parameters[\"value\"] = formValue;\n      parameters[\"layer\"] = \"attestation\";\n      parameters[\"attributes\"] = {\n        author: this.creator,\n        creator: this.creator,\n        note: \"\",\n        confidence: 1,\n        timestamp: new Date().getTime().toString(),\n        bibliography: [],\n        validity: \"\",\n        externalRef: \"\",\n        node_id: tokenData.id,\n        label: data.label,\n        form_id: data.formInstanceName\n      };\n      parameters[\"spans\"] = selectionSpan\n      parameters[\"id\"] = tokenData.node;\n    } else if (this.bind.isEmptyFile) {\n      parameters[\"value\"] = formValue;\n      parameters[\"layer\"] = \"attestation\";\n      parameters[\"attributes\"] = {\n        author: this.creator,\n        creator: this.creator,\n        note: \"\",\n        confidence: 1,\n        timestamp: new Date().getTime().toString(),\n        bibliography: [],\n        validity: \"\",\n        externalRef: \"\",\n        node_id: undefined,\n        label: data.label,\n        form_id: data.formInstanceName\n      };\n      parameters[\"spans\"] = [\n        {\n          start: 0,\n          end: 0\n        }\n      ];\n      parameters[\"id\"] = element_id;\n    }\n    //console.log(idPopover, tokenData, data);\n\n    console.log(parameters)\n\n    let identifier;\n\n    if (!this.bind.isEmptyFile) {\n      identifier = tokenData.node;\n    } else {\n      identifier = element_id\n    }\n\n    this.annotatorService.addAnnotation(parameters, identifier).subscribe(\n      data => {\n        console.log(data);\n        this.bind.annotationArray.push(data.annotation);\n\n        if (!this.bind.isEmptyFile) {\n          this.bind.populateLocalAnnotation(tokenData);\n        } else {\n          this.bind.populateLocalAnnotation(data.annotation)\n        }\n\n\n        if (!this.bind.isEmptyFile) {\n          this.bind.object.forEach(element => {\n            if (data.annotation.attributes.node_id == element.id) {\n              let positionElement = element.position;\n              let elementHTML = document.getElementsByClassName('token-' + (positionElement - 1))[0]\n              this.renderer.addClass(elementHTML, 'annotation');\n            }\n          });\n        }\n\n\n        this.toastr.success('New attestation created', 'Info', {\n          timeOut: 5000\n        })\n\n      },\n      error => {\n        console.log(error);\n        this.toastr.error('Error on create new attestation', 'Error', {\n          timeOut: 5000\n        })\n      }\n    )\n\n\n  }\n\n  addNewForm = (form: string) => {\n    this.addTagFormText = form;\n\n\n    let index = this.bind.selectedPopover.tokenId;\n    let popover = this.bind.spanPopovers.toArray()[index];\n\n    if (popover != undefined) {\n      if (popover.isOpen()) {\n        popover.close();\n      }\n    }\n\n    this.modalService.open(this.addFormModal, {\n      size: 'lg',\n      windowClass: 'dark-modal',\n      beforeDismiss: () => {\n        if (this.stepOneForm.touched || this.stepTwoForm.touched || this.stepThreeForm.touched || this.stepFourForm.touched) {\n          if (!confirm('There are unsaved changes. Do you really want to quit without saving?')) {\n            return false;\n          } else {\n            this.stepOneForm.reset();\n            this.stepOneForm.markAsUntouched();\n            this.stepOneForm.markAsPristine();\n\n            this.stepTwoForm.reset();\n            this.stepTwoForm.markAsUntouched();\n            this.stepTwoForm.markAsPristine();\n\n            this.stepThreeForm.reset();\n            this.stepThreeForm.markAsUntouched();\n            this.stepThreeForm.markAsPristine();\n\n            this.stepFourForm.reset();\n            this.stepFourForm.markAsUntouched();\n            this.stepFourForm.markAsPristine();\n\n            this.statusForm.reset();\n            this.statusForm.markAsPristine();\n            this.statusForm.markAsUntouched();\n            return true;\n          }\n\n        } else {\n          this.stepOneForm.reset();\n          this.stepOneForm.markAsUntouched();\n          this.stepOneForm.markAsPristine();\n\n          this.stepTwoForm.reset();\n          this.stepTwoForm.markAsUntouched();\n          this.stepTwoForm.markAsPristine();\n\n          this.stepThreeForm.reset();\n          this.stepThreeForm.markAsUntouched();\n          this.stepThreeForm.markAsPristine();\n\n          this.stepFourForm.reset();\n          this.stepFourForm.markAsUntouched();\n          this.stepFourForm.markAsPristine();\n          return true;\n        }\n      }\n    });\n    this.modalStep = 1;\n\n  }\n\n  nextStep() {\n    if (this.modalStep == 1) {\n      if (this.stepOneForm.get('existOrNot').value == 'new') {\n        this.modalStep = 3;\n      } else {\n        this.modalStep = 2;\n      }\n\n      if (this.stepTwoForm.touched) {\n        this.stepTwoForm.reset();\n        this.stepTwoForm.markAsUntouched();\n        this.stepTwoForm.markAsPristine();\n        this.clearAll();\n      }\n\n      if (this.stepThreeForm.touched) {\n        this.stepThreeForm.reset();\n        this.stepThreeForm.markAsUntouched();\n        this.stepThreeForm.markAsPristine();\n      }\n\n      if (this.stepFourForm.touched) {\n        this.stepFourForm.reset();\n        this.stepFourForm.markAsUntouched();\n        this.stepFourForm.markAsPristine();\n      }\n\n    } else if (this.modalStep == 3) {\n      this.modalStep += 1;\n      if (this.stepTwoForm.touched) {\n        this.stepTwoForm.reset();\n        this.stepTwoForm.markAsUntouched();\n        this.stepTwoForm.markAsPristine();\n\n        this.clearAll();\n      }\n\n      if (this.stepFourForm.touched) {\n        this.stepFourForm.reset();\n        this.stepFourForm.markAsUntouched();\n        this.stepFourForm.markAsPristine();\n      }\n\n      this.stepFourForm.get('writtenForm').patchValue(this.addTagFormText, { emitEvent: false });\n\n    } else if (this.modalStep == 2) {\n      this.modalStep = 4;\n      if (this.stepThreeForm.touched) {\n        this.stepThreeForm.reset();\n        this.stepThreeForm.markAsUntouched();\n        this.stepThreeForm.markAsPristine();\n      }\n\n      if (this.stepFourForm.touched) {\n        this.stepFourForm.reset();\n        this.stepFourForm.markAsUntouched();\n        this.stepFourForm.markAsPristine();\n      }\n\n      this.stepFourForm.get('writtenForm').patchValue(this.addTagFormText, { emitEvent: false });\n    } else {\n      this.modalStep += 1;\n\n      if (this.modalStep == 6) {\n        this.wizardFactory();\n      }\n\n      if (this.modalStep > 6) {\n        this.modalStep = 6;\n      }\n    }\n\n  }\n\n  previousStep() {\n    if (this.modalStep == 2) {\n      this.modalStep -= 1;\n    } else if (this.modalStep == 3) {\n      this.modalStep = 1;\n    } else if (this.modalStep == 4) {\n\n      if (this.stepThreeForm.touched) {\n        this.modalStep = 3;\n      } else if (this.stepTwoForm.touched) {\n        this.modalStep = 2;\n      }\n    } else if (this.modalStep == 5) {\n      this.modalStep -= 1;\n    }\n  }\n\n  wizardFactory() {\n\n    //nuova lexical entry\n    if (this.stepThreeForm.touched) {\n\n      //lexical entry creazion\n      this.statusForm.get('lexicalEntryCreation').patchValue('pending', { emitEvent: false });\n      this.lexicalService.newLexicalEntry().subscribe(\n        data => {\n          console.log(data);\n\n          this.statusForm.get('lexicalEntryCreation').patchValue('ok', { emitEvent: false })\n\n          this.statusForm.get('attachingLanguage').patchValue('pending', { emitEvent: false })\n          //attaching language\n          let lexId = data.lexicalEntryInstanceName;\n          let lang = this.stepThreeForm.get('language').value;\n          let parameters = {\n            relation: 'language',\n            value: lang\n          }\n\n          this.lexicalService.updateLexicalEntry(lexId, parameters).subscribe(\n            data => {\n              console.log(data)\n            }, error => {\n              console.log(error);\n\n              if (error.status == 200) {\n                this.statusForm.get('attachingLanguage').patchValue('ok', { emitEvent: false });\n\n\n                //attaching type\n                this.statusForm.get('attachingType').patchValue('pending', { emitEvent: false });\n                let type = this.stepThreeForm.get('type').value;\n                let parameters = {\n                  relation: 'type',\n                  value: type\n                }\n\n                this.lexicalService.updateLexicalEntry(lexId, parameters).subscribe(\n                  data => {\n                    console.log(data)\n                  }, error => {\n                    console.log(error);\n                    if (error.status == 200) {\n\n                      this.statusForm.get('attachingType').patchValue('ok', { emitEvent: false });\n\n                      this.statusForm.get('attachingLabel').patchValue('pending', { emitEvent: false });\n                      //attaching label\n                      let label = this.stepThreeForm.get('label').value;\n                      let parameters = {\n                        relation: 'label',\n                        value: label\n                      };\n\n                      this.lexicalService.updateLexicalEntry(lexId, parameters).subscribe(\n                        data => {\n                          console.log(data)\n                        }, error => {\n                          console.log(error);\n\n                          if (error.status == 200) {\n                            this.statusForm.get('attachingLabel').patchValue('ok', { emitEvent: false });\n\n\n                            //attaching pos\n                            this.statusForm.get('attachingPos').patchValue('pending', { emitEvent: false });\n\n                            let pos = this.stepThreeForm.get('pos').value;\n                            let parameters = {\n                              type: 'morphology',\n                              relation: 'partOfSpeech',\n                              value: pos\n                            }\n\n                            this.lexicalService.updateLinguisticRelation(lexId, parameters).subscribe(\n                              data => {\n                                console.log(data)\n                              }, error => {\n                                console.log(error);\n\n                                this.statusForm.get('attachingPos').patchValue('ok', { emitEvent: false });\n\n                                //creating form\n                                this.statusForm.get('creatingForm').patchValue('pending', { emitEvent: false });\n\n\n                                this.lexicalService.createNewForm(lexId).subscribe(\n                                  data=>{\n                                    console.log(data);\n\n                                    let formId = data.formInstanceName;\n\n                                    this.statusForm.get('creatingForm').patchValue('ok', { emitEvent: false });\n\n\n                                    //attaching writtenRep to form\n                                    this.statusForm.get('attachingWrittenForm').patchValue('pending', { emitEvent: false });\n                                    let writtenRep = this.stepFourForm.get('writtenForm').value;\n                                    let parameters = {\n                                      relation: 'writtenRep',\n                                      value: writtenRep\n                                    }\n\n                                    this.lexicalService.updateForm(formId, parameters).subscribe(\n                                      data=>{\n                                        console.log(data)\n                                        this.statusForm.get('attachingWrittenForm').patchValue('ok', { emitEvent: false });\n                                      },error=>{\n                                        console.log(error)\n                                        this.statusForm.get('attachingWrittenForm').patchValue('ok', { emitEvent: false });\n\n                                        //attach type to form\n                                        this.statusForm.get('attachingFormType').patchValue('pending', { emitEvent: false });\n                                        let typeForm = this.stepFourForm.get('type').value;\n\n                                        let parameters = {\n                                          relation: 'type',\n                                          value : typeForm\n                                        }\n\n                                        this.lexicalService.updateForm(formId, parameters).subscribe(\n                                          data=>{\n                                            console.log(data);\n                                            this.statusForm.get('attachingFormType').patchValue('ok', { emitEvent: false });\n                                            this.statusForm.get('finish').patchValue('ok', { emitEvent: false });\n                                          },error=>{\n                                            console.log(error);\n                                            this.statusForm.get('attachingFormType').patchValue('ok', { emitEvent: false });\n\n                                            this.statusForm.get('finish').patchValue('ok', { emitEvent: false });\n\n                                          }\n                                        )\n                                      }\n                                    )\n\n                                  },error=>{\n                                    console.log(error);\n\n                                  }\n                                )\n                              }\n                            )\n                          }\n                        }\n                      )\n\n                    }\n                  }\n                )\n\n              }\n            }\n          )\n\n        }, error => {\n          console.log(error)\n        }\n      )\n    } else if (this.stepTwoForm.touched) { //lexical entry esistente\n\n      let lexId = this.stepTwoForm.get('lexicalEntry').value;\n      //creating form\n      this.statusForm.get('creatingForm').patchValue('pending', { emitEvent: false });\n\n\n      this.lexicalService.createNewForm(lexId).subscribe(\n        data=>{\n          console.log(data);\n\n          let formId = data.formInstanceName;\n\n          this.statusForm.get('creatingForm').patchValue('ok', { emitEvent: false });\n\n\n          //attaching writtenRep to form\n          this.statusForm.get('attachingWrittenForm').patchValue('pending', { emitEvent: false });\n          let writtenRep = this.stepFourForm.get('writtenForm').value;\n          let parameters = {\n            relation: 'writtenRep',\n            value: writtenRep\n          }\n\n          this.lexicalService.updateForm(formId, parameters).subscribe(\n            data=>{\n              console.log(data)\n              this.statusForm.get('attachingWrittenForm').patchValue('ok', { emitEvent: false });\n            },error=>{\n              console.log(error)\n              this.statusForm.get('attachingWrittenForm').patchValue('ok', { emitEvent: false });\n\n              //attach type to form\n              this.statusForm.get('attachingFormType').patchValue('pending', { emitEvent: false });\n              let typeForm = this.stepFourForm.get('type').value;\n\n              let parameters = {\n                relation: 'type',\n                value : typeForm\n              }\n\n              this.lexicalService.updateForm(formId, parameters).subscribe(\n                data=>{\n                  console.log(data);\n                  this.statusForm.get('attachingFormType').patchValue('ok', { emitEvent: false });\n                  this.statusForm.get('finish').patchValue('ok', { emitEvent: false });\n                },error=>{\n                  console.log(error);\n                  this.statusForm.get('attachingFormType').patchValue('ok', { emitEvent: false });\n\n                  this.statusForm.get('finish').patchValue('ok', { emitEvent: false });\n\n                }\n              )\n            }\n          )\n\n        },error=>{\n          console.log(error);\n\n        }\n      )\n      \n    }\n  }\n\n}\n","<div class=\"input-group col-xl-12 searchSelect\">\n    <ng-select #select_form name=\"entity\" [addTag]=\"addNewForm\" [clearable]=\"false\" (focus)=\"true\" bindValue=\"label\"\n        bindLabel=\"label\" placeholder=\"Search form\" appendTo=\".token_modal\" (keyup)=\"triggerSearch($event)\"\n        [items]=\"searchResults\" (change)=\"handleForm(select_form)\" [loading]=\"loader\">\n        <!--  -->\n        <!-- && cog.get('type').value != 'external' -->\n        <!-- \"\n     -->\n        <!-- (focus)=\"deleteData()\" -->\n        <!-- -->\n        <ng-template ng-option-tmp let-item=\"item\" let-search=\"searchTerm\">\n            <!--     <div>\n    <span>{{item.label}} </span><span style=\"color: blue;\">@{{item.language}}</span>\n</div> -->\n            <div class=\"card-body p-0\">\n                <h6 class=\"card-title m-0\" [ngOptionHighlight]=\"search\">{{item.label}}</h6>\n                <!-- <p class=\"card-subtitle mb-2 text-muted\">{{item.type}}</p> -->\n                <small *ngFor=\"let sub of item.morphology\">\n                    <span *ngIf=\"sub.trait == 'case' || sub.trait == 'gender' || sub.trait == 'number'\">\n                        {{sub.trait}} : {{sub.value}} <br>\n                    </span>\n                </small>\n                <small class=\"card-text\">\n                    <!-- <img height=\"15\" width=\"15\" [src]=\"item.avatar\"/> -->\n                    <!-- LexicalEntry: {{item.lexicalEntryInstanceName}} -->\n\n                </small>\n                <!--  <div *ngIf=\"item.name === 'Pavilnys'\">\n        <a href=\"#\" class=\"card-link\">Card link</a>\n        <a href=\"#\" class=\"card-link\">Another link</a>\n    </div> -->\n            </div>\n\n        </ng-template>\n    </ng-select>\n\n    <div class=\"input-group-append ml-2\">\n        <button (click)=\"clearAll()\" class=\"btn btn-danger\" type=\"button\">Clear</button>\n    </div>\n</div>\n\n<ng-template #addFormModal let-modal>\n    <div class=\"modal-header\">\n        <h4 class=\"modal-title\" id=\"modal-basic-title\">Wizard</h4>\n        <button type=\"button\" class=\"close\" aria-label=\"Close\" (click)=\"modal.dismiss('Cross click')\">\n            <span aria-hidden=\"true\">&times;</span>\n        </button>\n    </div>\n\n    <form [formGroup]=\"stepOneForm\" *ngIf=\"modalStep == 1\">\n        <div class=\"modal-body\">\n            <!-- {{modalStep}} -->\n            <div class=\"form-group\" >\n                <p>To create a new lexical form it is necessary to have a reference lexical entry. Select one of the two options:</p>\n                <div class=\"form-check form-check-inline\">\n                    <input class=\"form-check-input\" formControlName=\"existOrNot\" name=\"existOrNot\" type=\"radio\" value=\"new\">\n                    <label class=\"form-check-label\" for=\"existOrNot\">Create new lexical entry</label>\n                </div>\n                <div class=\"form-check form-check-inline\">\n                    <input class=\"form-check-input\" formControlName=\"existOrNot\" name=\"existOrNot\" type=\"radio\" value=\"exist\">\n                    <label class=\"form-check-label\" for=\"existOrNot\">Choose one existing lexical entry</label>\n                </div>\n            </div>\n            \n        </div>\n        <div class=\"modal-footer\">\n            <button type=\"button\" class=\"btn btn-outline-dark\" (click)=\"previousStep()\"\n                [disabled]=\"modalStep == 1\">Previous</button>\n            <button type=\"button\" class=\"btn btn-outline-dark\" (click)=\"nextStep()\" [disabled]=\"stepOneForm.invalid\">Next</button>\n        </div>  \n       \n    </form>\n\n    <form [formGroup]=\"stepTwoForm\"  *ngIf=\"modalStep == 2\">\n        <div class=\"modal-body\">\n            <!-- {{modalStep}} -->\n            <p>Choose a lexical entry:</p>\n            <div class=\"input-group searchSelect\">\n                <ng-select #search_lexicalEntry formControlName=\"lexicalEntry\" name=\"lexicalEntry\" [clearable]=\"false\" (focus)=\"true\" bindValue=\"lexicalEntryInstanceName\"\n                bindLabel=\"label\" placeholder=\"Search form\" appendTo=\"body\" (keyup)=\"triggerSearchLexicalEntries($event)\"\n                [items]=\"lex_searchResuts\" [loading]=\"loader\"> </ng-select>\n                \n                <div class=\"input-group-append ml-2\">\n                    <button (click)=\"clearAll()\" class=\"btn btn-danger\" type=\"button\">Clear</button>\n                </div>\n            </div>\n            \n        </div>\n        <div class=\"modal-footer\">\n            <button type=\"button\" class=\"btn btn-outline-dark\" (click)=\"previousStep()\"\n                [disabled]=\"modalStep == 1\">Previous</button>\n            <button type=\"button\" class=\"btn btn-outline-dark\" (click)=\"nextStep()\" [disabled]=\"stepTwoForm.invalid\">Next</button>\n        </div>  \n       \n    </form>\n\n    <form [formGroup]=\"stepThreeForm\"  *ngIf=\"modalStep == 3\">\n        <div class=\"modal-body\">\n            <!-- {{modalStep}} -->\n            <p>Enter basic info for lexical entry creation:</p>\n            <div class=\"form-row\">\n                <div class=\"col-md-4 mb-3\">\n                    <label for=\"label\">Label</label>\n                    <input type=\"text\" class=\"form-control\" formControlName=\"label\" name=\"label\" id=\"label\" required>\n                    <div class=\"invalid-feedback\">\n                        Please provide a valid state.\n                    </div>\n                </div>\n                <div class=\"col-md-3 mb-3\">\n                    <label for=\"label\">Type</label>\n                    <select class=\"custom-select\" formControlName=\"type\" name=\"type\" id=\"type\" required>\n                        <option selected value=\"\">Select type</option>\n                        <option *ngFor=\"let type of lexEntryTypesData\" [value]=\"type.valueId\">{{type.valueLabel}}</option>\n                    </select>\n                    <div class=\"invalid-feedback\">\n                        Please provide a valid state.\n                    </div>\n                </div>\n                <div class=\"col-md-2 mb-3\">\n                    <label for=\"label\">Language</label>\n                    <select class=\"custom-select\" formControlName=\"language\" name=\"language\" id=\"language\" required>\n                        <option selected value=\"\">Select language</option>\n                        <option *ngFor=\"let lang of languages\" [value]=\"lang.label\">{{lang.label}}</option>\n                    </select>\n                    <div class=\"invalid-feedback\">\n                        Please provide a valid state.\n                    </div>\n                </div>\n                <div class=\"col-md-3 mb-3\">\n                    <label for=\"label\">Part of Speech</label>\n                    <select class=\"custom-select\" formControlName=\"pos\" name=\"pos\" id=\"pos\" required>\n                        <option selected value=\"\">Select pos</option>\n                        <option *ngFor=\"let pos of morphologyData\" [value]=\"pos.valueId\">{{pos.valueLabel}}</option>\n                    </select>\n                    <div class=\"invalid-feedback\">\n                        Please provide a valid state.\n                    </div>\n                </div>\n            </div>\n            <!-- <div class=\"form-row\">\n                \n            </div> -->\n            \n        </div>\n        <div class=\"modal-footer\">\n            <button type=\"button\" class=\"btn btn-outline-dark\" (click)=\"previousStep()\"\n                [disabled]=\"modalStep == 1\">Previous</button>\n            <button type=\"button\" class=\"btn btn-outline-dark\" (click)=\"nextStep()\" [disabled]=\"stepThreeForm.invalid\">Next</button>\n        </div>  \n       \n    </form>\n\n    <form [formGroup]=\"stepFourForm\"  *ngIf=\"modalStep == 4\">\n        <div class=\"modal-body\">\n            <p>Enter basic info for form creation:</p>\n            <div class=\"form-row\">\n                <div class=\"col-md-4 mb-3\">\n                    <label for=\"label\">Written Form</label>\n                    <input type=\"text\" class=\"form-control\" formControlName=\"writtenForm\" name=\"writtenForm\" id=\"writtenForm\" required>\n                    <div class=\"invalid-feedback\">\n                        Please provide a valid state.\n                    </div>\n                </div>\n                <div class=\"col-md-3 mb-3\">\n                    <label for=\"label\">Type</label>\n                    <select class=\"custom-select\" formControlName=\"type\" name=\"type\" id=\"type\" required>\n                        <option selected value=\"\">Select type</option>\n                        <option *ngFor=\"let type of typesData\" [value]=\"type.valueId\">{{type.valueLabel}}</option>\n                    </select>\n                    <div class=\"invalid-feedback\">\n                        Please provide a valid state.\n                    </div>\n                </div>\n            </div>\n        </div>\n        <div class=\"modal-footer\">\n            <button type=\"button\" class=\"btn btn-outline-dark\" (click)=\"previousStep()\">Previous</button>\n            <button type=\"button\" class=\"btn btn-outline-dark\" (click)=\"nextStep()\" [disabled]=\"stepFourForm.invalid\">Next</button>\n        </div>  \n    </form>\n\n    <div *ngIf=\"modalStep == 5\">\n        <div class=\"modal-body\">\n            <p>Summary:</p>\n\n            <div class=\"row\">\n                <div class=\"col-4\">\n                    <p>Lexical form to create</p>\n                </div>\n                <div class=\"col-8\">\n                    <p>{{stepFourForm.get('writtenForm').value}}  -  {{stepFourForm.get('type').value}}</p>\n               </div>\n            </div>\n\n            <div class=\"row\" *ngIf=\"stepTwoForm.touched\">\n                <div class=\"col-4\">\n                    <p>Lexical Entry to be attached</p>\n                </div>\n                <div class=\"col-8\">\n                    <p>{{stepTwoForm.get('lexicalEntry').value}}</p>\n               </div>\n            </div>\n\n            <div class=\"row\" *ngIf=\"stepThreeForm.touched\">\n                <div class=\"col-4\">\n                    <p>New lexical entry to be attached</p>\n                </div>\n                <div class=\"col-8\">\n                    <p>{{stepThreeForm.get('label').value}}</p>\n               </div>\n            </div>\n\n\n        </div>\n        <div class=\"modal-footer\">\n            <button type=\"button\" class=\"btn btn-outline-dark\" (click)=\"previousStep()\">Previous</button>\n            <button type=\"button\" class=\"btn btn-outline-dark\" (click)=\"nextStep()\">Proceed</button>\n        </div>\n    </div>\n\n\n    <form [formGroup]=\"statusForm\"  *ngIf=\"modalStep == 6\">\n        <div class=\"modal-body\">\n            <p>Summary:</p>\n            \n            <div class=\"row\" *ngIf=\"stepThreeForm.touched\">\n                <div class=\"col-4\">\n                    <p [ngClass]=\"{'text-muted': statusForm.get('lexicalEntryCreation').value == 'pause'}\">Lexical entry creation</p>\n                </div>\n                <div class=\"col-8\">\n                    <div class=\"d-flex align-items-center\" *ngIf=\"statusForm.get('lexicalEntryCreation').value == 'pause'\">\n                        <!-- <strong>Loading...</strong> -->\n                        <div class=\"mr-auto ml-auto\" aria-hidden=\"true\"><i class=\"fas fa-pause-circle fa-2x\" style=\"color: gray;\"></i></div>\n                    </div>\n                    <div class=\"d-flex align-items-center\" *ngIf=\"statusForm.get('lexicalEntryCreation').value == 'pending'\">\n                        <!-- <strong>Loading...</strong> -->\n                        <div class=\"spinner-border mr-auto ml-auto\" role=\"status\" aria-hidden=\"true\"></div>\n                    </div>\n                    <div class=\"d-flex align-items-center\" *ngIf=\"statusForm.get('lexicalEntryCreation').value == 'ok'\">\n                        <!-- <strong>Loading...</strong> -->\n                        <div class=\"mr-auto ml-auto\" aria-hidden=\"true\"><i class=\"fas fa-check-circle fa-2x\" style=\"color: green;\"></i></div>\n                    </div>\n                    <div class=\"d-flex align-items-center\" *ngIf=\"statusForm.get('lexicalEntryCreation').value == 'error'\">\n                        <!-- <strong>Loading...</strong> -->\n                        <div class=\"mr-auto ml-auto\" aria-hidden=\"true\"><i class=\"fas fa-times-circle fa-2x\" style=\"color: red;\"></i></div>\n                    </div>\n               </div>\n            </div>\n\n            <div class=\"row\" *ngIf=\"stepThreeForm.touched\">\n                <div class=\"col-4\">\n                    <p [ngClass]=\"{'text-muted': statusForm.get('attachingLanguage').value == 'pause'}\">Attaching language</p>\n                </div>\n                <div class=\"col-8\">\n                    <div class=\"d-flex align-items-center\" *ngIf=\"statusForm.get('attachingLanguage').value == 'pause'\">\n                        <!-- <strong>Loading...</strong> -->\n                        <div class=\"mr-auto ml-auto\" aria-hidden=\"true\"><i class=\"fas fa-pause-circle fa-2x\" style=\"color: gray;\"></i></div>\n                    </div>\n                    <div class=\"d-flex align-items-center\" *ngIf=\"statusForm.get('attachingLanguage').value == 'pending'\">\n                        <!-- <strong>Loading...</strong> -->\n                        <div class=\"spinner-border mr-auto ml-auto\" role=\"status\" aria-hidden=\"true\"></div>\n                    </div>\n                    <div class=\"d-flex align-items-center\" *ngIf=\"statusForm.get('attachingLanguage').value == 'ok'\">\n                        <!-- <strong>Loading...</strong> -->\n                        <div class=\"mr-auto ml-auto\" aria-hidden=\"true\"><i class=\"fas fa-check-circle fa-2x\" style=\"color: green;\"></i></div>\n                    </div>\n                    <div class=\"d-flex align-items-center\" *ngIf=\"statusForm.get('attachingLanguage').value == 'error'\">\n                        <!-- <strong>Loading...</strong> -->\n                        <div class=\"mr-auto ml-auto\" aria-hidden=\"true\"><i class=\"fas fa-times-circle fa-2x\" style=\"color: red;\"></i></div>\n                    </div>\n               </div>\n            </div>\n\n            <div class=\"row\" *ngIf=\"stepThreeForm.touched\">\n                <div class=\"col-4\">\n                    <p [ngClass]=\"{'text-muted': statusForm.get('attachingType').value == 'pause'}\">Attaching type</p>\n                </div>\n                <div class=\"col-8\">\n                    <div class=\"d-flex align-items-center\" *ngIf=\"statusForm.get('attachingType').value == 'pause'\">\n                        <!-- <strong>Loading...</strong> -->\n                        <div class=\"mr-auto ml-auto\" aria-hidden=\"true\"><i class=\"fas fa-pause-circle fa-2x\" style=\"color: gray;\"></i></div>\n                    </div>\n                    <div class=\"d-flex align-items-center\" *ngIf=\"statusForm.get('attachingType').value == 'pending'\">\n                        <!-- <strong>Loading...</strong> -->\n                        <div class=\"spinner-border mr-auto ml-auto\" role=\"status\" aria-hidden=\"true\"></div>\n                    </div>\n                    <div class=\"d-flex align-items-center\" *ngIf=\"statusForm.get('attachingType').value == 'ok'\">\n                        <!-- <strong>Loading...</strong> -->\n                        <div class=\"mr-auto ml-auto\" aria-hidden=\"true\"><i class=\"fas fa-check-circle fa-2x\" style=\"color: green;\"></i></div>\n                    </div>\n                    <div class=\"d-flex align-items-center\" *ngIf=\"statusForm.get('attachingType').value == 'error'\">\n                        <!-- <strong>Loading...</strong> -->\n                        <div class=\"mr-auto ml-auto\" aria-hidden=\"true\"><i class=\"fas fa-times-circle fa-2x\" style=\"color: red;\"></i></div>\n                    </div>\n               </div>\n            </div>\n\n            <div class=\"row\" *ngIf=\"stepThreeForm.touched\">\n                <div class=\"col-4\">\n                    <p [ngClass]=\"{'text-muted': statusForm.get('attachingLabel').value == 'pause'}\">Attaching label</p>\n                </div>\n                <div class=\"col-8\">\n                    <div class=\"d-flex align-items-center\" *ngIf=\"statusForm.get('attachingLabel').value == 'pause'\">\n                        <!-- <strong>Loading...</strong> -->\n                        <div class=\"mr-auto ml-auto\" aria-hidden=\"true\"><i class=\"fas fa-pause-circle fa-2x\" style=\"color: gray;\"></i></div>\n                    </div>\n                    <div class=\"d-flex align-items-center\" *ngIf=\"statusForm.get('attachingLabel').value == 'pending'\">\n                        <!-- <strong>Loading...</strong> -->\n                        <div class=\"spinner-border mr-auto ml-auto\" role=\"status\" aria-hidden=\"true\"></div>\n                    </div>\n                    <div class=\"d-flex align-items-center\" *ngIf=\"statusForm.get('attachingLabel').value == 'ok'\">\n                        <!-- <strong>Loading...</strong> -->\n                        <div class=\"mr-auto ml-auto\" aria-hidden=\"true\"><i class=\"fas fa-check-circle fa-2x\" style=\"color: green;\"></i></div>\n                    </div>\n                    <div class=\"d-flex align-items-center\" *ngIf=\"statusForm.get('attachingLabel').value == 'error'\">\n                        <!-- <strong>Loading...</strong> -->\n                        <div class=\"mr-auto ml-auto\" aria-hidden=\"true\"><i class=\"fas fa-times-circle fa-2x\" style=\"color: red;\"></i></div>\n                    </div>\n               </div>\n            </div>\n\n            <div class=\"row\" *ngIf=\"stepThreeForm.touched\">\n                <div class=\"col-4\">\n                    <p [ngClass]=\"{'text-muted': statusForm.get('attachingPos').value == 'pause'}\">Attaching part of speech</p>\n                </div>\n                <div class=\"col-8\">\n                    <div class=\"d-flex align-items-center\" *ngIf=\"statusForm.get('attachingPos').value == 'pause'\">\n                        <!-- <strong>Loading...</strong> -->\n                        <div class=\"mr-auto ml-auto\" aria-hidden=\"true\"><i class=\"fas fa-pause-circle fa-2x\" style=\"color: gray;\"></i></div>\n                    </div>\n                    <div class=\"d-flex align-items-center\" *ngIf=\"statusForm.get('attachingPos').value == 'pending'\">\n                        <!-- <strong>Loading...</strong> -->\n                        <div class=\"spinner-border mr-auto ml-auto\" role=\"status\" aria-hidden=\"true\"></div>\n                    </div>\n                    <div class=\"d-flex align-items-center\" *ngIf=\"statusForm.get('attachingPos').value == 'ok'\">\n                        <!-- <strong>Loading...</strong> -->\n                        <div class=\"mr-auto ml-auto\" aria-hidden=\"true\"><i class=\"fas fa-check-circle fa-2x\" style=\"color: green;\"></i></div>\n                    </div>\n                    <div class=\"d-flex align-items-center\" *ngIf=\"statusForm.get('attachingPos').value == 'error'\">\n                        <!-- <strong>Loading...</strong> -->\n                        <div class=\"mr-auto ml-auto\" aria-hidden=\"true\"><i class=\"fas fa-times-circle fa-2x\" style=\"color: red;\"></i></div>\n                    </div>\n               </div>\n            </div>\n\n            <div class=\"row\">\n                <div class=\"col-4\">\n                    <p [ngClass]=\"{'text-muted': statusForm.get('creatingForm').value == 'pause'}\">Creating form</p>\n                </div>\n                <div class=\"col-8\">\n                    <div class=\"d-flex align-items-center\" *ngIf=\"statusForm.get('creatingForm').value == 'pause'\">\n                        <!-- <strong>Loading...</strong> -->\n                        <div class=\"mr-auto ml-auto\" aria-hidden=\"true\"><i class=\"fas fa-pause-circle fa-2x\" style=\"color: gray;\"></i></div>\n                    </div>\n                    <div class=\"d-flex align-items-center\" *ngIf=\"statusForm.get('creatingForm').value == 'pending'\">\n                        <!-- <strong>Loading...</strong> -->\n                        <div class=\"spinner-border mr-auto ml-auto\" role=\"status\" aria-hidden=\"true\"></div>\n                    </div>\n                    <div class=\"d-flex align-items-center\" *ngIf=\"statusForm.get('creatingForm').value == 'ok'\">\n                        <!-- <strong>Loading...</strong> -->\n                        <div class=\"mr-auto ml-auto\" aria-hidden=\"true\"><i class=\"fas fa-check-circle fa-2x\" style=\"color: green;\"></i></div>\n                    </div>\n                    <div class=\"d-flex align-items-center\" *ngIf=\"statusForm.get('creatingForm').value == 'error'\">\n                        <!-- <strong>Loading...</strong> -->\n                        <div class=\"mr-auto ml-auto\" aria-hidden=\"true\"><i class=\"fas fa-times-circle fa-2x\" style=\"color: red;\"></i></div>\n                    </div>\n               </div>\n            </div>\n\n            <div class=\"row\">\n                <div class=\"col-4\">\n                    <p [ngClass]=\"{'text-muted': statusForm.get('attachingWrittenForm').value == 'pause'}\">Attaching written form property</p>\n                </div>\n                <div class=\"col-8\">\n                    <div class=\"d-flex align-items-center\" *ngIf=\"statusForm.get('attachingWrittenForm').value == 'pause'\">\n                        <!-- <strong>Loading...</strong> -->\n                        <div class=\"mr-auto ml-auto\" aria-hidden=\"true\"><i class=\"fas fa-pause-circle fa-2x\" style=\"color: gray;\"></i></div>\n                    </div>\n                    <div class=\"d-flex align-items-center\" *ngIf=\"statusForm.get('attachingWrittenForm').value == 'pending'\">\n                        <!-- <strong>Loading...</strong> -->\n                        <div class=\"spinner-border mr-auto ml-auto\" role=\"status\" aria-hidden=\"true\"></div>\n                    </div>\n                    <div class=\"d-flex align-items-center\" *ngIf=\"statusForm.get('attachingWrittenForm').value == 'ok'\">\n                        <!-- <strong>Loading...</strong> -->\n                        <div class=\"mr-auto ml-auto\" aria-hidden=\"true\"><i class=\"fas fa-check-circle fa-2x\" style=\"color: green;\"></i></div>\n                    </div>\n                    <div class=\"d-flex align-items-center\" *ngIf=\"statusForm.get('attachingWrittenForm').value == 'error'\">\n                        <!-- <strong>Loading...</strong> -->\n                        <div class=\"mr-auto ml-auto\" aria-hidden=\"true\"><i class=\"fas fa-times-circle fa-2x\" style=\"color: red;\"></i></div>\n                    </div>\n               </div>\n            </div>\n\n            <div class=\"row\">\n                <div class=\"col-4\">\n                    <p [ngClass]=\"{'text-muted': statusForm.get('attachingFormType').value == 'pause'}\">Attaching type property</p>\n                </div>\n                <div class=\"col-8\">\n                    <div class=\"d-flex align-items-center\" *ngIf=\"statusForm.get('attachingFormType').value == 'pause'\">\n                        <!-- <strong>Loading...</strong> -->\n                        <div class=\"mr-auto ml-auto\" aria-hidden=\"true\"><i class=\"fas fa-pause-circle fa-2x\" style=\"color: gray;\"></i></div>\n                    </div>\n                    <div class=\"d-flex align-items-center\" *ngIf=\"statusForm.get('attachingFormType').value == 'pending'\">\n                        <!-- <strong>Loading...</strong> -->\n                        <div class=\"spinner-border mr-auto ml-auto\" role=\"status\" aria-hidden=\"true\"></div>\n                    </div>\n                    <div class=\"d-flex align-items-center\" *ngIf=\"statusForm.get('attachingFormType').value == 'ok'\">\n                        <!-- <strong>Loading...</strong> -->\n                        <div class=\"mr-auto ml-auto\" aria-hidden=\"true\"><i class=\"fas fa-check-circle fa-2x\" style=\"color: green;\"></i></div>\n                    </div>\n                    <div class=\"d-flex align-items-center\" *ngIf=\"statusForm.get('attachingFormType').value == 'error'\">\n                        <!-- <strong>Loading...</strong> -->\n                        <div class=\"mr-auto ml-auto\" aria-hidden=\"true\"><i class=\"fas fa-times-circle fa-2x\" style=\"color: red;\"></i></div>\n                    </div>\n               </div>\n            </div>\n\n            <div class=\"row\">\n                <div class=\"col-4\">\n                    <p [ngClass]=\"{'text-muted': statusForm.get('finish').value == 'pause'}\">Finish</p>\n                </div>\n                <div class=\"col-8\">\n                    <div class=\"d-flex align-items-center\" *ngIf=\"statusForm.get('finish').value == 'pause'\">\n                        <!-- <strong>Loading...</strong> -->\n                        <div class=\"mr-auto ml-auto\" aria-hidden=\"true\"><i class=\"fas fa-pause-circle fa-2x\" style=\"color: gray;\"></i></div>\n                    </div>\n                    <div class=\"d-flex align-items-center\" *ngIf=\"statusForm.get('finish').value == 'pending'\">\n                        <!-- <strong>Loading...</strong> -->\n                        <div class=\"spinner-border mr-auto ml-auto\" role=\"status\" aria-hidden=\"true\"></div>\n                    </div>\n                    <div class=\"d-flex align-items-center\" *ngIf=\"statusForm.get('finish').value == 'ok'\">\n                        <!-- <strong>Loading...</strong> -->\n                        <div class=\"mr-auto ml-auto\" aria-hidden=\"true\"><i class=\"fas fa-check-circle fa-2x\" style=\"color: green;\"></i></div>\n                    </div>\n                    <div class=\"d-flex align-items-center\" *ngIf=\"statusForm.get('finish').value == 'error'\">\n                        <!-- <strong>Loading...</strong> -->\n                        <div class=\"mr-auto ml-auto\" aria-hidden=\"true\"><i class=\"fas fa-times-circle fa-2x\" style=\"color: red;\"></i></div>\n                    </div>\n               </div>\n            </div>\n        </div>\n        <div class=\"modal-footer\">\n            <!-- <button type=\"button\" class=\"btn btn-outline-dark\" (click)=\"previousStep()\">Previous</button> -->\n            <button type=\"button\" class=\"btn btn-outline-dark\" (click)=\"modal.close('finish')\" [disabled]=\"statusForm.get('finish').value != 'ok'\">Close</button>\n        </div>\n    </form>\n    \n    \n</ng-template>","/*\n   Copyright 2021-2022  Istituto di Linguistica Computazionale \"A. Zampolli\", Consiglio Nazionale delle Ricerche, Pisa, Italy.\n \nThis file is part of EpiLexo.\n\nEpiLexo is free software: you can redistribute it and/or modify it under the terms of the GNU General Public License as published by the Free Software Foundation, either version 3 of the License, or (at your option) any later version.\n\nEpiLexo is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for more details.\n\nYou should have received a copy of the GNU General Public License along with EpiLexo. If not, see <https://www.gnu.org/licenses/>.\n*/\n\nimport { Injectable } from '@angular/core';\nimport { Observable, of } from 'rxjs';\nimport { delay, map } from 'rxjs/operators';\nimport { HttpClient } from '@angular/common/http';\n\nexport interface Person {\n    id: string;\n    isActive: boolean;\n    age: number;\n    name: string;\n    gender: string;\n    company: string;\n    email: string;\n    phone: string;\n    disabled?: boolean;\n}\n\n@Injectable({\n    providedIn: 'root'\n})\nexport class DataService {\n    constructor(private http: HttpClient) { }\n\n    //@ts-ignore\n    getGithubAccounts(term: string = null) {\n        if (term) {\n            return this.http.get<any>(`https://api.github.com/search/users?q=${term}`).pipe(map(rsp => rsp.items));\n        } else {\n            return of([]);\n        }\n    }\n\n    getAlbums() {\n        return this.http.get<any[]>('https://jsonplaceholder.typicode.com/albums');\n    }\n\n    getPhotos() {\n        return this.http.get<any[]>('https://jsonplaceholder.typicode.com/photos');\n    }\n\n    //@ts-ignore\n    getPeople(term: string = null): Observable<Person[]> {\n        let items = getMockPeople();\n        if (term) {\n            items = items.filter(x => x.name.toLocaleLowerCase().indexOf(term.toLocaleLowerCase()) > -1);\n        }\n        return of(items).pipe(delay(500));\n    }\n}\n\nfunction getMockPeople() {\n    return [\n        {\n            'id': '5a15b13c36e7a7f00cf0d7cb',\n            'index': 2,\n            'isActive': true,\n            'picture': 'http://placehold.it/32x32',\n            'age': 23,\n            'name': 'Karyn Wright',\n            'gender': 'female',\n            'company': 'ZOLAR',\n            'email': 'karynwright@zolar.com',\n            'phone': '+1 (851) 583-2547'\n        },\n        {\n            'id': '5a15b13c2340978ec3d2c0ea',\n            'index': 3,\n            'isActive': false,\n            'picture': 'http://placehold.it/32x32',\n            'age': 35,\n            'name': 'Rochelle Estes',\n            'disabled': true,\n            'gender': 'female',\n            'company': 'EXTRAWEAR',\n            'email': 'rochelleestes@extrawear.com',\n            'phone': '+1 (849) 408-2029'\n        },\n        {\n            'id': '5a15b13c663ea0af9ad0dae8',\n            'index': 4,\n            'isActive': false,\n            'picture': 'http://placehold.it/32x32',\n            'age': 25,\n            'name': 'Mendoza Ruiz',\n            'gender': 'male',\n            'company': 'ZYTRAX',\n            'email': 'mendozaruiz@zytrax.com',\n            'phone': '+1 (904) 536-2020'\n        },\n        {\n            'id': '5a15b13cc9eeb36511d65acf',\n            'index': 5,\n            'isActive': false,\n            'picture': 'http://placehold.it/32x32',\n            'age': 39,\n            'name': 'Rosales Russell',\n            'gender': 'male',\n            'company': 'ELEMANTRA',\n            'email': 'rosalesrussell@elemantra.com',\n            'phone': '+1 (868) 473-3073'\n        },\n        {\n            'id': '5a15b13c728cd3f43cc0fe8a',\n            'index': 6,\n            'isActive': true,\n            'picture': 'http://placehold.it/32x32',\n            'age': 32,\n            'name': 'Marquez Nolan',\n            'gender': 'male',\n            'company': 'MIRACLIS',\n            'disabled': true,\n            'email': 'marqueznolan@miraclis.com',\n            'phone': '+1 (853) 571-3921'\n        },\n        {\n            'id': '5a15b13ca51b0aaf8a99c05a',\n            'index': 7,\n            'isActive': false,\n            'picture': 'http://placehold.it/32x32',\n            'age': 28,\n            'name': 'Franklin James',\n            'gender': 'male',\n            'company': 'CAXT',\n            'email': 'franklinjames@caxt.com',\n            'phone': '+1 (868) 539-2984'\n        },\n        {\n            'id': '5a15b13cc3b9381ffcb1d6f7',\n            'index': 8,\n            'isActive': false,\n            'picture': 'http://placehold.it/32x32',\n            'age': 24,\n            'name': 'Elsa Bradley',\n            'gender': 'female',\n            'company': 'MATRIXITY',\n            'email': 'elsabradley@matrixity.com',\n            'phone': '+1 (994) 583-3850'\n        },\n        {\n            'id': '5a15b13ce58cb6ff62c65164',\n            'index': 9,\n            'isActive': true,\n            'picture': 'http://placehold.it/32x32',\n            'age': 40,\n            'name': 'Pearson Thompson',\n            'gender': 'male',\n            'company': 'EZENT',\n            'email': 'pearsonthompson@ezent.com',\n            'phone': '+1 (917) 537-2178'\n        },\n        {\n            'id': '5a15b13c90b95eb68010c86e',\n            'index': 10,\n            'isActive': true,\n            'picture': 'http://placehold.it/32x32',\n            'age': 32,\n            'name': 'Ina Pugh',\n            'gender': 'female',\n            'company': 'MANTRIX',\n            'email': 'inapugh@mantrix.com',\n            'phone': '+1 (917) 450-2372'\n        },\n        {\n            'id': '5a15b13c2b1746e12788711f',\n            'index': 11,\n            'isActive': true,\n            'picture': 'http://placehold.it/32x32',\n            'age': 25,\n            'name': 'Nguyen Elliott',\n            'gender': 'male',\n            'company': 'PORTALINE',\n            'email': 'nguyenelliott@portaline.com',\n            'phone': '+1 (905) 491-3377'\n        },\n        {\n            'id': '5a15b13c605403381eec5019',\n            'index': 12,\n            'isActive': true,\n            'picture': 'http://placehold.it/32x32',\n            'age': 31,\n            'name': 'Mills Barnett',\n            'gender': 'male',\n            'company': 'FARMEX',\n            'email': 'millsbarnett@farmex.com',\n            'phone': '+1 (882) 462-3986'\n        },\n        {\n            'id': '5a15b13c67e2e6d1a3cd6ca5',\n            'index': 13,\n            'isActive': true,\n            'picture': 'http://placehold.it/32x32',\n            'age': 36,\n            'name': 'Margaret Reynolds',\n            'gender': 'female',\n            'company': 'ROOFORIA',\n            'email': 'margaretreynolds@rooforia.com',\n            'phone': '+1 (935) 435-2345'\n        },\n        {\n            'id': '5a15b13c947c836d177aa85c',\n            'index': 14,\n            'isActive': false,\n            'picture': 'http://placehold.it/32x32',\n            'age': 29,\n            'name': 'Yvette Navarro',\n            'gender': 'female',\n            'company': 'KINETICA',\n            'email': 'yvettenavarro@kinetica.com',\n            'phone': '+1 (807) 485-3824'\n        },\n        {\n            'id': '5a15b13c5dbbe61245c1fb73',\n            'index': 15,\n            'isActive': false,\n            'picture': 'http://placehold.it/32x32',\n            'age': 20,\n            'name': 'Elisa Guzman',\n            'gender': 'female',\n            'company': 'KAGE',\n            'email': 'elisaguzman@kage.com',\n            'phone': '+1 (868) 594-2919'\n        },\n        {\n            'id': '5a15b13c38fd49fefea8db80',\n            'index': 16,\n            'isActive': false,\n            'picture': 'http://placehold.it/32x32',\n            'age': 33,\n            'name': 'Jodie Bowman',\n            'gender': 'female',\n            'company': 'EMTRAC',\n            'email': 'jodiebowman@emtrac.com',\n            'phone': '+1 (891) 565-2560'\n        },\n        {\n            'id': '5a15b13c9680913c470eb8fd',\n            'index': 17,\n            'isActive': false,\n            'picture': 'http://placehold.it/32x32',\n            'age': 24,\n            'name': 'Diann Booker',\n            'gender': 'female',\n            'company': 'LYRIA',\n            'email': 'diannbooker@lyria.com',\n            'phone': '+1 (830) 555-3209'\n        }\n    ]\n}\n","/*\n   Copyright 2021-2022  Istituto di Linguistica Computazionale \"A. Zampolli\", Consiglio Nazionale delle Ricerche, Pisa, Italy.\n \nThis file is part of EpiLexo.\n\nEpiLexo is free software: you can redistribute it and/or modify it under the terms of the GNU General Public License as published by the Free Software Foundation, either version 3 of the License, or (at your option) any later version.\n\nEpiLexo is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for more details.\n\nYou should have received a copy of the GNU General Public License along with EpiLexo. If not, see <https://www.gnu.org/licenses/>.\n*/\n\nimport { Component, ElementRef, OnInit, ViewChild } from '@angular/core';\nimport { FormBuilder, FormControl, FormGroup } from '@angular/forms';\nimport { IActionMapping, ITreeOptions, ITreeState, KEYS, TreeModel, TREE_ACTIONS } from '@circlon/angular-tree-component';\nimport { debounceTime } from 'rxjs/operators';\nimport { ConceptService } from 'src/app/services/concept/concept.service';\nimport { LexicalEntriesService } from 'src/app/services/lexical-entries/lexical-entries.service';\nimport { v4 } from 'uuid';\n\nconst actionMapping: IActionMapping = {\n  mouse: {\n    /* dblClick: (tree, node, $event) => {\n      if (node.hasChildren) {\n        TREE_ACTIONS.TOGGLE_EXPANDED(tree, node, $event);\n      }\n    }, */\n    click: (tree, node, $event) => {\n      $event.shiftKey\n        ? TREE_ACTIONS.TOGGLE_ACTIVE_MULTI(tree, node, $event)\n        : TREE_ACTIONS.TOGGLE_ACTIVE(tree, node, $event);\n      \n      if(node.data.rename_mode){\n        $event.preventDefault();\n      }/* else{\n        TREE_ACTIONS.TOGGLE_ACTIVE(tree, node, $event);\n      } */\n    },\n    expanderClick: (tree, node, $event) => {\n      if(node.data.rename_mode){\n        $event.preventDefault();\n      }else{\n        //console.log(node);\n        TREE_ACTIONS.TOGGLE_EXPANDED(tree, node, $event);\n      }\n    }\n    /* contextMenu: (tree, node, $event) => {\n      //$event.preventDefault();\n      //alert(`context menu for ${node.data.name}`);\n      TREE_ACTIONS.TOGGLE_ACTIVE(tree, node, $event);\n    } */\n  },\n  keys: {\n    [KEYS.ENTER]: (tree, node, $event) => alert(`This is ${node.data.name}`)\n  }\n};\n\n@Component({\n  selector: 'app-concept-tree',\n  templateUrl: './concept-tree.component.html',\n  styleUrls: ['./concept-tree.component.scss']\n})\nexport class ConceptTreeComponent implements OnInit {\n\n  state!: ITreeState;\n  @ViewChild('treeConcept') treeConcept: any;\n  selectedNodeId;\n\n  options: ITreeOptions = {\n    actionMapping,\n    allowDrag: (node) => node.isLeaf,\n    allowDrop: (element, { parent, index }) => {\n      // return true / false based on element, to.parent, to.index. e.g.\n      //console.log(element, parent, index, parent.data.type == 'folder')\n      return parent.data.type == 'directory';\n    },\n    getNodeClone: (node) => ({\n      ...node.data,\n      id: v4(),\n      name: `copy of ${node.data.name}`\n    })\n  };\n  \n\n  searchIconSpinner = false;\n  initialValues\n  conceptFilterForm = new FormGroup({\n    search_text : new FormControl(null),\n    search_mode : new FormControl(null)\n  })\n\n  counter = 0;\n  nodes = [];\n  show = false;\n  offset: number;\n  modalShow: boolean;\n  limit: any;\n\n\n  constructor(private element: ElementRef,\n              private formBuilder: FormBuilder,\n              private lexicalService : LexicalEntriesService,\n              private conceptService : ConceptService\n  ) { }\n\n  ngOnInit(): void {\n    this.loadTree();\n    this.conceptFilterForm = this.formBuilder.group({\n      search_text : new FormControl(null),\n      search_mode : new FormControl('starts')\n    })\n    this.onChanges();\n    this.initialValues = this.conceptFilterForm.value\n  }\n\n\n  onChanges() {\n    this.conceptFilterForm.valueChanges.pipe(debounceTime(500)).subscribe(searchParams => {\n      console.log(searchParams)\n      this.searchFilter(searchParams)\n    })\n  }\n\n  onEvent = ($event: any) => {\n    console.log($event);\n\n    if ($event.eventName == 'activate' && $event.node.data.type != 'directory' && this.selectedNodeId != $event.node.data['element-id']) {\n      this.selectedNodeId = $event.node.data['element-id'];\n      /* //@ts-ignore\n      $(\"#epigraphyTabModal\").modal(\"show\");\n      $('.modal-backdrop').appendTo('.epigraphy-tab-body');\n      //@ts-ignore\n      $('#epigraphyTabModal').modal({backdrop: 'static', keyboard: false})  \n      $('body').removeClass(\"modal-open\")\n      $('body').css(\"padding-right\", \"\"); */\n\n    }\n  }\n\n  \n\n  onMoveNode($event) {\n    console.log($event);\n    let node_type = $event.node.type;\n    let target_type = $event.to.parent.type;\n    this.moveNode($event);\n    \n  }\n\n  moveNode(evt){\n    if(evt != undefined){\n      //console.log(evt);\n      let element_id = evt.node['element-id'];\n      let target_id = evt.to.parent['element-id'];\n      let parameters = {\n        \"requestUUID\": \"string\",\n        \"user-id\": 0,\n        \"element-id\": element_id,\n        \"target-id\": target_id\n      }\n            \n      \n      /* this.documentService.moveFolder(parameters).subscribe(\n        data=>{\n          this.toastr.info('Folder '+ evt.node['name'] +' moved', '', {\n            timeOut: 5000,\n          });\n          //console.log(data);\n        },error=>{\n          console.log(error)\n        }\n      ) */\n    }\n  }\n\n  loadTree(){\n    \n\n  }\n\n  onScrollDown(treeModel: TreeModel) {\n\n    this.offset += 500;\n    this.modalShow = true;\n\n    //@ts-ignore\n    $(\"#lazyLoadingModal\").modal(\"show\");\n    $('.modal-backdrop').appendTo('.tree-view');\n    $('body').removeClass(\"modal-open\")\n    $('body').css(\"padding-right\", \"\");\n\n    let parameters = this.conceptFilterForm.value;\n    parameters['offset'] = this.offset;\n    parameters['limit'] = this.limit;\n\n    this.lexicalService.getLexicalEntriesList(parameters).pipe(debounceTime(200)).subscribe(\n      data => {\n        //@ts-ignore\n        $('#lazyLoadingModal').modal('hide');\n        $('.modal-backdrop').remove();\n        for (var i = 0; i < data['list'].length; i++) {\n          this.nodes.push(data['list'][i]);\n        };\n        //this.counter = this.nodes.length;\n        this.treeConcept.treeModel.update();\n        this.updateTreeView();\n        this.modalShow = false;\n\n        setTimeout(() => {\n          //@ts-ignore\n          $('#lazyLoadingModal').modal('hide');\n          $('.modal-backdrop').remove();\n        }, 300);\n      },\n      error => {\n\n      }\n    )\n  }\n\n  updateTreeView() {\n    setTimeout(() => {\n      //@ts-ignore\n      $('.input-tooltip').tooltip({\n          trigger: 'hover'\n      });\n    }, 300);\n    \n    setTimeout(() => {\n      this.treeConcept.sizeChanged();\n      //@ts-ignore\n      $('.lexical-tooltip').tooltip();\n    }, 1000);\n  }\n\n  resetFields(){\n    this.conceptFilterForm.reset(this.initialValues, {emitEvent : false});\n    setTimeout(() => {\n      this.loadTree();\n      this.treeConcept.treeModel.update();\n      this.updateTreeView();\n      \n    }, 500);  \n  }\n\n\n  searchFilter(newPar) {\n    \n    setTimeout(() => {\n      const viewPort_prova = this.element.nativeElement.querySelector('tree-viewport') as HTMLElement;\n      viewPort_prova.scrollTop = 0\n    }, 300);\n\n    let search_text = newPar.search_text != null ? newPar.search_text : '';\n    this.searchIconSpinner = true;\n    let parameters = {\n      \"requestUUID\" : \"string\",\n      \"contains\" : newPar.search_mode == 'contains' ? true : false,\n      \"metadata\" : {},\n      \"search-text\": search_text,\n      \"start-with\" : newPar.search_mode == 'start' ? true : false,\n      \"user-id\": 0,\n      \"exact-date\": newPar.date_mode == 'exact' ? true : false,\n      \"from-date\":  newPar.date_mode == 'from' ? true : false,\n      \"util-date\":  newPar.date_mode == 'until' ? true : false\n    };\n    \n    console.log(parameters)\n    this.searchIconSpinner = false;\n    \n    /* this.documentService.searchFiles(newPar).subscribe(\n      data => {\n        if(data['files'].length > 0){\n          this.show = false;\n        }else {\n          this.show = true;\n        }\n        this.nodes = data['files'];\n        this.counter = data['results'];\n        this.treeText.treeModel.update();\n        this.updateTreeView();\n        this.searchIconSpinner = false;\n        \n      },\n      error => {\n        console.log(error)\n        this.searchIconSpinner = false;\n\n        this.toastr.error('Error on search text', 'Error', {\n          timeOut : 5000\n        })\n      }\n    ) */\n  }\n\n}\n","<form [formGroup]=\"conceptFilterForm\">\n  <div class=\"input-group col-md-12 mt-3\">\n    <div class=\" input-group col-md-12 p-0\">\n      <input formControlName=\"search_text\" id=\"filterConcept\" name=\"search_text\" type=\"text\" class=\"form-control\"\n        placeholder=\"Search\" />\n      <div class=\"input-group-append\">\n        <span class=\"input-group-text loading_icon_append border-left-0\" id=\"basic-addon2\">\n          <div class=\"spinner-border spinner-border-sm m-1\" role=\"status\" *ngIf=\"searchIconSpinner\">\n            <span class=\"sr-only\">Loading...</span>\n          </div>\n        </span>\n      </div>\n    </div>\n    <div class=\"input-group-append d-flex align-items-sm-stretch w-100\">\n\n      <button class=\"btn btn-light btn-block filter-button\" title=\"Add new child for selected node\"><i\n          class=\"fas fa-plus 2x\"></i></button>\n      <button class=\"btn btn-light btn-block reset-button\" type=\"button\" value=\"Reset\"\n        title=\"Add new sibling for selected node\"\n        style=\"border-top-right-radius: .25rem; border-bottom-right-radius: .25rem;\"><i\n          class=\"fas fa-user-plus 2x\"></i></button>\n      <button class=\"btn btn-light btn-block reset-button\" type=\"button\" value=\"Reset\" title=\"Delete selected node\"\n        style=\"border-top-right-radius: .25rem; border-bottom-right-radius: .25rem;\"><i\n          class=\"fas fa-times-circle 2x\"></i></button>\n\n\n    </div>\n    <div id=\"buttons-container \" class=\"input-group-append d-flex align-items-sm-stretch w-100\">\n      <button class=\"btn btn-secondary btn-block filter-button rounded-left\" type=\"button\" value=\"Filter\" title=\"Filter\"\n        data-toggle=\"collapse\" data-target=\"#conceptFilterCollapse\" aria-expanded=\"false\"\n        aria-controls=\"conceptFilterCollapse\" style=\"height: 25px;\"><i class=\"fa fa-filter\"></i></button>\n      <button class=\"btn btn-danger btn-block reset-button\" type=\"button\" value=\"Reset\" title=\"Reset\"\n        (click)=\"resetFields();\"\n        style=\"border-top-right-radius: .25rem; border-bottom-right-radius: .25rem;; height: 25px\"><i\n          class=\"fa fa-times\"></i></button>\n      <button class=\"btn btn-block counter-button\" type=\"button\" style=\"height: 25px;\"><span\n          class=\"font-weight-bold font-italic text-muted\">{{counter}}</span></button>\n    </div>\n\n    \n  </div>\n\n  <div class=\"d-flex flex-wrap mt-3\">\n\n    <div class=\"col-md-6 col-sm-6\">\n      <div class=\"form-check\">\n        <input formControlName=\"search_mode\" class=\"form-check-input\" type=\"radio\" name=\"search_mode\" id=\"startsRadio\"\n          value=\"starts\">\n        <label class=\"form-check-label\" for=\"startsRadio\">\n          Starts\n        </label>\n      </div>\n    </div>\n    <div class=\"col-md-6 col-sm-6\">\n      <div class=\"form-check\">\n        <input formControlName=\"search_mode\" class=\"form-check-input\" type=\"radio\" name=\"search_mode\" id=\"containsRadio\"\n          value=\"contains\">\n        <label class=\"form-check-label\" for=\"containsRadio\">\n          Contains\n        </label>\n      </div>\n    </div>\n\n  </div>\n\n</form>\n\n\n\n\n<div class=\"col-md-12 mt-3 rounded border border-secondary tree-view\" infiniteScroll [infiniteScrollDistance]=\"0.4\"\n  [infiniteScrollThrottle]=\"150\" [infiniteScrollContainer]=\"'.search-results'\" [fromRoot]=\"true\"\n  (scrolled)=\"onScrollDown(treeConcept.treeModel)\">\n  <p *ngIf=\"show\">Nessun risultato</p>\n\n  <tree-root #treeConcept [nodes]=\"nodes\" [(state)]=\"state\" [options]=\"options\" [focused]=\"true\"\n    (activate)=\"onEvent($event)\" (moveNode)=\"onMoveNode($event)\" [focused]=\"true\" (activate)=\"onEvent($event)\"\n    (deactivate)=\"onEvent($event)\" class=\"lexicalConceptTree\">\n\n    <div id=\"lazyLoadingModal\" class=\"modal fade\" role=\"dialog\">\n      <div class=\"modal-dialog\">\n\n        <!-- Modal content-->\n        <div class=\"modal-content\">\n          <div class=\"modal-body\">\n            <div class=\"d-flex justify-content-center\">\n              <div class=\"spinner-border\" role=\"status\">\n                <span class=\"sr-only\">Loading...</span>\n              </div>\n            </div>\n          </div>\n        </div>\n\n      </div>\n    </div>\n    <p class=\"mx-3\" *ngIf=\"show\">Nessun risultato</p>\n    <ng-template #treeNodeWrapperTemplate let-node let-index=\"index\">\n      <div class=\"node-wrapper\" style=\"justify-content: space-between; padding: 0px 15px;\">\n        <!-- [style.padding-left]=\"node.getNodePadding()\" -->\n        <div>\n          <tree-node-expander [node]=\"node\" *ngIf=\"node.data.hasChildren == true\"></tree-node-expander>\n          <div class=\"node-content-wrapper\" [class.node-content-wrapper-active]=\"node.isActive\"\n            [class.node-content-wrapper-focused]=\"node.isFocused\" (click)=\"node.mouseAction('click', $event)\"\n            (dblclick)=\"node.mouseAction('dblClick', $event)\" [contextMenu]=\"basicMenu\"\n            [contextMenuSubject]=\"node.data\">\n\n            <span\n              *ngIf=\"node.data.count == undefined && labelView && node.data.componentInstanceName == undefined && node.data.definition == undefined && node.data.type!='canonicalForm' && node.data.sense == undefined\">{{\n              node.data.label }}</span>\n            <span\n              *ngIf=\"node.data.count == undefined && idView && node.data.definition == undefined && node.data.type!='canonicalForm' && node.data.sense == undefined && node.data.etymologyInstanceName == undefined\">{{\n              node.data.lexicalEntryInstanceName }}</span>\n\n            <span\n              *ngIf=\"node.data.count == undefined && labelView && node.data.definition == undefined && node.data.type=='canonicalForm' && node.data.sense == undefined\"><b>{{\n                node.data.label }}</b></span>\n\n\n\n            <span class=\"lexical-tooltip\"\n              *ngIf=\"node.data.count == undefined && labelView && node.data.definition != undefined && node.data.label != undefined\"\n              data-toggle=\"tooltip\" data-html=\"true\" [title]=\"node.data.definition\">{{node.data.label.length >\n              10 ? (node.data.label | slice:0:10) +'...' : node.data.label}}</span>\n            <span class=\"lexical-tooltip\"\n              *ngIf=\"node.data.count == undefined && idView && node.data.definition != undefined && node.data.label != undefined\"\n              data-toggle=\"tooltip\" data-html=\"true\" [title]=\"node.data.definition\">{{ node.data.instanceName\n              }}</span>\n\n            <span *ngIf=\"node.data.count != undefined\"><i><span\n                  style=\"color: #6e6e6e\">{{node.data.label}}</span></i>&nbsp;({{ node.data.count\n              }})</span>\n            <!--  <span *ngIf=\"node.data.writtenRep != ''\">{{ node.data.writtenRep }}</span>\n            <sub *ngIf=\"labelView && node.data.sense == undefined\">{{node.data.pos}}</sub>\n            <span *ngIf=\"node.data.language != null && labelView\" class=\"lang\">@{{node.data.language}}</span> -->\n\n          </div>\n        </div>\n\n      </div>\n    </ng-template>\n  </tree-root>\n</div>","/*\n   Copyright 2021-2022  Istituto di Linguistica Computazionale \"A. Zampolli\", Consiglio Nazionale delle Ricerche, Pisa, Italy.\n \nThis file is part of EpiLexo.\n\nEpiLexo is free software: you can redistribute it and/or modify it under the terms of the GNU General Public License as published by the Free Software Foundation, either version 3 of the License, or (at your option) any later version.\n\nEpiLexo is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for more details.\n\nYou should have received a copy of the GNU General Public License along with EpiLexo. If not, see <https://www.gnu.org/licenses/>.\n*/\n\nimport { HttpClient, HttpHeaders } from '@angular/common/http';\nimport { Injectable } from '@angular/core';\nimport { BehaviorSubject, Observable } from 'rxjs';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class DocumentSystemService {\n\n  private baseUrl_document = \"https://lari2.ilc.cnr.it/cash/\"\n\n  private _epigraphyData: BehaviorSubject<object> = new BehaviorSubject(null);\n  private _epigraphyTextData: BehaviorSubject<string> = new BehaviorSubject(null);\n  private _epigraphyLeidenData: BehaviorSubject<any> = new BehaviorSubject(null);\n  private _epigraphyTranslationData: BehaviorSubject<any> = new BehaviorSubject(null);\n  private _metadataData : BehaviorSubject<object> = new BehaviorSubject(null);\n  private _triggerMetadataPanel : BehaviorSubject<boolean> = new BehaviorSubject(null);\n\n  epigraphyData$ = this._epigraphyData.asObservable();\n  epigraphyTextData$ = this._epigraphyTextData.asObservable();\n  epigraphyLeidenData$ = this._epigraphyLeidenData.asObservable();\n  epigraphyTranslationData$ = this._epigraphyTranslationData.asObservable();\n  metadataData$ = this._metadataData.asObservable();\n  triggerMetadataPanel$ = this._triggerMetadataPanel.asObservable();\n\n  constructor(private http: HttpClient) { }\n\n  sendToEpigraphyTab(object: object) {\n    this._epigraphyData.next(object)\n  } \n\n  sendTextToEpigraphyTab(string : string){\n    this._epigraphyTextData.next(string);\n  }\n\n  sendTranslationToEpigraphyTab(array : any){\n    this._epigraphyTranslationData.next(array);\n  }\n\n  sendLeidenToEpigraphyTab(string : any){\n    this._epigraphyLeidenData.next(string);\n  }\n\n  sendToMetadataPanel(object : object){\n    this._metadataData.next(object);\n  }\n\n  triggerMetadataPanel(bool: boolean){\n    this._triggerMetadataPanel.next(bool);\n  }\n\n  //GET /api/getDocumentSystem  ---> return document system\n  getDocumentSystem(): Observable<any> {\n    return this.http.get(this.baseUrl_document + \"api/getDocumentSystem?requestUUID=11\")\n  }\n\n  //POST /api/crud/addFolder --> add folder to document system\n  addFolder(parameters): Observable<any> {\n    return this.http.post(this.baseUrl_document + \"api/crud/addFolder\", parameters)\n  }\n\n  //POST /api/crud/removeFolder --> remove Folder folder from document system\n  removeFolder(parameters): Observable<any> {\n    return this.http.post(this.baseUrl_document + \"api/crud/removeFolder\", parameters)\n  }\n\n  //POST /api/crud/moveFolder --> move Folder to another folder\n  moveFolder(parameters): Observable<any> {\n    return this.http.post(this.baseUrl_document + \"api/crud/moveFolder\", parameters)\n  }\n\n  //POST /api/crud/renameFolder --> rename folder\n  renameFolder(parameters): Observable<any> {\n    return this.http.post(this.baseUrl_document + \"api/crud/renameFolder\", parameters)\n  }\n\n\n  //POST /api/crud/uploadFile --> upload text\n  uploadFile(parameters, element_id, request_uuid): Observable<any> {\n    return this.http.post(this.baseUrl_document + \"api/crud/uploadFile?requestUUID=\"+request_uuid+\"&element-id=\"+element_id+\"\", parameters)\n  }\n\n  //POST /api/crud/removeFile --> upload text\n  removeFile(parameters): Observable<any> {\n    return this.http.post(this.baseUrl_document + \"api/crud/removeFile\", parameters)\n  }\n\n  //POST /api/crud/renameFile --> upload text\n  renameFile(parameters): Observable<any> {\n    return this.http.post(this.baseUrl_document + \"api/crud/renameFile\", parameters)\n  }\n\n  //POST /api/crud/moveFileTo --> move file to another folder\n  moveFileTo(parameters): Observable<any> {\n    return this.http.post(this.baseUrl_document + \"api/crud/moveFileTo\", parameters)\n  }\n\n  //POST /api/crud/copyFileTo --> move file to another folder\n  copyFileTo(parameters): Observable<any> {\n    return this.http.post(this.baseUrl_document + \"api/crud/copyFileTo\", parameters)\n  }\n\n  //POST /api/crud/downloadFile --> move file to another folder\n  downloadFile(parameters): Observable<any> {\n    return this.http.post(this.baseUrl_document + \"api/crud/downloadFile\", parameters)\n  }\n\n  //POST /api/crud/updateMetadata --> move file to another folder\n  updateMetadata(parameters): Observable<any> {\n    return this.http.post(this.baseUrl_document + \"api/crud/updateMetadata\", parameters)\n  }\n  \n  //POST /api/crud/deleteMetadata --> move file to another folder\n  deleteMetadata(parameters): Observable<any> {\n    return this.http.post(this.baseUrl_document + \"api/crud/deleteMetadata\", parameters)\n  }\n\n  //POST /api/crud/searchFiles --> move file to another folder\n  searchFiles(parameters): Observable<any> {\n    return this.http.post(this.baseUrl_document + \"api/searchFiles\", parameters)\n  }\n\n  //POST /api/crud/createFile --> create file\n  createFile(parameters): Observable<any> {\n    return this.http.post(this.baseUrl_document + \"api/crud/createFile\", parameters)\n  }\n\n\n  getContent(nodeId) : Observable<any> {\n    return this.http.get(this.baseUrl_document + \"api/v1/getcontent?requestUUID=11&nodeid=\"+nodeId);\n  }\n\n\n  testConvert(parameters) : Observable<any> {\n    return this.http.post(\"https://lari2.ilc.cnr.it/\" + 'leiden', parameters);\n  }\n}\n","/*\n   Copyright 2021-2022  Istituto di Linguistica Computazionale \"A. Zampolli\", Consiglio Nazionale delle Ricerche, Pisa, Italy.\n \nThis file is part of EpiLexo.\n\nEpiLexo is free software: you can redistribute it and/or modify it under the terms of the GNU General Public License as published by the Free Software Foundation, either version 3 of the License, or (at your option) any later version.\n\nEpiLexo is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for more details.\n\nYou should have received a copy of the GNU General Public License along with EpiLexo. If not, see <https://www.gnu.org/licenses/>.\n*/\n\nimport { Component, ElementRef, OnInit, Renderer2, ViewChild } from '@angular/core';\nimport { ExpanderService } from 'src/app/services/expander/expander.service';\nimport { LexicalEntriesService } from 'src/app/services/lexical-entries/lexical-entries.service';\n\nimport {\n  animate,\n  style,\n  transition,\n  trigger,\n  state\n} from \"@angular/animations\";\n\n@Component({\n  selector: 'app-synsem-tab',\n  templateUrl: './synsem-tab.component.html',\n  styleUrls: ['./synsem-tab.component.scss'],\n  animations: [\n    trigger('slideInOut', [\n      state('in', style({\n        height: 'calc(100vh - 22rem)',\n        \n      })),\n      state('out', style({\n        height: 'calc(50vh - 12.5rem)',\n      })),\n      transition('in => out', animate('400ms ease-in-out')),\n      transition('out => in', animate('400ms ease-in-out'))\n    ])\n  ]\n})\nexport class SynsemTabComponent implements OnInit {\n\n  lock = 0;\n  object: any;\n  exp_trig = '';\n  lexicalEntryData : any;\n  isLexicalEntry = false;\n\n  @ViewChild('expander') expander_body: ElementRef;\n\n  constructor(private lexicalService: LexicalEntriesService, private expand: ExpanderService, private rend : Renderer2) { }\n\n  ngOnInit(): void {\n    this.lexicalService.coreData$.subscribe(\n      object => {\n        if(this.object != object){\n          this.lexicalEntryData = null;\n        }\n        this.object = object\n        \n        if(this.object != null){\n          if(this.object.lexicalEntry != undefined && this.object.sense == undefined){\n            this.isLexicalEntry = true;\n            this.lexicalEntryData = object;\n          }else if(this.object.form != undefined){\n            this.isLexicalEntry = false;\n            this.lexicalEntryData = null;\n            this.object = null;\n          }else if(this.object.sense != undefined){\n            this.isLexicalEntry = false;\n            this.lexicalEntryData = null;\n            this.object = null;\n          }\n        }\n      }\n    );\n    \n    this.expand.expEdit$.subscribe(\n      trigger => {\n        if(trigger){\n          let isEditExpanded = this.expand.isEditTabExpanded();\n          let isEpigraphyExpanded = this.expand.isEpigraphyTabExpanded();\n\n          if(!isEpigraphyExpanded){\n            this.exp_trig = 'in';\n            this.rend.setStyle(this.expander_body.nativeElement, 'height', 'calc(100vh - 22rem)')\n            this.rend.setStyle(this.expander_body.nativeElement, 'max-height', 'calc(100vh - 22rem)')\n          }else{\n            this.rend.setStyle(this.expander_body.nativeElement, 'height', 'calc(50vh - 12.5rem)');\n            this.rend.setStyle(this.expander_body.nativeElement, 'max-height', 'calc(50vh - 12.5rem)');\n            this.exp_trig = 'in';\n          }\n          \n        }else if(trigger==null){\n          return;\n        }else{\n          this.rend.setStyle(this.expander_body.nativeElement, 'height', 'calc(50vh - 12.5rem)');\n          this.rend.setStyle(this.expander_body.nativeElement, 'max-height', 'calc(50vh - 12.5rem)');\n          this.exp_trig = 'out';\n        }\n      }\n    );\n\n    this.expand.expEpigraphy$.subscribe(\n      trigger => {\n        setTimeout(() => {\n          if(trigger){\n            this.exp_trig = 'in';\n            this.rend.setStyle(this.expander_body.nativeElement, 'height', 'calc(50vh - 12.5rem)')\n            this.rend.setStyle(this.expander_body.nativeElement, 'max-height', 'calc(50vh - 12.5rem)')\n          }else if(trigger==null){\n            return;\n          }else{\n            this.rend.setStyle(this.expander_body.nativeElement, 'max-height', 'calc(50vh - 12.5rem)');\n            this.exp_trig = 'out';\n          }\n        }, 100);\n        \n      }\n    );\n  }\n\n  changeStatus() {\n    if (this.lock < 2) {\n      this.lock++;\n    } else if (this.lock > 1) {\n      this.lock--;\n    }\n    setTimeout(() => {\n      //@ts-ignore\n      $('.locked-tooltip').tooltip({\n        trigger: 'hover'\n      });\n    }, 10);\n  }\n\n}\n","\n\n<div id=\"cardsAccordion\" class=\"accordion\" [hidden]=\"object == null\">\n    <div class=\"card my-2\">\n        <div class=\"card-header\">\n            <h5 class=\"mb-0 w-100 d-flex justify-content-between align-self-center\">\n                <div>\n                    <span class=\"btn\">\n                        CREATED BY foo ON 11/12/2020 15:15\n                    </span>\n                </div>\n                <div>\n                    <button class=\"btn btn-link\">\n                        <i class=\"fa fa-trash\"></i>\n                    </button>\n                    <button class=\"btn btn-link\" (click)=\"changeStatus()\">\n                        <i class=\"fa fa-circle\" *ngIf=\"lock==0\" style=\"color: red\"></i>\n                        <i class=\"fa fa-circle\" *ngIf=\"lock==1\" style=\"color: yellow\"></i>\n                        <i class=\"fa fa-circle locked-tooltip\" *ngIf=\"lock==2\" data-toggle=\"tooltip\"\n                            data-placement=\"bottom\" data-html=\"true\" title=\"Locked tooltip\" style=\"color:green;\"></i>\n                    </button>\n                </div>\n            </h5>\n        </div>\n        <div #expander [@slideInOut]=\"exp_trig\" class=\"card-body\">\n            <app-lexical-entry-synsem-form [lexData]=\"lexicalEntryData\" *ngIf=\"isLexicalEntry\"></app-lexical-entry-synsem-form>\n        </div>\n        <div class=\"card-footer text-muted\">\n            <div class=\"w-100 d-flex justify-content-between align-items-center\">\n                <div>\n                    <span>LAST UPDATE ON 15/12/2020 14:30 BY foo</span>\n                </div>\n                <div class=\"btn-group dropup dropleft\">\n                    <button class=\"btn btn-success\" type=\"button\" id=\"dropdownAddLemma\" data-toggle=\"dropdown\"\n                        aria-haspopup=\"true\" aria-expanded=\"false\"> <i class=\"fas fa-plus\"></i> </button>\n                    <div class=\"dropdown-menu dropdown-menu-right\" aria-labelledby=\"dropdownAddLemma\">\n                        <a class=\"dropdown-item\" href=\"#\">Add Form</a>\n                        <a class=\"dropdown-item\" href=\"#\">Add Sense</a>\n                        <a class=\"dropdown-item\" href=\"#\">Add Frame</a>\n                        <a class=\"dropdown-item\" href=\"#\">Add Lexical Concept</a>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n</div>","/*\n   Copyright 2021-2022  Istituto di Linguistica Computazionale \"A. Zampolli\", Consiglio Nazionale delle Ricerche, Pisa, Italy.\n \nThis file is part of EpiLexo.\n\nEpiLexo is free software: you can redistribute it and/or modify it under the terms of the GNU General Public License as published by the Free Software Foundation, either version 3 of the License, or (at your option) any later version.\n\nEpiLexo is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for more details.\n\nYou should have received a copy of the GNU General Public License along with EpiLexo. If not, see <https://www.gnu.org/licenses/>.\n*/\n\nimport { Component, ElementRef, OnInit, Renderer2, ViewChild } from '@angular/core';\nimport { LexicalEntriesService } from '../../../../../services/lexical-entries/lexical-entries.service';\nimport { ExpanderService } from 'src/app/services/expander/expander.service';\n\nimport {\n  animate,\n  style,\n  transition,\n  trigger,\n  state\n} from \"@angular/animations\";\nimport { ToastrService } from 'ngx-toastr';\n\n\n@Component({\n  selector: 'app-decomposition-tab',\n  templateUrl: './decomposition-tab.component.html',\n  styleUrls: ['./decomposition-tab.component.scss'],\n  animations: [\n    trigger('slideInOut', [\n      state('in', style({\n        height: 'calc(100vh - 22rem)',\n        \n      })),\n      state('out', style({\n        height: 'calc(50vh - 12.5rem)',\n      })),\n      transition('in => out', animate('400ms ease-in-out')),\n      transition('out => in', animate('400ms ease-in-out'))\n    ])\n  ]\n})\nexport class DecompositionTabComponent implements OnInit {\n\n  lock = 0;\n  object: any;\n  exp_trig = '';\n\n  creationDate;\n  lastUpdate;\n\n  isLexicalEntry = false;\n  searchIconSpinner = false;\n\n  decompData : any;\n\n  @ViewChild('expander') expander_body: ElementRef;\n  \n  constructor(private toastr: ToastrService, private lexicalService: LexicalEntriesService, private expand: ExpanderService, private rend: Renderer2) { }\n\n  ngOnInit(): void {\n    this.lexicalService.coreData$.subscribe(\n      object => {\n        this.object = null;\n        if(this.object != object){\n          this.decompData = null;\n        }\n        this.object = object\n        \n        if(this.object != null){\n          if(this.object.lexicalEntry != undefined && this.object.sense == undefined){\n            this.isLexicalEntry = true;\n            this.decompData = object;\n\n            this.creationDate = object['creationDate'];\n            this.lastUpdate = object['lastUpdate']\n          }else if(this.object.form != undefined){\n            this.isLexicalEntry = false;\n            this.decompData = null;\n            this.object = null;\n          }else if(this.object.sense != undefined){\n            this.isLexicalEntry = false;\n            this.decompData = null;\n            this.object = null;\n          }\n        }\n      }\n    );\n\n    this.lexicalService.decompData$.subscribe(\n      object => {\n        this.object = null;\n        if(this.object != object){\n          this.decompData = null;\n        }\n        this.object = object\n        \n        if(this.object != null){\n          if(this.object.lexicalEntry != undefined && this.object.sense == undefined){\n            this.isLexicalEntry = true;\n            this.decompData = object;\n\n            this.creationDate = object['creationDate'];\n            this.lastUpdate = object['lastUpdate']\n          }else if(this.object.form != undefined){\n            this.isLexicalEntry = false;\n            this.decompData = null;\n            this.object = null;\n          }else if(this.object.sense != undefined){\n            this.isLexicalEntry = false;\n            this.decompData = null;\n            this.object = null;\n          }\n        }\n      }\n    );\n\n    this.lexicalService.updateLexCardReq$.subscribe(\n      data => {\n        console.log(data)\n        if(data != null){\n          this.lastUpdate = data['lastUpdate']\n          if(data['creationDate'] != undefined){\n            this.creationDate = data['creationDate']\n          }\n        }\n      }\n    )\n\n    this.expand.expEdit$.subscribe(\n      trigger => {\n        setTimeout(() => {\n          if(trigger){\n            let isEditExpanded = this.expand.isEditTabExpanded();\n            let isEpigraphyExpanded = this.expand.isEpigraphyTabExpanded();\n  \n            if(!isEpigraphyExpanded){\n              this.exp_trig = 'in';\n              this.rend.setStyle(this.expander_body.nativeElement, 'height', 'calc(100vh - 22rem)')\n              this.rend.setStyle(this.expander_body.nativeElement, 'max-height', 'calc(100vh - 22rem)')\n            }else{\n              this.rend.setStyle(this.expander_body.nativeElement, 'height', 'calc(50vh - 12.5rem)');\n              this.rend.setStyle(this.expander_body.nativeElement, 'max-height', 'calc(50vh - 12.5rem)');\n              this.exp_trig = 'in';\n            }\n            \n          }else if(trigger==null){\n            return;\n          }else{\n            this.rend.setStyle(this.expander_body.nativeElement, 'height', 'calc(50vh - 12.5rem)');\n            this.rend.setStyle(this.expander_body.nativeElement, 'max-height', 'calc(50vh - 12.5rem)');\n            this.exp_trig = 'out';\n          }\n        }, 100);\n        \n      }\n    );\n\n    this.expand.expEpigraphy$.subscribe(\n      trigger => {\n        setTimeout(() => {\n          if(trigger){\n            this.exp_trig = 'in';\n            this.rend.setStyle(this.expander_body.nativeElement, 'height', 'calc(50vh - 12.5rem)')\n            this.rend.setStyle(this.expander_body.nativeElement, 'max-height', 'calc(50vh - 12.5rem)')\n          }else if(trigger==null){\n            return;\n          }else{\n            this.rend.setStyle(this.expander_body.nativeElement, 'max-height', 'calc(50vh - 12.5rem)');\n            this.exp_trig = 'out';\n          }\n        }, 100);\n        \n      }\n    );\n  }\n\n  /* changeStatus() {\n    if (this.lock < 2) {\n      this.lock++;\n    } else if (this.lock > 1) {\n      this.lock--;\n    }\n\n    if(this.lock==2){\n      setTimeout(() => {\n        //@ts-ignore\n        $('.locked-tooltip').tooltip({\n          trigger: 'hover'\n        });\n      }, 10);\n    }else if(this.lock < 2){\n      setTimeout(() => {\n        //@ts-ignore\n        $('.locked-tooltip').tooltip('disable');\n      }, 10);\n    }\n    \n  } */\n\n  addNewForm(){\n    this.searchIconSpinner = true;\n    /* console.log(this.object) */\n    this.object['request'] = 'form'\n    if(this.isLexicalEntry){\n      let lexicalId = this.object.lexicalEntryInstanceName;\n      this.lexicalService.createNewForm(lexicalId).subscribe(\n        data=>{\n          this.toastr.success('Form added correctly', '', {\n            timeOut: 5000,\n          });\n          console.log(data);\n          if(data['creator'] == this.object.creator){\n            data['flagAuthor'] = false;\n          }else{\n            data['flagAuthor'] = true;\n          }\n          this.lexicalService.addSubElementRequest({'lex' : this.object, 'data' : data});\n          this.searchIconSpinner = false;\n        },error=> {\n          console.log(error)\n          this.toastr.error(error.error, 'Error', {\n            timeOut: 5000,\n          });\n          this.searchIconSpinner = false;\n        }\n      )\n    }/* else if(this.isForm){\n      let parentNodeInstanceName = this.object.parentNodeInstanceName;\n      //console.log(this.object);\n      this.object['request'] = 'form';\n      this.object['lexicalEntryInstanceName'] = parentNodeInstanceName\n      this.lexicalService.createNewForm(parentNodeInstanceName).subscribe(\n        data=>{\n          if(data['creator'] == this.object.creator){\n            data['flagAuthor'] = false;\n          }else{\n            data['flagAuthor'] = true;\n          }\n          this.lexicalService.addSubElementRequest({'lex' : this.object, 'data' : data});\n          this.searchIconSpinner = false;\n          this.toastr.success('Form added correctly', '', {\n            timeOut: 5000,\n          });\n        },error=> {\n          //console.log(error)\n          this.searchIconSpinner = false;\n          this.toastr.error(error.error, 'Error', {\n            timeOut: 5000,\n          });\n        }\n      )\n    }else if(this.isSense){\n      let parentNodeInstanceName = this.object.parentNodeInstanceName;\n      this.object['request'] = 'form';\n      this.object['lexicalEntryInstanceName'] = parentNodeInstanceName\n      //console.log(this.object);\n      this.lexicalService.createNewForm(parentNodeInstanceName).subscribe(\n        data=>{\n          if(data['creator'] == this.object.creator){\n            data['flagAuthor'] = false;\n          }else{\n            data['flagAuthor'] = true;\n          }\n          this.lexicalService.addSubElementRequest({'lex' : this.object, 'data' : data});\n          this.searchIconSpinner = false;\n          this.toastr.success('Form added correctly', '', {\n            timeOut: 5000,\n          });\n        },error=> {\n          this.toastr.error(error.error, 'Error', {\n            timeOut: 5000,\n          });\n          this.searchIconSpinner = false;\n        }\n      )\n    } */\n    \n  }\n\n  addNewSense(){\n    this.searchIconSpinner = true;\n    this.object['request'] = 'sense'\n    if(this.isLexicalEntry){\n      let lexicalId = this.object.lexicalEntryInstanceName;\n      this.lexicalService.createNewSense(lexicalId).subscribe(\n        data=>{\n          if(data['creator'] == this.object.creator){\n            data['flagAuthor'] = false;\n          }else{\n            data['flagAuthor'] = true;\n          }\n          this.lexicalService.addSubElementRequest({'lex' : this.object, 'data' : data});\n          this.searchIconSpinner = false;\n          this.toastr.success('Sense added correctly', '', {\n            timeOut: 5000,\n          });\n        },error=> {\n          this.searchIconSpinner = false;\n          this.toastr.error(error.error, 'Error', {\n            timeOut: 5000,\n          });\n          \n        }\n      )\n    }/* else if(this.isSense){\n      let parentNodeInstanceName = this.object.parentNodeInstanceName;\n      this.object['lexicalEntryInstanceName'] = parentNodeInstanceName\n      this.object['request'] = 'sense'\n      //console.log(this.object);\n      this.lexicalService.createNewSense(parentNodeInstanceName).subscribe(\n        data=>{\n          if(data['creator'] == this.object.creator){\n            data['flagAuthor'] = false;\n          }else{\n            data['flagAuthor'] = true;\n          }\n          this.lexicalService.addSubElementRequest({'lex' : this.object, 'data' : data});\n          this.searchIconSpinner = false;\n          this.toastr.success('Sense added correctly', '', {\n            timeOut: 5000,\n          });\n        },error=> {\n          this.searchIconSpinner = false;\n          this.toastr.error(error.error, 'Error', {\n            timeOut: 5000,\n          });\n        }\n      )\n    }else if(this.isForm){\n      let parentNodeInstanceName = this.object.parentNodeInstanceName;\n      this.object['lexicalEntryInstanceName'] = parentNodeInstanceName\n      this.object['request'] = 'sense'\n      //console.log(this.object);\n      this.lexicalService.createNewSense(parentNodeInstanceName).subscribe(\n        data=>{\n          if(data['creator'] == this.object.creator){\n            data['flagAuthor'] = false;\n          }else{\n            data['flagAuthor'] = true;\n          }\n          this.lexicalService.addSubElementRequest({'lex' : this.object, 'data' : data});\n          this.searchIconSpinner = false;\n          this.toastr.success('Sense added correctly', '', {\n            timeOut: 5000,\n          });\n          //this.lexicalService.refreshLexEntryTree();\n        },error=> {\n          this.searchIconSpinner = false;\n          this.toastr.error(error.error, 'Error', {\n            timeOut: 5000,\n          });\n          //this.lexicalService.refreshLexEntryTree();\n        }\n      )\n    } */\n\n  }\n\n  addNewEtymology(){\n    this.searchIconSpinner = true;\n    this.object['request'] = 'etymology'\n    let parentNodeInstanceName = '';\n    if(this.object.lexicalEntryInstanceName != undefined\n      && this.object.senseInstanceName == undefined){\n        console.log(1)\n        parentNodeInstanceName = this.object.lexicalEntryInstanceName;\n    }/* else if(this.object.formInstanceName != undefined){\n      parentNodeInstanceName = this.object.parentNodeInstanceName;\n      this.object['lexicalEntryInstanceName'] = parentNodeInstanceName\n      console.log(2)\n    }else if(this.object.senseInstanceName != undefined){\n      parentNodeInstanceName = this.object.parentNodeInstanceName;\n      this.object['lexicalEntryInstanceName'] = parentNodeInstanceName\n      console.log(3)\n    } */\n\n    console.log(parentNodeInstanceName)\n    this.lexicalService.createNewEtymology(parentNodeInstanceName).subscribe(\n      data=>{\n        console.log(data)\n        if(data['creator'] == this.object.creator){\n          data['flagAuthor'] = false;\n        }else{\n          data['flagAuthor'] = true;\n        }\n        this.lexicalService.addSubElementRequest({'lex' : this.object, 'data' : data});\n        this.searchIconSpinner = false;\n        this.toastr.success('Etymology added correctly', '', {\n          timeOut: 5000,\n        });\n      },error=> {\n        this.searchIconSpinner = false;\n      }\n    )\n\n  }\n\n}\n","\n\n<div id=\"cardsAccordion\" class=\"accordion\" [hidden]=\"object == null\">\n    <div class=\"card my-2\">\n        <div class=\"card-header\">\n            <h5 class=\"mb-0 w-100 d-flex justify-content-between align-self-center\">\n                <div>\n                    <span class=\"btn\" *ngIf=\"object != null\">\n                        CREATED BY {{object.creator}} ON {{creationDate | date :'dd/MM/yyyy hh:mm:ss'}}\n                    </span>\n                </div>\n                <div>\n                    <div class=\"spinner-border spinner-border-sm m-1\" role=\"status\" *ngIf=\"searchIconSpinner\">\n                        <span class=\"sr-only\">Loading...</span>\n                    </div>\n                    <!-- <button class=\"btn btn-link\">\n                        <i class=\"fa fa-trash\"></i>\n                    </button> -->\n                    <!-- <button class=\"btn btn-link\" (click)=\"changeStatus()\">\n                        <i class=\"fa fa-circle\" *ngIf=\"lock==0\" style=\"color: red\"></i>\n                        <i class=\"fa fa-circle\" *ngIf=\"lock==1\" style=\"color: yellow\"></i>\n                        <i class=\"fa fa-circle locked-tooltip\" *ngIf=\"lock==2\" data-toggle=\"tooltip\"\n                            data-placement=\"bottom\" data-html=\"true\" title=\"Locked tooltip\" style=\"color:green;\"></i>\n                    </button> -->\n                </div>\n            </h5>\n        </div>\n        <div #expander [@slideInOut]=\"exp_trig\" class=\"card-body\">\n            \n            <app-lexical-entry-decomp-form [decData]=\"decompData\" *ngIf=\"isLexicalEntry\"></app-lexical-entry-decomp-form>\n            \n        </div>\n        <div class=\"card-footer text-muted\">\n            <div class=\"w-100 d-flex justify-content-between align-items-center\">\n                <div *ngIf=\"object != null\">\n                    <span>LAST UPDATE ON {{lastUpdate | date :'dd/MM/yyyy hh:mm:ss'}} BY {{object.revisor}}</span>\n                </div>\n                <div class=\"btn-group dropup dropleft\">\n                    <button class=\"btn btn-success\" type=\"button\" id=\"dropdownAddLemma\" data-toggle=\"dropdown\"\n                        aria-haspopup=\"true\" aria-expanded=\"false\"> <i class=\"fas fa-plus\"></i> </button>\n                    <div class=\"dropdown-menu dropdown-menu-right\" aria-labelledby=\"dropdownAddLemma\">\n                        <button class=\"dropdown-item\" title=\"add new form\" (click)=\"addNewForm()\">Add Form</button>\n                        <button class=\"dropdown-item\" title=\"add new sense\" (click)=\"addNewSense()\">Add Sense</button>\n                        <button class=\"dropdown-item\" title=\"add new etymology\" (click)=\"addNewEtymology()\">Add Etymology</button>\n                        <!-- <button class=\"dropdown-item\" title=\"add new bibliography item\" (click)=\"showBiblioModal()\" disabled>Add Bibliography</button> -->\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n</div>","/*\n   Copyright 2021-2022  Istituto di Linguistica Computazionale \"A. Zampolli\", Consiglio Nazionale delle Ricerche, Pisa, Italy.\n \nThis file is part of EpiLexo.\n\nEpiLexo is free software: you can redistribute it and/or modify it under the terms of the GNU General Public License as published by the Free Software Foundation, either version 3 of the License, or (at your option) any later version.\n\nEpiLexo is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for more details.\n\nYou should have received a copy of the GNU General Public License along with EpiLexo. If not, see <https://www.gnu.org/licenses/>.\n*/\n\nimport { Component, OnInit } from '@angular/core';\n\n@Component({\n  selector: 'app-home-page',\n  templateUrl: './home-page.component.html',\n  styleUrls: ['./home-page.component.scss']\n})\nexport class HomePageComponent implements OnInit {\n\n  constructor() { }\n\n  ngOnInit(): void {\n  }\n\n}\n","\n\n<div class=\"cover-container d-flex w-100 p-3 mx-auto flex-column text-center\">\n\n    <div class=\"starter-template\">\n        <h3>Institute for Computational Linguistics (ILC)</h3>\n        <p class=\"lead\">\"A. Zampolli CNR - Pisa, Italy\"<br> <a href=\"http://www.ilc.cnr.it\" target=\"_blank\">www.ilc.cnr.it</a></p>\n        <img class=\"logo\" src=\"../../../assets/images/LexOIcon.png\" width=\"100\"/>\n        <h5 class=\"title\">LexO-Angular v1.0</h5>\n        \n    </div>\n    <footer class=\"mastfoot\">\n        <div class=\"inner\">\n          <p>Institute for Computational Linguistics \"A. Zampolli\", Pisa <br/> <a href=\"https://www.ilc.cnr.it.com/\">http://ilc.cnr.it</a></p>\n        </div>\n    </footer>\n</div>\n","import { HttpClient, HttpHeaders } from '@angular/common/http';\nimport { Injectable } from '@angular/core';\nimport { KeycloakService } from 'keycloak-angular';\nimport { KeycloakProfile, KeycloakTokenParsed } from 'keycloak-js';\nimport { from, Observable } from 'rxjs';\nimport { environment } from 'src/environments/environment';\n\n@Injectable()\nexport class AuthService {\n\n  private baseUrl = environment.keycloak.issuer;\n  private realmId = environment.keycloak.realm;\n  private clientId = environment.keycloak.clientId;\n  \n\n\n  constructor(private keycloakService: KeycloakService, private http: HttpClient) {}\n\n  public getLoggedUser(): KeycloakTokenParsed | undefined {\n    try {\n      const userDetails: KeycloakTokenParsed | undefined = this.keycloakService.getKeycloakInstance()\n        .idTokenParsed;\n      return userDetails;\n    } catch (e) {\n      console.error(\"Exception\", e);\n      return undefined;\n    }\n  }\n\n  public isLoggedIn() : Promise<boolean> {\n    return this.keycloakService.isLoggedIn();\n  }\n\n  public loadUserProfile() : Promise<KeycloakProfile> {\n    return this.keycloakService.loadUserProfile();\n  }\n\n  public login() : void {\n    this.keycloakService.login();\n  }\n\n  public logout() : void {\n  \n    this.keycloakService.logout();\n  }\n\n  public redirectToProfile(): void {\n    this.keycloakService.getKeycloakInstance().accountManagement();\n  }\n\n  public getUsername(): any {\n    if(this.getLoggedUser() != undefined){\n      return this.getLoggedUser()['preferred_username'];\n    }else{\n      window.location.reload();\n      return null;\n    }\n    \n  }\n\n  public getCurrentUserRole(): string[] {\n    return this.keycloakService.getKeycloakInstance().realmAccess.roles;\n  }\n\n  public searchUser(search?): any {\n    let string = this.baseUrl + 'admin/realms/' + this.realmId + '/users';\n    if(search != undefined){\n      string += '?search='+search;\n    }\n    return this.http.get(string);\n  }\n\n  public getUserByUsername(username?): any {\n    let string = this.baseUrl + 'admin/realms/' + this.realmId + '/users';\n    if(username != undefined){\n      string += '?username='+username;\n    }\n    return this.http.get(string);\n  }\n\n\n  public getUserRoles(userId: string, clientId: string): any {\n    //let string = this.baseUrl + 'admin/realms/' + this.realmId + '/users/' + id + '/role-mappings/realm';\n    let string = this.baseUrl + 'admin/realms/' + this.realmId + '/users/'+ userId +'/role-mappings/clients/' + clientId;\n    return this.http.get(string)\n  }\n\n  public getAllClientsRoles(id: string): any {\n    let string = this.baseUrl + 'admin/realms/' + this.realmId  + '/clients/' + id + '/roles/';\n    return this.http.get(string)\n  }\n\n\n  public getClientsInfo(): any {\n    let string = this.baseUrl + 'admin/realms/' + this.realmId + '/clients/';\n    return this.http.get(string)\n  }\n\n  public getUserInfo(id): any {\n    let string = this.baseUrl + 'admin/realms/' + this.realmId + '/users/' + id;\n    return this.http.get(string);\n  }\n\n  public getUsersByRole(id, role_name){\n    \n    let string = this.baseUrl + 'admin/realms/' + this.realmId + '/clients/' + id + '/roles/' + role_name +'/users';\n    return this.http.get(string);\n  }\n\n  public createUser(parameters) {\n    let string = this.baseUrl +'admin/realms/' + this.realmId + '/users/';\n    return this.http.post(string, parameters)\n  }\n\n  public deleteUser(idUser : string) {\n    let string = this.baseUrl +'admin/realms/' + this.realmId + '/users/' + idUser;\n    return this.http.delete(string)\n  }\n\n  public updateUser(idUser : string, body) {\n    let string = this.baseUrl +'admin/realms/' + this.realmId + '/users/' + idUser;\n    return this.http.put(string, body)\n  }\n\n  public assignRolesToUser(userId, clientId, parameters) {\n    let string = this.baseUrl +'admin/realms/' + this.realmId + '/users/' + userId + '/role-mappings/clients/' + clientId ;\n    return this.http.post(string, parameters)\n  }\n\n  public deleteRolesToUser(userId, clientId, parameters) {\n    let options = { headers: new HttpHeaders().set('Content-Type', 'application/json'), body: parameters };\n    let string = this.baseUrl +'admin/realms/' + this.realmId + '/users/' + userId + '/role-mappings/clients/' + clientId ;\n    return this.http.delete(string, options)\n  }\n}","/*\n   Copyright 2021-2022  Istituto di Linguistica Computazionale \"A. Zampolli\", Consiglio Nazionale delle Ricerche, Pisa, Italy.\n \nThis file is part of EpiLexo.\n\nEpiLexo is free software: you can redistribute it and/or modify it under the terms of the GNU General Public License as published by the Free Software Foundation, either version 3 of the License, or (at your option) any later version.\n\nEpiLexo is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for more details.\n\nYou should have received a copy of the GNU General Public License along with EpiLexo. If not, see <https://www.gnu.org/licenses/>.\n*/\n\n// This file can be replaced during build by using the `fileReplacements` array.\n// `ng build --prod` replaces `environment.ts` with `environment.prod.ts`.\n// The list of file replacements can be found in `angular.json`.\n\nexport const environment = {\n  production: false,\n  keycloak: {\n    // Url of the Identity Provider\n    issuer: 'https://lari2.ilc.cnr.it/auth/',\n\n    // Realm\n    realm: 'princnr',\n\n    // The SPA's id. \n    // The SPA is registerd with this id at the auth-server\n    clientId: 'princlient',\n  }\n};\n\n/*\n * For easier debugging in development mode, you can import the following file\n * to ignore zone related error stack frames such as `zone.run`, `zoneDelegate.invokeTask`.\n *\n * This import should be commented out in production mode because it will have a negative impact\n * on performance if an error is thrown.\n */\n// import 'zone.js/dist/zone-error';  // Included with Angular CLI.\n","/*\n   Copyright 2021-2022  Istituto di Linguistica Computazionale \"A. Zampolli\", Consiglio Nazionale delle Ricerche, Pisa, Italy.\n \nThis file is part of EpiLexo.\n\nEpiLexo is free software: you can redistribute it and/or modify it under the terms of the GNU General Public License as published by the Free Software Foundation, either version 3 of the License, or (at your option) any later version.\n\nEpiLexo is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for more details.\n\nYou should have received a copy of the GNU General Public License along with EpiLexo. If not, see <https://www.gnu.org/licenses/>.\n*/\n\nimport { HttpClient } from '@angular/common/http';\nimport { Component, OnInit, AfterViewInit, ViewChild, OnChanges, SimpleChanges, ElementRef, Input } from '@angular/core';\nimport { AbstractControl, FormArray, FormBuilder, FormControl, FormGroup, ValidationErrors, ValidatorFn, Validators } from '@angular/forms';\nimport { NgbModal, NgbModalRef } from '@ng-bootstrap/ng-bootstrap';\nimport { KeycloakService } from 'keycloak-angular';\nimport { Subject } from 'rxjs';\nimport { debounceTime } from 'rxjs/operators';\nimport { AuthService } from 'src/app/services/auth/auth.service';\nimport { ConfirmedValidator } from './validator/password-match';\n\n@Component({\n  selector: 'app-profiles-table',\n  templateUrl: './profiles-table.component.html',\n  styleUrls: ['./profiles-table.component.scss']\n})\nexport class ProfilesTableComponent implements OnInit, OnChanges {\n\n  message = '';\n  users = [];\n  private idClient;\n  private selected_idUser;\n  private modalRef : NgbModalRef;\n  private temporaryId : string;\n  public isPopulated = false;\n  public creationRequest = false;\n  public itsMe = null;\n\n  private initialValue : any;\n  \n\n  selectedRoles = [];\n  filterSelectedRoles = [];\n  roles: any[] = [];\n  //rolesNames = ['ADMIN', 'USER', 'REVIEWER'];\n\n  @ViewChild('user_list') user_list:ElementRef; \n  @ViewChild('button_create') button_create:ElementRef; \n  @Input() isNotTheSameId : boolean;\n\n\n  userDetailForm = new FormGroup({\n    id: new FormControl(null),\n    username: new FormControl(null, Validators.required),\n    email: new FormControl(null, Validators.required),\n    password: new FormControl(null),\n    repeat_password: new FormControl(null),\n    roles: new FormArray([]),\n    enabled: new FormControl(null, Validators.required)\n  })\n\n  private search_subject: Subject<any> = new Subject();\n  roles_array: FormArray;\n\n  constructor(private httpClient: HttpClient, private auth: AuthService, private formBuilder: FormBuilder, private modalService: NgbModal, private keycloakService : KeycloakService) { }\n\n\n  ngOnInit(): void {\n\n    //this.keycloakService.isTokenExpired();\n    //this.keycloakService.updateToken(15);\n    this.userDetailForm = this.formBuilder.group({\n      id : new FormControl(null),\n      username : new FormControl(null, [Validators.required, Validators.minLength(3)]),\n      email : new FormControl(null, [Validators.required, Validators.minLength(3), Validators.pattern('^[a-z0-9._%+-]+@[a-z0-9.-]+\\\\.[a-z]{2,4}$')]),\n      password : new FormControl(null, [Validators.required, Validators.minLength(8)]),\n      repeat_password : new FormControl(null, [Validators.required]),\n      roles : [],\n      enabled : new FormControl(false, [Validators.required]),\n    }, {validator : ConfirmedValidator('password', 'repeat_password')});\n\n    this.auth.getClientsInfo().subscribe(\n      data => {\n        if (data != undefined && Array.isArray(data)) {\n          /* this.idClient = data[0].id; */\n          data.forEach(element => {\n            if(element.clientId == 'princlient'){\n              this.idClient = element.id;\n            }\n          })\n        }\n      },\n      error => { console.log(error) }\n    )\n\n    \n    var checkIdTimer = setInterval((val)=>{                 \n      try{\n          if(this.idClient !=undefined){\n\n            this.auth.getAllClientsRoles(this.idClient).subscribe(\n              data => {\n                let array = [];\n                data.forEach((element, i) => {\n                  if (element.name.toUpperCase() == element.name) {\n                    array.push({name: element.name, id: element.id});\n                  };\n                });\n                console.log(array)\n                array.forEach((c, i) => {\n                  this.roles.push({ id: i, name: c.name, role_id: c.id });\n                });\n        \n        \n                this.getUsersByRole(array);\n        \n                // this.selectedRoles = ['ADMIN', 'USER']\n              },\n              error => { console.log(error) }\n            )\n            \n            clearInterval(checkIdTimer)\n          }else{\n            clearInterval(checkIdTimer)\n          }\n          \n      }catch(e){\n          console.log(e)\n      }    \n    }, 500)\n\n    \n    \n    \n\n    /* this.rolesNames.forEach((c, i) => {\n      this.roles.push({ id: i, name: c });\n    }); */\n\n    this.auth.searchUser().subscribe(\n      data => {\n        //this.users = data;\n        if(data!= undefined){\n          Array.from(data).forEach((usr:any) => {\n            if(usr.username != undefined){\n              if(usr.username != 'prinadmin'){\n                this.users.push(usr);\n              }\n            }\n          })\n        }\n      }, error => {\n        console.log(error)\n      }\n    )\n\n\n    this.search_subject.pipe(debounceTime(1000)).subscribe(\n      data => {\n        this.searchUsers(data);\n      }\n    )\n\n\n  }\n\n  ngOnChanges(changes: SimpleChanges): void {\n    console.log(changes)\n  }\n\n  public getUsersByRole(roles_array) {\n    \n    roles_array.forEach(element => {\n      \n      \n      this.auth.getUsersByRole(this.idClient, element.name).subscribe(\n        (data : any[])=>{\n          //console.log(element, data);\n\n          data.forEach(usr => {\n            this.users.filter(obj => {\n              if(obj.id == usr.id){\n                obj[element.name] = true;\n                obj['haveRoles'] = true;\n              }\n            })\n          })\n          \n        }, error => {\n          console.log(error)\n        }\n      )\n    });\n    \n  }\n\n  searchUsers(data?) {\n    // console.log(data)\n    this.auth.searchUser(data).subscribe(\n      data => {\n        //console.log(data);\n        this.users = data;\n\n        let array = [];\n        \n        this.roles.forEach(\n          element => { array.push(element.name)}\n        )\n        this.getUsersByRole(array)\n      }, error => {\n        console.log(error)\n      }\n    )\n  }\n\n  triggerSearch(event?) {\n    if (event != undefined) {\n      let value = event.target.value;\n      this.search_subject.next(value);\n    }\n  }\n\n  userDetail(id) {\n    if(id != undefined){\n      this.selected_idUser = id;\n\n      this.button_create.nativeElement.classList.remove('active');\n\n      this.auth.getUserInfo(id).subscribe(\n        responseUserInfo=>{\n          //console.log(responseUserInfo);\n\n          this.auth.getUserRoles(this.selected_idUser, this.idClient).subscribe(\n            responseUserRoles => {\n              //console.log(responseUserRoles)\n\n              if(responseUserRoles != undefined && Array.isArray(responseUserRoles)){\n                let filter = responseUserRoles.filter(element=> element.name.toUpperCase() === element.name);\n\n                const extractRoleName = (obj) => {\n                  return obj.name;\n                }\n\n                let id = responseUserInfo.id;\n                let username = responseUserInfo.username;\n                let roles = filter.map(extractRoleName);\n                let enabled = responseUserInfo.enabled;\n                let email = responseUserInfo.email;\n                console.log(\"RUOLI\", roles);\n                this.populateForm(id, username, email, roles, enabled)\n              }\n            }, errorUserRoles => {\n              console.log(errorUserRoles)\n            }\n          )\n        }, error=>{\n          console.log(error)\n        }\n      )\n    }\n  }\n\n  populateForm(id, username, email, roles, enabled){\n    \n\n    this.userDetailForm = this.formBuilder.group({\n      id : new FormControl(id),\n      username : new FormControl(username, [Validators.required, Validators.minLength(3)]),\n      email : new FormControl(email, [Validators.required, Validators.minLength(3), Validators.pattern('^[a-z0-9._%+-]+@[a-z0-9.-]+\\\\.[a-z]{2,4}$')]),\n      password : new FormControl(null),\n      repeat_password : new FormControl(null),\n      roles : [],\n      enabled : new FormControl(enabled, [Validators.required]),\n    }, {validator : ConfirmedValidator('password', 'repeat_password')});\n\n    \n    \n\n\n    this.selectedRoles = roles;\n    this.creationRequest = false;\n    this.isPopulated = true;\n\n    setTimeout(() => {\n      this.initialValue = this.userDetailForm.value;\n    }, 500);\n\n\n    this.itsMe = this.auth.getLoggedUser().sub == this.selected_idUser;\n\n    \n  }\n\n  markAsTouched(){\n    this.userDetailForm.markAsTouched();\n  }\n\n  updateUser(){\n    if(this.userDetailForm.valid && !(JSON.stringify(this.initialValue) == JSON.stringify(this.userDetailForm.value))){\n      let parameters = {\n        enabled: this.userDetailForm.get('enabled').value,\n        email: this.userDetailForm.get('email').value,\n        username: this.userDetailForm.get('username').value,\n      }\n      console.log(parameters);\n\n      this.auth.updateUser(this.selected_idUser, parameters).subscribe(\n        data=>{\n          console.log(data);\n\n          if(JSON.stringify(this.initialValue.roles) != JSON.stringify(this.userDetailForm.get('roles').value)){\n\n            /* if(this.selectedRoles.length == 0){\n              let object = [];\n              let obj = {};\n              this.roles.forEach(roles=>{\n                obj = {\n                  id : roles.role_id,\n                  name: roles.name\n                }\n                object.push(obj);\n\n                console.log(object)\n                this.auth.deleteRolesToUser(this.selected_idUser, this.idClient, object).subscribe(\n                  data=>{\n                    console.log(data);\n                    this.users.forEach(element => {\n                      if(element.id == this.selected_idUser){\n                        element[obj['name']] = false;\n                        element['haveRoles'] = false;\n                      }\n                    });\n\n                    this.userDetail(this.selected_idUser);\n                  },\n                  error=>{console.log(error)}\n                );\n\n                object = [];\n              })\n\n\n              \n            }else{\n\n              \n\n            } */\n\n\n            let initialRoles = this.initialValue.roles;\n            let updatedRoles = this.userDetailForm.get('roles').value;\n\n            let difference = updatedRoles.filter(x => !initialRoles.includes(x));\n            let removeDiff = initialRoles.filter(x => !updatedRoles.includes(x));\n\n            console.log(difference, removeDiff);\n\n            if(difference.length != 0){\n              difference.forEach(element=>{\n\n                let object = [];\n                let obj = {};\n                this.roles.forEach(roles=>{\n                  if(element == roles.name){\n                    obj = {\n                      id : roles.role_id,\n                      name: roles.name\n                    }\n\n                    object.push(obj);\n                    console.log(object)\n                    this.auth.assignRolesToUser(this.selected_idUser, this.idClient, object).subscribe(\n                      data=>{\n                        console.log(data);\n                        this.users.forEach(element => {\n                          if(element.id == this.selected_idUser){\n                            element[obj['name']] = true;\n                            element['haveRoles'] = true;\n                          }\n                        });\n                        this.userDetail(this.selected_idUser);\n                      },\n                      error=>{console.log(error)}\n                    )\n\n                    object = [];\n                    \n                  }\n                })\n\n                \n\n                \n              });\n            }else if(removeDiff.length != 0){\n              removeDiff.forEach(element => {\n                let object = [];\n                let obj = {};\n                this.roles.forEach(roles=>{\n                  if(element == roles.name){\n                    obj = {\n                      id : roles.role_id,\n                      name: roles.name\n                    }\n                    object.push(obj);\n  \n                    console.log(object)\n                    this.auth.deleteRolesToUser(this.selected_idUser, this.idClient, object).subscribe(\n                      data=>{\n                        console.log(data);\n                        this.users.forEach(element => {\n                          if(element.id == this.selected_idUser){\n                            element[obj['name']] = false;\n                            element['haveRoles'] = false;\n                          }\n                        });\n\n                        this.userDetail(this.selected_idUser);\n                      },\n                      error=>{console.log(error)}\n                    );\n    \n                    object = [];\n                  }\n                  \n                  \n                })\n              });\n              \n            }\n          }\n        },\n        error=>{\n          console.log(error)\n        }\n      )\n    }else{\n      alert(\"No update. There are same info\")\n    }\n\n  }\n\n  \n  registerUser() {\n    console.log(this.userDetailForm)\n    if(this.userDetailForm.valid){\n      let parameters = {\n        /* id: this.temporaryId, */\n        enabled: this.userDetailForm.get('enabled').value,\n        email: this.userDetailForm.get('email').value,\n        username: this.userDetailForm.get('username').value,\n        credentials: [\n          {\n            type: \"password\",\n            value: this.userDetailForm.get('password').value,\n            temporary: false\n          }\n        ]\n      }\n\n      console.log(parameters);\n\n      this.auth.createUser(parameters).subscribe(\n        data=>{\n          console.log(data);\n\n          this.auth.getUserByUsername(this.userDetailForm.get('username').value).subscribe(\n            data=>{\n              console.log(data);\n              if(data != undefined){\n              \n                this.cleanActiveLinks();\n                data.forEach(newUser => {\n\n                  if(this.selectedRoles.length > 0){\n\n    \n                    this.selectedRoles.forEach(element=>{\n\n                      let object = [];\n                      let obj = {};\n                      this.roles.forEach(roles=>{\n                        if(element == roles.name){\n                          obj = {\n                            id : roles.role_id,\n                            name: roles.name\n                          }\n\n                          object.push(obj);\n                        }\n                      })\n\n                      \n\n                      console.log(object)\n                      this.auth.assignRolesToUser(newUser.id, this.idClient, object).subscribe(\n                        data=>{\n                          console.log(data);\n                          this.users.forEach(element => {\n                            if(element.id == newUser.id){\n                              element[obj['name']] = true;\n                              element['haveRoles'] = true;\n                            }\n                          });\n                        },\n                        error=>{console.log(error)}\n                      )\n                    });\n\n                    \n                  }\n                  \n                  \n\n                  this.users.push(newUser);\n\n                  this.userDetail(newUser.id);\n\n\n                  setTimeout(() => {\n                    this.activeNewUserLink(this.userDetailForm.get('username').value)\n                  }, 100);\n                  \n                });\n\n                \n              } \n            },\n            error=>{\n              console.log(error)\n            }\n          )\n        },\n        error=>{\n          console.log(error)\n        }\n      )\n    }\n  }\n\n  resetForm(){\n    this.userDetailForm.reset();\n    this.userDetailForm.markAsUntouched();\n    this.userDetailForm.markAsPristine();\n  }\n\n  deleteUser(){\n    console.log(this.selected_idUser);\n\n    this.auth.deleteUser(this.selected_idUser).subscribe(\n      data=>{\n        console.log(data)\n        let filtered = this.users.filter(\n          element=> element.id != this.selected_idUser\n        )\n\n        this.users = filtered;\n    \n        this.cleanActiveLinks();\n        this.userDetailForm.reset();\n        this.isPopulated = false;\n        this.creationRequest = false;\n    \n        this.modalRef.close();\n      },\n      error=>{console.log(error)}\n    )\n\n    \n  }\n\n\n  /* addRoles(role){\n    this.rolesArray = this.userDetailForm.get('roles') as FormArray;\n    if(role == undefined){\n      this.rolesArray.push(this.createRoles());\n    }else{\n      this.rolesArray.push(this.createRoles(role));\n    }\n  } */\n\n\n  createNewUser(){\n\n    this.cleanActiveLinks();\n    this.selected_idUser = null;\n\n    const makeId = function makeid() {\n          var result           = '';\n          var characters       = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789';\n          var charactersLength = characters.length;\n          for ( var i = 0; i < 9; i++ ) {\n            result += characters.charAt(Math.floor(Math.random() * charactersLength));\n          }\n\n          result += '-'\n\n          for ( var j = 0; j < 5; j++ ) {\n            result += characters.charAt(Math.floor(Math.random() * charactersLength));\n          }\n\n          result += '-'\n\n          for ( var l = 0; l < 5; l++ ) {\n            result += characters.charAt(Math.floor(Math.random() * charactersLength));\n          }\n\n          result += '-'\n\n          for ( var m = 0; m < 13; m++ ) {\n            result += characters.charAt(Math.floor(Math.random() * charactersLength));\n          }\n          \n          return result;\n    }\n\n    this.temporaryId = makeId();\n    \n\n    this.userDetailForm = this.formBuilder.group({\n      id : new FormControl(this.temporaryId),\n      username : new FormControl(null, [Validators.required, Validators.minLength(3)]),\n      email : new FormControl(null, [Validators.required, Validators.minLength(3), Validators.pattern('^[a-z0-9._%+-]+@[a-z0-9.-]+\\\\.[a-z]{2,4}$')]),\n      password : new FormControl(null, [Validators.required, Validators.minLength(8)]),\n      repeat_password : new FormControl(null, [Validators.required]),\n      roles : [],\n      enabled : new FormControl(false, [Validators.required]),\n    }, {validator : ConfirmedValidator('password', 'repeat_password')});\n    this.creationRequest = true;\n    this.isPopulated = true;\n    this.selectedRoles = [];\n\n    this.itsMe = false;\n  }\n\n  cleanActiveLinks(){\n    var links = this.user_list.nativeElement.querySelectorAll('a')\n    links.forEach(element => {\n      if(element.classList.contains('active')){\n        element.classList.remove('active');\n      }\n    });\n  }\n\n  activeNewUserLink(username){\n    var links = this.user_list.nativeElement.querySelectorAll('a')\n    links.forEach(element => {\n//      console.log(element.innerText, username)\n      if(element.innerText == username){\n        element.classList.add('active');\n      }\n      \n    });\n  }\n\n\n  findInvalidControls() {\n    const invalid = [];\n    const controls = this.userDetailForm.controls;\n    for (const name in controls) {\n        if (controls[name].invalid) {\n            invalid.push(name);\n        }\n    }\n\n    \n    return invalid;\n  }\n\n  open(content) {\n\n    this.modalRef = this.modalService.open(content)\n  }\n\n  /* addTagFn(name) {\n    return { name: name, tag: true };\n  } */\n}\n","<div class=\"row h-100\">\n\n  <!-- USER LIST -->\n  <div class=\"col-lg-3 pb-3\">\n    <div class=\"card h-100\">\n      <div class=\"card-header d-flex justify-content-between\">\n        <div class=\"d-flex align-items-center\">\n          Users\n        </div>\n        <button #button_create type=\"button\" class=\"btn btn-primary btn-sm\" (click)=\"createNewUser()\" data-toggle=\"list\"\n          href=\"#user-detail\" role=\"tab\" aria-controls=\"home\"><i class=\"fas fa-plus-square\"></i> Create</button>\n\n      </div>\n      <div class=\"card-body\">\n\n        <!-- SEARCH BAR -->\n        <div class=\"input-group\">\n          <span class=\"input-group-prepend\">\n            <div class=\"input-group-text bg-transparent border-right-0\"><i class=\"fa fa-search\"></i></div>\n            <!-- <button class=\"btn btn-secondary btn-block filter-button\" type=\"button\" value=\"Filter\" title=\"Filter\"\n              data-toggle=\"collapse\" data-target=\"#filterUserCollapse\" aria-expanded=\"false\"\n              aria-controls=\"filterUserCollapse\"><i class=\"fa fa-filter\"></i></button> -->\n          </span>\n          <input class=\"form-control py-2 border-left-0 border\" type=\"text\" id=\"example-search-input\"\n            (keyup)=\"triggerSearch($event)\">\n        </div>\n\n        <!-- <div class=\"collapse multi-collapse\" id=\"filterUserCollapse\">\n          <div class=\"form-group row mt-3 \">\n            <label for=\"inputLabel\" class=\"col-lg-3 col-form-label\">Roles:</label>\n            <div class=\"input-group col-lg-9\">\n              <ng-select [multiple]=\"true\" [(ngModel)]=\"filterSelectedRoles\" [ngModelOptions]=\"{standalone: true}\">\n                <ng-option *ngFor=\"let role of roles\" [value]=\"role.name\">{{role.name}}</ng-option>\n              </ng-select>\n            </div>\n          </div>\n        </div> -->\n\n\n        <!-- USER-LIST -->\n        <div class=\"list-group mt-2 user-list\" id=\"list-tab\" role=\"tablist\" #user_list>\n          <a class=\"list-group-item list-group-item-action d-flex justify-content-between align-items-center\"\n            id=\"users-list\" data-toggle=\"list\" href=\"#user-detail\" role=\"tab\" aria-controls=\"home\"\n            *ngFor=\"let usr of users\" (click)=\"userDetail(usr.id)\">\n            {{usr.username}}\n            <span class=\"badge badge-primary badge-pill\" *ngIf=\"usr.haveRoles != undefined\">\n              <div class=\"d-flex justify-content-between align-items-center\">\n                <i class=\"fas fa-crown m-2\" *ngIf=\"usr.ADMIN\"></i>\n                <i class=\"fas fa-user m-2\" *ngIf=\"usr.USER\"></i>\n              </div>\n            </span>\n          </a>\n        </div>\n\n      </div>\n      <div class=\"card-footer text-muted\">\n        2 days ago\n      </div>\n    </div>\n  </div>\n\n  <!-- USER DETAILS -->\n\n\n  <div class=\"col-lg-9 pb-3\" [hidden]=\"!isPopulated\">\n    <div class=\"card h-100\">\n      <div class=\"card-header d-flex justify-content-between\">\n        <div class=\"d-flex align-items-center\">\n          User details\n        </div>\n\n      </div>\n      <div class=\"card-body\">\n\n        <div class=\"tab-content h-100\" id=\"nav-tabContent\">\n          <div class=\"tab-pane fade h-100\" id=\"user-detail\" role=\"tabpanel\" aria-labelledby=\"users-list\">\n\n            <form [formGroup]=\"userDetailForm\" class=\"h-100 d-flex flex-column\">\n              <div class=\"form-group row ml-2 mt-3 mr-2\" *ngIf=\"!creationRequest\">\n                <label for=\"inputLabel\" class=\"col-lg-3 col-form-label\">ID:</label>\n                <div class=\"input-group col-lg-9\">\n                  <input id=\"id\" formControlName=\"id\" name=\"id\" type=\"text\" class=\"form-control\" placeholder=\"\"\n                    disabled>\n                  <!-- <div class=\"invalid-feedback\" style=\"display: block;\">\n                        Please, insert at least three characters.\n                    </div> -->\n                </div>\n              </div>\n\n              <!-- {{creationRequest}} -->\n              <div class=\"form-group row ml-2 mt-3 mr-2\">\n                <label for=\"inputLabel\" class=\"col-lg-3 col-form-label\">Username:</label>\n                <div class=\"input-group col-lg-9\">\n                  <input id=\"username\" formControlName=\"username\" name=\"username\" type=\"text\" class=\"form-control\"\n                    placeholder=\"\" *ngIf=\"!creationRequest\" disabled>\n                  <input id=\"username\" formControlName=\"username\" name=\"username\" type=\"text\" class=\"form-control\"\n                    placeholder=\"\" *ngIf=\"creationRequest\">\n                  <div class=\"invalid-feedback\" style=\"display: block;\" *ngIf=\"userDetailForm.get('username').invalid\">\n                        Please insert at least 4 characters\n                    </div>\n                </div>\n              </div>\n\n              <div class=\"form-group row ml-2 mt-3 mr-2\">\n                <label for=\"inputLabel\" class=\"col-lg-3 col-form-label\">Email:</label>\n                <div class=\"input-group col-lg-9\">\n                  <input id=\"email\" formControlName=\"email\" name=\"email\" type=\"text\" class=\"form-control\" \n                    placeholder=\"\">\n                  <div class=\"invalid-feedback\" style=\"display: block;\" *ngIf=\"userDetailForm.get('email').invalid\">\n                        Please, insert a valid email address.\n                    </div>\n                </div>\n              </div>\n\n              <div class=\"form-group row ml-2 mt-3 mr-2\">\n                <label for=\"inputLabel\" class=\"col-lg-3 col-form-label\">Password:</label>\n                <div class=\"input-group col-lg-9\">\n                  <input id=\"password\" formControlName=\"password\" name=\"password\" type=\"password\" class=\"form-control\"\n                    placeholder=\"\">\n                  <div class=\"invalid-feedback\" style=\"display: block;\" *ngIf=\"userDetailForm.get('password').invalid\">\n                        Please, insert at least 8 characters.\n                    </div>\n                </div>\n              </div>\n\n              <div class=\"form-group row ml-2 mt-3 mr-2\">\n                <label for=\"inputLabel\" class=\"col-lg-3 col-form-label\">Repeat password:</label>\n                <div class=\"input-group col-lg-9\">\n                  <input id=\"repeat_password\" formControlName=\"repeat_password\" name=\"repeat_password\" type=\"password\"\n                    class=\"form-control\" placeholder=\"\">\n                  <div class=\"invalid-feedback\" style=\"display: block;\"  *ngIf=\"userDetailForm.get('repeat_password').invalid\">\n                        Password not matching.\n                    </div>\n                </div>\n              </div>\n\n              <div class=\"form-group row ml-2 mt-3 mr-2\">\n                <label for=\"inputLabel\" class=\"col-lg-3 col-form-label\">Roles:</label>\n                <div class=\"input-group col-lg-9\">\n                  <ng-select [multiple]=\"true\" formControlName=\"roles\" (change)=\"markAsTouched()\" [(ngModel)]=\"selectedRoles\" > <!-- [ngModelOptions]=\"{standalone: true}\" -->\n                    <ng-option *ngFor=\"let role of roles\" [value]=\"role.name\">{{role.name}}</ng-option>\n                    <!-- <ng-option [value]=\"'custom'\">Custom</ng-option> -->\n                  </ng-select>\n                </div>\n              </div>\n\n              <div class=\"form-group row ml-2 mt-3 mr-2\">\n                <label for=\"inputLabel\" class=\"col-lg-3 col-form-label\">Enabled:</label>\n                <div class=\"custom-control custom-switch col-lg-9\" style=\"padding-left: 3.25rem !important;\">\n                  <input type=\"checkbox\" class=\"custom-control-input\" id=\"customSwitch1\" formControlName=\"enabled\"\n                    name=\"enabled\">\n                  <label class=\"custom-control-label\" for=\"customSwitch1\"></label>\n                </div>\n              </div>\n              <div class=\"form-group row ml-2 mt-auto mr-2\">\n                <div class=\"col-lg-3\">\n                  <button type=\"button\" class=\"btn btn-danger\" (click)=\"open(deleteModal)\" *ngIf=\"!creationRequest && !itsMe\">Delete User</button>\n                </div>\n                \n                <!-- <label for=\"inputLabel\" class=\"col-lg-3 col-form-label\">Enabled:</label> -->\n                <!-- <div class=\"custom-control custom-switch col-lg-9\" style=\"padding-left: 3.25rem !important;\">\n                  <input type=\"checkbox\" class=\"custom-control-input\" id=\"customSwitch1\" formControlName=\"enabled\"\n                    name=\"enabled\">\n                  <label class=\"custom-control-label\" for=\"customSwitch1\"></label>\n                </div> -->\n              </div>\n\n              <div>\n                {{userDetailForm.value | json}}\n                <!-- {{initialValues.value}} -->\n                <!-- {{userDetailForm.valid | json}}\n                {{findInvalidControls() | json}} -->\n                \n              </div>\n            </form>\n\n          </div>\n        </div>\n\n      </div>\n      <div class=\"card-footer text-muted d-flex justify-content-end\">\n        <button class=\"btn btn-primary mr-2\" [disabled]=\"userDetailForm.invalid || userDetailForm.pristine\" (click)=\"registerUser()\" *ngIf=\"creationRequest\">\n          <i class=\"fas fa-save\"></i> \n          Register\n        </button>\n        <button class=\"btn btn-primary mr-2\" [disabled]=\"userDetailForm.invalid || userDetailForm.pristine\" (click)=\"updateUser()\" *ngIf=\"!creationRequest\">\n          <i class=\"fas fa-save\"></i> \n          Update\n        </button>\n        <button type=\"button\" class=\"btn btn-secondary\" (click)=\"resetForm()\" [disabled]=\"!creationRequest || !userDetailForm.touched\"><i class=\"fas fa-times\"></i> Cancel</button>\n      </div>\n    </div>\n  </div>\n\n</div>\n\n\n<ng-template #deleteModal let-modal>\n  <div class=\"modal-header\">\n      <h4 class=\"modal-title\" id=\"modal-basic-title\">Wizard</h4>\n      <button type=\"button\" class=\"close\" aria-label=\"Close\" (click)=\"modal.dismiss('Cross click')\">\n          <span aria-hidden=\"true\">&times;</span>\n      </button>\n  </div>\n\n  <div class=\"modal-body\">\n      Are you sure to delete this user?\n  </div>\n      \n  <div class=\"modal-footer\">\n      <button type=\"button\" class=\"btn btn-outline-dark\" >No</button>\n      <button type=\"button\" class=\"btn btn-outline-dark\" (click)=\"deleteUser()\">Yes</button>\n  </div>  \n  \n     \n  \n</ng-template>","/*\n   Copyright 2021-2022  Istituto di Linguistica Computazionale \"A. Zampolli\", Consiglio Nazionale delle Ricerche, Pisa, Italy.\n \nThis file is part of EpiLexo.\n\nEpiLexo is free software: you can redistribute it and/or modify it under the terms of the GNU General Public License as published by the Free Software Foundation, either version 3 of the License, or (at your option) any later version.\n\nEpiLexo is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for more details.\n\nYou should have received a copy of the GNU General Public License along with EpiLexo. If not, see <https://www.gnu.org/licenses/>.\n*/\n\nimport { HttpClient } from '@angular/common/http';\nimport { Injectable } from '@angular/core';\nimport { BehaviorSubject, Observable } from 'rxjs';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class AnnotatorService {\n  private baseUrl = \"https://lari2.ilc.cnr.it/cash/api/v1/\"\n\n  constructor(private http: HttpClient) { }\n\n  private _triggerSearch: BehaviorSubject<any> = new BehaviorSubject(null);\n  private _deleteAnnoRequest: BehaviorSubject<any> = new BehaviorSubject(null);\n  private _getIdText: BehaviorSubject<any> = new BehaviorSubject(null);\n  triggerSearch$ = this._triggerSearch.asObservable();\n  deleteAnnoReq$ = this._deleteAnnoRequest.asObservable();\n  getIdText$ = this._getIdText.asObservable();\n\n  triggerSearch(string : string) {\n    this._triggerSearch.next(string)\n  } \n\n  deleteAnnotationRequest(id : number, node_id : number){\n    this._deleteAnnoRequest.next({id, node_id})\n  }\n\n  getIdText(object: any){\n    this._getIdText.next(object);\n  }\n\n  getTokens(id: number) : Observable<any> {\n    return this.http.get(this.baseUrl + 'token?requestUUID=test123&nodeid='+id);\n  }\n\n  getText(id: number) : Observable<any> {\n    return this.http.get(this.baseUrl + 'gettext?requestUUID=test123&nodeid='+id);\n  }\n\n  addAnnotation(parameters : object, id : number) : Observable<any>{\n    return this.http.post(this.baseUrl + 'annotation?requestUUID=test123&nodeid='+id, parameters);\n  }\n\n  getAnnotation(id : number) : Observable<any>{\n    return this.http.get(this.baseUrl + 'annotation?requestUUID=test123&nodeid='+id);\n  }\n\n  deleteAnnotation(id: number) : Observable<any> {\n    return this.http.delete(this.baseUrl + 'annotate?requestUUID=test123&annotationID='+id);\n  }\n\n  updateAnnotation(annotation : object) : Observable<any>{\n    return this.http.put(this.baseUrl + 'annotation?requestUUID=test123', annotation);\n  }\n\n}\n","/*\n   Copyright 2021-2022  Istituto di Linguistica Computazionale \"A. Zampolli\", Consiglio Nazionale delle Ricerche, Pisa, Italy.\n \nThis file is part of EpiLexo.\n\nEpiLexo is free software: you can redistribute it and/or modify it under the terms of the GNU General Public License as published by the Free Software Foundation, either version 3 of the License, or (at your option) any later version.\n\nEpiLexo is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for more details.\n\nYou should have received a copy of the GNU General Public License along with EpiLexo. If not, see <https://www.gnu.org/licenses/>.\n*/\n\nimport { Component, ElementRef, OnInit, Renderer2, ViewChild } from '@angular/core';\nimport { ExpanderService } from 'src/app/services/expander/expander.service';\nimport { LexicalEntriesService } from 'src/app/services/lexical-entries/lexical-entries.service';\n\nimport {\n  animate,\n  style,\n  transition,\n  trigger,\n  state\n} from \"@angular/animations\";\n\n@Component({\n  selector: 'app-vartrans-tab',\n  templateUrl: './vartrans-tab.component.html',\n  styleUrls: ['./vartrans-tab.component.scss'],\n  animations: [\n    trigger('slideInOut', [\n      state('in', style({\n        height: 'calc(100vh - 22rem)',\n        \n      })),\n      state('out', style({\n        height: 'calc(50vh - 12.5rem)',\n      })),\n      transition('in => out', animate('400ms ease-in-out')),\n      transition('out => in', animate('400ms ease-in-out'))\n    ])\n  ]\n})\nexport class VartransTabComponent implements OnInit {\n\n  lock = 0;\n  object: any;\n  exp_trig = '';\n\n  lexicalEntryData : any;\n  senseData : any;\n\n  isLexicalEntry = false;\n  isSense = false;\n\n  @ViewChild('expander') expander_body: ElementRef;\n\n  constructor(private lexicalService: LexicalEntriesService, private expand: ExpanderService, private rend : Renderer2) { }\n\n  ngOnInit(): void {\n    this.lexicalService.coreData$.subscribe(\n      object => {\n        if(this.object != object){\n          this.lexicalEntryData = null;\n          this.senseData = null;\n        }\n        this.object = object\n        \n        if(this.object != null){\n          if(this.object.lexicalEntry != undefined && this.object.sense == undefined){\n            this.isLexicalEntry = true;\n            this.isSense = false;\n            this.lexicalEntryData = object;\n          }else if(this.object.sense != undefined){\n            this.isLexicalEntry = false;\n            this.isSense = true;\n            this.senseData = object;\n            this.lexicalEntryData = null;\n          }else if(this.object.form != undefined){\n            this.isLexicalEntry = false;\n            this.isSense = false;\n            this.lexicalEntryData = null;\n            this.object = null;\n          }\n        }\n      }\n    );\n    \n    this.expand.expEdit$.subscribe(\n      trigger => {\n        if(trigger){\n          let isEditExpanded = this.expand.isEditTabExpanded();\n          let isEpigraphyExpanded = this.expand.isEpigraphyTabExpanded();\n\n          if(!isEpigraphyExpanded){\n            this.exp_trig = 'in';\n            this.rend.setStyle(this.expander_body.nativeElement, 'height', 'calc(100vh - 22rem)')\n            this.rend.setStyle(this.expander_body.nativeElement, 'max-height', 'calc(100vh - 22rem)')\n          }else{\n            this.rend.setStyle(this.expander_body.nativeElement, 'height', 'calc(50vh - 12.5rem)');\n            this.rend.setStyle(this.expander_body.nativeElement, 'max-height', 'calc(50vh - 12.5rem)');\n            this.exp_trig = 'in';\n          }\n          \n        }else if(trigger==null){\n          return;\n        }else{\n          this.rend.setStyle(this.expander_body.nativeElement, 'height', 'calc(50vh - 12.5rem)');\n          this.rend.setStyle(this.expander_body.nativeElement, 'max-height', 'calc(50vh - 12.5rem)');\n          this.exp_trig = 'out';\n        }\n      }\n    );\n\n    this.expand.expEpigraphy$.subscribe(\n      trigger => {\n        setTimeout(() => {\n          if(trigger){\n            this.exp_trig = 'in';\n            this.rend.setStyle(this.expander_body.nativeElement, 'height', 'calc(50vh - 12.5rem)')\n            this.rend.setStyle(this.expander_body.nativeElement, 'max-height', 'calc(50vh - 12.5rem)')\n          }else if(trigger==null){\n            return;\n          }else{\n            this.rend.setStyle(this.expander_body.nativeElement, 'max-height', 'calc(50vh - 12.5rem)');\n            this.exp_trig = 'out';\n          }\n        }, 100);\n        \n      }\n    );\n  }\n\n  changeStatus() {\n    if (this.lock < 2) {\n      this.lock++;\n    } else if (this.lock > 1) {\n      this.lock--;\n    }\n    setTimeout(() => {\n      //@ts-ignore\n      $('.locked-tooltip').tooltip({\n        trigger: 'hover'\n      });\n    }, 10);\n  }\n\n}\n","\n\n<div id=\"cardsAccordion\" class=\"accordion\" [hidden]=\"object == null\">\n    <div class=\"card my-2\">\n        <div class=\"card-header\">\n            <h5 class=\"mb-0 w-100 d-flex justify-content-between align-self-center\">\n                <div>\n                    <span class=\"btn\">\n                        CREATED BY foo ON 11/12/2020 15:15\n                    </span>\n                </div>\n                <div>\n                    <button class=\"btn btn-link\">\n                        <i class=\"fa fa-trash\"></i>\n                    </button>\n                    <button class=\"btn btn-link\" (click)=\"changeStatus()\">\n                        <i class=\"fa fa-circle\" *ngIf=\"lock==0\" style=\"color: red\"></i>\n                        <i class=\"fa fa-circle\" *ngIf=\"lock==1\" style=\"color: yellow\"></i>\n                        <i class=\"fa fa-circle locked-tooltip\" *ngIf=\"lock==2\" data-toggle=\"tooltip\"\n                            data-placement=\"bottom\" data-html=\"true\" title=\"Locked tooltip\" style=\"color:green;\"></i>\n                    </button>\n                </div>\n            </h5>\n        </div>\n        <div #expander [@slideInOut]=\"exp_trig\" class=\"card-body\">\n            <app-lexical-entry-vartrans-form [lexData]=\"lexicalEntryData\" *ngIf=\"isLexicalEntry\"></app-lexical-entry-vartrans-form>\n            <app-sense-vartrans-form [senseData]=\"senseData\" *ngIf=\"isSense\"></app-sense-vartrans-form>\n        </div>\n        <div class=\"card-footer text-muted\">\n            <div class=\"w-100 d-flex justify-content-between align-items-center\">\n                <div>\n                    <span>LAST UPDATE ON 15/12/2020 14:30 BY foo</span>\n                </div>\n                <div class=\"btn-group dropup dropleft\">\n                    <button class=\"btn btn-success\" type=\"button\" id=\"dropdownAddLemma\" data-toggle=\"dropdown\"\n                        aria-haspopup=\"true\" aria-expanded=\"false\"> <i class=\"fas fa-plus\"></i> </button>\n                    <div class=\"dropdown-menu dropdown-menu-right\" aria-labelledby=\"dropdownAddLemma\">\n                        <a class=\"dropdown-item\" href=\"#\">Add Form</a>\n                        <a class=\"dropdown-item\" href=\"#\">Add Sense</a>\n                        <a class=\"dropdown-item\" href=\"#\">Add Frame</a>\n                        <a class=\"dropdown-item\" href=\"#\">Add Lexical Concept</a>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n</div>","/*\n   Copyright 2021-2022  Istituto di Linguistica Computazionale \"A. Zampolli\", Consiglio Nazionale delle Ricerche, Pisa, Italy.\n \nThis file is part of EpiLexo.\n\nEpiLexo is free software: you can redistribute it and/or modify it under the terms of the GNU General Public License as published by the Free Software Foundation, either version 3 of the License, or (at your option) any later version.\n\nEpiLexo is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for more details.\n\nYou should have received a copy of the GNU General Public License along with EpiLexo. If not, see <https://www.gnu.org/licenses/>.\n*/\n\nimport { Component, ElementRef, OnInit, Renderer2, ViewChild } from '@angular/core';\nimport { LexicalEntriesService } from '../../../../../services/lexical-entries/lexical-entries.service';\nimport { ExpanderService } from 'src/app/services/expander/expander.service';\nimport { ToastrService } from 'ngx-toastr';\n\nimport {\n  animate,\n  style,\n  transition,\n  trigger,\n  state\n} from \"@angular/animations\";\nimport { debounceTime } from 'rxjs/operators';\nimport { ModalComponent } from 'ng-modal-lib';\nimport { BibliographyService } from 'src/app/services/bibliography-service/bibliography.service';\nimport { Subject } from 'rxjs';\n\n@Component({\n  selector: 'app-core-tab',\n  templateUrl: './core-tab.component.html',\n  styleUrls: ['./core-tab.component.scss'],\n  animations: [\n    trigger('slideInOut', [\n      state('in', style({\n        height: 'calc(100vh - 18rem)',\n        \n      })),\n      state('out', style({\n        height: 'calc(50vh - 10rem)',\n      })),\n      transition('in => out', animate('400ms ease-in-out')),\n      transition('out => in', animate('400ms ease-in-out'))\n    ])\n  ]\n})\nexport class CoreTabComponent implements OnInit {\n\n  lock = 0;\n  object: any;\n  exp_trig = '';\n\n  isLexicalEntry = false;\n  isForm = false;\n  isSense = false;\n  isLexicalConcept = false;\n  searchIconSpinner = false;\n  goBack = false;\n\n  bibliography = [];\n  selectedItem;\n\n  lexicalEntryData : any;\n  formData : any;\n  senseData : any;\n  lexicalConceptData : any;\n\n  lastUpdateDate : any;\n  creationDate : any;\n  creator : any;\n  revisor : any;\n\n  start = 0;\n  sortField = 'title';\n  direction = 'asc';\n  memorySort = {field : '', direction : ''}\n  queryTitle = '';\n  queryMode = 'titleCreatorYear';\n\n  private searchSubject : Subject<any> = new Subject();\n\n  @ViewChild('expander') expander_body: ElementRef;\n  @ViewChild('addBibliography', {static: false}) modal: ModalComponent;\n  @ViewChild('table_body') tableBody: ElementRef;\n  @ViewChild('searchBiblio') searchBiblio: ElementRef;\n\n  constructor(private lexicalService: LexicalEntriesService, private biblioService : BibliographyService, private expand: ExpanderService, private rend: Renderer2, private toastr: ToastrService) { }\n\n  ngOnInit(): void {\n\n    this.lexicalService.coreData$.subscribe(\n      object => {\n        if(this.object != object){\n          this.lexicalEntryData = null;\n          this.formData = null;\n          this.senseData = null;\n          \n          \n        }\n        this.object = object\n        /* console.log(this.object) */\n        if(this.object != null){\n          setTimeout(() => {\n            //@ts-ignore\n            $('#coreTabModal').modal('hide');\n            $('.modal-backdrop').remove();\n            var timer = setInterval((val)=>{                 \n              try{\n                  //@ts-ignore\n                  $('#coreTabModal').modal('hide');\n                  if(!$('#coreTabModal').is(':visible')){\n                    clearInterval(timer)\n                  }\n                  \n              }catch(e){\n                  console.log(e)\n              }    \n            }, 10)\n          }, 500);\n          this.creator = this.object.creator;\n          this.revisor = this.object.revisor;\n          \n          if(this.object.lexicalEntry != undefined && this.object.sense == undefined){\n            this.isLexicalEntry = true;\n            this.isForm = false;\n            this.isSense = false;\n            this.lexicalEntryData = object;\n            this.formData = null;\n            this.lexicalConceptData = null;\n            this.isLexicalConcept = false;\n          }else if(this.object.form != undefined && this.object.sense == undefined){\n            this.isLexicalEntry = false;\n            this.isForm = true;\n            this.isSense = false;\n            this.formData = object;\n            this.lexicalEntryData = null;\n            this.lexicalConceptData = null;\n            this.isLexicalConcept = false;\n          }else if(this.object.sense != undefined){\n            this.isLexicalEntry = false;\n            this.isForm = false;\n            this.isSense = true;\n            this.senseData = object;\n            this.formData = null;\n            this.lexicalEntryData = null;\n            this.lexicalConceptData = null;\n            this.isLexicalConcept = false;\n          }else if(this.object.lexicalConcept != undefined && this.object.sense == undefined){\n            this.isLexicalEntry = false;\n            this.isForm = false;\n            this.isSense = false;\n            this.isLexicalConcept = true;\n            this.senseData = null;\n            this.formData = null;\n            this.lexicalEntryData = null;\n            this.lexicalConceptData = object;\n          }\n\n\n          switch(this.object.status){\n            case 'working' : {\n              this.lock = 0; \n              this.goBack = false;\n              setTimeout(() => {\n                //@ts-ignore\n                $('.locked-tooltip').tooltip('disable');\n              }, 10);\n              break;\n            }\n            case 'completed' : {\n              this.lock = 1; \n              this.goBack = false;\n              setTimeout(() => {\n                //@ts-ignore\n                $('.locked-tooltip').tooltip('disable');\n              }, 10);\n              break;\n            }\n            case 'reviewed' : {\n              this.lock = 2;\n              this.goBack = true;\n              setTimeout(() => {\n                //@ts-ignore\n                $('.locked-tooltip').tooltip('enable');\n                //@ts-ignore\n                $('.locked-tooltip').tooltip({\n                  trigger: 'hover'\n                });\n              }, 50);\n              break;\n            }\n          }\n\n        }\n      }\n    );\n\n    this.expand.expEdit$.subscribe(\n      trigger => {\n        /* console.log(\"trigger core-tab: \", trigger) */\n        setTimeout(() => {\n          if(trigger){\n            let isEditExpanded = this.expand.isEditTabExpanded();\n            let isEpigraphyExpanded = this.expand.isEpigraphyTabExpanded();\n  \n            /* console.log(isEditExpanded);\n            console.log(isEpigraphyExpanded) */\n  \n            \n              if(!isEpigraphyExpanded){\n                this.exp_trig = 'in';\n                this.rend.setStyle(this.expander_body.nativeElement, 'height', 'calc(100vh - 18rem)')\n                this.rend.setStyle(this.expander_body.nativeElement, 'max-height', 'calc(100vh - 18rem)')\n              }else{\n                this.rend.setStyle(this.expander_body.nativeElement, 'height', 'calc(50vh - 10rem)');\n                this.rend.setStyle(this.expander_body.nativeElement, 'max-height', 'calc(50vh - 10rem)');\n                this.exp_trig = 'in';\n              }\n            \n            \n            \n          }else if(trigger==null){\n            return;\n          }else{\n            this.rend.setStyle(this.expander_body.nativeElement, 'height', 'calc(50vh - 10rem)');\n            this.rend.setStyle(this.expander_body.nativeElement, 'max-height', 'calc(50vh - 10rem)');\n            this.exp_trig = 'out';\n          }\n        }, 100);\n        \n      }\n    );\n\n    this.expand.expEpigraphy$.subscribe(\n      trigger => {\n        setTimeout(() => {\n          if(trigger){\n            this.exp_trig = 'in';\n            this.rend.setStyle(this.expander_body.nativeElement, 'height', 'calc(50vh - 10rem)')\n            this.rend.setStyle(this.expander_body.nativeElement, 'max-height', 'calc(50vh - 10rem)')\n          }else if(trigger==null){\n            return;\n          }else{\n            this.rend.setStyle(this.expander_body.nativeElement, 'max-height', 'calc(50vh - 10rem)');\n            this.exp_trig = 'out';\n          }\n        }, 100);\n        \n      }\n    );\n\n    this.lexicalService.updateLexCardReq$.subscribe(\n      data => {\n        console.log(data)\n        if(data != null){\n          this.lastUpdateDate = data['lastUpdate']\n          if(data['creationDate'] != undefined){\n            this.creationDate = data['creationDate']\n          }\n        }\n      }\n    )\n\n    this.lexicalService.spinnerAction$.subscribe(\n      data => {\n        if(data == 'on'){\n          this.searchIconSpinner = true;\n        }else{\n          this.searchIconSpinner = false;\n        }\n      },\n      error => {\n\n      }\n    )\n\n    this.searchSubject.pipe(debounceTime(1000)).subscribe(\n      data => {\n        this.queryTitle  = data.query;\n        data.queryMode ? this.queryMode = 'everything' : this.queryMode = 'titleCreatorYear';\n        this.searchBibliography(this.queryTitle, this.queryMode);\n      }\n    )\n\n    //@ts-ignore\n    $(\"#biblioModal\").modal(\"show\");\n    $('.modal-backdrop').appendTo('.ui-modal');\n    //@ts-ignore\n    $('#biblioModal').modal({backdrop: 'static', keyboard: false})  \n    \n    $('.modal-backdrop').css('height', 'inherit');\n    $('body').removeClass(\"modal-open\")\n    $('body').css(\"padding-right\", \"\");\n\n    this.biblioService.bootstrapData(this.start, this.sortField, this.direction).subscribe(\n      data=> {\n        this.memorySort = {field : this.sortField, direction : this.direction}\n        this.bibliography = data;\n        this.bibliography.forEach(element => {\n          element['selected'] = false;\n        })\n        \n        \n        //@ts-ignore\n        $('#biblioModal').modal('hide');\n        $('.modal-backdrop').remove();\n      },error=>{\n        console.log(error)\n      }\n    )\n  }\n\n  changeStatus() {\n\n    //console.log(this.goBack)\n\n    if(!this.goBack){\n      this.lock++;\n      if (this.lock == 2){\n        this.goBack = true;\n      }\n    }else if(this.goBack){\n      this.lock--;\n      if (this.lock == 0){\n        this.goBack = false;\n      }\n    }\n\n    this.searchIconSpinner = true;\n    let lexicalId = this.object.lexicalEntryInstanceName;\n    //console.log(this.lock)\n    switch(this.lock){\n      case 0 : {\n          let parameters = {\n            relation : \"status\",\n            value : \"working\"\n          }\n          this.lexicalService.updateLexicalEntry(lexicalId, parameters).pipe(debounceTime(500)).subscribe(\n          data => {\n            this.searchIconSpinner = false;\n            data['request'] = 0;\n            this.lexicalService.updateLexCard(data)\n            this.lexicalService.refreshAfterEdit(data);\n            setTimeout(() => {\n              //@ts-ignore\n              $('.locked-tooltip').tooltip('disable');\n            }, 10);\n          },\n          error => {\n            this.searchIconSpinner = false;\n            const data = this.object;\n            data['request'] = 0;\n            this.lexicalService.refreshAfterEdit(data);\n            this.lexicalService.updateLexCard({lastUpdate : error.error.text})\n            setTimeout(() => {\n              //@ts-ignore\n              $('.locked-tooltip').tooltip('disable');\n            }, 10);\n          }\n        )\n      }; break;\n      case 1 : {\n        let parameters = {\n          relation : \"status\",\n          value : \"completed\"\n        }\n        this.lexicalService.updateLexicalEntry(lexicalId, parameters).pipe(debounceTime(500)).subscribe(\n          data => {\n\n            this.searchIconSpinner = false;\n            data['request'] = 0;\n            this.lexicalService.updateLexCard(data)\n            this.lexicalService.refreshAfterEdit(data);\n            setTimeout(() => {\n              //@ts-ignore\n              $('.locked-tooltip').tooltip('disable');\n            }, 10);\n          },\n          error => {\n            this.searchIconSpinner = false;\n            const data = this.object;\n            data['request'] = 0;\n            this.lexicalService.refreshAfterEdit(data);\n            this.lexicalService.updateLexCard({lastUpdate : error.error.text})\n            setTimeout(() => {\n              //@ts-ignore\n              $('.locked-tooltip').tooltip('disable');\n            }, 10);\n          }\n        )\n      }; break;\n      case 2 : {\n        let parameters = {\n          relation : \"status\",\n          value : \"reviewed\"\n        }\n        this.lexicalService.updateLexicalEntry(lexicalId, parameters).pipe(debounceTime(500)).subscribe(\n          data => {\n            this.searchIconSpinner = false;\n            data['request'] = 0;\n            this.lexicalService.updateLexCard(data)\n            this.lexicalService.refreshAfterEdit(data);\n            setTimeout(() => {\n              //@ts-ignore\n              $('.locked-tooltip').tooltip('enable');\n              //@ts-ignore\n              $('.locked-tooltip').tooltip({\n                trigger: 'hover'\n              });\n            }, 50);\n          },\n          error => {\n            \n            this.searchIconSpinner = false;\n            const data = this.object;\n            data['request'] = 0;\n            this.lexicalService.refreshAfterEdit(data);\n            this.lexicalService.updateLexCard({lastUpdate : error.error.text})\n            setTimeout(() => {\n              //@ts-ignore\n              $('.locked-tooltip').tooltip('enable');\n              //@ts-ignore\n              $('.locked-tooltip').tooltip({\n                trigger: 'hover'\n              });\n            }, 50);\n          }\n        )\n      }; break;\n    }\n    \n  }\n\n  deleteLexicalEntry(){\n    this.searchIconSpinner = true;\n    let lexicalId = this.object.lexicalEntryInstanceName\n    this.lexicalService.deleteLexicalEntry(lexicalId).subscribe(\n      data=>{\n        //console.log(data)\n        this.searchIconSpinner = false;\n        this.lexicalService.deleteRequest(this.object);\n        this.lexicalEntryData = null;\n        this.isLexicalEntry = false;\n        this.object = null;\n        this.lexicalService.refreshLangTable();\n        this.lexicalService.refreshFilter({request : true})\n        this.lexicalService.sendToCoreTab(null);\n        this.lexicalService.sendToRightTab(null);\n        this.biblioService.sendDataToBibliographyPanel(null);\n\n        this.expand.expandCollapseEdit(false);\n        this.expand.openCollapseEdit(false)\n        if(this.expand.isEpigraphyOpen){\n          this.expand.expandCollapseEpigraphy();\n        }\n        this.toastr.success(lexicalId + 'deleted correctly', '', {\n          timeOut: 5000,\n        });\n      },error=> {\n        //console.log(error)\n        this.searchIconSpinner = false;\n        //this.lexicalService.deleteRequest(this.object);\n        //this.lexicalService.refreshLangTable();\n        //this.lexicalService.refreshFilter({request : true})\n        this.toastr.error(error.error, 'Error', {\n          timeOut: 5000,\n        });\n      }\n    )\n  }\n\n  deleteForm(){\n    this.searchIconSpinner = true;\n    let lexicalId = this.object.formInstanceName;    \n    this.lexicalService.deleteForm(lexicalId).subscribe(\n      data=>{\n        this.searchIconSpinner = false;\n        this.lexicalService.deleteRequest(this.object);\n        this.isForm = false;\n        this.object = null;\n        this.toastr.success(lexicalId + 'deleted correctly', '', {\n          timeOut: 5000,\n        });\n      },error=> {\n        console.log(error)\n        this.searchIconSpinner = false;\n        this.lexicalService.deleteRequest(this.object);\n      }\n    )\n  }\n\n  deleteSense(){\n    this.searchIconSpinner = true;\n    let lexicalId = this.object.senseInstanceName;\n    \n    this.lexicalService.deleteSense(lexicalId).subscribe(\n      data=>{\n        this.searchIconSpinner = false;\n        this.lexicalService.deleteRequest(this.object);\n        this.isSense = false;\n        this.object = null;\n        this.toastr.success(lexicalId + 'deleted correctly', '', {\n          timeOut: 5000,\n        });\n      },error=> {\n        this.searchIconSpinner = false;\n        this.lexicalService.deleteRequest(this.object);\n      }\n    )\n  }\n\n  addNewForm(){\n    this.searchIconSpinner = true;\n    /* console.log(this.object) */\n    this.object['request'] = 'form'\n    if(this.isLexicalEntry){\n      let lexicalId = this.object.lexicalEntryInstanceName;\n      this.lexicalService.createNewForm(lexicalId).subscribe(\n        data=>{\n          this.toastr.success('Form added correctly', '', {\n            timeOut: 5000,\n          });\n          console.log(data);\n          if(data['creator'] == this.object.creator){\n            data['flagAuthor'] = false;\n          }else{\n            data['flagAuthor'] = true;\n          }\n          this.lexicalService.addSubElementRequest({'lex' : this.object, 'data' : data});\n          this.searchIconSpinner = false;\n        },error=> {\n          console.log(error)\n          this.toastr.error(error.error, 'Error', {\n            timeOut: 5000,\n          });\n          this.searchIconSpinner = false;\n        }\n      )\n    }else if(this.isForm){\n      let parentNodeInstanceName = this.object.parentNodeInstanceName;\n      //console.log(this.object);\n      this.object['request'] = 'form';\n      this.object['lexicalEntryInstanceName'] = parentNodeInstanceName\n      this.lexicalService.createNewForm(parentNodeInstanceName).subscribe(\n        data=>{\n          if(data['creator'] == this.object.creator){\n            data['flagAuthor'] = false;\n          }else{\n            data['flagAuthor'] = true;\n          }\n          this.lexicalService.addSubElementRequest({'lex' : this.object, 'data' : data});\n          this.searchIconSpinner = false;\n          this.toastr.success('Form added correctly', '', {\n            timeOut: 5000,\n          });\n        },error=> {\n          //console.log(error)\n          this.searchIconSpinner = false;\n          this.toastr.error(error.error, 'Error', {\n            timeOut: 5000,\n          });\n        }\n      )\n    }else if(this.isSense){\n      let parentNodeInstanceName = this.object.parentNodeInstanceName;\n      this.object['request'] = 'form';\n      this.object['lexicalEntryInstanceName'] = parentNodeInstanceName\n      //console.log(this.object);\n      this.lexicalService.createNewForm(parentNodeInstanceName).subscribe(\n        data=>{\n          if(data['creator'] == this.object.creator){\n            data['flagAuthor'] = false;\n          }else{\n            data['flagAuthor'] = true;\n          }\n          this.lexicalService.addSubElementRequest({'lex' : this.object, 'data' : data});\n          this.searchIconSpinner = false;\n          this.toastr.success('Form added correctly', '', {\n            timeOut: 5000,\n          });\n        },error=> {\n          this.toastr.error(error.error, 'Error', {\n            timeOut: 5000,\n          });\n          this.searchIconSpinner = false;\n        }\n      )\n    }\n    \n  }\n\n  addNewSense(){\n    this.searchIconSpinner = true;\n    this.object['request'] = 'sense'\n    if(this.isLexicalEntry){\n      let lexicalId = this.object.lexicalEntryInstanceName;\n      this.lexicalService.createNewSense(lexicalId).subscribe(\n        data=>{\n          if(data['creator'] == this.object.creator){\n            data['flagAuthor'] = false;\n          }else{\n            data['flagAuthor'] = true;\n          }\n          this.lexicalService.addSubElementRequest({'lex' : this.object, 'data' : data});\n          this.searchIconSpinner = false;\n          this.toastr.success('Sense added correctly', '', {\n            timeOut: 5000,\n          });\n        },error=> {\n          this.searchIconSpinner = false;\n          this.toastr.error(error.error, 'Error', {\n            timeOut: 5000,\n          });\n          \n        }\n      )\n    }else if(this.isSense){\n      let parentNodeInstanceName = this.object.parentNodeInstanceName;\n      this.object['lexicalEntryInstanceName'] = parentNodeInstanceName\n      this.object['request'] = 'sense'\n      //console.log(this.object);\n      this.lexicalService.createNewSense(parentNodeInstanceName).subscribe(\n        data=>{\n          if(data['creator'] == this.object.creator){\n            data['flagAuthor'] = false;\n          }else{\n            data['flagAuthor'] = true;\n          }\n          this.lexicalService.addSubElementRequest({'lex' : this.object, 'data' : data});\n          this.searchIconSpinner = false;\n          this.toastr.success('Sense added correctly', '', {\n            timeOut: 5000,\n          });\n        },error=> {\n          this.searchIconSpinner = false;\n          this.toastr.error(error.error, 'Error', {\n            timeOut: 5000,\n          });\n        }\n      )\n    }else if(this.isForm){\n      let parentNodeInstanceName = this.object.parentNodeInstanceName;\n      this.object['lexicalEntryInstanceName'] = parentNodeInstanceName\n      this.object['request'] = 'sense'\n      //console.log(this.object);\n      this.lexicalService.createNewSense(parentNodeInstanceName).subscribe(\n        data=>{\n          if(data['creator'] == this.object.creator){\n            data['flagAuthor'] = false;\n          }else{\n            data['flagAuthor'] = true;\n          }\n          this.lexicalService.addSubElementRequest({'lex' : this.object, 'data' : data});\n          this.searchIconSpinner = false;\n          this.toastr.success('Sense added correctly', '', {\n            timeOut: 5000,\n          });\n          //this.lexicalService.refreshLexEntryTree();\n        },error=> {\n          this.searchIconSpinner = false;\n          this.toastr.error(error.error, 'Error', {\n            timeOut: 5000,\n          });\n          //this.lexicalService.refreshLexEntryTree();\n        }\n      )\n    }\n\n  }\n\n  addNewEtymology(){\n    this.searchIconSpinner = true;\n    this.object['request'] = 'etymology'\n    let parentNodeInstanceName = '';\n    if(this.object.lexicalEntryInstanceName != undefined\n      && this.object.senseInstanceName == undefined){\n        console.log(1)\n        parentNodeInstanceName = this.object.lexicalEntryInstanceName;\n    }else if(this.object.formInstanceName != undefined){\n      parentNodeInstanceName = this.object.parentNodeInstanceName;\n      this.object['lexicalEntryInstanceName'] = parentNodeInstanceName\n      console.log(2)\n    }else if(this.object.senseInstanceName != undefined){\n      parentNodeInstanceName = this.object.parentNodeInstanceName;\n      this.object['lexicalEntryInstanceName'] = parentNodeInstanceName\n      console.log(3)\n    }\n\n    console.log(parentNodeInstanceName)\n    this.lexicalService.createNewEtymology(parentNodeInstanceName).subscribe(\n      data=>{\n        console.log(data)\n        if(data['creator'] == this.object.creator){\n          data['flagAuthor'] = false;\n        }else{\n          data['flagAuthor'] = true;\n        }\n        this.lexicalService.addSubElementRequest({'lex' : this.object, 'data' : data});\n        this.searchIconSpinner = false;\n        this.toastr.success('Etymology added correctly', '', {\n          timeOut: 5000,\n        });\n      },error=> {\n        this.searchIconSpinner = false;\n      }\n    )\n\n  }\n\n  showBiblioModal(){\n    this.modal.show();\n  }\n\n  addBibliographyItem(item?){\n    //@ts-ignore\n    $(\"#biblioModal\").modal(\"show\");\n    $('.modal-backdrop').appendTo('.ui-modal');\n    //@ts-ignore\n    $('#biblioModal').modal({backdrop: 'static', keyboard: false})  \n    \n    $('.modal-backdrop').css('height', 'inherit');\n    $('body').removeClass(\"modal-open\")\n    $('body').css(\"padding-right\", \"\");\n\n    let instance = '';\n    if(this.object.lexicalEntryInstanceName != undefined\n      && this.object.lexicalEntryInstanceName.senseInstanceName == undefined){\n        instance = this.object.lexicalEntryInstanceName;\n    }else if(this.object.formInstanceName != undefined){\n      instance = this.object.formInstanceName;\n    }else if(this.object.senseInstanceName != undefined){\n      instance = this.object.senseInstanceName;\n    }\n\n    if(item != undefined){\n\n      let id = item.data.key != undefined ? item.data.key : '';\n      let title = item.data.title.replace(\"\\\"\", '') != undefined ? item.data.title : '';\n      let author;\n      \n      item.data.creators.forEach(element => {\n        if(element.creatorType == 'author'){\n          author = element.lastName + ' ' + element.firstName;\n          return true;\n        }else{\n          return false;\n        }\n      });\n      author = author != undefined ? author : ''\n      let date = item.data.date != undefined ? item.data.date : '';\n      let url = item.data.url != undefined ? item.data.url : ''\n      let seeAlsoLink = '';\n\n      let parameters = {\n        id : id,\n        title: title,\n        author: author,\n        date: date,\n        url: url,\n        seeAlsoLink: seeAlsoLink\n      }\n      console.log(instance, parameters)\n      this.lexicalService.addBibliographyData(instance, parameters).subscribe(\n        data=>{\n          console.log(data);\n          setTimeout(() => {\n            //@ts-ignore\n            $('#biblioModal').modal('hide');\n            $('.modal-backdrop').remove();\n            this.toastr.success('Item added, check bibliography panel', '', {\n              timeOut: 5000,\n            });\n            this.biblioService.triggerPanel(data)\n            setTimeout(() => {\n              this.modal.hide();\n            }, 10);\n          }, 300);\n          this.biblioService.sendDataToBibliographyPanel(data);\n        },error=>{\n          console.log(error)\n          if(typeof(error.error) == 'string' && error.error.length < 1000){\n            this.toastr.error(error.error, '', {\n              timeOut: 5000,\n            });\n          }else{\n            this.toastr.error(error.statusText, '', {\n              timeOut: 5000,\n            });\n          }\n          \n          setTimeout(() => {\n            //@ts-ignore\n            $('#biblioModal').modal('hide');\n            $('.modal-backdrop').remove();\n\n            setTimeout(() => {\n              this.modal.hide();\n            }, 10);\n          }, 300);\n          \n        }\n      )\n    }\n    \n  }\n\n  checkIfCreatorExist(item?){\n    return item.some(element => element.creatorType === 'author')\n  }\n\n  triggerSearch(evt, query, queryMode) {\n    if(evt.key != 'Control' && evt.key != 'Shift' && evt.key != 'Alt'){\n      this.searchSubject.next({query, queryMode})\n    }\n  }\n\n  searchBibliography(query?:string, queryMode?:any){\n    this.start = 0;\n    this.selectedItem = null;\n    //@ts-ignore\n    $(\"#biblioModal\").modal(\"show\");\n    $('.modal-backdrop').appendTo('.table-body');\n    //@ts-ignore\n    $('#biblioModal').modal({backdrop: 'static', keyboard: false})  \n    $('body').removeClass(\"modal-open\")\n    $('body').css(\"padding-right\", \"\");\n    this.tableBody.nativeElement.scrollTop = 0;\n    if(this.queryTitle != ''){\n      this.biblioService.filterBibliography(this.start, this.sortField, this.direction, this.queryTitle, this.queryMode).subscribe(\n        data => {\n          console.log(data);\n          this.bibliography = [];\n          data.forEach(element => {\n            this.bibliography.push(element)\n          });\n          //@ts-ignore\n          $('#biblioModal').modal('hide');\n          $('.modal-backdrop').remove();\n        },\n        error => {\n          console.log(error)\n        }\n      )\n    }else{\n      this.biblioService.filterBibliography(this.start, this.sortField, this.direction, this.queryTitle, this.queryMode).subscribe(\n        data => {\n          console.log(data);\n          this.bibliography = [];\n          data.forEach(element => {\n            this.bibliography.push(element)\n          });\n          //@ts-ignore\n          $('#biblioModal').modal('hide');\n          $('.modal-backdrop').remove();\n        },\n        error => {\n          console.log(error)\n        }\n      )\n    }\n  }\n\n  onScrollDown(){\n    //@ts-ignore\n    $(\"#biblioModal\").modal(\"show\");\n    $('.modal-backdrop').appendTo('.table-body');\n    //@ts-ignore\n    $('#biblioModal').modal({backdrop: 'static', keyboard: false})  \n    $('.modal-backdrop').appendTo('.table-body');\n    $('body').removeClass(\"modal-open\")\n    $('body').css(\"padding-right\", \"\");\n\n    this.start += 25;\n    \n    if(this.queryTitle != ''){\n      this.biblioService.filterBibliography(this.start, this.sortField, this.direction, this.queryTitle, this.queryMode).subscribe(\n        data=>{\n          console.log(data)\n          //@ts-ignore\n          $('#biblioModal').modal('hide');\n          $('.modal-backdrop').remove();\n          data.forEach(element => {\n            this.bibliography.push(element)\n          });\n        },error=>{\n          console.log(error)\n        }\n      )\n    }else{\n      this.biblioService.filterBibliography(this.start, this.sortField, this.direction, this.queryTitle, this.queryMode).subscribe(\n        data=> {\n          \n          data.forEach(element => {\n            this.bibliography.push(element)\n          });\n                  \n          //@ts-ignore\n          $('#biblioModal').modal('hide');\n          $('.modal-backdrop').remove();\n        },error=>{\n          console.log(error)\n        }\n      );\n    }\n\n    \n  }\n\n  selectItem(evt, i){\n    /* console.log(evt, i); */\n    if(evt.shiftKey){\n\n    }\n    this.bibliography.forEach(element=> {\n      if(element.key == i.key){\n        element.selected = !element.selected;\n        element.selected ? this.selectedItem = element : this.selectedItem = null;\n        return true;\n      }else{\n        element.selected = false;\n        return false;\n      }\n    })\n    \n  }\n\n  sortBibliography(evt?, val?){\n    \n    \n    if(this.memorySort.field == val){\n      if(this.direction == 'asc'){\n        this.direction = 'desc'\n        this.memorySort.direction = 'desc';\n      }else{\n        this.direction = 'asc';\n        this.memorySort.direction = 'asc';\n      }\n    }else{\n      this.sortField = val;\n      this.direction = 'asc';\n      this.memorySort = {field : this.sortField, direction : this.direction};\n    }\n\n    //@ts-ignore\n    $(\"#biblioModal\").modal(\"show\");\n    $('.modal-backdrop').appendTo('.table-body');\n    //@ts-ignore\n    $('#biblioModal').modal({backdrop: 'static', keyboard: false})  \n    $('.modal-backdrop').appendTo('.table-body');\n    $('body').removeClass(\"modal-open\")\n    $('body').css(\"padding-right\", \"\");\n    this.start = 0;\n    this.tableBody.nativeElement.scrollTop = 0;\n\n    this.biblioService.filterBibliography(this.start, this.sortField, this.direction, this.queryTitle, this.queryMode).subscribe(\n      data=>{\n        console.log(data)\n        this.bibliography = [];\n        //@ts-ignore\n        $('#biblioModal').modal('hide');\n        $('.modal-backdrop').remove();\n        data.forEach(element => {\n          this.bibliography.push(element)\n        });\n      },error=>{\n        console.log(error)\n      }\n    )\n    \n  }\n\n  onCloseModal(){\n    this.selectedItem = null;\n    this.start = 0;\n    this.sortField = 'title';\n    this.direction = 'asc';\n    this.tableBody.nativeElement.scrollTop = 0;\n    this.memorySort = { field: this.sortField, direction: this.direction}\n    this.biblioService.bootstrapData(this.start, this.sortField, this.direction).subscribe(\n      data=> {\n        this.bibliography = data;\n        this.bibliography.forEach(element => {\n          element['selected'] = false;\n        }) \n                \n       \n      },error=>{\n        console.log(error)\n      }\n    );\n  }\n}\n","\n\n<div id=\"cardsAccordion\" class=\"accordion\" [hidden]=\"object == null\">\n    <div class=\"card my-2\">\n        <div class=\"card-header\">\n            <h5 class=\"mb-0 w-100 d-flex justify-content-between align-self-center\">\n                <div>\n                    <span class=\"btn\" *ngIf=\"object != null\">\n                        <span *ngIf=\"isLexicalEntry\">\n                            Lexical Entry\n                        </span>\n                        <span *ngIf=\"isSense\">\n                            Sense\n                        </span>\n                        <span *ngIf=\"isForm\">\n                            Form\n                        </span>\n                        CREATED BY {{creator}} ON {{creationDate | date :'dd/MM/yyyy hh:mm:ss'}}\n                    </span>\n                </div>\n                <div>\n                    <div class=\"spinner-border spinner-border-sm m-1\" role=\"status\" *ngIf=\"searchIconSpinner\">\n                        <span class=\"sr-only\">Loading...</span>\n                    </div>\n                    <button class=\"btn btn-link\" *ngIf=\"isLexicalEntry\" (click)=\"removeElementModal.show()\">\n                        <i class=\"fa fa-trash\"></i>\n                    </button>\n                    <button class=\"btn btn-link\" *ngIf=\"isForm\" title=\"delete form\" (click)=\"removeElementModal.show()\">\n                        <i class=\"fa fa-trash\"></i>\n                    </button>\n                    <button class=\"btn btn-link\" *ngIf=\"isSense\" title=\"delete sense\"\n                        (click)=\"removeElementModal.show()\">\n                        <i class=\"fa fa-trash\"></i>\n                    </button>\n                    <button class=\"btn btn-link\" (click)=\"changeStatus()\" *ngIf=\"isLexicalEntry\">\n                        <i class=\"fa fa-circle\" [hidden]=\"lock!=0\" style=\"color: red\"></i>\n                        <i class=\"fa fa-circle\" [hidden]=\"lock!=1\" style=\"color: yellow\"></i>\n                        <i class=\"fa fa-circle locked-tooltip\" [hidden]=\"lock!=2\" data-toggle=\"tooltip\"\n                            data-placement=\"bottom\" data-html=\"true\" title=\"Locked tooltip\" style=\"color:green;\"></i>\n                    </button>\n                </div>\n            </h5>\n        </div>\n        <div #expander [@slideInOut]=\"exp_trig\" class=\"card-body core-tab-body\">\n            \n            <div id=\"coreTabModal\" class=\"modal fade\" role=\"dialog\">\n                <div class=\"modal-dialog\">\n\n                    <!-- Modal content-->\n                    <div class=\"modal-content\">\n                        <div class=\"modal-body\">\n                            <div class=\"d-flex justify-content-center\">\n                                <div class=\"spinner-border\" role=\"status\">\n                                    <span class=\"sr-only\">Loading...</span>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n\n                </div>\n            </div>\n            <app-lexical-entry-core-form [lexData]=\"lexicalEntryData\" *ngIf=\"isLexicalEntry\">\n            </app-lexical-entry-core-form>\n            <app-form-core-form [formData]=\"formData\" *ngIf=\"isForm\"></app-form-core-form>\n            <app-sense-core-form [senseData]=\"senseData\" *ngIf=\"isSense\"></app-sense-core-form>\n            <app-lexical-concept-form [lexicalConceptData]=\"lexicalConceptData\" *ngIf=\"isLexicalConcept\">\n            </app-lexical-concept-form>\n        </div>\n        <div class=\"card-footer text-muted\">\n            <div class=\"w-100 d-flex justify-content-between align-items-center\">\n                <div *ngIf=\"object != null\">\n                    <span class=\"pl-2\">LAST UPDATE ON {{lastUpdateDate | date :'dd/MM/yyyy hh:mm:ss'}}</span>\n                </div>\n                <div class=\"btn-group dropup dropleft\">\n                    <button class=\"btn btn-success\" type=\"button\" id=\"dropdownAddLemma\" data-toggle=\"dropdown\"\n                        aria-haspopup=\"true\" aria-expanded=\"false\"> <i class=\"fas fa-plus\"></i> </button>\n                    <div class=\"dropdown-menu dropdown-menu-right\" aria-labelledby=\"dropdownAddLemma\">\n                        <button class=\"dropdown-item\" title=\"add new form\" (click)=\"addNewForm()\">Add Form</button>\n                        <button class=\"dropdown-item\" title=\"add new sense\" (click)=\"addNewSense()\">Add Sense</button>\n                        <button class=\"dropdown-item\" title=\"add new etymology\" (click)=\"addNewEtymology()\">Add Etymology</button>\n                        <button class=\"dropdown-item\" title=\"add new bibliography item\" (click)=\"showBiblioModal()\">Add Bibliography</button>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n</div>\n\n<app-modal #removeElementModal class=\"remove_element_modal\">\n    <ng-container class=\"app-modal-header\"></ng-container>\n    <ng-container class=\"app-modal-body\">\n        <div class=\"card\">\n            <div class=\"card-body\" *ngIf=\"object != null\">\n                <div class=\"form-group row ml-2 mt-3 mr-2\" *ngIf=\"isLexicalEntry\">\n                    <label for=\"inputLabel\" class=\"col-lg-12 col-form-label\"\n                        style=\"font-size: 12px; text-align: center\">Are you sure to delete {{object.label}}?</label>\n                </div>\n                <div class=\"form-group row ml-2 mt-3 mr-2\" *ngIf=\"isForm\">\n                    <label for=\"inputLabel\" class=\"col-lg-12 col-form-label\"\n                        style=\"font-size: 12px; text-align: center\">Are you sure to delete\n                        {{object.label[0]['propertyValue']}}?</label>\n                </div>\n                <div class=\"form-group row ml-2 mt-3 mr-2\" *ngIf=\"isSense\">\n                    <label for=\"inputLabel\" class=\"col-lg-12 col-form-label\"\n                        style=\"font-size: 12px; text-align: center\">Are you sure to delete\n                        {{object.senseInstanceName}}?</label>\n                </div>\n                <div class=\"form-group row ml-2 mt-3 mr-2 justify-content-md-center\">\n                    <div class=\"input-group col-lg-5 justify-content-md-center\"\n                        style=\"align-items: center; text-align: center;\">\n                        <div class=\"input-group-append ml-2\" *ngIf=\"isLexicalEntry\">\n                            <button class=\"btn btn-success\" type=\"button\"\n                                (click)=\"deleteLexicalEntry(); removeElementModal.hide()\"><i\n                                    class=\"fas fa-check\"></i></button>\n                        </div>\n                        <div class=\"input-group-append ml-2\" *ngIf=\"isForm\">\n                            <button class=\"btn btn-success\" type=\"button\"\n                                (click)=\"deleteForm(); removeElementModal.hide()\"><i class=\"fas fa-check\"></i></button>\n                        </div>\n                        <div class=\"input-group-append ml-2\" *ngIf=\"isSense\">\n                            <button class=\"btn btn-success\" type=\"button\"\n                                (click)=\"deleteSense(); removeElementModal.hide()\"><i class=\"fas fa-check\"></i></button>\n                        </div>\n                        <div class=\"input-group-append ml-2\">\n                            <button class=\"btn btn-danger\" type=\"button\" (click)=\"removeElementModal.hide()\"><i\n                                    class=\"fas fa-times\"></i></button>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </ng-container>\n</app-modal>\n\n<app-modal #addBibliography class=\"biblio_modal\" [backdrop]=\"false\" [inViewport]=\"true\" (closeModal)=\"onCloseModal()\">\n\n    <ng-container class=\"app-modal-header\">\n        <img src=\"../../../../../../assets/images/zotero_logo.png\">\n        <span class=\"ml-2 biblio-header-title\">Library: PRIN Italia Antica</span>\n    </ng-container>\n\n    <ng-container class=\"app-modal-body\">\n        <!-- SEARCH BAR -->\n        <div class=\"w-25 pt-1 pb-1\">\n            <div class=\"input-group mb-3\" *ngIf=\"{switch : false}; let variable\">\n                <div class=\"input-group-prepend\">\n                    <button class=\"btn btn-outline-secondary dropdown-toggle\" type=\"button\" data-toggle=\"dropdown\"\n                        aria-haspopup=\"true\" aria-expanded=\"false\"><i class=\"fa fa-search\"></i></button>\n                    <div class=\"dropdown-menu\">\n                        <a [class.disable_click_fire]=\"!variable.switch\" class=\"dropdown-item\" style=\"cursor: pointer;\"\n                            (click)=\"variable.switch = false; searchBibliography(searchBiblio.value, variable.switch);\">Normal</a>\n                        <a [class.disable_click_fire]=\"variable.switch\" class=\"dropdown-item\" style=\"cursor: pointer;\"\n                            (click)=\"variable.switch = true; searchBibliography(searchBiblio.value, variable.switch);\">Full\n                            Text</a>\n                    </div>\n                </div>\n                <input #searchBiblio (keyup)=\"triggerSearch($event, searchBiblio.value, variable.switch)\" type=\"text\"\n                    class=\"form-control\" aria-label=\"Text input with dropdown button\"\n                    [placeholder]=\"variable.switch ?'Title, creator, year + Full Text' : 'Title, creator, year'\"\n                    style=\"font-size: 12px;\">\n            </div>\n\n        </div>\n        <!-- {{'start: '+start + ' sortField: '+ sortField + ' direction: '+ direction + ' queryTitle: '+ queryTitle + ' queryMode: '+ queryMode}} -->\n\n        <!-- SKELETON CONTAINER -->\n        <div class=\"container-fluid\">\n            <div class=\"row\">\n                <div class=\"col-md-8 pl-0\">\n\n\n                    <!-- TABLE -->\n                    <div class=\"table-responsive table-body\">\n                        <div id=\"biblioModal\" class=\"modal fade\" role=\"dialog\">\n                            <div class=\"modal-dialog\">\n\n                                <!-- Modal content-->\n                                <div class=\"modal-content\">\n                                    <div class=\"modal-body\">\n                                        <div class=\"d-flex justify-content-center\">\n                                            <div class=\"spinner-border\" role=\"status\">\n                                                <span class=\"sr-only\">Loading...</span>\n                                            </div>\n                                        </div>\n                                    </div>\n                                </div>\n\n                            </div>\n                        </div>\n                        \n                        <table class=\"table table-striped table-hover\" [hidden]=\"bibliography.length == 0\">\n                            <thead>\n                                <tr>\n                                    <th scope=\"col\" style=\"width: 50%; cursor: pointer;\" (click)=\"sortBibliography($event, 'title')\">\n                                        <span>Title</span>\n                                        <span class=\"float-right\">\n                                            <i class=\"fas fa-sort-up\" *ngIf=\"direction == 'asc' && sortField == 'title'\"></i>\n                                            <i class=\"fas fa-sort-down\" *ngIf=\"direction == 'desc' && sortField == 'title'\"></i>\n                                        </span>\n                                    </th>\n                                    <th scope=\"col\" style=\"width: 30%; cursor: pointer;\" (click)=\"sortBibliography($event, 'creator')\">\n                                        <span>Creator</span>\n                                        <span class=\"float-right\">\n                                            <i class=\"fas fa-sort-up\" *ngIf=\"direction == 'asc' && sortField == 'creator'\"></i>\n                                            <i class=\"fas fa-sort-down\" *ngIf=\"direction == 'desc' && sortField == 'creator'\"></i>\n                                        </span>\n                                    </th>\n                                    <th scope=\"col\" style=\"width: 20%; cursor: pointer;\" (click)=\"sortBibliography($event, 'date')\">\n                                        <span>Date</span>\n                                        <span class=\"float-right\">\n                                            <i class=\"fas fa-sort-up\" *ngIf=\"direction == 'asc' && sortField == 'date'\"></i>\n                                            <i class=\"fas fa-sort-down\" *ngIf=\"direction == 'desc' && sortField == 'date'\"></i>\n                                        </span>\n                                    </th>\n                                </tr>\n                            </thead>\n                            <tbody #table_body infiniteScroll [infiniteScrollDistance]=\"0.4\"\n                                [infiniteScrollThrottle]=\"150\" [scrollWindow]=\"false\" (scrolled)=\"onScrollDown()\">\n\n\n                                <tr *ngFor=\"let item of bibliography\" (click)=\"selectItem($event, item)\"\n                                    [ngClass]=\"item?.selected ? 'selected' : ''\" style=\"cursor: pointer;\">\n                                    <td style=\"width: 50%\">\n                                        <span *ngIf=\"item.data.itemType == 'book'\" class=\"pl-1 pr-1\">\n                                            <i class=\"fas fa-book\"></i>\n                                        </span>\n                                        <span *ngIf=\"item.data.itemType == 'bookSection'\" class=\"pl-1 pr-1\">\n                                            <i class=\"fas fa-book-open\"></i>\n                                        </span>\n                                        <span *ngIf=\"item.data.itemType == 'journalArticle'\" class=\"pl-1 pr-1\">\n                                            <i class=\"far fa-newspaper\"></i>\n                                        </span>\n                                        <span *ngIf=\"item.data.itemType == 'note'\" class=\"pl-1 pr-1\">\n                                            <i class=\"far fa-clipboard\"></i>\n                                        </span>\n                                        <span *ngIf=\"item.data.itemType == 'attachment'\" class=\"pl-1 pr-1\">\n                                            <i class=\"fas fa-paperclip\"></i>\n                                        </span>\n                                        <span *ngIf=\"item.data.itemType == 'conferencePaper'\" class=\"pl-1 pr-1\">\n                                            <i class=\"fas fa-chalkboard-teacher\"></i>\n                                        </span>\n                                        <span\n                                            *ngIf=\"item.data.title != undefined && item.data.title != ''\">{{item.data.title |titlecase}}</span>\n                                        <span *ngIf=\"item.data.title == undefined || item.data.title == ''\"\n                                            class=\"font-italic\">No title</span>\n                                    </td>\n                                    <td style=\"width: 30%\">\n                                        <span *ngIf=\"item.data.creators != undefined\">\n                                            <span *ngFor=\"let author of item.data.creators; let i = index\">\n                                                <span *ngIf=\"author.creatorType == 'author'\">\n                                                    {{author.lastName | titlecase}} {{author.firstName | titlecase}} \n                                                </span>\n                                            </span>\n                                            <span *ngIf=\"!checkIfCreatorExist(item.data.creators)\"\n                                                class=\"font-italic\">No data</span>\n                                        </span>\n                                        <span *ngIf=\"item.data.creators == undefined\" class=\"font-italic\">No data</span>\n                                    </td>\n                                    <td style=\"width: 20%\">\n                                        <span *ngIf=\"item.data.date != undefined && item.data.date != ''\">\n                                            {{item.data.date | titlecase}}\n                                        </span>\n                                        <span *ngIf=\"item.data.date == undefined || item.data.date == ''\"\n                                            class=\"font-italic\">\n                                            No info\n                                        </span>\n                                    </td>\n                                </tr>\n                            </tbody>\n                        </table>\n                        <p class=\"font-italic text-muted no-results\" *ngIf=\"bibliography.length == 0\">No results</p>\n                    </div>\n\n\n                </div>\n                <div class=\"col-md-4\" style=\"font-size: 14px;\">\n                    <div class=\"row\">\n                        <div class=\"col-md-12 item-description\"\n                            style=\"height: calc(100vh - 37rem); overflow: auto; font-size: 13px;\">\n                            <div *ngIf=\"!selectedItem\">\n                                <div class=\"row\">\n                                    <div class=\"col-md-12\">\n                                        <p class=\"text-muted text-center align-middle mb-1 font-italic\">\n                                            No item selected\n                                        </p>\n                                    </div>\n                                </div>\n                            </div>\n                            <div *ngIf=\"selectedItem\">\n                                <div class=\"row\"\n                                    *ngIf=\"selectedItem.data.itemType != '' && selectedItem.data.itemType != undefined\">\n                                    <div class=\"col-md-4 left\" style=\"text-align: right;\">\n                                        <p class=\"text-muted font-weight-bold mb-1\">\n                                            Item type\n                                        </p>\n                                    </div>\n                                    <div class=\"col-md-8 right\" style=\"text-align: left;\">\n                                        <p class=\"font-weight-normal mb-1\">\n                                            {{selectedItem.data.itemType | titlecase}}\n                                        </p>\n                                    </div>\n                                </div>\n                                <div class=\"row\"\n                                    *ngIf=\"selectedItem.data.title != '' && selectedItem.data.title != undefined\">\n                                    <div class=\"col-md-4 left\" style=\"text-align: right;\">\n                                        <p class=\"text-muted font-weight-bold mb-1\">\n                                            Title\n                                        </p>\n                                    </div>\n                                    <div class=\"col-md-8 right\" style=\"text-align: left;\">\n                                        <p class=\"font-weight-normal mb-1\">\n                                            {{selectedItem.data.title | titlecase}}\n                                        </p>\n                                    </div>\n                                </div>\n                                <div class=\"row\"\n                                    *ngIf=\"selectedItem.data.creators != undefined && selectedItem.data.creators.length > 0 && checkIfCreatorExist(selectedItem.data.creators)\">\n                                    <div class=\"col-md-4 left\" style=\"text-align: right;\">\n                                        <p class=\"text-muted font-weight-bold mb-1\">\n                                            Author\n                                        </p>\n                                    </div>\n                                    <div class=\"col-md-8 right\" style=\"text-align: left;\">\n                                        <span *ngFor=\"let author of selectedItem.data.creators\">\n                                            <span *ngIf=\"author.creatorType == 'author'\">\n                                                <p class=\"font-weight-normal mb-1\">\n                                                    {{author.firstName | titlecase}} {{author.lastName | titlecase}}\n                                                </p>\n                                            </span>\n                                        </span>\n                                    </div>\n                                </div>\n                                <div class=\"row\"\n                                    *ngIf=\"selectedItem.data.creators != undefined && selectedItem.data.creators.length > 0\">\n                                    <div class=\"col-md-4 left\" style=\"text-align: right;\">\n                                        <p class=\"text-muted font-weight-bold mb-1\">\n                                            Editor\n                                        </p>\n                                    </div>\n                                    <div class=\"col-md-8 right\" style=\"text-align: left;\">\n                                        <span *ngFor=\"let editor of selectedItem.data.creators\">\n                                            <span *ngIf=\"editor.creatorType == 'editor'\">\n                                                <p class=\"font-weight-normal mb-1\">\n                                                    {{editor.firstName | titlecase}} {{editor.lastName | titlecase}}\n                                                </p>\n                                            </span>\n                                        </span>\n                                    </div>\n                                </div>\n                                <div class=\"row\"\n                                    *ngIf=\"selectedItem.data.publicationTitle != '' && selectedItem.data.publicationTitle != undefined\">\n                                    <div class=\"col-md-4 left\" style=\"text-align: right;\">\n                                        <p class=\"text-muted font-weight-bold mb-1\">\n                                            Publication\n                                        </p>\n                                    </div>\n                                    <div class=\"col-md-8 right\" style=\"text-align: left;\">\n                                        <p class=\"font-weight-normal mb-1\">\n                                            {{selectedItem.data.publicationTitle | titlecase}}\n                                        </p>\n                                    </div>\n                                </div>\n                                <div class=\"row\"\n                                    *ngIf=\"selectedItem.data.publisher != '' && selectedItem.data.publisher != undefined\">\n                                    <div class=\"col-md-4 left\" style=\"text-align: right;\">\n                                        <p class=\"text-muted font-weight-bold mb-1\">\n                                            Publisher\n                                        </p>\n                                    </div>\n                                    <div class=\"col-md-8 right\" style=\"text-align: left;\">\n                                        <p class=\"font-weight-normal mb-1\">\n                                            {{selectedItem.data.publisher | titlecase}}\n                                        </p>\n                                    </div>\n                                </div>\n                                <div class=\"row\"\n                                    *ngIf=\"selectedItem.data.issue != '' && selectedItem.data.issue != undefined\">\n                                    <div class=\"col-md-4 left\" style=\"text-align: right;\">\n                                        <p class=\"text-muted font-weight-bold mb-1\">\n                                            Issue\n                                        </p>\n                                    </div>\n                                    <div class=\"col-md-8 right\" style=\"text-align: left;\">\n                                        <p class=\"font-weight-normal mb-1\">\n                                            {{selectedItem.data.issue | titlecase}}\n                                        </p>\n                                    </div>\n                                </div>\n                                <div class=\"row\"\n                                    *ngIf=\"selectedItem.data.pages != '' && selectedItem.data.pages != undefined\">\n                                    <div class=\"col-md-4 left\" style=\"text-align: right;\">\n                                        <p class=\"text-muted font-weight-bold mb-1\">\n                                            Pages\n                                        </p>\n                                    </div>\n                                    <div class=\"col-md-8 right\" style=\"text-align: left;\">\n                                        <p class=\"font-weight-normal mb-1\">\n                                            {{selectedItem.data.pages | titlecase }}\n                                        </p>\n                                    </div>\n                                </div>\n                                <div class=\"row\"\n                                    *ngIf=\"selectedItem.data.place != '' && selectedItem.data.place != undefined\">\n                                    <div class=\"col-md-4 left\" style=\"text-align: right;\">\n                                        <p class=\"text-muted font-weight-bold mb-1\">\n                                            Place\n                                        </p>\n                                    </div>\n                                    <div class=\"col-md-8 right\" style=\"text-align: left;\">\n                                        <p class=\"font-weight-normal mb-1\">\n                                            {{selectedItem.data.place | titlecase }}\n                                        </p>\n                                    </div>\n                                </div>\n                                <div class=\"row\"\n                                    *ngIf=\"selectedItem.data.date != '' && selectedItem.data.pages != date\">\n                                    <div class=\"col-md-4 left\" style=\"text-align: right;\">\n                                        <p class=\"text-muted font-weight-bold mb-1\">\n                                            Date\n                                        </p>\n                                    </div>\n                                    <div class=\"col-md-8 right\" style=\"text-align: left;\">\n                                        <p class=\"font-weight-normal mb-1\">\n                                            {{selectedItem.data.date | titlecase}}\n                                        </p>\n                                    </div>\n                                </div>\n                                <div class=\"row\"\n                                    *ngIf=\"selectedItem.data.journalAbbreviation != '' && selectedItem.data.journalAbbreviation != undefined\">\n                                    <div class=\"col-md-4 left\" style=\"text-align: right;\">\n                                        <p class=\"text-muted font-weight-bold mb-1\">\n                                            Journal Abbr\n                                        </p>\n                                    </div>\n                                    <div class=\"col-md-8 right\" style=\"text-align: left;\">\n                                        <p class=\"font-weight-normal mb-1\">\n                                            {{selectedItem.data.journalAbbreviation | titlecase}}\n                                        </p>\n                                    </div>\n                                </div>\n                                <div class=\"row\"\n                                    *ngIf=\"selectedItem.data.DOI != '' && selectedItem.data.DOI != undefined\">\n                                    <div class=\"col-md-4 left\" style=\"text-align: right;\">\n                                        <p class=\"text-muted font-weight-bold mb-1\">\n                                            <a class=\"text-muted\" href=\"{{'https://doi.org/'+selectedItem.data.DOI}}\"\n                                                target=\"_blank\">DOI <i class=\"fas fa-external-link-alt\"></i></a>\n                                        </p>\n                                    </div>\n                                    <div class=\"col-md-8 right\" style=\"text-align: left;\">\n                                        <p class=\"font-weight-normal mb-1\">\n                                            {{selectedItem.data.DOI | titlecase}}\n                                        </p>\n                                    </div>\n                                </div>\n                                <div class=\"row\"\n                                    *ngIf=\"selectedItem.data.ISSN != '' && selectedItem.data.ISSN != undefined\">\n                                    <div class=\"col-md-4 left\" style=\"text-align: right;\">\n                                        <p class=\"text-muted font-weight-bold mb-1\">\n                                            ISSN\n                                        </p>\n                                    </div>\n                                    <div class=\"col-md-8 right\" style=\"text-align: left;\">\n                                        <p class=\"font-weight-normal mb-1\">\n                                            {{selectedItem.data.ISSN | titlecase}}\n                                        </p>\n                                    </div>\n                                </div>\n                                <div class=\"row\"\n                                    *ngIf=\"selectedItem.data.url != '' && selectedItem.data.url != undefined\">\n                                    <div class=\"col-md-4 left\" style=\"text-align: right;\">\n                                        <p class=\"text-muted font-weight-bold mb-1\">\n                                            <a class=\"text-muted\" href=\"{{selectedItem.data.url}}\" target=\"_blank\">URL\n                                                <i class=\"fas fa-external-link-alt\"></i></a>\n                                        </p>\n                                    </div>\n                                    <div class=\"col-md-8 right\" style=\"text-align: left;\">\n                                        <p class=\"font-weight-normal mb-1\">\n                                            {{selectedItem.data.url}}\n                                        </p>\n                                    </div>\n                                </div>\n                                <div class=\"row\"\n                                    *ngIf=\"selectedItem.data.accessDate != '' && selectedItem.data.accessDate != undefined\">\n                                    <div class=\"col-md-4 left\" style=\"text-align: right;\">\n                                        <p class=\"text-muted font-weight-bold mb-1\">\n                                            Accessed\n                                        </p>\n                                    </div>\n                                    <div class=\"col-md-8 right\" style=\"text-align: left;\">\n                                        <p class=\"font-weight-normal mb-1\">\n                                            {{selectedItem.data.accessDate}}\n                                        </p>\n                                    </div>\n                                </div>\n                            </div>\n\n                        </div>\n                    </div>\n                    <div class=\"row\">\n                        <div class=\"col-md-12\" style=\"height: calc(40vh - 10rem); overflow: auto; font-size: 13px;\">\n                            <div *ngIf=\"!selectedItem\">\n                                <div class=\"row\">\n                                    <div class=\"col-md-12\">\n                                        <p class=\"text-muted text-center align-middle mb-1 font-italic\">\n                                            No item selected\n                                        </p>\n                                    </div>\n                                </div>\n                            </div>\n                            <div\n                                *ngIf=\"selectedItem && (selectedItem.data.abstractNote == '' || selectedItem.data.abstractNote == undefined)\">\n                                <div class=\"row\">\n                                    <div class=\"col-md-12\">\n                                        <p class=\"text-muted text-center align-middle mb-1 font-italic\">\n                                            No info\n                                        </p>\n                                    </div>\n                                </div>\n                            </div>\n                            <div\n                                *ngIf=\"selectedItem && (selectedItem.data.abstractNote != '' && selectedItem.data.abstractNote != undefined)\">\n                                <p class=\"text-muted font-weight-bold\">\n                                    Abstract\n                                </p>\n                                <p class=\"font-weight-normal\">\n                                    {{selectedItem.data.abstractNote}}\n                                </p>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n            <div class=\"row\">\n                <div class=\"col-md-12 d-flex justify-content-end\">\n                    <button class=\"btn btn-secondary w-25\" [disabled]=\"!selectedItem\" (click)=\"addBibliographyItem(selectedItem)\">Save</button>\n                    <!-- <button class=\"btn btn-secondary\" (click)=\"addBibliography.hide()\">Close</button> -->\n                </div>\n            </div>\n        </div>\n    </ng-container>\n\n    <ng-container class=\"app-modal-footer\">\n    </ng-container>\n</app-modal>","/*\n   Copyright 2021-2022  Istituto di Linguistica Computazionale \"A. Zampolli\", Consiglio Nazionale delle Ricerche, Pisa, Italy.\n \nThis file is part of EpiLexo.\n\nEpiLexo is free software: you can redistribute it and/or modify it under the terms of the GNU General Public License as published by the Free Software Foundation, either version 3 of the License, or (at your option) any later version.\n\nEpiLexo is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for more details.\n\nYou should have received a copy of the GNU General Public License along with EpiLexo. If not, see <https://www.gnu.org/licenses/>.\n*/\n\nimport { Component, Input, OnInit, SimpleChanges } from '@angular/core';\nimport { Subscription } from 'rxjs';\nimport { LexicalEntriesService } from 'src/app/services/lexical-entries/lexical-entries.service';\nimport { DataService, Person } from '../../core-tab/lexical-entry-core-form/data.service';\n\nimport { FormBuilder, FormGroup, FormArray, FormControl } from '@angular/forms';\nimport { debounceTime } from 'rxjs/operators';\n\n@Component({\n  selector: 'app-lexical-entry-vartrans-form',\n  templateUrl: './lexical-entry-vartrans-form.component.html',\n  styleUrls: ['./lexical-entry-vartrans-form.component.scss']\n})\nexport class LexicalEntryVartransFormComponent implements OnInit {\n\n  switchInput = false;\n  subscription: Subscription;\n  object: any;\n  people: Person[] = [];\n  peopleLoading = false;\n  counter = 0;\n  componentRef: any;\n\n  @Input() lexData : any;\n\n  vartransForm = new FormGroup({\n    label: new FormControl(''),\n    translatableAs: new FormArray([this.createTranslatableAs()]),\n    lexicalRelationDirect: new FormArray([this.createLexicalRelationDirect()]),\n    lexicalRelationIndirect: new FormArray([this.createLexicalRelationIndirect()])\n  })\n\n  translatableAs: FormArray;\n  lexicalRelationDirect: FormArray;\n  lexicalRelationIndirect: FormArray;\n  lexicalRelationIndirectSub : FormArray;\n\n  constructor(private dataService: DataService, private lexicalService: LexicalEntriesService, private formBuilder: FormBuilder) {\n  }\n\n  ngOnInit() {\n    \n    this.vartransForm = this.formBuilder.group({\n      label: '',\n      translatableAs: this.formBuilder.array([this.createTranslatableAs()]),\n      lexicalRelationDirect: this.formBuilder.array([this.createLexicalRelationDirect()]),\n      lexicalRelationIndirect: this.formBuilder.array([])\n    })\n    this.onChanges();\n    this.loadPeople();\n    this.triggerTooltip();\n  }\n\n  ngOnChanges(changes: SimpleChanges) {\n    setTimeout(()=> {\n      if(this.object != changes.lexData.currentValue){\n        if(this.lexicalRelationIndirect != null){\n          this.lexicalRelationIndirect.clear();\n        }\n      }\n      this.loadPeople();\n      this.object = changes.lexData.currentValue;\n      if(this.object != null){\n        this.vartransForm.get('label').setValue(this.object.label, {emitEvent:false});\n        this.addLexicalRelationIndirect();\n      }\n      this.triggerTooltip();\n  }, 10)\n  }\n\n  triggerTooltip(){\n    setTimeout(() => {\n      //@ts-ignore\n      $('.vartrans-tooltip').tooltip({\n        trigger : 'hover'\n      });\n    }, 500);\n  }\n\n  private loadPeople() {\n    this.peopleLoading = true;\n    this.dataService.getPeople().subscribe(x => {\n      this.people = x;\n      this.peopleLoading = false;\n    });\n  }\n\n  onChanges(): void {\n    this.vartransForm.valueChanges.pipe(debounceTime(200)).subscribe(searchParams => {\n      /* //console.log(searchParams) */\n    })\n  }\n\n  createTranslatableAs(): FormGroup {\n    return this.formBuilder.group({\n      entity: ''\n    })\n  }\n\n  addTranslatableAs() {\n    this.translatableAs = this.vartransForm.get('translatableAs') as FormArray;\n    this.translatableAs.push(this.createTranslatableAs());\n    this.triggerTooltip();\n  }\n\n  removeTranslatableAs(index) {\n    this.translatableAs = this.vartransForm.get('translatableAs') as FormArray;\n    this.translatableAs.removeAt(index);\n  }\n\n  addLexicalRelationDirect() {\n    this.lexicalRelationDirect = this.vartransForm.get('lexicalRelationDirect') as FormArray;\n    this.lexicalRelationDirect.push(this.createLexicalRelationDirect());\n    this.triggerTooltip();\n  }\n\n  removeLexicalRelationDirect(index) {\n    this.lexicalRelationDirect = this.vartransForm.get('lexicalRelationDirect') as FormArray;\n    this.lexicalRelationDirect.removeAt(index);\n  }\n\n  addLexicalRelationIndirect() {\n    this.lexicalRelationIndirect = this.vartransForm.get('lexicalRelationIndirect') as FormArray;\n    this.lexicalRelationIndirect.push(this.createLexicalRelationIndirect());\n    this.triggerTooltip();\n  }\n\n  removeLexicalRelationIndirect(index) {\n    this.lexicalRelationIndirect = this.vartransForm.get('lexicalRelationIndirect') as FormArray;\n    this.lexicalRelationIndirect.removeAt(index);\n  }\n\n  addLexicalRelationIndirectSub(index) {\n    const control = (<FormArray>this.vartransForm.controls['lexicalRelationIndirect']).at(index).get('sub_rel') as FormArray;\n    control.insert(index, this.createSubLexicalRelationIndirect())\n    this.triggerTooltip();\n  }\n\n  removeLexicalRelationIndirectSub(index, iy) {\n    const control = (<FormArray>this.vartransForm.controls['lexicalRelationIndirect']).at(index).get('sub_rel') as FormArray;\n    control.removeAt(iy);\n  }\n\n  createLexicalRelationDirect(): FormGroup {\n    return this.formBuilder.group({\n      relation: '',\n      entity: ''\n    })\n  }\n\n  createLexicalRelationIndirect(): FormGroup {\n    return this.formBuilder.group({\n      a_entity: '',\n      relation: '',\n      b_entity: '',\n      sub_rel: new FormArray([])\n    })\n  }\n\n  createSubLexicalRelationIndirect(): FormGroup {\n    return this.formBuilder.group({\n      sub_relation: 'eee',\n      sub_entity: ''\n    })\n  }\n}\n","\n\n<form [formGroup]=\"vartransForm\" *ngIf=\"object!=null\">\n    <div class=\"form-group row ml-2 mt-3 mr-2\">\n        <label for=\"inputLabel\" class=\"col-xl-3 col-form-label\">Label:</label>\n        <div class=\"input-group col-xl-5\">\n            <input formControlName=\"label\" name=\"label\" type=\"text\" class=\"form-control\" placeholder=\"\">\n        </div>\n    </div>\n    \n    <!-- TRANSLATABLE AS -->\n    <div class=\"form-group row ml-2 mt-3 mr-2\">\n        <div class=\"input-group col-xl-12\">\n            <div class=\"card\">\n                <span class=\"text-id\"><b>TRANSLATABLE AS</b></span>\n                <a class=\"pointer\" (click)=\"addTranslatableAs()\"><span class=\"collapse-icon\"><i class=\"fa fa-plus-square\"></i></span></a>\n\n                <div class=\"card-body\">\n                    <div class=\"form-group row ml-2 mt-3 mr-2\" formArrayName=\"translatableAs\" *ngFor=\"let trans of vartransForm.get('translatableAs')['controls']; let i = index\">\n                        <div class=\"input-group col-xl-9\" *ngIf=\"{switch : false}; let variable\" [formGroupName]=\"i\">\n                            <ng-select formControlName=\"entity\" name=\"entity\" [items]=\"people\" bindValue=\"name\" bindLabel=\"name\" placeholder=\"Search entity\" appendTo=\"body\"\n                                [loading]=\"peopleLoading\" *ngIf=\"!variable.switch\">\n                            </ng-select>\n                            <input formControlName=\"entity\" name=\"entity\" type=\"text\" class=\"form-control\" placeholder=\"Insert URI\" *ngIf=\"variable.switch\">\n                            <div class=\"input-group-append ml-3 form-check\">\n                                <input class=\"form-check-input vartrans-tooltip\" type=\"checkbox\" (change)=\"variable.switch=!variable.switch\" data-toggle=\"tooltip\" data-placement=\"bottom\" data-trigger=\"hover\" title=\"Clicca per inserire un URI manualmente\">\n                            </div>\n                            <div class=\"input-group-append ml-2\">\n                                <button class=\"btn btn-primary\" type=\"button\"><i\n                                        class=\"fa fa-external-link-alt\" (click)=\"modalRoot.show()\"></i></button>\n                                        <app-modal #modalRoot class=\"modal-demo\" [maximizable]=\"true\" [backdrop]=\"false\">\n                                            <ng-container class=\"app-modal-header\">Demo modal</ng-container>\n                                            <ng-container class=\"app-modal-body\">\n                                                <h3>MODAL DIALOG</h3>\n                                                <p>Lorem Ipsum is simply dummy text of the printing and typesetting industry.\n                                                    Lorem Ipsum has been the industrys standard dummy text ever since the 1500s.</p>\n                                            </ng-container>\n                                            <ng-container class=\"app-modal-footer\">\n                                                <button type=\"button\" class=\"button button3\" (click)=\"modalRoot.hide()\">Delete</button>\n                                                <button type=\"button\" class=\"button button1\" (click)=\"modalRoot.hide()\">Save</button>\n                                                <button type=\"button\" class=\"button button2\" style=\"float: right;\"\n                                                    (click)=\"modalRoot.hide()\">Close\n                                                </button>\n                                            </ng-container>\n                                        </app-modal>\n                            </div>\n                            <div class=\"input-group-append ml-2\">\n                                <button (click)=\"removeTranslatableAs(i)\" class=\"btn btn-danger\" type=\"button\"><i class=\"fa fa-trash-alt\"></i></button>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n\n    <!-- LEXICAL RELATION DIRECT -->\n    <div class=\"form-group row ml-2 mt-3 mr-2\">\n        <div class=\"input-group col-xl-12\">\n            <div class=\"card\">\n                <span class=\"text-id\"><b>LEXICAL RELATION</b><span class=\"badge badge-primary ml-2\">DIRECT</span></span>\n                <a (click)=\"addLexicalRelationDirect()\" class=\"pointer\"><span class=\"collapse-icon\"><i class=\"fa fa-plus-square\"></i></span></a>\n\n                <div class=\"card-body\">\n                    <div class=\"form-group row ml-2 mt-3 mr-2\" formArrayName=\"lexicalRelationDirect\" *ngFor=\"let direct of vartransForm.get('lexicalRelationDirect')['controls']; let i = index\">\n                        <div class=\"col-xl-5\" [formGroupName]=\"i\">\n                            <select class=\"form-control\" formControlName=\"relation\" name=\"relation\">\n                                <option>Relations...</option>\n                                <option>...</option>\n                            </select>\n                        </div>\n                        <div class=\"input-group col-xl-7\" *ngIf=\"{switch : false}; let variable\" [formGroupName]=\"i\">\n                            <ng-select formControlName=\"entity\" name=\"entity\" [items]=\"people\" bindValue=\"name\" bindLabel=\"name\" placeholder=\"Search entity\" appendTo=\"body\"\n                                [loading]=\"peopleLoading\" *ngIf=\"!variable.switch\">\n                            </ng-select>\n                            <input formControlName=\"entity\" name=\"entity\" type=\"text\" class=\"form-control\" placeholder=\"Insert URI\" *ngIf=\"variable.switch\">\n                            <div class=\"input-group-append ml-3 form-check\">\n                                <input class=\"form-check-input vartrans-tooltip\" type=\"checkbox\" (change)=\"variable.switch=!variable.switch\" data-toggle=\"tooltip\" data-placement=\"bottom\" data-trigger=\"hover\" title=\"Clicca per inserire un URI manualmente\">\n                            </div>\n                            <div class=\"input-group-append ml-2\">\n                                <button class=\"btn btn-primary\" type=\"button\"><i\n                                        class=\"fa fa-external-link-alt\" (click)=\"modalRoot.show()\"></i></button>\n                                <app-modal #modalRoot class=\"modal-demo\" [maximizable]=\"true\" [backdrop]=\"false\">\n                                    <ng-container class=\"app-modal-header\">Demo modal</ng-container>\n                                    <ng-container class=\"app-modal-body\">\n                                        <h3>MODAL DIALOG</h3>\n                                        <p>Lorem Ipsum is simply dummy text of the printing and typesetting industry.\n                                            Lorem Ipsum has been the industrys standard dummy text ever since the 1500s.</p>\n                                    </ng-container>\n                                    <ng-container class=\"app-modal-footer\">\n                                        <button type=\"button\" class=\"button button3\" (click)=\"modalRoot.hide()\">Delete</button>\n                                        <button type=\"button\" class=\"button button1\" (click)=\"modalRoot.hide()\">Save</button>\n                                        <button type=\"button\" class=\"button button2\" style=\"float: right;\"\n                                            (click)=\"modalRoot.hide()\">Close\n                                        </button>\n                                    </ng-container>\n                                </app-modal>\n                            </div>\n                            <div class=\"input-group-append ml-2\">\n                                <button (click)=\"removeLexicalRelationDirect(i)\" class=\"btn btn-danger\" type=\"button\"><i class=\"fa fa-trash-alt\"></i></button>\n                            </div>\n                        </div>\n                    </div>\n                   \n                </div>\n            </div>\n        </div>\n    </div>\n\n\n    <!-- LEXICAL RELATION INDIRECT -->\n    <div class=\"form-group row ml-2 mt-3 mr-2\">\n        <div class=\"input-group col-xl-12\">\n            <div class=\"card\">\n                <span class=\"text-id\"><b>LEXICAL RELATION</b><span class=\"badge badge-primary ml-2\">INDIRECT</span></span>\n                <a class=\"pointer\" (click)=\"addLexicalRelationIndirect()\"><span class=\"collapse-icon\"><i class=\"fa fa-plus-square\"></i></span></a>\n                <div class=\"card-body\">\n                    <div formArrayName=\"lexicalRelationIndirect\">\n                        <div *ngFor=\"let indirect of vartransForm['controls'].lexicalRelationIndirect['controls']; let i = index\">\n                            <div [formGroupName]=\"i\">\n                                <div class=\"form-group row ml-2 mt-3 mr-2\">\n                                    <div class=\"col-xl-3\">\n                                        <input type=\"text\" class=\"form-control\" formControlName=\"a_entity\" name=\"a_entity\">\n                                    </div>\n                                    <div class=\"col-xl-3\">\n                                        <select class=\"form-control\" formControlName=\"relation\" name=\"relation\">\n                                            <option>Relation</option>\n                                            <option>...</option>\n                                        </select>\n                                    </div>\n                                    <div class=\"input-group col-xl-6\" *ngIf=\"{switch : false}; let variable\">\n                                        <ng-select formControlName=\"b_entity\" name=\"b_entity\" [items]=\"people\" class=\"resizeNgSelect\" bindValue=\"name\" bindLabel=\"name\" placeholder=\"Search entity\" appendTo=\"body\"\n                                            [loading]=\"peopleLoading\" *ngIf=\"!variable.switch\">\n                                        </ng-select>\n                                        <input formControlName=\"b_entity\" name=\"b_entity\" type=\"text\" class=\"form-control\" placeholder=\"Insert URI\" *ngIf=\"variable.switch\">\n                                        <div class=\"input-group-append ml-3 form-check\">\n                                            <input class=\"form-check-input vartrans-tooltip\" type=\"checkbox\" (change)=\"variable.switch=!variable.switch\" data-toggle=\"tooltip\" data-placement=\"bottom\" data-trigger=\"hover\" title=\"Clicca per inserire un URI manualmente\">\n                                        </div>\n                                        <div class=\"input-group-append ml-2\">\n                                            <button class=\"btn btn-primary\" type=\"button\"><i\n                                                    class=\"fa fa-external-link-alt\"></i></button>\n                                        </div>\n                                        <div class=\"input-group-append ml-2\">\n                                            <button (click)=\"removeLexicalRelationIndirect(i)\" class=\"btn btn-danger\" type=\"button\"><i class=\"fa fa-trash-alt\"></i></button>\n                                        </div>\n                                        <div class=\"input-group-append ml-2\">\n                                            <button (click)=\"addLexicalRelationIndirectSub(i)\" class=\"btn btn-outline-primary\" type=\"button\"><i class=\"fa fa-plus\"></i></button>\n                                        </div>\n                                    </div>\n                                </div>\n                                <div formArrayName=\"sub_rel\">\n                                    <div *ngFor=\"let sub of indirect['controls'].sub_rel['controls']; let j = index\">\n                                        <div [formGroupName]=\"j\">\n                                            <div class=\"form-group row ml-2 mt-3 mr-2\">\n                                                <div class=\"col-xl-3\" ></div>\n                                                <div class=\"col-xl-3\">\n                                                    <select class=\"form-control\" formControlName=\"sub_relation\" name=\"sub_relation\">\n                                                        <option>{{sub.value['sub_relation']}}</option>\n                                                        <option>...</option>\n                                                    </select>\n                                                </div>\n                                                <div class=\"input-group col-xl-6\" *ngIf=\"{switch : false}; let variable\">\n                                                    <ng-select formControlName=\"sub_entity\" name=\"sub_entity\" [items]=\"people\" class=\"resizeNgSelect\" bindLabel=\"name\" bindValue=\"name\" placeholder=\"Search entity\" appendTo=\"body\"\n                                                        [loading]=\"peopleLoading\" *ngIf=\"!variable.switch\">\n                                                    </ng-select>\n                                                    <input formControlName=\"sub_entity\" name=\"sub_entity\" type=\"text\" class=\"form-control\" id=\"inputDenotes\" placeholder=\"Insert URI\" *ngIf=\"variable.switch\">\n                                                    <div class=\"input-group-append ml-3 form-check\">\n                                                        <input class=\"form-check-input vartrans-tooltip\" type=\"checkbox\" (change)=\"variable.switch=!variable.switch\" data-toggle=\"tooltip\" data-placement=\"bottom\" data-trigger=\"hover\" title=\"Clicca per inserire un URI manualmente\">\n                                                    </div>\n                                                    <div class=\"input-group-append ml-2\">\n                                                        <button class=\"btn btn-primary\" type=\"button\"><i\n                                                                class=\"fa fa-external-link-alt\"></i></button>\n                                                    </div>\n                                                    <div class=\"input-group-append ml-2\">\n                                                        <button (click)=\"removeLexicalRelationIndirectSub(i, j)\" class=\"btn btn-danger\" type=\"button\"><i class=\"fa fa-trash-alt\"></i></button>\n                                                    </div>\n                                                    <div class=\"input-group-append ml-2\">\n                                                        <button  class=\"btn btn-outline-primary invisible\" type=\"button\"><i class=\"fa fa-plus\"></i></button>\n                                                    </div>\n                                                </div>\n                                            </div>\n                                        </div>\n                                    </div>\n                                </div>\n                            </div>\n                        </div>  \n                    </div>           \n                </div>\n            </div>\n        </div>\n    </div>\n</form>","/*\n   Copyright 2021-2022  Istituto di Linguistica Computazionale \"A. Zampolli\", Consiglio Nazionale delle Ricerche, Pisa, Italy.\n \nThis file is part of EpiLexo.\n\nEpiLexo is free software: you can redistribute it and/or modify it under the terms of the GNU General Public License as published by the Free Software Foundation, either version 3 of the License, or (at your option) any later version.\n\nEpiLexo is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for more details.\n\nYou should have received a copy of the GNU General Public License along with EpiLexo. If not, see <https://www.gnu.org/licenses/>.\n*/\n\nimport { Component, OnInit } from '@angular/core';\nimport { FormControl, FormGroup, Validators } from '@angular/forms';\nimport { Subject } from 'rxjs';\nimport { debounceTime } from 'rxjs/operators';\nimport { LexicalEntriesService } from 'src/app/services/lexical-entries/lexical-entries.service';\nimport { ToastrService } from 'ngx-toastr';\n\n@Component({\n  selector: 'app-language-manager',\n  templateUrl: './language-manager.component.html',\n  styleUrls: ['./language-manager.component.scss']\n})\nexport class LanguageManagerComponent implements OnInit {\n\n  languageList = [];\n  editLangArray = [];\n  isValid = false;\n  loadingService = false;\n  removeMessage;\n\n  private subject: Subject<any> = new Subject();\n  /* public urlRegex = /(^|\\s)((https?:\\/\\/.+))/ */\n\n  editLangForm = new FormGroup({\n    description: new FormControl(''),\n    lexvo : new FormControl('', [Validators.required, Validators.minLength(3)]),\n    label: new FormControl('', [Validators.required, Validators.minLength(2), Validators.maxLength(3)])\n  })\n  constructor(private lexicalService: LexicalEntriesService, private toastr: ToastrService) { }\n\n\n  ngOnInit(): void {\n\n    /* this.loadLangData(); */\n\n    /*  this.onChanges(); */\n    this.lexicalService.refreshLangTable$.subscribe(\n      data => {\n        /* //console.log(\"refresh\"); */\n        this.loadLangData();\n      }, error => {\n        //console.log(\"no refresh\")\n      }\n    )\n\n    this.subject.pipe(debounceTime(1000)).subscribe(\n      data => {\n        this.onEditLanguage(data)\n      }\n    )\n  }\n\n\n  loadLangData() {\n    this.lexicalService.getLexiconLanguages().subscribe(\n      data => {\n        /* //console.log(data) */\n        this.languageList = data;\n      }, error => {\n        //console.log(error)\n      }\n    )\n  }\n\n  onSubmit(inputValue: string) {\n    //console.log(inputValue.match(/^[A-Za-z]{2,3}$/))\n    if (inputValue.match(/^[A-Za-z]{2,3}$/)) {\n      this.isValid = true;\n      this.loadingService = true;\n      \n      this.lexicalService.createNewLanguage(inputValue).subscribe(\n        data => {\n          console.log(data)\n          this.loadingService = false;\n          this.lexicalService.refreshFilter({request: true});\n          this.lexicalService.updateLangSelect({request: true});\n          this.lexicalService.refreshLangTable();\n          this.toastr.info('Language '+ data['label'] + ' created', '', {\n            timeOut: 5000,\n          });\n\n        }, error => {\n          console.log(error)\n          this.loadingService = false;\n          this.lexicalService.refreshLangTable();\n          this.lexicalService.refreshFilter({request: true});\n          this.lexicalService.updateLangSelect({request: true});\n        }\n      )\n    } else {\n      this.isValid = false;\n    }\n  }\n\n  triggerEdit(i, v) {\n    this.subject.next({ i, v })\n  }\n\n  onEditLanguage(data) {\n    \n    if(data['v'].trim() != ''){\n      if (data['i'] == \"description\") {\n        let langId = this.editLangArray['languageInstanceName'];\n        let parameters = {\n          relation: 'description',\n          value: data['v']\n        }\n  \n        this.lexicalService.updateLanguage(langId, parameters).subscribe(\n          data => {\n            console.log(data)\n            this.lexicalService.refreshLangTable();\n            this.lexicalService.refreshFilter({request : true})\n          }, error => {\n            console.log(error)\n            this.lexicalService.refreshLangTable();\n            this.lexicalService.refreshFilter({request : true})\n            if(error.statusText == 'OK'){\n              this.toastr.info('Description for '+langId+' updated', '', {\n                timeOut: 5000,\n              });\n            }else{\n              this.toastr.error(error.error, 'Error', {\n                timeOut: 5000,\n              });\n            }\n          }\n        )\n      } else if (data['i'] == \"lexvo\") {\n        //console.log(data)\n        let langId = this.editLangArray['languageInstanceName'];\n        let parameters = {\n          relation: 'lexvo',\n          value: data['v']\n        }\n  \n        this.lexicalService.updateLanguage(langId, parameters).subscribe(\n          data => {\n            console.log(data)\n            this.lexicalService.refreshLangTable();\n            this.lexicalService.refreshFilter({request : true})\n          }, error => {\n            console.log(error)\n            this.lexicalService.refreshLangTable();\n            this.lexicalService.refreshFilter({request : true})\n            if(error.statusText == 'OK'){\n              this.toastr.info('Description for '+langId+' updated', '', {\n                timeOut: 5000,\n              });\n            }else{\n              this.toastr.error(error.error, 'Error', {\n                timeOut: 5000,\n              });\n            }\n          }\n        )\n      }else if (data['i'] == \"label\") {\n        if(this.editLangForm.get('label').valid){\n          let langId = this.editLangArray['languageInstanceName'];\n          let parameters = {\n            relation: 'language',\n            value: data['v']\n          }\n    \n          this.lexicalService.updateLanguage(langId, parameters).subscribe(\n            data => {\n              console.log(data)\n              this.lexicalService.refreshLangTable();\n            }, error => {\n              console.log(error)\n              this.lexicalService.refreshLangTable();\n              if(error.statusText == 'OK'){\n                this.toastr.info('Description for '+langId+' updated', '', {\n                  timeOut: 5000,\n                });\n              }else{\n                this.toastr.error(error.error, 'Error', {\n                  timeOut: 5000,\n                });\n              }\n            }\n          )\n        }else{\n          this.toastr.error('Not valid string for label field', 'Error', {\n            timeOut: 5000,\n          });\n        }\n        \n      }\n    }else{\n      this.toastr.error(\"Don't insert empty value\", 'Error', {\n        timeOut: 5000,\n      });\n    }\n    \n  }\n\n  editLang(index) {\n    this.editLangArray = this.languageList[index]\n    this.editLangForm.get('description').setValue(this.editLangArray['description'], { eventEmit: false })\n    this.editLangForm.get('lexvo').setValue(this.editLangArray['lexvo'], { eventEmit: false })\n    this.editLangForm.get('label').setValue(this.editLangArray['label'], { eventEmit: false })\n    //console.log(this.editLangArray)\n  }\n\n  checkEditValid(index) {\n    return this.editLangForm.get(index).valid;\n  }\n\n  removeLang(index) {\n    this.removeMessage = this.languageList[index]['languageInstanceName']\n  }\n\n  deleteLangRequest(){\n    let langId = this.removeMessage;\n    this.lexicalService.deleteLanguage(langId).subscribe(\n      data=>{\n        console.log(data);\n        this.lexicalService.refreshLangTable();\n        this.lexicalService.refreshFilter({request : true})\n        this.toastr.info('Language ' +langId+' removed', '', {\n          timeOut: 5000,\n        });\n      },error=>{\n        console.log(error);\n        this.lexicalService.refreshLangTable();\n        this.lexicalService.refreshFilter({request : true})\n        this.toastr.error(error.error, 'Error', {\n          timeOut: 5000,\n        });\n      }\n    )\n  }\n\n\n}\n","\n\n<div class=\"card\">\n    <span class=\"text-id\"><b>LANGUAGE LIST</b></span>\n    <a class=\"pointer\" (click)=\"addLanguageModal.show()\"><span class=\"collapse-icon\"><i\n                class=\"fa fa-plus-square\"></i></span></a>\n    <div class=\"card-body\">\n        <div class=\"form-group row ml-3 mt-3 mr-3 mb-0\">\n            <table class=\"table table_language table-bordered  table-hover\">\n                <thead>\n                    <tr>\n                        <th scope=\"col\">#</th>\n                        <th scope=\"col\">Label</th>\n                        <th scope=\"col\">Creator</th>\n                        <th scope=\"col\">Description</th>\n                        <th scope=\"col\">Entries</th>\n                        <th scope=\"col\">Actions</th>\n                    </tr>\n                </thead>\n                <tbody>\n                    <tr *ngFor=\"let lang of languageList; let i = index\">\n                        <th scope=\"row\">{{i+1}}</th>\n                        <td>{{lang['label']}}</td>\n                        <td>{{lang['creator'] != \"\" ? lang['creator'] : '<'+'empty'+'>'}}</td>\n                        <td>{{lang['description'] != \"\" ? (lang['description'] | slice:0:50) +'...' : '<'+'empty'+'>'}}\n                        </td>\n                        <td>{{lang['entries']}}</td>\n                        <td>\n                            <span><button class=\"btn btn-primary mr-1\" (click)=\"editLang(i); editLangModal.show()\"><i\n                                        class=\"fas fa-edit\"></i></button></span>\n                            <span><button class=\"btn btn-danger ml-1\" (click)=\"removeLang(i); removeLangModal.show()\"><i\n                                        class=\"fas fa-trash-alt\"></i></button></span>\n                        </td>\n                    </tr>\n                </tbody>\n            </table>\n        </div>\n    </div>\n</div>\n\n<app-modal #removeLangModal class=\"remove_languages_modal\">\n    <ng-container class=\"app-modal-header\"></ng-container>\n    <ng-container class=\"app-modal-body\">\n        <div class=\"card\">\n            <div class=\"card-body\">\n                <div class=\"form-group row ml-2 mt-3 mr-2\">\n                    <label for=\"inputLabel\" class=\"col-lg-12 col-form-label\" style=\"font-size: 12px; text-align: center\">Are you sure to delete {{removeMessage}}?</label>\n                </div>\n                <div class=\"form-group row ml-2 mt-3 mr-2 justify-content-md-center\">\n                    <div class=\"input-group col-lg-5 justify-content-md-center\" style=\"align-items: center; text-align: center;\">\n                        <div class=\"input-group-append ml-2\">\n                            <button class=\"btn btn-success\" type=\"button\" (click)=\"deleteLangRequest(); removeLangModal.hide()\"><i\n                                    class=\"fas fa-check\"></i></button>\n                        </div>\n                        <div class=\"input-group-append ml-2\">\n                            <button class=\"btn btn-danger\" type=\"button\" (click)=\"removeLangModal.hide()\"><i\n                                    class=\"fas fa-times\"></i></button>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </ng-container>\n</app-modal>\n\n\n<app-modal #editLangModal class=\"edit_languages_modal\" >\n    <ng-container class=\"app-modal-header\"></ng-container>\n    <ng-container class=\"app-modal-body\">\n        <div class=\"card\" *ngIf=\"editLangArray\">\n            <span class=\"text-id\"><b>LANGUAGE EDITOR</b></span>\n            <!-- <a class=\"pointer\" (click)=\"addLanguageModal.show()\"><span class=\"collapse-icon\"><i\n                        class=\"fa fa-plus-square\"></i></span></a> -->\n            <div class=\"card-body\">\n                <form [formGroup]=\"editLangForm\">\n                    <div *ngFor=\"let item of editLangArray | keyvalue\">\n                        <div class=\"form-group row ml-2 mt-3 mr-2\" *ngIf=\"item.key == 'description' || item.key == 'label' || item.key == 'lexvo'\">\n                            <label for=\"inputLabel\" class=\"col-lg-3 col-form-label\" style=\"font-size: 12px;\">{{item.key}}</label>\n                            <div class=\"input-group col-lg-9\" style=\"align-items: center;\">\n                                <input #inputLang type=\"text\" class=\"form-control\" placeholder=\"\" [value]=\"item.value\" [formControlName]=\"item.key\" [name]=\"item.key\" (keyup)=\"triggerEdit(item.key, inputLang.value)\">\n                                <div class=\"invalid-feedback\" *ngIf=\"!checkEditValid(item.key)\" style=\"display: block; font-size: 9px;\">\n                                    Invalid Field\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                </form>\n            </div>\n        </div>\n    </ng-container>\n</app-modal>\n\n\n\n\n<app-modal #addLanguageModal class=\"add_languages_modal\">\n    <ng-container class=\"app-modal-header\"></ng-container>\n    <ng-container class=\"app-modal-body\">\n        <div class=\"card\">\n            <div class=\"card-body\">\n                <div class=\"form-group row ml-2 mt-3 mr-2\">\n                    <label for=\"inputLabel\" class=\"col-lg-5 col-form-label\" style=\"font-size: 12px;\">Insert a language\n                        code (max 2-3 chars):</label>\n                    <div class=\"input-group col-lg-7\" style=\"align-items: center;\">\n                        <input #inputAddLanguage id=\"label\" type=\"text\" class=\"form-control\" placeholder=\"\" #langValue>\n                        <div class=\"input-group-append ml-2\">\n                            <button class=\"btn btn-success\" type=\"button\" (click)=\"onSubmit(langValue.value); addLanguageModal.hide()\"\n                            [disabled]=\"inputAddLanguage.value.length < 2 || inputAddLanguage.value.length > 3\"><i\n                                    class=\"fas fa-check\"></i></button>\n                        </div>\n                        <div class=\"spinner-border spinner-border-sm m-1\" role=\"status\" *ngIf=\"loadingService\">\n                            <span class=\"sr-only\">Loading...</span>\n                        </div>\n                        <div class=\"invalid-feedback\" *ngIf=\"!isValid\" style=\"display: block; font-size: 9px;\">\n                            Please, insert at least three characters.\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </ng-container>\n</app-modal>","/*\n   Copyright 2021-2022  Istituto di Linguistica Computazionale \"A. Zampolli\", Consiglio Nazionale delle Ricerche, Pisa, Italy.\n \nThis file is part of EpiLexo.\n\nEpiLexo is free software: you can redistribute it and/or modify it under the terms of the GNU General Public License as published by the Free Software Foundation, either version 3 of the License, or (at your option) any later version.\n\nEpiLexo is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for more details.\n\nYou should have received a copy of the GNU General Public License along with EpiLexo. If not, see <https://www.gnu.org/licenses/>.\n*/\n\nimport { HttpClient } from '@angular/common/http';\nimport { Injectable } from '@angular/core';\nimport { BehaviorSubject, Observable } from 'rxjs';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class BibliographyService {\n\n  constructor(private http: HttpClient) { }\n\n\n  private baseUrl = \"https://api.zotero.org/groups/2552746/items\";\n  \n  private _addBiblioItem: BehaviorSubject<any> = new BehaviorSubject(null);\n  private _triggerPanel: BehaviorSubject<object> = new BehaviorSubject(null);\n  addBiblioReq$ = this._addBiblioItem.asObservable();\n  triggerPanel$ = this._triggerPanel.asObservable();\n\n  sendDataToBibliographyPanel(object: any) {\n    this._addBiblioItem.next(object)\n  }\n\n  triggerPanel(object: object) {\n    this._triggerPanel.next(object)\n  } \n\n  bootstrapData(start? : number, sortField? : string, direction? : string) : Observable<any> {\n    return this.http.get(this.baseUrl + '?limit=25&start='+start+'&sort='+sortField+'&direction='+direction+'&v=3');\n  }\n\n  filterBibliography(start? : number, sortField? : string, direction? : string, query?, queryMode?) : Observable<any> {\n    return this.http.get(this.baseUrl + '?limit=25&q='+query+'&qmode='+queryMode+'&start='+start+'&sort='+sortField+'&direction='+direction+'&v=3');\n  }\n\n}\n","/*\n   Copyright 2021-2022  Istituto di Linguistica Computazionale \"A. Zampolli\", Consiglio Nazionale delle Ricerche, Pisa, Italy.\n \nThis file is part of EpiLexo.\n\nEpiLexo is free software: you can redistribute it and/or modify it under the terms of the GNU General Public License as published by the Free Software Foundation, either version 3 of the License, or (at your option) any later version.\n\nEpiLexo is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for more details.\n\nYou should have received a copy of the GNU General Public License along with EpiLexo. If not, see <https://www.gnu.org/licenses/>.\n*/\n\nimport { Component, Input, OnInit, SimpleChanges } from '@angular/core';\nimport { Subscription } from 'rxjs';\nimport { LexicalEntriesService } from 'src/app/services/lexical-entries/lexical-entries.service';\nimport { DataService, Person } from '../../core-tab/lexical-entry-core-form/data.service';\n\nimport { FormBuilder, FormGroup, FormArray, FormControl } from '@angular/forms';\nimport { debounceTime } from 'rxjs/operators';\n\n@Component({\n  selector: 'app-lexical-entry-synsem-form',\n  templateUrl: './lexical-entry-synsem-form.component.html',\n  styleUrls: ['./lexical-entry-synsem-form.component.scss']\n})\nexport class LexicalEntrySynsemFormComponent implements OnInit {\n\n  switchInput = false;\n  subscription: Subscription;\n  object: any;\n  people: Person[] = [];\n  peopleLoading = false;\n  counter = 0;\n  componentRef: any;\n\n  @Input() lexData: any;\n\n  synsemForm = new FormGroup({\n    label: new FormControl(''),\n    frames: new FormArray([this.createFrame()])\n  })\n\n  frameArray: FormArray;\n\n  constructor(private dataService: DataService, private lexicalService: LexicalEntriesService, private formBuilder: FormBuilder) {\n  }\n\n  ngOnInit() {\n\n    this.synsemForm = this.formBuilder.group({\n      label: '',\n      frames: this.formBuilder.array([])\n    })\n    this.onChanges();\n    this.loadPeople();\n    this.triggerTooltip();\n  }\n\n  ngOnChanges(changes: SimpleChanges) {\n    setTimeout(() => {\n      if (this.object != changes.lexData.currentValue) {\n        if (this.frameArray != null) {\n          this.frameArray.clear();\n        }\n      }\n      this.loadPeople();\n      this.object = changes.lexData.currentValue;\n      if (this.object != null) {\n        this.synsemForm.get('label').setValue(this.object.label, { emitEvent: false });\n\n      }\n      this.triggerTooltip();\n    }, 10)\n  }\n\n  triggerTooltip() {\n    setTimeout(() => {\n      //@ts-ignore\n      $('.vartrans-tooltip').tooltip({\n        trigger: 'hover'\n      });\n    }, 500);\n  }\n\n  private loadPeople() {\n    this.peopleLoading = true;\n    this.dataService.getPeople().subscribe(x => {\n      this.people = x;\n      this.peopleLoading = false;\n    });\n  }\n\n  onChanges(): void {\n    this.synsemForm.valueChanges.pipe(debounceTime(200)).subscribe(searchParams => {\n      //console.log(searchParams)\n    })\n  }\n\n  addFrame() {\n    this.frameArray = this.synsemForm.get('frames') as FormArray;\n    this.frameArray.push(this.createFrame());\n  }\n\n  addArg(index){\n    const control = (<FormArray>this.synsemForm.controls['frames']).at(index).get('args') as FormArray;\n    control.push(this.createArg());\n  }\n\n  addForm(ix, iy){\n    const control = ((<FormArray>this.synsemForm.controls['frames']).at(ix).get('args') as FormArray).at(iy).get('form') as FormArray;\n    control.push(this.createForm());\n  }\n\n  removeArg(ix, iy){\n    const control = (<FormArray>this.synsemForm.controls['frames']).at(ix).get('args') as FormArray;\n    control.removeAt(iy);\n  }\n\n  removeForm(ix, iy, iz){\n    const control = ((<FormArray>this.synsemForm.controls['frames']).at(ix).get('args') as FormArray).at(iy).get('form') as FormArray;\n    control.removeAt(iz);\n  }\n\n  removeFrame(index) {\n    this.frameArray = this.synsemForm.get('frames') as FormArray;\n    this.frameArray.removeAt(index);\n  }\n\n  createFrame(): FormGroup {\n    return this.formBuilder.group({\n      label: '',\n      type: '',\n      example: '',\n      args: new FormArray([])\n    })\n  }\n\n  createArg() : FormGroup {\n    return this.formBuilder.group({\n      label: '',\n      type: '',\n      marker: '',\n      optional: false,\n      form: new FormArray([])\n    })\n  }\n\n  createForm() : FormGroup {\n    return this.formBuilder.group({\n      form_label: ''\n    })\n  }\n\n\n}\n","\n\n<form [formGroup]=\"synsemForm\" *ngIf=\"object!=null\">\n    <div class=\"form-group row ml-2 mt-3 mr-2\">\n        <label for=\"inputLabel\" class=\"col-xl-3 col-form-label\">Label:</label>\n        <div class=\"input-group col-xl-5\">\n            <input formControlName=\"label\" name=\"label\" type=\"text\" class=\"form-control\" placeholder=\"\">\n        </div>\n        <div class=\"input-group-append\">\n            <div class=\"input-group-append ml-2\">\n                <button (click)=\"addFrame()\" class=\"btn btn-outline-primary\" type=\"button\"><i class=\"fa fa-plus\"></i></button>\n            </div>\n        </div>\n    </div>\n    \n    <!-- FRAME -->\n    <div formArrayName=\"frames\">\n        <div *ngFor=\"let frame of synsemForm['controls'].frames['controls']; let i = index\">\n            <div [formGroupName]=\"i\">\n                <div class=\"form-group row ml-2 mt-3 mr-2\">\n                    <div class=\"input-group col-xl-12\">\n                        <div class=\"card\">\n                            <span class=\"text-id\"><b>FRAME</b></span>\n                            <a class=\"pointer\" (click)=\"addArg(i)\"><span class=\"add-icon\"><i class=\"fa fa-plus-square\"></i></span></a>\n                            <a class=\"pointer\" (click)=\"removeFrame(i)\"><span class=\"trash-icon\"><i class=\"fa fa-trash\"></i></span></a>\n                            <div class=\"card-body\">\n                                <div class=\"form-group row ml-2 mt-3 mr-2\">\n                                    <label for=\"inputLabel\" class=\"col-lg-3 col-form-label\">Label:</label>\n                                    <div class=\"input-group col-lg-5\">\n                                        <input formControlName=\"label\" name=\"label\" type=\"text\" class=\"form-control\" placeholder=\"\">\n                                    </div>\n                                </div>\n                                <div class=\"form-group row ml-2 mt-3 mr-2\">\n                                    <label for=\"inputType\" class=\"col-lg-3 col-form-label\">Type:</label>\n                                    <div class=\"col-lg-5\">\n                                        <select formControlName=\"type\" name=\"type\" class=\"form-control\">\n                                            <option [value]=\"object.type\">{{object.type}}</option>\n                                        </select>\n                                    </div>\n                                </div>\n                                <div class=\"form-group row ml-2 mt-3 mr-2\">\n                                    <label for=\"inputLanguage\" class=\"col-lg-3 col-form-label\">Example:</label>\n                                    <div class=\"col-lg-8\">\n                                        <input formControlName=\"example\" name=\"example\" type=\"text\" class=\"form-control\" placeholder=\"\">\n                                    </div>\n                                </div>\n\n                                <!-- ARGS -->\n                                <div formArrayName=\"args\">\n                                    <div *ngFor=\"let a of frame['controls'].args['controls']; let j = index\">\n                                        <div [formGroupName]=\"j\">\n                                            <div class=\"form-group row ml-2 mt-3 mr-2\">\n                                                <div class=\"input-group col-xl-12\">\n                                                    <div class=\"card\">\n                                                        <span class=\"text-id\"><span class=\"badge badge-primary ml-2\">ARG#{{j+1}}</span></span>\n                                                        <a class=\"pointer\" (click)=\"addForm(i, j)\"><span class=\"add-icon\"><i class=\"fa fa-plus-square\"></i></span></a>\n                                                        <a class=\"pointer\" (click)=\"removeArg(i, j)\"><span class=\"trash-icon\"><i class=\"fa fa-trash\"></i></span></a>\n                                                        <div class=\"card-body\">\n                                                            <div class=\"form-group row ml-2 mt-3 mr-2\">\n                                                                <label class=\"col-lg-3 col-form-label\">Label:</label>\n                                                                <div class=\"input-group col-lg-5\">\n                                                                    <input formControlName=\"label\" name=\"label\" type=\"text\" class=\"form-control\" placeholder=\"\">\n                                                                </div>\n                                                            </div>\n                                                            <div class=\"form-group row ml-2 mt-3 mr-2\">\n                                                                <label for=\"inputType\" class=\"col-lg-3 col-form-label\">Type:</label>\n                                                                <div class=\"col-lg-5\">\n                                                                    <select formControlName=\"type\" name=\"type\" class=\"form-control\">\n                                                                        <option [value]=\"object.type\">{{object.type}}</option>\n                                                                    </select>\n                                                                </div>\n                                                            </div>\n                                                            <div class=\"form-group row ml-2 mt-3 mr-2\">\n                                                                <label class=\"col-lg-3 col-form-label\">Marker:</label>\n                                                                <div class=\"col-lg-5\">\n                                                                    <input formControlName=\"marker\" name=\"marker\" type=\"text\" class=\"form-control\" placeholder=\"\">\n                                                                </div>\n                                                            </div>\n                                                            <div class=\"form-group row ml-2 mt-3 mr-2\">\n                                                                <label class=\"col-lg-3 col-form-label\">Optional:</label>        \n                                                                <div class=\"input-group col-lg-7 ml-3\">\n                                                                    <div class=\"input-group-append ml-2\" style=\"align-items: center;\">\n                                                                        <input formControlName=\"optional\" name=\"optional\" class=\"form-check-input\" type=\"checkbox\">\n                                                                    </div>\n                                                                </div>\n                                                            </div>\n\n                                                            <div class=\"form-group row ml-2 mt-3 mr-2\" *ngIf=\"a['controls'].form['controls'].length > 0\" style=\"align-items:baseline;\">\n                                                                <label class=\"col-lg-3 col-form-label\">Form:</label>\n\n                                                                <!-- FORM -->\n                                                                <div formArrayName=\"form\" class=\"col-lg-9\" style=\"max-height: 15vh;overflow: auto;\">\n                                                                    <div *ngFor=\"let form of a['controls'].form['controls']; let k = index\">\n                                                                        <div [formGroupName]=\"k\">\n                                                                            <div class=\"form-group row ml-2 mt-3 mr-2\">\n                                                                                <div class=\"input-group\" *ngIf=\"{switch : false}; let variable\">\n                                                                                    <ng-select formControlName=\"form_label\" name=\"form_label\" [items]=\"people\" class=\"resizeNgSelect\" bindLabel=\"name\" bindValue=\"name\" placeholder=\"Search entity\" appendTo=\"body\"\n                                                                                        [loading]=\"peopleLoading\" *ngIf=\"!variable.switch\">\n                                                                                    </ng-select>\n                                                                                    <input formControlName=\"form_label\" name=\"form_label\" type=\"text\" class=\"form-control\" id=\"inputDenotes\" placeholder=\"Insert URI\" *ngIf=\"variable.switch\">\n                                                                                    <div class=\"input-group-append ml-3 form-check\">\n                                                                                        <input class=\"form-check-input vartrans-tooltip\" type=\"checkbox\" (change)=\"variable.switch=!variable.switch\" data-toggle=\"tooltip\" data-placement=\"bottom\" data-trigger=\"hover\" title=\"Clicca per inserire un URI manualmente\">\n                                                                                    </div>\n                                                                                    <div class=\"input-group-append ml-2\">\n                                                                                        <button class=\"btn btn-primary\" type=\"button\"><i\n                                                                                                class=\"fa fa-external-link-alt\"></i></button>\n                                                                                    </div>\n                                                                                    <div class=\"input-group-append ml-2\">\n                                                                                        <button (click)=\"removeForm(i, j, k)\" class=\"btn btn-danger\" type=\"button\"><i class=\"fa fa-trash-alt\"></i></button>\n                                                                                    </div>\n                                                                                    \n                                                                                </div>\n                                                                            </div>  \n                                                                        </div>\n                                                                    </div>\n                                                                </div>\n                                                            </div>\n                                                        </div>\n                                                    </div>\n                                                </div>\n                                            </div>\n                                        </div>\n                                    </div>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n    \n</form>","import { FormGroup } from '@angular/forms';\n    \nexport function ConfirmedValidator(controlName: string, matchingControlName: string){\n    return (formGroup: FormGroup) => {\n        const control = formGroup.controls[controlName];\n        const matchingControl = formGroup.controls[matchingControlName];\n        if (matchingControl.errors && !matchingControl.errors.confirmedValidator) {\n            return;\n        }\n        if (control.value !== matchingControl.value) {\n            matchingControl.setErrors({ confirmedValidator: true });\n        } else {\n            matchingControl.setErrors(null);\n        }\n    }\n}","/*\n   Copyright 2021-2022  Istituto di Linguistica Computazionale \"A. Zampolli\", Consiglio Nazionale delle Ricerche, Pisa, Italy.\n \nThis file is part of EpiLexo.\n\nEpiLexo is free software: you can redistribute it and/or modify it under the terms of the GNU General Public License as published by the Free Software Foundation, either version 3 of the License, or (at your option) any later version.\n\nEpiLexo is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for more details.\n\nYou should have received a copy of the GNU General Public License along with EpiLexo. If not, see <https://www.gnu.org/licenses/>.\n*/\n\nimport { HttpClient } from '@angular/common/http';\nimport { Injectable } from '@angular/core';\nimport { Observable } from 'rxjs';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class ConceptService {\n\n\n  constructor(private http: HttpClient) { }\n\n  \n}\n","/*\n   Copyright 2021-2022  Istituto di Linguistica Computazionale \"A. Zampolli\", Consiglio Nazionale delle Ricerche, Pisa, Italy.\n \nThis file is part of EpiLexo.\n\nEpiLexo is free software: you can redistribute it and/or modify it under the terms of the GNU General Public License as published by the Free Software Foundation, either version 3 of the License, or (at your option) any later version.\n\nEpiLexo is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for more details.\n\nYou should have received a copy of the GNU General Public License along with EpiLexo. If not, see <https://www.gnu.org/licenses/>.\n*/\n\nimport { Component, OnInit } from '@angular/core';\n\n@Component({\n  selector: 'app-login-page',\n  templateUrl: './login-page.component.html',\n  styleUrls: ['./login-page.component.scss']\n})\nexport class LoginPageComponent implements OnInit {\n\n  constructor() { }\n\n  ngOnInit(): void {\n  }\n\n}\n","\n\n<div class=\"text-center\">\n    <form class=\"form-signin\">\n      <img class=\"mb-4\" src=\"../../../assets/images/LexOIcon.png\" alt=\"\" width=\"120\" >\n      <h1 class=\"h3 mb-3 font-weight-normal\">Please sign in</h1>\n      <label for=\"inputEmail\" class=\"sr-only\">Email address</label>\n      <input type=\"email\" id=\"inputEmail\" class=\"form-control\" placeholder=\"Email address\" required autofocus>\n      <label for=\"inputPassword\" class=\"sr-only\">Password</label>\n      <input type=\"password\" id=\"inputPassword\" class=\"form-control\" placeholder=\"Password\" required>\n      <div class=\"checkbox mb-3\">\n        <label>\n          <input type=\"checkbox\" value=\"remember-me\"> Remember me\n        </label>\n      </div>\n      <button class=\"btn btn-lg btn-primary btn-block\" type=\"submit\">Sign in</button>\n      <p class=\"mt-5 mb-3 text-muted\">&copy; 2020</p>\n    </form>\n</div>","/*\n   Copyright 2021-2022  Istituto di Linguistica Computazionale \"A. Zampolli\", Consiglio Nazionale delle Ricerche, Pisa, Italy.\n \nThis file is part of EpiLexo.\n\nEpiLexo is free software: you can redistribute it and/or modify it under the terms of the GNU General Public License as published by the Free Software Foundation, either version 3 of the License, or (at your option) any later version.\n\nEpiLexo is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for more details.\n\nYou should have received a copy of the GNU General Public License along with EpiLexo. If not, see <https://www.gnu.org/licenses/>.\n*/\n\nimport { Component } from '@angular/core';\n\n@Component({\n  selector: 'app-root',\n  templateUrl: './app.component.html',\n  styleUrls: ['./app.component.scss']\n})\nexport class AppComponent {\n  title = 'LexO-angular';\n}\n","\n\n<app-navbar></app-navbar>\n<router-outlet></router-outlet>","/*\n   Copyright 2021-2022  Istituto di Linguistica Computazionale \"A. Zampolli\", Consiglio Nazionale delle Ricerche, Pisa, Italy.\n \nThis file is part of EpiLexo.\n\nEpiLexo is free software: you can redistribute it and/or modify it under the terms of the GNU General Public License as published by the Free Software Foundation, either version 3 of the License, or (at your option) any later version.\n\nEpiLexo is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for more details.\n\nYou should have received a copy of the GNU General Public License along with EpiLexo. If not, see <https://www.gnu.org/licenses/>.\n*/\n\nimport { Component, Input, OnInit, SimpleChanges } from '@angular/core';\nimport { FormArray, FormBuilder, FormControl, FormGroup } from '@angular/forms';\nimport { ToastrService } from 'ngx-toastr';\nimport { Subject, Subscription } from 'rxjs';\nimport { debounceTime } from 'rxjs/operators';\nimport { LexicalEntriesService } from 'src/app/services/lexical-entries/lexical-entries.service';\nimport { DataService, Person } from '../../core-tab/lexical-entry-core-form/data.service';\n\n@Component({\n  selector: 'app-etymology-form',\n  templateUrl: './etymology-form.component.html',\n  styleUrls: ['./etymology-form.component.scss']\n})\nexport class EtymologyFormComponent implements OnInit {\n\n  @Input() etymData: any;\n\n  switchInput = false;\n  subscription: Subscription;\n  object: any;\n  people: Person[] = [];\n  peopleLoading = false;\n  counter = 0;\n  componentRef: any;\n\n\n  etyForm = new FormGroup({\n    label: new FormControl(''),\n    author: new FormControl(''),\n    confidence : new FormControl(null),\n    etylink: new FormArray([this.createEtyLink()]),\n    cognates: new FormArray([this.createCognate()])\n  })\n\n  etyLinkArray: FormArray;\n  cognatesArray: FormArray;\n\n  private subject_cognates: Subject<any> = new Subject();\n  private subject_cognates_input: Subject<any> = new Subject();\n  private subject_etylink: Subject<any> = new Subject();\n  private subject_etylink_input: Subject<any> = new Subject();\n  private etylink_note_subject : Subject<any> = new Subject();\n  private etylink_label_subject : Subject<any> = new Subject();\n  searchResults: [];\n  filterLoading = false;\n\n  memoryLinks = [];\n\n  constructor(private dataService: DataService, private lexicalService: LexicalEntriesService, private formBuilder: FormBuilder, private toastr: ToastrService) { }\n\n  ngOnInit(): void {\n\n    this.etyForm = this.formBuilder.group({\n      label: '',\n      author: '',\n      confidence : false,\n      etylink: this.formBuilder.array([]),\n      cognates : this.formBuilder.array([]),\n    })\n    this.onChanges();\n    this.triggerTooltip();\n\n    this.subject_cognates.pipe(debounceTime(1000)).subscribe(\n      data => {\n        if(data != null){\n          this.onSearchFilter(data)\n\n        }\n      }\n    )\n\n    this.subject_etylink.pipe(debounceTime(1000)).subscribe(\n      data => {\n        if(data != null){\n          this.onSearchFilter(data)\n\n        }\n      }\n    )\n\n    this.subject_etylink_input.pipe(debounceTime(1000)).subscribe(\n      data => {\n        console.log(data)\n        if(data != null){\n          let value= data['value'];\n          let index = data['i'];\n          this.onChangeEtylink(value, index)\n        }\n        \n      }\n    )\n\n    this.subject_cognates_input.pipe(debounceTime(1000)).subscribe(\n      data => {\n        this.onSearchFilter(data)\n      }\n    )\n\n    this.etylink_note_subject.pipe(debounceTime(1000)).subscribe(\n      data => {\n        this.onChangeEtylinkNote(data)\n      }\n    )\n\n    this.etylink_label_subject.pipe(debounceTime(1000)).subscribe(\n      data => {\n        this.onChangeEtylinkLabel(data)\n      }\n    )\n  }\n  \n\n  triggerTooltip() {\n    setTimeout(() => {\n      //@ts-ignore\n      $('.vartrans-tooltip').tooltip({\n        trigger: 'hover'\n      });\n    }, 500);\n  }\n\n  ngOnChanges(changes: SimpleChanges) {\n    \n      if (this.object != changes.etymData.currentValue) {\n        if (this.etyLinkArray != undefined || this.cognatesArray != undefined) {\n          this.etyLinkArray.clear();\n          //this.cognatesArray.clear();\n          \n          this.memoryLinks = [];\n        }\n      }\n      this.object = changes.etymData.currentValue;\n      if (this.object != null) {\n        this.etyForm.get('label').setValue(this.object.etymology.label, { emitEvent: false });\n        this.etyForm.get('author').setValue(this.object.etymology.hypothesisOf, { emitEvent: false });\n        if(this.object.etymology.confidence == 0){\n          this.etyForm.get('confidence').setValue(true, { emitEvent: false });\n        }else{\n          this.etyForm.get('confidence').setValue(false, { emitEvent: false });\n        }\n        \n        if(this.object.etyLinks != undefined){\n          if(this.object.etyLinks.length != 0){\n            this.object.etyLinks.forEach(element => {\n              let lex_entity = element.etySourceLabel == '' ? element.etySource : element.etySourceLabel;\n              let label = element.label == '' ? element.etySourceLabel : element.label;\n              let ety_type = element.etyLinkType;\n              let ety_source = element.etySource;\n              let ety_target = element.etyTarget;\n              let note = element.note;\n              let external_iri = element.externalIRI;\n              this.addEtyLink(lex_entity, label, ety_type, ety_source, ety_target, note, external_iri);\n              this.memoryLinks.push(element);\n              /* console.log(element) */\n            });\n          }\n        }\n      }\n      this.triggerTooltip();\n    \n  }\n\n\n  onChanges(): void {\n    /* this.etyForm.valueChanges.pipe(debounceTime(200)).subscribe(searchParams => {\n      console.log(searchParams)\n    }) */\n    this.etyForm.get('confidence').valueChanges.pipe(debounceTime(100)).subscribe(newConfidence => {\n      let confidence_value = null;\n      console.log(newConfidence)\n      if(newConfidence == false){\n        confidence_value = 1\n        this.etyForm.get('confidence').setValue(false, { emitEvent: false });\n      }else{\n        confidence_value = 0\n        this.etyForm.get('confidence').setValue(true, { emitEvent: false });\n      }\n\n      this.lexicalService.spinnerAction('on');\n      let etyId = this.object.etymology.etymologyInstanceName;\n      let parameters = {\n          type: \"confidence\",\n          relation: 'confidence',\n          value: confidence_value\n      }\n      console.log(parameters)\n      this.lexicalService.updateGenericRelation(etyId, parameters).subscribe(\n          data => {\n              console.log(data);\n              /* data['request'] = 0;\n              data['new_label'] = confidence_value\n              this.lexicalService.refreshAfterEdit(data); */\n              this.lexicalService.updateLexCard(data)\n              this.lexicalService.spinnerAction('off');\n          },\n          error => {\n              console.log(error);\n              /*  const data = this.object.etymology;\n              data['request'] = 0;\n              data['new_label'] = confidence_value;\n              this.lexicalService.refreshAfterEdit(data); */\n              this.lexicalService.spinnerAction('off');\n              this.lexicalService.updateLexCard({ lastUpdate: error.error.text })\n              if(error.status == 200){\n                this.toastr.success('Label updated', '', {timeOut: 5000})\n\n              }else{\n                this.toastr.error(error.error, 'Error', {timeOut: 5000})\n\n              }\n          }\n      )\n\n    });\n\n\n    this.etyForm.get(\"label\").valueChanges.pipe(debounceTime(1000)).subscribe(\n      updatedLabel => {\n        if (updatedLabel.length > 2 && updatedLabel.trim() != '') {\n          this.lexicalService.spinnerAction('on');\n          let etyId = this.object.etymology.etymologyInstanceName;\n          let parameters = {\n              relation: 'label',\n              value: updatedLabel\n          }\n          this.lexicalService.updateEtymology(etyId, parameters).subscribe(\n            data => {\n                //console.log(data);\n                data['request'] = 0;\n                data['new_label'] = updatedLabel\n                this.lexicalService.refreshAfterEdit(data);\n                this.lexicalService.spinnerAction('off');\n                this.lexicalService.updateLexCard(data)\n                this.toastr.success('Label updated', '', {timeOut: 5000})\n            },\n            error => {\n                //console.log(error);\n                const data = this.object.etymology;\n                data['request'] = 0;\n                data['new_label'] = updatedLabel;\n                this.lexicalService.refreshAfterEdit(data);\n                this.lexicalService.spinnerAction('off');\n                this.lexicalService.updateLexCard({ lastUpdate: error.error.text })\n                if(error.status == 200){\n                  this.toastr.success('Label updated', '', {timeOut: 5000})\n\n                }else{\n                  this.toastr.error(error.error, 'Error', {timeOut: 5000})\n\n                }\n            }\n          )\n        }\n      }\n    )\n\n    this.etyForm.get(\"author\").valueChanges.pipe(debounceTime(1000)).subscribe(\n      updateAuthor => {\n        \n        this.lexicalService.spinnerAction('on');\n        let etyId = this.object.etymology.etymologyInstanceName;\n        let parameters = {\n            relation: 'hypothesisOf',\n            value: updateAuthor\n        }\n        this.lexicalService.updateEtymology(etyId, parameters).subscribe(\n          data => {\n              //console.log(data);\n              /* data['request'] = 0;\n              data['new_label'] = updateAuthor\n              this.lexicalService.refreshAfterEdit(data); */\n              this.lexicalService.spinnerAction('off');\n              this.lexicalService.updateLexCard(data)\n              this.toastr.success('Author updated', '', {timeOut: 5000})\n          },\n          error => {\n              //console.log(error);\n              /* const data = this.object;\n              data['request'] = 0;\n              data['new_label'] = updateAuthor;\n              this.lexicalService.refreshAfterEdit(data); */\n              this.lexicalService.spinnerAction('off');\n              this.lexicalService.updateLexCard({ lastUpdate: error.error.text })\n              if(error.status == 200){\n                this.toastr.success('Label updated', '', {timeOut: 5000})\n\n              }else{\n                this.toastr.error(error.error, 'Error', {timeOut: 5000})\n\n              }\n          }\n        )\n        \n      }\n    )\n  }\n\n  onChangeEtylinkNote(data){\n    console.log(data)\n    if(data != undefined){\n      \n      let newValue = data.evt.target.value;\n      let currentValue;\n      let index = data?.index;\n      \n      let oldValue = this.memoryLinks[index].note;\n\n      let instanceName = this.object.etyLinks[index].etymologicalLinkInstanceName;\n      \n\n      let parameters = {\n        relation: 'note',\n        value : newValue,\n        currentValue : oldValue\n      };\n\n      console.log(parameters)\n\n      this.lexicalService.updateEtylink(instanceName, parameters).subscribe(\n        data=> {\n          console.log(data);\n          this.lexicalService.spinnerAction('off');\n          this.lexicalService.updateLexCard(this.object)\n          this.memoryLinks[index].note = newValue\n          this.toastr.success('EtyLink note updated', '', {timeOut: 5000})\n        },error=> {\n          console.log(error);\n          this.lexicalService.updateLexCard({ lastUpdate: error.error.text })\n          this.lexicalService.spinnerAction('off');\n          this.memoryLinks[index].note = newValue\n          if(error.status == 200){\n            this.toastr.success('Label updated', '', {timeOut: 5000})\n\n          }else{\n            this.toastr.error(error.error, 'Error', {timeOut: 5000})\n\n          }\n        }\n      )\n    \n    }\n  }\n\n  onChangeEtylinkLabel(data){\n    console.log(data)\n    if(data != undefined){\n      \n      let newValue = data.evt.target.value;\n      let currentValue;\n      let index = data?.index;\n      \n      let oldValue = this.memoryLinks[index].note;\n\n      let instanceName = this.object.etyLinks[index].etymologicalLinkInstanceName;\n      \n\n      let parameters = {\n        relation: 'label',\n        value : newValue,\n        currentValue : oldValue\n      };\n\n      console.log(parameters)\n\n      this.lexicalService.updateEtylink(instanceName, parameters).subscribe(\n        data=> {\n          console.log(data);\n          this.lexicalService.spinnerAction('off');\n          this.lexicalService.updateLexCard(this.object)\n          this.memoryLinks[index].note = newValue\n          this.toastr.success('EtyLink label updated', '', {timeOut: 5000})\n\n        },error=> {\n          console.log(error);\n          this.lexicalService.updateLexCard({ lastUpdate: error.error.text })\n          this.lexicalService.spinnerAction('off');\n          this.memoryLinks[index].note = newValue\n          this.toastr.error(error.error, 'Error', {timeOut: 5000})\n        }\n      )\n    \n    }\n  }\n\n  onChangeEtylinkType(index, evt){\n    console.log(index, evt.target.value)\n    this.etyLinkArray = this.etyForm.get('etylink') as FormArray;\n    let selectedValues, etymId;\n    selectedValues = evt.target.value;\n    \n    if (this.object.etymology.etymologyInstanceName != undefined) {\n      etymId = this.object.etyLinks[index].etymologicalLinkInstanceName;\n    }\n\n    if(selectedValues != null){\n      \n      //let oldValue = this.memoryLinks[index].etySource;\n      let parameters = {\n        relation: \"etyLinkType\",\n        value: selectedValues,\n      }\n      console.log(parameters)\n      this.lexicalService.updateEtylink(etymId, parameters).subscribe(\n        data => {\n          console.log(data)\n        }, error => {\n          console.log(error)\n          if(error.status == 200){\n            this.toastr.success('Etylink type updated', '', {timeOut: 5000})\n            this.lexicalService.updateLexCard({ lastUpdate: error.error.text })\n          }else{\n            this.toastr.error(error.error, 'Error', {timeOut: 5000})\n          }\n        }\n        )\n      \n    }\n  }\n\n  onChangeEtylink(etyLink, index) {\n    console.log(etyLink.selectedItems)\n    this.etyLinkArray = this.etyForm.get('etylink') as FormArray;\n    let selectedValues, etymId, etySourceLabel, instanceName;\n    if(etyLink.selectedItems != undefined){\n      if (etyLink.selectedItems.length != 0) {\n        selectedValues = etyLink.selectedItems[0].value.lexicalEntryInstanceName;\n        etySourceLabel = etyLink.selectedItems[0].value.label;\n        instanceName = etyLink.selectedItems[0].value.lexicalEntry;\n      }\n    }else if(etyLink != \"\"){\n      selectedValues = etyLink;\n      etySourceLabel = '';\n      instanceName = etyLink;\n    }\n    \n    //console.log(index);\n    //console.log(this.object.etyLinks[index])\n    if (this.object.etymology.etymologyInstanceName != undefined) {\n      etymId = this.object.etyLinks[index].etymologicalLinkInstanceName;\n    }\n\n    if(selectedValues != null && etyLink.selectedItems[0].value.new_etymon == undefined){\n      \n      let oldValue = this.memoryLinks[index].etySource;\n      let parameters = {\n        type: \"etyLink\",\n        relation: \"etySource\",\n        value: selectedValues,\n        currentValue: oldValue\n      }\n\n      console.log(parameters)\n      this.lexicalService.updateLinguisticRelation(etymId, parameters).subscribe(\n        data => {\n          console.log(data)\n        }, error => {\n          console.log(error)\n          if(error.status == 200){\n            this.memoryLinks[index]['etySourceLabel'] = etySourceLabel;\n            this.etyLinkArray.at(index).patchValue({ label: etySourceLabel});\n            this.etyLinkArray.at(index).patchValue({ etySource: instanceName});\n            this.lexicalService.updateLexCard({ lastUpdate: error.error.text })\n            this.toastr.success('Etylink source updated', '', {timeOut: 5000})\n          }else{\n            this.toastr.error(error.error, 'Error', {timeOut: 5000})\n          }\n        }\n      )\n      \n    }else if(etyLink.selectedItems[0].value.new_etymon){\n      \n      let label_new_lexical_entry = etyLink.selectedItems[0].value.name;\n      this.lexicalService.newLexicalEntry().subscribe(\n        data=> {\n          console.log(data);\n          let lexical_entry = data.lexicalEntry;\n          let lexical_entry_in = data.lexicalEntryInstanceName;\n          this.memoryLinks[index]['etySourceLabel'] = etySourceLabel;\n          this.etyLinkArray.at(index).patchValue({ lex_entity: label_new_lexical_entry});\n          this.etyLinkArray.at(index).patchValue({ etySource: lexical_entry});\n\n          \n          let parameters = {\n            relation: 'label',\n            value: label_new_lexical_entry\n          }\n          console.log(parameters)\n          this.lexicalService.updateLexicalEntry(lexical_entry_in, parameters).subscribe(\n            data => {\n                console.log(data);\n                \n            },\n            error => {\n                //console.log(error);\n                this.lexicalService.spinnerAction('off');\n                this.lexicalService.spinnerAction('off');\n\n                parameters = {\n                  relation: 'type',\n                  value: 'Etymon'\n                }\n\n                this.lexicalService.updateLexicalEntry(lexical_entry_in, parameters).subscribe(\n                  data => {\n                      console.log(data);\n                      this.lexicalService.spinnerAction('off');\n                      this.lexicalService.refreshLangTable();\n                      this.lexicalService.refreshFilter({ request: true })\n                      \n                  },\n                  error => {\n                      console.log(error);\n                      let oldValue = this.memoryLinks[index].etySource;\n                      let parameters = {\n                        type: \"etyLink\",\n                        relation: \"etySource\",\n                        value: lexical_entry_in,\n                        currentValue: oldValue\n                      }\n                      this.lexicalService.refreshFilter({ request: true })\n                      console.log(parameters)\n                      console.log\n                      this.lexicalService.updateLinguisticRelation(etymId, parameters).subscribe(\n                        data => {\n                          console.log(data)\n                        }, error => {\n                          console.log(error)\n                          if(error.statusText == 'OK'){\n                            this.toastr.success('New etymon created', '', {timeOut: 5000})\n                            this.lexicalService.updateLexCard({ lastUpdate: error.error.text })\n                          }\n                        }\n                      )\n                      this.lexicalService.spinnerAction('off');\n\n                  }\n              )\n            }\n          )\n\n\n          \n        },error => {\n          console.log(error)\n        }\n      )\n      //      cambiare tipo lexical entry in etymon\n      //      cambiare label lexical entry\n    }\n  }\n\n  createNewEtymon(name){\n    return new Promise((resolve) => {\n      // Simulate backend call.\n      setTimeout(() => {\n          resolve({ id: 5, name: name, new_etymon: true });\n      }, 1000);\n    })\n  }\n\n  addCognate() {\n    this.cognatesArray = this.etyForm.get('cognates') as FormArray;\n    this.cognatesArray.push(this.createCognate());\n    \n  }\n\n  debounceEtylinkLabel(evt, index){\n    this.lexicalService.spinnerAction('on');\n    this.etylink_label_subject.next({ evt, index})\n  }\n\n  debounceEtylinkNote(evt, index) {\n    this.lexicalService.spinnerAction('on');\n    this.etylink_note_subject.next({ evt, index})\n  }\n\n  addEtyLink(le?, l?, elt?, es?, et?, n?, el?){\n    this.etyLinkArray = this.etyForm.get('etylink') as FormArray;\n    this.etyLinkArray.push(this.createEtyLink(le, l, elt, es, et, n, el));\n  }\n\n  addNewEtyLink() { \n    this.etyLinkArray = this.etyForm.get('etylink') as FormArray;\n    this.etyLinkArray.push(this.createEtyLink());\n    let index = this.etyLinkArray.length -1;\n\n    let etyId = this.object.etymology.etymologyInstanceName;\n    let lexId = this.object.parentNodeInstanceName;\n\n    console.log(etyId, lexId)\n\n    this.lexicalService.createNewEtylink(lexId, etyId).subscribe(\n      data=>{\n        console.log(data);\n        if(data!=null){\n          let etyTarget = data['etyTarget']\n          let etyType = data['etyLinkType']\n          this.etyLinkArray.at(index).patchValue({ etyTarget: etyTarget});\n          this.etyLinkArray.at(index).patchValue({ etyLinkType: etyType});\n          this.object.etyLinks[index] = data;\n          this.memoryLinks[index] = data;\n          this.toastr.success('New etylink added', '', {timeOut: 5000})\n        }\n      },error=>{\n        console.log(error)\n        this.toastr.error(error.error, 'Error', {timeOut: 5000})\n      }\n    )\n  }\n\n  removeEtyLink(index){\n    this.etyLinkArray = this.etyForm.get('etylink') as FormArray;\n    let etyLinkId = this.memoryLinks[index]['etymologicalLinkInstanceName']\n    this.lexicalService.deleteEtylink(etyLinkId).subscribe(\n      data =>{\n        console.log(data)\n        //this.lexicalService.updateLexCard(this.object)\n        this.toastr.success('Etylink removed', '', {timeOut: 5000})\n\n      },\n      error =>{\n        console.log(error)\n        this.toastr.error(error.error, 'Error', {timeOut: 5000})\n        //this.lexicalService.updateLexCard({ lastUpdate: error.error.text })\n      }\n    )\n    this.etyLinkArray.removeAt(index);\n    this.memoryLinks.splice(index, 1)\n  }\n\n  removeCognate(index){\n    this.etyLinkArray = this.etyForm.get('cognates') as FormArray;\n    this.etyLinkArray.removeAt(index);\n    \n  }\n\n  createRelation(){\n    return this.formBuilder.group({\n      trait: '',\n      value: ''\n    })\n  }\n\n  createEtyLink(le?, l?, elt?, es?, et?, n?, el?) {\n    if(le!= undefined){\n      return this.formBuilder.group({\n        lex_entity: new FormControl(le),\n        label: new FormControl(l),\n        etyLinkType: new FormControl(elt),\n        etySource : new FormControl(es),\n        etyTarget : new FormControl(et),\n        note: new FormControl(n),\n        external_iri : new FormControl(el)\n      })\n    }else{\n      return this.formBuilder.group({\n        lex_entity: new FormControl(null),\n        label: new FormControl(null),\n        etyLinkType: new FormControl(null),\n        etySource : new FormControl(null),\n        etyTarget : new FormControl(null),\n        note : new FormControl(null),\n        external_iri : new FormControl(null)\n      })\n    }\n    \n  }\n\n\n  createCognate() {\n    return this.formBuilder.group({\n      cognate : new FormControl(null),\n      label : new FormControl(null)\n    })\n  }\n\n  triggerCognates(evt) {\n    if (evt.target != undefined) {\n      this.subject_cognates.next(evt.target.value)\n    }\n  }\n\n  triggerCognatesInput(evt, i) {\n    if (evt.target != undefined) {\n      let value = evt.target.value;\n      this.subject_cognates_input.next({ value, i })\n    }\n  }\n\n  triggerEtylink(evt) {\n    if (evt.target != undefined) {\n      this.subject_cognates.next(evt.target.value)\n    }\n  }\n\n  triggerEtylinkInput(evt, i) {\n    if (evt.target != undefined) {\n      let value = evt.target.value;\n      this.subject_etylink_input.next({ value, i })\n    }\n  }\n\n  deleteData() {\n    this.searchResults = [];\n  }\n\n  onSearchFilter(data) {\n    console.log(data)\n    this.filterLoading = true;\n    this.searchResults = [];\n    let parameters = {\n      text: data,\n      searchMode: \"startsWith\",\n      type: \"etymon\",\n      pos: \"\",\n      formType: \"entry\",\n      author: \"\",\n      lang: \"\",\n      status: \"\",\n      offset: 0,\n      limit: 500\n    }\n    //console.log(data.length)\n    if (data != \"\" && data.length >= 3) {\n      this.lexicalService.getLexicalEntriesList(parameters).subscribe(\n        data => {\n          console.log(data)\n          this.searchResults = data['list']\n          this.filterLoading = false;\n        }, error => {\n          //console.log(error)\n          this.filterLoading = false;\n        }\n      )\n    } else {\n      this.filterLoading = false;\n    }\n    \n\n  }\n\n}\n","\n\n<form [formGroup]=\"etyForm\" *ngIf=\"object != null\"> <!-- *ngIf=\"object!=null\" -->\n    <div class=\"form-group row ml-2 mt-3 mr-2\">\n        <label for=\"inputLabel\" class=\"col-xl-3 col-form-label\">Label:</label>\n        <div class=\"input-group col-xl-7\">\n            <input formControlName=\"label\" name=\"label\" type=\"text\" class=\"form-control\" placeholder=\"\">\n            <div class=\"input-group-append\">\n                <div class=\"input-group-append ml-2\">\n                    <div class=\"dropdown\">\n                        <button class=\"btn btn-outline-primary\" type=\"button\" (click)=\"addNewEtyLink()\">\n                            <i class=\"fa fa-plus\"></i>\n                        </button>\n                        <!-- <div class=\"dropdown-menu\" aria-labelledby=\"dropdownMenuButton\">\n                          <a class=\"dropdown-item\" (click)=\"addCognate()\" style=\"cursor: pointer;\">Add Cognates</a>\n                          <a class=\"dropdown-item\"  style=\"cursor: pointer;\">Add EtyLink</a>\n                        </div> -->\n                      </div>\n                </div>\n            </div>\n        </div>\n    </div>\n\n    <div class=\"form-group row ml-2 mt-3 mr-2\">\n        <label for=\"inputLabel\" class=\"col-xl-3 col-form-label\">Author: </label>\n        <div class=\"input-group col-xl-7\">\n            <input formControlName=\"author\" name=\"author\" type=\"text\" class=\"form-control\" placeholder=\"\">\n        </div>\n    </div>\n\n    <div class=\"form-group row ml-2 mt-3 mr-2\">\n        <label for=\"inputLabel\" class=\"col-xl-3 col-form-label\">Uncertain:</label>\n        <div class=\"input-group col-xl-7\">\n            <input formControlName=\"confidence\" name=\"confidence\" type=\"checkbox\" > <!-- [checked]=\"etyForm.get('confidence').value == 0\" -->\n        </div>\n    </div>\n\n    <!-- ETY LINK -->\n    <div formArrayName=\"etylink\">\n        <div *ngFor=\"let etyLink of etyForm['controls'].etylink['controls']; let i = index\">\n            <div [formGroupName]=\"i\">\n                <div class=\"form-group row ml-2 mt-3 mr-2\">\n                    <div class=\"input-group col-xl-12\">\n                        <div class=\"card\">\n                            <span class=\"text-id\"><b>ETY LINK {{i+1}}</b></span>\n                            <!-- <a class=\"pointer\" (click)=\"addRelation(i)\"><span class=\"add-icon\"><i class=\"fa fa-plus-square\"></i></span></a> -->\n                            <a class=\"pointer\" (click)=\"removeEtyLink(i)\"><span class=\"trash-icon\"><i class=\"fa fa-trash\"></i></span></a>\n                            <div class=\"card-body\" *ngIf=\"{external : etyLink.get('external_iri').value }; let variable\">\n\n                                <!-- ETYMON / LEXENT -->\n                                <div class=\"col-xl-12\">\n                                    <div class=\"d-xl-flex\" style=\"align-items: center;\">\n                                        <label class=\"col-xl-3 col-form-label\">Etymon:</label>\n                                        <div class=\"col-xl-9\">\n                                            <div class=\"form-group row ml-2 mt-3 mr-2\">\n                                                <div class=\"input-group\" >\n                                                    <ng-select #etyLink [addTag]=\"createNewEtymon\" (change)=\"onChangeEtylink(etyLink, i)\" formControlName=\"lex_entity\" name=\"lex_entity\" [items]=\"searchResults\" class=\"resizeNgSelect\" bindLabel=\"label\" bindValue=\"label\" placeholder=\"Search entity\" appendTo=\"body\"\n                                                         *ngIf=\"!variable.external\" (keyup)=\"triggerEtylink($event)\" bindValue=\"label\" class=\"resizeNgSelect\" [items]=\"searchResults\"\n                                                        bindLabel=\"label\" placeholder=\"Search entity\" appendTo=\"body\" (focus)=\"deleteData()\">\n                                                    </ng-select>\n                                                    <input (keyup)=\"triggerEtylinkInput($event, i)\" formControlName=\"lex_entity\" name=\"lex_entity\" type=\"text\" class=\"form-control\" id=\"inputDenotes\" placeholder=\"Insert URI\" *ngIf=\"variable.external\">\n                                                    <div class=\"input-group-append ml-2\">\n                                                        <button type=\"button\" class=\"btn btn-secondary\" placement=\"top\" ngbTooltip=\"Enable LiLa endpoint\" title=\"Enable LiLa endpoint\" data-toggle=\"button\" aria-pressed=\"false\" autocomplete=\"off\">\n                                                            <img src=\"../../../../../../../assets/images/graphql.png\" alt=\"Avatar\" class=\"image\" style=\"height: 20px;\">\n                        \n                                                          </button>\n                                                    </div>\n                                                    <div class=\"input-group-append ml-3 form-check\">\n                                                        <input class=\"form-check-input vartrans-tooltip\" formControlName=\"external_iri\" name=\"external_iri\" type=\"checkbox\" (change)=\"variable.external=!variable.external;\" data-toggle=\"tooltip\" data-placement=\"bottom\" data-trigger=\"hover\" title=\"Clicca per inserire un URI manualmente\">\n                                                    </div>\n                                                    <!-- <div class=\"input-group-append ml-2\">\n                                                        <button class=\"btn btn-primary\" type=\"button\"><i\n                                                                class=\"fa fa-external-link-alt\"></i></button>\n                                                    </div> -->\n                                                </div>\n                                            </div>                                                  \n                                        </div>\n                                    </div>\n                                </div>\n                                \n                                <!-- LABEL / WRITTEN FORM -->\n                                <div class=\"col-xl-12\" *ngIf=\"variable.external\">\n                                    <div class=\"d-xl-flex\">\n                                        <label class=\"col-xl-3 col-form-label\">Label:</label>\n                                        <div class=\"col-xl-9\">\n                                            <div class=\"form-group row ml-2 mr-2\">\n                                                <div class=\"input-group\" *ngIf=\"{switch : false}; let variable\">\n                                                    \n                                                    <input (keyup)=\"debounceEtylinkLabel($event, i)\" formControlName=\"label\" name=\"label\" type=\"text\" class=\"form-control\">\n                                                    <div class=\"input-group-append ml-3 form-check invisible\">\n                                                        \n                                                    </div>\n                                                </div>\n                                            </div>                                                  \n                                        </div>\n                                    </div>\n                                </div>\n\n                                <!-- ETYLINK TYPE -->\n                                <div class=\"col-xl-12\">\n                                    <div class=\"d-xl-flex\">\n                                        <label class=\"col-xl-3 col-form-label\">EtyLink Type:</label>\n                                        <div class=\"col-xl-9\">\n                                            <div class=\"form-group row ml-2 mr-2\">\n                                                <div class=\"input-group\" *ngIf=\"{switch : false}; let variable\">\n                                                    <select id=\"typeSelect\" formControlName=\"etyLinkType\" name=\"etyLinkType\" class=\"form-control\" (change)=\"onChangeEtylinkType(i, $event)\">\n                                                        <option [selected]=\"etyLink.get('etyLinkType').value == 'inheritance'\" value=\"inheritance\">\n                                                            inheritance\n                                                        </option>\n                                                        <option [selected]=\"etyLink.get('etyLinkType').value == 'borrowing'\" value=\"borrowing\">\n                                                            borrowing\n                                                        </option>\n                                                    </select>\n                                                    <!-- <input formControlName=\"etyLinkType\" name=\"etyLinkType\" type=\"text\" class=\"form-control\"> -->\n                                                    <div class=\"input-group-append ml-3 form-check invisible\">\n                                                        \n                                                    </div>\n                                                </div>\n                                            </div>                                                  \n                                        </div>\n                                    </div>\n                                </div>\n\n                                <!-- ETY SOURCE -->\n                                <div class=\"col-xl-12\">\n                                    <div class=\"d-xl-flex\">\n                                        <label class=\"col-xl-3 col-form-label text-muted\">EtySource:</label>\n                                        <div class=\"col-xl-9\">\n                                            <div class=\"form-group row ml-2 mr-2\">\n                                                <div class=\"input-group\" *ngIf=\"{switch : false}; let variable\">\n                                                    \n                                                    <input formControlName=\"etySource\" name=\"etySource\" type=\"text\" class=\"form-control\" readonly>\n                                                    <div class=\"input-group-append ml-3 form-check invisible\">\n                                                        \n                                                    </div>\n                                                </div>\n                                            </div>                                                  \n                                        </div>\n                                    </div>\n                                </div>\n\n                                <!-- ETY TARGET -->\n                                <div class=\"col-xl-12\">\n                                    <div class=\"d-xl-flex\">\n                                        <label class=\"col-xl-3 col-form-label text-muted\">EtyTarget:</label>\n                                        <div class=\"col-xl-9\">\n                                            <div class=\"form-group row ml-2 mr-2\">\n                                                <div class=\"input-group\" *ngIf=\"{switch : false}; let variable\">\n                                                    \n                                                    <input formControlName=\"etyTarget\" name=\"etyTarget\" type=\"text\" class=\"form-control\" readonly>\n                                                    <div class=\"input-group-append ml-3 form-check invisible\">\n                                                        \n                                                    </div>\n                                                </div>\n                                            </div>                                                  \n                                        </div>\n                                    </div>\n                                </div>   \n\n                                <!-- NOTE -->\n                                <div class=\"col-xl-12\">\n                                    <div class=\"d-xl-flex\">\n                                        <label class=\"col-xl-3 col-form-label\">Note:</label>\n                                        <div class=\"col-xl-9\">\n                                            <div class=\"form-group row ml-2 mr-2\">\n                                                <div class=\"input-group\" *ngIf=\"{switch : false}; let variable\">\n                                                    \n                                                    <textarea (keyup)=\"debounceEtylinkNote($event, i)\" formControlName=\"note\" name=\"note\" type=\"text\" class=\"form-control\" style=\"resize: none;\"></textarea>\n                                                    <div class=\"input-group-append ml-3 form-check invisible\" >\n                                                        \n                                                    </div>\n                                                </div>\n                                            </div>                                                  \n                                        </div>\n                                    </div>\n                                </div>                               \n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n\n\n    <!-- COGNATES -->\n    <div formArrayName=\"cognates\">\n        <div *ngFor=\"let sub of etyForm['controls'].cognates['controls']; let i = index\">\n            <div [formGroupName]=\"i\">\n                <div class=\"form-group row ml-2 mt-3 mr-2\">\n                    <div class=\"input-group col-xl-12\">\n                        <div class=\"card\">\n                            <span class=\"text-id\"><b>COGNATE {{i+1}}</b></span>\n                            <!-- <a class=\"pointer\" (click)=\"addSubtermElement(i)\"><span class=\"add-icon\"><i class=\"fa fa-plus-square\"></i></span></a> -->\n                            <a class=\"pointer\" (click)=\"removeCognate(i)\"><span class=\"trash-icon\"><i class=\"fa fa-trash\"></i></span></a>\n                            <div class=\"card-body\">\n\n                                <!-- COGNATE -->\n                                <div class=\"col-xl-12\">\n                                    <div class=\"d-xl-flex\" style=\"align-items: center;\">\n                                        <label class=\"col-xl-3 col-form-label\">Cognate:</label>\n                                        <div class=\"col-xl-9\">\n                                            <div class=\"form-group row ml-2 mt-3 mr-2\">\n                                                <div class=\"input-group\" *ngIf=\"{switch : false}; let variable\">\n                                                    <ng-select formControlName=\"cognate\" name=\"cognate\" [items]=\"searchResults\" class=\"resizeNgSelect\" bindLabel=\"label\" bindValue=\"label\" placeholder=\"Search entity\" appendTo=\"body\"\n                                                         *ngIf=\"!variable.switch\" (keyup)=\"triggerCognates($event)\" bindValue=\"label\" class=\"resizeNgSelect\" [items]=\"searchResults\"\n                                                        bindLabel=\"label\" placeholder=\"Search entity\" appendTo=\"body\" (focus)=\"deleteData()\">\n                                                    </ng-select>\n                                                    <input (keyup)=\"triggerCognatesInput($event, i)\" formControlName=\"cognate\" name=\"cognate\" type=\"text\" class=\"form-control\" id=\"inputDenotes\" placeholder=\"Insert URI\" *ngIf=\"variable.switch\">\n                                                    <div class=\"input-group-append ml-3 form-check\">\n                                                        <input class=\"form-check-input vartrans-tooltip\" type=\"checkbox\" (change)=\"variable.switch=!variable.switch\" data-toggle=\"tooltip\" data-placement=\"bottom\" data-trigger=\"hover\" title=\"Clicca per inserire un URI manualmente\">\n                                                    </div>\n                                                    <!-- <div class=\"input-group-append ml-2\">\n                                                        <button class=\"btn btn-primary\" type=\"button\"><i\n                                                                class=\"fa fa-external-link-alt\"></i></button>\n                                                    </div> -->\n                                                </div>\n                                            </div>                                                  \n                                        </div>\n                                    </div>\n                                </div>\n\n                                <!-- LABEL / WRITTEN FORM -->\n                                <div class=\"col-xl-12\">\n                                    <div class=\"d-xl-flex\">\n                                        <label class=\"col-xl-3 col-form-label\">Label / Written Form:</label>\n                                        <div class=\"col-xl-9\">\n                                            <div class=\"form-group row ml-2 mr-2\">\n                                                <div class=\"input-group\" *ngIf=\"{switch : false}; let variable\">\n                                                    \n                                                    <input formControlName=\"label\" name=\"label\" type=\"text\" class=\"form-control\">\n                                                    <div class=\"input-group-append ml-3 form-check invisible\">\n                                                        \n                                                    </div>\n                                                </div>\n                                            </div>                                                  \n                                        </div>\n                                    </div>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n</form>","/*\n   Copyright 2021-2022  Istituto di Linguistica Computazionale \"A. Zampolli\", Consiglio Nazionale delle Ricerche, Pisa, Italy.\n \nThis file is part of EpiLexo.\n\nEpiLexo is free software: you can redistribute it and/or modify it under the terms of the GNU General Public License as published by the Free Software Foundation, either version 3 of the License, or (at your option) any later version.\n\nEpiLexo is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for more details.\n\nYou should have received a copy of the GNU General Public License along with EpiLexo. If not, see <https://www.gnu.org/licenses/>.\n*/\n\nimport { Component, ElementRef, OnDestroy, OnInit, ViewChild } from '@angular/core';\nimport { Subscription } from 'rxjs';\nimport { BibliographyService } from 'src/app/services/bibliography-service/bibliography.service';\nimport { DocumentSystemService } from 'src/app/services/document-system/document-system.service';\nimport { LexicalEntriesService } from 'src/app/services/lexical-entries/lexical-entries.service';\n\n@Component({\n  selector: 'app-lexicon-page',\n  templateUrl: './lexicon-page.component.html',\n  styleUrls: ['./lexicon-page.component.scss']\n})\nexport class LexiconPageComponent implements OnInit, OnDestroy {\n  subscription: Subscription;\n  metadata_subscr : Subscription;\n  object: any;\n  @ViewChild('accordion') accordion: ElementRef; \n\n  constructor(private documentService : DocumentSystemService, private lexicalService: LexicalEntriesService, private biblioService : BibliographyService) { }\n\n  notes = '';\n  link = [];\n  bibliography = [];\n  attestation : any;\n  metadata : any;\n  ngOnInit(): void {\n\n    this.lexicalService.triggerNotePanel$.subscribe(\n      boolean => {\n        setTimeout(() => {\n          if(boolean != null){\n            if(boolean){\n              let a_link = this.accordion.nativeElement.querySelectorAll('a[data-target=\"#noteCollapse\"]');\n              let collapse_container = this.accordion.nativeElement.querySelectorAll('div[aria-labelledby=\"noteHeading\"]');\n              let item_collapse = this.accordion.nativeElement.querySelectorAll('[id^=\"collapse-\"');\n              a_link.forEach(element => {\n                if(element.classList.contains(\"collapsed\")){\n                  element.classList.remove('collapsed')\n                }else{\n                  //element.classList.add('collapsed')\n                }\n              })\n  \n              collapse_container.forEach(element => {\n                if(element.classList.contains(\"show\")){\n                  //element.classList.remove('collapsed')\n                }else{\n                  element.classList.add('show')\n                }\n              })\n  \n              item_collapse.forEach(element => {\n                if(element == item_collapse[item_collapse.length-1]){\n                  element.classList.add('show')\n                }else{\n                  element.classList.remove('show')\n                }\n              });\n            }else{\n              setTimeout(() => {\n                let a_link = this.accordion.nativeElement.querySelectorAll('a[data-target=\"#noteCollapse\"]');\n                a_link.forEach(element => {\n                  element.classList.add('collapsed')\n                  \n                })\n  \n                let collapse_container = this.accordion.nativeElement.querySelectorAll('div[aria-labelledby=\"noteHeading\"]');\n                collapse_container.forEach(element => {\n                  console.log(element)\n                  if(element.classList.contains(\"show\")){\n                    element.classList.remove('show')\n                  }\n                })\n              }, 100);\n              \n            }\n          }\n        }, 100);\n        \n      }\n    )\n\n    this.lexicalService.triggerAttestationPanel$.subscribe(\n      boolean => {\n        setTimeout(() => {\n          if(boolean != undefined){\n            //console.log(boolean)\n            if(boolean){\n              let a_link = this.accordion.nativeElement.querySelectorAll('a[data-target=\"#attestationCollapse\"]');\n              let collapse_container = this.accordion.nativeElement.querySelectorAll('div[aria-labelledby=\"attestationHeading\"]');\n              let item_collapse = this.accordion.nativeElement.querySelectorAll('[id^=\"collapse-\"');\n              a_link.forEach(element => {\n                if(element.classList.contains(\"collapsed\")){\n                  element.classList.remove('collapsed')\n                }else{\n                  //element.classList.add('collapsed')\n                }\n              })\n  \n              collapse_container.forEach(element => {\n                if(element.classList.contains(\"show\")){\n                  //element.classList.remove('collapsed')\n                }else{\n                  element.classList.add('show')\n                }\n              })\n  \n              /* item_collapse.forEach(element => {\n                if(element == item_collapse[item_collapse.length-1]){\n                  element.classList.add('show')\n                }else{\n                  element.classList.remove('show')\n                }\n              }); */\n            }else{\n              setTimeout(() => {\n                let a_link = this.accordion.nativeElement.querySelectorAll('a[data-target=\"#attestationCollapse\"]');\n                a_link.forEach(element => {\n                  element.classList.add('collapsed')\n                  \n                })\n  \n                let collapse_container = this.accordion.nativeElement.querySelectorAll('div[aria-labelledby=\"attestationHeading\"]');\n                collapse_container.forEach(element => {\n                  //console.log(element)\n                  if(element.classList.contains(\"show\")){\n                    element.classList.remove('show')\n                  }\n                })\n              }, 100);\n              \n            }\n          }\n        }, 100);\n        \n      }\n    )\n\n    this.biblioService.triggerPanel$.subscribe(\n      object => {\n        if(object != undefined){\n          let a_link = this.accordion.nativeElement.querySelectorAll('a[data-target=\"#bibliographyCollapse\"]');\n          let collapse_container = this.accordion.nativeElement.querySelectorAll('div[aria-labelledby=\"bibliographyHeading\"]');\n          let item_collapse = this.accordion.nativeElement.querySelectorAll('[id^=\"collapse-\"');\n          a_link.forEach(element => {\n            if(element.classList.contains(\"collapsed\")){\n              element.classList.remove('collapsed')\n            }else{\n              //element.classList.add('collapsed')\n            }\n          })\n\n          collapse_container.forEach(element => {\n            if(element.classList.contains(\"show\")){\n              //element.classList.remove('collapsed')\n            }else{\n              element.classList.add('show')\n            }\n          })\n\n          item_collapse.forEach(element => {\n            if(element == item_collapse[item_collapse.length-1]){\n              element.classList.add('show')\n            }else{\n              element.classList.remove('show')\n            }\n          });\n        }\n        \n      }\n    )\n\n    this.lexicalService.attestationPanelData$.subscribe(\n      data => {\n       // console.log(data)\n        if(data != null){\n          if(Array.isArray(data)){\n            this.attestation = data;\n          }else{\n            this.attestation = [data];\n          }\n        }else{\n          this.attestation = null;\n        }\n      }\n    );\n\n    this.documentService.metadataData$.subscribe(\n      data => {\n        console.log(data);\n        if(data != null){\n          this.metadata = data;\n        }else{\n          this.metadata = null;\n        }\n      }\n    )\n\n    this.metadata_subscr = this.documentService.triggerMetadataPanel$.subscribe(\n      boolean => {\n        setTimeout(() => {\n          console.log(boolean)\n          if(boolean != null){\n            if(boolean){\n              let a_link = this.accordion.nativeElement.querySelectorAll('a[data-target=\"#metadataCollapse\"]');\n              let collapse_container = this.accordion.nativeElement.querySelectorAll('div[aria-labelledby=\"metadataHeading\"]');\n              let item_collapse = this.accordion.nativeElement.querySelectorAll('[id^=\"collapse-\"');\n              a_link.forEach(element => {\n                if(element.classList.contains(\"collapsed\")){\n                  element.classList.remove('collapsed')\n                }else{\n                  //element.classList.add('collapsed')\n                }\n              })\n  \n              collapse_container.forEach(element => {\n                if(element.classList.contains(\"show\")){\n                  //element.classList.remove('collapsed')\n                }else{\n                  element.classList.add('show')\n                }\n              })\n  \n              item_collapse.forEach(element => {\n                if(element == item_collapse[item_collapse.length-1]){\n                  element.classList.add('show')\n                }else{\n                  element.classList.remove('show')\n                }\n              });\n            }else{\n              setTimeout(() => {\n                let a_link = this.accordion.nativeElement.querySelectorAll('a[data-target=\"#metadataCollapse\"]');\n                a_link.forEach(element => {\n                  element.classList.add('collapsed')\n                  \n                })\n  \n                let collapse_container = this.accordion.nativeElement.querySelectorAll('div[aria-labelledby=\"metadataHeading\"]');\n                collapse_container.forEach(element => {\n                  console.log(element)\n                  if(element.classList.contains(\"show\")){\n                    element.classList.remove('show')\n                  }\n                })\n              }, 100);\n              \n            }\n          }\n        }, 100);\n        \n      }\n    )\n\n    this.lexicalService.rightPanelData$.subscribe(\n      object => {\n        this.object = object;\n        /* console.log(this.object) */\n        if(this.object !=null){\n          if(this.object.etymology != undefined){\n            this.notes = this.object['etymology'];\n            this.link = this.object['etymology'];\n            this.bibliography = this.object['etymology'];\n          }else{\n            this.notes = this.object;\n            this.link = this.object;\n            this.bibliography = this.object;\n          }\n        }else{\n          this.notes = null;\n          this.link = null;\n          this.bibliography = null;\n        }\n      }\n    );\n  }\n\n  ngOnDestroy(): void {\n    this.metadata_subscr.unsubscribe();\n  }\n}\n","\n\n<div class=\"container-fluid\">\n\t<br>\n\t<div class=\"row\" >\n\t\t<div class=\"col-md-9\">\n\t\t\t<app-lexicon-panel></app-lexicon-panel>\n\t\t</div>\n\t\t<div class=\"col-md-3 \">\n\t\t\t<div class=\"container-fluid\">\n\t\t\t\t<div id=\"accordion\" #accordion>\n\t\t\t\t\t<app-note-panel [noteData]=\"notes\"></app-note-panel>\n\t\t\t\t\t<app-link-panel [linkData]=\"link\"></app-link-panel>\n\t\t\t\t\t<app-bibliography-panel [biblioData]=\"bibliography\" id=\"bibliographyPanel\"></app-bibliography-panel>\n\t\t\t\t\t<app-attestation-panel [attestationData]=\"attestation\"></app-attestation-panel>\n\t\t\t\t\t<app-metadata-panel [metadataData]=\"metadata\"></app-metadata-panel>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</div>","/*\n   Copyright 2021-2022  Istituto di Linguistica Computazionale \"A. Zampolli\", Consiglio Nazionale delle Ricerche, Pisa, Italy.\n \nThis file is part of EpiLexo.\n\nEpiLexo is free software: you can redistribute it and/or modify it under the terms of the GNU General Public License as published by the Free Software Foundation, either version 3 of the License, or (at your option) any later version.\n\nEpiLexo is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for more details.\n\nYou should have received a copy of the GNU General Public License along with EpiLexo. If not, see <https://www.gnu.org/licenses/>.\n*/\n\nexport interface LexicalEntryRequest {\n  text: string,\n  searchMode: searchModeEnum,\n  type: typeEnum | string,\n  pos: string,\n  formType: formTypeEnum | string,\n  author: string,\n  lang: string,\n  status: string,\n  offset: number,\n  limit: number\n}\n\nexport enum searchModeEnum {\n  equals = \"equals\",\n  startsWith = \"startsWith\",\n  contains = \"contains\",\n  endsWith = \"endsWith\"\n}\n\nexport enum typeEnum {\n  word = \"word\",\n  multi = \"multi-word expression\",\n  affix = \"affix\"\n}\n\nexport enum formTypeEnum {\n  flexed = \"flexed\",\n  entry = \"entry\"\n}","/*\n   Copyright 2021-2022  Istituto di Linguistica Computazionale \"A. Zampolli\", Consiglio Nazionale delle Ricerche, Pisa, Italy.\n \nThis file is part of EpiLexo.\n\nEpiLexo is free software: you can redistribute it and/or modify it under the terms of the GNU General Public License as published by the Free Software Foundation, either version 3 of the License, or (at your option) any later version.\n\nEpiLexo is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for more details.\n\nYou should have received a copy of the GNU General Public License along with EpiLexo. If not, see <https://www.gnu.org/licenses/>.\n*/\n\nimport { DatePipe } from '@angular/common';\nimport { ChangeDetectionStrategy, Component, ElementRef, HostListener, OnInit, Renderer2, ViewChild } from '@angular/core';\nimport { FormGroup, FormControl, Validators, FormArray, FormBuilder, ValidatorFn, AbstractControl } from '@angular/forms';\nimport { TreeNode, TreeModel, TREE_ACTIONS, KEYS, IActionMapping, ITreeOptions } from '@circlon/angular-tree-component';\nimport { ModalComponent } from 'ng-modal-lib';\nimport { ContextMenuComponent } from 'ngx-contextmenu';\nimport { ToastrService } from 'ngx-toastr';\nimport { debounceTime } from 'rxjs/operators';\nimport { AnnotatorService } from 'src/app/services/annotator/annotator.service';\nimport { DocumentSystemService } from 'src/app/services/document-system/document-system.service';\nimport { ExpanderService } from 'src/app/services/expander/expander.service';\nimport { LexicalEntriesService } from 'src/app/services/lexical-entries/lexical-entries.service';\nimport { v4 } from 'uuid';\n\n\n\nconst actionMapping: IActionMapping = {\n  mouse: {\n    /* dblClick: (tree, node, $event) => {\n      if (node.hasChildren) {\n        TREE_ACTIONS.TOGGLE_EXPANDED(tree, node, $event);\n      }\n    }, */\n    click: (tree, node, $event) => {\n      $event.shiftKey\n        ? TREE_ACTIONS.TOGGLE_ACTIVE_MULTI(tree, node, $event)\n        : TREE_ACTIONS.TOGGLE_ACTIVE(tree, node, $event);\n      \n      if(node.data.rename_mode){\n        $event.preventDefault();\n      }/* else{\n        TREE_ACTIONS.TOGGLE_ACTIVE(tree, node, $event);\n      } */\n    },\n    expanderClick: (tree, node, $event) => {\n      if(node.data.rename_mode){\n        $event.preventDefault();\n      }else{\n        //console.log(node);\n        TREE_ACTIONS.TOGGLE_EXPANDED(tree, node, $event);\n      }\n    }\n    /* contextMenu: (tree, node, $event) => {\n      //$event.preventDefault();\n      //alert(`context menu for ${node.data.name}`);\n      TREE_ACTIONS.TOGGLE_ACTIVE(tree, node, $event);\n    } */\n  },\n  keys: {\n    [KEYS.ENTER]: (tree, node, $event) => alert(`This is ${node.data.name}`)\n  }\n};\n\n\n\n@Component({\n  selector: 'app-text-tree',\n  templateUrl: './text-tree.component.html',\n  styleUrls: ['./text-tree.component.scss'],\n  providers: [DatePipe],\n})\n\nexport class TextTreeComponent implements OnInit {\n  @ViewChild('metadata_tags') metadata_tags_element: any;\n  @ViewChild('treeText') treeText: any;\n  @ViewChild(ContextMenuComponent) public basicMenu: ContextMenuComponent;\n  \n  @HostListener('document:click', ['$event'])\n  clickout(event : MouseEvent) {\n    if(this.renameNode_input != undefined){\n      if(this.renameNode_input.nativeElement.contains(event.target)) {\n        console.log(\"clicked inside\");\n        event.stopPropagation();\n      } else {\n        console.log(\"clicked outside\");\n        \n        var that = this;\n\n        setTimeout(() => {\n          //@ts-ignore\n          $('.input-tooltip').tooltip('hide');\n          setTimeout(() => {\n            that.treeText.treeModel.getNodeBy(\n              item => {\n                item.data.rename_mode = false;\n              }\n            )\n          }, 100);\n        }, 300);\n      }\n    }\n  }\n  \n  show = false;\n  nodes = [];\n\n  renameNodeSelected : any;\n  validName = null;\n  searchIconSpinner = false;\n  searchIconSpinner_input = false;\n  selectedFileToCopy : any;\n  selectedFileToCopyArray : any;\n  selectedNodeId;\n  selectedEpidocId;\n\n  memoryMetadata = [];\n  metadataForm = new FormGroup({\n    element_id : new FormControl(null),\n    metadata_array: new FormArray([], [Validators.required]),\n  })\n  \n  \n  metadata_array: FormArray;\n  metadata_search : FormArray;\n\n  \n  options: ITreeOptions = {\n    actionMapping,\n    allowDrag: (node) => node.isLeaf,\n    allowDrop: (element, { parent, index }) => {\n      // return true / false based on element, to.parent, to.index. e.g.\n      //console.log(element, parent, index, parent.data.type == 'folder')\n      return parent.data.type == 'directory';\n    },\n    getNodeClone: (node) => ({\n      ...node.data,\n      id: v4(),\n      name: `copy of ${node.data.name}`\n    })\n  };\n\n  \n/*   @ViewChild('renameFolderInput') renameFolder_input:ElementRef; \n  @ViewChild('renameFileInput') renameFile_input:ElementRef;  */\n  @ViewChild('uploadFile') uploadFile_input:ElementRef; \n  @ViewChild('renameNodeInput') renameNode_input:ElementRef; \n  /* @ViewChild('renameFolderModel', {static: false}) renameFolderModal: ModalComponent; */\n  @ViewChild('editMetadata', {static: false}) editMetadataModal: ModalComponent;\n  \n  date = this.datePipe.transform(new Date(), 'yyyy-MM-ddThh:mm');\n  counter = 0;\n\n  textFilterForm = new FormGroup({\n    search_text : new FormControl(null),\n    search_mode : new FormControl(null),\n    import_date : new FormControl(this.date),\n    date_mode : new FormControl(''),\n    /* metadata_array : new FormArray([this.createMetadataItemSearch()]) */\n  })\n\n  initialValues;\n\n  \n  \n  constructor(private lexicalService: LexicalEntriesService, private annotatorService : AnnotatorService, private expander : ExpanderService, private element: ElementRef, private documentService: DocumentSystemService, private renderer: Renderer2, private formBuilder: FormBuilder, private datePipe:DatePipe, private toastr: ToastrService) { }\n\n  ngOnInit(): void {\n    this.loadTree();\n    \n    this.textFilterForm = this.formBuilder.group({\n      search_text : new FormControl(null),\n      search_mode : new FormControl('start'),\n      import_date : new FormControl(this.date),\n      date_mode : new FormControl('until'),\n      metadata_array : new FormArray([])\n    })\n\n    this.onChanges();\n    \n    this.metadataForm = this.formBuilder.group({\n      element_id : new FormControl(null),\n      name : new FormControl(null),\n      metadata_array: new FormArray([], [Validators.required]),\n    });\n\n    this.initialValues = this.textFilterForm.value\n  }\n\n  onChanges() {\n    this.textFilterForm.valueChanges.pipe(debounceTime(500)).subscribe(searchParams => {\n      console.log(searchParams)\n      this.searchFilter(searchParams)\n    })\n  }\n  \n  onEvent = ($event: any) => {\n    console.log($event);\n\n    if ($event.eventName == 'activate' && $event.node.data.type != 'directory' && this.selectedNodeId != $event.node.data['element-id']) {\n      this.selectedNodeId = $event.node.data['element-id'];\n      this.selectedEpidocId = $event.node.data.metadata['itAnt_ID'];\n      //@ts-ignore\n      $(\"#epigraphyTabModal\").modal(\"show\");\n      $('.modal-backdrop').appendTo('.epigraphy-tab-body');\n      //@ts-ignore\n      $('#epigraphyTabModal').modal({backdrop: 'static', keyboard: false})  \n      $('body').removeClass(\"modal-open\")\n      $('body').css(\"padding-right\", \"\");\n\n\n      this.annotatorService.getIdText(this.selectedEpidocId);\n\n      this.documentService.getContent(this.selectedNodeId).subscribe(\n        data=>{\n\n          let text = data.text;\n          let object = {\n            xmlString : text\n          }\n\n          this.documentService.sendLeidenToEpigraphyTab(null);\n          this.documentService.testConvert(object).subscribe(\n            data=>{\n              // console.log(\"TEST\", data);\n              \n              if(data != undefined){\n                try {\n                  let raw = data.xml;\n                  let childNodes = new DOMParser().parseFromString(raw, \"text/html\").querySelectorAll('#edition .textpart')[0].childNodes[0].childNodes;\n                  let leidenLines = []; \n\n                  for(var i = 0; i < childNodes.length; i++){\n                    let node = childNodes[i];\n\n                    if(node.nodeName == 'A' || node.nodeName == 'BR'){\n                      \n                      let string = '';\n                      //console.log(\"LINE BREAK: \" + i)\n                      for(var j = i; j < childNodes.length; j++){\n\n                        let textNode = childNodes[j];\n                        \n                        if(textNode.nodeName == '#text' && textNode.nodeValue.trim() != ''){\n\n                          string += textNode.nodeValue;\n\n                          if(j == childNodes.length-1){\n                            leidenLines.push(string);\n                            break;\n                          }\n\n                          //console.log(textNode.nodeValue)\n                        }else if(textNode.nodeName == 'BR' && i != j){\n                          leidenLines.push(string)\n                          \n                          i = j-1;\n                          break;\n                        }\n                      }\n                    }\n                  }\n\n                  this.documentService.sendLeidenToEpigraphyTab(leidenLines);\n\n\n                  let translations = new DOMParser().parseFromString(raw, \"text/html\").querySelectorAll('#translation');\n                  let translationArray = [];            \n                  translations.forEach(element=>{\n                    let childNodes = element.childNodes;\n                    let string = '';\n                    childNodes.forEach((child : any) =>{\n                      if(child.nodeName == 'P'){\n                        \n                        string += child.innerHTML;\n                      }\n                    })\n                    translationArray.push(string)\n                  })\n                  \n                  this.documentService.sendTranslationToEpigraphyTab(translationArray);\n\n                } catch (error) {\n                  console.log(error)\n                  \n                }\n              } \n            },error =>{\n              console.log(\"ERROR TEST\", error)\n              this.documentService.sendLeidenToEpigraphyTab(null);\n              this.documentService.sendTranslationToEpigraphyTab(null);\n            }\n          )\n\n        },error=>{\n          console.log(error)\n        }\n      )\n\n      this.annotatorService.getTokens(this.selectedNodeId).subscribe(\n        data => {\n\n          console.log(data)\n          let element_id = this.selectedNodeId;\n          let tokens = data.tokens;\n          this.documentService.sendToEpigraphyTab({\n            tokens : tokens,\n            element_id : element_id,\n            epidoc_id : this.selectedEpidocId\n          })\n\n          if(!this.expander.isEditTabOpen() && !this.expander.isEpigraphyTabOpen()){\n            if(!this.expander.isEditTabExpanded() && !this.expander.isEpigraphyTabExpanded()){\n              \n              this.expander.expandCollapseEpigraphy(true);\n              this.expander.openCollapseEpigraphy(true);\n            }\n          }else if(this.expander.isEditTabOpen() && !this.expander.isEpigraphyTabOpen()){\n            if(this.expander.isEditTabExpanded() && !this.expander.isEpigraphyTabExpanded()){\n              this.expander.openCollapseEpigraphy(true);\n              this.expander.expandCollapseEdit(false);\n            }\n          }\n\n          let metadata = $event.node.data.metadata;\n          metadata['path'] = $event.node.data.path;\n          metadata['element-id'] = $event.node.data['element-id'];\n          if(metadata != undefined && Object.keys(metadata).length > 5){\n            this.documentService.sendToMetadataPanel(metadata);\n            this.documentService.triggerMetadataPanel(true)\n          }else{\n            this.documentService.sendToMetadataPanel(null);\n            this.documentService.triggerMetadataPanel(false)\n          }\n        },\n        error => {\n          console.log(error)\n        }\n      );\n      \n      \n      \n\n      /* this.annotatorService.getText(this.selectedNodeId).subscribe(\n        data=>{\n          console.log(data);\n          if(data != undefined){\n            this.documentService.sendTextToEpigraphyTab(data.text);\n          }\n        },\n        error=>{\n          if(error.status == 200){\n            if(error.error.text != \"\"){\n              this.documentService.sendTextToEpigraphyTab(error.error.text);\n            }  \n          }\n          console.log(error)\n        }\n      ) */\n\n      \n    \n    }\n  }\n\n  \n\n  onMoveNode($event) {\n    console.log($event);\n    let node_type = $event.node.type;\n    let target_type = $event.to.parent.type;\n    if(node_type === 'directory' && target_type === 'directory'){\n      this.moveFolder($event)\n    }else if(node_type === 'file' && target_type === 'directory'){\n      this.moveFile($event)\n    }\n    \n  }\n\n  loadTree(){\n    this.documentService.getDocumentSystem().subscribe(\n      data => {\n        console.log(data);\n\n        if(data['documentSystem'].length != 0){\n          //console.log(\"CIAO\")\n          this.nodes = data['documentSystem'];\n          setTimeout(() => {\n            this.treeText.treeModel.getNodeBy(\n              item => {\n                item.data.rename_mode = false;\n              }\n            )\n          }, 100);\n        }\n        \n        \n        this.counter = data['results'];\n      },\n      error => {\n        console.log(error)\n      }\n    )\n  }\n\n  \n\n  isFolder = (item : any) : boolean =>{\n    if(item.type != undefined){\n      return item.type == 'directory' && (this.treeText.treeModel.activeNodes.length == 1 || this.treeText.treeModel.activeNodes.length == 0);\n    }else{\n      return false\n    }\n  }\n\n  isFile = (item : any) : boolean =>{\n    if(item.type != undefined){\n      return item.type == 'file' && (this.treeText.treeModel.activeNodes.length == 1 || this.treeText.treeModel.activeNodes.length == 0);\n    }else{\n      return false\n    }\n  }\n\n  enableMetadata = (item : any) : boolean => {\n    return (item.type == 'file' || item.type == 'folder') && (this.treeText.treeModel.activeNodes.length == 1 || this.treeText.treeModel.activeNodes.length == 0);\n  }\n\n  multipleSelection = (item : any): boolean =>{\n    //console.log(this.treeText.treeModel.activeNodes)\n    return this.treeText.treeModel.activeNodes.length > 1;\n  }\n\n  noRoot(item : any){\n    return item.name != 'root';\n  }\n\n  isFolderMultiple = (item : any) : boolean => {\n    if(this.selectedFileToCopyArray != undefined){\n      return item.type == 'directory' && this.selectedFileToCopyArray.length > 1;\n    }else{\n      return false;\n    }\n  }\n\n  pasteElementsReq = (item : any) : boolean => {\n    if(this.selectedFileToCopyArray != undefined){\n      return this.selectedFileToCopyArray.length > 1;\n    }else{\n      return false;\n    }\n    \n  }\n\n  pasteElements(item){\n    console.log(item)\n    let target_element_id = item['element-id']\n    if(this.selectedFileToCopyArray != undefined){\n      this.selectedFileToCopyArray.forEach((element : any) => {\n        if(element.data.type == 'file'){\n\n          let parameters = {\n            \"requestUUID\": \"string\",\n            \"user-id\": 0,\n            \"element-id\": element?.data['element-id'],\n            \"target-id\": target_element_id\n          }\n\n          this.documentService.copyFileTo(parameters).subscribe(\n            data=>{\n              console.log(data);\n              //this.nodes = data['documentSystem'];\n              this.toastr.info('File '+ element?.data?.name +' copied', '', {\n                timeOut: 5000,\n              });\n              this.treeText.treeModel.getNodeBy(x => {\n                if(x.data['element-id'] === target_element_id){\n                  console.log('entrato')\n                  x.expand();\n      \n                  let node = {\n                    children : element?.data.children,\n                    \"element-id\" : element?.data['element-id']+123213,\n                    id : element?.data?.id+1232312,\n                    metadata : element?.data?.metadata,\n                    name : element?.data?.name,\n                    path : element?.data?.path,\n                    rename_mode : false,\n                    type : element?.data?.type\n                  }\n                  \n                  x.data.children.push(node)\n                    setTimeout(() => {\n                      this.counter = this.nodes.length;\n                      this.updateTreeView();\n                      this.treeText.treeModel.update();\n                      //this.treeText.treeModel.getNodeById(node.id).setActiveAndVisible();\n                    }, 100);\n                  }\n                })              \n      \n                this.treeText.treeModel.update()\n              \n                this.selectedFileToCopyArray = null;\n            },error=>{\n              //console.log(error)\n              this.selectedFileToCopyArray = null;\n            }\n          )\n        }else{\n          this.toastr.error('You can\\'t copy folder, please select only files or move entire folder', 'Error', {\n            timeOut: 5000\n          })\n        }\n      });\n    }\n  }\n\n  copyElements(){\n    this.selectedFileToCopy = null;\n    this.selectedFileToCopyArray = this.treeText.treeModel.activeNodes;\n  }\n  \n  removeElements(){\n    let selected_elements = Array.from(this.treeText.treeModel.activeNodes);\n    selected_elements.forEach(\n      (elements : any) => {\n        try {\n          let data_node = elements.data;\n          let parameters = {\n            \"requestUUID\" : \"string\",\n            \"user-id\" : 0,\n            \"element-id\" : data_node['element-id'],\n          }\n\n          if(data_node.type == 'file'){\n            this.documentService.removeFile(parameters).subscribe(\n              data=>{\n                console.log(data);\n                this.toastr.info('File '+ data_node.name +' deleted', '', {\n                  timeOut: 5000,\n                });\n                \n                //this.nodes = data['documentSystem'];\n                this.lexicalService.sendToAttestationPanel(null);\n                this.documentService.sendToEpigraphyTab(null)\n                this.expander.expandCollapseEpigraphy(false);\n                this.expander.openCollapseEpigraphy(false);\n\n                if(this.expander.isEditOpen){\n                  this.expander.expandCollapseEdit(true);\n                }\n      \n                this.documentService.sendToMetadataPanel(null)\n                \n                /* expandedNodes.forEach( (node: TreeNode) => {\n                \n                  setTimeout(() => {\n                    this.treeText.treeModel.getNodeBy(x => {\n                      if(x.data['element-id'] === node.data['element-id']){\n                        x.expand()\n                      }\n                    })              \n                  }, 300);\n                }) */\n      \n                this.treeText.treeModel.getNodeBy(x => {\n                  if(x.data['element-id'] === data_node['element-id']){\n                    x.parent.data.children.splice(x.parent.data.children.indexOf(x.data), 1)\n                  }\n                })\n      \n                this.treeText.treeModel.update()\n      \n                setTimeout(() => {\n                  console.log(this.nodes)\n                  this.counter = this.nodes.length;\n                }, 100);\n                \n                \n              },error=>{\n                console.log(error)\n                if(typeof(error.error) == 'string'){\n                  this.toastr.info(error.error, '', {\n                    timeOut: 5000,\n                  });\n                }\n                \n              }\n            )\n          }else if(data_node.type == 'directory'){\n            this.documentService.removeFolder(parameters).subscribe(\n              data=>{\n                console.log(data);\n                \n                this.toastr.info('Folder ' + data_node.name + ' removed correctly', 'Info', {\n                  timeOut: 5000\n                })\n      \n                this.treeText.treeModel.getNodeBy(x => {\n                  if(x.data['element-id'] === data_node['element-id']){\n                    x.parent.data.children.splice(x.parent.data.children.indexOf(x.data), 1)\n                  }\n                })\n      \n                this.treeText.treeModel.update()\n      \n                setTimeout(() => {\n                  console.log(this.nodes)\n                  this.counter = this.nodes.length;\n                }, 100);\n                \n                \n              },error=>{\n                console.log(error)\n                this.toastr.error('Something went wront ', 'Error', {\n                  timeOut: 5000\n                })\n                if(typeof(error.error) == 'string'){\n                  this.toastr.info(error.error, '', {\n                    timeOut: 5000,\n                  });\n                }\n              }\n            )\n          }\n\n          \n        } catch (error) {\n          \n        }\n        \n\n      }\n    )\n  }\n\n  createNewFile(evt){\n    if(evt != undefined){\n      console.log(evt)\n      let element_id = evt['element-id'];\n      let parameters = {\n        requestUUID : \"string\",\n        \"user-id\" : 0,\n        \"element-id\" : element_id,\n        filename : \"new_file\"+Math.floor(Math.random() * (99999 - 10) + 10)\n      }\n\n      this.documentService.createFile(parameters).subscribe(\n        data =>{\n          console.log(data)\n          this.treeText.treeModel.getNodeBy(x => {\n            if(x.data['element-id'] === element_id){\n              x.expand()\n              \n              this.toastr.info('New file added', '', {\n                timeOut: 5000,\n              });\n              console.log(x)\n              x.data.children.push(data.node)\n              setTimeout(() => {\n                this.counter = this.nodes.length;\n                this.updateTreeView();\n                this.treeText.treeModel.update();\n                this.treeText.treeModel.getNodeById(data.node.id).setActiveAndVisible();\n              }, 100);\n              \n            }\n          })\n        },error=> {\n          console.log(error)\n        }\n      )\n    }\n  }\n  \n\n  addFolder(evt){\n    if(evt != undefined){\n      let element_id = evt['element-id'];\n      let parameters = {\n        \"requestUUID\" : \"string\",\n        \"user-id\" : 0,\n        \"element-id\" : element_id\n      }\n      \n      const expandedNodes = this.treeText.treeModel.expandedNodes;\n      \n      this.documentService.addFolder(parameters).subscribe(\n        data=>{\n          console.log(data)\n          this.toastr.info('New folder added', '', {\n            timeOut: 5000,\n          });\n          this.treeText.treeModel.getNodeBy(x => {\n            if(x.data['element-id'] === element_id){\n              x.expand()\n\n              let element_id_new_node = data.node['element-id'];\n              let id_new_node = Math.floor(Math.random() * (9728157429307 - 1728157429307) + 1728157429307);\n              let new_node = {\n                \"children\" : [],\n                \"element-id\" : element_id_new_node,\n                \"id\" : id_new_node,\n                \"metadata\" : {},\n                \"path\" : \"\",\n                \"name\" : data.node.name,\n                \"type\" : \"directory\",\n                \"rename_mode\" : false\n              }\n              console.log(x)\n              x.data.children.push(new_node);\n              \n              setTimeout(() => {\n                this.updateTreeView();\n                this.treeText.treeModel.update();\n                this.treeText.treeModel.getNodeById(id_new_node).setActiveAndVisible();\n              }, 100);\n              \n            }\n          }) \n          \n        },error=>{\n          console.log(error)\n        }\n      )\n    }\n  }\n\n  addFile(evt){\n    console.log(evt)\n    let element_id = this.uploadFile_input.nativeElement['element-id'];\n    this.selectedFileToCopy = null;\n    let file_name, parameters;\n\n    if(evt.target.files != undefined){\n      if(evt.target.files.length == 1){\n        file_name = evt.target.files[0].name;\n        parameters = {\n          \"requestUUID\" : \"string\",\n          \"user-id\" : 0,\n          \"element-id\" : element_id,\n          \"file-name\" : file_name\n        }\n        const formData = new FormData();\n        formData.append('file', evt.target.files[0])\n        this.documentService.uploadFile(formData, element_id, 11).subscribe(\n          data=>{\n            console.log(data)\n           \n            this.treeText.treeModel.getNodeBy(x => {\n              if(x.data['element-id'] === element_id){\n                x.expand()\n                \n                this.toastr.info('New file added', '', {\n                  timeOut: 5000,\n                });\n                console.log(x)\n                x.data.children.push(data.node)\n                setTimeout(() => {\n                  this.counter = this.nodes.length;\n                  this.updateTreeView();\n                  this.treeText.treeModel.update();\n                  this.treeText.treeModel.getNodeById(data.node.id).setActiveAndVisible();\n                }, 100);\n                \n              }\n            })    \n            \n            \n            \n          },error=>{\n            console.log(error)\n          }\n        )\n      }else{\n        let files_array = evt.target.files;\n        Array.from(files_array).forEach((element : any) => {\n\n          file_name = element.name;\n          parameters = {\n            \"requestUUID\": \"string\",\n            \"user-id\": 0,\n            \"element-id\": element_id,\n            \"file-name\": file_name\n          }\n\n          const formData = new FormData();\n          formData.append('file', element);\n\n          this.documentService.uploadFile(formData, element_id, 11).subscribe(\n            data => {\n              console.log(data)\n              this.treeText.treeModel.getNodeBy(x => {\n                if(x.data['element-id'] === element_id){\n                  x.expand()\n                  \n                  this.toastr.info('New file added', '', {\n                    timeOut: 5000,\n                  });\n                  console.log(x)\n                  x.data.children.push(data.node)\n                  setTimeout(() => {\n                    this.counter = this.nodes.length;\n                    this.updateTreeView();\n                    this.treeText.treeModel.update();\n                    this.treeText.treeModel.getNodeById(data.node.id).setActiveAndVisible();\n                  }, 100);\n                  \n                }\n              })\n\n\n\n            }, error => {\n              console.log(error);\n              this.toastr.error('Error when adding new file', '', {\n                timeOut: 5000,\n              });\n            }\n          )\n        });\n      }\n    }\n        \n    console.log(parameters)\n    const expandedNodes = this.treeText.treeModel.expandedNodes;\n    \n  }\n\n  triggerUploader(evt){\n    let element_id = evt['element-id']\n    this.renderer.setProperty(this.uploadFile_input.nativeElement, 'element-id', element_id)\n    this.uploadFile_input.nativeElement.click();\n    \n  }\n\n  copyFile(evt){\n    console.log(evt);\n    this.selectedFileToCopy = evt;\n    this.selectedFileToCopyArray = null;\n  }\n\n  pasteFile(evt){\n    console.log(evt)\n    let element_id_target = evt['element-id'];\n    let element_id_source = this.selectedFileToCopy['element-id'];\n    let parameters = {\n      \"requestUUID\": \"string\",\n      \"user-id\": 0,\n      \"element-id\": element_id_source,\n      \"target-id\": element_id_target\n    }\n            \n    this.documentService.copyFileTo(parameters).subscribe(\n      data=>{\n        console.log(data);\n        //this.nodes = data['documentSystem'];\n        this.toastr.info('File '+ evt['name'] +' copied', '', {\n          timeOut: 5000,\n        });\n        this.treeText.treeModel.getNodeBy(x => {\n          if(x.data['element-id'] === element_id_target){\n            console.log('entrato')\n            x.expand();\n\n            let node = {\n              children : this.selectedFileToCopy.children,\n              \"element-id\" : this.selectedFileToCopy['element-id'],\n              id : this.selectedFileToCopy.id+1232312,\n              metadata : this.selectedFileToCopy.metadata,\n              name : this.selectedFileToCopy.name,\n              path : '',\n              rename_mode : false,\n              type : this.selectedFileToCopy.type\n            }\n            \n            x.data.children.push(node)\n              setTimeout(() => {\n                this.counter = this.nodes.length;\n                this.updateTreeView();\n                this.treeText.treeModel.update();\n                this.treeText.treeModel.getNodeById(node.id).setActiveAndVisible();\n              }, 100);\n            }\n          })              \n\n          this.treeText.treeModel.update()\n        \n          this.selectedFileToCopy = null;\n      },error=>{\n        //console.log(error)\n        this.selectedFileToCopy = null;\n      }\n    )\n    \n\n  }\n\n  downloadFile(evt){\n    console.log(evt)\n    let element_id = evt['element-id'];\n    let parameters = {\n      \"requestUUID\": \"string\",\n      \"user-id\": 0,\n      \"element-id\": element_id,\n    }\n            \n    this.documentService.downloadFile(parameters).subscribe(\n      data=>{\n        console.log(data);\n        this.toastr.info('File '+ evt['name'] +' downloaded', '', {\n          timeOut: 5000,\n        });\n        \n      },error=>{\n        //console.log(error)\n      }\n    )\n  }\n  \n  removeFile(evt){\n    this.selectedFileToCopy = null;\n    if(evt != undefined){\n      let element_id = evt['element-id'];\n      let parameters = {\n        \"requestUUID\" : \"string\",\n        \"user-id\" : 0,\n        \"element-id\" : element_id,\n      }\n\n\n      const expandedNodes = this.treeText.treeModel.expandedNodes;\n\n      this.documentService.removeFile(parameters).subscribe(\n        data=>{\n          console.log(data);\n          this.toastr.info('File '+ evt['name'] +' deleted', '', {\n            timeOut: 5000,\n          });\n          \n          //this.nodes = data['documentSystem'];\n          this.lexicalService.sendToAttestationPanel(null);\n          this.documentService.sendToEpigraphyTab(null)\n          this.expander.expandCollapseEpigraphy(false);\n          this.expander.openCollapseEpigraphy(false);\n\n          this.documentService.sendToMetadataPanel(null)\n\n          if(this.expander.isEditOpen){\n            this.expander.expandCollapseEdit();\n          }\n          \n          /* expandedNodes.forEach( (node: TreeNode) => {\n          \n            setTimeout(() => {\n              this.treeText.treeModel.getNodeBy(x => {\n                if(x.data['element-id'] === node.data['element-id']){\n                  x.expand()\n                }\n              })              \n            }, 300);\n          }) */\n\n          this.treeText.treeModel.getNodeBy(x => {\n            if(x.data['element-id'] === element_id){\n              x.parent.data.children.splice(x.parent.data.children.indexOf(x.data), 1)\n            }\n          })\n\n          this.treeText.treeModel.update()\n\n          setTimeout(() => {\n            console.log(this.nodes)\n            this.counter = this.nodes.length;\n          }, 100);\n          \n          \n        },error=>{\n          console.log(error)\n          if(typeof(error.error) == 'string'){\n            this.toastr.info(error.error, '', {\n              timeOut: 5000,\n            });\n          }\n          \n        }\n      )\n    }\n  }\n  \n\n\n  removeFolder(evt){\n    if(evt != undefined){\n      let element_id = evt['element-id'];\n      let parameters = {\n        \"requestUUID\" : \"string\",\n        \"user-id\" : 0,\n        \"element-id\" : element_id\n      }\n      this.toastr.info('Folder '+ evt['name'] +' deleted', '', {\n        timeOut: 5000,\n      });\n      const expandedNodes = this.treeText.treeModel.expandedNodes;\n\n      this.documentService.removeFolder(parameters).subscribe(\n        data=>{\n          console.log(data);\n          \n          //this.nodes = data['documentSystem'];\n          /* expandedNodes.forEach( (node: TreeNode) => {\n          \n            setTimeout(() => {\n              this.treeText.treeModel.getNodeBy(x => {\n                if(x.data['element-id'] === node.data['element-id']){\n                  x.expand()\n                }\n              })              \n            }, 300);\n          }) */\n\n          this.treeText.treeModel.getNodeBy(x => {\n            if(x.data['element-id'] === element_id){\n              x.parent.data.children.splice(x.parent.data.children.indexOf(x.data), 1)\n            }\n          })\n\n          this.treeText.treeModel.update()\n\n          setTimeout(() => {\n            console.log(this.nodes)\n            this.counter = this.nodes.length;\n          }, 100);\n          \n          \n        },error=>{\n          console.log(error)\n          if(typeof(error.error) == 'string'){\n            this.toastr.info(error.error, '', {\n              timeOut: 5000,\n            });\n          }\n        }\n      )\n    }\n  }\n\n  moveFolder(evt){\n    if(evt != undefined){\n      //console.log(evt);\n      let element_id = evt.node['element-id'];\n      let target_id = evt.to.parent['element-id'];\n      let parameters = {\n        \"requestUUID\": \"string\",\n        \"user-id\": 0,\n        \"element-id\": element_id,\n        \"target-id\": target_id\n      }\n            \n      \n      this.documentService.moveFolder(parameters).subscribe(\n        data=>{\n          this.toastr.info('Folder '+ evt.node['name'] +' moved', '', {\n            timeOut: 5000,\n          });\n          /* //console.log(data); */\n        },error=>{\n          console.log(error)\n        }\n      )\n    }\n  }\n\n  moveFile(evt){\n    if(evt != undefined){\n      console.log(evt);\n      let element_id = evt.node['element-id'];\n      let target_id = evt.to.parent['element-id'];\n      let parameters = {\n        \"requestUUID\": \"string\",\n        \"user-id\": 0,\n        \"element-id\": element_id,\n        \"target-id\": target_id\n      }\n            \n      \n      this.documentService.moveFileTo(parameters).subscribe(\n        data=>{\n          console.log(data);\n          this.toastr.info('File '+ evt.node['name'] +' moved', '', {\n            timeOut: 5000,\n          });\n          \n        },error=>{\n          //console.log(error)\n        }\n      )\n    }\n  }\n\n  renameNode(evt){\n    setTimeout(() => {\n      this.renameNode_input.nativeElement.focus();\n      //@ts-ignore\n      $('.input-tooltip').tooltip({\n          trigger: 'hover'\n      });\n    }, 300);\n    console.log(evt)\n    \n    this.treeText.treeModel.getNodeBy(\n      node => {\n        if(node.data['element-id'] == evt['element-id']){\n          node.data.rename_mode = true;\n          \n        }else{\n          node.data.rename_mode = false;\n        }\n      }\n    )\n  }\n\n  onRenamingNode(evt, node, new_value){\n    console.log(evt, node);\n    setTimeout(() => {\n      //@ts-ignore\n      $('.input-tooltip').tooltip({\n          trigger: 'hover'\n      });\n    }, 300);\n    switch(evt.key){\n      case 'Enter' : this.updateNodeName(node, new_value); break;\n      case 'Escape': this.exitRenamingMode(); break;\n      default: console.log(evt)\n    }\n    \n  }\n\n  updateNodeName(node, new_value){\n    this.searchIconSpinner_input = true;\n    let node_type = node.data.type;\n\n    if(new_value.match(/^[A-Za-z-_0-9. ]{3,}$/)){\n      let element_id = node.data['element-id'];\n      let parameters = {\n        \"requestUUID\": \"string\",\n        \"user-id\": 0,\n        \"element-id\": element_id,\n        \"rename-string\": new_value\n      }\n\n      if(node_type == 'directory'){\n        \n        this.documentService.renameFolder(parameters).subscribe(\n          data=> {\n            //console.log(data);\n            this.toastr.info('Folder '+ node.data.name +' renamed', '', {\n              timeOut: 5000,\n            });\n            setTimeout(() => {\n              this.treeText.treeModel.getNodeBy(x => {\n                if(x.data['element-id'] === element_id){\n                  x.data.name = new_value;\n                }\n              })              \n            }, 300);\n            this.searchIconSpinner_input = false;\n            this.renameNode_input.nativeElement.value = '';\n            var that = this;\n\n            setTimeout(() => {\n              //@ts-ignore\n              $('.input-tooltip').tooltip('hide');\n              setTimeout(() => {\n                that.treeText.treeModel.getNodeBy(\n                  item => {\n                    item.data.rename_mode = false;\n                  }\n                )\n              }, 100);\n            }, 100);\n          },error=>{\n            console.log(error)\n            var that = this;\n\n            setTimeout(() => {\n              //@ts-ignore\n              $('.input-tooltip').tooltip('hide');\n              setTimeout(() => {\n                that.treeText.treeModel.getNodeBy(\n                  item => {\n                    item.data.rename_mode = false;\n                  }\n                )\n              }, 100);\n            }, 100);\n          }\n        )\n\n      }else if(node_type == 'file'){\n        this.documentService.renameFile(parameters).subscribe(\n          data=> {\n            this.toastr.info('File renamed', '', {\n              timeOut: 5000,\n            });\n            //console.log(data);\n            setTimeout(() => {\n              this.treeText.treeModel.getNodeBy(x => {\n                if(x.data['element-id'] === element_id){\n                  x.data.name = new_value;\n                }\n              })              \n            }, 300);\n            this.searchIconSpinner_input = false;\n            this.renameNode_input.nativeElement.value = '';\n            var that = this;\n\n            setTimeout(() => {\n              //@ts-ignore\n              $('.input-tooltip').tooltip('hide');\n              setTimeout(() => {\n                that.treeText.treeModel.getNodeBy(\n                  item => {\n                    item.data.rename_mode = false;\n                  }\n                )\n              }, 100);\n            }, 100);\n          },error=>{\n            console.log(error)\n            var that = this;\n\n            setTimeout(() => {\n              //@ts-ignore\n              $('.input-tooltip').tooltip('hide');\n              setTimeout(() => {\n                that.treeText.treeModel.getNodeBy(\n                  item => {\n                    item.data.rename_mode = false;\n                  }\n                )\n              }, 100);\n            }, 100);\n          }\n        )\n      }\n    }\n    \n  }\n\n  exitRenamingMode(){\n    var that = this;\n\n    setTimeout(() => {\n      //@ts-ignore\n      $('.input-tooltip').tooltip('hide');\n      setTimeout(() => {\n        \n        that.searchIconSpinner_input = false;\n        that.treeText.treeModel.getNodeBy(\n          item => {\n            item.data.rename_mode = false;\n          }\n        )\n      }, 100);\n    }, 300);\n  }\n\n  saveMetadata(){\n    console.log(this.metadata_array.value)\n    let element_id = this.metadataForm.get('element_id').value;\n    let name = this.metadataForm.get('name').value;\n    let parameters = {\n      \"requestUUID\": \"string\",\n      \"metadata\": {},\n      \"user-id\": 0,\n      \"element-id\": element_id\n    };\n    \n    this.metadata_array.value.forEach(element => {\n      parameters.metadata[element.key] = element.value\n    });\n\n    const expandedNodes = this.treeText.treeModel.expandedNodes;\n\n    this.documentService.updateMetadata(parameters).subscribe(\n      data=> {\n        this.toastr.info('Metadata updated for ' + name + ' node' , '', {\n          timeOut: 5000,\n        });\n        //console.log(data);\n        this.nodes = data['documentSystem'];\n        expandedNodes.forEach( (node: TreeNode) => {\n          \n          setTimeout(() => {\n            this.treeText.treeModel.getNodeBy(x => {\n              if(x.data['element-id'] === node.data['element-id']){\n                x.setActiveAndVisible()\n              }\n            })              \n          }, 300);\n        })\n      },error =>{\n        console.log(error)\n      }\n    )\n  }\n\n  removeMetadataItem(index){\n    this.metadata_array = this.metadataForm.get('metadata_array') as FormArray;\n    let name = this.metadata_array.at(index).get('key').value;\n    this.toastr.info('Metadata deleted for ' + name + ' node' , '', {\n      timeOut: 5000,\n    });\n    this.memoryMetadata.splice(index, 1)\n    this.metadata_array.removeAt(index);\n    this.metadataForm.markAsTouched();\n    \n  }\n\n  addMetadata(k?, v?){\n    this.metadata_array = this.metadataForm.get('metadata_array') as FormArray;\n\n    if (k == undefined) {\n      this.metadata_array.push(this.createMetadataItem());\n    } else {\n      this.metadata_array.push(this.createMetadataItem(k, v));\n    }\n  }\n\n  onCloseRemoveMetadata(){\n    this.selectedFileToCopy = null;\n  }\n\n  deleteMetadata(){\n    let element_id = this.selectedFileToCopy['element-id'];\n    let name = this.selectedFileToCopy['name'];\n    let parameters = {\n      \"requestUUID\": \"string\",\n      \"user-id\": 0,\n      \"element-id\": element_id\n    }\n    \n    const expandedNodes = this.treeText.treeModel.expandedNodes;\n\n    this.documentService.deleteMetadata(parameters).subscribe(\n      data=> {\n        //console.log(data);\n        this.toastr.info('Metadata deleted for ' + name + ' node' , '', {\n          timeOut: 5000,\n        });\n        this.nodes = data['documentSystem'];\n        expandedNodes.forEach( (node: TreeNode) => {\n          \n          setTimeout(() => {\n            this.treeText.treeModel.getNodeBy(x => {\n              if(x.data['element-id'] === node.data['element-id']){\n                x.setActiveAndVisible()\n              }\n            })              \n          }, 300);\n        })\n      },error =>{\n        console.log(error)\n      }\n    )\n  }\n\n  onCloseModal(){\n    this.metadataForm.markAsUntouched();\n    this.metadata_array.clear();\n    this.memoryMetadata = [];\n  }\n\n  populateMetadata(item : any){\n    let element_id = item['element-id'];\n    let name = item['name'];\n    this.metadataForm.get('name').setValue(name, {emitEvent : false})\n    this.metadataForm.get('element_id').setValue(element_id, {emitEvent : false});\n    this.editMetadataModal.show();\n\n    this.metadata_array = this.metadataForm.get('metadata_array') as FormArray;\n    this.metadata_array.clear();\n    this.memoryMetadata = [];\n\n    if(Object.keys(item.metadata).length != 0){\n      for (const [key, value] of Object.entries(item.metadata)) {\n        console.log(`${key}: ${value}`);\n        this.addMetadata(key, value)\n      }\n    }else{\n      null;\n    }\n    \n  }\n\n  createMetadataItem(k?, v?){\n    if(k != undefined){\n      return this.formBuilder.group({\n        key: new FormControl(k, [Validators.required, Validators.minLength(0)]),\n        value: new FormControl(v, [Validators.required, Validators.minLength(0)])\n      })\n    }else{\n      return this.formBuilder.group({\n        key: new FormControl('', [Validators.required, Validators.minLength(0), this.uniqueIdValidator.bind(this)]),\n        value: new FormControl('', [Validators.required, Validators.minLength(0)])\n      })\n    }\n  }\n\n  uniqueIdValidator(control: FormControl) {\n    /* console.log(control)\n    console.log(this.metadata_array) */\n    if(control.value != ''){\n      if (this.metadata_array.value.find(item => item.key === control.value)) {\n        return { duplicate: true };\n      } else {\n        return null;\n      }\n    }else{\n      return null\n    }\n    \n  }\n\n  updateTreeView() {\n    setTimeout(() => {\n      //@ts-ignore\n      $('.input-tooltip').tooltip({\n          trigger: 'hover'\n      });\n    }, 300);\n    \n    setTimeout(() => {\n      this.treeText.sizeChanged();\n      //@ts-ignore\n      $('.lexical-tooltip').tooltip();\n    }, 1000);\n  }\n\n  resetFields(){\n    \n    this.textFilterForm.reset(this.initialValues, {emitEvent : false});\n    setTimeout(() => {\n      this.loadTree();\n      this.treeText.treeModel.update();\n      this.updateTreeView();\n      \n    }, 500);  \n    \n  }\n\n  searchFilter(newPar) {\n    \n    setTimeout(() => {\n      const viewPort_prova = this.element.nativeElement.querySelector('tree-viewport') as HTMLElement;\n      viewPort_prova.scrollTop = 0\n    }, 300);\n\n    let search_text = newPar.search_text != null ? newPar.search_text : '';\n    let date_pipe = this.datePipe.transform(newPar.import_date, 'yyyy-MM-ddThh:mm:ss.zzzZ')\n    this.searchIconSpinner = true;\n    let parameters = {\n      \"requestUUID\" : \"string\",\n      \"contains\" : newPar.search_mode == 'contains' ? true : false,\n      \"metadata\" : {},\n      \"search-text\": search_text,\n      \"start-with\" : newPar.search_mode == 'start' ? true : false,\n      \"user-id\": 0,\n      \"import-date\": date_pipe,\n      \"exact-date\": newPar.date_mode == 'exact' ? true : false,\n      \"from-date\":  newPar.date_mode == 'from' ? true : false,\n      \"util-date\":  newPar.date_mode == 'until' ? true : false\n    };\n    \n    console.log(parameters)\n    \n    this.documentService.searchFiles(newPar).subscribe(\n      data => {\n        if(data['files'].length > 0){\n          this.show = false;\n        }else {\n          this.show = true;\n        }\n        this.nodes = data['files'];\n        this.counter = data['results'];\n        this.treeText.treeModel.update();\n        this.updateTreeView();\n        this.searchIconSpinner = false;\n        \n      },\n      error => {\n        console.log(error)\n        this.searchIconSpinner = false;\n\n        this.toastr.error('Error on search text', 'Error', {\n          timeOut : 5000\n        })\n      }\n    )\n  }\n\n  addTagFn(name) {\n    return { name: name, tag: true };\n  }\n\n  triggerMetadata(){\n    console.log(this.metadata_tags_element.selectedItems)\n  }\n\n}\n\n","\n\n<form [formGroup]=\"textFilterForm\">\n  <div class=\"input-group col-md-12 mt-3\">\n    <div class=\" input-group col-md-12 p-0\">\n      <input formControlName=\"search_text\" id=\"filterLexicalEntry\" name=\"search_text\" type=\"text\" class=\"form-control\" placeholder=\"Search\" />\n      <div class=\"input-group-append\">\n          <span class=\"input-group-text loading_icon_append\" id=\"basic-addon2\">\n              <div class=\"spinner-border spinner-border-sm m-1\" role=\"status\" *ngIf=\"searchIconSpinner\">\n                  <span class=\"sr-only\">Loading...</span>\n              </div>\n          </span>\n      </div>\n    </div>\n    \n    <div id=\"buttons-container\" class=\"input-group-append d-flex align-items-sm-stretch w-100\">\n        <button class=\"btn rounded-left btn-sm btn-secondary btn-block filter-button\" type=\"button\" value=\"Filter\" title=\"Filter\"\n            data-toggle=\"collapse\" data-target=\"#metadataFilterCollapse\" aria-expanded=\"false\"\n            aria-controls=\"metadataFilterCollapse\" style=\"height: 25px;\"><i class=\"fa fa-filter\"></i></button>\n        <button class=\"btn btn-sm btn-danger btn-block reset-button\" type=\"button\" value=\"Reset\" title=\"Reset\"\n            (click)=\"resetFields();\" style=\"border-top-right-radius: .25rem; border-bottom-right-radius: .25rem;\" style=\"height: 25px;\"><i\n                class=\"fa fa-times\"></i></button>\n        <button class=\"btn btn-block counter-button\" type=\"button\" style=\"height: 25px;\"><span\n                class=\"font-weight-bold font-italic text-muted\">{{counter}}</span></button>\n    </div>\n  </div>\n\n  <div class=\"d-flex flex-wrap mt-3\">\n      <div class=\"col-md-6 col-sm-6\">\n          <div class=\"form-check\">\n              <input formControlName=\"search_mode\" class=\"form-check-input\" type=\"radio\" name=\"search_mode\"\n                  id=\"startRadio\" value=\"start\">\n              <label class=\"form-check-label\" for=\"startRadio\">\n                  Starts\n              </label>\n          </div>\n      </div>\n      <div class=\"col-md-6 col-sm-6\">\n          <div class=\"form-check\">\n              <input formControlName=\"search_mode\" class=\"form-check-input\" type=\"radio\" name=\"search_mode\"\n                  id=\"containsRadio\" value=\"contains\">\n              <label class=\"form-check-label\" for=\"containsRadio\">\n                  Contains\n              </label>\n          </div>\n      </div>\n  </div>\n\n  <div class=\"collapse multi-collapse\" id=\"metadataFilterCollapse\">\n  \n      <div class=\"d-flex flex-wrap mt-3\">\n        <div class=\"col-md-12\">\n          <div class=\"form-group row\">\n            <label for=\"inputEmail3\" class=\"col-sm-4 col-form-label\">Date mode:</label>\n            <div class=\"col-sm-8\">\n              <select formControlName=\"date_mode\" class=\"form-control\" name=\"date_mode\">\n                <option value=\"exact\">Exact</option>\n                <option value=\"from\">From</option>\n                <option value=\"until\">Until</option>\n            </select>\n            </div>\n          </div>\n        </div> \n      </div>\n      \n      <div class=\"d-flex flex-wrap\">\n        <div class=\"col-md-12\">\n          <input formControlName=\"import_date\" type=\"datetime-local\" class=\"form-control\"\n                name=\"import_date\" value=\"date\"\n                min=\"2018-06-07T00:00\" [max]=\"date\">\n        </div>\n      </div>\n\n      <div class=\"d-flex flex-wrap mt-3\">\n        <div class=\"col-md-12\">\n          <ng-select #metadata_tags \n            [items]=\"[]\"\n            [addTag]=\"true\"\n            [multiple]=\"true\"\n            [selectOnTab]=\"true\"\n            placeholder=\"Insert metadata tags\"\n            (change)=\"triggerMetadata()\"\n            [isOpen]=\"false\">\n          </ng-select>\n          \n        </div>\n      </div>\n  </div>\n</form>\n\n\n<div class=\"col-md-12 mt-3 rounded border border-secondary tree-view\">\n  <p *ngIf=\"show\">Nessun risultato</p>\n  <tree-root #treeText [nodes]=\"nodes\" [options]=\"options\" [focused]=\"true\" (activate)=\"onEvent($event)\"\n    (moveNode)=\"onMoveNode($event)\">\n    <ng-template #treeNodeTemplate let-node let-index=\"index\">\n      \n      <div *ngIf=\"node.data.rename_mode\" class=\"input-group\">\n        <input autofocus #renameNodeInput class=\"form-control\" type=\"text\" [value]=\"node.data.name\" (keyup)=\"onRenamingNode($event, node, renameNodeInput.value)\" style=\"height: 22px; border-right: transparent;\" />\n        <div class=\"input-group-append input-tooltip\"  data-toggle=\"tooltip\"\n        data-placement=\"top\" data-html=\"true\" title=\"Click enter to rename; Click ESC to exit\">\n          <span class=\"input-group-text\"><i class=\"fas fa-question\"></i></span>\n        </div>\n        <div class=\"input-group-append\">\n          <span class=\"input-group-text loading_icon_append\">\n              <div class=\"spinner-border spinner-border-sm m-1\" role=\"status\" *ngIf=\"searchIconSpinner_input\">\n                  <span class=\"sr-only\">Loading...</span>\n              </div>\n          </span>\n        </div>\n      </div>\n      <div *ngIf=\"!node.data.rename_mode\">\n        <i class=\"far fa-folder\" *ngIf=\"node.data.type == 'directory' && !node.isExpanded\"></i>\n        <i class=\"far fa-folder-open\" *ngIf=\"node.data.type == 'directory' && node.isExpanded\"></i>\n        <i class=\"far fa-file-alt\" *ngIf=\"node.data.type == 'file'\"></i>\n        <span [contextMenu]=\"basicMenu\" [contextMenuSubject]=\"node.data\">\n          {{ node.data.name }}\n        </span>\n      </div>\n      \n    </ng-template>\n  </tree-root>\n  <context-menu>\n\n    <!-- FOLDER CONTEXT MENU -->\n    <ng-template contextMenuItem let-item [visible]=\"isFolder \" (execute)=\"triggerUploader($event.item)\">\n      Add File\n    </ng-template>\n    <ng-template contextMenuItem divider=\"true\" [visible]=\"isFolder\"></ng-template>\n    <ng-template contextMenuItem let-item [visible]=\"isFolder \" (execute)=\"createNewFile($event.item)\">\n      Create new empty File\n    </ng-template>\n    <ng-template contextMenuItem divider=\"true\" [visible]=\"isFolder\"></ng-template>\n    <ng-template contextMenuItem let-item [visible]=\"isFolder \" (execute)=\"addFolder($event.item)\">\n      Add Folder\n    </ng-template>\n    <ng-template contextMenuItem let-item [visible]=\"isFolder \" [enabled]=\"noRoot\" (execute)=\"removeFolder($event.item)\">\n      Delete Folder\n    </ng-template>\n    <ng-template contextMenuItem let-item [visible]=\"isFolder \" [enabled]=\"noRoot\"\n      (execute)=\"renameNode($event.item)\">\n      <span >Rename Folder</span> <!-- (click)=\"renameFolderModel.show();\" -->\n    </ng-template>\n\n    <ng-template contextMenuItem let-item [visible]=\"multipleSelection\" (execute)=\"copyElements()\">\n      Copy Elements\n    </ng-template>\n    <ng-template contextMenuItem let-item [visible]=\"isFolderMultiple\" (execute)=\"pasteElements($event.item)\">\n      Paste Elements\n    </ng-template>\n    <ng-template contextMenuItem divider=\"true\" [visible]=\"multipleSelection\"></ng-template>\n    <ng-template contextMenuItem let-item [visible]=\"multipleSelection\" (execute)=\"removeElements()\">\n      Delete Elements\n    </ng-template>\n    \n\n<!--     <ng-template contextMenuItem divider=\"multipleSelection\" [visible]=\"multipleSelection\"></ng-template>\n -->\n    <!-- FILE CONTEXT MENU -->\n    <ng-template contextMenuItem let-item [visible]=\"isFile\" (execute)=\"copyFile($event.item)\">\n      Copy File\n    </ng-template>\n    <ng-template contextMenuItem let-item [visible]=\"isFolder && selectedFileToCopy != null\"\n      (execute)=\"pasteFile($event.item)\">\n      Paste File\n    </ng-template>\n    <ng-template contextMenuItem let-item [visible]=\"isFile\" (execute)=\"renameNode($event.item)\">\n      <span >Rename File</span> <!-- (click)=\"renameFileModel.show();\" -->\n    </ng-template>\n    <ng-template contextMenuItem let-item [visible]=\"isFile\" (execute)=\"removeFile($event.item)\">\n      Delete File\n    </ng-template>\n    <ng-template contextMenuItem divider=\"isFile\" [visible]=\"isFile\"></ng-template>\n    <ng-template contextMenuItem let-item [visible]=\"isFile\" (execute)=\"downloadFile($event.item)\">\n      Download File\n    </ng-template>\n\n    <!-- <ng-template contextMenuItem [visible]=\"enableMetadata\" divider=\"true\"></ng-template> -->\n    <!-- METADATA -->\n    <!-- <ng-template contextMenuItem let-item [visible]=\"enableMetadata\"  (execute)=\"populateMetadata($event.item)\">\n      <span (click)=\"editMetadata.show();\">Edit Metadata</span>\n    </ng-template> -->\n    <!-- <ng-template contextMenuItem let-item  [visible]=\"enableMetadata\" (execute)=\"copyFile($event.item)\">\n      <span (click)=\"removeMetadataModal.show();\"> Delete Metadata</span>\n    </ng-template> -->\n  </context-menu>\n</div>\n\n<input #uploadFile type=\"file\" accept=\".xml\" hidden (change)=\"addFile($event)\" multiple>\n\n<!-- <app-modal #renameFolderModel class=\"add_languages_modal\">\n  <ng-container class=\"app-modal-header\"></ng-container>\n  <ng-container class=\"app-modal-body\">\n    <div class=\"card\">\n      <div class=\"card-body\">\n        <div class=\"form-group row ml-2 mt-3 mr-2\">\n          <label for=\"inputLabel\" class=\"col-lg-5 col-form-label\" style=\"font-size: 12px;\">Rename Folder:</label>\n          <div class=\"input-group col-lg-7\" style=\"align-items: center;\">\n            <input type=\"text\" class=\"form-control\" placeholder=\"\" #renameFolderInput>\n            <div class=\"input-group-append ml-2\">\n              <button class=\"btn btn-success\" type=\"button\" (click)=\"renameFolder(renameFolderInput.value);\"><i\n                  class=\"fas fa-check\"></i></button>\n            </div>\n            \n            <div class=\"invalid-feedback\" [hidden]=\"validName\" style=\"display: block; font-size: 9px;\">\n              Please, insert at least three characters.\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  </ng-container>\n</app-modal>\n\n<app-modal #renameFileModel class=\"add_languages_modal\">\n  <ng-container class=\"app-modal-header\"></ng-container>\n  <ng-container class=\"app-modal-body\">\n    <div class=\"card\">\n      <div class=\"card-body\">\n        <div class=\"form-group row ml-2 mt-3 mr-2\">\n          <label for=\"inputLabel\" class=\"col-lg-5 col-form-label\" style=\"font-size: 12px;\">Rename File:</label>\n          <div class=\"input-group col-lg-7\" style=\"align-items: center;\">\n            <input type=\"text\" class=\"form-control\" placeholder=\"\" #renameFileInput>\n            <div class=\"input-group-append ml-2\">\n              <button class=\"btn btn-success\" type=\"button\" (click)=\"renameFile(renameFileInput.value);\"><i\n                  class=\"fas fa-check\"></i></button>\n            </div>\n          \n            <div class=\"invalid-feedback\" [hidden]=\"validName\" style=\"display: block; font-size: 9px;\">\n              Please, insert at least three characters.\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  </ng-container>\n</app-modal> -->\n\n<app-modal #editMetadata class=\"add_languages_modal\" [inViewport]=\"true\" (closeModal)=\"onCloseModal()\">\n  <ng-container class=\"app-modal-header\"></ng-container>\n  <ng-container class=\"app-modal-body\">\n    <form [formGroup]=\"metadataForm\">\n      <div class=\"form-group row ml-2 mt-3 mr-2 justify-content-between\">\n        <button class=\"btn btn-primary\" (click)=\"addMetadata()\">Add Metadata <i class=\"fas fa-plus\"></i></button>\n        <button class=\"btn btn-success\" (click)=\"saveMetadata()\"\n          [disabled]=\"!metadataForm.touched || !metadataForm.valid\">Save Metadata <i class=\"fas fa-plus\"></i></button>\n      </div>\n\n      <div class=\"card\">\n        <div class=\"card-body\">\n          <div formArrayName=\"metadata_array\">\n            <div *ngFor=\"let metadata_item of metadataForm.get('metadata_array')['controls']; let i = index\">\n              <div [formGroupName]=\"i\">\n                \n\n\n                <div class=\"d-flex my-2\">\n                  <div class=\"col-md-5\">\n                    <input formControlName=\"key\" name=\"key\" type=\"text\" class=\"form-control\"\n                      placeholder=\"Insert metadata key\">\n                    <div class=\"invalid-feedback\" [hidden]=\"!metadata_item.get('key').invalid\" style=\"display: block; font-size: 9px;\">\n                      \n                      <span *ngIf=\"!metadata_item.get('key').hasError('duplicate')\">\n                        Invalid field\n                      </span>\n                      <span *ngIf=\"metadata_item.get('key').hasError('duplicate')\">\n                        Duplicate field\n                      </span>\n                    </div>\n                  </div>\n                  <div class=\"input-group col-md-7\">\n                    <input formControlName=\"value\" name=\"value\" type=\"text\" class=\"form-control\"\n                      placeholder=\"Insert metadata value\">\n                   \n                    <div class=\"input-group-append ml-2\">\n                      <button class=\"btn btn-danger\" type=\"button\" (click)=\"removeMetadataItem(i)\" style=\"border-radius: 0.25rem;\">\n                        <i class=\"fa fa-trash\"></i>\n                      </button>\n                    </div>\n                    <div class=\"invalid-feedback\" [hidden]=\"!metadata_item.get('value').invalid\" style=\"display: block; font-size: 9px;\">\n                      Invalid field\n                  </div>\n                  </div>\n                </div>\n              </div>\n            </div>\n\n            <div class=\"form-group row ml-2 mt-3 mr-2\"\n              *ngIf=\"metadataForm.get('metadata_array')['controls'].length == 0\">\n              <label for=\"inputLabel\" class=\"col-lg-5 col-form-label font-italic\" style=\"font-size: 12px;\">No\n                metadata</label>\n            </div>\n\n          </div>\n\n        </div>\n      </div>\n    </form>\n\n  </ng-container>\n</app-modal>\n\n<app-modal #removeMetadataModal class=\"remove_languages_modal\" [inViewport]=\"true\" (closeModal)=\"onCloseRemoveMetadata()\">\n  <ng-container class=\"app-modal-header\"></ng-container>\n  <ng-container class=\"app-modal-body\">\n      <div class=\"card\">\n          <div class=\"card-body\">\n              <div class=\"form-group row ml-2 mt-3 mr-2\">\n                  <label for=\"inputLabel\" class=\"col-lg-12 col-form-label\" style=\"font-size: 12px; text-align: center\">Are you sure to delete the metadata of {{selectedFileToCopy?.name}}?</label>\n              </div>\n              <div class=\"form-group row ml-2 mt-3 mr-2 justify-content-md-center\">\n                  <div class=\"input-group col-lg-5 justify-content-md-center\" style=\"align-items: center; text-align: center;\">\n                      <div class=\"input-group-append ml-2\">\n                          <button class=\"btn btn-success\" type=\"button\" (click)=\"deleteMetadata(); removeMetadataModal.hide()\"><i\n                                  class=\"fas fa-check\"></i></button>\n                      </div>\n                      <div class=\"input-group-append ml-2\">\n                          <button class=\"btn btn-danger\" type=\"button\" (click)=\"removeMetadataModal.hide()\"><i\n                                  class=\"fas fa-times\"></i></button>\n                      </div>\n                  </div>\n              </div>\n          </div>\n      </div>\n  </ng-container>\n</app-modal>","/*\n   Copyright 2021-2022  Istituto di Linguistica Computazionale \"A. Zampolli\", Consiglio Nazionale delle Ricerche, Pisa, Italy.\n \nThis file is part of EpiLexo.\n\nEpiLexo is free software: you can redistribute it and/or modify it under the terms of the GNU General Public License as published by the Free Software Foundation, either version 3 of the License, or (at your option) any later version.\n\nEpiLexo is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for more details.\n\nYou should have received a copy of the GNU General Public License along with EpiLexo. If not, see <https://www.gnu.org/licenses/>.\n*/\n\nimport { Component, Input, OnInit, SimpleChanges } from '@angular/core';\nimport { FormArray, FormBuilder, FormControl, FormGroup } from '@angular/forms';\nimport { NgSelectComponent } from '@ng-select/ng-select';\nimport { ToastrService } from 'ngx-toastr';\nimport { Subject, Subscription } from 'rxjs';\nimport { debounceTime } from 'rxjs/operators';\nimport { LexicalEntriesService } from 'src/app/services/lexical-entries/lexical-entries.service';\nimport { DataService, Person } from '../../core-tab/lexical-entry-core-form/data.service';\n\n@Component({\n  selector: 'app-lexical-entry-decomp-form',\n  templateUrl: './lexical-entry-decomp-form.component.html',\n  styleUrls: ['./lexical-entry-decomp-form.component.scss']\n})\nexport class LexicalEntryDecompFormComponent implements OnInit {\n\n  @Input() decData: any;\n  private subterm_subject: Subject<any> = new Subject();\n  private ext_subterm_subject: Subject<any> = new Subject();\n  private corresponds_subject: Subject<any> = new Subject();\n  private update_component_subject: Subject<any> = new Subject();\n  switchInput = false;\n  subscription: Subscription;\n  object: any;\n  people: Person[] = [];\n  searchResults = [];\n  peopleLoading = false;\n  counter = 0;\n  componentRef: any;\n\n  subtermDisabled = false;\n  memorySubterm = [];\n  memoryComponent = [];\n  memoryValues = [];\n\n  decompForm = new FormGroup({\n    label: new FormControl(''),\n    component: new FormArray([this.createComponent()]),\n    subterm: new FormArray([this.createSubtermComponent()])\n  })\n\n  componentArray: FormArray;\n  subtermArray: FormArray;\n\n  staticMorpho = [];\n  morphologyData = [];\n  valueTraits = [];\n\n  disableAddTraits = [];\n\n  constructor(private dataService: DataService, private lexicalService: LexicalEntriesService, private formBuilder: FormBuilder, private toastr: ToastrService) { }\n\n  ngOnInit(): void {\n\n    this.decompForm = this.formBuilder.group({\n      label: '',\n      component: this.formBuilder.array([]),\n      subterm: this.formBuilder.array([]),\n    })\n    this.triggerTooltip();\n    this.loadMorphologyData();\n\n    this.lexicalService.changeDecompLabel$.subscribe(\n      data => {\n        if (data != null) {\n          this.decompForm.get('label').setValue(data, { emitEvent: false });\n        }\n      }\n    )\n\n    this.subterm_subject.pipe(debounceTime(1000)).subscribe(\n      data => {\n        this.onSearchFilter(data)\n      }\n    )\n\n    this.ext_subterm_subject.pipe(debounceTime(1000)).subscribe(\n      data => {\n          this.onChangeSubterm(data)\n      }\n    )\n\n    this.corresponds_subject.pipe(debounceTime(1000)).subscribe(\n      data => {\n        this.onSearchFilter(data)\n      }\n    )\n\n    this.update_component_subject.pipe(debounceTime(1000)).subscribe(\n      data => {\n        this.onChanges(data)\n      }\n    )\n  }\n\n  triggerTooltip() {\n    setTimeout(() => {\n      //@ts-ignore\n      $('.vartrans-tooltip').tooltip({\n        trigger: 'hover'\n      });\n    }, 500);\n  }\n\n  loadMorphologyData() {\n    this.lexicalService.getMorphologyData().subscribe(\n      data => {\n        console.log(data)\n        this.morphologyData = data;\n\n      }\n    )\n  }\n\n  ngOnChanges(changes: SimpleChanges) {\n    setTimeout(() => {\n      if (this.object != changes.decData.currentValue) {\n        if (this.componentArray != null || this.subtermArray != null) {\n          if (this.componentArray != undefined) {\n            this.componentArray.clear();\n\n          }\n\n          if (this.subtermArray != undefined) {\n            this.subtermArray.clear();\n          }\n\n          this.subtermDisabled = false;\n          this.memorySubterm = [];\n          this.memoryComponent = [];\n          /* this.morphologyData = []; */\n          /* this.staticMorpho = []; */\n          this.valueTraits = [];\n          this.memoryValues = [];\n        }\n      }\n      /* this.loadPeople(); */\n      this.object = changes.decData.currentValue;\n      if (this.object != null) {\n        this.decompForm.get('label').setValue(this.object.label, { emitEvent: false });\n\n        //TODO: get subterm inserire memory subterm\n        if (this.object.lexicalEntryInstanceName != undefined && this.object.sense == undefined) {\n          this.lexicalService.getSubTerms(this.object.lexicalEntryInstanceName).subscribe(\n            data => {\n              console.log(data)\n\n              if (data != undefined) {\n\n                Array.from(data).forEach((element: any) => {\n                  this.addSubterm(element.lexicalEntryInstanceName, element.label, element.language);\n                  this.memorySubterm.push(element);\n                })\n              }\n            }, error => {\n              console.log(error)\n            }\n          )\n        }\n\n        //TODO: get constituents inserire memory components\n        if (this.object.lexicalEntryInstanceName != undefined && this.object.sense == undefined) {\n          this.lexicalService.getConstituents(this.object.lexicalEntryInstanceName).subscribe(\n            data => {\n              console.log(data)\n\n              if (data != undefined) {\n                Array.from(data).forEach((element: any) => {\n\n                  this.lexicalService.getCorrespondsTo(element.componentInstanceName).subscribe(\n                    correspondsTo_data => {\n                      console.log(correspondsTo_data);\n\n                      let corr;\n                      if(correspondsTo_data != undefined){\n                        corr = correspondsTo_data.lexicalEntryInstanceName;\n                      }\n                      element.corresponds_to = corr;\n                      this.addComponent(element, Array.from(data).indexOf(element));\n                    }, error => {\n                      console.log(error)\n                    }\n                  )\n\n                  \n\n                });\n              }\n            }, error => {\n              console.log(error)\n            }\n          )\n        }\n\n        //TODO: all'interno dei constituents caricare i dati morfologici\n\n\n      }\n      this.triggerTooltip();\n    }, 10)\n  }\n\n  /* private loadPeople() {\n    this.peopleLoading = true;\n    this.dataService.getPeople().subscribe(x => {\n      this.people = x;\n      this.peopleLoading = false;\n    });\n  } */\n\n  onChanges(data) {\n    let fieldType = '';\n    console.log(data)\n    if (data != undefined) {\n\n      let newValue = data.v.target.value;\n      let currentValue;\n      let index = data?.i;\n\n\n      let oldValue = '';\n      fieldType = data['f']\n      if (fieldType == 'note') {\n        oldValue = this.memoryComponent[index]['note'];\n      } else if (fieldType == 'label') {\n        oldValue = this.memoryComponent[index]['label'];\n      } else if (fieldType == 'confidence') {\n        oldValue = this.memoryComponent[index]['confidence'];\n      }\n\n      //this.biblioArray = this.bibliographyForm.get('bibliography') as FormArray;\n\n\n\n      let instanceName = this.memoryComponent[index].componentInstanceName;\n\n\n      let parameters;\n\n      if (oldValue == '' || oldValue == null) {\n        parameters = {\n          type: \"decomp\",\n          relation: fieldType,\n          value: newValue\n        }\n      } else {\n        parameters = {\n          type: \"decomp\",\n          relation: fieldType,\n          value: newValue,\n          currentValue: oldValue\n        }\n      }\n\n      if (fieldType == 'confidence' && oldValue == \"-1\") {\n        parameters = {\n          type: \"confidence\",\n          relation: fieldType,\n          value: newValue\n        }\n      } else if (fieldType == 'confidence' && oldValue != \"-1\") {\n        parameters = {\n          type: \"confidence\",\n          relation: fieldType,\n          value: newValue,\n          currentValue: oldValue\n        }\n      }\n\n\n\n      //console.log(this.componentArray.at(index))\n      console.log(parameters)\n\n      this.lexicalService.updateGenericRelation(instanceName, parameters).subscribe(\n        data => {\n          console.log(data);\n          this.lexicalService.spinnerAction('off');\n          this.lexicalService.updateLexCard(this.object);\n          this.toastr.success('Component updated', '', {\n            timeOut: 5000,\n          });\n\n          if (fieldType == 'note') {\n            this.memoryComponent[index]['note'] = newValue;\n          } else if (fieldType == 'label') {\n            this.memoryComponent[index]['label'] = newValue;\n          } else if (fieldType == 'confidence') {\n            this.memoryComponent[index]['confidence'] = newValue;\n          }\n        }, error => {\n          console.log(error);\n          this.lexicalService.updateLexCard({ lastUpdate: error.error.text })\n          this.lexicalService.spinnerAction('off');\n          if (error.status == 200) {\n            this.toastr.success('Component item updated', '', {\n              timeOut: 5000,\n            });\n            if (fieldType == 'note') {\n              this.memoryComponent[index]['note'] = newValue;\n              (<FormArray>this.decompForm.controls['component']).at(index).get('note').setValue(newValue, { emitEvent: false });\n            } else if (fieldType == 'label') {\n              this.memoryComponent[index]['label'] = newValue;\n              (<FormArray>this.decompForm.controls['component']).at(index).get('label').setValue(newValue, { emitEvent: false });\n            } else if (fieldType == 'confidence') {\n              this.memoryComponent[index]['confidence'] = newValue;\n              (<FormArray>this.decompForm.controls['component']).at(index).get('confidence').setValue(newValue, { emitEvent: false });\n            }\n          } else {\n            this.toastr.error(error.error, 'Error', {\n              timeOut: 5000,\n            });\n          }\n\n        }\n      )\n\n\n      if (fieldType == 'note') {\n        this.memoryComponent[index]['note'] = newValue;\n      } else if (fieldType == 'label') {\n        this.memoryComponent[index].label = newValue;\n      }\n\n\n\n    }\n  }\n\n  applyUncertain(i) {\n    this.lexicalService.spinnerAction('on');\n    const oldValue = (<FormArray>this.decompForm.controls['component']).at(i).get('confidence').value;\n    let compId = (<FormArray>this.decompForm.controls['component']).at(i).get('id').value;\n    let parameters = {\n      relation: 'confidence',\n      value: oldValue,\n    }\n    console.log(parameters)\n    this.lexicalService.deleteLinguisticRelation(compId, parameters).subscribe(\n      data => {\n        console.log(data);\n        /* data['request'] = 0;\n        data['new_label'] = confidence_value\n        this.lexicalService.refreshAfterEdit(data); */\n        this.lexicalService.updateLexCard(data)\n        this.lexicalService.spinnerAction('off');\n        (<FormArray>this.decompForm.controls['component']).at(i).get('confidence').setValue(-1, { emitEvent: false });\n        this.object.confidence = -1;\n        this.memoryComponent[i]['confidence'] = -1;\n      },\n      error => {\n        console.log(error);\n        /*  const data = this.object.etymology;\n        data['request'] = 0;\n        data['new_label'] = confidence_value;\n        this.lexicalService.refreshAfterEdit(data); */\n        this.lexicalService.spinnerAction('off');\n        this.lexicalService.updateLexCard({ lastUpdate: error.error.text })\n        if (error.status == 200) {\n          this.toastr.success('Confidence updated', '', { timeOut: 5000 })\n          this.decompForm.get('confidence').setValue(-1, { emitEvent: false });\n          this.object.confidence = -1;\n          this.memoryComponent[i]['confidence'] = -1;\n        } else {\n          this.toastr.error(error.error, 'Error', { timeOut: 5000 })\n\n        }\n      }\n    )\n  }\n\n  onChangeValue(i, j) {\n    this.lexicalService.spinnerAction('on');\n    const control = (<FormArray>this.decompForm.controls['component']).at(i).get('relation') as FormArray;\n\n    const trait = control.at(j).get('trait').value;\n    const value = control.at(j).get('value').value;\n\n    if (trait != '' && value != '') {\n      let parameters;\n      if (this.memoryValues[i][j] == \"\") {\n        parameters = {\n          type: \"morphology\",\n          relation: trait,\n          value: value\n        }\n      }\n\n      let compId = this.memoryComponent[i].componentInstanceName;\n\n      if (this.memoryComponent[i].morphology[j] != trait && this.memoryComponent[i].morphology[j] != '') {\n        let delete_old_param = {\n          type: 'morphology',\n          relation: this.memoryComponent[i].morphology[j],\n          value: this.memoryValues[i][j][0]\n        }\n\n        parameters = {\n          type: \"morphology\",\n          relation: trait,\n          value: value,\n        }\n        this.lexicalService.deleteLinguisticRelation(compId, delete_old_param).subscribe(\n          data => {\n            console.log(data);\n\n            this.lexicalService.updateLinguisticRelation(compId, parameters).subscribe(\n              data => {\n                //console.log(data)\n                data['request'] = 0;\n                this.lexicalService.refreshAfterEdit(data);\n                this.lexicalService.spinnerAction('off');\n                this.lexicalService.refreshFilter({ request: true })\n                this.lexicalService.updateLexCard(data)\n\n                this.memoryComponent[i].morphology[j] = trait\n                control.at(j).patchValue({ trait: trait, value: value })\n                this.disableAddTraits[i] = false;\n                setTimeout(() => {\n\n                  let traitDescription = '';\n                  this.morphologyData.filter(x => {\n                    if (x.propertyId == trait  ) {\n                      x.propertyValues.filter(y => {\n                        if (y.valueId == value) {\n                          traitDescription = y.valueDescription;\n                          return true;\n                        } else {\n                          return false;\n                        }\n                      })\n                      return true;\n                    } else {\n                      return false;\n                    }\n                  })\n\n                  //@ts-ignore\n                  $('.trait-tooltip').tooltip({\n                    trigger: 'hover'\n                  });\n\n\n                }, 1000);\n              },\n              error => {\n                //console.log(error)\n                this.lexicalService.refreshAfterEdit({ request: 0, label: this.object.label });\n                this.lexicalService.spinnerAction('off');\n                this.lexicalService.refreshFilter({ request: true })\n                this.lexicalService.updateLexCard({ lastUpdate: error.error.text })\n\n                this.memoryComponent[i].morphology[j] = trait\n                control.at(j).patchValue({ trait: trait, value: value })\n                this.disableAddTraits[i] = false;\n                setTimeout(() => {\n\n                  let traitDescription = '';\n                  this.morphologyData.filter(x => {\n                    if (x.propertyId == trait  ) {\n                      x.propertyValues.filter(y => {\n                        if (y.valueId == value) {\n                          traitDescription = y.valueDescription;\n                          return true;\n                        } else {\n                          return false;\n                        }\n                      })\n                      return true;\n                    } else {\n                      return false;\n                    }\n                  })\n\n\n\n                  //@ts-ignore\n                  $('.trait-tooltip').tooltip({\n                    trigger: 'hover'\n                  });\n                  if (typeof (error.error) != 'object') {\n                    this.toastr.error(error.error, 'Error', {\n                      timeOut: 5000,\n                    });\n                  } else {\n                    this.toastr.success('Morphotraits changed correctly for ' + compId, '', {\n                      timeOut: 5000,\n                    });\n                  }\n\n                }, 1000);\n              }\n            )\n          }, error => {\n            console.log(error);\n          }\n        )\n      } else if (this.memoryComponent[i].morphology[j] == trait && this.memoryComponent[i].morphology[j] != '') {\n        parameters = {\n          type: \"morphology\",\n          relation: trait,\n          value: value,\n          currentValue: this.memoryValues[i][j][0]\n        }\n\n        this.lexicalService.updateLinguisticRelation(compId, parameters).pipe(debounceTime(1000)).subscribe(\n          data => {\n            //console.log(data)\n            data['request'] = 0;\n            this.lexicalService.refreshAfterEdit(data);\n            this.lexicalService.spinnerAction('off');\n            this.lexicalService.refreshFilter({ request: true })\n            this.lexicalService.updateLexCard(data)\n\n            this.memoryComponent[i].morphology[j] = trait\n            control.at(j).patchValue({ trait: trait, value: value })\n            this.disableAddTraits[i] = false;\n            setTimeout(() => {\n\n              let traitDescription = '';\n              this.morphologyData.filter(x => {\n                if (x.propertyId == trait  ) {\n                  x.propertyValues.filter(y => {\n                    if (y.valueId == value) {\n                      traitDescription = y.valueDescription;\n                      return true;\n                    } else {\n                      return false;\n                    }\n                  })\n                  return true;\n                } else {\n                  return false;\n                }\n              })\n\n              //@ts-ignore\n              $('.trait-tooltip').tooltip({\n                trigger: 'hover'\n              });\n\n\n            }, 1000);\n          },\n          error => {\n            //console.log(error)\n            this.lexicalService.refreshAfterEdit({ request: 0, label: this.object.label });\n            this.lexicalService.spinnerAction('off');\n            this.lexicalService.refreshFilter({ request: true })\n            this.lexicalService.updateLexCard({ lastUpdate: error.error.text })\n\n            this.memoryComponent[i].morphology[j] = trait\n            control.at(j).patchValue({ trait: trait, value: value })\n            this.disableAddTraits[i] = false;\n            setTimeout(() => {\n\n              let traitDescription = '';\n              this.morphologyData.filter(x => {\n                if (x.propertyId == trait  ) {\n                  x.propertyValues.filter(y => {\n                    if (y.valueId == value) {\n                      traitDescription = y.valueDescription;\n                      return true;\n                    } else {\n                      return false;\n                    }\n                  })\n                  return true;\n                } else {\n                  return false;\n                }\n              })\n\n\n\n              //@ts-ignore\n              $('.trait-tooltip').tooltip({\n                trigger: 'hover'\n              });\n              if (typeof (error.error) != 'object') {\n                this.toastr.error(error.error, 'Error', {\n                  timeOut: 5000,\n                });\n              } else {\n                this.toastr.success('Morphotraits changed correctly for ' + compId, '', {\n                  timeOut: 5000,\n                });\n              }\n\n            }, 1000);\n          }\n        )\n\n      } else if (this.memoryComponent[i].morphology[j] == '') {\n        console.log(parameters)\n        this.lexicalService.updateLinguisticRelation(compId, parameters).pipe(debounceTime(1000)).subscribe(\n          data => {\n            //console.log(data)\n            data['request'] = 0;\n            this.lexicalService.refreshAfterEdit(data);\n            this.lexicalService.spinnerAction('off');\n            this.lexicalService.refreshFilter({ request: true })\n            this.lexicalService.updateLexCard(data)\n\n            this.memoryComponent[i].morphology[j] = trait\n            control.at(j).patchValue({ trait: trait, value: value })\n            this.disableAddTraits[i] = false;\n            setTimeout(() => {\n\n              let traitDescription = '';\n              this.morphologyData.filter(x => {\n                if (x.propertyId == trait  ) {\n                  x.propertyValues.filter(y => {\n                    if (y.valueId == value) {\n                      traitDescription = y.valueDescription;\n                      return true;\n                    } else {\n                      return false;\n                    }\n                  })\n                  return true;\n                } else {\n                  return false;\n                }\n              })\n\n              //@ts-ignore\n              $('.trait-tooltip').tooltip({\n                trigger: 'hover'\n              });\n\n\n            }, 1000);\n          },\n          error => {\n            //console.log(error)\n            this.lexicalService.refreshAfterEdit({ request: 0, label: this.object.label });\n            this.lexicalService.spinnerAction('off');\n            this.lexicalService.refreshFilter({ request: true })\n            this.lexicalService.updateLexCard({ lastUpdate: error.error.text })\n\n            this.memoryComponent[i].morphology[j] = trait\n            control.at(j).patchValue({ trait: trait, value: value })\n            this.disableAddTraits[i] = false;\n            setTimeout(() => {\n\n              let traitDescription = '';\n              this.morphologyData.filter(x => {\n                if (x.propertyId == trait  ) {\n                  x.propertyValues.filter(y => {\n                    if (y.valueId == value) {\n                      traitDescription = y.valueDescription;\n                      return true;\n                    } else {\n                      return false;\n                    }\n                  })\n                  return true;\n                } else {\n                  return false;\n                }\n              })\n\n\n\n              //@ts-ignore\n              $('.trait-tooltip').tooltip({\n                trigger: 'hover'\n              });\n              if (typeof (error.error) != 'object') {\n                this.toastr.error(error.error, 'Error', {\n                  timeOut: 5000,\n                });\n              } else {\n                this.toastr.success('Morphotraits changed correctly for ' + compId, '', {\n                  timeOut: 5000,\n                });\n              }\n\n            }, 1000);\n          }\n        )\n      }\n\n\n    } else {\n      this.lexicalService.spinnerAction('off');\n      this.disableAddTraits[i] = false;\n    }\n  }\n\n  onChangeTrait(evt, i, j) {\n\n    if (evt.target != undefined) {\n      setTimeout(() => {\n        const control = (<FormArray>this.decompForm.controls['component']).at(i).get('relation') as FormArray;\n        //const trait = control.at(j).get('trait').value;\n        //const value = control.at(j).get('value').value;\n        //this.componentArray = this.decompForm.get('component') as FormArray;\n        control.at(j).patchValue({ trait: evt.target.value, value: \"\" });\n        if (evt.target.value != '') {\n          let arrayValues = this.morphologyData.filter(x => {\n            return x['propertyId'] == evt.target.value;\n          })['0']['propertyValues'];\n          this.valueTraits[i][j] = arrayValues;\n          //this.memoryComponent[i].morphology[j] = evt.target.value;\n          //this.memoryValues[i][j] = \"\";\n        } else {\n          this.memoryValues.splice(i, 1);\n          let arrayValues = [];\n          this.valueTraits[i][j] = arrayValues\n          this.memoryComponent[i]['morphology'][j].splice(j, 1)\n        }\n      }, 500);\n    } else {\n\n      var that = this;\n      var timer = setInterval((val) => {\n\n        try {\n          var arrayValues = this.morphologyData.filter(x => {\n            return x['propertyId'] == evt;\n          })['0']['propertyValues'];\n          this.valueTraits[i][j] = arrayValues;\n          this.memoryComponent[i].morphology[j].push(evt);\n          clearInterval(timer)\n        } catch (e) {\n          console.log(e)\n        }\n\n\n      }, 500)\n\n    }\n  }\n\n  addSubterm(e?, label?, lang?) {\n    this.subtermArray = this.decompForm.get('subterm') as FormArray;\n\n    if (e != undefined) {\n      this.subtermArray.push(this.createSubtermComponent(e, label, lang));\n      this.subtermDisabled = false;\n    } else {\n      this.subtermArray.push(this.createSubtermComponent());\n      this.subtermDisabled = true;\n    }\n\n\n  }\n\n  addComponent(element?, index?) {\n\n    if (this.object.lexicalEntryInstanceName != undefined && element == undefined) {\n      let instance = this.object.lexicalEntryInstanceName;\n      this.object['request'] = 'constituent'\n      this.lexicalService.createComponent(instance).subscribe(\n        data => {\n          console.log(data)\n\n          //TODO: assegnare id a componente\n          let compId = data.componentInstanceName;\n          let componentURI = data.component;\n          let creator = data.creator;\n          let label = '';\n          let creationDate = data.creationDate;\n          let lastUpdate = data.lastUpdate;\n          let morphology = data.morphology;\n          let note = '';\n          let position = data.position;\n\n          let confidence = data.confidence;\n\n          this.lexicalService.addSubElementRequest({ 'lex': this.object, 'data': data });\n\n          this.componentArray = this.decompForm.get('component') as FormArray;\n          this.componentArray.push(this.createComponent(compId, componentURI, confidence, creator, label, creationDate, lastUpdate, [], note, position));\n\n          data['morphology'] = [];\n          this.memoryComponent.push(data)\n\n          this.toastr.success('Component created correctly', 'Success', {\n            timeOut: 5000\n          })\n        }, error => {\n          console.log(error);\n\n          this.toastr.error('Something went wrong', 'Error', {\n            timeOut: 5000\n          })\n        }\n      )\n    } else if (element != undefined) {\n      let compId = element.componentInstanceName;\n      let componentURI = element.component;\n      let creator = element.creator;\n      let label = element.label;\n      let creationDate = element.creationDate;\n      let lastUpdate = element.lastUpdate;\n      let note = element.note;\n      let position = element.position;\n      let corr_to = element.corresponds_to;\n      let confidence = element.confidence;\n\n      this.componentArray = this.decompForm.get('component') as FormArray;\n      this.componentArray.push(this.createComponent(compId, componentURI, confidence, creator, label, creationDate, lastUpdate, [], note, position, corr_to));\n\n      let morphology = element.morphology;\n      element.morphology = [];\n\n      this.memoryComponent.push(element)\n\n      if (morphology.length > 0) {\n        this.addRelation(index, morphology);\n      }\n\n\n    }\n  }\n\n  removeComponent(index) {\n    this.componentArray = this.decompForm.get('component') as FormArray;\n    const control = this.componentArray.at(index);\n\n    if (control != null) {\n      let idComp = control.get('id').value;\n\n      this.lexicalService.deleteComponent(idComp).subscribe(\n        data => {\n          console.log(data)\n          this.lexicalService.deleteRequest({ componentInstanceName: idComp });\n          this.toastr.info('Component ' + idComp + ' deleted', 'Info', {\n            timeOut: 5000\n          })\n        }, error => {\n          console.log(error);\n          this.lexicalService.deleteRequest({ componentInstanceName: idComp });\n          this.toastr.error('Something went wrong', 'Error', {\n            timeOut: 5000\n          })\n        }\n      )\n    }\n\n\n\n    this.memoryComponent.splice(index, 1)\n    this.componentArray.removeAt(index);\n  }\n\n  addRelation(index, morphologyArray?) {\n\n    if (morphologyArray == undefined) {\n      this.memoryComponent[index].morphology.push('');\n\n      if (this.valueTraits[index] == undefined) {\n        this.valueTraits[index] = [];\n        this.valueTraits[index].push([])\n      } else {\n        this.valueTraits[index].push([])\n      }\n\n      if (this.memoryValues[index] == undefined) {\n        this.memoryValues[index] = [];\n        this.memoryValues[index].push([]);\n      } else {\n        this.memoryValues[index].push([]);\n      }\n\n      if (this.disableAddTraits[index] == undefined) {\n        this.disableAddTraits[index] = true;\n      } else {\n        this.disableAddTraits[index] = true;\n      }\n\n\n      const control = (<FormArray>this.decompForm.controls['component']).at(index).get('relation') as FormArray;\n      control.push(this.createRelation());\n    } else {\n\n      morphologyArray.forEach(element => {\n        this.memoryComponent[index].morphology.push(element.trait);\n\n        if (this.valueTraits[index] == undefined) {\n          this.valueTraits[index] = [];\n          var timer1 = setInterval((val) => {\n\n            try {\n              var arrayValues = this.morphologyData.filter(x => {\n                return x['propertyId'] == element.trait;\n              })['0']['propertyValues'];\n              this.valueTraits[index].push(arrayValues);\n              clearInterval(timer1)\n            } catch (e) {\n              console.log(e)\n            }\n\n\n          }, 500)\n\n\n\n\n        } else {\n          var timer2 = setInterval((val) => {\n\n            try {\n              var arrayValues = this.morphologyData.filter(x => {\n                return x['propertyId'] == element.trait;\n              })['0']['propertyValues'];\n              this.valueTraits[index].push(arrayValues);\n              clearInterval(timer2)\n            } catch (e) {\n              console.log(e)\n            }\n\n\n          }, 500)\n\n        }\n\n        if (this.memoryValues[index] == undefined) {\n          this.memoryValues[index] = [];\n          this.memoryValues[index].push([element.value]);\n        } else {\n          this.memoryValues[index].push([element.value]);\n        }\n\n        if (this.disableAddTraits[index] == undefined) {\n          this.disableAddTraits[index] = false;\n        } else {\n          this.disableAddTraits[index] = false;\n        }\n\n\n        const control = (<FormArray>this.decompForm.controls['component']).at(index).get('relation') as FormArray;\n        control.push(this.createRelation(element.trait, element.value));\n      });\n\n    }\n\n\n\n\n  }\n\n  removeRelation(ix, iy) {\n    const control = (<FormArray>this.decompForm.controls['component']).at(ix).get('relation') as FormArray;\n    const trait = control.at(iy).get('trait').value;\n    const value = control.at(iy).get('value').value;\n    if (trait != '' && value != '') {\n\n      let compId = this.memoryComponent[ix].componentInstanceName;;\n\n      let parameters = {\n        type: 'morphology',\n        relation: trait,\n        value: value\n      }\n\n      //console.log(parameters)\n\n      this.lexicalService.deleteLinguisticRelation(compId, parameters).subscribe(\n        data => {\n          //console.log(data)\n          this.lexicalService.updateLexCard(this.object)\n          this.lexicalService.refreshAfterEdit({ request: 0, label: this.object.label });\n          this.lexicalService.spinnerAction('off');\n          this.lexicalService.refreshFilter({ request: true })\n        }, error => {\n          //console.log(error)\n          this.lexicalService.refreshAfterEdit({ request: 0, label: this.object.label });\n          this.lexicalService.spinnerAction('off');\n          this.lexicalService.refreshFilter({ request: true })\n          this.lexicalService.updateLexCard({ lastUpdate: error.error.text })\n          if (typeof (error.error) != 'object') {\n            this.toastr.error(error.error, 'Error', {\n              timeOut: 5000,\n            });\n          } else {\n            this.toastr.success('Element removed correctly for ' + compId, '', {\n              timeOut: 5000,\n            });\n          }\n        }\n      )\n    } else {\n      this.disableAddTraits[ix] = false;\n    }\n\n\n    this.memoryComponent[ix].morphology.splice(iy, 1);\n    this.valueTraits[ix].splice(iy, 1);\n    this.memoryValues[ix].splice(iy, 1);\n    control.removeAt(iy);\n\n\n  }\n\n\n\n  triggerSubterm(evt) {\n    console.log(evt)\n    if (evt.target != undefined) {\n\n      this.subterm_subject.next(evt.target.value)\n    }\n  }\n\n  triggerCorrespondsTo(evt) {\n    console.log(evt)\n    if (evt.target != undefined) {\n\n      this.corresponds_subject.next(evt.target.value)\n    }\n  }\n\n  removeSubterm(index) {\n\n\n    if (this.object.lexicalEntryInstanceName != undefined) {\n      this.subtermArray = this.decompForm.get('subterm') as FormArray;\n\n      let entity = this.subtermArray.at(index).get('entity').value;\n      let lexId = this.object.lexicalEntryInstanceName;\n\n      let parameters = {\n        relation: \"subterm\",\n        value: entity\n      }\n\n      this.lexicalService.deleteLinguisticRelation(lexId, parameters).subscribe(\n        data => {\n          console.log(data);\n          this.toastr.info('Subterm removed correctly', 'Info', {\n            timeOut: 5000\n          })\n          this.lexicalService.deleteRequest({ subtermInstanceName: entity, parentNode : this.object.lexicaleEntryInstanceName });\n        }, error => {\n          console.log(error)\n          this.toastr.info('Subterm removed correctly', 'Info', {\n            timeOut: 5000\n          })\n          this.lexicalService.deleteRequest({ subtermInstanceName: entity, parentNode : this.object.lexicaleEntryInstanceName });\n        }\n      )\n\n\n    }\n\n    this.subtermArray.removeAt(index);\n    this.memorySubterm.splice(index, 1);\n    this.subtermDisabled = false;\n  }\n\n  createRelation(t?, v?) {\n    if (t == undefined) {\n      return this.formBuilder.group({\n        trait: '',\n        value: ''\n      })\n    } else {\n      return this.formBuilder.group({\n        trait: t,\n        value: v\n      })\n    }\n\n  }\n\n  /* removeSubtermComponent(ix, iy) {\n    const control = (<FormArray>this.decompForm.controls['component']).at(ix).get('sub_term') as FormArray;\n    control.removeAt(iy);\n  } */\n\n  removeCorrespondsToComponent(ix, iy) {\n    const control = (<FormArray>this.decompForm.controls['component']).at(ix).get('corresponds_to') as FormArray;\n    control.removeAt(iy);\n  }\n\n  createComponent(compId?, componentURI?, confidence?, creator?, label?, creationDate?, lastUpdate?, morphology?, note?, position?, corr_to?) {\n    if (compId == undefined) {\n      return this.formBuilder.group({\n        id: new FormControl(''),\n        uri: new FormControl(''),\n        confidence: new FormControl(null),\n        creator: new FormControl(''),\n        label: new FormControl(''),\n        creationDate: new FormControl(''),\n        lastUpdate: new FormControl(''),\n        relation: new FormArray([]),\n        note: new FormControl(''),\n        corresponds_to: new FormControl(''),\n        position: new FormControl('')\n      })\n    } else {\n      return this.formBuilder.group({\n        id: new FormControl(compId),\n        uri: new FormControl(componentURI),\n        confidence: new FormControl(confidence),\n        creator: new FormControl(creator),\n        label: new FormControl(label),\n        creationDate: new FormControl(creationDate),\n        lastUpdate: new FormControl(lastUpdate),\n        relation: new FormArray([]),\n        note: new FormControl(note),\n        corresponds_to: new FormControl(corr_to),\n        position: new FormControl(position)\n      })\n    }\n\n  }\n\n  createSubtermComponent(e?, l?, lang?) {\n    if (e != undefined) {\n      return this.formBuilder.group({\n        entity: e,\n        label: l,\n        language: lang\n      })\n    } else {\n      return this.formBuilder.group({\n        entity: '',\n        label: '',\n        language: ''\n      })\n    }\n\n  }\n\n  /* createSubterm(e?) {\n    if(e != undefined){\n\n    }else{\n\n    }\n    return this.formBuilder.group({\n      subterm_array: new FormArray([this.createSubtermComponent()])\n    })\n  } */\n  \n\n  handleSubterm(evt, i) {\n\n    if (evt instanceof NgSelectComponent) {\n      if (evt.selectedItems.length > 0) {\n        console.log(evt.selectedItems[0])\n        let label = evt.selectedItems[0]['value']['lexicalEntryInstanceName'];\n        this.onChangeSubterm({ name: label, i: i, object: evt.selectedItems[0]['value'] })\n      }\n    } else {\n        let label = evt.target.value;\n        this.ext_subterm_subject.next({ name: label, i: i })\n    }\n  }\n\n  handleCorrespondsTo(evt, i) {\n\n    if (evt instanceof NgSelectComponent) {\n      if (evt.selectedItems.length > 0) {\n        console.log(evt.selectedItems[0])\n        let label = evt.selectedItems[0]['value']['lexicalEntryInstanceName'];\n        this.onChangeCorrespondsTo({ name: label, i: i })\n      }\n    } /* else {\n        let label = evt.target.value;\n        this.Subterm_subject.next({ name: label, i: i })\n    } */\n  }\n\n  debounceKeyup(evt, index, field) {\n    this.update_component_subject.next({ v: evt, i: index, f: field })\n  }\n\n  onChangeSubterm(data) {\n    var index = data['i'];\n    this.subtermArray = this.decompForm.get(\"subterm\") as FormArray;\n    if (this.memorySubterm[index] == undefined) {\n      const newValue = data['name']\n      const parameters = {\n        type: \"decomp\",\n        relation: \"subterm\",\n        value: newValue\n      }\n      console.log(parameters)\n\n      this.object['request'] = 'subterm'\n      let lexId = this.object.lexicalEntryInstanceName;\n      this.lexicalService.updateLinguisticRelation(lexId, parameters).subscribe(\n        data => {\n          console.log(data);\n          this.lexicalService.spinnerAction('off');\n          /* data['request'] = 0;\n          this.lexicalService.refreshAfterEdit(data); */\n          this.lexicalService.updateLexCard(data)\n          this.memorySubterm[index] = data;\n\n          this.subtermArray.at(index).patchValue({ entity: data.object.label, label: data['label'], language: data['language'] })\n          this.subtermDisabled = false;\n          //TODO: metodo per popolare dinamicamente albero\n\n          this.lexicalService.addSubElementRequest({ 'lex': this.object, 'data': data });\n        }, error => {\n          console.log(error)\n\n          \n          this.lexicalService.spinnerAction('off');\n          if (error.status == 200) {\n\n            this.toastr.success('Subterm changed correctly for ' + lexId, '', {\n              timeOut: 5000,\n            });\n\n            this.subtermDisabled = false;\n            this.memorySubterm[index] = data.object;\n            data['request'] = 'subterm';\n            this.subtermArray.at(index).patchValue({ entity: newValue, label: data.object.label, language: data.object.language })\n            this.lexicalService.addSubElementRequest({ 'lex': this.object, 'data': data['object'] });\n            this.lexicalService.updateLexCard({ lastUpdate: error.error.text })\n\n          } else {\n            this.toastr.error(error.error, 'Error', {\n              timeOut: 5000,\n            });\n\n          }\n        }\n      )\n\n\n\n    } else {\n      const oldValue = this.memorySubterm[index]['lexicalEntryInstanceName']\n      const newValue = data['name']\n      const parameters = {\n        type: \"decomp\",\n        relation: \"subterm\",\n        value: newValue,\n        currentValue: oldValue\n      }\n\n      let lexId = this.object.lexicalEntryInstanceName;\n      console.log(parameters)\n      this.lexicalService.updateLinguisticRelation(lexId, parameters).subscribe(\n        data => {\n          console.log(data);\n          this.lexicalService.spinnerAction('off');\n          this.lexicalService.updateLexCard(data)\n          data['request'] = 0;\n          this.lexicalService.refreshAfterEdit(data);\n        }, error => {\n          console.log(error)\n          const data = this.object;\n          data['request'] = 0;\n\n          //TODO: metodo per modificare dinamicamente subterm albero sx\n\n          //this.lexicalService.refreshAfterEdit(data);\n          this.lexicalService.updateLexCard({ lastUpdate: error.error.text })\n          this.lexicalService.spinnerAction('off');\n          if (error.status == 200) {\n            this.toastr.success('Label changed correctly for ' + lexId, '', {\n              timeOut: 5000,\n            });\n          } else {\n            this.toastr.error(error.error, 'Error', {\n              timeOut: 5000,\n            });\n          }\n        }\n      )\n      this.memorySubterm[index] = data;\n    }\n\n\n  }\n\n\n  onChangeCorrespondsTo(data) {\n    var index = data['i'];\n    this.subtermArray = this.decompForm.get(\"subterm\") as FormArray;\n    if (this.memoryComponent[index].corresponds_to == undefined) {\n      const newValue = data['name']\n      const parameters = {\n        type: \"decomp\",\n        relation: \"correspondsTo\",\n        value: newValue\n      }\n      console.log(parameters)\n      let compId = this.memoryComponent[index].componentInstanceName;\n      this.lexicalService.updateLinguisticRelation(compId, parameters).subscribe(\n        data => {\n          console.log(data);\n          this.lexicalService.spinnerAction('off');\n          /* data['request'] = 0;\n          this.lexicalService.refreshAfterEdit(data); */\n          this.lexicalService.updateLexCard(data)\n        }, error => {\n          console.log(error)\n\n          /* this.toastr.error(error.error, 'Error', {\n              timeOut: 5000,\n          }); */\n          this.lexicalService.updateLexCard({ lastUpdate: error.error.text })\n          this.lexicalService.spinnerAction('off');\n          if (error.status == 200) {\n            this.toastr.success('CorrespondsTo changed correctly for ' + compId, '', {\n              timeOut: 5000,\n            });\n\n          } else {\n            this.toastr.error(error.error, 'Error', {\n              timeOut: 5000,\n            });\n\n          }\n        }\n      )\n      this.memoryComponent[index].corresponds_to = data;\n\n\n    } else {\n      const oldValue = this.memoryComponent[index].corresponds_to\n      const newValue = data['name']\n      const parameters = {\n        type: \"decomp\",\n        relation: \"correspondsTo\",\n        value: newValue,\n        currentValue: oldValue\n      }\n\n      let compId = this.memoryComponent[index].componentInstanceName;\n      console.log(parameters)\n      this.lexicalService.updateLinguisticRelation(compId, parameters).subscribe(\n        data => {\n          console.log(data);\n          this.lexicalService.spinnerAction('off');\n          this.lexicalService.updateLexCard(data)\n          data['request'] = 0;\n          this.lexicalService.refreshAfterEdit(data);\n        }, error => {\n          console.log(error)\n          /* const data = this.object;\n          data['request'] = 0; */\n\n          //this.lexicalService.refreshAfterEdit(data);\n          this.lexicalService.updateLexCard({ lastUpdate: error.error.text })\n          this.lexicalService.spinnerAction('off');\n          if (error.status == 200) {\n            this.toastr.success('Label changed correctly for ' + compId, '', {\n              timeOut: 5000,\n            });\n          } else {\n            this.toastr.error(error.error, 'Error', {\n              timeOut: 5000,\n            });\n          }\n        }\n      )\n      this.memoryComponent[index].corresponds_to = data;\n    }\n\n\n  }\n\n  onSearchFilter(data) {\n    this.searchResults = [];\n\n    if (this.object.lexicalEntryInstanceName != undefined) {\n      let parameters = {\n        text: data,\n        searchMode: \"startsWith\",\n        type: \"\",\n        pos: \"\",\n        formType: \"entry\",\n        author: \"\",\n        lang: \"\",\n        status: \"\",\n        offset: 0,\n        limit: 500\n      }\n\n      /* && data.length >= 3 */\n      this.lexicalService.getLexicalEntriesList(parameters).subscribe(\n        data => {\n          console.log(data)\n\n\n          this.searchResults = data['list'];\n\n        }, error => {\n          console.log(error)\n        }\n      )\n\n    } else {\n    }\n\n  }\n\n  deleteData() {\n    this.searchResults = [];\n  }\n\n}\n","\n\n<form [formGroup]=\"decompForm\" *ngIf=\"object!=null\">\n    <div class=\"form-group row ml-2 mt-3 mr-2\">\n        <label for=\"inputLabel\" class=\"col-xl-3 col-form-label\">Label:</label>\n        <div class=\"input-group col-xl-5\">\n            <input formControlName=\"label\" name=\"label\" type=\"text\" class=\"form-control\" placeholder=\"\" disabled>\n            <div class=\"input-group-append\">\n                <div class=\"input-group-append ml-2\">\n                    <div class=\"dropdown\">\n                        <button class=\"btn btn-outline-primary\" type=\"button\" id=\"dropdownMenuButton\" data-toggle=\"dropdown\" aria-haspopup=\"true\" aria-expanded=\"false\">\n                            <i class=\"fa fa-plus\"></i>\n                        </button>\n                        <div class=\"dropdown-menu\" aria-labelledby=\"dropdownMenuButton\">\n                          <!-- <a class=\"dropdown-item\" (click)=\"addSubterm()\" [class.disabled]=\"subtermDisabled\" style=\"cursor: pointer;\">Sub Term</a> -->\n                          <a class=\"dropdown-item\" (click)=\"addComponent()\" style=\"cursor: pointer;\">Component</a>\n                        </div>\n                      </div>\n                </div>\n            </div>\n        </div>\n    </div>\n\n    <!-- COMPONENT -->\n    <div formArrayName=\"component\">\n        <div *ngFor=\"let comp of decompForm['controls'].component['controls']; let i = index\">\n            <div [formGroupName]=\"i\">\n                <div class=\"form-group row ml-2 mt-3 mr-2\">\n                    <div class=\"input-group col-xl-12\">\n                        <div class=\"card\">\n                            <span class=\"text-id\"><b>COMPONENT</b></span>\n                            <!-- <a class=\"pointer\" (click)=\"addRelation(i)\"><span class=\"add-icon\"><i class=\"fa fa-plus-square\"></i></span></a> -->\n                            <a class=\"pointer\" (click)=\"removeComponent(i)\"><span class=\"trash-icon\"><i class=\"fa fa-trash\"></i></span></a>\n                            <div class=\"card-body\">\n\n                                <div class=\"form-group row ml-2 mt-3 mr-2\">\n                                    <label for=\"inputLabel\" class=\"col-lg-3 col-form-label\">Label:</label>\n                                    <div class=\"input-group col-lg-8\">\n                                        <input id=\"label\" (keyup)=\"debounceKeyup($event, i, 'label')\" formControlName=\"label\" name=\"label\" type=\"text\" class=\"form-control\" placeholder=\"\"\n                                            required>\n                                        <!-- <div class=\"invalid-feedback\" *ngIf=\"emptyLabelFlag\" style=\"display: block;\">\n                                            Please, insert at least three characters.\n                                        </div> -->\n                                    </div>\n                                </div>\n\n                                <div class=\"form-group row ml-2 mr-2\">\n                                    <label for=\"inputLabel\" class=\"col-lg-3 col-form-label\">Note:</label>\n                                    <div class=\"input-group col-lg-8\">\n                                        <!-- <input id=\"note\"  formControlName=\"note\" name=\"note\" type=\"text\" class=\"form-control\" placeholder=\"\"> -->\n                                        <textarea (keyup)=\"debounceKeyup($event, i, 'note')\" formControlName=\"note\" name=\"note\" class=\"form-control\" style=\"resize: none;\"></textarea>\n                                    </div>\n                                </div>  \n\n                                <div class=\"form-group row ml-2 mt-3 mr-2\" *ngIf=\"{confidence : comp.get('confidence').value >= 0}; let variable\">\n                                    <div class=\"col-lg-3\">\n                                        <label for=\"uncertainBox\">Uncertain</label>\n                                    </div>\n                                    <div class=\"col-lg-3 input-group\">\n                                        <input (change)=\"debounceKeyup($event, i, 'confidence')\" (keyup)=\"debounceKeyup($event, i, 'confidence')\" *ngIf=\"variable.confidence\" id=\"attributes\"  step=\"0.1\" formControlName=\"confidence\" name=\"confidence\" type=\"number\" min=\"0\" max=\"1\" class=\"form-control\" placeholder=\"No info\" [value]=\"comp.get('confidence').value\">\n                                        <button type=\"button\" class=\"btn btn-secondary rounded-circle ml-2\" *ngIf=\"!variable.confidence\" (click)=\"variable.confidence = !variable.confidence\"><i class=\"fas fa-plus\"></i></button>\n                                        <button type=\"button\" class=\"btn btn-secondary rounded-circle ml-2\" *ngIf=\"variable.confidence\" (click)=\"variable.confidence = !variable.confidence; applyUncertain(i)\"><i class=\"fas fa-minus\"></i></button>\n                                    </div>\n                                </div>\n\n                                <!-- CORRESPONDS TO -->\n                                <div class=\"form-group row ml-2 mt-3 mr-2\">\n                                    <label for=\"inputLabel\" class=\"col-lg-3 col-form-label\">Corresponds To:</label>\n                                    <div class=\"input-group col-lg-9\">\n                                        <ng-select #select_corresponds_to formControlName=\"corresponds_to\" name=\"corresponds_to\" [dropdownPosition]=\"'top'\"\n                                        (keyup)=\"triggerCorrespondsTo($event)\" (change)=\"handleCorrespondsTo(select_corresponds_to, i)\"\n                                        [items]=\"searchResults\" bindValue=\"label\" (focus)=\"deleteData()\" bindLabel=\"label\"\n                                        placeholder=\"Search lexical entry\" appendTo=\"body\">\n                                            <ng-template ng-option-tmp let-item=\"item\" let-search=\"searchTerm\">\n                                                <div>\n                                                    <span>{{item.label}} </span><span style=\"color: blue;\">@{{item.language}}</span>\n                                                </div>\n\n                                            </ng-template>\n                                        </ng-select>\n                                        <!-- <input formControlName=\"entity\" name=\"entity\" type=\"text\" class=\"form-control\" id=\"inputDenotes\" placeholder=\"Insert URI\" *ngIf=\"variable.switch\"> -->\n                                        <!-- <div class=\"input-group-append ml-3 form-check\">\n                                            <input class=\"form-check-input vartrans-tooltip\" type=\"checkbox\" (change)=\"variable.switch=!variable.switch\" data-toggle=\"tooltip\" data-placement=\"bottom\" data-trigger=\"hover\" title=\"Clicca per inserire un URI manualmente\">\n                                        </div> -->\n                                        <div class=\"input-group-append ml-2\">\n                                            <button class=\"btn btn-primary\" type=\"button\"><i\n                                                    class=\"fa fa-external-link-alt\"></i></button>\n                                        </div>\n                                        <!-- <div class=\"input-group-append ml-2\">\n                                            <button (click)=\"removeCorrespondsToComponent(i, j)\" class=\"btn btn-danger\" type=\"button\"><i class=\"fa fa-trash-alt\"></i></button>\n                                        </div> -->\n                                        <div class=\"input-group-append ml-2\">\n                                            <button (click)=\"addRelation(i)\" [ngClass]=\"{no_pointer: disableAddTraits[i]}\" class=\"btn btn-outline-primary\" type=\"button\">\n                                                <i class=\"fa fa-plus\"></i>\n                                            </button>\n                                        </div>\n                                    </div>\n                                </div>\n\n                              \n            \n                                <ng-container formArrayName=\"relation\"\n                                    *ngFor=\"let sub of comp['controls'].relation['controls']; let j = index\">\n                                    <div class=\"d-flex my-2\" *ngIf=\"j +1 > staticMorpho.length\">\n                                        <div class=\"col-md-4\" [formGroupName]=\"j\">\n                                            <select class=\"form-control selectTrait\" formControlName=\"trait\" name=\"trait\"\n                                                style=\"font-size: 12px;\" (change)=\"onChangeTrait($event, i, j)\">\n                                                <option value=\"\">Select a trait...</option>\n                                                <option *ngFor=\"let mt of morphologyData\"\n                                                    [selected]=\"sub.value['trait'] === mt.propertyId\"\n                                                    [disabled]=\"memoryComponent[i].morphology.indexOf(mt.propertyId) > -1 \">{{mt.propertyId}}</option>\n                                            </select>\n                                            <div class=\"invalid-feedback\" *ngIf=\"sub.get('trait').invalid\"\n                                                style=\"display: block;\">\n                                                Please, don't leave this field blank\n                                            </div>\n                                        </div>\n                                        <!-- {{valueTraits | json}} -->\n                                        <div class=\"input-group col-md-8\" [formGroupName]=\"j\">\n                                            <!-- {{valueTraits | json}} {{i}} {{j}} -->\n                                            <select class=\"form-control selectTrait\" formControlName=\"value\" name=\"value\"\n                                                style=\"font-size:12px;\" (change)=\"onChangeValue(i, j)\">\n                                                <option value=\"\">Select a value...</option>\n                                                <option *ngFor=\"let item of valueTraits[i][j];\" [attr.data-index]=\"j\"\n                                                    [selected]=\"sub.value['value'] === item.valueId\">{{item.valueId}}</option>\n                                            </select>\n                                            <div (click)=\"removeRelation(i, j)\" class=\"input-group-append ml-2\"> <button\n                                                    class=\"btn btn-danger\" type=\"button\"\n                                                    style=\"font-size: 12px; border-radius: .25rem;\"><i\n                                                        class=\"fa fa-trash-alt\"></i></button>\n                                            </div>\n                                            <div class=\"invalid-feedback\" *ngIf=\"sub.get('value').invalid\"\n                                                style=\"display: block;\">\n                                                Please, don't leave this field blank\n                                            </div>\n                                        </div>\n                                    </div>\n            \n                                </ng-container>\n                                \n                                <!-- <div formArrayName=\"relation\" class=\"col-xl-12\">\n                                    <div *ngFor=\"let sub of comp['controls'].relation['controls']; let j = index\">\n                                        <div [formGroupName]=\"j\" class=\"d-xl-flex\" style=\"align-items: center;\">\n                                            <div class=\"form-group row ml-2 mt-2 mr-2 w-100\">\n                                                <div class=\"col-xl-6\">\n                                                    <select class=\"form-control\" formControlName=\"trait\" name=\"trait\">\n                                                        <option>Trait...</option>\n                                                        <option>...</option>\n                                                    </select>\n                                                </div>\n                                                <div class=\"input-group col-xl-6\" *ngIf=\"{switch : false}; let variable\">\n                                                    <select class=\"form-control\" formControlName=\"value\" name=\"value\" style=\"border-top-right-radius: .25rem; border-bottom-right-radius: .25rem;\">\n                                                        <option>Relations...</option>\n                                                        <option>...</option>\n                                                    </select>\n                                                    <div class=\"input-group-append ml-2\">\n                                                        <button (click)=\"removeRelation(i, j)\" class=\"btn btn-danger\" type=\"button\"><i class=\"fa fa-trash-alt\"></i></button>\n                                                    </div>\n                                                </div>\n                                            </div>                                                 \n                                        </div>\n                                    </div>\n                                </div> -->\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n\n\n    <!-- SUB-TERM -->\n    \n        \n    <div class=\"form-group row ml-2 mt-3 mr-2\">\n        <div class=\"input-group col-xl-12\">\n            <div class=\"card\">\n                <span class=\"text-id\"><b>SUBTERM</b></span>\n                <a class=\"pointer\" (click)=\"addSubterm()\"><span class=\"add-icon\" [class.disabled]=\"subtermDisabled\"><i class=\"fa fa-plus-square\"></i></span></a>\n                <!-- <a class=\"pointer\" (click)=\"removeSubterm(i)\"><span class=\"trash-icon\"><i class=\"fa fa-trash\"></i></span></a> -->\n                <div class=\"card-body\">\n\n                    \n            \n                    <!-- SUB-TERM -->\n                    <div formArrayName=\"subterm\" class=\"col-xl-12\">\n                        <div *ngFor=\"let sub of decompForm['controls'].subterm['controls']; let i = index\">\n                            <div [formGroupName]=\"i\" class=\"d-xl-flex\" style=\"align-items: center;\">\n                                <div class=\"form-group row ml-2 mt-2 mr-2 w-100\">\n                                    <div class=\"input-group\" *ngIf=\"{switch : false}; let variable\">\n                                        <ng-select #select_subterm formControlName=\"label\" *ngIf=\"!variable.switch\" name=\"label\" [dropdownPosition]=\"'top'\"\n                                                (keyup)=\"triggerSubterm($event)\" (change)=\"handleSubterm(select_subterm, i)\"\n                                                [items]=\"searchResults\" bindValue=\"label\" (focus)=\"deleteData()\" bindLabel=\"label\"\n                                                placeholder=\"Search lexical entries\" appendTo=\"body\">\n                                                <ng-template ng-option-tmp let-item=\"item\" let-search=\"searchTerm\">\n                                                    <div>\n                                                        <span>{{item.label}} </span><span style=\"color: blue;\">@{{item.language}}</span>\n                                                    </div>\n\n                                                </ng-template>\n                                            </ng-select>\n                                        <input (keyup)=\"handleSubterm($event, i)\" formControlName=\"entity\" name=\"entity\" type=\"text\" class=\"form-control\" id=\"inputDenotes\" placeholder=\"Insert URI\" *ngIf=\"variable.switch\">\n                                        <div class=\"input-group-append ml-3 form-check\">\n                                            <input class=\"form-check-input vartrans-tooltip\" type=\"checkbox\" (change)=\"variable.switch=!variable.switch\" data-toggle=\"tooltip\" data-placement=\"bottom\" data-trigger=\"hover\" title=\"Clicca per inserire un URI manualmente\">\n                                        </div>\n                                        <!-- <div class=\"input-group-append ml-2\">\n                                            <button class=\"btn btn-primary\" type=\"button\"><i\n                                                    class=\"fa fa-external-link-alt\"></i></button>\n                                        </div> -->\n                                        <div class=\"input-group-append ml-2\">\n                                            <button (click)=\"removeSubterm(i)\" class=\"btn btn-danger\" type=\"button\"><i class=\"fa fa-trash-alt\"></i></button>\n                                        </div>\n                                       <!--  <div class=\"input-group-append ml-2\">\n                                            <button  class=\"btn btn-outline-primary invisible\" type=\"button\"><i class=\"fa fa-plus\"></i></button>\n                                        </div> -->\n                                    </div>\n                                </div>                                                  \n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n           \n    \n</form>","/*\n   Copyright 2021-2022  Istituto di Linguistica Computazionale \"A. Zampolli\", Consiglio Nazionale delle Ricerche, Pisa, Italy.\n \nThis file is part of EpiLexo.\n\nEpiLexo is free software: you can redistribute it and/or modify it under the terms of the GNU General Public License as published by the Free Software Foundation, either version 3 of the License, or (at your option) any later version.\n\nEpiLexo is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for more details.\n\nYou should have received a copy of the GNU General Public License along with EpiLexo. If not, see <https://www.gnu.org/licenses/>.\n*/\n\nimport { Component, OnInit } from '@angular/core';\n\n@Component({\n  selector: 'app-dictionary-tab',\n  templateUrl: './dictionary-tab.component.html',\n  styleUrls: ['./dictionary-tab.component.scss']\n})\nexport class DictionaryTabComponent implements OnInit {\n\n  constructor() { }\n\n  ngOnInit(): void {\n  }\n\n}\n","\n\n<div class=\"card container-fluid\">\n\t<div class=\"card-body row\">\n\t\t<div class=\"col-md-12 text-right\">\n            <a href=\"#\"><i class=\"fa fa-unlock fa-2x\"></i></a>\n\t\t</div>\n\t</div>\n\t<div class=\"row\">\n\t\t<div class=\"col-md-12 dictionary-body\">\n            <ul>\n                <li>Lorem ipsum dolor sit amet, consectetuer adipiscing elit.</li>\n                <li>Aliquam tincidunt mauris eu risus.</li>\n                <li>Vestibulum auctor dapibus neque.</li>\n                <li>Nunc dignissim risus id metus.</li>\n                <li>Cras ornare tristique elit.</li>\n                <li>Vivamus vestibulum ntulla nec ante.</li>\n                <li>Praesent placerat risus quis eros.</li>\n                <li>Fusce pellentesque suscipit nibh.</li>\n                <li>Integer vitae libero ac risus egestas placerat.</li>\n                <li>Vestibulum commodo felis quis tortor.</li>\n                <li>Ut aliquam sollicitudin leo.</li>\n                <li>Cras iaculis ultricies nulla.</li>\n                <li>Donec quis dui at dolor tempor interdum.</li>\n            </ul>\n\t\t</div>\n\t</div>\n</div>","/*\n   Copyright 2021-2022  Istituto di Linguistica Computazionale \"A. Zampolli\", Consiglio Nazionale delle Ricerche, Pisa, Italy.\n \nThis file is part of EpiLexo.\n\nEpiLexo is free software: you can redistribute it and/or modify it under the terms of the GNU General Public License as published by the Free Software Foundation, either version 3 of the License, or (at your option) any later version.\n\nEpiLexo is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for more details.\n\nYou should have received a copy of the GNU General Public License along with EpiLexo. If not, see <https://www.gnu.org/licenses/>.\n*/\n\nimport { BrowserModule } from '@angular/platform-browser';\nimport { APP_INITIALIZER, NgModule } from '@angular/core';\nimport { TreeModule } from '@circlon/angular-tree-component';\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\nimport { InfiniteScrollModule } from 'ngx-infinite-scroll';\nimport { AngularEditorModule } from '@kolkov/angular-editor'\nimport { NgSelectModule } from '@ng-select/ng-select';\nimport { ContextMenuModule } from 'ngx-contextmenu';\nimport { ToastrModule } from 'ngx-toastr';\nimport { initializer } from '../app/services/initializer/app-init';\nimport { KeycloakService, KeycloakAngularModule } from 'keycloak-angular';\n\n\n\n\nimport { AppRoutingModule } from './app-routing.module';\nimport { AppComponent } from './app.component';\nimport { NavbarComponent } from './components/navbar/navbar.component';\nimport { LexiconPageComponent } from './views/lexicon-page/lexicon-page.component';\nimport { LoginPageComponent } from './views/login-page/login-page.component';\nimport { PageNotFoundComponent } from './views/page-not-found/page-not-found.component';\nimport { HomePageComponent } from './views/home-page/home-page.component';\nimport { ProfilePageComponent } from './views/profile-page/profile-page.component';\nimport { LexiconPanelComponent } from './components/lexicon-panel/lexicon-panel.component';\nimport { NotePanelComponent } from './components/note-panel/note-panel.component';\nimport { LinkPanelComponent } from './components/link-panel/link-panel.component';\nimport { SearchPageComponent } from './views/search-page/search-page.component';\nimport { DataSearchFormComponent } from './components/data-search-form/data-search-form.component';\nimport { BrowserAnimationsModule } from '@angular/platform-browser/animations';\nimport { DocumentSystemTreeComponent } from './components/lexicon-panel/document-system-tree/document-system-tree.component';\nimport { TextTreeComponent } from './components/lexicon-panel/document-system-tree/text-tree/text-tree.component';\nimport { TextDetailComponent } from './components/lexicon-panel/text-detail/text-detail.component';\nimport { EpigraphyDetailComponent } from './components/lexicon-panel/text-detail/epigraphy-detail/epigraphy-detail.component';\nimport { EditDetailComponent } from './components/lexicon-panel/text-detail/edit-detail/edit-detail.component';\nimport { EpigraphyTabComponent } from './components/lexicon-panel/text-detail/epigraphy-detail/epigraphy-tab/epigraphy-tab.component';\nimport { DictionaryTabComponent } from './components/lexicon-panel/text-detail/edit-detail/dictionary-tab/dictionary-tab.component';\nimport { LexicalEntryTreeComponent } from './components/lexicon-panel/document-system-tree/lexical-entry-tree/lexical-entry-tree.component';\nimport { CoreTabComponent } from './components/lexicon-panel/text-detail/edit-detail/core-tab/core-tab.component';\nimport { VartransTabComponent } from './components/lexicon-panel/text-detail/edit-detail/vartrans-tab/vartrans-tab.component';\nimport { SynsemTabComponent } from './components/lexicon-panel/text-detail/edit-detail/synsem-tab/synsem-tab.component';\nimport { DecompositionTabComponent } from './components/lexicon-panel/text-detail/edit-detail/decomposition-tab/decomposition-tab.component';\nimport { ProfilesTableComponent } from './components/profiles-table/profiles-table.component';\nimport { HttpClientModule } from '@angular/common/http';\nimport { BibliographyPanelComponent } from './components/bibliography-panel/bibliography-panel.component';\nimport { AttestationPanelComponent } from './components/attestation-panel/attestation-panel.component';\nimport { LexicalEntryCoreFormComponent } from './components/lexicon-panel/text-detail/edit-detail/core-tab/lexical-entry-core-form/lexical-entry-core-form.component';\nimport { ModalModule } from 'ng-modal-lib';\nimport { SeeAlsoComponent } from './components/link-panel/see-also/see-also.component';\nimport { SameAsComponent } from './components/link-panel/same-as/same-as.component';\nimport { LexicalEntryVartransFormComponent } from './components/lexicon-panel/text-detail/edit-detail/vartrans-tab/lexical-entry-vartrans-form/lexical-entry-vartrans-form.component';\nimport { LexicalEntrySynsemFormComponent } from './components/lexicon-panel/text-detail/edit-detail/synsem-tab/lexical-entry-synsem-form/lexical-entry-synsem-form.component';\nimport { FormCoreFormComponent } from './components/lexicon-panel/text-detail/edit-detail/core-tab/form-core-form/form-core-form.component';\nimport { LexicalEntryDecompFormComponent } from './components/lexicon-panel/text-detail/edit-detail/decomposition-tab/lexical-entry-decomp-form/lexical-entry-decomp-form.component';\nimport { SenseCoreFormComponent } from './components/lexicon-panel/text-detail/edit-detail/core-tab/sense-core-form/sense-core-form.component';\nimport { SenseVartransFormComponent } from './components/lexicon-panel/text-detail/edit-detail/vartrans-tab/sense-vartrans-form/sense-vartrans-form.component';\nimport { LexicalConceptFormComponent } from './components/lexicon-panel/text-detail/edit-detail/core-tab/lexical-concept-form/lexical-concept-form.component';\nimport { LanguageManagerComponent } from './components/lexicon-panel/document-system-tree/language-manager/language-manager.component';\nimport { EtymologyTabComponent } from './components/lexicon-panel/text-detail/edit-detail/etymology-tab/etymology-tab.component';\nimport { EtymologyFormComponent } from './components/lexicon-panel/text-detail/edit-detail/etymology-tab/etymology-form/etymology-form.component';\nimport { MetadataPanelComponent } from './components/metadata-panel/metadata-panel.component';\nimport { EpigraphyFormComponent } from './components/lexicon-panel/text-detail/epigraphy-detail/epigraphy-tab/epigraphy-form/epigraphy-form.component';\nimport { NgbModule } from '@ng-bootstrap/ng-bootstrap';\nimport { SearchFormComponent } from './components/lexicon-panel/text-detail/epigraphy-detail/epigraphy-tab/epigraphy-form/search-form/search-form.component';\nimport { AuthService } from './services/auth/auth.service';;\nimport { UnauthorizedPageComponent } from './views/unauthorized-page/unauthorized-page/unauthorized-page.component'\n;\nimport { ConceptTreeComponent } from './components/lexicon-panel/document-system-tree/concept-tree/concept-tree.component'\n\n@NgModule({\n  declarations: [\n    AppComponent,\n    NavbarComponent,\n    LexiconPageComponent,\n    LoginPageComponent,\n    PageNotFoundComponent,\n    HomePageComponent,\n    ProfilePageComponent,\n    LexiconPanelComponent,\n    NotePanelComponent,\n    LinkPanelComponent,\n    SearchPageComponent,\n    DataSearchFormComponent,\n    DocumentSystemTreeComponent,\n    TextTreeComponent,\n    TextDetailComponent,\n    EpigraphyDetailComponent,\n    EditDetailComponent,\n    EpigraphyTabComponent,\n    DictionaryTabComponent,\n    LexicalEntryTreeComponent,\n    CoreTabComponent,\n    VartransTabComponent,\n    SynsemTabComponent,\n    DecompositionTabComponent,\n    ProfilesTableComponent,\n    BibliographyPanelComponent,\n    AttestationPanelComponent,\n    LexicalEntryCoreFormComponent,\n    SeeAlsoComponent,\n    SameAsComponent,\n    LexicalEntryVartransFormComponent,\n    LexicalEntrySynsemFormComponent,\n    FormCoreFormComponent,\n    LexicalEntryDecompFormComponent,\n    SenseCoreFormComponent,\n    SenseVartransFormComponent,\n    LexicalConceptFormComponent,\n    LanguageManagerComponent,\n    EtymologyTabComponent,\n    EtymologyFormComponent,\n    MetadataPanelComponent,\n    EpigraphyFormComponent,\n    SearchFormComponent\n,\n    UnauthorizedPageComponent ,\n    ConceptTreeComponent ],\n  imports: [\n    ContextMenuModule.forRoot({useBootstrap4: true}),\n    BrowserModule,\n    BrowserAnimationsModule,\n    AppRoutingModule,\n    TreeModule,\n    InfiniteScrollModule,\n    HttpClientModule,\n    AngularEditorModule,\n    NgSelectModule,\n    ModalModule,\n    NgbModule,\n    FormsModule,\n    KeycloakAngularModule,\n    ReactiveFormsModule,\n    ToastrModule.forRoot()\n  ],\n  providers: [\n    { \n      provide: APP_INITIALIZER, \n      useFactory: initializer, \n      deps: [ KeycloakService ], \n      multi: true\n    },\n    AuthService\n  ],\n  bootstrap: [AppComponent]\n})\nexport class AppModule { }","/*\n   Copyright 2021-2022  Istituto di Linguistica Computazionale \"A. Zampolli\", Consiglio Nazionale delle Ricerche, Pisa, Italy.\n \nThis file is part of EpiLexo.\n\nEpiLexo is free software: you can redistribute it and/or modify it under the terms of the GNU General Public License as published by the Free Software Foundation, either version 3 of the License, or (at your option) any later version.\n\nEpiLexo is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for more details.\n\nYou should have received a copy of the GNU General Public License along with EpiLexo. If not, see <https://www.gnu.org/licenses/>.\n*/\n\nimport { Component, Input, OnChanges, OnInit, SimpleChanges } from '@angular/core';\nimport { DocumentSystemService } from 'src/app/services/document-system/document-system.service';\n\n@Component({\n  selector: 'app-metadata-panel',\n  templateUrl: './metadata-panel.component.html',\n  styleUrls: ['./metadata-panel.component.scss']\n})\nexport class MetadataPanelComponent implements OnInit, OnChanges {\n\n  object : any;\n  @Input() metadataData: any;\n\n  constructor(private documentService : DocumentSystemService) { }\n\n  ngOnInit(): void {\n  }\n\n  ngOnChanges(changes: SimpleChanges) { \n    console.log(changes)\n    if(changes.metadataData.currentValue != null){\n      this.object = changes.metadataData.currentValue;\n\n      if(changes.metadataData.currentValue != this.object){\n        this.object = null;\n      }\n\n      this.object = changes.metadataData.currentValue;\n    }else{\n      this.object = null;\n      this.documentService.triggerMetadataPanel(false);\n    }\n    \n  }\n\n  isArray(val): boolean { return Array.isArray(val); }\n\n  isNumber(val): boolean { return typeof val == 'number'; }\n\n  isObject(val): boolean { return typeof val === 'object' && !Array.isArray(val); }\n\n  isLink(val) : boolean { \n    const re = /((http|https):\\/\\/)(([\\w.-]*)\\.([\\w]*))/;\n    return val.match(re); \n  }\n\n}\n","<div class=\"card\">\n    <div class=\"card-header\" id=\"metadataHeading\">\n        <h5 class=\"mb-0\">\n            <a class=\"btn btn-link w-100 d-flex align-self-center collapsed\" data-toggle=\"collapse\"\n                data-target=\"#metadataCollapse\" aria-expanded=\"true\" aria-controls=\"metadataCollapse\">\n                Metadata Panel<i class=\"fa ml-auto\"></i>\n            </a>\n        </h5>\n    </div>\n    <!-- {{object | json}} -->\n    <div id=\"metadataCollapse\" class=\"collapse\" aria-labelledby=\"metadataHeading\">\n        <div class=\"card-body\">\n            <ul class=\"nav nav-tabs\" id=\"myTab\" role=\"tablist\" *ngIf=\"object != null\">\n                <li class=\"nav-item\">\n                    <a class=\"nav-link active\" id=\"edition-tab\" data-toggle=\"tab\" href=\"#edition\" role=\"tab\"\n                        aria-controls=\"edition\" aria-selected=\"true\">Edition</a>\n                </li>\n                <li>\n                    <a class=\"nav-link\" id=\"epigraphy-tab\" data-toggle=\"tab\" href=\"#epigraphy_metadata\" role=\"tab\"\n                        aria-controls=\"epigraphy_metadata\" aria-selected=\"false\">Epigraphy</a>\n                </li>\n                <li>\n                    <a class=\"nav-link\" id=\"other-tab\" data-toggle=\"tab\" href=\"#other_metadata\" role=\"tab\"\n                        aria-controls=\"other_metadata\" aria-selected=\"false\">Text</a>\n                </li>\n            </ul>\n            <div class=\"tab-content\" id=\"myTabContent\" *ngIf=\"object != null\">\n                <div class=\"tab-pane fade show active\" id=\"edition\" role=\"tabpanel\" aria-labelledby=\"file-tab\">\n                    <div class=\"card epi_body\">\n                        <span class=\"text-id\">EDITION</span>\n                        <!-- <a href=\"#a\"><span class=\"edit-icon\"><i class=\"fa fa-edit\"></i></span></a>\n                        <a href=\"#b\"><span class=\"trash-icon\"><i class=\"fa fa-trash\"></i></span></a> -->\n                        <div class=\"card-body\">\n                            <!-- <div class=\"d-flex\">\n                                <span class=\"badge badge-primary\">Form</span>\n                            </div> -->\n                            <div class=\"d-flex\">\n                                <table class=\"table table-borderless w-100\" style=\"table-layout: fixed; \">\n                                    <tbody>\n                                        <tr style=\"width: 100%;\" *ngIf=\"object.title != undefined || object?.title != ''\">\n                                            <th style=\"width: 30%;\" scope=\"row\">Title:</th> \n                                            <td style=\"width: 70%;\"><span>{{object.title}}</span></td>\n                                        </tr>\n                                        <tr *ngIf=\"object['element-id'] != undefined || object['element-id'] != ''\">\n                                            <th scope=\"row\">Id:</th>\n                                            <td><span>\n                                                {{object['element-id']}}\n                                            </span> </td>\n                                        </tr>\n                                        <tr *ngIf=\"object.editor != undefined || object?.editor != ''\">\n                                            <th scope=\"row\">Editor:</th>\n                                            <td><span>\n                                                {{object.editor}}\n                                            </span></td>\n                                        </tr>\n                                        <tr style=\"width: 100%;\" *ngIf=\"object.authority != undefined || object?.authority != ''\">\n                                            <th style=\"width: 30%;\" scope=\"row\">Authority:</th>\n                                            <td style=\"width: 70%;\"><span>\n                                                {{object.authority}}\n                                            </span></td>\n                                        </tr>\n                                        <tr *ngIf=\"object.license != undefined || object?.license != ''\">\n                                            <th scope=\"row\">License:</th>\n                                            <td>\n                                                <p class=\"m-0\" *ngFor=\"let subprop of object.license | keyvalue\">\n                                                    <a [href]=\"subprop?.value\"  target=\"_blank\" *ngIf=\"isLink(subprop?.value)\">{{subprop?.value}}</a>\n                                                    <span *ngIf=\"!isLink(subprop?.value)\">{{subprop?.value}}</span>\n                                                </p>\n                                            </td>\n                                        </tr>\n                                    </tbody>\n                                </table>\n                            </div>\n                        </div>\n                    </div>\n                    \n                </div>\n                <div class=\"tab-pane fade\" id=\"epigraphy_metadata\" role=\"tabpanel\" aria-labelledby=\"epigraphy-tab\">\n                    <div class=\"card epi_body\">\n                        <span class=\"text-id\">EPIGRAPHY</span>\n                        <!-- <a href=\"#a\"><span class=\"edit-icon\"><i class=\"fa fa-edit\"></i></span></a>\n                        <a href=\"#b\"><span class=\"trash-icon\"><i class=\"fa fa-trash\"></i></span></a> -->\n                        <div class=\"card-body\">\n                            <!-- <div class=\"d-flex\">\n                                <span class=\"badge badge-primary\">Form</span>\n                            </div> -->\n\n                            <div class=\"d-flex\">\n                                <table class=\"table table-borderless\">\n                                    <tbody>\n                                        <tr *ngIf=\"object?.itAnt_ID != undefined && object?.itAnt_ID != ''\">\n                                            <th scope=\"row\">ItAnt ID</th>\n                                            <td><span>{{object?.itAnt_ID}}</span></td>\n                                        </tr>\n                                        <tr *ngIf=\"object?.inscriptionTitle != undefined && object?.inscriptionTitle != ''\">\n                                            <th scope=\"row\">Inscription title</th>\n                                            <td><span>{{object?.inscriptionTitle}}</span></td>\n                                        </tr>\n                                        <tr *ngIf=\"object?.inscriptionType != undefined && object?.inscriptionType != ''\">\n                                            <th scope=\"row\">Inscription type</th>\n                                            <td><span>{{object?.inscriptionType}}</span></td>\n                                        </tr>\n                                        <tr *ngIf=\"object?.summary != undefined && object?.summary != ''\">\n                                            <th scope=\"row\">Summary</th>\n                                            <td><span>{{object?.summary}}</span></td>\n                                        </tr>\n                                        <tr *ngIf=\"object?.trismegistos?.trismegistosID_url!= undefined\">\n                                            <th scope=\"row\">Trismegistos ID</th>\n                                            <td><a target=\"_blank\"\n                                                    [href]=\"'//'+object?.trismegistos?.trismegistosID_url\">\n                                                    {{object?.trismegistos?.trismegistosID}}</a></td>\n                                        </tr>\n                                        <tr *ngIf=\"object?.traditionalIDs != undefined && object?.traditionalIDs != ''\">\n                                            <th scope=\"row\">Other IDs:</th>\n                                            <td>\n                                                <p class=\"m-0\" *ngFor=\"let other_id of object.traditionalIDs\">\n                                                    <a target=\"_blank\" [href]=\"other_id.traditionalID_URL\">\n                                                        {{other_id.traditionalID}}\n                                                    </a>\n                                                </p>\n                                            </td>\n                                        </tr>\n                                        <tr *ngIf=\"object?.originalPlace != undefined && object?.originalPlace != ''\">\n                                            <th scope=\"row\">Original Place:</th>\n                                            <td>\n                                                <a *ngIf=\"object?.originalPlace?.ancientNameUrl != ''\" target=\"_blank\"\n                                                    [href]=\"object?.originalPlace?.ancientNameUrl\">\n                                                    {{object?.originalPlace?.ancientName}}</a> <span\n                                                    *ngIf=\"object?.originalPlace?.ancientNameUrl == ''\">{{object?.originalPlace?.ancientName}}</span>\n                                            </td>\n                                        </tr>\n                                        \n                                        \n                                        <tr *ngIf=\"object?.support?.objectType_conceptUrl != undefined && object?.support?.objectType_conceptUrl != ''\">\n                                            <th scope=\"row\">Object Type:</th>\n                                            <td>\n                                                <a *ngIf=\"object?.support?.objectType_conceptUrl != ''\" target=\"_blank\"\n                                                    [href]=\"object?.support?.objectType_conceptUrl\">\n                                                    {{object?.support?.objectType}}</a> <span\n                                                    *ngIf=\"object?.support?.objectType_conceptUrl == ''\">{{object?.support?.objectType}}</span>\n                                            </td>\n                                        </tr>\n                                        <tr *ngIf=\"object?.condition != undefined && object?.condition != ''\">\n                                            <th scope=\"row\">Condition:</th>\n                                            <td><span>{{object?.condition}}</span></td>\n                                        </tr>\n                                        <tr *ngIf=\"object?.conservationInstitution != undefined && object?.conservationInstitution != ''\">\n                                            <th scope=\"row\">Conservation institution:</th>\n                                            <td>\n                                                <a *ngIf=\"object?.conservationInstitution?.URL != ''\" target=\"_blank\"\n                                                    [href]=\"object?.conservationInstitution?.URL\">\n                                                    {{object?.conservationInstitution?.name}}</a> <span\n                                                    *ngIf=\"object?.conservationInstitution?.URL == ''\">{{object?.conservationInstitution?.name}}</span>\n                                            </td>\n                                        </tr>\n                                        <tr *ngIf=\"object?.dateOfOrigin != undefined && object?.dateOfOrigin != ''\">\n                                            <th scope=\"row\">Date of origin:</th>\n                                            <td><span>{{object?.dateOfOrigin}}</span></td>\n                                        </tr>\n                                        <tr *ngIf=\"object?.dateOfOriginNotBefore != undefined && object?.dateOfOriginNotBefore != ''\">\n                                            <th scope=\"row\">Date of origin not before:</th>\n                                            <td><span>{{object?.dateOfOriginNotBefore}}</span></td>\n                                        </tr>\n                                        <tr *ngIf=\"object?.dateOfOriginNotAfter != undefined && object?.dateOfOriginNotAfter != ''\">\n                                            <th scope=\"row\">Date of origin not after:</th>\n                                            <td><span>{{object?.dateOfOriginNotAfter}}</span></td>\n                                        </tr>\n                                        <tr *ngIf=\"object?.datingCertainty != undefined && object?.datingCertainty != ''\">\n                                            <th scope=\"row\">Date certainty:</th>\n                                            <td><span>{{object?.datingCertainty}}</span></td>\n                                        </tr>\n                                        <tr *ngIf=\"object?.decoration != undefined && object?.decoration != ''\">\n                                            <th scope=\"row\">Date certainty:</th>\n                                            <td><span>{{object?.datingCertainty}}</span></td>\n                                        </tr>\n                                        <tr *ngIf=\"object?.decoration != undefined && object?.decoration != ''\">\n                                            <th scope=\"row\">Detailed Find Spot:</th>\n                                            <td><span>{{object?.decoration}}</span></td>\n                                        </tr>\n                                        <tr *ngIf=\"object?.detailedFindSpot != undefined && object?.detailedFindSpot != ''\">\n                                            <th scope=\"row\">Detailed Find Spot:</th>\n                                            <td><span>{{object?.detailedFindSpot}}</span></td>\n                                        </tr>\n                                        <tr style=\"width: 100%;\" *ngIf=\"object?.discoveryYear != undefined\">\n                                            <th style=\"width: 30%;\" scope=\"row\">Discovery Year</th>\n                                            <div *ngIf=\"isObject(subprop?.value)\">\n                                                <table class=\"table table-borderless text-break\"\n                                                    style=\"table-layout: fixed;\">\n                                                    <tr style=\"width: 100%;\" *ngFor=\"let sub of object?.discoveryYear| keyvalue\">\n                                                        <td *ngIf=\"sub?.value != ''\">\n                                                            <b  *ngIf=\"sub?.value != ''\">{{sub?.key}}:</b> <span *ngIf=\"!isLink(sub?.value)\">{{sub?.value}}</span>\n                                                        </td>\n                                                    </tr>\n                                                </table>\n                                            </div>\n                                            <div *ngIf=\"isArray(subprop?.value)\">\n                                                <table class=\"table table-borderless text-break\" style=\"table-layout: fixed;\">\n                                                    <div *ngFor=\"let array of subprop.value\">\n                                                        <tr style=\"width: 100%;\" *ngFor=\"let object of array | keyvalue\">\n                                                            <td>\n                                                                <b  *ngIf=\"object?.value != ''\">{{object?.key}}:</b>\n                                                                <p>\n                                                                    <a [href]=\"object?.value\" target=\"_blank\" *ngIf=\"isLink(object?.value)\">{{object?.value}}</a>\n                                                                    <span *ngIf=\"!isLink(object?.value)\">{{object?.value}}</span>\n                                                                </p>\n                                                            </td>\n                                                        </tr>\n                                                    </div>\n                                                    \n                                                </table>\n                                            </div>\n            \n                                        </tr>\n                                        <tr *ngIf=\"object?.execution != undefined && object?.execution != ''\">\n                                            <th scope=\"row\">Execution:</th>\n                                            <td><span>{{object?.execution}}</span></td>\n                                        </tr>\n                                        <tr *ngIf=\"object?.layoutNotes != undefined && object?.layoutNotes != ''\">\n                                            <th scope=\"row\">Layout Notes:</th>\n                                            <td><span>{{object?.layoutNotes}}</span></td>\n                                        </tr>\n                                        <tr *ngIf=\"object?.modernFindSpotName != undefined && object?.modernFindSpotName != ''\">\n                                            <th scope=\"row\">Modern Find Sport Name:</th>\n                                            <td>\n                                                <a [href]=\"object?.modernFindSpotNameUri\" target=\"_blank\" *ngIf=\"object?.modernFindSpotNameUri != undefined && object?.modernFindSpotNameUri != ''\">{{object?.modernFindSpotName}}</a>\n                                                <span *ngIf=\"object?.modernFindSpotNameUri == ''\">{{object?.modernFindSpotName}}</span>\n                                            </td>\n                                        </tr>\n                                        <tr *ngIf=\"object?.opistography != undefined && object?.opistography != ''\">\n                                            <th scope=\"row\">Opistography:</th>\n                                            <td><span>{{object?.opistography}}</span></td>\n                                        </tr>\n                                        <tr *ngIf=\"object?.paleographicNotes != undefined && object?.paleographicNotes != ''\">\n                                            <th scope=\"row\">Paleographic Notes:</th>\n                                            <td><span>{{object?.paleographicNotes}}</span></td>\n                                        </tr>\n                                        \n                                        <tr *ngIf=\"object?.settlement != undefined && object?.settlement != ''\">\n                                            <th scope=\"row\">Settlement:</th>\n                                            <td>\n                                                <a *ngIf=\"object?.settlement?.placeOfConservationExternalReference != ''\"\n                                                    target=\"_blank\"\n                                                    [href]=\"object?.settlement?.placeOfConservationExternalReference\">\n                                                    {{object?.settlement?.placeOfConservation}}</a> <span\n                                                    *ngIf=\"object?.settlement?.placeOfConservationExternalReference == ''\">{{object?.settlement?.placeOfConservation}}</span>\n                                            </td>\n                                        </tr>\n                                        <tr *ngIf=\"object?.support?.material_conceptUrl != undefined && object?.support?.material_conceptUrl != ''\">\n                                            <th scope=\"row\">Material:</th>\n                                            <td>\n                                                <a *ngIf=\"object?.support?.material_conceptUrl != ''\" target=\"_blank\"\n                                                    [href]=\"object?.support?.material_conceptUrl\">\n                                                    {{object?.support?.material}}</a> <span\n                                                    *ngIf=\"object?.support?.material_conceptUrl == ''\">{{object?.support?.material}}</span>\n                                            </td>\n                                        </tr>\n                                    </tbody>\n                                </table>\n                            </div>\n\n                        </div>\n                    </div>\n                </div>\n                <div class=\"tab-pane fade\" id=\"other_metadata\" role=\"tabpanel\" aria-labelledby=\"other-tab\">\n                    <div class=\"card epi_body\">\n                        <span class=\"text-id\">TEXT</span>\n                        <!-- <a href=\"#a\"><span class=\"edit-icon\"><i class=\"fa fa-edit\"></i></span></a>\n                        <a href=\"#b\"><span class=\"trash-icon\"><i class=\"fa fa-trash\"></i></span></a> -->\n                        <div class=\"card-body\">\n                            <!-- <div class=\"d-flex\">\n                                <span class=\"badge badge-primary\">Form</span>\n                            </div> -->\n\n                            <div class=\"d-flex\">\n                                <table class=\"table table-borderless text-break\" style=\"table-layout: fixed;\">\n                                    <tbody>\n                                        <tr *ngIf=\"object?.autopsy != undefined && object?.autopsy != ''\">\n                                            <th scope=\"row\">Autopsy:</th>\n                                            <td><span>{{object?.autopsy}}</span></td>\n                                        </tr>\n\n                                        <tr *ngIf=\"object?.autopsyAuthor != undefined && object?.autopsyAuthor != ''\">\n                                            <th scope=\"row\">Autopsy author:</th>\n                                            <td><span>{{object?.autopsyAuthor}}</span></td>\n                                        </tr>\n\n                                        <tr style=\"width: 100%;\" *ngIf=\"object?.language != undefined\">\n                                            <th style=\"width: 30%;\" scope=\"row\">Language</th>\n                                            <div *ngIf=\"isObject(object?.language)\">\n                                                <table class=\"table table-borderless text-break\"\n                                                    style=\"table-layout: fixed;\">\n                                                    <tr style=\"width: 100%;\" *ngFor=\"let sub of object?.language | keyvalue\">\n                                                        <b  *ngIf=\"sub?.value != ''\">{{sub?.key}}</b>\n                                                        <a [href]=\"sub?.value\" target=\"_blank\" *ngIf=\"isLink(sub?.value)\">{{sub?.value}}</a>\n                                                        <span *ngIf=\"!isLink(sub?.value)\">{{sub?.value}}</span>\n                                                    </tr>\n                                                </table>\n                                            </div>\n                                            <div *ngIf=\"isArray(object?.language)\">\n                                                <table class=\"table table-borderless text-break\" style=\"table-layout: fixed;\">\n                                                    <div *ngFor=\"let array of object?.language\">\n                                                        <tr style=\"width: 100%;\" *ngFor=\"let object of array | keyvalue\">\n                                                            <td>\n                                                                <b  *ngIf=\"object?.value != ''\">{{object?.key}}:</b>\n                                                                <p>\n                                                                    <a [href]=\"object?.value\" target=\"_blank\" *ngIf=\"isLink(object?.value)\">{{object?.value}}</a>\n                                                                    <span *ngIf=\"!isLink(object?.value)\">{{object?.value}}</span>\n                                                                </p>\n                                                            </td>\n                                                            \n                                                            \n                                                        </tr>\n                                                    </div>\n                                                    \n                                                </table>\n                                            </div>\n            \n                                        </tr>\n\n                                        <tr *ngIf=\"object?.bodytextpart?.ductus != undefined && object?.bodytextpart?.ductus\">\n                                            <th scope=\"row\">Ductus:</th>\n                                            <td><span>{{object?.bodytextpart?.ductus}}</span></td>\n                                        </tr>\n                                        <tr *ngIf=\"object?.wordDivisionType != undefined && object?.wordDivisionType\">\n                                            <th scope=\"row\">Word division type:</th>\n                                            <td><span>{{object?.wordDivisionType}}</span></td>\n                                        </tr>\n                                        <tr style=\"width: 100%;\" *ngIf=\"object?.writingSystem != undefined && object?.writingSystem\">\n                                            <th style=\"width: 30%;\" scope=\"row\">Writing system:</th>\n                                            <td style=\"width: 70%;\"><span>{{object?.writingSystem}}</span></td>\n                                        </tr>\n                                    </tbody>\n                                </table>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n</div>","/*\n   Copyright 2021-2022  Istituto di Linguistica Computazionale \"A. Zampolli\", Consiglio Nazionale delle Ricerche, Pisa, Italy.\n \nThis file is part of EpiLexo.\n\nEpiLexo is free software: you can redistribute it and/or modify it under the terms of the GNU General Public License as published by the Free Software Foundation, either version 3 of the License, or (at your option) any later version.\n\nEpiLexo is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for more details.\n\nYou should have received a copy of the GNU General Public License along with EpiLexo. If not, see <https://www.gnu.org/licenses/>.\n*/\n\nimport { Component, ElementRef, OnInit, ViewChild } from '@angular/core';\nimport { ExpanderService } from 'src/app/services/expander/expander.service';\nimport { LexicalEntriesService } from 'src/app/services/lexical-entries/lexical-entries.service';\n\n@Component({\n  selector: 'app-edit-detail',\n  templateUrl: './edit-detail.component.html',\n  styleUrls: ['./edit-detail.component.scss']\n})\nexport class EditDetailComponent implements OnInit {\n\n  object : any;\n  showTrigger = false;\n  @ViewChild('navtabs') navtabs: ElementRef; \n  @ViewChild('navcontent') navcontent: ElementRef; \n\n  constructor(private lexicalService: LexicalEntriesService, private exp : ExpanderService) { }\n\n  ngOnInit(): void {\n    \n    this.object = null;\n    this.exp.openEdit$.subscribe(\n      boolean => {\n        if(boolean){\n          setTimeout(() => {\n            var text_detail = document.querySelectorAll('#text-dettaglio');\n            text_detail.forEach(element => {\n              if(!element.classList.contains('show')){\n                element.classList.add('show')\n              }\n            })\n            let a_link = document.querySelectorAll('a[data-target=\"#text-dettaglio\"]');\n            a_link.forEach(element => {\n              if(element.classList.contains(\"collapsed\")){\n                element.classList.remove('collapsed')\n              }else{\n                //element.classList.add('collapsed')\n              }\n            })\n           }, 100);\n        }\n      }\n    )\n\n    this.lexicalService.coreData$.subscribe(\n      object => {\n        if(object != null){\n          if(object['lexicalEntryInstanceName'] != undefined ||\n             object['formInstanceName'] != undefined ||\n             object['senseInstanceName'] != undefined ||\n             object['etymologyInstanceName'] != undefined){\n               setTimeout(() => {\n                var navTabLinks = this.navtabs.nativeElement.querySelectorAll('a')\n                this.object = object;\n                navTabLinks.forEach(element => {\n                  /* //console.log(element) */\n                  if(element.text == 'Core'){\n                    element.classList.add('active')\n                  }else{\n                    element.classList.remove('active')\n                    //console.log(element.id)\n                  }\n                });\n    \n                \n    \n                var navContent = this.navcontent.nativeElement.querySelectorAll('.tab-pane');\n                \n                navContent.forEach(element => {\n                  \n                  if(element.id == 'core'){\n                    element.classList.add('active')\n                    element.classList.add('show')\n                    /* console.log(\"picchio\");\n                    console.log(element) */\n                  }else{\n                    \n                    element.classList.remove('active')\n                    element.classList.remove('show')\n                    /* console.log(\"picchio21\")\n                    console.log(element) */\n                  }\n                });\n               }, 100);\n            \n\n          }else {\n            this.object = null;\n          }\n        }\n      }\n    );\n    \n    this.lexicalService.decompData$.subscribe(\n      object => {\n        if(object != null){\n          setTimeout(() => {\n            var navTabLinks = this.navtabs.nativeElement.querySelectorAll('a')\n            this.object = object;\n            navTabLinks.forEach(element => {\n              /* //console.log(element) */\n              if(element.text == 'Decomposition'){\n                element.classList.add('active')\n              }else{\n                element.classList.remove('active')\n                //console.log(element.id)\n              }\n            });\n\n            \n\n            var navContent = this.navcontent.nativeElement.querySelectorAll('.tab-pane');\n            \n            navContent.forEach(element => {\n              \n              if(element.id == 'decomposition'){\n                element.classList.add('active')\n                element.classList.add('show')\n                /* console.log(\"picchio\");\n                console.log(element) */\n              }else{\n                \n                element.classList.remove('active')\n                element.classList.remove('show')\n                /* console.log(\"picchio21\")\n                console.log(element) */\n              }\n            });\n           }, 100);\n        }else{\n          this.object = null;\n        }\n      }\n    )\n    \n\n    this.lexicalService.etymologyData$.subscribe(\n      object => {\n        if(object != null){\n          if(object['etymology']['etymologyInstanceName'] != undefined){\n            this.object = object;\n            var navTabLinks = this.navtabs.nativeElement.querySelectorAll('a')\n            \n            navTabLinks.forEach(element => {\n              //console.log(element.text)\n              if(element.text == 'Etymology'){\n                /* console.log(\"aggiungo active a:\") */\n                element.classList.add('active')\n\n              }else{\n                element.classList.remove('active')\n                /* console.log(\"tolgo active a:\") */\n              }\n            });\n            var navContent = this.navcontent.nativeElement.querySelectorAll('.tab-pane');\n            \n            navContent.forEach(element => {\n              //console.log(element.id)\n              if(element.id == 'etymology'){\n                element.classList.add('active')\n                element.classList.add('show')\n              }else{\n                element.classList.remove('active')\n                element.classList.remove('show')\n                //console.log(element.id)\n              }\n            });\n            \n          }else {\n            this.object = null;\n          }\n        }\n      }\n    );\n  }\n\n  triggerExpansionEdit(){\n \n    setTimeout(() => {\n\n      if(this.exp.isEditTabOpen() && !this.exp.isEpigraphyTabOpen()){\n        if(this.exp.isEditTabExpanded() && !this.exp.isEpigraphyTabExpanded()){\n          this.exp.openCollapseEdit();\n          this.exp.expandCollapseEdit();\n        }\n      }else if(!this.exp.isEditTabOpen() && !this.exp.isEpigraphyTabOpen()){\n        if(!this.exp.isEditTabExpanded() && !this.exp.isEpigraphyTabExpanded()){\n          this.exp.openCollapseEdit();\n          this.exp.expandCollapseEdit();\n        }\n      }else if(this.exp.isEditTabOpen() && this.exp.isEpigraphyTabOpen()){\n        this.exp.openCollapseEdit();\n        this.exp.expandCollapseEpigraphy(true);\n      }else if(!this.exp.isEditTabOpen() && this.exp.isEpigraphyTabOpen()){\n        if(!this.exp.isEditTabExpanded() && this.exp.isEpigraphyTabExpanded()){\n          this.exp.expandCollapseEpigraphy(false);\n          this.exp.openCollapseEdit(true)\n        }\n        \n      }\n      \n    }, 200);\n  }\n\n}\n","\n\n<div class=\"card\">\n    <div class=\"card-header\">\n        <ul class=\"nav nav-tabs\" id=\"editDictTab\" role=\"tablist\" #navtabs [ngClass]=\"{'disabled': object === null}\">\n            <li class=\"nav-item\">\n                <a class=\"nav-link\" id=\"core-tab\" data-toggle=\"tab\" href=\"#core\" role=\"tab\" aria-controls=\"core\" aria-selected=\"true\">Core</a>\n            </li>\n            <!-- <li class=\"nav-item\">\n                <a class=\"nav-link\" id=\"vartrans-tab\" data-toggle=\"tab\" href=\"#vartrans\" role=\"tab\" aria-controls=\"vartrans\" aria-selected=\"true\">Vartrans</a>\n            </li>\n            <li class=\"nav-item\">\n                <a class=\"nav-link\" id=\"synsem-tab\" data-toggle=\"tab\" href=\"#synsem\" role=\"tab\" aria-controls=\"synsem\" aria-selected=\"true\">Synsem</a>\n            </li> -->\n            <li class=\"nav-item\">\n                <a class=\"nav-link\" id=\"decomposition-tab\" data-toggle=\"tab\" href=\"#decomposition\" role=\"tab\" aria-controls=\"decomposition\" aria-selected=\"true\">Decomposition</a>\n            </li>\n            <li class=\"nav-item\">\n                <a class=\"nav-link\" id=\"etymology-tab\" data-toggle=\"tab\" href=\"#etymology\" role=\"tab\" aria-controls=\"etymology\" aria-selected=\"true\">Etymology</a>\n            </li>\n            <li class=\"nav-item\">\n                <a class=\"nav-link\" id=\"dictionary-tab\" data-toggle=\"tab\" href=\"#dictionary\" role=\"tab\" aria-controls=\"dictionary\" aria-selected=\"false\">Dictionary</a>\n            </li>\n            <h5 class=\"ml-auto mb-0\">\n                <a class=\"btn btn-link w-100 d-flex align-self-center\" (click)=\"triggerExpansionEdit();\" data-toggle=\"collapse\" data-target=\"#text-dettaglio\" aria-expanded=\"false\" aria-controls=\"text-dettaglio\">\n                    <i class=\"fa ml-auto\"></i>\n                </a>\n            </h5>\n        </ul>\n        \n    </div>\n    <div id=\"text-dettaglio\" class=\"collapse show\" aria-labelledby=\"headingOne\" ><!--  data-parent=\"#epigraphy-accordion\" -->\n        <div class=\"card-body\">\n            <div class=\"tab-content\" id=\"tab-content\" #navcontent>\n                <div class=\"tab-pane fade\" id=\"core\" role=\"tabpanel\" aria-labelledby=\"core-tab\">\n                    <app-core-tab></app-core-tab>\n                </div>\n                <!-- <div class=\"tab-pane fade\" id=\"vartrans\" role=\"tabpanel\" aria-labelledby=\"vartrans-tab\">\n                    <app-vartrans-tab></app-vartrans-tab>\n                </div>\n                <div class=\"tab-pane fade\" id=\"synsem\" role=\"tabpanel\" aria-labelledby=\"synsem-tab\">\n                    <app-synsem-tab></app-synsem-tab>\n                </div> -->\n                <div class=\"tab-pane fade\" id=\"decomposition\" role=\"tabpanel\" aria-labelledby=\"decomposition-tab\">\n                    <app-decomposition-tab></app-decomposition-tab>\n                </div>\n                <div class=\"tab-pane fade\" id=\"etymology\" role=\"tabpanel\" aria-labelledby=\"etymology-tab\">\n                    <app-etymology-tab></app-etymology-tab>\n                </div>\n                <div class=\"tab-pane fade\" id=\"dictionary\" role=\"tabpanel\" aria-labelledby=\"dictionary-tab\">\n                    <app-dictionary-tab></app-dictionary-tab>\n                </div>\n            </div>\n        </div>\n    </div>\n   \n</div>","/*\n   Copyright 2021-2022  Istituto di Linguistica Computazionale \"A. Zampolli\", Consiglio Nazionale delle Ricerche, Pisa, Italy.\n \nThis file is part of EpiLexo.\n\nEpiLexo is free software: you can redistribute it and/or modify it under the terms of the GNU General Public License as published by the Free Software Foundation, either version 3 of the License, or (at your option) any later version.\n\nEpiLexo is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for more details.\n\nYou should have received a copy of the GNU General Public License along with EpiLexo. If not, see <https://www.gnu.org/licenses/>.\n*/\n\nimport { Injectable } from '@angular/core';\nimport { BehaviorSubject } from 'rxjs';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class ExpanderService {\n  \n  isEpigraphyExpanded = false;\n  isEditExpanded = false;\n\n  isEditOpen = false;\n  isEpigraphyOpen = false;\n\n  private _openEdit : BehaviorSubject<boolean> = new BehaviorSubject(null);\n  private _openEpigraphy : BehaviorSubject<boolean> = new BehaviorSubject(null);\n  private _expandEpigraphy: BehaviorSubject<boolean> = new BehaviorSubject(null);\n  private _expandEdit: BehaviorSubject<boolean> = new BehaviorSubject(null);\n  expEpigraphy$ = this._expandEpigraphy.asObservable();\n  expEdit$ = this._expandEdit.asObservable();\n  openEdit$ = this._openEdit.asObservable();\n  openEpigraphy$ = this._openEpigraphy.asObservable();\n\n  constructor() { }\n\n  expandCollapseEpigraphy(trigger?){\n    if(trigger != undefined){\n      this.isEpigraphyExpanded = trigger;\n      this._expandEpigraphy.next(this.isEpigraphyExpanded)\n    }else{\n      this.isEpigraphyExpanded = !this.isEpigraphyExpanded;\n      this._expandEpigraphy.next(this.isEpigraphyExpanded)\n    }\n  }\n  \n  expandCollapseEdit(trigger?){\n    if(trigger != undefined){\n      this.isEditExpanded = trigger;\n      this._expandEdit.next(this.isEditExpanded)\n    }else{\n      this.isEditExpanded = !this.isEditExpanded;\n      this._expandEdit.next(this.isEditExpanded)\n    }\n  }\n\n  openCollapseEdit(trigger?){\n    if(trigger != undefined){\n      this.isEditOpen = trigger;\n      this._openEdit.next(trigger);\n    }else{\n      this.isEditOpen = !this.isEditOpen\n      this._openEdit.next(this.isEditOpen);\n    }\n  }\n\n  openCollapseEpigraphy(trigger?){\n    if(trigger != undefined){\n      this.isEpigraphyOpen = trigger;\n      this._openEpigraphy.next(trigger)\n    }else{\n      this.isEpigraphyOpen = !this.isEpigraphyOpen\n      this._openEpigraphy.next(this.isEpigraphyOpen)\n    }\n  }\n\n  isEditTabExpanded(){\n    return this.isEditExpanded;\n  }\n\n  isEpigraphyTabExpanded(){\n    return this.isEpigraphyExpanded;\n  }\n\n  isEditTabOpen(){\n    return this.isEditOpen;\n  }\n\n  isEpigraphyTabOpen(){\n    return this.isEpigraphyOpen;\n  }\n\n}\n","/*\n   Copyright 2021-2022  Istituto di Linguistica Computazionale \"A. Zampolli\", Consiglio Nazionale delle Ricerche, Pisa, Italy.\n \nThis file is part of EpiLexo.\n\nEpiLexo is free software: you can redistribute it and/or modify it under the terms of the GNU General Public License as published by the Free Software Foundation, either version 3 of the License, or (at your option) any later version.\n\nEpiLexo is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for more details.\n\nYou should have received a copy of the GNU General Public License along with EpiLexo. If not, see <https://www.gnu.org/licenses/>.\n*/\n\nimport { AfterViewInit, ApplicationRef, Component, ComponentFactoryResolver, ComponentRef, ContentChild, ElementRef, HostListener, Injector, Input, OnDestroy, OnInit, QueryList, Renderer2, SimpleChanges, TemplateRef, ViewChild, ViewChildren } from '@angular/core';\nimport { FormGroup, FormControl, Validators, FormArray, FormBuilder } from '@angular/forms';\nimport { NavigationEnd, Router } from '@angular/router';\nimport { NgbPopover, NgbPopoverConfig } from '@ng-bootstrap/ng-bootstrap';\nimport { NgSelectComponent } from '@ng-select/ng-select';\nimport { ToastrService } from 'ngx-toastr';\nimport { Subject } from 'rxjs';\nimport { debounceTime, filter } from 'rxjs/operators';\nimport { AnnotatorService } from 'src/app/services/annotator/annotator.service';\nimport { DocumentSystemService } from 'src/app/services/document-system/document-system.service';\nimport { ExpanderService } from 'src/app/services/expander/expander.service';\nimport { LexicalEntriesService } from 'src/app/services/lexical-entries/lexical-entries.service';\nimport { SearchFormComponent } from './search-form/search-form.component';\ndeclare var $: JQueryStatic;\n\n@Component({\n  selector: 'app-epigraphy-form',\n  templateUrl: './epigraphy-form.component.html',\n  styleUrls: ['./epigraphy-form.component.scss']\n})\nexport class EpigraphyFormComponent implements OnInit, OnDestroy {\n\n  @Input() epiData: any;\n  object: any;\n  tokenArray: FormArray;\n  textEpigraphy = '';\n  leidenLines : any;\n\n  private bind_subject: Subject<any> = new Subject();\n  searchResults = [];\n  memoryForms = [];\n\n  selectedPopover = {\n    htmlNodeName: '',\n    tokenId: ''\n  };\n\n  spanSelection;\n\n  data: object;\n  sel_t: object;\n  message: string;\n  isOpen = false;\n  bind = this;\n  @ViewChildren('span_modal') spanPopovers: QueryList<any>;\n  @ViewChild('search_form') searchForm : SearchFormComponent;\n\n  //@ViewChild('span_modal') spanPopover: ElementRef;\n\n\n  \n  epigraphyForm = new FormGroup({\n    tokens: new FormArray([this.createToken()]),\n  })\n\n\n  multiWordMode = false;\n  annotationArray = [];\n  token_annotationArray = [];\n  epidoc_annotation_array = [];\n  leiden_array = [];\n  translation_array = [];\n\n  fileId;\n\n  isEmptyFile = false;\n\n  @HostListener('document:mouseup', ['$event'])\n  onMouseUp(event): void {\n    setTimeout(() => {\n      let evtPath = Array.from(event.path);\n      let isMultiwordRequest = false;\n      evtPath.some((element: HTMLElement) => {\n        //console.log(element)\n        if (element.classList != undefined) {\n          if (element.classList.contains('ok-button')) {\n            isMultiwordRequest = true;\n            return true;\n          } else {\n            isMultiwordRequest\n            return false;\n          }\n        } else {\n          return false;\n        }\n      })\n\n      \n      let event_el;\n\n      if (isMultiwordRequest) {\n        let multiWordArray = Array.from(document.getElementsByClassName('multiword'));\n        multiWordArray.forEach(element => {\n          let children = Array.from(element.children);\n          children.forEach(subchild => {\n            if (subchild.classList.contains('multiword-button')) {\n              event_el = element.children\n              subchild.remove();\n            }\n          })\n        });\n        document.querySelectorAll('.multiword').forEach(element => {\n          this.renderer.removeClass(element, 'multiword');\n          this.renderer.addClass(element, 'multiword-span-' + 1);\n          \n          let prev = element.previousElementSibling;\n          let next = element.nextElementSibling;\n\n          if (prev != undefined) {\n            if (prev.classList != undefined) {\n              let classNames = prev.className;\n              let matchTest = /(^|\\s)(multiword-span-\\d)(\\s|$)/.test(classNames)\n              if (matchTest) {\n                this.renderer.addClass(element, 'border-left-0')\n              }\n            }\n          } else if (next != undefined) {\n            if (next.classList != undefined) {\n              let classNames = next.className;\n              let matchTest = /(^|\\s)(multiword-span-\\d)(\\s|$)/.test(classNames)\n              if (matchTest) {\n                this.renderer.addClass(element, 'border-right-0')\n              }\n            }\n          }\n        })\n\n        let position_popover;\n      \n        Array.from(event_el).forEach(\n          (element : HTMLElement)=>{\n            position_popover = element.getAttribute('position');\n            return;\n          }\n        )\n        \n        this.message = '';\n        \n        this.spanPopovers.toArray()[position_popover-1].open();\n        \n        let popover_id = this.spanPopovers.toArray()[position_popover-1]._ngbPopoverWindowId;\n        this.selectedPopover.tokenId = (position_popover -1).toString();\n        this.annotatorService.triggerSearch(null);\n        this.selectedPopover.htmlNodeName = popover_id;\n        let multiwordSpan = Array.from(document.querySelectorAll(\"[class*=multiword-span-]\"));\n        let spansArray = [];\n        multiwordSpan.forEach(element => {\n          let children = Array.from(element.children);\n          children.forEach(\n            span=>{\n              let position = parseInt(span.getAttribute('position'));\n              let object = {\n                start : this.object[position-1].begin,\n                end : this.object[position-1].end\n              }\n              \n              spansArray.push(object)\n            }\n          )\n        })\n\n        console.log(spansArray);\n        this.spanSelection = spansArray;\n        \n        \n      } else {\n        if (!this.multiWordMode) {\n\n          //console.log(document.querySelectorAll('.token'))\n          document.querySelectorAll('.multiword').forEach(element => {\n            this.renderer.removeClass(element, 'multiword')\n            this.renderer.removeClass(element, 'border-right-0');\n          });\n        }\n      }\n    }, 10);\n  }\n\n  @HostListener('document:mousedown', ['$event'])\n  onGlobalClick(event): void {\n\n    setTimeout(() => {\n\n      //PREVENIRE CHE I POPOVER SI CHIUDANO SE CLICCATI FUORI DAL COMPONENTE\n      let index = this.selectedPopover.tokenId\n\n      //SE IL CLICK AVVIENE FUORI QUESTO COMPONENTE, L'EVENTUALE POPOVER DEVE RESTARE APERTO, \n      //SE SI CLICCA QUESTO COMPONENTE IL POPOVER VA CHIUSO E RIATTIVATO L'AUTOCLOSE\n      if (index != '') {\n        //console.log(this.config)\n        let popover = this.spanPopovers.toArray()[index];\n       /*  if (popover.isOpen()) {\n          //console.log(popover.isOpen())\n          //console.log(popover)\n          //popover.autoClose = false;\n        } */\n      }\n\n\n\n    }, 17);\n\n    setTimeout(() => {\n      /* console.log(event.path) */\n      let evtPath = Array.from(event.path)\n      //console.log(this.selectedPopover.htmlNodeName)\n      let htmlNode = document.getElementById(this.selectedPopover.htmlNodeName)\n      console.log\n      let tokenId = this.selectedPopover.tokenId;\n      if (evtPath.includes(htmlNode)) {\n\n      } else {\n        if(this.object != null){\n          this.object.forEach(element => {\n            //console.log(element.position != tokenId)\n            if (element.position != tokenId) {\n  \n              element.editing = false;\n  \n              this.selectedPopover.htmlNodeName = '';\n              this.selectedPopover.tokenId = ''\n            }\n          });\n        }\n        \n\n        let parentMarkElement = document.getElementsByClassName('token-' + tokenId)[0];\n        //console.log(document.getElementsByClassName('token-'+tokenId))\n        if (parentMarkElement != null) {\n          let i = 0;\n          Array.from(parentMarkElement.childNodes).forEach(\n            element => {\n//              console.log(element)\n              let textMarkElement = element.textContent;\n              let prev, next;\n              if (element['classList'] != undefined) {\n\n                if (element['classList'].contains('mark') || element['classList'].contains('mark_test')) {\n\n                  prev = Array.from(parentMarkElement.childNodes)[i - 1];\n                  next = Array.from(parentMarkElement.childNodes)[i];\n\n                  if (next == element) {\n                    next = Array.from(parentMarkElement.childNodes)[i + 1];\n                  }\n\n                  if (prev != undefined) {\n                    if (prev.nodeName == '#text') {\n                      textMarkElement = prev.textContent += textMarkElement;\n                      prev.remove();\n                    }\n                  }\n\n                  if (next != undefined) {\n                    if (next.nodeName == '#text') {\n                      textMarkElement += next.textContent;\n                      next.remove()\n                    }\n                  }\n\n                  const text = this.renderer.createText(textMarkElement)\n\n                  this.renderer.insertBefore(parentMarkElement, text, element)\n                  //this.renderer.removeChild(parentMarkElement, element);\n\n                  element.remove();\n\n\n                }\n              }\n\n              i++;\n            }\n          );\n\n        }\n\n      }\n    }, 17);\n\n  }\n\n\n\n  @HostListener('window:keydown', ['$event'])\n  enableMultiword(event: KeyboardEvent) {\n    /* console.log(event) */\n    if (event.altKey && event.ctrlKey) {\n      this.multiWordMode = true;\n      if(this.object != undefined){\n        this.object.forEach(element => {\n          element.editing = false;\n          this.selectedPopover.htmlNodeName = '';\n          this.selectedPopover.tokenId = ''\n        });\n      }\n      \n    } else if (event.code == 'Escape') {\n\n      let htmlNode = document.getElementById(this.selectedPopover.htmlNodeName)\n      let tokenId = this.selectedPopover.tokenId;\n\n      if(this.object != undefined){\n        this.object.forEach(element => {\n          if (element.id != tokenId) {\n  \n            element.editing = false;\n  \n            this.selectedPopover.htmlNodeName = '';\n            this.selectedPopover.tokenId = ''\n          }\n        });\n  \n        let parentMarkElement = document.getElementsByClassName('token-' + tokenId)[0];\n        if (parentMarkElement != null) {\n          let i = 0;\n          Array.from(parentMarkElement.children).forEach(\n            element => {\n              console.log(element)\n              if (element.classList.contains('mark')) {\n  \n                let textMarkElement = element.textContent;\n                const text = this.renderer.createText(textMarkElement)\n                //parentMarkElement.textContent = parentMarkElement.textContent.trim();\n                //let innerText = parentMarkElement.textContent;\n                this.renderer.insertBefore(parentMarkElement, text, element)\n                this.renderer.removeChild(parentMarkElement, element);\n                //parentMarkElement.insertBefore(text, parentMarkElement.childNodes[i+1]);\n                //let children = parentMarkElement.children;\n                //parentMarkElement.textContent = innerText\n                i++;\n                return;\n              }\n              i++;\n            }\n          );\n  \n        }\n      }\n      \n\n\n\n    }\n  }\n\n  @HostListener('window:keyup', ['$event'])\n  disableMultiword(event: KeyboardEvent) {\n    if (!event.altKey && !event.ctrlKey) {\n      this.multiWordMode = false;\n    }\n  }\n\n  constructor(private router : Router, private annotatorService: AnnotatorService, private expander: ExpanderService, private renderer: Renderer2, private documentService: DocumentSystemService, private formBuilder: FormBuilder, private toastr: ToastrService, private lexicalService: LexicalEntriesService, private config: NgbPopoverConfig) { \n    /* this.router.events.pipe(filter(e => e instanceof NavigationEnd)).subscribe((val) => {\n      setTimeout(() => {\n        this.lexicalService.sendToCoreTab(null);\n        this.documentService.sendToEpigraphyTab(null)\n        this.documentService.sendTextToEpigraphyTab(null);\n        this.expander.openCollapseEdit(false);\n        this.expander.openCollapseEpigraphy(false);\n        this.expander.expandCollapseEpigraphy(false);\n        this.expander.expandCollapseEdit(false)\n      }, 1000);\n      \n    }) */\n  }\n\n\n  ngOnInit(): void {\n\n    /* this.config.autoClose = false */\n\n\n    this.epigraphyForm = this.formBuilder.group({\n      tokens: this.formBuilder.array([this.createToken()])\n    })\n\n    this.documentService.epigraphyTextData$.subscribe(\n      data=>{\n        if(data != null){\n          this.textEpigraphy = data;\n        }else{\n          this.textEpigraphy = '';\n        }\n      },error=>{\n        console.log(error)\n      }\n    )\n\n    this.documentService.epigraphyLeidenData$.subscribe(\n      data=>{\n        console.log(data)\n        if(data != null){\n          this.leidenLines = data;\n\n\n        }else{\n          this.leidenLines = [];\n        }\n      },error=>{\n        console.log(error)\n      }\n    )\n\n    this.documentService.epigraphyTranslationData$.subscribe(\n      data=>{\n        console.log(data)\n        if(data != null){\n          this.translation_array = data;\n\n\n        }else{\n          this.translation_array = [];\n        }\n      },error=>{\n        console.log(error)\n      }\n    )\n\n\n\n    this.bind_subject.pipe(debounceTime(100)).subscribe(\n      data => {\n        /* console.log(data) */\n        this.bindSelection(data.popover, data.evt, data.i);\n      }\n    )\n\n    this.annotatorService.deleteAnnoReq$.subscribe(\n      data=> {\n\n        let localArray = [];\n        if(data != null){\n          \n\n          this.annotationArray = this.annotationArray.filter(\n            element => {\n              return element.id != data.id\n            }\n          )\n          //console.log(this.annotationArray)\n\n          this.object.forEach(element => {\n            if(element.id == data.node_id){\n              /* let position = element.position;\n\n              let elementHTML = document.getElementsByClassName('token-'+(position-1))[0]\n              this.renderer.removeClass(elementHTML, 'annotation'); */\n\n              let start = element.begin;\n              let end = element.end;\n\n              this.annotationArray.forEach(element => {\n                if(element.spans[0].start >= start  && element.spans[0].end <= end){\n                  localArray.push(element);\n                }\n              })\n\n              console.log(localArray, localArray.length);\n\n              if(localArray.length == 0){\n                let position = element.position;\n                let elementHTML = document.getElementsByClassName('token-'+(position-1))[0]\n                this.renderer.removeClass(elementHTML, 'annotation');\n              }\n            }\n          });\n        }\n      }\n    )\n\n  }\n\n\n  ngOnChanges(changes: SimpleChanges) {\n    setTimeout(() => {\n      if(changes.epiData.currentValue != null){\n        if (this.object != changes.epiData.currentValue) {\n          this.tokenArray = this.epigraphyForm.get('tokens') as FormArray;\n          this.tokenArray.clear();\n          this.spanSelection = null;\n          this.annotationArray = [];\n          this.epidoc_annotation_array = [];\n\n          /* \n  \n          this.denotesArray = this.coreForm.get('denotes') as FormArray;\n          this.denotesArray.clear();\n  \n          this.cognatesArray = this.coreForm.get('cognate') as FormArray;\n          this.cognatesArray.clear();\n  \n          this.evokesArray = this.coreForm.get('evokes') as FormArray;\n          this.evokesArray.clear();\n  \n          this.memoryPos = '';\n  \n          this.staticMorpho = [] */\n        }\n        \n        \n        this.object = changes.epiData.currentValue['tokens'];\n        let element_id = changes.epiData.currentValue['element_id']\n        this.fileId = changes.epiData.currentValue['epidoc_id']\n        console.log(this.object)\n        if (this.object != null) {\n\n          if(this.object.length == 0){\n            this.isEmptyFile = true;\n            console.log(\"FILE VUOTO\")\n          }else{\n            this.isEmptyFile = false;\n            console.log(\"FILE NON VUOTO\")\n          }\n  \n          //TODO: popolare array form con tokens\n          //console.log(this.object)\n          \n          this.annotatorService.getAnnotation(element_id).subscribe(\n            data=>{\n              console.log(data);\n              if(data.annotations != undefined){\n                data.annotations.forEach(element => {\n                  //console.log(element)\n                  if(element.layer == 'attestation'){\n                    if(element.attributes.bibliography == undefined){\n                      element.attributes['bibliography'] = [];\n                    }\n                    \n                    if(!Array.isArray(element.attributes.bibliography)){\n                      let tmp_arr = [];\n                      tmp_arr.push(element.attributes['bibliography']);\n                      element.attributes['bibliography'] = tmp_arr;\n                    }\n                    \n                    \n                    if(Array.isArray(element.attributes['bibliography'])){\n                      Array.from(element.attributes['bibliography']).forEach(element => { \n                        \n                        if(element['note'] == undefined){\n                          console.log(\"cusa\")\n                          element['note'] = \"\";\n                        } \n                        \n                        if(element['textualRef']== undefined){\n                          element['textualRef'] = \"\";\n                        } \n                      });\n                    }\n                    this.annotationArray.push(element);\n                  }else if(element.layer == 'epidoc'){\n                    this.epidoc_annotation_array.push(element);\n                  }\n                });\n                //this.annotationArray = data.annotations;\n                if(this.annotationArray.length > 0){\n                  \n                  this.lexicalService.triggerAttestationPanel(true);\n                  this.lexicalService.sendToAttestationPanel(this.annotationArray);\n\n                  var that2 = this;\n                  var timer_object = setInterval((val)=>{\n                    try {\n                      if(this.object != null){\n                        this.object.forEach(element => {\n                          let startElement = element.begin;\n                          let endElement = element.end;\n                          this.annotationArray.forEach(annotation => {\n                            if(annotation.spans.length == 1){\n                              let startAnnotation = annotation.spans[0].start;\n                              let endAnnotation = annotation.spans[0].end;\n      \n                              if(startAnnotation >= startElement  && endAnnotation <= endElement){\n                                let positionElement = element.position;\n                                let elementHTML = document.getElementsByClassName('token-'+(positionElement-1))[0]\n                                var that = this;\n                                var timer = setInterval((val)=>{                \n                                    \n                                    try{\n                                        if(elementHTML != undefined){\n                                          that.renderer.addClass(elementHTML, 'annotation');\n                                          clearInterval(timer)\n                                        }\n                                    }catch(e){\n                                        console.log(e)\n                                    }\n                                        \n                                          \n                                }, 250)\n                                \n                                \n                                \n                              }\n                            }\n                          });\n                          \n                        });\n                        clearInterval(timer_object)\n                      }\n                      \n                    } catch (error) {\n                      console.log(error)\n                    }\n                  }, 250)\n\n                 \n\n                }else{\n                  this.annotationArray = [];\n                  this.lexicalService.triggerAttestationPanel(false);\n                  this.lexicalService.sendToAttestationPanel(null);\n\n                }\n\n                /* setTimeout(() => {\n                  \n                  console.log(this.epidoc_annotation_array); \n                  \n                  let epidoc_aggregator = []\n                  if(this.epidoc_annotation_array.length > 0){\n                    this.object.forEach(element => {\n                      \n                      let object = {};\n                      object['element'] = element.text;\n                      object['element-span'] = {\n                        start : element.begin,\n                        end : element.end\n                      };\n                      let epidoc_array = [];\n                      let start = element.begin;\n                      let end = element.end;\n                      this.epidoc_annotation_array.forEach(\n                        epidoc => {\n                          \n                          epidoc.spans.forEach(span => {\n                            if(span.start >= start && span.end <= end){\n                              epidoc_array.push(epidoc)\n                            }\n                          });\n                        }\n                      )\n\n                      object['epidoc'] = epidoc_array;\n                      epidoc_aggregator.push(object)\n                    });\n                  }\n\n                  console.log(epidoc_aggregator);\n\n                  let leiden_string = \"\";\n\n                  epidoc_aggregator.forEach(\n                    token =>{\n                      let start = token['element-span'].start;\n                      let end = token['element-span'].end;\n                      let text = token.element;\n\n                      let edit_dict = [];\n\n                      token.epidoc.forEach(epidoc => {\n\n                        let obj = {};\n                        \n                        let relative_start, relative_end;\n                        relative_start = epidoc.spans[0].start-start;\n                        relative_end = relative_start + (epidoc.spans[0].end - epidoc.spans[0].start);\n\n                        if(relative_end == 0){\n                          relative_end = text.length;\n                        }\n\n                        if(epidoc.value == 'tei:lb' && epidoc.attributes.break == undefined){\n                          obj['start'] = relative_start;\n                          obj['end'] = relative_end;\n                          obj['transformed'] = '\\n';\n\n                          edit_dict.push(obj);\n\n                        }else if(epidoc.value == 'tei:ex'){\n                          //console.log(token, epidoc, relative_start, relative_end)\n                          let substring = text.substring(relative_start, relative_end)\n\n                          obj['start'] = relative_start;\n                          obj['end'] = relative_end;\n                          obj['transformed'] = '('+substring+')';\n\n                          edit_dict.push(obj);\n\n                          \n                        }else if(epidoc.value == 'tei:supplied'){\n                          //console.log(token, epidoc, relative_start, relative_end)\n                          let substring = text.substring(relative_start, relative_end)\n                          \n                          obj['start'] = relative_start;\n                          obj['end'] = relative_end;\n                          obj['transformed'] = '['+substring+']'\n\n                          edit_dict.push(obj);\n                        }else if(epidoc.value == 'tei:unclear'){\n                          //console.log(token, epidoc, relative_start, relative_end)\n                          let substring = text.substring(relative_start, relative_end);\n                          let tmp_string = \"\";\n                          Array.from(substring).forEach((element : string) => {\n                            //console.log(element.codePointAt(0).toString(16))\n                            element = element+'\\u0323'\n                            leiden_string += element;\n                            tmp_string += element;\n                          });\n                          \n                          obj['start'] = relative_start;\n                          obj['end'] = relative_end;\n                          obj['transformed'] = tmp_string\n\n                          edit_dict.push(obj);\n                        }else if(epidoc.value == 'tei:pc' && text == '.'){\n                          obj['start'] = relative_start;\n                          obj['end'] = relative_end;\n                          obj['transformed'] = ''\n\n                          edit_dict.push(obj)\n                        }\n                      });\n\n\n\n                      console.log(edit_dict, text);\n                      if(edit_dict.length > 0){\n                        let tmp_string = '';\n                        let current_offset = 0;\n                        edit_dict.forEach(element =>{\n                          if(element.transformed == '\\n'){\n                            if(element.start == current_offset){\n                              tmp_string += '\\n';\n                              if(edit_dict.indexOf(element)== edit_dict.length-1 && current_offset < text.length){\n                                tmp_string += text.substring(current_offset, text.length);\n                              }\n                            }else if(element.end == text.length){\n                              if(edit_dict.indexOf(element)== edit_dict.length-1 && current_offset < text.length){\n                                tmp_string += text.substring(current_offset, text.length);\n                              }\n                              tmp_string += '\\n';\n                            }\n                            \n                            //console.log(edit_dict.indexOf(element), edit_dict.length)\n                          }else{\n                            if(element.start == current_offset){\n                              tmp_string += element.transformed;;\n                              current_offset = element.end;\n                              //console.log(edit_dict.indexOf(element), edit_dict.length-1)\n\n                              if(edit_dict.indexOf(element)== edit_dict.length-1 && current_offset < text.length){\n                                tmp_string += text.substring(current_offset, text.length);\n                              }\n                            }else if(current_offset != element.start){\n                              tmp_string += text.substring(current_offset, element.start) + element.transformed;\n                              current_offset = element.end;\n\n                              //console.log(edit_dict.indexOf(element)== edit_dict.length-1, element.transformed, current_offset, text.length)\n                              \n                              if(edit_dict.indexOf(element)== edit_dict.length-1 && current_offset < text.length){\n                                tmp_string += text.substring(current_offset, text.length);\n                              }\n                            }\n                          }\n                        });\n                        console.log(tmp_string);\n                        leiden_string += tmp_string;\n                      }else{\n                        leiden_string += text;\n                      }\n                      \n\n                    }\n                  )\n\n                  console.log(leiden_string)\n                  \n\n                }, 100); */\n                \n              }else{\n                this.annotationArray = [];\n                this.epidoc_annotation_array = [];\n                this.lexicalService.triggerAttestationPanel(null);\n                this.lexicalService.sendToAttestationPanel(null);\n              }\n              \n            },error=>{\n              console.log(error)\n            }\n          )\n        }\n      }else{\n        this.object = null;\n      }\n      \n\n\n    }, 10)\n\n  }\n\n  ngOnDestroy(){\n    \n  }\n\n\n\n  createToken(token?) {\n    if (token != undefined) {\n      return this.formBuilder.group({\n        entity: new FormControl(token)\n      })\n    } else {\n      return this.formBuilder.group({\n        entity: new FormControl('')\n      })\n    }\n  }\n\n  enterCell(evt, i) {\n    //console.log(\"enter cell \" + i);\n    //console.log(evt);\n    if(evt.target.innerText != '.' && evt.target.innerText != ':' && evt.target.innerText != ''){\n      let parentNode = evt.target.parentElement\n      if (parentNode != undefined) {\n        let classNames = parentNode.className;\n        let matchTest = /(^|\\s)(multiword-span-\\d)(\\s|$)/.test(classNames)\n        if (matchTest) {\n          //TODO: highlight su div che contiene multiword\n          \n        } else {\n          this.object[i]['selected'] = true;\n          \n          if (window.getSelection) {\n            if (window.getSelection().empty) {  // Chrome\n              window.getSelection().empty();\n            } else if (window.getSelection().removeAllRanges) {  // Firefox\n              window.getSelection().removeAllRanges();\n            }\n          }\n        }\n      }\n    }\n    \n\n\n\n  }\n\n  leavingCell(evt, i) {\n    //console.log(\"leaving cell \" + i);\n    this.object[i]['selected'] = false;\n\n  }\n\n  deleteSelection(popover, evt, i) {\n    setTimeout(() => {\n\n    }, 10);\n    let popoverHtml = popover._elementRef.nativeElement;\n    //console.log(popoverHtml.querySelectorAll('.annotation'))\n    if (popoverHtml.querySelectorAll('.annotation').length > 0) {\n\n    } else {\n      popoverHtml.textContent = popoverHtml.textContent.trim();\n    }\n    /* if(popoverHtml.querySelectorAll('.mark').length > 0){\n      let innerText = popoverHtml.innerText;\n      const childElements = popoverHtml.children;\n      for (let child of childElements) {\n        console.log(child)\n        this.renderer.removeChild(popoverHtml, child);\n      }\n      console.log(innerText)\n      popoverHtml.innerText = innerText\n    }else if(popoverHtml.querySelectorAll('.mark').length == 0){\n      \n    } */\n\n  }\n\n  triggerBind(popover, evt, i) {\n    if (!this.multiWordMode) {\n      if(evt.target.innerText != '.' && evt.target.innerText != ':' && evt.target.innerText != ''){\n        this.bind_subject.next({ popover, evt, i })\n      }\n      \n    } else {\n      //console.log(\"multiword mode\", i)\n      console.log(popover);\n      this.multiWordCreator(popover, evt, i);\n    }\n  }\n\n\n  multiWordCreator(popover, evt, i) {\n    let span = popover._elementRef.nativeElement.parentNode.parentNode.childNodes[i];\n    let prevSibling, nextSibling;\n    prevSibling = popover._elementRef.nativeElement.parentNode.previousSibling;\n    nextSibling = popover._elementRef.nativeElement.parentNode.nextSibling;\n\n\n\n    if (span.classList.contains('multiword')) {\n      this.renderer.removeClass(span, 'multiword')\n      if (prevSibling != null) {\n        if (prevSibling.classList.contains('multiword')) {\n          this.renderer.removeClass(prevSibling, 'border-right-0')\n        }\n      }\n      if (nextSibling != null) {\n        if (nextSibling.classList != undefined) {\n          if (nextSibling.classList.contains('multiword')) {\n            this.renderer.removeClass(span, 'border-right-0')\n          }\n        }\n\n      }\n      let multiWordArray = Array.from(document.getElementsByClassName('multiword'));\n      multiWordArray.forEach(element => {\n        let children = Array.from(element.children);\n        children.forEach(subchild => {\n          if (subchild.classList.contains('multiword-button')) {\n            subchild.remove();\n          }\n        })\n      });\n\n      if (multiWordArray.length > 1) {\n        console.log(multiWordArray[multiWordArray.length - 1])\n        this.createDynamicButtons(multiWordArray[multiWordArray.length - 1]);\n      }\n\n\n    } else {\n      this.renderer.addClass(span, 'multiword');\n      if (prevSibling != null) {\n        if (prevSibling.classList.contains('multiword')) {\n          this.renderer.addClass(prevSibling, 'border-right-0');\n        }\n      }\n      if (nextSibling != null) {\n        if (nextSibling.classList != undefined) {\n          if (nextSibling.classList.contains('multiword')) {\n            this.renderer.addClass(span, 'border-right-0')\n          }\n        }\n      }\n      let multiWordArray = Array.from(document.getElementsByClassName('multiword'));\n      multiWordArray.forEach(element => {\n        let children = Array.from(element.children);\n        children.forEach(subchild => {\n          if (subchild.classList.contains('multiword-button')) {\n            subchild.remove();\n          }\n        })\n      });\n\n      if (multiWordArray.length > 1) {\n        this.createDynamicButtons(span);\n      } else if (multiWordArray.length == 1) {\n        multiWordArray.forEach(element => {\n          let children = Array.from(element.children);\n          children.forEach(subchild => {\n            if (subchild.classList.contains('multiword-button')) {\n              subchild.remove();\n            }\n          })\n        });\n      }\n    }\n\n  }\n\n  createDynamicButtons(span) {\n    let div = this.renderer.createElement('div');\n    this.renderer.addClass(div, 'multiword-button');\n    let okButton = this.renderer.createElement('button');\n    let leaveButton = this.renderer.createElement('button');\n\n    let okIcon = this.renderer.createElement('i');\n    this.renderer.addClass(okIcon, 'fas');\n    this.renderer.addClass(okIcon, 'fa-check');\n\n    let leaveIcon = this.renderer.createElement('i');\n    this.renderer.addClass(leaveIcon, 'fas');\n    this.renderer.addClass(leaveIcon, 'fa-times');\n\n    this.renderer.appendChild(okButton, okIcon);\n    this.renderer.appendChild(leaveButton, leaveIcon);\n    this.renderer.setStyle(okButton, 'position', 'absolute');\n    this.renderer.setStyle(okButton, 'top', '-1.5rem');\n    this.renderer.setStyle(okIcon, 'font-size', '10px');\n    this.renderer.setStyle(okIcon, 'width', '10px');\n\n    this.renderer.addClass(okButton, 'ok-button');\n    this.renderer.addClass(leaveButton, 'no-button')\n\n    this.renderer.setStyle(leaveButton, 'position', 'absolute');\n    this.renderer.setStyle(leaveButton, 'top', '-1.5rem');\n    this.renderer.setStyle(leaveIcon, 'font-size', '10px');\n    this.renderer.setStyle(leaveIcon, 'width', '10px');\n    this.renderer.setStyle(leaveButton, 'left', '1.5rem');\n\n    this.renderer.appendChild(div, okButton)\n    this.renderer.appendChild(div, leaveButton)\n    this.renderer.appendChild(span, div);\n  }\n\n  populateLocalAnnotation(tokenData){\n    this.token_annotationArray = [];\n    //console.log(anno)\n    this.annotationArray.forEach(\n      annotation => {\n        //console.log(annotation)\n        let start_token, end_token;\n        if(!this.isEmptyFile){\n          start_token = tokenData.begin;\n          end_token = tokenData.end;\n        }else{\n          start_token = tokenData.spans[0].start;\n          end_token = tokenData.spans[0].end;\n        }\n\n        annotation.spans.forEach(element => {\n          if( element.start >= start_token  &&  element.end <= end_token){\n            this.token_annotationArray.push(annotation);\n          }\n        });\n\n        \n      }\n    )\n    if(this.token_annotationArray.length > 0){\n      this.lexicalService.triggerAttestationPanel(true);\n      this.lexicalService.sendToAttestationPanel(this.token_annotationArray)\n    }\n  }\n\n  bindSelection(popover, evt, i) {\n\n    console.log(this.object[i])\n    this.token_annotationArray = [];\n    this.annotationArray.forEach(\n      annotation => {\n\n        let start_token = this.object[i].begin;\n        let end_token = this.object[i].end;\n\n        //console.log(annotation.spans)\n\n        if(annotation.spans.length == 1){\n          annotation.spans.forEach(element => {\n            if(element.start >= start_token && element.end <= end_token){\n              this.token_annotationArray.push(annotation);\n            }\n          });\n        }else{\n\n        }\n      }\n    )\n\n    if(this.token_annotationArray.length > 0){\n      this.lexicalService.triggerAttestationPanel(true)\n      this.lexicalService.sendToAttestationPanel(this.token_annotationArray);\n    }else{\n      this.lexicalService.triggerAttestationPanel(false)\n      this.lexicalService.sendToAttestationPanel(null);\n    }\n\n    //console.log(evt)\n    setTimeout(() => {\n      \n      this.message = '';\n      this.object[i]['editing'] = true;\n      this.message = window.getSelection().toString();\n      if (this.selectedPopover.htmlNodeName == '') {\n        this.selectedPopover.htmlNodeName = popover._ngbPopoverWindowId;\n        this.selectedPopover.tokenId = i;\n      }\n      else if (popover._ngbPopoverWindowId != this.selectedPopover) {\n        this.selectedPopover.htmlNodeName = popover._ngbPopoverWindowId\n        this.selectedPopover.tokenId = i\n        this.object.forEach(element => {\n          if (element.id != i + 1) {\n            //console.log(element)\n            element.editing = false;\n          } else {\n            //console.log(element)\n            element.editing = true;\n          }\n        });\n      }\n\n      if (popover.isOpen()) {\n\n      } else if (!popover.isOpen()) {\n        popover.open()\n      }\n\n      let popoverHtml = popover._elementRef.nativeElement;\n      let innerText = popoverHtml.innerText;\n      let selection = document.getSelection();\n      let anchorNode = selection.anchorNode;\n      let focusNode = selection.focusNode;\n      let isThereMark, areThereAnnotations;\n      //isThereMark = popoverHtml.querySelectorAll('.mark').length > 0;\n      //areThereAnnotations = popoverHtml.querySelectorAll('.annotation').length > 0;\n\n      if (anchorNode != null && focusNode != null) {\n        let anchorNodeParent = selection.anchorNode.parentNode;\n        let focusNodeParent = selection.focusNode.parentNode;\n\n        if (anchorNodeParent == focusNodeParent && this.message != '' ) { /* && !areThereAnnotations */\n          //SE SELEZIONO UNA PARTE DEL TOKEN\n        \n          if (selection.anchorNode.textContent.trim().length == innerText.length && this.message != innerText) { //!isThereMark && \n            \n            let anchorOffset = selection.anchorOffset;\n            let focusOffset = selection.focusOffset;\n\n\n            if (anchorOffset > focusOffset) {\n              let tmp = anchorOffset;\n              anchorOffset = focusOffset;\n              focusOffset = tmp;\n            }\n\n            //console.log(innerText.substring(anchorOffset, focusOffset))\n            console.log(anchorOffset)\n            console.log(focusOffset);\n\n            popoverHtml.innerText = \"\";\n\n            const span = this.renderer.createElement('span');\n            const l_text = this.renderer.createText(innerText.substring(0, anchorOffset))\n            const text = this.renderer.createText(this.message);\n            const r_text = this.renderer.createText(innerText.substring(focusOffset, innerText.length))\n\n\n            /* console.log(\"l_text:\", l_text)\n            console.log(\"text:\", text)\n            console.log(\"r_text:\", r_text) */\n\n\n            this.renderer.appendChild(span, text)\n            this.renderer.appendChild(popoverHtml, span);\n            this.renderer.addClass(span, 'mark'),\n            this.renderer.setAttribute(span, 'startoffset', anchorOffset.toString());\n            this.renderer.setAttribute(span, 'endoffset', focusOffset.toString())\n\n            if (l_text.textContent != \"\") {\n              this.renderer.insertBefore(popoverHtml, l_text, span);\n            }\n\n            if (r_text.textContent != \"\") {\n              this.renderer.appendChild(popoverHtml, r_text);\n            }\n            //console.log(popoverHtml.childNodes)\n            this.spanSelection = {}\n            this.spanSelection['start'] = this.object[i].begin + anchorOffset;\n            this.spanSelection['end'] = this.object[i].begin + focusOffset;\n            this.annotatorService.triggerSearch(this.message);\n          }else if(selection.anchorNode.textContent.trim().length == innerText.length && this.message == innerText){\n            this.message = '';\n            this.annotatorService.triggerSearch(innerText);\n          }\n        } \n        //SE SELEZIONO L'INTERO TOKEN\n        \n        else if(this.message == ''){\n          this.annotatorService.triggerSearch(innerText);\n          this.spanSelection = {}\n          this.spanSelection['start'] = 0;\n          this.spanSelection['end'] = 0;\n        }\n        /* else if (this.message != '' ) { //&& areThereAnnotations\n          let anchorOffset = selection.anchorOffset;\n          let focusOffset = selection.focusOffset;\n          let range = selection.getRangeAt(0)\n\n          var sel = getSelection(),\n            position = sel.anchorNode.compareDocumentPosition(sel.focusNode),\n            backward = false;\n          // position == 0 if nodes are the same\n          if (!position && sel.anchorOffset > sel.focusOffset || position === Node.DOCUMENT_POSITION_PRECEDING) {\n            backward = true;\n          }\n\n          console.log(backward)\n\n          let startContainer = range.startContainer;\n          let endContainer = range.endContainer;\n          let textStartContainer = range.startContainer.textContent;\n          let textEndContainer = range.endContainer.textContent;\n          let annotations = popoverHtml.querySelectorAll('.annotation')\n\n          //console.log(range.startContainer == range.endContainer)\n          if (range.startContainer == range.endContainer) {\n            if (anchorOffset > focusOffset) {\n              let tmp = anchorOffset;\n              anchorOffset = focusOffset;\n              focusOffset = tmp;\n            }\n            this.message = textStartContainer.substring(range.startOffset, range.endOffset);\n            const span = this.renderer.createElement('span');\n\n            const l_text = this.renderer.createText(textStartContainer.substring(0, range.startOffset))\n            const text = this.renderer.createText(this.message);\n            const r_text = this.renderer.createText(textStartContainer.substring(range.endOffset, textStartContainer.length))\n\n            //console.log(anchorOffset, focusOffset)\n            //console.log(\"l_text:\" , l_text)\n            //console.log(\"text:\" , text)\n            //console.log(\"r_text:\" , r_text)\n\n            //range.startContainer.textContent = '';\n\n\n            this.renderer.appendChild(span, text)\n            this.renderer.addClass(span, 'mark');\n\n            console.log(popoverHtml.childNodes)\n            let i = 0;\n            const getStartEnd = (str, sub) => [str.indexOf(sub), str.indexOf(sub) + sub.length - 1];\n            let generalStartEndOffset = getStartEnd(popoverHtml.textContent, this.message);\n            let children = Array.from(popoverHtml.childNodes).forEach(\n              x => {\n                if (range.startContainer == x) {\n                  range.startContainer.textContent = '';\n\n                  if (l_text.textContent != \"\") {\n                    this.renderer.insertBefore(popoverHtml, l_text, x)\n                  }\n\n\n\n                  this.renderer.setAttribute(span, 'startoffset', anchorOffset.toString());\n                  this.renderer.setAttribute(span, 'endoffset', focusOffset.toString())\n\n                  popoverHtml.insertBefore(span, popoverHtml.childNodes[i + 1]);\n\n                  if (r_text.textContent != \"\") {\n                    popoverHtml.insertBefore(r_text, popoverHtml.childNodes[i + 2]);\n                  }\n                  //@ts-ignore\n                  x.remove()\n                }\n\n                i++;\n              }\n            )\n          } else if (range.startContainer != range.endContainer) {\n            console.log(range)\n            console.log(startContainer);\n            console.log(endContainer)\n\n            if (backward) {\n              let tmp = anchorOffset;\n              anchorOffset = focusOffset;\n              focusOffset = tmp;\n            }\n\n            console.log(anchorOffset, focusOffset)\n\n            this.message = '';\n            let walker = function foo(element, that) {\n\n              let textElement = element.textContent\n              let nextSibling = element.nextSibling;\n              if (element == endContainer) {\n                console.log(\"end container\", endContainer)\n                that.message += textElement.substring(0, focusOffset)\n\n                const span = that.renderer.createElement('span');\n                const text = that.renderer.createText(textElement.substring(0, focusOffset));\n                const r_text = that.renderer.createText(textElement.substring(focusOffset, textElement.length))\n\n\n                that.renderer.appendChild(span, text)\n                that.renderer.addClass(span, 'mark_test');\n\n                let i = 0;\n                const getStartEnd = (str, sub) => [str.indexOf(sub), str.indexOf(sub) + sub.length - 1];\n                let generalStartEndOffset = getStartEnd(popoverHtml.textContent, that.message);\n                let children = Array.from(popoverHtml.childNodes).forEach(\n                  x => {\n                    console.log(i, x)\n                    if (element == x) {\n                      element.textContent = '';\n\n                      //that.renderer.setAttribute(span, 'startoffset', generalStartEndOffset[0]);\n                      //that.renderer.setAttribute(span, 'endoffset', generalStartEndOffset[1])\n\n                      popoverHtml.insertBefore(span, popoverHtml.childNodes[i + 1]);\n\n                      if (r_text.textContent != \"\") {\n                        popoverHtml.insertBefore(r_text, popoverHtml.childNodes[i + 2]);\n                      }\n\n                      //@ts-ignore\n                      x.remove();\n\n                    }\n\n                    i++;\n                  }\n                )\n                return;\n              } else {\n                console.log(\"current element\", element);\n\n\n                if (element == startContainer) {\n                  that.message = textElement.substring(anchorOffset, textElement.length);\n                  const span = that.renderer.createElement('span');\n                  const l_text = that.renderer.createText(textStartContainer.substring(0, anchorOffset))\n                  const text = that.renderer.createText(that.message);\n\n                  that.renderer.appendChild(span, text)\n                  that.renderer.addClass(span, 'mark_test');\n\n                  let i = 0;\n                  const getStartEnd = (str, sub) => [str.indexOf(sub), str.indexOf(sub) + sub.length - 1];\n                  let generalStartEndOffset = getStartEnd(popoverHtml.textContent, that.message);\n                  let children = Array.from(popoverHtml.childNodes).forEach(\n                    x => {\n                      if (element == x) {\n                        element.textContent = '';\n\n                        if (l_text.textContent != \"\") {\n                          that.renderer.insertBefore(popoverHtml, l_text, x)\n                        }\n\n                        //that.renderer.setAttribute(span, 'startoffset', generalStartEndOffset[0]);\n                        popoverHtml.insertBefore(span, popoverHtml.childNodes[i + 1]);\n                        //@ts-ignore\n                        x.remove();\n                      }\n\n                      i++;\n                    }\n                  )\n                }\n\n                if (element.classList == undefined && element != startContainer) {\n                  that.message += element.textContent;\n                  const span = that.renderer.createElement('span');\n                  const text = that.renderer.createText(element.textContent);\n\n                  that.renderer.appendChild(span, text)\n                  that.renderer.addClass(span, 'mark_test');\n\n                  let i = 0;\n                  const getStartEnd = (str, sub) => [str.indexOf(sub), str.indexOf(sub) + sub.length - 1];\n                  let generalStartEndOffset = getStartEnd(popoverHtml.textContent, that.message);\n                  let children = Array.from(popoverHtml.childNodes).forEach(\n                    x => {\n                      if (element == x) {\n                        element.textContent = '';\n                        //that.renderer.setAttribute(span, 'startoffset', generalStartEndOffset[0]);\n                        //that.renderer.setAttribute(span, 'endoffset', generalStartEndOffset[1])\n                        popoverHtml.insertBefore(span, popoverHtml.childNodes[i + 1]);\n                        //@ts-ignore\n                        x.remove();\n                      }\n\n                      i++;\n                    }\n                  )\n\n                }\n\n                 //if(element.classList != undefined){\n                   //if(element.classList.contains('annotation')){\n                     \n                   //}\n                // }\n\n                if (nextSibling != null) {\n                  foo(nextSibling, that)\n                }\n              }\n            }\n\n            walker(startContainer, this)\n          }\n\n\n        } */\n      }\n\n      \n\n\n      //TODO: inserire gestione di selezione per le multiword\n      let parentNode = evt.target.parentElement;\n      let classNames = parentNode.className;\n\n      if(/(^|\\s)(multiword-span-\\d)(\\s|$)/.test(classNames)){\n        let multiwordSpan = Array.from(document.querySelectorAll(\"[class*=multiword-span-]\"));\n        let text = ''; \n        multiwordSpan.forEach(element => {\n          console.log(element)\n          text += element.textContent + ' ';\n        })\n        //this.annotatorService.triggerSearch(text);\n      }\n    }, 10);\n\n  }\n\n  triggerEmptySearch(){\n    this.annotatorService.triggerSearch('');\n  }\n\n  deleteAnnotation(annotation, index, token){\n    let anno_id = annotation.id;\n    let token_position = token.position;\n    this.annotatorService.deleteAnnotation(anno_id).subscribe(\n      data=> {\n        console.log(data);\n        /* let popover = document.getElementsByClassName('token-'+(token_position -1))[0]      \n        this.renderer.removeClass(popover, \"annotation_entire\");\n        this.renderer.removeClass(popover, \"unselectable\"); */\n\n        this.lexicalService.triggerAttestationPanel(false)\n      },\n      error => {\n        console.log(error)\n      }\n    )\n    this.token_annotationArray.splice(index, 1)\n    this.annotationArray.splice(index, 1);\n  }\n\n\n  showAllAnnotations(){\n    this.lexicalService.triggerAttestationPanel(true)\n    this.lexicalService.sendToAttestationPanel(this.annotationArray);\n  }\n\n  replaceBetween(origin, startIndex, endIndex, insertion) {\n    return origin.substring(0, startIndex) + insertion + origin.substring(endIndex);\n  }\n\n}\n\n","\n\n<div class=\"card\">\n    <div class=\"card-body\">\n        <div class=\"form-group row ml-2 mt-3 mr-2 showall\" *ngIf=\"annotationArray.length != 0\">\n            <button class=\"btn btn-light btn-lg\" (click)=\"showAllAnnotations()\" title=\"Show all annotations\"><i\n                    class=\"fas fa-eye\"></i></button>\n        </div>\n    \n        <div class=\"form-group row ml-2 mt-3 mr-2\" *ngIf=\"object != null && object.length != 0\">\n            <h6>Linker</h6>\n        \n        </div>\n        \n        <div class=\"form-group row ml-2 mt-3 mr-2 empty\" *ngIf=\"isEmptyFile\">\n            <h6 class=\"mr-2\">Add attestation</h6>\n        \n            <button #button_modal=\"ngbPopover\" type=\"button\" class=\"btn btn-outline-secondary token mb-2\"  container=\"body\"  popoverTitle=\"Pop title\" \n            [autoClose]=\"'outside'\" [ngbPopover]=\"tokenPopover\" [placement]=\"'bottom'\"  popoverClass=\"token_modal\" (click)=\"triggerEmptySearch()\">\n            <i class=\"fa fa-plus\"></i>\n            </button>\n        \n            <ng-template #tokenPopover>\n        \n                <div class=\"card\">\n                    <div class=\"card-header\">\n                        <p>Add a form:</p>\n                       \n                    </div>\n                    <div class=\"card-body\">\n                        <app-search-form [bind]=\"bind\" #search_form></app-search-form>\n                        \n                      \n                    </div>\n        \n                </div>\n        \n        \n            </ng-template>\n        \n        </div>\n        \n        \n        \n        <form [formGroup]=\"epigraphyForm\" *ngIf=\"object != null && object.length != 0\">\n        \n            <div class=\"form-group row ml-2 mt-3 mr-2 panel\">\n        \n                <div *ngFor=\"let token of object; let i = index\" class=\"panel-body\">\n                    <!-- {{multiWordMode && (token.text == '' || token.text == '.' || token.text == ':')}} -->\n                    <span #span_modal=\"ngbPopover\" \n                        [attr.position]=\"token.position\"\n                        [ngClass]=\"{'unselectable': !token.selected, 'selected' : token.selected, 'editing' : token.editing}\"\n                        class=\"token token-{{i}} p-2\" style=\"display: block\" container=\"body\" [triggers]=\"manual\"\n                        [placement]=\"'bottom'\" [popoverTitle]=\"token.value\" [animation]=\"false\" [autoClose]=\"'outside'\"\n                        [disablePopover]=\"multiWordMode || (token.text == '' || token.text == '.' || token.text == ':')\" [ngbPopover]=\"tokenPopover\" (mouseenter)=\"enterCell($event, i)\"\n                        (mouseleave)=\"leavingCell($event, i)\" popoverClass=\"token_modal\"\n                        (mousedown)=\"deleteSelection(span_modal, $event, i)\" (mouseup)=\"triggerBind(span_modal, $event, i);\">\n                        {{token.text}}\n                    </span>\n        \n        \n        \n        \n                    <!-- ################## POPOVER TEMPLATE ################# -->\n                    <ng-template #tokenPopover>\n                       \n        \n                        <div class=\"card\">\n                            <div class=\"card-header\">\n                                <p>Add a form:</p>\n                               \n                            </div>\n                            <div class=\"card-body\">\n                                <app-search-form [bind]=\"bind\" #search_form></app-search-form>\n                                \n        \n                            </div>\n        \n                        </div>\n        \n        \n                    </ng-template>\n                </div>\n        \n        \n            </div>\n        \n        \n        \n        </form>\n    </div>\n    \n</div>\n\n\n\n<div class=\"card mt-2\" *ngIf=\"leidenLines.length != 0\">\n    <div class=\"card-body\">\n        <div class=\"form-group row ml-2 mt-3 mr-2\" *ngIf=\"object != null && object.length != 0\">\n            <h6>Inscription</h6>\n        </div>\n        \n        <div class=\"form-group row ml-2 mt-3 mr-2 leiden_raw p-2\" *ngIf=\"object != null && object.length != 0\" style=\"font-family: 'NewAthena';\">\n            <ol class=\"pl-3\">\n                <li *ngFor=\"let line of leidenLines; let i = index\">\n                    {{line}}\n                </li>\n            </ol>\n        </div>\n    </div>\n</div>\n\n\n<div class=\"card mt-2\" *ngIf=\"translation_array.length != 0\">\n    <div class=\"card-body\">\n        <div class=\"form-group row ml-2 mt-3 mr-2\" *ngIf=\"object != null && object.length != 0\">\n            <h6>Translation</h6>\n        </div>\n        \n        <div class=\"form-group row ml-2 mt-3 mr-2 leiden_raw p-2\" *ngIf=\"object != null && object.length != 0\">\n            <div class=\"row align-items-baseline\">\n                <div class=\"col-6 border-right\">\n                   {{translation_array[0]}}\n                </div>\n                <div class=\"col-6\">\n                    {{translation_array[1]}}\n                </div>\n            </div>\n        </div>\n    </div>\n</div>\n\n\n\n<!-- <div class=\"form-group row ml-2 mt-3 mr-2 panel\" *ngIf=\"object != null && object.length != 0\">\n\n    <span class=\"token overflow-auto p-2\">{{textEpigraphy}}</span>\n</div> -->\n\n<!-- <div class=\"form-group row ml-2 mt-3 mr-2 panel\" *ngIf=\"object != null && object.length != 0\">\n    <h5>Leiden:</h5>\n</div> -->\n\n<!-- <div [innerHTML]=\"htmlLeiden\" class=\"form-group row ml-2 mt-3 mr-2 p-2 panel leiden_raw\">\n        \n</div> -->\n\n","/*\n   Copyright 2021-2022  Istituto di Linguistica Computazionale \"A. Zampolli\", Consiglio Nazionale delle Ricerche, Pisa, Italy.\n \nThis file is part of EpiLexo.\n\nEpiLexo is free software: you can redistribute it and/or modify it under the terms of the GNU General Public License as published by the Free Software Foundation, either version 3 of the License, or (at your option) any later version.\n\nEpiLexo is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for more details.\n\nYou should have received a copy of the GNU General Public License along with EpiLexo. If not, see <https://www.gnu.org/licenses/>.\n*/\n\nimport { Component, ElementRef, OnDestroy, OnInit, ViewChild } from '@angular/core';\nimport { Subscription } from 'rxjs';\nimport { DocumentSystemService } from 'src/app/services/document-system/document-system.service';\nimport { ExpanderService } from 'src/app/services/expander/expander.service';\n\n@Component({\n  selector: 'app-epigraphy-detail',\n  templateUrl: './epigraphy-detail.component.html',\n  styleUrls: ['./epigraphy-detail.component.scss']\n})\nexport class EpigraphyDetailComponent implements OnInit, OnDestroy {\n\n  @ViewChild('navTabsEpigraphy') navtabs: ElementRef; \n  @ViewChild('navContentEpigraphy') navcontent: ElementRef; \n\n  object : any;\n  subscription : Subscription;\n  constructor(private documentService: DocumentSystemService, private exp : ExpanderService) { }\n\n  ngOnInit(): void {\n    this.exp.openEpigraphy$.subscribe(\n      boolean => {\n        if(boolean){\n          setTimeout(() => {\n            var text_detail = document.querySelectorAll('#epigraphy-dettaglio');\n            text_detail.forEach(element => {\n              if(!element.classList.contains('show')){\n                element.classList.add('show')\n              }\n            })\n            let a_link = document.querySelectorAll('a[data-target=\"#epigraphy-dettaglio\"]');\n            a_link.forEach(element => {\n              if(element.classList.contains(\"collapsed\")){\n                element.classList.remove('collapsed')\n              }else{\n                //element.classList.add('collapsed')\n              }\n            })\n           }, 100);\n        }\n      }\n    )\n\n    this.subscription = this.documentService.epigraphyData$.subscribe(\n      object => {\n       /*  console.log(object) */\n        if(object != null){\n          setTimeout(() => {\n            var navTabLinks = this.navtabs.nativeElement.querySelectorAll('a')\n            this.object = object;\n            /* console.log(this.object) */\n            navTabLinks.forEach(element => {\n              /* //console.log(element) */\n              if(element.text == 'Epigraphy'){\n                element.classList.add('active')\n              }else{\n                element.classList.remove('active')\n                //console.log(element.id)\n              }\n            });\n\n            var navContent = this.navcontent.nativeElement.querySelectorAll('.tab-pane');\n            \n            navContent.forEach(element => {\n              \n              if(element.id == 'epigraphy'){\n                element.classList.add('active')\n                element.classList.add('show')\n              }else{\n                \n                element.classList.remove('active')\n                element.classList.remove('show')\n                //console.log(element)\n              }\n            });\n          }, 200);\n          \n        }else{\n          this.object = null;\n          setTimeout(() => {\n            var navTabLinks = this.navtabs.nativeElement.querySelectorAll('a')\n            this.object = object;\n            /* console.log(this.object) */\n            navTabLinks.forEach(element => {\n              /* //console.log(element) */\n              if(element.text == 'Epigraphy'){\n                element.classList.remove('active')\n              }\n            });\n\n            var navContent = this.navcontent.nativeElement.querySelectorAll('.tab-pane');\n            \n            navContent.forEach(element => {\n              \n              if(element.id == 'epigraphy'){\n                element.classList.remove('active')\n                element.classList.remove('show')\n              }\n            });\n          }, 200);\n        }\n      }\n    );\n  }\n\n  triggerExpansionEpigraphy(){\n\n\n    setTimeout(() => {\n      if(!this.exp.isEditTabOpen() && this.exp.isEpigraphyTabOpen()){\n        if(!this.exp.isEditTabExpanded() && this.exp.isEpigraphyTabExpanded()){\n          this.exp.openCollapseEpigraphy();\n          this.exp.expandCollapseEpigraphy();\n        }\n      }else if(!this.exp.isEditTabOpen() && !this.exp.isEpigraphyTabOpen()){\n        if(!this.exp.isEditTabExpanded() && !this.exp.isEpigraphyTabExpanded()){\n          this.exp.openCollapseEpigraphy();\n          this.exp.expandCollapseEpigraphy();\n        }\n      }else if(this.exp.isEditTabOpen() && this.exp.isEpigraphyTabOpen()){\n        this.exp.openCollapseEpigraphy();\n        this.exp.expandCollapseEdit(true);\n      }else if(this.exp.isEditTabOpen() && !this.exp.isEpigraphyTabOpen()){\n        if(this.exp.isEditTabExpanded() && !this.exp.isEpigraphyTabExpanded()){\n          this.exp.expandCollapseEdit(false);\n          this.exp.openCollapseEpigraphy(true)\n        }\n        \n      }\n    }, 200);\n  }\n\n  ngOnDestroy(): void {\n    this.subscription.unsubscribe();\n  }\n}\n","\n\n<!-- <div id=\"epigraphy-accordion\">\n--> <div class=\"card\">\n        <div class=\"card-header\" id=\"headingOne\" style=\"text-align: right;\">\n            <ul class=\"nav nav-tabs\" id=\"editDictTab\" #navTabsEpigraphy role=\"tablist\" [ngClass]=\"{'disabled': object === null}\">\n                <li class=\"nav-item\">\n                    <a class=\"nav-link\" id=\"epigraphy-tab\" data-toggle=\"tab\" href=\"#epigraphy\" role=\"tab\" aria-controls=\"epigraphy\" aria-selected=\"true\">Epigraphy</a>\n                </li>\n                \n                <h5 class=\"ml-auto mb-0\">\n                    <a class=\"btn btn-link w-100 d-flex align-self-center\" (click)=\"triggerExpansionEpigraphy();\" data-toggle=\"collapse\" data-target=\"#epigraphy-dettaglio\" aria-expanded=\"false\" aria-controls=\"epigraphy-dettaglio\">\n                        <i class=\"fa ml-auto\"></i>\n                    </a>\n                </h5>\n            </ul>\n            <!-- <h5 class=\"ml-auto mb-0\">\n                <a class=\"btn btn-link w-100 d-flex align-self-center\" (click)=\"triggerExpansionEpigraphy();\" data-toggle=\"collapse\" data-target=\"#epigraphy-dettaglio\" aria-expanded=\"true\" aria-controls=\"epigraphy-dettaglio\">\n                    <i class=\"fa ml-auto\"></i>\n                </a>\n            </h5> -->\n            \n        </div>\n        <div id=\"epigraphy-dettaglio\" class=\"collapse show\" aria-labelledby=\"headingOne\" > <!-- data-parent=\"#epigraphy-accordion\" -->\n            <div class=\"card-body\">\n                <div class=\"tab-content\" id=\"myTabContent\" #navContentEpigraphy>\n                    <!--  <div class=\"tab-pane fade show active\" id=\"epigraphy\" role=\"tabpanel\" aria-labelledby=\"epigraphy-tab\">\n                        <app-epigraphy-tab></app-epigraphy-tab>\n                    </div> -->\n                    <div class=\"tab-pane fade show active\" id=\"epigraphy\" role=\"tabpanel\" aria-labelledby=\"epigraphy-tab\">\n                        <app-epigraphy-tab></app-epigraphy-tab>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n<!-- </div> -->","/*\n   Copyright 2021-2022  Istituto di Linguistica Computazionale \"A. Zampolli\", Consiglio Nazionale delle Ricerche, Pisa, Italy.\n \nThis file is part of EpiLexo.\n\nEpiLexo is free software: you can redistribute it and/or modify it under the terms of the GNU General Public License as published by the Free Software Foundation, either version 3 of the License, or (at your option) any later version.\n\nEpiLexo is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for more details.\n\nYou should have received a copy of the GNU General Public License along with EpiLexo. If not, see <https://www.gnu.org/licenses/>.\n*/\n\nimport { Component, OnInit, Renderer2, ViewChild } from '@angular/core';\nimport { LexicalEntriesService } from 'src/app/services/lexical-entries/lexical-entries.service';\nimport { ToastrService } from 'ngx-toastr';\nimport { DocumentSystemService } from 'src/app/services/document-system/document-system.service';\nimport { TreeNode } from '@circlon/angular-tree-component';\nimport { ExpanderService } from 'src/app/services/expander/expander.service';\n\n@Component({\n  selector: 'app-document-system-tree',\n  templateUrl: './document-system-tree.component.html',\n  styleUrls: ['./document-system-tree.component.scss'],\n})\n\nexport class DocumentSystemTreeComponent implements OnInit {\n\n  switcher = false;\n  @ViewChild('lexTree') lexTree: any;\n  @ViewChild('textTree') textTree: any;\n  @ViewChild('conceptTree') conceptTree: any;\n\n\n  constructor(private exp: ExpanderService, private lexicalService: LexicalEntriesService, private toastr: ToastrService, private renderer: Renderer2, private documentService: DocumentSystemService) { }\n\n  ngOnInit(): void {\n    this.lexicalService.refreshAfterEdit$.subscribe(\n      data => {\n        this.refreshAfterEdit(data);\n      }\n    )\n  }\n\n  updateTreeParent() {\n    this.lexTree.updateTreeView();\n  }\n\n  switchLabel() {\n    this.lexTree.labelView = !this.lexTree.labelView;\n    this.lexTree.idView = !this.lexTree.idView;\n    this.switcher = !this.switcher;\n  }\n\n  lexEdit(data) {\n\n    var that = this;\n\n    if (data['new_note'] != undefined) {\n\n      let instanceName = '';\n      if (data['lexicalEntryInstanceName'] != undefined) {\n        instanceName = data['lexicalEntryInstanceName']\n      } else if (data['formInstanceName'] != undefined) {\n        instanceName = data['formInstanceName']\n      } else if (data['senseInstanceName'] != undefined) {\n        instanceName = data['senseInstanceName']\n      } else if (data['etymologyInstanceName'] != undefined) {\n        instanceName = data['etymologyInstanceName']\n      };\n      setTimeout(() => {\n        this.lexTree.lexicalEntryTree.treeModel.getNodeBy(\n          function (x) {\n            if (data['lexicalEntryInstanceName'] != undefined) {\n              if (x.data.lexicalEntryInstanceName == instanceName) {\n\n                x.data.note = data['new_note']\n                that.lexTree.lexicalEntryTree.treeModel.update();\n                that.lexTree.updateTreeView();\n\n                //console.log(x)\n                //@ts-ignore\n                $('.note_' + x.data.id).attr('data-original-title', data['new_note']);\n\n                data['new_note'] = undefined;\n                return true;\n              } else {\n                return false;\n              }\n            } else if (data['formInstanceName'] != undefined) {\n\n              if (x.data.formInstanceName == instanceName) {\n                x.data.note = data['new_note']\n                that.lexTree.lexicalEntryTree.treeModel.update();\n                that.lexTree.updateTreeView();\n                data['new_note'] = undefined;\n                return true;\n              } else {\n                return false;\n              }\n            } else if (data['senseInstanceName'] != undefined) {\n\n              if (x.data.senseInstanceName == instanceName) {\n                x.data.note = data['new_note']\n                that.lexTree.lexicalEntryTree.treeModel.update();\n                that.lexTree.updateTreeView();\n                data['new_note'] = undefined;\n                return true;\n              } else {\n                return false;\n              }\n            }\n            else if (data['etymologyInstanceName'] != undefined) {\n\n              if (x.data.etymologyInstanceName == instanceName) {\n                x.data.note = data['new_note']\n                that.lexTree.lexicalEntryTree.treeModel.update();\n                that.lexTree.updateTreeView();\n                data['new_note'] = undefined;\n                return true;\n              } else {\n                return false;\n              }\n            }\n            else {\n              return false;\n            }\n          }\n        );\n      }, 500);\n    } else if (data['new_label'] != undefined) {\n      //console.log(\"cambio label cambio tutto\")\n      //console.log(data)\n      let instanceName = '';\n      if (data['lexicalEntryInstanceName'] != undefined) {\n        instanceName = data['lexicalEntryInstanceName']\n      } else if (data['formInstanceName'] != undefined) {\n        instanceName = data['formInstanceName']\n      } else if (data['senseInstanceName'] != undefined) {\n        instanceName = data['senseInstanceName']\n      } else if (data['etymologyInstanceName'] != undefined) {\n        instanceName = data['etymologyInstanceName']\n      };;\n      setTimeout(() => {\n        this.lexTree.lexicalEntryTree.treeModel.getNodeBy(\n          function (x) {\n            if (data['lexicalEntryInstanceName'] != undefined) {\n              if (x.data.lexicalEntryInstanceName == instanceName) {\n                x.data.label = data['new_label']\n                //x.setActiveAndVisible()\n                x.scrollIntoView();\n                data['new_label'] = undefined\n                return true;\n              } else {\n                return false;\n              }\n            } else if (data['formInstanceName'] != undefined) {\n\n              if (x.data.formInstanceName == instanceName) {\n                x.data.label = data['new_label']\n                //x.setActiveAndVisible()\n                x.scrollIntoView();\n                data['new_label'] = undefined\n                return true;\n              } else {\n                return false;\n              }\n            } else if (data['senseInstanceName'] != undefined) {\n\n              if (x.data.senseInstanceName == instanceName) {\n                x.data.label = data['new_label']\n                //x.setActiveAndVisible()\n                x.scrollIntoView();\n                data['new_label'] = undefined\n                return true;\n              } else {\n                return false;\n              }\n            } else if (data['etymologyInstanceName'] != undefined) {\n\n              if (x.data.etymologyInstanceName == instanceName) {\n                x.data.label = data['new_label']\n                //x.setActiveAndVisible()\n                x.scrollIntoView();\n                data['new_label'] = undefined\n                return true;\n              } else {\n                return false;\n              }\n            }\n            else {\n              return false;\n            }\n          }\n        );\n      }, 500);\n    } else if (data['new_type'] != undefined) {\n      //console.log(\"cambio type cambio tutto\")\n      let instanceName = '';\n      if (data['lexicalEntryInstanceName'] != undefined) {\n        instanceName = data['lexicalEntryInstanceName']\n      } else if (data['formInstanceName'] != undefined) {\n        instanceName = data['formInstanceName']\n      } else if (data['senseInstanceName'] != undefined) {\n        instanceName = data['senseInstanceName']\n      };\n      setTimeout(() => {\n        this.lexTree.lexicalEntryTree.treeModel.getNodeBy(\n          function (x) {\n            if (data['lexicalEntryInstanceName'] != undefined) {\n              if (x.data.lexicalEntryInstanceName == instanceName) {\n                x.data.type = data['new_type']\n                //x.setActiveAndVisible()\n                x.scrollIntoView();\n                data['new_type'] = undefined\n                return true;\n\n              } else {\n                return false;\n              }\n            } else if (data['formInstanceName'] != undefined) {\n\n              if (x.data.formInstanceName == instanceName) {\n                x.data.type = data['new_type']\n                //x.setActiveAndVisible()\n                x.scrollIntoView();\n                data['new_type'] = undefined\n                return true;\n              } else {\n                return false;\n              }\n            } else if (data['senseInstanceName'] != undefined) {\n\n              if (x.data.senseInstanceName == instanceName) {\n                x.data.type = data['new_type']\n                //x.setActiveAndVisible()\n                x.scrollIntoView();\n                data['new_type'] = undefined\n                return true;\n              } else {\n                return false;\n              }\n            }\n            else {\n              return false;\n            }\n          }\n        );\n      }, 500);\n    } else if (data['new_lang'] != undefined) {\n      //console.log(\"cambio lang cambio tutto\")\n      let instanceName = '';\n      if (data['lexicalEntryInstanceName'] != undefined) {\n        instanceName = data['lexicalEntryInstanceName']\n      } else if (data['formInstanceName'] != undefined) {\n        instanceName = data['formInstanceName']\n      } else if (data['senseInstanceName'] != undefined) {\n        instanceName = data['senseInstanceName']\n      };\n      setTimeout(() => {\n        this.lexTree.lexicalEntryTree.treeModel.getNodeBy(\n          function (x) {\n            if (data['lexicalEntryInstanceName'] != undefined) {\n              if (x.data.lexicalEntryInstanceName == instanceName) {\n                x.data.language = data['new_lang']\n                //x.setActiveAndVisible()\n                x.scrollIntoView();\n                data['new_lang'] = undefined\n                return true;\n              } else {\n                return false;\n              }\n            } else if (data['formInstanceName'] != undefined) {\n\n              if (x.data.formInstanceName == instanceName) {\n                x.data.language = data['new_lang']\n                //x.setActiveAndVisible()\n                x.scrollIntoView();\n                data['new_lang'] = undefined\n                return true;\n              } else {\n                return false;\n              }\n            } else if (data['senseInstanceName'] != undefined) {\n\n              if (x.data.senseInstanceName == instanceName) {\n                x.data.language = data['new_lang']\n                //x.setActiveAndVisible()\n                x.scrollIntoView();\n                data['new_lang'] = undefined\n                return true;\n              } else {\n                return false;\n              }\n            }\n            else {\n              return false;\n            }\n          }\n        );\n      }, 500);\n    } else if (data['new_pos'] != undefined) {\n      //console.log(\"cambio pos cambio tutto\")\n      let instanceName = '';\n      if (data['lexicalEntryInstanceName'] != undefined) {\n        instanceName = data['lexicalEntryInstanceName']\n      } else if (data['formInstanceName'] != undefined) {\n        instanceName = data['formInstanceName']\n      } else if (data['senseInstanceName'] != undefined) {\n        instanceName = data['senseInstanceName']\n      };\n      setTimeout(() => {\n        this.lexTree.lexicalEntryTree.treeModel.getNodeBy(\n          function (x) {\n            if (data['lexicalEntryInstanceName'] != undefined) {\n              if (x.data.lexicalEntryInstanceName == instanceName) {\n                x.data.pos = data['new_pos']\n                //x.setActiveAndVisible()\n                x.scrollIntoView();\n                data['new_pos'] = undefined\n                return true;\n              } else {\n                return false;\n              }\n            } else if (data['formInstanceName'] != undefined) {\n\n              if (x.data.formInstanceName == instanceName) {\n                x.data.pos = data['new_pos']\n                //x.setActiveAndVisible()\n                x.scrollIntoView();\n                data['new_pos'] = undefined\n                return true;\n              } else {\n                return false;\n              }\n            } else if (data['senseInstanceName'] != undefined) {\n\n              if (x.data.senseInstanceName == instanceName) {\n                x.data.pos = data['new_pos']\n                //x.setActiveAndVisible()\n                x.scrollIntoView();\n                data['new_pos'] = undefined\n                return true;\n              } else {\n                return false;\n              }\n            }\n            else {\n              return false;\n            }\n          }\n        );\n      }, 500);\n    }\n\n  }\n\n  changeSenseDefinition(data) {\n    var that = this;\n    setTimeout(() => {\n      this.lexTree.lexicalEntryTree.treeModel.getNodeBy(\n        function (x) {\n          if (x.data.senseInstanceName != undefined) {\n            if (x.data.senseInstanceName == data['senseInstanceName']) {\n              x.data.label = data['new_definition'];\n              that.lexTree.lexicalEntryTree.treeModel.update();\n              that.lexTree.updateTreeView();\n              return true;\n            } else {\n              return false;\n            }\n\n          } else {\n            return false;\n          }\n        }\n      );\n    }, 500);\n  }\n\n  changeFormLabel(data) {\n    var that = this;\n    setTimeout(() => {\n      this.lexTree.lexicalEntryTree.treeModel.getNodeBy(\n        function (x) {\n          if (x.data.formInstanceName != undefined) {\n            if (x.data.formInstanceName == data['formInstanceName']) {\n              x.data.label = data['new_label'];\n              that.lexTree.lexicalEntryTree.treeModel.update();\n              that.lexTree.updateTreeView();\n              return true;\n            } else {\n              return false;\n            }\n\n          } else {\n            return false;\n          }\n        }\n      );\n    }, 500);\n  }\n\n\n\n  changeFormType(data) {\n    var that = this;\n    //console.log(\"prova\")\n    setTimeout(() => {\n      this.lexTree.lexicalEntryTree.treeModel.getNodeBy(\n        function (x) {\n          if (x.data.formInstanceName != undefined) {\n            if (x.data.formInstanceName == data['formInstanceName']) {\n              x.data.type = data['new_type'];\n              //console.log(x.data.note)\n              that.lexTree.lexicalEntryTree.treeModel.update();\n              that.lexTree.updateTreeView();\n              return true;\n            } else {\n              return false;\n            }\n\n          } else {\n            return false;\n          }\n        }\n      );\n    }, 500);\n  }\n\n  refreshAfterEdit(data) {\n    // 0 -> lexEdit: quando creo una nuova lexical entry\n    // 3 -> quando devo cambiare solo la label di una forma\n    // 5 -> quando devo cambiare il tipo di una forma\n    // 6 -> quando devo cambiare definizione a un senso\n    if (data != null) {\n      setTimeout(() => {\n        switch (data['request']) {\n          case 0: this.lexEdit(data); break;\n          case 3: this.changeFormLabel(data); break;\n          case 5: this.changeFormType(data); break;\n          case 6: this.changeSenseDefinition(data); break;\n        }\n      }, 100);\n    }\n\n\n  }\n\n  triggerLoad() {\n    this.lexicalService.refreshLangTable();\n  }\n\n  newLexicalEntry() {\n\n    this.lexicalService.newLexicalEntry().subscribe(\n      data => {\n        console.log(data);\n\n        this.toastr.success(data['lexicalEntryInstanceName'] + ' added correctly', '', {\n          timeOut: 5000,\n        });\n\n        setTimeout(() => {\n          let newLexEntryLabel = data['label'];\n          let parameters = this.lexTree.getParameters();\n          parameters['text'] = newLexEntryLabel /* + \"~0.5\"; */\n          this.lexTree.lexicalEntriesFilter(parameters);\n          this.lexTree.lexicalEntryTree.treeModel.update();\n          this.lexTree.updateTreeView();\n\n          setTimeout(() => {\n            this.lexTree.lexicalEntryTree.treeModel.getNodeBy(\n              function (x) {\n                if (x.data.lexicalEntryInstanceName == data['lexicalEntryInstanceName']) {\n                  x.setActiveAndVisible()\n                  return true;\n                } else {\n                  return false;\n                }\n              }\n            );\n          }, 500);\n        }, 200);\n      },\n      error => {\n        //console.log(error);\n        this.toastr.error(error.error, 'Error', {\n          timeOut: 5000,\n        });\n      }\n    )\n  }\n\n  createNewFile(){\n    let element_id = 0;\n    let parameters = {\n      requestUUID : \"string\",\n      \"user-id\" : 0,\n      \"element-id\" : element_id,\n      filename : \"new_file\"+Math.floor(Math.random() * (99999 - 10) + 10)\n    }\n\n    this.documentService.createFile(parameters).subscribe(\n      data =>{\n        console.log(data)\n        this.textTree.treeText.treeModel.nodes.push(data.node);\n        this.textTree.counter = this.textTree.treeText.treeModel.nodes.length\n        this.textTree.treeText.treeModel.update();\n        this.toastr.info('New file added', '', {\n          timeOut: 5000,\n        });\n        this.textTree.treeText.treeModel.getNodeById(data.node.id).setActiveAndVisible();\n      },error=> {\n        console.log(error)\n      }\n    )\n  }\n\n\n  addNewFile(evt?) {\n    let element_id = 0;\n    console.log(evt.target.files)\n    let parameters, file_name;\n\n    if (evt.target.files != undefined) {\n      if (evt.target.files.length == 1) {\n        file_name = evt.target.files[0].name;\n        parameters = {\n          \"requestUUID\": \"string\",\n          \"user-id\": 0,\n          \"element-id\": element_id,\n          \"file-name\": file_name\n        }\n        const formData = new FormData();\n        formData.append('file', evt.target.files[0]);\n\n        this.documentService.uploadFile(formData, element_id, 11).subscribe(\n          data => {\n            console.log(data)\n\n            this.toastr.info('New file added', '', {\n              timeOut: 5000,\n            });\n            setTimeout(() => {\n\n              this.textTree.treeText.treeModel.nodes.push(data.node);\n              this.textTree.counter = this.textTree.treeText.treeModel.nodes.length\n              //console.log(this.textTree.treeText.treeModel.nodes.length)\n              //this.textTree.treeText.treeModel.updateTreeView();\n              this.textTree.treeText.treeModel.update();\n              this.textTree.treeText.treeModel.getNodeById(data.node.id).setActiveAndVisible();\n\n            }, 500);\n\n\n          }, error => {\n            console.log(error);\n            this.toastr.error('Error when adding new file', '', {\n              timeOut: 5000,\n            });\n          }\n        )\n      } else {\n\n        let files_array = Array.from(evt.target.files);\n        files_array.forEach((element : any) => {\n\n          file_name = element.name;\n          parameters = {\n            \"requestUUID\": \"string\",\n            \"user-id\": 0,\n            \"element-id\": element_id,\n            \"file-name\": file_name\n          }\n\n          const formData = new FormData();\n          formData.append('file', element);\n\n          this.documentService.uploadFile(formData, element_id, 11).subscribe(\n            data => {\n              console.log(data)\n\n              this.toastr.info('New file added', '', {\n                timeOut: 5000,\n              });\n              setTimeout(() => {\n\n                this.textTree.treeText.treeModel.nodes.push(data.node);\n                this.textTree.counter = this.textTree.treeText.treeModel.nodes.length\n                //console.log(this.textTree.treeText.treeModel.nodes.length)\n                //this.textTree.treeText.treeModel.updateTreeView();\n                this.textTree.treeText.treeModel.update();\n                this.textTree.treeText.treeModel.getNodeById(data.node.id).setActiveAndVisible();\n\n              }, 500);\n\n\n            }, error => {\n              console.log(error);\n              this.toastr.error('Error when adding new file', '', {\n                timeOut: 5000,\n              });\n            }\n          )\n        });\n      }\n    }\n\n    console.log(evt);\n  }\n\n  addNewFolder() {\n\n    let element_id = 0;\n    let parameters = {\n      \"requestUUID\": \"string\",\n      \"user-id\": 0,\n      \"element-id\": element_id\n    }\n\n\n    this.documentService.addFolder(parameters).subscribe(\n      data => {\n        console.log(data)\n        let id_new_node = 243;\n        /* let new_node = {\n          \"children\" : [],\n          \"element-id\" : id_new_node,\n          \"id\" : Math.floor(Math.random() * (99999 - 10) + 10),\n          \"metadata\" : {},\n          \"path\" : \"\",\n          \"name\" : \"new-folder_\"+ Math.floor(Math.random() * (99999 - 10) + 10),\n          \"type\" : \"directory\"\n        } */\n        if (data.node != undefined) {\n          this.toastr.info('New folder added', '', {\n            timeOut: 5000,\n          });\n          this.textTree.nodes.push(data.node);\n          this.textTree.updateTreeView();\n          this.textTree.treeText.treeModel.update();\n        }\n\n      }, error => {\n        console.log(error);\n        this.toastr.error('Error when creating new folder', '', {\n          timeOut: 5000,\n        });\n      }\n    )\n\n  }\n}\n","\n\n<div id=\"tree-accordion\">\n\n\n    <!-- EPIGRAFI -->\n    <div class=\"card\">\n        <div class=\"card-header\" id=\"headingOne\">\n            <h5 class=\"mb-0 d-flex justify-content-between align-items-center\">\n                <button class=\"btn btn-link\" data-toggle=\"collapse\" data-target=\"#text\" aria-expanded=\"true\"\n                    aria-controls=\"text\">\n                    <i class=\"fa\"></i> Text\n                </button>\n                <div class=\"icons-container dropdown\">\n                    <button class=\"btn btn-link\" type=\"button\" id=\"textTreeActionDropdown\" data-toggle=\"dropdown\" aria-haspopup=\"true\" aria-expanded=\"false\"><i class=\"fa fa-plus\"></i></button>\n                    <button class=\"btn btn-link\"><i class=\"fa fa-file-import\"></i></button>\n                    <button class=\"btn btn-link\"><i class=\"fa fa-download\"></i></button>\n                    <button class=\"btn btn-link\" title=\"Language\"><i class=\"fa fa-globe-americas\"></i></button>\n                    <div class=\"dropdown-menu\" aria-labelledby=\"textTreeActionDropdown\">\n                        <a class=\"dropdown-item\" (click)=\"addFile.click()\" style=\"cursor: pointer;\">Add new file</a>\n                        <input #addFile type=\"file\" accept=\".xml\" hidden (change)=\"addNewFile($event)\" multiple>\n                        <a class=\"dropdown-item\" (click)=\"addNewFolder()\" style=\"cursor: pointer;\">Add new folder</a>\n                        <div class=\"dropdown-divider\"></div>\n                        <a class=\"dropdown-item\" (click)=\"createNewFile()\" style=\"cursor: pointer;\">Create empty file</a>\n                      </div>\n                </div>\n               \n            </h5>\n        </div>\n        <div id=\"text\" class=\"collapse show\" aria-labelledby=\"headingOne\" data-parent=\"#tree-accordion\">\n            <div class=\"card-body\">\n                <app-text-tree #textTree></app-text-tree>\n            </div>\n        </div>\n    </div>\n\n    <!-- LEXICAL ENTRIES -->\n    <div class=\"card\">\n        <div class=\"card-header\" id=\"headingTwo\">\n            <h5 class=\"mb-0 d-flex flex-wrap justify-content-between align-items-center\">\n                <button class=\"btn btn-link collapsed\" data-toggle=\"collapse\" data-target=\"#entrate-lessicali\"\n                    aria-expanded=\"false\" aria-controls=\"entrate-lessicali\" (click)=\"updateTreeParent()\">\n                    <i class=\"fa\"></i> Lessico\n                </button>\n                <div class=\"icons-container\">\n                    <button\n                        [ngStyle]=\"switcher ? {'background-color': '#007bff', 'color': 'rgb(247 247 247)'} : {'background-color': 'transparent', 'color': '#007bff'}\"\n                        class=\"btn btn-link\" title=\"Switch to label view\"\n                        (click)=\"switchLabel(); updateTreeParent();\"><i class=\"fas fa-tag\"></i></button>\n                    <button class=\"btn btn-link\" title=\"Add new lexical entry\" (click)=\"newLexicalEntry()\"><i\n                            class=\"fa fa-plus\"></i></button>\n                    <button class=\"btn btn-link\" title=\"Export\"><i class=\"fa fa-file-import\"></i></button>\n                    <button class=\"btn btn-link\" title=\"Download\"><i class=\"fa fa-download\"></i></button>\n                    <button class=\"btn btn-link\" title=\"Edit Languages\" (click)=\"selectLanguageModal.show(); triggerLoad();\"><i\n                            class=\"fas fa-flag-usa\"></i></button>\n\n                    <app-modal #selectLanguageModal class=\"languages_modal\">\n                        <ng-container class=\"app-modal-header\">Language Manager</ng-container>\n                        <ng-container class=\"app-modal-body\">\n\n                            <app-language-manager></app-language-manager>\n\n                        </ng-container>\n                    </app-modal>\n                </div>\n            </h5>\n        </div>\n        <div id=\"entrate-lessicali\" class=\"collapse\" aria-labelledby=\"headingTwo\" data-parent=\"#tree-accordion\">\n            <div class=\"card-body\">\n                <app-lexical-entry-tree #lexTree></app-lexical-entry-tree>\n            </div>\n        </div>\n    </div>\n\n    <!-- ONTOLOGY -->\n    <div class=\"card\">\n        <div class=\"card-header\" id=\"headingFour\">\n            <h5 class=\"mb-0 d-flex flex-wrap justify-content-between align-items-center\">\n                <button class=\"btn btn-link collapsed\" data-toggle=\"collapse\" data-target=\"#ontologia\"\n                    aria-expanded=\"false\" aria-controls=\"ontologia\">\n                    <i class=\"fa\"></i> Ontology\n                </button>\n                <!-- <div class=\"icons-container\">\n                    <button class=\"btn btn-link\"><i class=\"fa fa-plus\"></i></button>\n                    <button class=\"btn btn-link\"><i class=\"fa fa-file-import\"></i></button>\n                    <button class=\"btn btn-link\"><i class=\"fa fa-download\"></i></button>\n                    <button class=\"btn btn-link\" title=\"Language\"><i class=\"fa fa-globe-americas\"></i></button>\n                </div> -->\n            </h5>\n        </div>\n        <div id=\"ontologia\" class=\"collapse\" aria-labelledby=\"headingFour\" data-parent=\"#tree-accordion\">\n            <div class=\"card-body\">\n                <app-concept-tree #conceptTree></app-concept-tree>\n            </div>\n        </div>\n    </div>\n</div>","/*\n   Copyright 2021-2022  Istituto di Linguistica Computazionale \"A. Zampolli\", Consiglio Nazionale delle Ricerche, Pisa, Italy.\n \nThis file is part of EpiLexo.\n\nEpiLexo is free software: you can redistribute it and/or modify it under the terms of the GNU General Public License as published by the Free Software Foundation, either version 3 of the License, or (at your option) any later version.\n\nEpiLexo is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for more details.\n\nYou should have received a copy of the GNU General Public License along with EpiLexo. If not, see <https://www.gnu.org/licenses/>.\n*/\n\nimport { Component, Input, OnInit, SimpleChanges } from '@angular/core';\nimport { FormArray, FormBuilder, FormControl, FormGroup } from '@angular/forms';\nimport { LexicalEntriesService } from 'src/app/services/lexical-entries/lexical-entries.service';\nimport { ToastrService } from 'ngx-toastr';\nimport { BibliographyService } from 'src/app/services/bibliography-service/bibliography.service';\nimport { debounceTime } from 'rxjs/operators';\nimport { Subject } from 'rxjs';\n\n\n@Component({\n  selector: 'app-bibliography-panel',\n  templateUrl: './bibliography-panel.component.html',\n  styleUrls: ['./bibliography-panel.component.scss']\n})\nexport class BibliographyPanelComponent implements OnInit {\n\n  @Input() biblioData: any[];\n  bibliographyData : any[];\n  object : any;\n  countElement = 0;\n  loadingSynchro = [];\n  bibliographyForm = new FormGroup({\n    bibliography: new FormArray([this.createBibliography()]),\n  })\n  biblioArray: FormArray;\n  memoryNote = [];\n  memoryTextualRef = [];\n\n  private subject: Subject<any> = new Subject();\n\n  constructor(private lexicalService : LexicalEntriesService, private biblioService : BibliographyService, private formBuilder: FormBuilder, private toastr: ToastrService) { }\n\n  ngOnInit(): void {\n    this.bibliographyForm = this.formBuilder.group({\n      bibliography: this.formBuilder.array([])\n    })\n\n    this.biblioService.addBiblioReq$.subscribe(\n      incomingBiblio => {\n        if(incomingBiblio != null){\n          \n          let id = incomingBiblio.id != undefined ? incomingBiblio.id : '';\n          let title = incomingBiblio.title != undefined ? incomingBiblio.title : '';\n          let author = incomingBiblio.author != undefined ? incomingBiblio.author : '';\n          let date = incomingBiblio.date != undefined ? incomingBiblio.date : '';\n          let note = incomingBiblio.note != undefined ? incomingBiblio.note : '';\n          let textualReference = incomingBiblio.textualReference != undefined ? incomingBiblio.textualReference : '';          \n          this.bibliographyData.push(incomingBiblio)\n          this.addBibliographyElement(id, title, author, date, note, textualReference);\n          this.memoryNote.push(note)\n          this.memoryTextualRef.push(textualReference)\n          this.countElement++;\n        }else{\n          this.object = null;\n          this.bibliographyData = null;\n        }\n      }\n    )\n\n    this.subject.pipe(debounceTime(1000)).subscribe(\n      data => {\n        this.onChanges(data)\n      }\n    )\n  }\n  \n  \n  ngOnChanges(changes: SimpleChanges){\n\n    if(changes.biblioData.currentValue != undefined){\n      this.object = changes.biblioData.currentValue;\n      this.bibliographyData = [];\n      this.countElement = 0;\n      this.memoryNote = [];\n      this.memoryTextualRef = [];\n      this.biblioArray = this.bibliographyForm.get('bibliography') as FormArray;\n      this.biblioArray.clear();\n      \n      if(this.object.lexicalEntryInstanceName != undefined){\n        let lexId = this.object.lexicalEntryInstanceName;\n        this.lexicalService.getBibliographyData(lexId).subscribe(\n          data=>{\n            console.log(data);\n            if(data != []){\n              let count = 0;\n              data.forEach(element => {\n                this.bibliographyData.push(element);\n  \n                this.addBibliographyElement(element.id, element.title, element.author, element.date, element.note, element.textualReference)\n                this.memoryNote[count] = element.note;\n                this.memoryTextualRef[count] = element.textualReference\n                count++;\n                this.countElement++;\n              });\n              \n              /* this.bibliographyData['parentNodeLabel']= this.object['lexicalEntry'];\n              this.bibliographyData['lexicalEntryInstanceName']= this.object['lexicalEntryInstanceName']; */\n            }\n            \n            \n\n          }, error=>{\n            \n            \n            this.toastr.error(error.error, 'Error', {\n              timeOut: 5000,\n            });\n            \n          }\n        )\n                \n      }else if(this.object.formInstanceName != undefined){\n        let formId = this.object.formInstanceName;\n        this.lexicalService.getBibliographyData(formId).subscribe(\n          data=>{\n            console.log(data);\n            let count= 0;\n            data.forEach(element => {\n              this.bibliographyData.push(element);\n\n              this.addBibliographyElement(element.id, element.title, element.author, element.date, element.note, element.textualReference)\n              this.memoryNote[count] = element.note;\n              this.memoryTextualRef[count] = element.textualReference\n              count++;\n              this.countElement++;\n            });\n            \n            this.bibliographyData['parentNodeLabel']= this.object['form'];\n            this.bibliographyData['formInstanceName']= this.object['formInstanceName'];\n          }, error=>{\n            this.toastr.error(error.error, 'Error', {\n              timeOut: 5000,\n            });\n            console.log(error);\n            \n          }\n        )\n        \n      }else if(this.object.senseInstanceName != undefined){\n        let senseId = this.object.senseInstanceName;\n        this.lexicalService.getBibliographyData(senseId).subscribe(\n          data=>{\n            console.log(data);\n            let count = 0;\n            data.forEach(element => {\n              this.bibliographyData.push(element);\n\n              this.addBibliographyElement(element.id, element.title, element.author, element.date, element.note, element.textualReference)\n              this.memoryNote[count] = element.note;\n              this.memoryTextualRef[count] = element.textualReference\n              count++;\n              this.countElement++;\n            });\n            \n            this.bibliographyData['parentNodeLabel']= this.object['sense'];\n            this.bibliographyData['senseInstanceName']= this.object['senseInstanceName'];\n          }, error=>{\n            this.toastr.error(error.error, 'Error', {\n              timeOut: 5000,\n            });\n            console.log(error);\n            \n          }\n        )\n      }else if(this.object.etymologyInstanceName != undefined){\n        let etymId = this.object.etymologyInstanceName;\n        this.lexicalService.getBibliographyData(etymId).subscribe(\n          data=>{\n            console.log(data);\n            let count = 0;\n            data.forEach(element => {\n              this.bibliographyData.push(element);\n\n              this.addBibliographyElement(element.id, element.title, element.author, element.date, element.note, element.textualReference)\n              this.memoryNote[count] = element.note;\n              this.memoryTextualRef[count] = element.textualReference\n              count++;\n              this.countElement++;\n            });\n            \n            this.bibliographyData['parentNodeLabel']= this.object['etymology'];\n            this.bibliographyData['etymologyInstanceName']= this.object['etymologyInstanceName'];\n          }, error=>{\n            this.toastr.error(error.error, 'Error', {\n              timeOut: 5000,\n            });\n            console.log(error);\n            \n          }\n        )\n      }\n    }else{\n      this.countElement = 0;\n      this.bibliographyData = null;\n    }\n  }\n\n  debounceKeyup(evt, index, field) {\n    this.lexicalService.spinnerAction('on');\n    this.subject.next({ evt, index,  field})\n  }\n\n  \n  onChanges(data){\n    let fieldType = '';\n    console.log(data)\n    if(data != undefined){\n      \n      let newValue = data.evt.target.value;\n      let currentValue;\n      let index = data?.index;\n\n      if(newValue.length > 2){\n        let oldValue = '';\n        fieldType = data['field']\n        if(fieldType == 'note'){\n          oldValue = this.memoryNote[index];\n        }else if(fieldType == 'label'){\n          oldValue = this.memoryTextualRef[index];\n        }\n        \n        //this.biblioArray = this.bibliographyForm.get('bibliography') as FormArray;\n\n        \n\n        let instanceName = this.bibliographyData[index].bibliographyInstanceName;\n        \n\n        let parameters;\n\n        if(oldValue == ''){\n          parameters = {\n            type: \"bibliography\",\n            relation: fieldType,\n            value : newValue\n          }\n        }else{\n          parameters = {\n            type: \"bibliography\",\n            relation: fieldType,\n            value : newValue,\n            currentValue : oldValue\n          }\n        }\n        \n        \n        \n        console.log(this.biblioArray.at(index))\n        console.log(parameters)\n\n        this.lexicalService.updateGenericRelation(instanceName, parameters).subscribe(\n          data=> {\n            console.log(data);\n            this.lexicalService.spinnerAction('off');\n            this.lexicalService.updateLexCard(this.object);\n            this.toastr.success('Bibliography item updated', '', {\n              timeOut: 5000,\n            });\n          },error=> {\n            console.log(error);\n            this.lexicalService.updateLexCard({ lastUpdate: error.error.text })\n            this.lexicalService.spinnerAction('off');\n            if(error.status == 200){\n              this.toastr.success('Bibliography item updated', '', {\n                timeOut: 5000,\n              });\n            }else{\n              this.toastr.error(error.error, 'Error', {\n                timeOut: 5000,\n              });\n            }\n            \n          }\n        )\n\n        \n        if(fieldType == 'note'){\n          this.memoryNote[index] = newValue;\n        }else if(fieldType == 'label'){\n          this.memoryTextualRef[index] = newValue;\n        }\n        \n      }else{\n        this.lexicalService.spinnerAction('off');\n        this.toastr.error(\"Insert at leat 3 characters\", 'Error', {\n          timeOut: 5000,\n        });\n      }\n      \n    }\n  }\n\n  removeItem(index) {\n    this.biblioArray = this.bibliographyForm.get('bibliography') as FormArray;\n    this.countElement--;\n\n    let instanceName = this.bibliographyData[index].bibliographyInstanceName;\n\n    this.lexicalService.removeBibliographyItem(instanceName).subscribe(\n      data => {\n        console.log(data)\n        this.lexicalService.updateLexCard(this.object);\n        this.toastr.success('Element removed', '', {\n          timeOut: 5000,\n        });\n      }, error => {\n        //console.log(error)\n        this.lexicalService.updateLexCard({ lastUpdate: error.error.text })\n        this.toastr.error(error.error, 'Error', {\n          timeOut: 5000,\n        });\n      }\n    )\n\n  \n    this.biblioArray.removeAt(index);\n    this.bibliographyData.splice(index, 1);\n    this.memoryNote.splice(index, 1)\n    this.memoryTextualRef.splice(index, 1)\n    \n  }\n  \n\n  addBibliographyElement(i?, t?, a?, d?, n?, l?){\n    this.biblioArray = this.bibliographyForm.get('bibliography') as FormArray;\n    if(t == undefined){\n      this.biblioArray.push(this.createBibliography());\n    }else{\n      this.biblioArray.push(this.createBibliography(i, t, a, d, n, l));\n    }\n  }\n\n  createBibliography(i?, t?, a?, d?, n?, l?){\n    if(t == undefined){\n      return this.formBuilder.group({\n        id : new FormControl(null),\n        title: new FormControl(null),\n        author: new FormControl(null),\n        date: new FormControl(null),\n        note: new FormControl(null),\n        textualReference: new FormControl(null)\n      })\n    }else{\n      return this.formBuilder.group({\n        id: new FormControl(i),\n        title: new FormControl(t),\n        author: new FormControl(a),\n        date: new FormControl(d),\n        note: new FormControl(n),\n        textualReference: new FormControl(l)\n      })\n    }\n  }\n\n  synchronizeBibliography(id, i){\n    console.log(id)\n    this.loadingSynchro[i] = true;\n    let lexId = '';\n    if(this.object.lexicalEntryInstanceName != undefined\n      && this.object.senseInstanceName == undefined){\n        console.log(1)\n        lexId = this.object.lexicalEntryInstanceName;\n    }else if(this.object.formInstanceName != undefined){\n      lexId = this.object.formInstanceName;\n      console.log(2)\n    }else if(this.object.senseInstanceName != undefined){\n      lexId = this.object.senseInstanceName;\n      console.log(3)\n    }else if(this.object.etymologyInstanceName != undefined){\n      lexId = this.object.etymologyInstanceName;\n    }\n\n    this.lexicalService.synchronizeBibliographyItem(lexId, id).pipe(debounceTime(500)).subscribe(\n      data => {\n        console.log(data);\n        this.loadingSynchro[i] = false;\n      },error=>{\n        console.log(error);\n        if(error.status == 200){\n          this.lexicalService.updateLexCard({ lastUpdate: error.error.text })\n          this.toastr.success('Item n'+id+' synchronized', '')\n        }\n        this.loadingSynchro[i] = false;\n      }\n    );  \n  }\n\n}\n","\n\n<div class=\"card\">\n    <div class=\"card-header\" id=\"bibliographyHeading\">\n        <h5 class=\"mb-0\">\n            <a class=\"btn btn-link w-100 d-flex align-self-center collapsed\" data-toggle=\"collapse\"\n                data-target=\"#bibliographyCollapse\" aria-expanded=\"true\" aria-controls=\"bibliographyCollapse\">\n                Bibliography Panel\n                <span *ngIf=\"countElement > 0\">&nbsp;({{countElement}})</span>\n                <i class=\"fa ml-auto\"></i>\n            </a>\n        </h5>\n    </div>\n    <div id=\"bibliographyCollapse\" class=\"collapse\" aria-labelledby=\"bibliographyHeading\">\n\n        <div class=\"card-body\">\n            <div id=\"accordion\">\n            <!----- FORM ----->\n            <form [formGroup]=\"bibliographyForm\" *ngIf=\"object!=null\"> <!--  -->\n                <div formArrayName=\"bibliography\">\n                    <div *ngFor=\"let biblio of bibliographyForm['controls'].bibliography['controls']; let i = index\">\n                        <div [formGroupName]=\"i\">\n                            <div class=\"form-group row ml-2 mt-3 mr-2\">\n                                <div class=\"input-group col-xl-12 p-0\">\n                                    \n                                    <div class=\"card\">\n                                        <a class=\"biblioCollapse\" data-toggle=\"collapse\" [attr.data-target]=\"'#collapse-'+i\" aria-expanded=\"true\" [attr.aria-controls]=\"'#collapse-'+i\"><span class=\"text-id pointer\"><b>{{biblio.get(\"author\").value}} - {{biblio.get(\"date\").value}} ({{biblio.get(\"title\").value != undefined ? (biblio.get(\"title\").value | slice:0:10) +'...' : ''}})</b></span></a>\n                                        <span *ngIf=\"bibliographyData != undefined\" class=\"icons-container\">\n                                            <!-- {{bibliographyData[i]['url'] | json}} -->\n                                            <span><a target=\"_blank\" class=\"pointer text-primary\" (click)=\"synchronizeBibliography(biblio.get('id').value, i)\"><span class=\"synchro-icon\"><i class=\"fas fa-sync-alt\" *ngIf=\"!loadingSynchro[i]\"></i> <i class=\"fas fa-sync fa-spin\" *ngIf=\"loadingSynchro[i]\"></i></span></a></span>\n                                            <span ><a href=\"https://www.zotero.org/groups/2552746/prin_italia_antica/items/{{bibliographyData[i]['id']}}/library\" target=\"_blank\" class=\"pointer text-primary\"><span class=\"external-icon\"><i class=\"fas fa-external-link-alt\"></i></span></a></span>\n                                            <span><a *ngIf=\"bibliographyData[i]['url'] != ''\" [href]=\"bibliographyData[i]['url']\" target=\"_blank\" class=\"pointer text-primary\"><span class=\"download-icon\"><i class=\"fas fa-download\"></i></span></a></span>\n                                        </span>\n                                        \n                                        <a class=\"pointer\" (click)=\"removeItem(i)\"><span class=\"trash-icon\"><i class=\"fa fa-trash text-danger\"></i></span></a> \n                                        \n                                        <div [id]=\"'collapse-'+i\" class=\"collapse\" data-parent=\"#accordion\">\n                                            <div class=\"card-body\">\n                                                <div class=\"form-group row ml-2 mr-2 mb-0\">\n                                                    <label for=\"inputLabel\" class=\"col-lg-4 col-form-label\">Title:</label>\n                                                    <div class=\"input-group col-lg-8 pl-0\">\n                                                        <input id=\"title\" formControlName=\"title\" name=\"title\" type=\"text\" class=\"form-control\" placeholder=\"\" disabled>\n                                                    </div>\n                                                </div>           \n                                                <div class=\"form-group row ml-2 mr-2 mb-0\">\n                                                    <label for=\"inputLabel\" class=\"col-lg-4 col-form-label\">Author:</label>\n                                                    <div class=\"input-group col-lg-8 pl-0\">\n                                                        <input id=\"author\"  formControlName=\"author\" name=\"author\" type=\"text\" class=\"form-control\" placeholder=\"\" disabled>\n                                                    </div>\n                                                </div>   \n                                                <div class=\"form-group row ml-2 mr-2 mb-0\">\n                                                    <label for=\"inputLabel\" class=\"col-lg-4 col-form-label\">Date:</label>\n                                                    <div class=\"input-group col-lg-8 pl-0\">\n                                                        <input id=\"date\"  formControlName=\"date\" name=\"date\" type=\"text\" class=\"form-control\" placeholder=\"\" disabled>\n                                                    </div>\n                                                </div>\n                                                <div class=\"form-group row ml-2 mr-2\">\n                                                    <label for=\"inputLabel\" class=\"col-lg-4 col-form-label\">Note:</label>\n                                                    <div class=\"input-group col-lg-8 pl-0\">\n                                                        <!-- <input id=\"note\"  formControlName=\"note\" name=\"note\" type=\"text\" class=\"form-control\" placeholder=\"\"> -->\n                                                        <textarea (keyup)=\"debounceKeyup($event, i, 'note')\" formControlName=\"note\" name=\"note\" class=\"form-control\" style=\"resize: none;\"></textarea>\n                                                    </div>\n                                                </div>  \n                                                <div class=\"form-group row ml-2 mr-2\">\n                                                    <label for=\"inputLabel\" class=\"col-lg-4 col-form-label\">Page(s):</label>\n                                                    <div class=\"input-group col-lg-8 pl-0\">\n                                                        <!-- <input id=\"note\"  formControlName=\"note\" name=\"note\" type=\"text\" class=\"form-control\" placeholder=\"\"> -->\n                                                        <textarea (keyup)=\"debounceKeyup($event, i, 'label')\" formControlName=\"textualReference\" name=\"textualReference\" class=\"form-control\" style=\"resize: none;\"></textarea>\n                                                    </div>\n                                                </div>     \n                                            </div>\n                                        </div>                                            \n                                    </div>\n                                    \n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </form>\n            </div>\n           \n        </div>\n    </div>\n</div>","import { KeycloakService } from 'keycloak-angular';\nimport { environment } from '../../../environments/environment';\n \nexport function initializer(keycloak: KeycloakService): () => Promise<any> {\n    return (): Promise<void> => {\n        return new Promise(async (resolve, reject) => {\n          try {\n            await keycloak.init({\n                config: {\n                    url: environment.keycloak.issuer,\n                    realm: environment.keycloak.realm,\n                    clientId: environment.keycloak.clientId\n                },\n              loadUserProfileAtStartUp: false,\n              enableBearerInterceptor: true,\n              bearerPrefix: 'Bearer',\n              initOptions: {\n                onLoad: 'check-sso',\n                checkLoginIframe: true\n              },\n              bearerExcludedUrls: [\n                'api.zotero.org'\n              ]\n            });\n            resolve();\n          } catch (error) {\n            reject(error);\n          }\n        });\n      };\n}","/*\n   Copyright 2021-2022  Istituto di Linguistica Computazionale \"A. Zampolli\", Consiglio Nazionale delle Ricerche, Pisa, Italy.\n \nThis file is part of EpiLexo.\n\nEpiLexo is free software: you can redistribute it and/or modify it under the terms of the GNU General Public License as published by the Free Software Foundation, either version 3 of the License, or (at your option) any later version.\n\nEpiLexo is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for more details.\n\nYou should have received a copy of the GNU General Public License along with EpiLexo. If not, see <https://www.gnu.org/licenses/>.\n*/\n\nimport { Component, HostListener, Input, OnChanges, OnInit, SimpleChanges } from '@angular/core';\nimport { AngularEditorConfig } from '@kolkov/angular-editor';\nimport { ToastrService } from 'ngx-toastr';\nimport { Subject } from 'rxjs';\nimport { debounceTime } from 'rxjs/operators';\nimport { LexicalEntriesService } from 'src/app/services/lexical-entries/lexical-entries.service';\n\n@Component({\n  selector: 'app-note-panel',\n  templateUrl: './note-panel.component.html',\n  styleUrls: ['./note-panel.component.scss']\n})\nexport class NotePanelComponent implements OnInit, OnChanges {\n\n  @Input() noteData: string;\n  object : any;\n  private subject : Subject<string> = new Subject();\n  \n  @HostListener('window:keyup', ['$event'])\n  keyEvent(event: KeyboardEvent) {\n    /* //console.log(event) */\n    event.preventDefault();\n    event.stopPropagation();\n    return;\n  }\n\n  htmlContent : '';\n  editorConfig: AngularEditorConfig = {\n    editable: true,\n    spellcheck: true,\n    height: 'auto',\n    minHeight: '0',\n    maxHeight: '150px',\n    width: 'auto',\n    minWidth: '0',\n    translate: 'yes',\n    enableToolbar: true,\n    showToolbar: true,\n    placeholder: 'Enter text here...',\n    defaultParagraphSeparator: '',\n    customClasses: [\n      {\n        name: 'quote',\n        class: 'quote',\n      },\n      {\n        name: 'redText',\n        class: 'redText'\n      },\n      {\n        name: 'titleText',\n        class: 'titleText',\n        tag: 'h1',\n      },\n    ],\n    uploadUrl: 'v1/image',\n    uploadWithCredentials: false,\n    sanitize: true,\n    toolbarPosition: 'top',\n    toolbarHiddenButtons: [\n      [\n        'undo',\n        'redo',\n        'strikeThrough',\n        'justifyLeft',\n        'justifyCenter',\n        'justifyRight',\n        'justifyFull',\n        'indent',\n        'outdent',\n        'insertUnorderedList',\n        'insertOrderedList',\n        'heading',\n        'fontName'\n      ],\n      [\n        'fontSize',\n        'textColor',\n        'backgroundColor',\n        'customClasses',\n        'link',\n        'unlink',\n        'insertImage',\n        'insertVideo',\n        'insertHorizontalRule',\n        'toggleEditorMode'\n      ]\n    ]\n  };\n  constructor(private lexicalService: LexicalEntriesService, private toastr: ToastrService) { }\n\n  ngOnInit(): void {\n    this.editorConfig.editable = false;\n\n\n    this.subject.pipe(debounceTime(1000)).subscribe(\n      newNote => {\n        if(this.noteData != null){\n          this.lexicalService.spinnerAction('on');\n          console.log(this.object)\n          //console.log(this.object)\n          if(this.object.lexicalEntryInstanceName != undefined){\n            var lexId = this.object.lexicalEntryInstanceName;\n            var parameters = {\n              relation : \"note\",\n              value : newNote\n            }\n            this.lexicalService.updateLexicalEntry(lexId, parameters).subscribe(\n              data => {\n                //console.log(data);\n                data['request'] = 0;\n                data['new_note'] = newNote;\n                this.lexicalService.refreshAfterEdit(data);\n                this.lexicalService.spinnerAction('off');\n                this.toastr.success('Note updated', '', {\n                  timeOut: 5000,\n                });\n              },\n              error => {\n                //console.log(error);\n                const data = this.object;\n                data['request'] = 0;\n                data['new_note'] = newNote;\n                this.lexicalService.refreshAfterEdit(data);\n                this.lexicalService.updateLexCard({lastUpdate : error.error.text})\n                this.lexicalService.spinnerAction('off');\n                this.toastr.success('Note updated', '', {\n                  timeOut: 5000,\n                });\n              }\n            )\n          }else if(this.object.formInstanceName != undefined){\n            var formId = this.object.formInstanceName;\n            var parameters = {\n              relation : \"note\",\n              value : newNote\n            }\n            this.lexicalService.updateForm(formId, parameters).subscribe(\n              data => {\n                //console.log(data);\n                data['request'] = 0;\n                data['new_note'] = newNote;\n                this.lexicalService.refreshAfterEdit(data);\n                this.lexicalService.spinnerAction('off');\n                this.toastr.success('Note updated', '', {\n                  timeOut: 5000,\n                });\n              },\n              error => {\n                //console.log(error);\n                const data = this.object;\n                data['request'] = 0;\n                data['new_note'] = newNote;\n                this.lexicalService.refreshAfterEdit(data);\n                this.lexicalService.updateLexCard({lastUpdate : error.error.text})\n                this.lexicalService.spinnerAction('off');\n                this.toastr.success('Note updated', '', {\n                  timeOut: 5000,\n                });\n              }\n            )\n          }else if(this.object.senseInstanceName != undefined){\n            var senseId = this.object.senseInstanceName;\n            var parameters = {\n              relation : \"note\",\n              value : newNote\n            }\n            this.lexicalService.updateSense(senseId, parameters).subscribe(\n              data => {\n                //console.log(data);\n                data['request'] = 0;\n                data['new_note'] = newNote;\n                this.lexicalService.refreshAfterEdit(data);\n                this.lexicalService.spinnerAction('off');\n                this.toastr.success('Note updated', '', {\n                  timeOut: 5000,\n                });\n              },\n              error => {\n                //console.log(error);\n                const data = this.object;\n                data['request'] = 0;\n                data['new_note'] = newNote;\n                this.lexicalService.refreshAfterEdit(data);\n                this.lexicalService.updateLexCard({lastUpdate : error.error.text})\n                this.lexicalService.spinnerAction('off');\n                this.toastr.success('Note updated', '', {\n                  timeOut: 5000,\n                });\n              }\n            )\n          }else if(this.object.etymologyInstanceName != undefined){\n            var etymId = this.object.etymologyInstanceName;\n            var parameters = {\n              relation : \"note\",\n              value : newNote\n            }\n            this.lexicalService.updateEtymology(etymId, parameters).subscribe(\n              data => {\n                //console.log(data);\n                data['request'] = 0;\n                data['new_note'] = newNote;\n                this.lexicalService.refreshAfterEdit(data);\n                this.lexicalService.spinnerAction('off');\n                this.toastr.success('Note updated', '', {\n                  timeOut: 5000,\n                });\n              },\n              error => {\n                //console.log(error);\n                const data = this.object;\n                data['request'] = 0;\n                data['new_note'] = newNote;\n                this.lexicalService.refreshAfterEdit(data);\n                this.lexicalService.updateLexCard({lastUpdate : error.error.text})\n                this.lexicalService.spinnerAction('off');\n                this.toastr.success('Note updated', '', {\n                  timeOut: 5000,\n                });\n              }\n            )\n          }\n        }\n      }\n    )\n\n    this.lexicalService.deleteReq$.subscribe(\n      data => {\n        this.editorConfig.editable = false;\n        this.noteData = null;\n        this.object = null;\n      }\n    )\n  }\n\n  ngOnChanges(changes: SimpleChanges) { \n    \n      if(changes.noteData.currentValue == null){\n        this.editorConfig.editable = false;\n        this.noteData = null;\n        this.object = null;\n      }else{\n        this.editorConfig.editable = true;\n        this.noteData = changes.noteData.currentValue.note;\n        this.object = changes.noteData.currentValue;\n      }\n      \n      /* //console.log(changes) */\n    \n  }\n\n  onChanges(evt){\n    if(evt.key != \"Control\" && evt.key != 'Alt' && evt.key != 'Shift'){\n      this.subject.next(this.noteData);\n    }\n    \n  }\n\n}\n","\n\n<div class=\"card\">\n    <div class=\"card-header\" id=\"noteHeading\">\n        <h5 class=\"mb-0\">\n            <a class=\"btn btn-link w-100 d-flex align-self-center collapsed\" data-toggle=\"collapse\" data-target=\"#noteCollapse\" aria-expanded=\"true\" aria-controls=\"noteCollapse\">\n                Note Panel<i class=\"fa ml-auto\"></i>\n            </a>\n        </h5>\n    </div>\n    <div id=\"noteCollapse\" class=\"collapse\" aria-labelledby=\"noteHeading\">\n        <div class=\"card-body\">\n           <angular-editor *ngIf=\"noteData != null\" [placeholder]=\"'Enter text here...'\" [(ngModel)]=\"noteData\" [config]=\"editorConfig\" (keyup)=\"onChanges($event)\" readonly></angular-editor>\n        </div>\n    </div>\n</div>\n","/*\n   Copyright 2021-2022  Istituto di Linguistica Computazionale \"A. Zampolli\", Consiglio Nazionale delle Ricerche, Pisa, Italy.\n \nThis file is part of EpiLexo.\n\nEpiLexo is free software: you can redistribute it and/or modify it under the terms of the GNU General Public License as published by the Free Software Foundation, either version 3 of the License, or (at your option) any later version.\n\nEpiLexo is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for more details.\n\nYou should have received a copy of the GNU General Public License along with EpiLexo. If not, see <https://www.gnu.org/licenses/>.\n*/\n\nimport { HttpClient } from '@angular/common/http';\nimport { Injectable } from '@angular/core';\nimport { BehaviorSubject, Observable } from 'rxjs';\n\nimport { AuthService } from '../auth/auth.service';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class LexicalEntriesService {\n\n  private _coreFormData: BehaviorSubject<object> = new BehaviorSubject(null);\n  private _attestationPanelData: BehaviorSubject<object> = new BehaviorSubject(null);\n  /* private _vartransData: BehaviorSubject<object> = new BehaviorSubject(null); */\n  private _etymologyData: BehaviorSubject<object> = new BehaviorSubject(null);\n  private _rightPanelData: BehaviorSubject<object> = new BehaviorSubject(null);\n  private _deleteLexicalEntryReq: BehaviorSubject<any> = new BehaviorSubject(null);\n  private _addSubElementReq: BehaviorSubject<any> = new BehaviorSubject(null);\n  private _updateLexCardReq: BehaviorSubject<object> = new BehaviorSubject(null);\n  private _spinnerAction: BehaviorSubject<string> = new BehaviorSubject(null);\n  private _refreshLanguageTable: BehaviorSubject<object> = new BehaviorSubject(null);\n  private _refreshAfterEdit : BehaviorSubject<object> = new BehaviorSubject(null);\n  private _refreshFilter : BehaviorSubject<object> = new BehaviorSubject(null);\n  private _updateLangSelect : BehaviorSubject<object> = new BehaviorSubject(null);\n  private _triggerNotePanel : BehaviorSubject<boolean> = new BehaviorSubject(null);\n  private _triggerAttestationPanel : BehaviorSubject<boolean> = new BehaviorSubject(null);\n  private _changeDecompLabel : BehaviorSubject<string> = new BehaviorSubject(null);\n  private _decompData : BehaviorSubject<object> = new BehaviorSubject(null);\n\n  private baseUrl = \"/LexO-backend-itant/service/\"\n  private key = \"PRINitant19\";\n  private author = \"\";\n\n  coreData$ = this._coreFormData.asObservable();\n  decompData$ = this._decompData.asObservable();\n  attestationPanelData$ = this._attestationPanelData.asObservable();\n  /* vartransData = this._vartransData.asObservable(); */\n  etymologyData$ = this._etymologyData.asObservable();\n  rightPanelData$ = this._rightPanelData.asObservable();\n  deleteReq$ = this._deleteLexicalEntryReq.asObservable();\n  addSubReq$ = this._addSubElementReq.asObservable();\n  updateLexCardReq$ = this._updateLexCardReq.asObservable();\n  spinnerAction$ = this._spinnerAction.asObservable();\n  refreshLangTable$ = this._refreshLanguageTable.asObservable();\n  refreshAfterEdit$ = this._refreshAfterEdit.asObservable();\n  refreshFilter$ = this._refreshFilter.asObservable();\n  updateLangSelect$ = this._updateLangSelect.asObservable();\n  triggerNotePanel$ = this._triggerNotePanel.asObservable();\n  triggerAttestationPanel$ = this._triggerAttestationPanel.asObservable();\n  changeDecompLabel$ = this._changeDecompLabel.asObservable();\n\n  constructor(private http: HttpClient, private auth: AuthService) { }\n\n  sendToCoreTab(object: object) {\n    this._coreFormData.next(object)\n  } \n\n  sendToDecompTab(object: object){\n    this._decompData.next(object);\n  }\n  \n  sendToAttestationPanel(object: object) {\n    this._attestationPanelData.next(object)\n  } \n\n  changeDecompLabel(string:string){\n    this._changeDecompLabel.next(string);\n  }\n  \n  /* sendToVartransTab(object: object) {\n    this._vartransData.next(object)\n  } */\n\n  sendToRightTab(object: object) {\n    this._rightPanelData.next(object);\n  }\n\n  sendToEtymologyTab(object: object) {\n    this._etymologyData.next(object);\n  }\n\n  deleteRequest(request? : any) {\n    this._deleteLexicalEntryReq.next(request);\n  }\n\n  addSubElementRequest(request?: any){\n    this._addSubElementReq.next(request);\n  }\n\n  updateLexCard(object: object) {\n    this._updateLexCardReq.next(object)\n  }\n\n  spinnerAction(string: string) {\n    this._spinnerAction.next(string)\n  }\n\n  refreshLangTable(){\n    this._refreshLanguageTable.next(null);\n  }\n\n  refreshAfterEdit(object: object){\n    this._refreshAfterEdit.next(object);\n  }\n\n  refreshFilter(object: object){\n    this._refreshFilter.next(object);\n  }\n\n  updateLangSelect(object: object){\n    this._updateLangSelect.next(object);\n  }\n\n  triggerNotePanel(bool: boolean){\n    this._triggerNotePanel.next(bool);\n  }\n\n  triggerAttestationPanel(bool: boolean){\n    this._triggerAttestationPanel.next(bool);\n  }\n\n  //POST: /lexicon/lexicalEntries ---> get lexical entries list\n  getLexicalEntriesList(parameters: any): Observable<any> {\n    return this.http.post(this.baseUrl + \"lexicon/data/lexicalEntries\", parameters);\n  }\n\n  //POST: /lexicon/lexicalSenses ---> get lexical entries list\n  getLexicalSensesList(parameters: any): Observable<any> {\n    return this.http.post(this.baseUrl + \"lexicon/data/lexicalSenses\", parameters);\n  }\n\n  //POST: /lexicon/data/forms ---> get form list\n  getFormList(parameters: any): Observable<any> {\n    return this.http.post(this.baseUrl + \"lexicon/data/forms\", parameters);\n  }\n\n  //GET /lexicon/data/{id}/elements --> get elements of lexical entry\n  getLexEntryElements(instance: string): Observable<any> {\n    return this.http.get(this.baseUrl + \"lexicon/data/\" + instance + \"/elements\");\n  }\n\n  //GET /lexicon/data/{id}/lexicalEntry --> get specific aspect (morphology, syntax, ...) associated with a given lexical entry\n  getLexEntryData(instance: string): Observable<any> {\n    return this.http.get(this.baseUrl + \"lexicon/data/\" + instance + \"/lexicalEntry?key=\" + this.key + \"&aspect=core\");\n  }\n\n  //GET /lexicon/data/{id}/lexicalEntryLinguisticRelation --> This method returns the relations with other lexical entities according to the input type\n  getLexEntryLinguisticRelation(lexId: string, property: string): Observable<any> {\n    return this.http.get(this.baseUrl + \"lexicon/data/\" + lexId + \"/linguisticRelation?key=\" + this.key + \"&property=\" + property + \"\");\n  }\n\n\n  //GET /lexicon/data/{id}/forms --> get forms of lexical entry\n  getLexEntryForms(instance: string): Observable<any> {\n    return this.http.get(this.baseUrl + \"lexicon/data/\" + instance + \"/forms\");\n  }\n\n\n  //GET /lexicon/data/{id}/form --> get data about a single form \n  getFormData(formId: string, aspect: string): Observable<any> {\n    return this.http.get(this.baseUrl + \"lexicon/data/\" + formId + \"/form?key=\" + this.key + \"&aspect=\" + aspect)\n  }\n\n\n  //GET /lexicon/data/{id}/lexicalSense --> get data about a single form \n  getSenseData(senseId: string, aspect: string): Observable<any> {\n    return this.http.get(this.baseUrl + \"lexicon/data/\" + senseId + \"/lexicalSense?key=\" + this.key + \"&aspect=\" + aspect)\n  }\n\n  //GET /lexicon/data/{id}/senses --> get list of senses of a lexical entry\n  getSensesList(instance: string): Observable<any> {\n    return this.http.get(this.baseUrl + \"lexicon/data/\" + instance + \"/senses\");\n  }\n\n  //GET /lexicon/data/languages --> Lexicon languages list\n  getLexiconLanguages(): Observable<any> {\n    return this.http.get(this.baseUrl + \"lexicon/data/languages\");\n  }\n\n  //GET /lexicon/statistics/languages --> get languages list for lexical entries menu filter search\n  getLanguages(): Observable<any> {\n    return this.http.get(this.baseUrl + \"lexicon/statistics/languages?key=\" + this.key + \"\");\n  }\n\n  //GET /lexicon/types --> get types list\n  getTypes(): Observable<any> {\n    return this.http.get(this.baseUrl + \"lexicon/statistics/types?key=\" + this.key + \"\");\n  }\n\n  //GET /lexicon/authors --> get authors list\n  getAuthors(): Observable<any> {\n    return this.http.get(this.baseUrl + \"lexicon/statistics/authors?key=\" + this.key + \"\");\n  }\n\n  //GET /lexicon/pos --> get pos list\n  getPos(): Observable<any> {\n    return this.http.get(this.baseUrl + \"lexicon/statistics/pos?key=\" + this.key + \"\");\n  }\n\n  //GET /lexicon/states --> get states list\n  getStatus(): Observable<any> {\n    return this.http.get(this.baseUrl + \"lexicon/statistics/status?key=\" + this.key + \"\");\n  }\n\n\n  //GET /lexicon/creation/lexicalEntry --> create new lexical entry\n  newLexicalEntry(): Observable<any> {\n    this.author = this.auth.getUsername();\n    return this.http.get(this.baseUrl + \"lexicon/creation/lexicalEntry?key=\" + this.key + \"&author=\" + this.author);\n  }\n\n\n  //GET /lexicon/delete/{id}/lexicalEntry --> delete lexical entry\n  deleteLexicalEntry(lexId): Observable<any> {\n    return this.http.get(this.baseUrl + \"lexicon/delete/\" + lexId + \"/lexicalEntry?key=\" + this.key);\n  }\n\n  //GET /lexicon/delete/{id}/form --> delete lexical entry\n  deleteForm(lexId): Observable<any> {\n    return this.http.get(this.baseUrl + \"lexicon/delete/\" + lexId + \"/form?key=\" + this.key);\n  }\n\n  //GET /lexicon/delete/{id}/lexicalSense --> delete lexical entry\n  deleteSense(lexId): Observable<any> {\n    return this.http.get(this.baseUrl + \"lexicon/delete/\" + lexId + \"/lexicalSense?key=\" + this.key);\n  }\n\n  //GET  /lexicon/delete/{id}/language  --> Lexicon language deletion\n  deleteLanguage(langId): Observable<any> {\n    return this.http.get(this.baseUrl + \"lexicon/delete/\" + langId + \"/language?key=\" + this.key);\n  }\n\n  //POST  /lexicon/delete/{id}/linguisticRelation  --> delete linguistic relation\n  deleteLinguisticRelation(lexId, parameters): Observable<any> {\n    return this.http.post(this.baseUrl + \"lexicon/delete/\" + lexId + \"/relation?key=\" + this.key, parameters);\n  }\n\n  //POST /lexicon/update/{id}/lexicalEntry --> lexical entry update\n  updateLexicalEntry(lexId, parameters): Observable<any> {\n    this.author = this.auth.getUsername();\n    return this.http.post(this.baseUrl + \"lexicon/update/\" + lexId + \"/lexicalEntry?key=\" + this.key + \"&user=\" + this.author, parameters);\n  }\n\n\n  //POST /lexicon/update/{id}/linguisticRelation --> linguistic Relation update for Core\n  updateLinguisticRelation(lexId, parameters): Observable<any> {\n    this.author = this.auth.getUsername();\n    return this.http.post(this.baseUrl + \"lexicon/update/\" + lexId + \"/linguisticRelation?key=\" + this.key + \"&user=\" + this.author, parameters);\n  }\n\n  //POST /lexicon/update/{id}/genericRelation --> Generic relation update\n  updateGenericRelation(lexId, parameters) : Observable<any> {\n    this.author = this.auth.getUsername();\n    return this.http.post(this.baseUrl + \"lexicon/update/\" + lexId + \"/genericRelation?key=\" + this.key + \"&user=\" + this.author, parameters);\n  }\n\n  //POST /lexicon/update/{id}/form --> update form values\n  updateForm(formId, parameters): Observable<any> {\n    this.author = this.auth.getUsername();\n    return this.http.post(this.baseUrl + \"lexicon/update/\" + formId + \"/form?key=\" + this.key + \"&user=\" + this.author, parameters);\n  }\n\n  //POST /lexicon/update/{id}/lexicalSense --> update form values\n  updateSense(senseId, parameters): Observable<any> {\n    this.author = this.auth.getUsername();\n    return this.http.post(this.baseUrl + \"lexicon/update/\" + senseId + \"/lexicalSense?key=\" + this.key + \"&user=\" + this.author, parameters);\n  }\n\n  //GET  /lexinfo/data/morphology --> get data about morphology\n  getMorphologyData(): Observable<any> {\n    return this.http.get(this.baseUrl + \"lexinfo/data/morphology\");\n  }\n\n  ///GET /ontolex/data/formType --> get data about form types\n  getFormTypes(): Observable<any> {\n    return this.http.get(this.baseUrl + \"ontolex/data/formType\");\n  }\n\n  ///GET /ontolex/data/lexicalEntryType --> get data about lexicalEntry types\n  getLexEntryTypes(): Observable<any> {\n    return this.http.get(this.baseUrl + \"ontolex/data/lexicalEntryType\");\n  }\n\n\n  //GET /lexicon/creation/form --> create new form\n  createNewForm(lexId): Observable<any> {\n    this.author = this.auth.getUsername();\n    return this.http.get(this.baseUrl + \"lexicon/creation/form?lexicalEntryID=\"+ lexId +\"&key=\" + this.key + \"&author=\" + this.author);\n  }\n\n  //GET /lexicon/creation/lexicalSense --> create new sense\n  createNewSense(lexId): Observable<any> {\n    this.author = this.auth.getUsername();\n    return this.http.get(this.baseUrl + \"lexicon/creation/lexicalSense?lexicalEntryID=\"+ lexId +\"&key=\" + this.key + \"&author=\" + this.author);\n  }\n\n  //GET /lexicon/creation/language --> create new language\n  createNewLanguage(langId): Observable<any> {\n    this.author = this.auth.getUsername();\n    return this.http.get(this.baseUrl + \"lexicon/creation/language?key=\" + this.key + \"&lang=\"+ langId +\"&author=\" + this.author);\n  }\n\n  //POST /lexicon/update/{id}/language --> update language\n  updateLanguage(langId, parameters): Observable<any> {\n    this.author = this.auth.getUsername();\n    return this.http.post(this.baseUrl + \"lexicon/update/\" + langId + \"/language?key=\" + this.key + \"&author=\" + this.author, parameters);\n  }\n  \n\n  //BIBLIOGRAPHY\n  getBibliographyData(instance: string) : Observable<any> {\n    return this.http.get(this.baseUrl + \"lexicon/data/\" + instance + \"/bibliography?key=lexodemo\");\n  }\n\n  addBibliographyData(instance : string, parameters){\n    this.author = this.auth.getUsername();\n    return this.http.post(this.baseUrl + \"lexicon/creation/bibliography?lexicalEntityID=\" + instance + \"&key=\"+ this.key +\"&author=\"+this.author+\"\", parameters);\n  }\n\n  removeBibliographyItem(instance: string) {\n    return this.http.get(this.baseUrl + \"lexicon/delete/\" + instance + \"/bibliography?key=PRINitant19\");\n  }\n\n  synchronizeBibliographyItem(lexId : string, itemKey : string) : Observable<any> {\n    return this.http.post(this.baseUrl + \"lexicon/update/synchronizeBibliography?lexicalEntityID=\"+lexId+\"&key=PRINitant19&author=demo&itemKey=\"+itemKey,{})\n  }\n\n\n  //ETYMOLOGY\n  createNewEtymology(instance: string) : Observable<any>{\n    this.author = this.auth.getUsername();\n    return this.http.get(this.baseUrl + \"lexicon/creation/etymology?lexicalEntryID=\"+instance+\"&key=\"+this.key+\"&author=\"+this.author+\"\");\n  }\n\n  getEtymologies(instance: string) : Observable<any> {\n    return this.http.get(this.baseUrl + \"lexicon/data/\" + instance + \"/etymologies?key=\"+this.key+\"\");\n  }\n\n  getEtymologyData(instance: string)  : Observable<any> {\n    return this.http.get(this.baseUrl + \"lexicon/data/\" + instance + \"/etymology?key=\"+this.key+\"\");\n  }\n\n  updateEtymology(etymId, parameters): Observable<any> {\n    this.author = this.auth.getUsername();\n    return this.http.post(this.baseUrl + \"lexicon/update/\" + etymId + \"/etymology?key=\" + this.key + \"&author=\" + this.author, parameters);\n  }\n\n  createNewEtylink(lexInstance: string, etymInstance : string) : Observable<any>{\n    return this.http.get(this.baseUrl + \"lexicon/creation/etymologicalLink?lexicalEntryID=\"+lexInstance+\"&etymologyID=\"+etymInstance+\"&key=\"+this.key+\"&author=\"+this.author+\"\");\n  }\n\n  deleteEtymology(etymInstance : string) : Observable<any>{\n    this.author = this.auth.getUsername();\n    return this.http.get(this.baseUrl + \"lexicon/delete/\"+etymInstance+\"/etymology?key=\"+this.key+\"&author=\"+this.author+\"\");\n  }\n\n  updateEtylink(etymId, parameters): Observable<any> {\n    this.author = this.auth.getUsername();\n    return this.http.post(this.baseUrl + \"lexicon/update/\" + etymId + \"/etymologicalLink?key=\" + this.key + \"&author=\" + this.author, parameters);\n  }\n\n  deleteEtylink(etyLinkInstance: string) : Observable<any>{\n    this.author = this.auth.getUsername();\n    return this.http.get(this.baseUrl + \"lexicon/delete/\"+etyLinkInstance+\"/etymologicalLink?key=\"+this.key+\"&author=\"+this.author+\"\");\n  }\n\n  //DECOMP\n  getSubTerms(lexicalEntityID: string) : Observable<any>{\n    return this.http.get(this.baseUrl + \"lexicon/data/\"+lexicalEntityID+\"/subTerms?key=\"+this.key);\n  }\n\n  getConstituents(lexicalEntityID: string) : Observable<any>{\n    return this.http.get(this.baseUrl + \"lexicon/data/\"+lexicalEntityID+\"/constituents?key=\"+this.key);\n  }\n\n  createComponent(lexicalEntityID : string) : Observable<any>{\n    this.author = this.auth.getUsername();\n    return this.http.get(this.baseUrl + \"lexicon/creation/component?id=\"+lexicalEntityID+\"&key=\"+this.key+\"&author=\"+this.author+\"\");\n  }\n\n  deleteComponent(compId : string) : Observable<any>{\n    return this.http.get(this.baseUrl + \"lexicon/delete/\"+compId+\"/component?key=\"+this.key);\n  }\n\n  getCorrespondsTo(compId: string) : Observable<any>{\n    return this.http.get(this.baseUrl + \"lexicon/data/\"+compId+\"/correspondsTo?key=\"+this.key);\n  }\n}\n","import { Component, OnInit } from '@angular/core';\n\n@Component({\n  selector: 'app-unauthorized-page',\n  templateUrl: './unauthorized-page.component.html',\n  styleUrls: ['./unauthorized-page.component.scss']\n})\nexport class UnauthorizedPageComponent implements OnInit {\n\n  constructor() { }\n\n  ngOnInit(): void {\n  }\n\n}\n","<p>unauthorized-page works!</p>\n","/*\n   Copyright 2021-2022  Istituto di Linguistica Computazionale \"A. Zampolli\", Consiglio Nazionale delle Ricerche, Pisa, Italy.\n \nThis file is part of EpiLexo.\n\nEpiLexo is free software: you can redistribute it and/or modify it under the terms of the GNU General Public License as published by the Free Software Foundation, either version 3 of the License, or (at your option) any later version.\n\nEpiLexo is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for more details.\n\nYou should have received a copy of the GNU General Public License along with EpiLexo. If not, see <https://www.gnu.org/licenses/>.\n*/\n\nimport { Component, OnInit } from '@angular/core';\nimport { ActivatedRoute, Router } from '@angular/router';\nimport { KeycloakEventType, KeycloakService } from 'keycloak-angular';\nimport { AuthService } from 'src/app/services/auth/auth.service';\n\n@Component({\n  selector: 'app-navbar',\n  templateUrl: './navbar.component.html',\n  styleUrls: ['./navbar.component.scss']\n})\nexport class NavbarComponent implements OnInit {\n \n  username : string;\n  userRoles;\n\n  constructor(private route: ActivatedRoute, private router: Router, private keycloakService: KeycloakService, private auth : AuthService) { }\n\n  ngOnInit(): void {\n    if(this.auth.getLoggedUser()['preferred_username'] != undefined){\n      this.username = this.auth.getLoggedUser()['preferred_username'];\n    }\n    \n    this.userRoles = this.auth.getCurrentUserRole();\n\n    this.keycloakService.keycloakEvents$.subscribe({\n      next: (e) => {\n        // console.log(e)\n        if (e.type == KeycloakEventType.OnTokenExpired) {\n          this.keycloakService.updateToken(20);\n        }\n      }\n    });\n  }\n\n  logout(){\n    this.auth.logout();\n  }\n\n\n  isAdmin = () => {\n    let admin = (element) => element == 'ADMIN';\n    console.log(this.userRoles.some(admin))\n  }\n\n}\n","\n\n<nav class=\"navbar navbar-expand-lg navbar-light bg-light\">\n    <!-- <a class=\"navbar-brand\" href=\"#\">Navbar</a> -->\n    <button class=\"navbar-toggler\" type=\"button\" data-toggle=\"collapse\" data-target=\"#navbarSupportedContent\"\n        aria-controls=\"navbarSupportedContent\" aria-expanded=\"false\" aria-label=\"Toggle navigation\">\n        <span class=\"navbar-toggler-icon\"></span>\n    </button>\n    <div class=\"d-flex-md d-flex-xs d-lg-none\">\n        <ul class=\"navbar-nav flex-row\">\n            <div class=\"dropdown mr-2\">\n                <button class=\"btn btn-light dropdown-toggle\" type=\"button\" id=\"dropdownMenuButton\" data-toggle=\"dropdown\" aria-haspopup=\"true\" aria-expanded=\"false\">\n                    <img src=\"https://s3.eu-central-1.amazonaws.com/bootstrapbaymisc/blog/24_days_bootstrap/fox.jpg\" width=\"24\" height=\"24\" class=\"rounded-circle\">\n                </button>\n                <div class=\"dropdown-menu\" aria-labelledby=\"dropdownMenuButton\">\n                    <a class=\"dropdown-item\"><i class=\"fa fa-power-off\" aria-hidden=\"true\" (click)=\"logout()\"></i> Logout</a>\n                </div>\n            </div>\n        </ul>\n    </div>\n    <div class=\"collapse navbar-collapse\" id=\"navbarSupportedContent\">\n        <ul class=\"navbar-nav mr-auto\">\n            <!-- <li class=\"nav-item\">\n                <a class=\"nav-link disabled\" routerLink=\"home\" routerLinkActive=\"active\">\n                    <i class=\"fa fa-home\" aria-hidden=\"true\"></i>\n                </a>\n            </li> -->\n            <li class=\"nav-item\" *ngIf=\"isAdmin\">\n                <a class=\"nav-link\" routerLink=\"user\" routerLinkActive=\"active\">\n                    <i class=\"fa fa-user\"></i>\n                </a>\n            </li>\n            <li class=\"nav-item\">\n                <a class=\"nav-link\" routerLink=\"lexicon\" routerLinkActive=\"active\">\n                    <i class=\"fa fa-edit\"></i>\n                </a>\n            </li>\n            <li class=\"nav-item\">\n                <a class=\"nav-link disabled\" routerLink=\"search\" routerLinkActive=\"active\">\n                    <i class=\"fa fa-search\" aria-hidden=\"true\"></i>\n                </a>\n            </li>\n        </ul>\n        <ul class=\"navbar-nav ml-auto d-none d-xs-none d-sm-none d-lg-flex align-items-center\">\n            <div class=\"dropdown mr-2\">\n                <button class=\"btn btn-light dropdown-toggle\" type=\"button\" id=\"dropdownMenuButton\"\n                    data-toggle=\"dropdown\" aria-haspopup=\"true\" aria-expanded=\"false\">\n                    {{username}}\n                    <!-- <img src=\"https://s3.eu-central-1.amazonaws.com/bootstrapbaymisc/blog/24_days_bootstrap/fox.jpg\"\n                        width=\"24\" height=\"24\" class=\"rounded-circle\"> -->\n                </button>\n                <div class=\"dropdown-menu\" aria-labelledby=\"dropdownMenuButton\">\n                    <a class=\"dropdown-item pointer\" (click)=\"logout()\"><i class=\"fa fa-power-off\" aria-hidden=\"true\"></i> Logout</a>\n                </div>\n            </div>\n            <li class=\"nav-item\">\n                <a class=\"nav-link\"\n                    href=\"https://docs.google.com/document/d/1rTzEKBU7a_nvG3_paDKcyBitgIn06XW7von883NKnn0/edit\"\n                    target=\"_blank\">\n                    <i class=\"fa fa-info-circle\" aria-hidden=\"true\"></i>\n                </a>\n            </li>\n        </ul>\n    </div>\n</nav>","/*\n   Copyright 2021-2022  Istituto di Linguistica Computazionale \"A. Zampolli\", Consiglio Nazionale delle Ricerche, Pisa, Italy.\n \nThis file is part of EpiLexo.\n\nEpiLexo is free software: you can redistribute it and/or modify it under the terms of the GNU General Public License as published by the Free Software Foundation, either version 3 of the License, or (at your option) any later version.\n\nEpiLexo is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for more details.\n\nYou should have received a copy of the GNU General Public License along with EpiLexo. If not, see <https://www.gnu.org/licenses/>.\n*/\n\nimport { Component, ElementRef, Input, OnInit, Renderer2, ViewChild } from '@angular/core';\nimport { LexicalEntriesService } from '../../../../../services/lexical-entries/lexical-entries.service';\nimport { ExpanderService } from 'src/app/services/expander/expander.service';\n\nimport {\n  animate,\n  style,\n  transition,\n  trigger,\n  state\n} from \"@angular/animations\";\n\nimport { ToastrService } from 'ngx-toastr';\nimport { BibliographyService } from 'src/app/services/bibliography-service/bibliography.service';\nimport { ModalComponent } from 'ng-modal-lib';\nimport { Subject } from 'rxjs';\nimport { debounceTime } from 'rxjs/operators';\n\n@Component({\n  selector: 'app-etymology-tab',\n  templateUrl: './etymology-tab.component.html',\n  styleUrls: ['./etymology-tab.component.scss'],\n  animations: [\n    trigger('slideInOut', [\n      state('in', style({\n        height: 'calc(100vh - 22rem)',\n\n      })),\n      state('out', style({\n        height: 'calc(50vh - 12.5rem)',\n      })),\n      transition('in => out', animate('400ms ease-in-out')),\n      transition('out => in', animate('400ms ease-in-out'))\n    ])\n  ]\n})\nexport class EtymologyTabComponent implements OnInit {\n\n  lock = 0;\n  object: any;\n  exp_trig = '';\n\n  isLexicalEntry = false;\n  isForm = false;\n  isSense = false;\n  isLexicalConcept = false;\n  searchIconSpinner = false;\n  goBack = false;\n  isEtymology = false;\n\n\n\n  lastUpdateDate: any;\n  creationDate: any;\n  creator: any;\n  revisor: any;\n\n  lexicalEntryData: any;\n  formData: any;\n  senseData: any;\n  lexicalConceptData: any;\n  bibliography = [];\n\n  start = 0;\n  sortField = 'title';\n  direction = 'asc';\n  memorySort = { field: '', direction: '' }\n  queryTitle = '';\n  queryMode = 'titleCreatorYear';\n\n  private searchSubject: Subject<any> = new Subject();\n  selectedItem;\n\n  @ViewChild('expander') expander_body: ElementRef;\n  @Input() etymologyData: any;\n  @ViewChild('addBibliography', { static: false }) modal: ModalComponent;\n  @ViewChild('table_body') tableBody: ElementRef;\n\n  constructor(private lexicalService: LexicalEntriesService, private biblioService: BibliographyService, private expand: ExpanderService, private rend: Renderer2, private toastr: ToastrService) { }\n\n  ngOnInit(): void {\n\n    this.lexicalService.etymologyData$.subscribe(\n      object => {\n        if (this.object != object) {\n          this.etymologyData = null;\n          this.isForm = false;\n          this.isLexicalConcept = false;\n          this.isLexicalEntry = false;\n        }\n        this.object = object\n        //console.log(this.object)\n        if (this.object != null) {\n          \n          this.creator = this.object['etymology'].creator;\n          this.revisor = this.object.revisor;\n          this.etymologyData = object;\n          this.isEtymology = true;\n          setTimeout(() => {\n            //@ts-ignore\n            $('#etymologyTabModal').modal('hide');\n            $('.modal-backdrop').remove();\n            var timer = setInterval((val)=>{                 \n              try{\n                  //@ts-ignore\n                  $('#etymologyTabModal').modal('hide');\n                  if(!$('#etymologyTabModal').is(':visible')){\n                    clearInterval(timer)\n                  }\n                  \n              }catch(e){\n                  console.log(e)\n              }    \n            }, 10)\n          }, 500);\n        }\n      }\n    );\n\n    this.expand.expEdit$.subscribe(\n      trigger => {\n        setTimeout(() => {\n          if(trigger){\n            let isEditExpanded = this.expand.isEditTabExpanded();\n            let isEpigraphyExpanded = this.expand.isEpigraphyTabExpanded();\n  \n            if(!isEpigraphyExpanded){\n              this.exp_trig = 'in';\n              this.rend.setStyle(this.expander_body.nativeElement, 'height', 'calc(100vh - 22rem)')\n              this.rend.setStyle(this.expander_body.nativeElement, 'max-height', 'calc(100vh - 22rem)')\n            }else{\n              this.rend.setStyle(this.expander_body.nativeElement, 'height', 'calc(50vh - 12.5rem)');\n              this.rend.setStyle(this.expander_body.nativeElement, 'max-height', 'calc(50vh - 12.5rem)');\n              this.exp_trig = 'in';\n            }\n            \n          }else if(trigger==null){\n            return;\n          }else{\n            this.rend.setStyle(this.expander_body.nativeElement, 'height', 'calc(50vh - 12.5rem)');\n            this.rend.setStyle(this.expander_body.nativeElement, 'max-height', 'calc(50vh - 12.5rem)');\n            this.exp_trig = 'out';\n          }\n        }, 100);\n        \n      }\n    );\n\n    this.expand.expEpigraphy$.subscribe(\n      trigger => {\n        setTimeout(() => {\n          if(trigger){\n            this.exp_trig = 'in';\n            this.rend.setStyle(this.expander_body.nativeElement, 'height', 'calc(50vh - 12.5rem)')\n            this.rend.setStyle(this.expander_body.nativeElement, 'max-height', 'calc(50vh - 12.5rem)')\n          }else if(trigger==null){\n            return;\n          }else{\n            this.rend.setStyle(this.expander_body.nativeElement, 'max-height', 'calc(50vh - 12.5rem)');\n            this.exp_trig = 'out';\n          }\n        }, 100);\n        \n      }\n    );\n\n    this.lexicalService.updateLexCardReq$.subscribe(\n      data => {\n        console.log(data)\n        if (data != null) {\n          this.lastUpdateDate = data['lastUpdate']\n          if (data['creationDate'] != undefined) {\n            this.creationDate = data['creationDate']\n          }\n        }\n      }\n    )\n\n    this.lexicalService.spinnerAction$.subscribe(\n      data => {\n        if (data == 'on') {\n          this.searchIconSpinner = true;\n        } else {\n          this.searchIconSpinner = false;\n        }\n      },\n      error => {\n\n      }\n    )\n\n    this.searchSubject.pipe(debounceTime(1000)).subscribe(\n      data => {\n        this.queryTitle = data.query;\n        data.queryMode ? this.queryMode = 'everything' : this.queryMode = 'titleCreatorYear';\n        this.searchBibliography(this.queryTitle, this.queryMode);\n      }\n    )\n\n    //@ts-ignore\n    $(\"#biblioModalEtym\").modal(\"show\");\n    $('.modal-backdrop').appendTo('.ui-modal');\n    //@ts-ignore\n    $('#biblioModalEtym').modal({ backdrop: 'static', keyboard: false })\n\n    $('.modal-backdrop').css('height', 'inherit');\n    $('body').removeClass(\"modal-open\")\n    $('body').css(\"padding-right\", \"\");\n\n    this.biblioService.bootstrapData(this.start, this.sortField, this.direction).subscribe(\n      data => {\n        this.memorySort = { field: this.sortField, direction: this.direction }\n        this.bibliography = data;\n        this.bibliography.forEach(element => {\n          element['selected'] = false;\n        })\n\n\n        //@ts-ignore\n        $('#biblioModalEtym').modal('hide');\n        $('.modal-backdrop').remove();\n      }, error => {\n        console.log(error)\n      }\n    )\n  }\n\n\n\n  deleteEtymology() {\n    this.searchIconSpinner = true;\n    let etymId = this.object.etymology.etymologyInstanceName\n    this.lexicalService.deleteEtymology(etymId).subscribe(\n      data => {\n        this.searchIconSpinner = false;\n        this.lexicalService.deleteRequest(this.object);\n        this.lexicalEntryData = null;\n        this.isLexicalEntry = false;\n        this.object = null;\n        this.lexicalService.refreshLangTable();\n        this.lexicalService.refreshFilter({ request: true })\n        this.lexicalService.sendToCoreTab(null);\n        this.lexicalService.sendToRightTab(null);\n        this.biblioService.sendDataToBibliographyPanel(null);\n        this.toastr.success(etymId + ' deleted correctly', '', {\n          timeOut: 5000,\n        });\n      }, error => {\n        this.searchIconSpinner = false;\n        //this.lexicalService.deleteRequest(this.object);\n        //this.lexicalService.refreshLangTable();\n        //this.lexicalService.refreshFilter({request : true})\n        this.toastr.error(error.error, 'Error', {\n          timeOut: 5000,\n        });\n      }\n    )\n  }\n\n  addNewEtymology() {\n    this.searchIconSpinner = true;\n    this.object['request'] = 'etymology'\n\n\n    let parentNodeInstanceName = this.object.parentNodeInstanceName;\n    this.object['lexicalEntryInstanceName'] = parentNodeInstanceName\n    this.object['request'] = 'etymology'\n\n    console.log(this.object, parentNodeInstanceName)\n    this.lexicalService.createNewEtymology(parentNodeInstanceName).subscribe(\n      data => {\n        console.log(data)\n        data['label'] = 'Etymology of: ' + this.object['parentNodeLabel'];\n        if (data['creator'] == this.object.creator) {\n          data['flagAuthor'] = false;\n        } else {\n          data['flagAuthor'] = true;\n        }\n        this.lexicalService.addSubElementRequest({ 'lex': this.object, 'data': data });\n        this.searchIconSpinner = false;\n        this.toastr.success(data['etymologyInstanceName'] + ' added correctly', '', {\n          timeOut: 5000,\n        });\n      }, error => {\n        console.log(error)\n        this.searchIconSpinner = false;\n      }\n    )\n\n  }\n\n  showBiblioModal() {\n    this.modal.show();\n  }\n\n  checkIfCreatorExist(item?) {\n    return item.some(element => element.creatorType === 'author')\n  }\n\n  searchBibliography(query?: string, queryMode?: any) {\n    this.start = 0;\n    this.selectedItem = null;\n    //@ts-ignore\n    $(\"#biblioModalEtym\").modal(\"show\");\n    $('.modal-backdrop').appendTo('.table-body');\n    //@ts-ignore\n    $('#biblioModalEtym').modal({ backdrop: 'static', keyboard: false })\n    $('body').removeClass(\"modal-open\")\n    $('body').css(\"padding-right\", \"\");\n    console.log(query, queryMode)\n    this.tableBody.nativeElement.scrollTop = 0;\n    if (this.queryTitle != '') {\n      this.biblioService.filterBibliography(this.start, this.sortField, this.direction, this.queryTitle, this.queryMode).subscribe(\n        data => {\n          console.log(data);\n          this.bibliography = [];\n          data.forEach(element => {\n            this.bibliography.push(element)\n          });\n          setTimeout(() => {\n            //@ts-ignore\n            $('#biblioModalEtym').modal('hide');\n            $('.modal-backdrop').remove();\n          }, 100);\n\n        },\n        error => {\n          console.log(error)\n        }\n      )\n    } else {\n      this.biblioService.filterBibliography(this.start, this.sortField, this.direction, this.queryTitle, this.queryMode).subscribe(\n        data => {\n          console.log(data);\n          this.bibliography = [];\n          data.forEach(element => {\n            this.bibliography.push(element)\n          });\n          //@ts-ignore\n          $('#biblioModalEtym').modal('hide');\n          $('.modal-backdrop').remove();\n        },\n        error => {\n          console.log(error)\n        }\n      )\n    }\n  }\n\n  triggerSearch(evt, query, queryMode) {\n    if (evt.key != 'Control' && evt.key != 'Shift' && evt.key != 'Alt') {\n      this.searchSubject.next({ query, queryMode })\n    }\n  }\n\n  onScrollDown() {\n    //@ts-ignore\n    $(\"#biblioModalEtym\").modal(\"show\");\n    $('.modal-backdrop').appendTo('.table-body');\n    //@ts-ignore\n    $('#biblioModalEtym').modal({ backdrop: 'static', keyboard: false })\n    $('.modal-backdrop').appendTo('.table-body');\n    $('body').removeClass(\"modal-open\")\n    $('body').css(\"padding-right\", \"\");\n\n    this.start += 25;\n\n    if (this.queryTitle != '') {\n      this.biblioService.filterBibliography(this.start, this.sortField, this.direction, this.queryTitle, this.queryMode).subscribe(\n        data => {\n          console.log(data)\n          //@ts-ignore\n          $('#biblioModalEtym').modal('hide');\n          $('.modal-backdrop').remove();\n          data.forEach(element => {\n            this.bibliography.push(element)\n          });\n        }, error => {\n          console.log(error)\n        }\n      )\n    } else {\n      this.biblioService.filterBibliography(this.start, this.sortField, this.direction, this.queryTitle, this.queryMode).subscribe(\n        data => {\n\n          data.forEach(element => {\n            this.bibliography.push(element)\n          });\n\n          //@ts-ignore\n          $('#biblioModalEtym').modal('hide');\n          $('.modal-backdrop').remove();\n        }, error => {\n          console.log(error)\n        }\n      );\n    }\n\n\n  }\n\n  selectItem(evt, i) {\n    /* console.log(evt, i); */\n    if (evt.shiftKey) {\n\n    }\n    this.bibliography.forEach(element => {\n      if (element.key == i.key) {\n        element.selected = !element.selected;\n        element.selected ? this.selectedItem = element : this.selectedItem = null;\n        return true;\n      } else {\n        element.selected = false;\n        return false;\n      }\n    })\n\n  }\n\n  sortBibliography(evt?, val?) {\n\n\n    if (this.memorySort.field == val) {\n      if (this.direction == 'asc') {\n        this.direction = 'desc'\n        this.memorySort.direction = 'desc';\n      } else {\n        this.direction = 'asc';\n        this.memorySort.direction = 'asc';\n      }\n    } else {\n      this.sortField = val;\n      this.direction = 'asc';\n      this.memorySort = { field: this.sortField, direction: this.direction };\n    }\n\n    //@ts-ignore\n    $(\"#biblioModalEtym\").modal(\"show\");\n    $('.modal-backdrop').appendTo('.table-body');\n    //@ts-ignore\n    $('#biblioModalEtym').modal({ backdrop: 'static', keyboard: false })\n    $('.modal-backdrop').appendTo('.table-body');\n    $('body').removeClass(\"modal-open\")\n    $('body').css(\"padding-right\", \"\");\n    this.start = 0;\n    this.tableBody.nativeElement.scrollTop = 0;\n\n    this.biblioService.filterBibliography(this.start, this.sortField, this.direction, this.queryTitle, this.queryMode).subscribe(\n      data => {\n        console.log(data)\n        this.bibliography = [];\n        //@ts-ignore\n        $('#biblioModalEtym').modal('hide');\n        $('.modal-backdrop').remove();\n        data.forEach(element => {\n          this.bibliography.push(element)\n        });\n      }, error => {\n        console.log(error)\n      }\n    )\n\n  }\n\n  addNewForm() {\n    this.searchIconSpinner = true;\n    /* console.log(this.object) */\n    this.object['request'] = 'form'\n\n    let parentNodeInstanceName = this.object.parentNodeInstanceName;\n    this.object['request'] = 'form';\n    this.object['lexicalEntryInstanceName'] = parentNodeInstanceName\n    //console.log(this.object);\n    this.lexicalService.createNewForm(parentNodeInstanceName).subscribe(\n      data => {\n        if (data['creator'] == this.object.creator) {\n          data['flagAuthor'] = false;\n        } else {\n          data['flagAuthor'] = true;\n        }\n        this.lexicalService.addSubElementRequest({ 'lex': this.object, 'data': data });\n        this.searchIconSpinner = false;\n        this.toastr.success(data['formInstanceName'] + ' added correctly', '', {\n          timeOut: 5000,\n        });\n      }, error => {\n        this.searchIconSpinner = false;\n        this.toastr.error('Something goes wrong', 'Error', {\n          timeOut: 5000,\n        });\n      }\n    )\n\n\n  }\n\n  addNewSense() {\n    this.searchIconSpinner = true;\n    this.object['request'] = 'sense'\n\n    let parentNodeInstanceName = this.object.parentNodeInstanceName;\n    this.object['lexicalEntryInstanceName'] = parentNodeInstanceName\n    this.object['request'] = 'sense'\n    console.log(this.object);\n    this.lexicalService.createNewSense(parentNodeInstanceName).subscribe(\n      data => {\n        if (data['creator'] == this.object.creator) {\n          data['flagAuthor'] = false;\n        } else {\n          data['flagAuthor'] = true;\n        }\n        this.lexicalService.addSubElementRequest({ 'lex': this.object, 'data': data });\n        this.searchIconSpinner = false;\n        this.toastr.success(data['senseInstanceName'] + ' added correctly', '', {\n          timeOut: 5000,\n        });\n        //this.lexicalService.refreshLexEntryTree();\n      }, error => {\n        this.searchIconSpinner = false;\n        //this.lexicalService.refreshLexEntryTree();\n        this.toastr.error(error.error, 'Error', {\n          timeOut: 5000,\n        });\n      }\n    )\n\n  }\n\n  addBibliographyItem(item?) {\n    //@ts-ignore\n    $(\"#biblioModalEtym\").modal(\"show\");\n    $('.modal-backdrop').appendTo('.ui-modal');\n    //@ts-ignore\n    $('#biblioModalEtym').modal({ backdrop: 'static', keyboard: false })\n\n    $('.modal-backdrop').css('height', 'inherit');\n    $('body').removeClass(\"modal-open\")\n    $('body').css(\"padding-right\", \"\");\n\n    let instance = this.object.etymology.etymologyInstanceName;\n    console.log(this.object)\n\n    if (item != undefined) {\n\n      let id = item.data.key != undefined ? item.data.key : '';\n      let title = item.data.title != undefined ? item.data.title : '';\n      let author;\n\n      item.data.creators.forEach(element => {\n        if (element.creatorType == 'author') {\n          author = element.lastName + ' ' + element.firstName;\n          return true;\n        } else {\n          return false;\n        }\n      });\n      author = author != undefined ? author : ''\n      let date = item.data.date != undefined ? item.data.date : '';\n      let url = item.data.url != undefined ? item.data.url : ''\n      let seeAlsoLink = '';\n\n      let parameters = {\n        id: id,\n        title: title,\n        author: author,\n        date: date,\n        url: url,\n        seeAlsoLink: seeAlsoLink\n      }\n      console.log(instance, parameters)\n      this.lexicalService.addBibliographyData(instance, parameters).subscribe(\n        data => {\n          //console.log(data);\n\n          setTimeout(() => {\n            //@ts-ignore\n            $('#biblioModalEtym').modal('hide');\n            $('.modal-backdrop').remove();\n            this.toastr.success('Item added, check bibliography panel', '', {\n              timeOut: 5000,\n            });\n            this.biblioService.triggerPanel(data)\n            setTimeout(() => {\n              this.modal.hide();\n            }, 10);\n          }, 300);\n          this.biblioService.sendDataToBibliographyPanel(data);\n        }, error => {\n          console.log(error)\n          this.toastr.error(error.error, 'Error', {\n            timeOut: 5000,\n          });\n          setTimeout(() => {\n            //@ts-ignore\n            $('#biblioModalEtym').modal('hide');\n            $('.modal-backdrop').remove();\n          }, 300);\n\n        }\n      )\n    }\n\n  }\n\n  onCloseModal() {\n    this.selectedItem = null;\n    this.start = 0;\n    this.sortField = 'title';\n    this.direction = 'asc';\n    this.tableBody.nativeElement.scrollTop = 0;\n    this.memorySort = { field: this.sortField, direction: this.direction }\n    this.biblioService.bootstrapData(this.start, this.sortField, this.direction).subscribe(\n      data => {\n        this.bibliography = data;\n        this.bibliography.forEach(element => {\n          element['selected'] = false;\n        })\n\n\n      }, error => {\n        console.log(error)\n      }\n    );\n  }\n}\n","\n\n<div id=\"cardsAccordion\" class=\"accordion\" [hidden]=\"object == null\"> <!-- [hidden]=\"object == null\" -->\n    <div class=\"card my-2\">\n        <div class=\"card-header\">\n            <h5 class=\"mb-0 w-100 d-flex justify-content-between align-self-center\">\n                <div>\n                    <span class=\"btn\" *ngIf=\"object != null\"> <!-- *ngIf=\"object != null\" -->\n                        CREATED BY {{creator}} ON {{creationDate | date :'dd/MM/yyyy hh:mm:ss'}}\n                    </span>\n                </div>\n                <div>\n                    <div class=\"spinner-border spinner-border-sm m-1\" role=\"status\" *ngIf=\"searchIconSpinner\">\n                        <span class=\"sr-only\">Loading...</span>\n                    </div>\n                    <button class=\"btn btn-link\" (click)=\"deleteEtymology()\">\n                        <i class=\"fa fa-trash\"></i>\n                    </button>\n                </div>\n            </h5>\n        </div>\n        <div #expander [@slideInOut]=\"exp_trig\" class=\"card-body etym-tab-body\">\n            <div id=\"etymologyTabModal\" class=\"modal fade\" role=\"dialog\">\n                <div class=\"modal-dialog\">\n\n                    <!-- Modal content-->\n                    <div class=\"modal-content\">\n                        <div class=\"modal-body\">\n                            <div class=\"d-flex justify-content-center\">\n                                <div class=\"spinner-border\" role=\"status\">\n                                    <span class=\"sr-only\">Loading...</span>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n\n                </div>\n            </div>\n            <app-etymology-form [etymData]=\"etymologyData\"></app-etymology-form>\n\n        </div>\n        <div class=\"card-footer text-muted\">\n            <div class=\"w-100 d-flex justify-content-between align-items-center\">\n                <div > <!-- *ngIf=\"object != null\" -->\n                    <span>LAST UPDATE ON {{lastUpdateDate | date :'dd/MM/yyyy hh:mm:ss'}}</span>\n                </div>\n                <div class=\"btn-group dropup dropleft\">\n                    <button class=\"btn btn-success\" type=\"button\" id=\"dropdownAddLemma\" data-toggle=\"dropdown\"\n                        aria-haspopup=\"true\" aria-expanded=\"false\"> <i class=\"fas fa-plus\"></i> </button>\n                    <div class=\"dropdown-menu dropdown-menu-right\" aria-labelledby=\"dropdownAddLemma\">\n                        <button class=\"dropdown-item\" title=\"add new form\" (click)=\"addNewForm()\">Add Form</button>\n                        <button class=\"dropdown-item\" (click)=\"addNewSense()\">Add Sense</button>\n                        <button class=\"dropdown-item\" (click)=\"addNewEtymology()\">Add Etymology</button>\n                        <button class=\"dropdown-item\" (click)=\"showBiblioModal()\">Add Bibliography</button>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n</div>\n\n\n<app-modal #addBibliography class=\"biblio_modal\" [backdrop]=\"false\" [inViewport]=\"true\" (closeModal)=\"onCloseModal()\">\n\n    <ng-container class=\"app-modal-header\">\n        <img src=\"../../../../../../assets/images/zotero_logo.png\">\n        <span class=\"ml-2 biblio-header-title\">Library: PRIN Italia Antica</span>\n    </ng-container>\n\n    <ng-container class=\"app-modal-body\">\n        <!-- SEARCH BAR -->\n        <div class=\"w-25 pt-1 pb-1\">\n            <div class=\"input-group mb-3\" *ngIf=\"{switch : false}; let variable\">\n                <div class=\"input-group-prepend\">\n                    <button class=\"btn btn-outline-secondary dropdown-toggle\" type=\"button\" data-toggle=\"dropdown\"\n                        aria-haspopup=\"true\" aria-expanded=\"false\"><i class=\"fa fa-search\"></i></button>\n                    <div class=\"dropdown-menu\">\n                        <a [class.disable_click_fire]=\"!variable.switch\" class=\"dropdown-item\" style=\"cursor: pointer;\"\n                            (click)=\"variable.switch = false; searchBibliography(searchBiblio.value, variable.switch);\">Normal</a>\n                        <a [class.disable_click_fire]=\"variable.switch\" class=\"dropdown-item\" style=\"cursor: pointer;\"\n                            (click)=\"variable.switch = true; searchBibliography(searchBiblio.value, variable.switch);\">Full\n                            Text</a>\n                    </div>\n                </div>\n                <input #searchBiblio (keyup)=\"triggerSearch($event, searchBiblio.value, variable.switch)\" type=\"text\"\n                    class=\"form-control\" aria-label=\"Text input with dropdown button\"\n                    [placeholder]=\"variable.switch ?'Title, creator, year + Full Text' : 'Title, creator, year'\"\n                    style=\"font-size: 12px;\">\n            </div>\n\n        </div>\n        <!-- {{'start: '+start + ' sortField: '+ sortField + ' direction: '+ direction + ' queryTitle: '+ queryTitle + ' queryMode: '+ queryMode}} -->\n\n        <!-- SKELETON CONTAINER -->\n        <div class=\"container-fluid\">\n            <div class=\"row\">\n                <div class=\"col-md-8 pl-0\">\n\n\n                    <!-- TABLE -->\n                    <div class=\"table-responsive table-body\">\n                        <div id=\"biblioModalEtym\" class=\"modal fade\" role=\"dialog\">\n                            <div class=\"modal-dialog\">\n\n                                <!-- Modal content-->\n                                <div class=\"modal-content\">\n                                    <div class=\"modal-body\">\n                                        <div class=\"d-flex justify-content-center\">\n                                            <div class=\"spinner-border\" role=\"status\">\n                                                <span class=\"sr-only\">Loading...</span>\n                                            </div>\n                                        </div>\n                                    </div>\n                                </div>\n\n                            </div>\n                        </div>\n                        \n                        <table class=\"table table-striped table-hover\" [hidden]=\"bibliography.length == 0\">\n                            <thead>\n                                <tr>\n                                    <th scope=\"col\" style=\"width: 50%; cursor: pointer;\" (click)=\"sortBibliography($event, 'title')\">\n                                        <span>Title</span>\n                                        <span class=\"float-right\">\n                                            <i class=\"fas fa-sort-up\" *ngIf=\"direction == 'asc' && sortField == 'title'\"></i>\n                                            <i class=\"fas fa-sort-down\" *ngIf=\"direction == 'desc' && sortField == 'title'\"></i>\n                                        </span>\n                                    </th>\n                                    <th scope=\"col\" style=\"width: 30%; cursor: pointer;\" (click)=\"sortBibliography($event, 'creator')\">\n                                        <span>Creator</span>\n                                        <span class=\"float-right\">\n                                            <i class=\"fas fa-sort-up\" *ngIf=\"direction == 'asc' && sortField == 'creator'\"></i>\n                                            <i class=\"fas fa-sort-down\" *ngIf=\"direction == 'desc' && sortField == 'creator'\"></i>\n                                        </span>\n                                    </th>\n                                    <th scope=\"col\" style=\"width: 20%; cursor: pointer;\" (click)=\"sortBibliography($event, 'date')\">\n                                        <span>Date</span>\n                                        <span class=\"float-right\">\n                                            <i class=\"fas fa-sort-up\" *ngIf=\"direction == 'asc' && sortField == 'date'\"></i>\n                                            <i class=\"fas fa-sort-down\" *ngIf=\"direction == 'desc' && sortField == 'date'\"></i>\n                                        </span>\n                                    </th>\n                                </tr>\n                            </thead>\n                            <tbody #table_body infiniteScroll [infiniteScrollDistance]=\"0.4\"\n                                [infiniteScrollThrottle]=\"150\" [scrollWindow]=\"false\" (scrolled)=\"onScrollDown()\">\n\n\n                                <tr *ngFor=\"let item of bibliography\" (click)=\"selectItem($event, item)\"\n                                    [ngClass]=\"item?.selected ? 'selected' : ''\" style=\"cursor: pointer;\">\n                                    <td style=\"width: 50%\">\n                                        <span *ngIf=\"item.data.itemType == 'book'\" class=\"pl-1 pr-1\">\n                                            <i class=\"fas fa-book\"></i>\n                                        </span>\n                                        <span *ngIf=\"item.data.itemType == 'bookSection'\" class=\"pl-1 pr-1\">\n                                            <i class=\"fas fa-book-open\"></i>\n                                        </span>\n                                        <span *ngIf=\"item.data.itemType == 'journalArticle'\" class=\"pl-1 pr-1\">\n                                            <i class=\"far fa-newspaper\"></i>\n                                        </span>\n                                        <span *ngIf=\"item.data.itemType == 'note'\" class=\"pl-1 pr-1\">\n                                            <i class=\"far fa-clipboard\"></i>\n                                        </span>\n                                        <span *ngIf=\"item.data.itemType == 'attachment'\" class=\"pl-1 pr-1\">\n                                            <i class=\"fas fa-paperclip\"></i>\n                                        </span>\n                                        <span *ngIf=\"item.data.itemType == 'conferencePaper'\" class=\"pl-1 pr-1\">\n                                            <i class=\"fas fa-chalkboard-teacher\"></i>\n                                        </span>\n                                        <span\n                                            *ngIf=\"item.data.title != undefined && item.data.title != ''\">{{item.data.title |titlecase}}</span>\n                                        <span *ngIf=\"item.data.title == undefined || item.data.title == ''\"\n                                            class=\"font-italic\">No title</span>\n                                    </td>\n                                    <td style=\"width: 30%\">\n                                        <span *ngIf=\"item.data.creators != undefined\">\n                                            <span *ngFor=\"let author of item.data.creators; let i = index\">\n                                                <span *ngIf=\"author.creatorType == 'author'\">\n                                                    {{author.lastName | titlecase}} {{author.firstName | titlecase}} \n                                                </span>\n                                            </span>\n                                            <span *ngIf=\"!checkIfCreatorExist(item.data.creators)\"\n                                                class=\"font-italic\">No data</span>\n                                        </span>\n                                        <span *ngIf=\"item.data.creators == undefined\" class=\"font-italic\">No data</span>\n                                    </td>\n                                    <td style=\"width: 20%\">\n                                        <span *ngIf=\"item.data.date != undefined && item.data.date != ''\">\n                                            {{item.data.date | titlecase}}\n                                        </span>\n                                        <span *ngIf=\"item.data.date == undefined || item.data.date == ''\"\n                                            class=\"font-italic\">\n                                            No info\n                                        </span>\n                                    </td>\n                                </tr>\n                            </tbody>\n                        </table>\n                        <p class=\"font-italic text-muted no-results\" *ngIf=\"bibliography.length == 0\">No results</p>\n                    </div>\n\n\n                </div>\n                <div class=\"col-md-4\" style=\"font-size: 14px;\">\n                    <div class=\"row\">\n                        <div class=\"col-md-12 item-description\"\n                            style=\"height: calc(100vh - 37rem); overflow: auto; font-size: 13px;\">\n                            <div *ngIf=\"!selectedItem\">\n                                <div class=\"row\">\n                                    <div class=\"col-md-12\">\n                                        <p class=\"text-muted text-center align-middle mb-1 font-italic\">\n                                            No item selected\n                                        </p>\n                                    </div>\n                                </div>\n                            </div>\n                            <div *ngIf=\"selectedItem\">\n                                <div class=\"row\"\n                                    *ngIf=\"selectedItem.data.itemType != '' && selectedItem.data.itemType != undefined\">\n                                    <div class=\"col-md-4 left\" style=\"text-align: right;\">\n                                        <p class=\"text-muted font-weight-bold mb-1\">\n                                            Item type\n                                        </p>\n                                    </div>\n                                    <div class=\"col-md-8 right\" style=\"text-align: left;\">\n                                        <p class=\"font-weight-normal mb-1\">\n                                            {{selectedItem.data.itemType | titlecase}}\n                                        </p>\n                                    </div>\n                                </div>\n                                <div class=\"row\"\n                                    *ngIf=\"selectedItem.data.title != '' && selectedItem.data.title != undefined\">\n                                    <div class=\"col-md-4 left\" style=\"text-align: right;\">\n                                        <p class=\"text-muted font-weight-bold mb-1\">\n                                            Title\n                                        </p>\n                                    </div>\n                                    <div class=\"col-md-8 right\" style=\"text-align: left;\">\n                                        <p class=\"font-weight-normal mb-1\">\n                                            {{selectedItem.data.title | titlecase}}\n                                        </p>\n                                    </div>\n                                </div>\n                                <div class=\"row\"\n                                    *ngIf=\"selectedItem.data.creators != undefined && selectedItem.data.creators.length > 0 && checkIfCreatorExist(selectedItem.data.creators)\">\n                                    <div class=\"col-md-4 left\" style=\"text-align: right;\">\n                                        <p class=\"text-muted font-weight-bold mb-1\">\n                                            Author\n                                        </p>\n                                    </div>\n                                    <div class=\"col-md-8 right\" style=\"text-align: left;\">\n                                        <span *ngFor=\"let author of selectedItem.data.creators\">\n                                            <span *ngIf=\"author.creatorType == 'author'\">\n                                                <p class=\"font-weight-normal mb-1\">\n                                                    {{author.firstName | titlecase}} {{author.lastName | titlecase}}\n                                                </p>\n                                            </span>\n                                        </span>\n                                    </div>\n                                </div>\n                                <div class=\"row\"\n                                    *ngIf=\"selectedItem.data.creators != undefined && selectedItem.data.creators.length > 0\">\n                                    <div class=\"col-md-4 left\" style=\"text-align: right;\">\n                                        <p class=\"text-muted font-weight-bold mb-1\">\n                                            Editor\n                                        </p>\n                                    </div>\n                                    <div class=\"col-md-8 right\" style=\"text-align: left;\">\n                                        <span *ngFor=\"let editor of selectedItem.data.creators\">\n                                            <span *ngIf=\"editor.creatorType == 'editor'\">\n                                                <p class=\"font-weight-normal mb-1\">\n                                                    {{editor.firstName | titlecase}} {{editor.lastName | titlecase}}\n                                                </p>\n                                            </span>\n                                        </span>\n                                    </div>\n                                </div>\n                                <div class=\"row\"\n                                    *ngIf=\"selectedItem.data.publicationTitle != '' && selectedItem.data.publicationTitle != undefined\">\n                                    <div class=\"col-md-4 left\" style=\"text-align: right;\">\n                                        <p class=\"text-muted font-weight-bold mb-1\">\n                                            Publication\n                                        </p>\n                                    </div>\n                                    <div class=\"col-md-8 right\" style=\"text-align: left;\">\n                                        <p class=\"font-weight-normal mb-1\">\n                                            {{selectedItem.data.publicationTitle | titlecase}}\n                                        </p>\n                                    </div>\n                                </div>\n                                <div class=\"row\"\n                                    *ngIf=\"selectedItem.data.publisher != '' && selectedItem.data.publisher != undefined\">\n                                    <div class=\"col-md-4 left\" style=\"text-align: right;\">\n                                        <p class=\"text-muted font-weight-bold mb-1\">\n                                            Publisher\n                                        </p>\n                                    </div>\n                                    <div class=\"col-md-8 right\" style=\"text-align: left;\">\n                                        <p class=\"font-weight-normal mb-1\">\n                                            {{selectedItem.data.publisher | titlecase}}\n                                        </p>\n                                    </div>\n                                </div>\n                                <div class=\"row\"\n                                    *ngIf=\"selectedItem.data.issue != '' && selectedItem.data.issue != undefined\">\n                                    <div class=\"col-md-4 left\" style=\"text-align: right;\">\n                                        <p class=\"text-muted font-weight-bold mb-1\">\n                                            Issue\n                                        </p>\n                                    </div>\n                                    <div class=\"col-md-8 right\" style=\"text-align: left;\">\n                                        <p class=\"font-weight-normal mb-1\">\n                                            {{selectedItem.data.issue | titlecase}}\n                                        </p>\n                                    </div>\n                                </div>\n                                <div class=\"row\"\n                                    *ngIf=\"selectedItem.data.pages != '' && selectedItem.data.pages != undefined\">\n                                    <div class=\"col-md-4 left\" style=\"text-align: right;\">\n                                        <p class=\"text-muted font-weight-bold mb-1\">\n                                            Pages\n                                        </p>\n                                    </div>\n                                    <div class=\"col-md-8 right\" style=\"text-align: left;\">\n                                        <p class=\"font-weight-normal mb-1\">\n                                            {{selectedItem.data.pages | titlecase }}\n                                        </p>\n                                    </div>\n                                </div>\n                                <div class=\"row\"\n                                    *ngIf=\"selectedItem.data.place != '' && selectedItem.data.place != undefined\">\n                                    <div class=\"col-md-4 left\" style=\"text-align: right;\">\n                                        <p class=\"text-muted font-weight-bold mb-1\">\n                                            Place\n                                        </p>\n                                    </div>\n                                    <div class=\"col-md-8 right\" style=\"text-align: left;\">\n                                        <p class=\"font-weight-normal mb-1\">\n                                            {{selectedItem.data.place | titlecase }}\n                                        </p>\n                                    </div>\n                                </div>\n                                <div class=\"row\"\n                                    *ngIf=\"selectedItem.data.date != '' && selectedItem.data.pages != date\">\n                                    <div class=\"col-md-4 left\" style=\"text-align: right;\">\n                                        <p class=\"text-muted font-weight-bold mb-1\">\n                                            Date\n                                        </p>\n                                    </div>\n                                    <div class=\"col-md-8 right\" style=\"text-align: left;\">\n                                        <p class=\"font-weight-normal mb-1\">\n                                            {{selectedItem.data.date | titlecase}}\n                                        </p>\n                                    </div>\n                                </div>\n                                <div class=\"row\"\n                                    *ngIf=\"selectedItem.data.journalAbbreviation != '' && selectedItem.data.journalAbbreviation != undefined\">\n                                    <div class=\"col-md-4 left\" style=\"text-align: right;\">\n                                        <p class=\"text-muted font-weight-bold mb-1\">\n                                            Journal Abbr\n                                        </p>\n                                    </div>\n                                    <div class=\"col-md-8 right\" style=\"text-align: left;\">\n                                        <p class=\"font-weight-normal mb-1\">\n                                            {{selectedItem.data.journalAbbreviation | titlecase}}\n                                        </p>\n                                    </div>\n                                </div>\n                                <div class=\"row\"\n                                    *ngIf=\"selectedItem.data.DOI != '' && selectedItem.data.DOI != undefined\">\n                                    <div class=\"col-md-4 left\" style=\"text-align: right;\">\n                                        <p class=\"text-muted font-weight-bold mb-1\">\n                                            <a class=\"text-muted\" href=\"{{'https://doi.org/'+selectedItem.data.DOI}}\"\n                                                target=\"_blank\">DOI <i class=\"fas fa-external-link-alt\"></i></a>\n                                        </p>\n                                    </div>\n                                    <div class=\"col-md-8 right\" style=\"text-align: left;\">\n                                        <p class=\"font-weight-normal mb-1\">\n                                            {{selectedItem.data.DOI | titlecase}}\n                                        </p>\n                                    </div>\n                                </div>\n                                <div class=\"row\"\n                                    *ngIf=\"selectedItem.data.ISSN != '' && selectedItem.data.ISSN != undefined\">\n                                    <div class=\"col-md-4 left\" style=\"text-align: right;\">\n                                        <p class=\"text-muted font-weight-bold mb-1\">\n                                            ISSN\n                                        </p>\n                                    </div>\n                                    <div class=\"col-md-8 right\" style=\"text-align: left;\">\n                                        <p class=\"font-weight-normal mb-1\">\n                                            {{selectedItem.data.ISSN | titlecase}}\n                                        </p>\n                                    </div>\n                                </div>\n                                <div class=\"row\"\n                                    *ngIf=\"selectedItem.data.url != '' && selectedItem.data.url != undefined\">\n                                    <div class=\"col-md-4 left\" style=\"text-align: right;\">\n                                        <p class=\"text-muted font-weight-bold mb-1\">\n                                            <a class=\"text-muted\" href=\"{{selectedItem.data.url}}\" target=\"_blank\">URL\n                                                <i class=\"fas fa-external-link-alt\"></i></a>\n                                        </p>\n                                    </div>\n                                    <div class=\"col-md-8 right\" style=\"text-align: left;\">\n                                        <p class=\"font-weight-normal mb-1\">\n                                            {{selectedItem.data.url}}\n                                        </p>\n                                    </div>\n                                </div>\n                                <div class=\"row\"\n                                    *ngIf=\"selectedItem.data.accessDate != '' && selectedItem.data.accessDate != undefined\">\n                                    <div class=\"col-md-4 left\" style=\"text-align: right;\">\n                                        <p class=\"text-muted font-weight-bold mb-1\">\n                                            Accessed\n                                        </p>\n                                    </div>\n                                    <div class=\"col-md-8 right\" style=\"text-align: left;\">\n                                        <p class=\"font-weight-normal mb-1\">\n                                            {{selectedItem.data.accessDate}}\n                                        </p>\n                                    </div>\n                                </div>\n                            </div>\n\n                        </div>\n                    </div>\n                    <div class=\"row\">\n                        <div class=\"col-md-12\" style=\"height: calc(40vh - 10rem); overflow: auto; font-size: 13px;\">\n                            <div *ngIf=\"!selectedItem\">\n                                <div class=\"row\">\n                                    <div class=\"col-md-12\">\n                                        <p class=\"text-muted text-center align-middle mb-1 font-italic\">\n                                            No item selected\n                                        </p>\n                                    </div>\n                                </div>\n                            </div>\n                            <div\n                                *ngIf=\"selectedItem && (selectedItem.data.abstractNote == '' || selectedItem.data.abstractNote == undefined)\">\n                                <div class=\"row\">\n                                    <div class=\"col-md-12\">\n                                        <p class=\"text-muted text-center align-middle mb-1 font-italic\">\n                                            No info\n                                        </p>\n                                    </div>\n                                </div>\n                            </div>\n                            <div\n                                *ngIf=\"selectedItem && (selectedItem.data.abstractNote != '' && selectedItem.data.abstractNote != undefined)\">\n                                <p class=\"text-muted font-weight-bold\">\n                                    Abstract\n                                </p>\n                                <p class=\"font-weight-normal\">\n                                    {{selectedItem.data.abstractNote}}\n                                </p>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n            <div class=\"row\">\n                <div class=\"col-md-12 d-flex justify-content-end\">\n                    <button class=\"btn btn-secondary w-25\" [disabled]=\"!selectedItem\" (click)=\"addBibliographyItem(selectedItem)\">Save</button>\n                    <!-- <button class=\"btn btn-secondary\" (click)=\"addBibliography.hide()\">Close</button> -->\n                </div>\n            </div>\n        </div>\n    </ng-container>\n\n    <ng-container class=\"app-modal-footer\">\n    </ng-container>\n</app-modal>","/*\n   Copyright 2021-2022  Istituto di Linguistica Computazionale \"A. Zampolli\", Consiglio Nazionale delle Ricerche, Pisa, Italy.\n \nThis file is part of EpiLexo.\n\nEpiLexo is free software: you can redistribute it and/or modify it under the terms of the GNU General Public License as published by the Free Software Foundation, either version 3 of the License, or (at your option) any later version.\n\nEpiLexo is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for more details.\n\nYou should have received a copy of the GNU General Public License along with EpiLexo. If not, see <https://www.gnu.org/licenses/>.\n*/\n\nimport { Component, OnInit } from '@angular/core';\n\n@Component({\n  selector: 'app-text-detail',\n  templateUrl: './text-detail.component.html',\n  styleUrls: ['./text-detail.component.scss']\n})\nexport class TextDetailComponent implements OnInit {\n\n  constructor() { }\n\n  ngOnInit(): void {\n  }\n\n}\n","\n\n<div id=\"epigraphy-accordion\">\n\n<app-epigraphy-detail></app-epigraphy-detail>\n<app-edit-detail></app-edit-detail>\n\n</div>","import { Injectable } from '@angular/core';\nimport { ActivatedRouteSnapshot, RouterStateSnapshot, UrlTree, Router } from '@angular/router';\nimport { KeycloakAuthGuard, KeycloakService } from 'keycloak-angular';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class AuthGuard extends KeycloakAuthGuard {\n  \n  constructor(\n    protected readonly router: Router,\n    protected readonly keycloak: KeycloakService\n  ) {\n    super(router, keycloak);\n  }\n  \n  async isAccessAllowed(\n    route: ActivatedRouteSnapshot,\n    state: RouterStateSnapshot): Promise<boolean | UrlTree> {\n    \n    if (!this.authenticated) {\n      await this.keycloak.login({\n        redirectUri: window.location.origin + state.url,\n      });\n    }\n\n    const requiredRoles = route.data.roles;\n    if (!(requiredRoles instanceof Array) || requiredRoles.length === 0) {\n      return true;\n    } else {\n      if (!this.roles || this.roles.length === 0) {\n        return false;\n      }\n    }\n    if (!requiredRoles.every((role) => this.roles.includes(role))) {\n      this.router.navigate(['/']);\n    }\n    return requiredRoles.every((role) => this.roles.includes(role));\n  }\n}","/*\n   Copyright 2021-2022  Istituto di Linguistica Computazionale \"A. Zampolli\", Consiglio Nazionale delle Ricerche, Pisa, Italy.\n \nThis file is part of EpiLexo.\n\nEpiLexo is free software: you can redistribute it and/or modify it under the terms of the GNU General Public License as published by the Free Software Foundation, either version 3 of the License, or (at your option) any later version.\n\nEpiLexo is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for more details.\n\nYou should have received a copy of the GNU General Public License along with EpiLexo. If not, see <https://www.gnu.org/licenses/>.\n*/\n\nimport { trigger, state, style, transition, animate } from '@angular/animations';\nimport { Component, ElementRef, OnDestroy, OnInit, Renderer2, ViewChild } from '@angular/core';\nimport * as Recogito from '@recogito/recogito-js';\nimport { Subscription } from 'rxjs';\nimport { DocumentSystemService } from 'src/app/services/document-system/document-system.service';\nimport { ExpanderService } from 'src/app/services/expander/expander.service';\n\n\n@Component({\n  selector: 'app-epigraphy-tab',\n  templateUrl: './epigraphy-tab.component.html',\n  styleUrls: ['./epigraphy-tab.component.scss'],\n  animations: [\n    trigger('slideInOut', [\n      state('in', style({\n        height: 'calc(100vh - 18rem)',\n        \n      })),\n      state('out', style({\n        height: 'calc(50vh - 12rem)',\n      })),\n      transition('in => out', animate('400ms ease-in-out')),\n      transition('out => in', animate('400ms ease-in-out'))\n    ])\n  ]\n})\n\nexport class EpigraphyTabComponent implements OnInit, OnDestroy {\n  exp_trig = '';\n  name: any;\n  revisor:any;\n  object : any;\n  epigraphyData: any;\n\n  subscription: Subscription;\n  @ViewChild('expanderEpigraphy') expander_body: ElementRef;\n\n  constructor(private documentService: DocumentSystemService, private expand : ExpanderService, private rend: Renderer2) { }\n\n  ngOnInit(): void {\n\n    this.subscription = this.documentService.epigraphyData$.subscribe(\n      object => {\n        if(this.object != object){\n          this.epigraphyData = null; \n        }\n\n        console.log(object)\n\n        if(object!=null){\n          this.object = object\n\n          this.epigraphyData = this.object;\n          if(this.object != null){\n            setTimeout(() => {\n              //@ts-ignore\n              $('#epigraphyTabModal').modal('hide');\n              $('.modal-backdrop').remove();\n              var timer = setInterval((val)=>{                 \n                try{\n                    //@ts-ignore\n                    $('#epigraphyTabModal').modal('hide');\n                    if(!$('#epigraphyTabModal').is(':visible')){\n                      clearInterval(timer)\n                    }\n                    \n                }catch(e){\n                    console.log(e)\n                }    \n              }, 10)\n            }, 500);\n            /* this.name = this.object.name; */\n  /*           this.revisor = this.object.revisor;\n   */          \n            \n          }\n        }else{\n          this.epigraphyData = null;\n        }\n        \n      },error => {},\n     \n    );\n    \n    /* console.log('My Content: ' + document.getElementById('pippo'));\n\n    var r = Recogito.init({\n      content: document.getElementById('pippo'), // Element id or DOM node to attach to\n      locale: 'auto',\n      widgets: [\n        //I intend to include this plugin this way.\n        //{ widget: Recogito.CommentsMention, userSuggestions: users },\n        { widget: 'COMMENT' },\n        { widget: 'TAG', vocabulary: ['Place', 'Person', 'Event', 'Organization', 'Animal'] }\n      ],\n      //relationVocabulary: ['isRelated', 'isPartOf', 'isSameAs ']\n    });\n\n    // Add an event handler  \n    r.on('createAnnotation', function (annotation) {\n      console.log('Annotation Added: ' + JSON.stringify(annotation))\n    });\n\n    r.on('selectAnnotation', function(a) {\n      console.log('selected', a);\n    });\n\n    r.on('updateAnnotation', function(annotation, previous) {\n      console.log('updated', previous, 'with', annotation);\n    });\n\n    // Switch annotation mode (annotation/relationships)\n    var annotationMode = 'ANNOTATION'; // or 'RELATIONS'\n\n    var toggleModeBtn = document.getElementById('toggle-mode');\n    toggleModeBtn.addEventListener('click', function() {\n      if (annotationMode === 'ANNOTATION') {\n        toggleModeBtn.innerHTML = 'MODE: RELATIONS';\n        annotationMode = 'RELATIONS';\n      } else  {\n        toggleModeBtn.innerHTML = 'MODE: ANNOTATION';\n        annotationMode = 'ANNOTATION';\n      }\n\n      r.setMode(annotationMode);\n    }); */\n\n    this.expand.expEpigraphy$.subscribe(\n      trigger => {\n        setTimeout(() => {\n         // console.log(\"trigger epigraphy-tab: \", trigger)\n          if(trigger){\n            let isEditExpanded = this.expand.isEditTabExpanded();\n            let isEpigraphyExpanded = this.expand.isEpigraphyTabExpanded();\n         //   console.log(isEditExpanded, isEpigraphyExpanded)\n            \n            if(!isEditExpanded){\n              \n              this.rend.setStyle(this.expander_body.nativeElement, 'height', 'calc(100vh - 18rem)')\n              this.exp_trig = 'in';\n              this.rend.setStyle(this.expander_body.nativeElement, 'max-height', 'calc(100vh - 18rem)');\n            }else{\n              \n              this.rend.setStyle(this.expander_body.nativeElement, 'height', 'calc(50vh - 12rem)');\n              this.exp_trig = 'in';\n              this.rend.setStyle(this.expander_body.nativeElement, 'max-height', 'calc(50vh - 12rem)');\n              \n            }\n            \n            \n          }else if(trigger==null){\n            return;\n          }else{\n            this.rend.setStyle(this.expander_body.nativeElement, 'height', 'calc(50vh - 12rem)');\n            this.rend.setStyle(this.expander_body.nativeElement, 'max-height', 'calc(50vh - 12rem)');\n            this.exp_trig = 'out';\n          }\n        }, 100);\n        \n      }\n    );\n\n    this.expand.expEdit$.subscribe(\n      trigger => {\n        setTimeout(() => {\n          if(trigger){\n            this.exp_trig = 'in';\n            this.rend.setStyle(this.expander_body.nativeElement, 'height', 'calc(50vh - 12rem)')\n            this.rend.setStyle(this.expander_body.nativeElement, 'max-height', 'calc(50vh - 12rem)')\n          }else if(trigger==null){\n            return;\n          }else{\n            this.rend.setStyle(this.expander_body.nativeElement, 'max-height', 'calc(50vh - 12rem)');\n            this.exp_trig = 'out';\n          }\n        }, 100);\n        \n      }\n    );\n  }\n\n  ngOnDestroy(): void {\n    this.subscription.unsubscribe();\n  }\n\n}\n","\n\n\n\n<div id=\"cardsAccordion\" class=\"accordion\" [hidden]=\"object == null\">\n    <div class=\"card my-2\">\n        <div class=\"card-header\">\n            <h5 class=\"mb-0 w-100 d-flex justify-content-between align-self-center\">\n                <div>\n                    <span class=\"btn\" *ngIf=\"object != null\">\n                        <!-- <span *ngIf=\"isLexicalEntry\">\n                            Lexical Entry\n                        </span>\n                        <span *ngIf=\"isSense\">\n                            Sense\n                        </span>\n                        <span *ngIf=\"isForm\">\n                            Form\n                        </span> -->\n                        <!-- CREATED BY {{creator}} ON {{creationDate | date :'dd/MM/yyyy hh:mm:ss'}} -->\n\t\t\t\t\t\t{{name}}\n                    </span>\n                </div>\n                <div>\n                   <!--  <div class=\"spinner-border spinner-border-sm m-1\" role=\"status\" *ngIf=\"searchIconSpinner\">\n                        <span class=\"sr-only\">Loading...</span>\n                    </div> -->\n                    <!-- <button class=\"btn btn-link\" *ngIf=\"isLexicalEntry\" (click)=\"removeElementModal.show()\">\n                        <i class=\"fa fa-trash\"></i>\n                    </button>\n                    <button class=\"btn btn-link\" *ngIf=\"isForm\" title=\"delete form\" (click)=\"removeElementModal.show()\">\n                        <i class=\"fa fa-trash\"></i>\n                    </button>\n                    <button class=\"btn btn-link\" *ngIf=\"isSense\" title=\"delete sense\"\n                        (click)=\"removeElementModal.show()\">\n                        <i class=\"fa fa-trash\"></i>\n                    </button> -->\n                    <!-- <button class=\"btn btn-link\" (click)=\"changeStatus()\" *ngIf=\"isLexicalEntry\">\n                        <i class=\"fa fa-circle\" [hidden]=\"lock!=0\" style=\"color: red\"></i>\n                        <i class=\"fa fa-circle\" [hidden]=\"lock!=1\" style=\"color: yellow\"></i>\n                        <i class=\"fa fa-circle locked-tooltip\" [hidden]=\"lock!=2\" data-toggle=\"tooltip\"\n                            data-placement=\"bottom\" data-html=\"true\" title=\"Locked tooltip\" style=\"color:green;\"></i>\n                    </button> -->\n                </div>\n            </h5>\n        </div>\n        <div #expanderEpigraphy [@slideInOut]=\"exp_trig\" class=\"card-body epigraphy-tab-body\">\n            \n            <div id=\"epigraphyTabModal\" class=\"modal fade\" role=\"dialog\">\n                <div class=\"modal-dialog\">\n\n                    <!-- Modal content-->\n                    <div class=\"modal-content\">\n                        <div class=\"modal-body\">\n                            <div class=\"d-flex justify-content-center\">\n                                <div class=\"spinner-border\" role=\"status\">\n                                    <span class=\"sr-only\">Loading...</span>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n\n                </div>\n            </div>\n\t\t\t<app-epigraphy-form [epiData]=\"epigraphyData\"></app-epigraphy-form>\n            <!-- <app-lexical-entry-core-form [lexData]=\"lexicalEntryData\" *ngIf=\"isLexicalEntry\">\n            </app-lexical-entry-core-form>\n            <app-form-core-form [formData]=\"formData\" *ngIf=\"isForm\"></app-form-core-form>\n            <app-sense-core-form [senseData]=\"senseData\" *ngIf=\"isSense\"></app-sense-core-form>\n            <app-lexical-concept-form [lexicalConceptData]=\"lexicalConceptData\" *ngIf=\"isLexicalConcept\">\n            </app-lexical-concept-form> -->\n        </div>\n        <div class=\"card-footer text-muted\">\n            <div class=\"w-100 d-flex justify-content-between align-items-center\">\n                <!-- <div *ngIf=\"object != null\">\n                    <span>LAST UPDATE ON {{lastUpdateDate | date :'dd/MM/yyyy hh:mm:ss'}}</span>\n                </div> -->\n                <!-- <div class=\"btn-group dropup dropleft\">\n                    <button class=\"btn btn-success\" type=\"button\" id=\"dropdownAddLemma\" data-toggle=\"dropdown\"\n                        aria-haspopup=\"true\" aria-expanded=\"false\"> <i class=\"fas fa-plus\"></i> </button>\n                    <div class=\"dropdown-menu dropdown-menu-right\" aria-labelledby=\"dropdownAddLemma\">\n                        <button class=\"dropdown-item\" title=\"add new form\" (click)=\"addNewForm()\">Add Form</button>\n                        <button class=\"dropdown-item\" (click)=\"addNewSense()\">Add Sense</button>\n                        <button class=\"dropdown-item\" (click)=\"addNewEtymology()\">Add Etymology</button>\n                        <button class=\"dropdown-item\" (click)=\"showBiblioModal()\">Add Bibliography</button>\n                    </div>\n                </div> -->\n            </div>\n        </div>\n    </div>\n</div>","/*\n   Copyright 2021-2022  Istituto di Linguistica Computazionale \"A. Zampolli\", Consiglio Nazionale delle Ricerche, Pisa, Italy.\n \nThis file is part of EpiLexo.\n\nEpiLexo is free software: you can redistribute it and/or modify it under the terms of the GNU General Public License as published by the Free Software Foundation, either version 3 of the License, or (at your option) any later version.\n\nEpiLexo is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for more details.\n\nYou should have received a copy of the GNU General Public License along with EpiLexo. If not, see <https://www.gnu.org/licenses/>.\n*/\n\nimport { Component, OnInit } from '@angular/core';\n\n@Component({\n  selector: 'app-page-not-found',\n  templateUrl: './page-not-found.component.html',\n  styleUrls: ['./page-not-found.component.scss']\n})\nexport class PageNotFoundComponent implements OnInit {\n\n  constructor() { }\n\n  ngOnInit(): void {\n  }\n\n}\n","\n\n<p>page-not-found works!</p>\n","/*\n   Copyright 2021-2022  Istituto di Linguistica Computazionale \"A. Zampolli\", Consiglio Nazionale delle Ricerche, Pisa, Italy.\n \nThis file is part of EpiLexo.\n\nEpiLexo is free software: you can redistribute it and/or modify it under the terms of the GNU General Public License as published by the Free Software Foundation, either version 3 of the License, or (at your option) any later version.\n\nEpiLexo is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for more details.\n\nYou should have received a copy of the GNU General Public License along with EpiLexo. If not, see <https://www.gnu.org/licenses/>.\n*/\n\nimport { Component, EventEmitter, Input, OnInit, Output, SimpleChanges } from '@angular/core';\nimport { FormArray, FormBuilder, FormGroup } from '@angular/forms';\nimport { Subject, Subscription } from 'rxjs';\nimport { debounceTime } from 'rxjs/operators';\nimport { LexicalEntriesService } from 'src/app/services/lexical-entries/lexical-entries.service';\nimport { DataService, Person } from '../../lexicon-panel/text-detail/edit-detail/core-tab/lexical-entry-core-form/data.service';\nimport { ToastrService } from 'ngx-toastr';\n\n@Component({\n  selector: 'app-see-also',\n  templateUrl: './see-also.component.html',\n  styleUrls: ['./see-also.component.scss']\n})\nexport class SeeAlsoComponent implements OnInit {\n\n  @Input() seeAlsoData: any[] | any;\n  @Output() countRefresh = new EventEmitter<any>();\n\n  private subject: Subject<any> = new Subject();\n  private subject_input: Subject<any> = new Subject();\n\n  subscription: Subscription;\n  object: any;\n  people: Person[] = [];\n  peopleLoading = false;\n\n  isSense;\n  isForm;\n  isLexEntry;\n\n  searchResults: [];\n  memorySeeAlso = [];\n  filterLoading = false;\n\n  seeAlsoForm = new FormGroup({\n    seeAlsoArray: new FormArray([this.createSeeAlsoEntry()])\n  })\n\n  seeAlsoArray: FormArray;\n\n  constructor(private formBuilder: FormBuilder, private lexicalService: LexicalEntriesService, private toastr: ToastrService) {\n  }\n\n  ngOnInit() {\n    this.seeAlsoForm = this.formBuilder.group({\n      seeAlsoArray: this.formBuilder.array([])\n    })\n\n    this.onChanges();\n    /* //console.log(this.seeAlsoForm) */\n    this.subject.pipe(debounceTime(1000)).subscribe(\n      data => {\n        console.log(data)\n        this.onSearchFilter(data)\n      }\n    )\n\n    this.subject_input.pipe(debounceTime(1000)).subscribe(\n      data => {\n        this.onChangeSeeAlsoByInput(data['value'], data['i'])\n      }\n    )\n    this.triggerTooltip();\n  }\n\n\n  triggerTooltip() {\n    setTimeout(() => {\n      //@ts-ignore\n      $('.see-also-tooltip').tooltip({\n        trigger: 'hover'\n      });\n    }, 500);\n  }\n\n  ngOnChanges(changes: SimpleChanges) {\n    setTimeout(() => {\n      if (changes.seeAlsoData.currentValue != null) {\n        this.object = changes.seeAlsoData.currentValue;\n        this.seeAlsoArray = this.seeAlsoForm.get('seeAlsoArray') as FormArray;\n        this.seeAlsoArray.clear();\n        this.memorySeeAlso = [];\n\n        //console.log(this.object)\n\n        this.object.array.forEach(element => {\n          if(element.label != ''){\n            this.addSeeAlsoEntry(element.label, element.inferred, element.lexicalEntityInstanceName, element.linkType)\n            this.memorySeeAlso.push(element.lexicalEntityInstanceName)\n          }else{\n            this.addSeeAlsoEntry(element.lexicalEntity, element.inferred, element.lexicalEntityInstanceName, element.linkType)\n            this.memorySeeAlso.push(element.lexicalEntity)\n          }\n          \n          \n        });\n\n        if (this.object.lexicalEntryInstanceName != undefined) {\n          this.isLexEntry = true;\n          this.isForm = false;\n          this.isSense = false;\n        } else if (this.object.formInstanceName != undefined) {\n          this.isLexEntry = false;\n          this.isForm = true;\n          this.isSense = false;\n        } else if (this.object.senseInstanceName != undefined) {\n          this.isLexEntry = false;\n          this.isForm = false;\n          this.isSense = true;\n        }\n\n      } else {\n        this.object = null;\n      }\n    }, 10);\n\n  }\n\n  onChangeSeeAlsoByInput(value, index) {\n\n    if(value.trim() != \"\"){\n      var selectedValues = value;\n      var lexicalElementId = '';\n      if (this.object.lexicalEntryInstanceName != undefined) {\n        lexicalElementId = this.object.lexicalEntryInstanceName;\n      } else if (this.object.formInstanceName != undefined) {\n        lexicalElementId = this.object.formInstanceName;\n      } else if (this.object.senseInstanceName != undefined) {\n        lexicalElementId = this.object.senseInstanceName;\n      }else if (this.object.etymology.etymologyInstanceName != undefined) {\n        lexicalElementId = this.object.etymology.etymologyInstanceName;\n      }\n\n      console.log(this.object)\n  \n      if (this.memorySeeAlso[index] == \"\" || this.memorySeeAlso[index] == undefined) {\n        let parameters = {\n          type: \"reference\",\n          relation: \"seeAlso\",\n          value: selectedValues\n        }\n        //console.log(parameters)\n        this.lexicalService.updateGenericRelation(lexicalElementId, parameters).subscribe(\n          data => {\n            //console.log(data)\n          }, error => {\n           console.log(error)\n           if(typeof error.error != 'object')\n            this.toastr.error(error.error, 'Error', {\n              timeOut: 5000,\n            });\n            if(error.statusText == 'OK'){\n              this.memorySeeAlso.push(selectedValues)\n              this.toastr.success('SeeAlso updated', '', {\n                timeOut: 5000,\n              });\n            }\n          }\n        )\n      } else {\n        let oldValue = this.memorySeeAlso[index];\n        let parameters = {\n          type: \"reference\",\n          relation: \"seeAlso\",\n          value: selectedValues,\n          currentValue: oldValue\n        }\n        console.log(parameters)\n        this.lexicalService.updateGenericRelation(lexicalElementId, parameters).subscribe(\n          data => {\n            //console.log(data)\n          }, error => {\n            console.log(error)\n            \n            if(error.status == 200){\n              this.memorySeeAlso.push(selectedValues)\n              this.toastr.success('SeeAlso updated', '', {\n                timeOut: 5000,\n              });\n            }else{\n              this.toastr.error(error.error, 'Error', {\n                timeOut: 5000,\n              });\n            }\n          }\n        )\n      }\n    }\n    \n\n  }\n\n  onChangeSeeAlso(seeAlso, index) {\n    //console.log(seeAlso.selectedItems)\n    if (seeAlso.selectedItems.length != 0) {\n      var selectedValues = seeAlso.selectedItems[0].value.lexicalEntryInstanceName;\n      var lexicalElementId = '';\n      if (this.object.lexicalEntryInstanceName != undefined) {\n        lexicalElementId = this.object.lexicalEntryInstanceName;\n      } else if (this.object.formInstanceName != undefined) {\n        lexicalElementId = this.object.formInstanceName;\n      } else if (this.object.senseInstanceName != undefined) {\n        lexicalElementId = this.object.senseInstanceName;\n      }else if (this.object.etymologyInstanceName != undefined) {\n        lexicalElementId = this.object.etymologyInstanceName;\n      }\n\n      if (this.memorySeeAlso[index] == undefined) {\n        let parameters = {\n          type: \"reference\",\n          relation: \"seeAlso\",\n          value: selectedValues\n        }\n        console.log(parameters)\n        this.lexicalService.updateGenericRelation(lexicalElementId, parameters).subscribe(\n          data => {\n            console.log(data)\n            this.toastr.success('SeeAlso updated', '', {\n              timeOut: 5000,\n            });\n          }, error => {\n           console.log(error);\n           if(error.status == 200){\n              this.memorySeeAlso[index] = selectedValues\n              this.toastr.success('SeeAlso updated', '', {\n                timeOut: 5000,\n              });\n            }else{\n              this.toastr.error(error.error, 'Error', {\n                timeOut: 5000,\n              });\n            }\n          }\n        )\n      } else {\n        let oldValue = this.memorySeeAlso[index];\n        let parameters = {\n          type: \"reference\",\n          relation: \"seeAlso\",\n          value: selectedValues,\n          currentValue: oldValue\n        }\n        console.log(parameters)\n        this.lexicalService.updateGenericRelation(lexicalElementId, parameters).subscribe(\n          data => {\n            console.log(data)\n            this.toastr.success('SeeAlso updated', '', {\n              timeOut: 5000,\n            });\n          }, error => {\n            console.log(error)\n            if(error.statusText == 'OK'){\n              this.memorySeeAlso[index] = selectedValues\n              this.toastr.success('SeeAlso updated', '', {\n                timeOut: 5000,\n              });\n            }\n          }\n        )\n      }\n\n    }\n\n\n  }\n\n  deleteData() {\n    this.searchResults = [];\n  }\n\n\n\n  onSearchFilter(data) {\n    this.filterLoading = true;\n    this.searchResults = [];\n    console.log(this.object)\n    if (this.object.lexicalEntryInstanceName != undefined) {\n      let parameters = {\n        text: data,\n        searchMode: \"startsWith\",\n        type: \"\",\n        pos: \"\",\n        formType: \"entry\",\n        author: \"\",\n        lang: \"\",\n        status: \"\",\n        offset: 0,\n        limit: 500\n      }\n      //console.log(data.length)\n      \n      this.lexicalService.getLexicalEntriesList(parameters).subscribe(\n        data => {\n          console.log(data)\n          this.searchResults = data['list']\n          this.filterLoading = false;\n        }, error => {\n          //console.log(error)\n          this.filterLoading = false;\n        }\n      )\n      \n    } else if (this.object.formInstanceName != undefined) {\n      let lexId = this.object.parentInstanceName;\n      let parameters = {\n        text: data,\n        formType: \"lemma\",\n        lexicalEntry: lexId,\n        senseUris: \"\",\n        extendTo: \"\",\n        extensionDegree: 3\n      }\n      \n      this.lexicalService.getFormList(parameters).subscribe(\n        data => {\n          //console.log(data)\n          this.searchResults = data['list']\n          this.filterLoading = false;\n        }, error => {\n          //console.log(error)\n          this.filterLoading = false;\n        }\n      )\n    } else if (this.object.senseInstanceName != undefined) {\n\n      let parameters = {\n        text: data,\n        searchMode: \"startsWith\",\n        type: \"\",\n        pos: \"\",\n        formType: \"entry\",\n        author: \"\",\n        lang: \"\",\n        status: \"\",\n        offset: 0,\n        limit: 500\n      }\n\n      this.lexicalService.getLexicalSensesList(parameters).subscribe(\n        data => {\n          //console.log(data)\n          this.searchResults = data\n          this.filterLoading = false;\n        }, error => {\n          //console.log(error)\n          this.filterLoading = false;\n        }\n      )\n    } else if (this.object.etymologyInstanceName != undefined) {\n\n      let parameters = {\n        text: data,\n        searchMode: \"startsWith\",\n        type: \"\",\n        pos: \"\",\n        formType: \"entry\",\n        author: \"\",\n        lang: \"\",\n        status: \"\",\n        offset: 0,\n        limit: 500\n      }\n\n      this.lexicalService.getLexicalEntriesList(parameters).subscribe(\n        data => {\n          console.log(data)\n          this.searchResults = data['list']\n          this.filterLoading = false;\n        }, error => {\n          //console.log(error)\n          this.filterLoading = false;\n        }\n      )\n    } else {\n      this.filterLoading = false;\n    }\n    //console.log(data)\n\n  }\n\n  triggerSeeAlsoInput(evt, i) {\n    if (evt.target != undefined) {\n      let value = evt.target.value;\n      this.subject_input.next({ value, i })\n    }\n  }\n\n  triggerSeeAlso(evt) {\n    if (evt.target != undefined) {\n      this.subject.next(evt.target.value)\n    }\n\n  }\n  onChanges(): void {\n    this.seeAlsoForm.valueChanges.pipe(debounceTime(200)).subscribe(searchParams => {\n      //console.log(searchParams)\n    })\n  }\n\n  createSeeAlsoEntry(e?, i?, le?, lt?) {\n    if (e == undefined) {\n      return this.formBuilder.group({\n        entity: null,\n        inferred: false,\n        lexical_entity: null,\n        link_type : 'internal'\n      })\n    } else {\n      return this.formBuilder.group({\n        entity: e,\n        inferred: i,\n        lexical_entity: le,\n        link_type : lt\n      })\n    }\n\n  }\n\n  addSeeAlsoEntry(e?, i?, le?, lt?) {\n    this.seeAlsoArray = this.seeAlsoForm.get('seeAlsoArray') as FormArray;\n\n    if (e == undefined) {\n      this.seeAlsoArray.push(this.createSeeAlsoEntry());\n    } else {\n      this.seeAlsoArray.push(this.createSeeAlsoEntry(e, i, le, lt));\n    }\n\n    this.countRefresh.emit(this.seeAlsoArray.length);\n    this.triggerTooltip();\n  }\n\n  removeElement(index) {\n    this.seeAlsoArray = this.seeAlsoForm.get('seeAlsoArray') as FormArray;\n\n    let lexical_entity = this.seeAlsoArray.at(index).get('lexical_entity').value;\n    //console.log('Lexical Entity: '+lexical_entity)\n    if(lexical_entity == '' || lexical_entity == null){\n      lexical_entity = this.seeAlsoArray.at(index).get('entity').value;\n      //console.log('Entity: '+lexical_entity)\n    }\n\n    if (this.object.lexicalEntryInstanceName != undefined) {\n\n      let lexId = this.object.lexicalEntryInstanceName;\n\n      let parameters = {\n        relation: 'seeAlso',\n        value: lexical_entity\n      }\n\n      //console.log(parameters)\n      //console.log(index)\n      this.lexicalService.deleteLinguisticRelation(lexId, parameters).subscribe(\n        data => {\n          //console.log(data)\n          this.lexicalService.updateLexCard(this.object)\n          this.toastr.success('SeeAlso deleted', '', {\n            timeOut: 5000,\n          });\n        }, error => {\n          console.log(error)\n          this.toastr.error(error.error, 'Error', {\n            timeOut: 5000,\n          });\n        }\n      )\n    } else if (this.object.formInstanceName != undefined) {\n      let formId = this.object.formInstanceName;\n\n      let parameters = {\n        relation: 'seeAlso',\n        value: lexical_entity\n      }\n\n      //console.log(parameters)\n\n      this.lexicalService.deleteLinguisticRelation(formId, parameters).subscribe(\n        data => {\n          //console.log(data)\n          this.lexicalService.updateLexCard(this.object)\n          this.toastr.success('SeeAlso updated', '', {\n            timeOut: 5000,\n          });\n        }, error => {\n          //console.log(error)\n          this.toastr.error(error.error, 'Error', {\n            timeOut: 5000,\n          });\n        }\n      )\n\n    } else if (this.object.senseInstanceName != undefined) {\n      let senseId = this.object.senseInstanceName;\n\n      let parameters = {\n        type: 'morphology',\n        relation: 'seeAlso',\n        value: lexical_entity\n      }\n\n      //console.log(parameters)\n\n      this.lexicalService.deleteLinguisticRelation(senseId, parameters).subscribe(\n        data => {\n          //console.log(data)\n          this.lexicalService.updateLexCard(this.object)\n          this.toastr.success('SeeAlso updated', '', {\n            timeOut: 5000,\n          });\n        }, error => {\n          console.log(error)\n        }\n      )\n    } else if (this.object.etymologyInstanceName != undefined) {\n      let etymId = this.object.etymologyInstanceName;\n\n      let parameters = {\n        type: 'morphology',\n        relation: 'seeAlso',\n        value: lexical_entity\n      }\n\n      //console.log(parameters)\n\n      this.lexicalService.deleteLinguisticRelation(etymId, parameters).subscribe(\n        data => {\n          //console.log(data)\n          this.lexicalService.updateLexCard(this.object)\n          this.toastr.success('SeeAlso updated', '', {\n            timeOut: 5000,\n          });\n        }, error => {\n          console.log(error)\n        }\n      )\n    }\n    this.memorySeeAlso.splice(index, 1)\n    this.seeAlsoArray.removeAt(index);\n\n    this.countRefresh.emit(this.seeAlsoArray.length);\n  }\n\n}\n","\n\n<form [formGroup]=\"seeAlsoForm\">\n    <div class=\"form-group row mt-3\">\n        <div class=\"input-group col-sm-12\">\n            <div class=\"card\">\n                <span class=\"text-id\">SEE ALSO</span>\n                <a (click)=\"addSeeAlsoEntry()\" class=\"pointer\"><span class=\"collapse-icon\"><i\n                            class=\"fa fa-plus-square\"></i></span></a>\n                <div class=\"card-body\">\n\n                    <div formArrayName=\"seeAlsoArray\" class=\"mt-3\">\n\n                        <div *ngFor=\"let seeAlso of seeAlsoForm.get('seeAlsoArray')['controls']; let i = index\">\n                            <div [formGroupName]=\"i\">\n                                <div class=\"d-flex\">\n                                    <div class=\"form-group row ml-2  mr-2 w-100\" *ngIf=\"{switch : seeAlso.get('link_type').value != 'internal'}; let variable\">\n                                        <div class=\"input-group\" *ngIf=\"{boolean : seeAlso.get('inferred').value}; let inf\">\n                                            \n                                            <ng-select #seeAlso formControlName=\"entity\" name=\"entity\"\n                                                (change)=\"onChangeSeeAlso(seeAlso, i)\" (focus)=\"deleteData()\"\n                                                (keyup)=\"triggerSeeAlso($event)\" formControlName=\"entity\" name=\"entity\"\n                                                bindValue=\"label\" class=\"resizeNgSelect\" [items]=\"searchResults\"\n                                                bindLabel=\"label\" placeholder=\"Search entity\" appendTo=\"body\"\n                                                *ngIf=\"!variable.switch && !isSense\" [readonly]=\"inf.boolean\">\n                                            </ng-select>\n                                            <ng-select #seeAlso formControlName=\"entity\" name=\"entity\"\n                                                (change)=\"onChangeSeeAlso(seeAlso, i)\" (focus)=\"deleteData()\"\n                                                (keyup)=\"triggerSeeAlso($event)\" formControlName=\"entity\" name=\"entity\"\n                                                bindValue=\"definition\" class=\"resizeNgSelect\" [items]=\"searchResults\"\n                                                bindLabel=\"definition\" placeholder=\"Search entity\" appendTo=\"body\"\n                                                *ngIf=\"!variable.switch && isSense\" [readonly]=\"inf.boolean\">\n                                            </ng-select>\n                                            <input formControlName=\"entity\" name=\"entity\" type=\"text\"\n                                                class=\"form-control \" (keyup)=\"triggerSeeAlsoInput($event, i)\"\n                                                placeholder=\"Insert URI\" *ngIf=\"variable.switch\">\n\n                                            <div class=\"input-group-append\" *ngIf=\"!inf.boolean\">\n                                                <div class=\"input-group-append ml-2 form-check\">\n                                                    <input class=\"form-check-input see-also-tooltip\" type=\"checkbox\"\n                                                        (change)=\"variable.switch=!variable.switch; variable.switch ? seeAlso.get('link_type').value = 'external' : seeAlso.get('link_type').value = 'internal'\"\n                                                        data-toggle=\"tooltip\" data-placement=\"bottom\"\n                                                        data-trigger=\"hover\"\n                                                        title=\"Clicca per inserire un URI manualmente\"\n                                                        [checked]=\"variable.switch\">\n                                                    <label class=\"form-check-label\" for=\"extCheck\"></label>\n                                                </div>\n                                                <!-- <div class=\"input-group-append ml-2\">\n                                                    <button class=\"btn btn-primary\" type=\"button\"\n                                                        (click)=\"modalRoot2.show()\"><i\n                                                            class=\"fa fa-external-link-alt\"></i></button>\n                                                    <app-modal #modalRoot2 class=\"modal-demo\" [maximizable]=\"true\"\n                                                        [backdrop]=\"false\">\n                                                        <ng-container class=\"app-modal-header\">Demo modal</ng-container>\n                                                        <ng-container class=\"app-modal-body\">\n                                                            <h3>MODAL DIALOG</h3>\n                                                            <p>Lorem Ipsum is simply dummy text of the printing and\n                                                                typesetting\n                                                                industry.\n                                                                Lorem Ipsum has been the industrys standard dummy text\n                                                                ever\n                                                                since the 1500s.</p>\n                                                        </ng-container>\n                                                        <ng-container class=\"app-modal-footer\">\n                                                            <button type=\"button\" class=\"button button3\"\n                                                                (click)=\"modalRoot2.hide()\">Delete</button>\n                                                            <button type=\"button\" class=\"button button1\"\n                                                                (click)=\"modalRoot2.hide()\">Save</button>\n                                                            <button type=\"button\" class=\"button button2\"\n                                                                style=\"float: right;\" (click)=\"modalRoot2.hide()\">Close\n                                                            </button>\n                                                        </ng-container>\n                                                    </app-modal>\n                                                </div> -->\n                                               <!--  <div class=\"input-group-append ml-2\">\n                                                    <button type=\"button\" class=\"btn btn-secondary\" placement=\"top\" ngbTooltip=\"Enable LiLa endpoint\" title=\"Enable LiLa endpoint\" data-toggle=\"button\" aria-pressed=\"false\" autocomplete=\"off\" style=\"border-radius: .5rem;\">\n                                                        <img src=\"../../../../assets/images/graphql.png\" alt=\"Avatar\" class=\"image\" style=\"height: 20px;\">\n                    \n                                                      </button>\n                                                </div> -->\n                                                <div class=\"input-group-append ml-2\">\n                                                    <button (click)=\"removeElement(i)\" class=\"btn btn-danger\"\n                                                        type=\"button\"><i class=\"fa fa-trash-alt\"></i></button>\n                                                </div>\n                                            </div>\n                                        </div>\n                                    </div>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n</form>","/*\n   Copyright 2021-2022  Istituto di Linguistica Computazionale \"A. Zampolli\", Consiglio Nazionale delle Ricerche, Pisa, Italy.\n \nThis file is part of EpiLexo.\n\nEpiLexo is free software: you can redistribute it and/or modify it under the terms of the GNU General Public License as published by the Free Software Foundation, either version 3 of the License, or (at your option) any later version.\n\nEpiLexo is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for more details.\n\nYou should have received a copy of the GNU General Public License along with EpiLexo. If not, see <https://www.gnu.org/licenses/>.\n*/\n\nimport { Component, OnInit } from '@angular/core';\n\n@Component({\n  selector: 'app-profile-page',\n  templateUrl: './profile-page.component.html',\n  styleUrls: ['./profile-page.component.scss']\n})\nexport class ProfilePageComponent implements OnInit {\n\n  constructor() { }\n\n  ngOnInit(): void {\n  }\n\n}\n","\n\n<div class=\"container-fluid profile-page\">\n    <div class=\"row h-100\">\n        <div class=\"col-md-12\">\n            <app-profiles-table></app-profiles-table>\n        </div>\n    </div>\n</div>\n","/*\n   Copyright 2021-2022  Istituto di Linguistica Computazionale \"A. Zampolli\", Consiglio Nazionale delle Ricerche, Pisa, Italy.\n \nThis file is part of EpiLexo.\n\nEpiLexo is free software: you can redistribute it and/or modify it under the terms of the GNU General Public License as published by the Free Software Foundation, either version 3 of the License, or (at your option) any later version.\n\nEpiLexo is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for more details.\n\nYou should have received a copy of the GNU General Public License along with EpiLexo. If not, see <https://www.gnu.org/licenses/>.\n*/\n\nimport { Component, Input, OnInit, SimpleChanges } from '@angular/core';\nimport { Subscription } from 'rxjs';\nimport { LexicalEntriesService } from 'src/app/services/lexical-entries/lexical-entries.service';\nimport { DataService, Person } from '../../core-tab/lexical-entry-core-form/data.service';\n\nimport { FormBuilder, FormGroup, FormArray, FormControl } from '@angular/forms';\nimport { debounceTime } from 'rxjs/operators';\n@Component({\n  selector: 'app-lexical-concept-form',\n  templateUrl: './lexical-concept-form.component.html',\n  styleUrls: ['./lexical-concept-form.component.scss']\n})\nexport class LexicalConceptFormComponent implements OnInit {\n\n  switchInput = false;\n  subscription: Subscription;\n  object: any;\n  people: Person[] = [];\n  peopleLoading = false;\n  counter = 0;\n  componentRef: any;\n\n  @Input() lexicalConceptData : any;\n\n  lexicalConceptForm = new FormGroup({\n    label: new FormControl(''),\n    definition : new FormControl(''),\n    hierachicalRelation: new FormArray([this.createHierachicalRelation()]),\n    scheme: new FormArray([this.createScheme()]),\n    conceptReference: new FormArray([this.createConceptReference()])\n  })\n\n  hierachicalRelation: FormArray;\n  scheme: FormArray;\n  conceptReference: FormArray;\n\n  constructor(private dataService: DataService, private lexicalService: LexicalEntriesService, private formBuilder: FormBuilder) {\n  }\n\n  ngOnInit() {\n    \n    this.lexicalConceptForm = this.formBuilder.group({\n      label: '',\n      definition : '',\n      hierachicalRelation: this.formBuilder.array([this.createHierachicalRelation()]),\n      scheme: this.formBuilder.array([this.createScheme()]),\n      conceptReference: this.formBuilder.array([this.createConceptReference()])\n    })\n    this.onChanges();\n    this.loadPeople();\n    this.triggerTooltip();\n  }\n\n  ngOnChanges(changes: SimpleChanges) {\n    setTimeout(()=> {\n      if(this.object != changes.lexicalConceptData.currentValue){\n        if(this.conceptReference != null){\n          this.conceptReference.clear();\n          this.hierachicalRelation.clear();\n          this.scheme.clear();\n        }\n      }\n      this.loadPeople();\n      this.object = changes.lexicalConceptData.currentValue;\n      if(this.object != null){\n        this.lexicalConceptForm.get('label').setValue(this.object.label, {emitEvent:false});\n      }\n      this.triggerTooltip();\n  }, 10)\n  }\n\n  triggerTooltip(){\n    setTimeout(() => {\n      //@ts-ignore\n      $('.vartrans-tooltip').tooltip({\n        trigger : 'hover'\n      });\n    }, 500);\n  }\n\n  private loadPeople() {\n    this.peopleLoading = true;\n    this.dataService.getPeople().subscribe(x => {\n      this.people = x;\n      this.peopleLoading = false;\n    });\n  }\n\n  onChanges(): void {\n    this.lexicalConceptForm.valueChanges.pipe(debounceTime(200)).subscribe(searchParams => {\n      //console.log(searchParams)\n    })\n  }\n\n  createScheme(): FormGroup {\n    return this.formBuilder.group({\n      target: ''\n    })\n  }\n\n  addScheme() {\n    this.scheme = this.lexicalConceptForm.get('scheme') as FormArray;\n    this.scheme.push(this.createScheme());\n    this.triggerTooltip();\n  }\n\n  removeScheme(index) {\n    this.scheme = this.lexicalConceptForm.get('scheme') as FormArray;\n    this.scheme.removeAt(index);\n  }\n\n  addHierachicalRelation() {\n    this.hierachicalRelation = this.lexicalConceptForm.get('hierachicalRelation') as FormArray;\n    this.hierachicalRelation.push(this.createHierachicalRelation());\n    this.triggerTooltip();\n  }\n\n  removeHierachicalRelation(index) {\n    this.hierachicalRelation = this.lexicalConceptForm.get('hierachicalRelation') as FormArray;\n    this.hierachicalRelation.removeAt(index);\n  }\n\n  addConceptReference() {\n    this.conceptReference = this.lexicalConceptForm.get('conceptReference') as FormArray;\n    this.conceptReference.push(this.createConceptReference());\n    this.triggerTooltip();\n  }\n\n  removeConceptReference(index) {\n    this.conceptReference = this.lexicalConceptForm.get('conceptReference') as FormArray;\n    this.conceptReference.removeAt(index);\n  }\n\n\n  createHierachicalRelation(): FormGroup {\n    return this.formBuilder.group({\n      relation: '',\n      entity: ''\n    })\n  }\n\n  createConceptReference(): FormGroup {\n    return this.formBuilder.group({\n      target: ''\n    })\n  }\n\n}\n\n","\n\n<form [formGroup]=\"lexicalConceptForm\" *ngIf=\"object!=null\">\n    <div class=\"form-group row ml-2 mt-3 mr-2\">\n        <label for=\"inputLabel\" class=\"col-xl-3 col-form-label\">Label:</label>\n        <div class=\"input-group col-xl-5\">\n            <input formControlName=\"label\" name=\"label\" type=\"text\" class=\"form-control\" placeholder=\"\">\n        </div>\n    </div>\n\n    <div class=\"form-group row ml-2 mt-3 mr-2\">\n        <label for=\"inputLabel\" class=\"col-lg-3 col-form-label\">Definition:</label>\n        <div class=\"input-group col-lg-8\">\n            <textarea formControlName=\"definition\" name=\"definition\" class=\"form-control\" style=\"resize: none;\"></textarea>\n        </div>\n    </div>\n\n\n    <!-- HIERARCHICAL RELATION -->\n    <div class=\"form-group row ml-2 mt-3 mr-2\">\n        <div class=\"input-group col-xl-12\">\n            <div class=\"card\">\n                <span class=\"text-id\"><b>HIERARCHICAL RELATION</b></span>\n                <a (click)=\"addHierachicalRelation()\" class=\"pointer\"><span class=\"collapse-icon\"><i class=\"fa fa-plus-square\"></i></span></a>\n\n                <div class=\"card-body\">\n                    <div class=\"form-group row ml-2 mt-3 mr-2\" formArrayName=\"hierachicalRelation\" *ngFor=\"let direct of lexicalConceptForm.get('hierachicalRelation')['controls']; let i = index\">\n                        <div class=\"col-xl-5\" [formGroupName]=\"i\">\n                            <select class=\"form-control\" formControlName=\"relation\" name=\"relation\">\n                                <option>Relations...</option>\n                                <option>...</option>\n                            </select>\n                        </div>\n                        <div class=\"input-group col-xl-7\" *ngIf=\"{switch : false}; let variable\" [formGroupName]=\"i\">\n                            <ng-select formControlName=\"entity\" name=\"entity\" [items]=\"people\" bindValue=\"name\" bindLabel=\"name\" placeholder=\"Search entity\" appendTo=\"body\"\n                                [loading]=\"peopleLoading\" *ngIf=\"!variable.switch\">\n                            </ng-select>\n                            <input formControlName=\"entity\" name=\"entity\" type=\"text\" class=\"form-control\" placeholder=\"Insert URI\" *ngIf=\"variable.switch\">\n                            <div class=\"input-group-append ml-3 form-check\" style=\"align-items: center;\">\n                                <input class=\"form-check-input vartrans-tooltip\" type=\"checkbox\" (change)=\"variable.switch=!variable.switch\" data-toggle=\"tooltip\" data-placement=\"bottom\" data-trigger=\"hover\" title=\"Clicca per inserire un URI manualmente\">\n                            </div>\n                            <div class=\"input-group-append ml-2\">\n                                <button class=\"btn btn-primary\" type=\"button\"><i\n                                        class=\"fa fa-external-link-alt\" (click)=\"modalRoot.show()\"></i></button>\n                                <app-modal #modalRoot class=\"modal-demo\" [maximizable]=\"true\" [backdrop]=\"false\">\n                                    <ng-container class=\"app-modal-header\">Demo modal</ng-container>\n                                    <ng-container class=\"app-modal-body\">\n                                        <h3>MODAL DIALOG</h3>\n                                        <p>Lorem Ipsum is simply dummy text of the printing and typesetting industry.\n                                            Lorem Ipsum has been the industrys standard dummy text ever since the 1500s.</p>\n                                    </ng-container>\n                                    <ng-container class=\"app-modal-footer\">\n                                        <button type=\"button\" class=\"button button3\" (click)=\"modalRoot.hide()\">Delete</button>\n                                        <button type=\"button\" class=\"button button1\" (click)=\"modalRoot.hide()\">Save</button>\n                                        <button type=\"button\" class=\"button button2\" style=\"float: right;\"\n                                            (click)=\"modalRoot.hide()\">Close\n                                        </button>\n                                    </ng-container>\n                                </app-modal>\n                            </div>\n                            <div class=\"input-group-append ml-2\">\n                                <button (click)=\"removeHierachicalRelation(i)\" class=\"btn btn-danger\" type=\"button\"><i class=\"fa fa-trash-alt\"></i></button>\n                            </div>\n                        </div>\n                    </div>\n                   \n                </div>\n            </div>\n        </div>\n    </div>\n    \n    <!-- SCHEME -->\n    <div class=\"form-group row ml-2 mt-3 mr-2\">\n        <div class=\"input-group col-xl-12\">\n            <div class=\"card\">\n                <span class=\"text-id\"><b>SCHEME</b></span>\n                <a class=\"pointer\" (click)=\"addScheme()\"><span class=\"collapse-icon\"><i class=\"fa fa-plus-square\"></i></span></a>\n\n                <div class=\"card-body\">\n                    <div formArrayName=\"scheme\">\n                        <div *ngFor=\"let scheme of lexicalConceptForm.get('scheme')['controls']; let i = index\">\n                            \n                            <div class=\"form-group row ml-2 mt-3 mr-2\">\n                                <div class=\"input-group col-xl-9\" *ngIf=\"{switch : false}; let variable\" [formGroupName]=\"i\">\n                                    <ng-select formControlName=\"target\" name=\"target\" [items]=\"people\" bindValue=\"name\" bindLabel=\"name\" placeholder=\"Search entity\" appendTo=\"body\"\n                                        [loading]=\"peopleLoading\" *ngIf=\"!variable.switch\">\n                                    </ng-select>\n                                    <input formControlName=\"target\" name=\"target\" type=\"text\" class=\"form-control\" placeholder=\"Insert URI\" *ngIf=\"variable.switch\">\n                                    <div class=\"input-group-append ml-3 form-check\" style=\"align-items: center;\">\n                                        <input class=\"form-check-input vartrans-tooltip\" type=\"checkbox\" (change)=\"variable.switch=!variable.switch\" data-toggle=\"tooltip\" data-placement=\"bottom\" data-trigger=\"hover\" title=\"Clicca per inserire un URI manualmente\">\n                                    </div>\n                                    <div class=\"input-group-append ml-2\">\n                                        <button class=\"btn btn-primary\" type=\"button\"><i\n                                                class=\"fa fa-external-link-alt\" ></i></button>\n                                    </div>\n                                    <div class=\"input-group-append ml-2\">\n                                        <button (click)=\"removeScheme(i)\" class=\"btn btn-danger\" type=\"button\"><i class=\"fa fa-trash-alt\"></i></button>\n                                    </div>\n                                    <div class=\"input-group-append ml-2\">\n                                        <button class=\"btn btn-outline-primary\" type=\"button\" (click)=\"modalRoot.show()\">\n                                            <i class=\"fa fa-plus\"></i>\n                                        </button>\n                                        <app-modal #modalRoot class=\"modal-demo\">\n                                            <ng-container class=\"app-modal-header\">Concept scheme creation</ng-container>\n                                            <ng-container class=\"app-modal-body\">\n                                                <div class=\"form-group row ml-2 mt-3 mr-2\">\n                                                    <label for=\"inputLabel\" class=\"col-xl-3 col-form-label\">Label:</label>\n                                                    <div class=\"input-group col-xl-5\">\n                                                        <input type=\"text\" class=\"form-control\" placeholder=\"\">\n                                                    </div>\n                                                </div>\n                                            \n                                                <div class=\"form-group row ml-2 mt-3 mr-2\">\n                                                    <label for=\"inputLabel\" class=\"col-lg-3 col-form-label\">Definition:</label>\n                                                    <div class=\"input-group col-lg-8\">\n                                                        <textarea class=\"form-control\" style=\"resize: none;\"></textarea>\n                                                    </div>\n                                                </div>\n                                            </ng-container>\n                                        </app-modal>\n                                    </div>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                    \n                </div>\n            </div>\n        </div>\n    </div>\n\n     <!-- CONCEPT REFERENCE -->\n     <div class=\"form-group row ml-2 mt-3 mr-2\">\n        <div class=\"input-group col-xl-12\">\n            <div class=\"card\">\n                <span class=\"text-id\"><b>CONCEPT REFERENCE</b></span>\n                <a class=\"pointer\" (click)=\"addConceptReference()\"><span class=\"collapse-icon\"><i class=\"fa fa-plus-square\"></i></span></a>\n\n                <div class=\"card-body\">\n                    <div formArrayName=\"conceptReference\">\n                        <div *ngFor=\"let scheme of lexicalConceptForm.get('conceptReference')['controls']; let i = index\">\n                            \n                            <div class=\"form-group row ml-2 mt-3 mr-2\">\n                                <div class=\"input-group col-xl-9\" *ngIf=\"{switch : false}; let variable\" [formGroupName]=\"i\">\n                                    <ng-select formControlName=\"target\" name=\"target\" [items]=\"people\" bindValue=\"name\" bindLabel=\"name\" placeholder=\"Search entity\" appendTo=\"body\"\n                                        [loading]=\"peopleLoading\" *ngIf=\"!variable.switch\">\n                                    </ng-select>\n                                    <input formControlName=\"target\" name=\"target\" type=\"text\" class=\"form-control\" placeholder=\"Insert URI\" *ngIf=\"variable.switch\">\n                                    <div class=\"input-group-append ml-3 form-check\" style=\"align-items: center;\">\n                                        <input class=\"form-check-input vartrans-tooltip\" type=\"checkbox\" (change)=\"variable.switch=!variable.switch\" data-toggle=\"tooltip\" data-placement=\"bottom\" data-trigger=\"hover\" title=\"Clicca per inserire un URI manualmente\">\n                                    </div>\n                                    <div class=\"input-group-append ml-2\">\n                                        <button class=\"btn btn-primary\" type=\"button\"><i\n                                                class=\"fa fa-external-link-alt\" ></i></button>\n                                    </div>\n                                    <div class=\"input-group-append ml-2\">\n                                        <button (click)=\"removeConceptReference(i)\" class=\"btn btn-danger\" type=\"button\"><i class=\"fa fa-trash-alt\"></i></button>\n                                    </div>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                    \n                </div>\n            </div>\n        </div>\n    </div>\n\n    <!-- SHOW INFERENCE -->\n    <!-- <div class=\"form-group row ml-2 mt-3 mr-2 inference\">\n        <div class=\"input-group col-xl-12\">\n            <div class=\"card\">\n                <span class=\"text-id\"><a data-toggle=\"collapse\" href=\"#inferenceCollapse\" role=\"button\" aria-expanded=\"false\" aria-controls=\"inferenceCollapse\"><span class=\"badge badge-warning\"><b style=\"color: white; font-size: 12px;\">SHOW INFERENCE</b></span></a></span>\n                <div class=\"card-body\">\n                    <div class=\"collapse\" id=\"inferenceCollapse\">\n\n                        <div class=\"form-group row ml-2 mr-2\">\n                            <label class=\"col-xl-3 col-form-label\">Lexicalized Sense:</label>\n                            <div class=\"col-xl-9 card mt-0 p-0\" style=\"max-height: 10vh;overflow: auto; border: 1px solid rgba(0,0,0,.125) !important\">    \n                                <div class=\"form-group row ml-2 mb-0 mt-0 mr-2\">\n                                    <label class=\"col-xl-6 col-form-label\">Lexical Sense</label>\n                                </div>      \n                                <div class=\"form-group row ml-2 mb-0 mt-0 mr-2\">\n                                    <label class=\"col-xl-6 col-form-label\">Lexical Sense</label>\n                                </div>        \n                                <div class=\"form-group row ml-2 mb-0 mt-0 mr-2\">\n                                    <label class=\"col-xl-6 col-form-label\">Lexical Sense</label>\n                                </div>  \n                            </div>\n                        </div>\n\n                        <div class=\"form-group row ml-2 mr-2\">\n                            <label class=\"col-xl-3 col-form-label\">Is Evoked By:</label>\n                            <div class=\"col-xl-9 card mt-0 p-0\" style=\"max-height: 10vh;overflow: auto; border: 1px solid rgba(0,0,0,.125) !important\">    \n                                <div class=\"form-group row ml-2 mb-0 mt-0 mr-2\">\n                                    <label class=\"col-xl-6 col-form-label\">Lexical Entry@LANG</label>\n                                </div> \n                                <div class=\"form-group row ml-2 mb-0 mt-0 mr-2\">\n                                    <label class=\"col-xl-6 col-form-label\">Lexical Entry@LANG</label>\n                                </div>          \n                            </div>\n                        </div>\n\n                        <div class=\"form-group row ml-2 mr-2\">\n                            <label class=\"col-xl-3 col-form-label\">Narrower:</label>\n                            <div class=\"col-xl-9 card mt-0 p-0\" style=\"max-height: 10vh;overflow: auto; border: 1px solid rgba(0,0,0,.125) !important\">    \n                                <div class=\"form-group row ml-2 mb-0 mt-0 mr-2\">\n                                    <label class=\"col-xl-6 col-form-label\">Lexical Concept</label>\n                                    <label class=\"col-xl-6 col-form-label\">Depth</label>\n                                </div>           \n                            </div>\n                        </div>\n                        \n                        <div class=\"form-group row ml-2 mr-2\">\n                            <label class=\"col-xl-3 col-form-label\">Borader:</label>\n                            <div class=\"col-xl-9 card mt-0 p-0\" style=\"max-height: 10vh;overflow: auto; border: 1px solid rgba(0,0,0,.125) !important\">    \n                                <div class=\"form-group row ml-2 mb-0 mt-0 mr-2\">\n                                    <label class=\"col-xl-6 col-form-label\">Lexical Concept</label>\n                                    <label class=\"col-xl-6 col-form-label\">Depth</label>\n                                </div>           \n                            </div>\n                        </div>\n                        \n                    </div>\n                </div>\n            </div>\n        </div>\n    </div> -->\n</form>","/*\n   Copyright 2021-2022  Istituto di Linguistica Computazionale \"A. Zampolli\", Consiglio Nazionale delle Ricerche, Pisa, Italy.\n \nThis file is part of EpiLexo.\n\nEpiLexo is free software: you can redistribute it and/or modify it under the terms of the GNU General Public License as published by the Free Software Foundation, either version 3 of the License, or (at your option) any later version.\n\nEpiLexo is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for more details.\n\nYou should have received a copy of the GNU General Public License along with EpiLexo. If not, see <https://www.gnu.org/licenses/>.\n*/\n\nimport { Component, Input, OnInit, SimpleChanges } from '@angular/core';\nimport { FormArray, FormBuilder, FormControl, FormGroup, Validators } from '@angular/forms';\nimport { Subject, Subscription } from 'rxjs';\nimport { debounceTime, pairwise, startWith } from 'rxjs/operators';\nimport { LexicalEntriesService } from 'src/app/services/lexical-entries/lexical-entries.service';\nimport { DataService, Person } from '../lexical-entry-core-form/data.service';\nimport { ToastrService } from 'ngx-toastr';\n\n\n@Component({\n  selector: 'app-sense-core-form',\n  templateUrl: './sense-core-form.component.html',\n  styleUrls: ['./sense-core-form.component.scss']\n})\nexport class SenseCoreFormComponent implements OnInit {\n\n  @Input() senseData: any;\n\n  private subject_def: Subject<any> = new Subject();\n  private subject_ex_def: Subject<any> = new Subject();\n\n  switchInput = false;\n  subscription: Subscription;\n  object: any;\n  people: Person[] = [];\n  peopleLoading = false;\n  counter = 0;\n\n  disableAddDef = false;\n\n  definitionData = [];\n  definitionMemory = [];\n\n  staticDef = [];\n\n  senseCore = new FormGroup({\n    definition: new FormArray([this.createDefinition()]),\n    confidence: new FormControl(null),\n    usage: new FormControl('', [Validators.required, Validators.minLength(5)]),\n    topic: new FormControl('', [Validators.required, Validators.minLength(5)]),\n    reference: new FormArray([this.createReference()]),\n    lexical_concept: new FormArray([this.createLexicalConcept()]),\n    sense_of: new FormControl('', [Validators.required, Validators.minLength(5)])\n  })\n\n  definitionArray: FormArray;\n  lexicalConceptArray: FormArray;\n\n  constructor(private dataService: DataService, private lexicalService: LexicalEntriesService, private formBuilder: FormBuilder, private toastr: ToastrService) { }\n\n  ngOnInit() {\n    setTimeout(() => {\n      //@ts-ignore\n      $('.denotes-tooltip').tooltip({\n        trigger: 'hover'\n      });\n    }, 1000);\n    this.loadPeople();\n\n    this.subject_def.pipe(debounceTime(1000)).subscribe(\n      data => {\n        this.onChangeDefinition(data)\n      }\n    )\n\n    this.subject_ex_def.pipe(debounceTime(1000)).subscribe(\n      data => {\n        this.onChangeExistingDefinition(data['evt'], data['i'])\n      }\n    )\n\n    this.senseCore = this.formBuilder.group({\n      definition: this.formBuilder.array([]),\n      confidence: false,\n      usage: '',\n      topic: '',\n      reference: this.formBuilder.array([this.createReference()]),\n      lexical_concept: this.formBuilder.array([]),\n      sense_of: ''\n    })\n\n    this.onChanges();\n\n  }\n\n  private loadPeople() {\n    this.peopleLoading = true;\n    this.dataService.getPeople().subscribe(x => {\n      this.people = x;\n      this.peopleLoading = false;\n    });\n  }\n\n  ngOnChanges(changes: SimpleChanges) {\n    setTimeout(() => {\n      if (this.object != changes.senseData.currentValue) {\n        this.lexicalConceptArray = this.senseCore.get('lexical_concept') as FormArray;\n        this.lexicalConceptArray.clear();\n\n        this.definitionArray = this.senseCore.get('definition') as FormArray;\n        this.definitionArray.clear();\n\n        this.staticDef = [];\n      }\n      this.object = changes.senseData.currentValue;\n      if (this.object != null) {\n\n        this.definitionData = [];\n        this.definitionMemory = [];\n\n        for (var i = 0; i < this.object.definition.length; i++) {\n          const pId = this.object.definition[i]['propertyID'];\n          const pVal = this.object.definition[i]['propertyValue'];\n          this.definitionData.push(pId);\n\n          if (pId == 'definition' && pVal == '') {\n            this.definitionMemory.push(pId);\n            this.addDefinition(pId, pVal)\n\n            this.staticDef.push({ trait: pId, value: pVal })\n          }\n\n          if (pVal != '') {\n            this.definitionMemory.push(pId);\n            this.addDefinition(pId, pVal)\n\n            this.staticDef.push({ trait: pId, value: pVal })\n          }\n        }\n        //console.log(this.object)\n        this.senseCore.get('confidence').setValue(this.object.confidence, { emitEvent: false })\n        this.senseCore.get('topic').setValue(this.object.topic, { emitEvent: false })\n        this.senseCore.get('usage').setValue(this.object.usage, { emitEvent: false });\n        this.addLexicalConcept(this.object.concept);\n        this.senseCore.get('sense_of').setValue(this.object.sense, { emitEvent: false });\n      }\n    }, 10)\n  }\n\n\n  onChanges(): void {\n    this.senseCore.get('usage').valueChanges.pipe(debounceTime(1000)).subscribe(newDef => {\n      this.lexicalService.spinnerAction('on');\n      let senseId = this.object.senseInstanceName;\n      let parameters = {\n        relation: \"usage\",\n        value: newDef\n      }\n      this.lexicalService.updateSense(senseId, parameters).subscribe(\n        data => {\n          console.log(data)\n          this.lexicalService.spinnerAction('off');\n          //this.lexicalService.refreshLexEntryTree();\n          this.lexicalService.updateLexCard(this.object)\n        }, error => {\n          console.log(error)\n          //this.lexicalService.refreshLexEntryTree();\n          this.lexicalService.updateLexCard({ lastUpdate: error.error.text })\n          this.lexicalService.spinnerAction('off');\n          if (error.status != 200) {\n            this.toastr.error(error.error, 'Error', {\n              timeOut: 5000,\n            });\n          } else {\n            this.toastr.success('Sense usage changed', '', {\n              timeOut: 5000,\n            });\n          }\n        }\n      )\n    })\n\n    this.senseCore.controls['confidence'].valueChanges.pipe(startWith(undefined), debounceTime(1000), pairwise()).subscribe(newConfidence => {\n      console.log('Old value: ', newConfidence[0]);\n      console.log('New value: ', newConfidence[1]);\n      this.lexicalService.spinnerAction('on');\n      let parameters = {};\n      let senseId = this.object.senseInstanceName;\n      let oldValue = newConfidence[0];\n      let newValue = newConfidence[1];\n\n      if (oldValue == undefined) {\n        parameters = {\n          type: \"confidence\",\n          relation: 'confidence',\n          value: newValue\n        }\n      } else if (oldValue != undefined && this.object.confidence == -1) {\n        parameters = {\n          type: \"confidence\",\n          relation: 'confidence',\n          value: newValue,\n          currentValue: -1\n        }\n      } else {\n        parameters = {\n          type: \"confidence\",\n          relation: 'confidence',\n          value: newValue,\n          currentValue: oldValue\n        }\n      }\n\n      console.log(parameters)\n      this.lexicalService.updateGenericRelation(senseId, parameters).subscribe(\n        data => {\n          console.log(data);\n\n          this.lexicalService.updateLexCard(data)\n          this.lexicalService.spinnerAction('off');\n        },\n        error => {\n          console.log(error);\n\n          this.lexicalService.spinnerAction('off');\n\n          if (error.status == 200) {\n            this.toastr.success('Confidence updated', '', { timeOut: 5000 })\n            this.lexicalService.updateLexCard({ lastUpdate: error.error.text })\n            this.senseCore.get('confidence').setValue(newValue, { emitEvent: false });\n            this.object.confidence = newValue;\n          } else {\n            this.toastr.error(error.error, 'Error', { timeOut: 5000 })\n\n          }\n        }\n      )\n    })\n\n    this.senseCore.get('topic').valueChanges.pipe(debounceTime(1000)).subscribe(newTopic => {\n      if (newTopic.trim() != '') {\n        this.lexicalService.spinnerAction('on');\n        let senseId = this.object.senseInstanceName;\n        let parameters = {\n          relation: \"subject\",\n          value: newTopic\n        }\n        this.lexicalService.updateSense(senseId, parameters).subscribe(\n          data => {\n            console.log(data)\n            this.lexicalService.spinnerAction('off');\n            //this.lexicalService.refreshLexEntryTree();\n            this.lexicalService.updateLexCard(this.object)\n            this.toastr.success('Sense topic changed', '', {\n              timeOut: 5000,\n            });\n\n          }, error => {\n            console.log(error)\n            //this.lexicalService.refreshLexEntryTree();\n            this.lexicalService.updateLexCard({ lastUpdate: error.error.text })\n            this.lexicalService.spinnerAction('off');\n            if (typeof (error.error) != 'object') {\n              this.toastr.error(error.error, 'Error', {\n                timeOut: 5000,\n              });\n            }\n\n          }\n        )\n      }\n\n    })\n\n    this.senseCore.get('reference').valueChanges.pipe(debounceTime(1000)).subscribe(newDef => {\n      this.lexicalService.spinnerAction('on');\n      let senseId = this.object.senseInstanceName;\n      let parameters = {\n        relation: \"reference\",\n        value: newDef[0]['entity']\n      }\n      //console.log(senseId)\n      console.log(parameters);\n      this.lexicalService.updateSense(senseId, parameters).subscribe(\n        data => {\n          console.log(data)\n          this.lexicalService.spinnerAction('off');\n          //this.lexicalService.refreshLexEntryTree();\n          this.lexicalService.updateLexCard(this.object)\n        }, error => {\n          console.log(error)\n          //this.lexicalService.refreshLexEntryTree();\n          this.lexicalService.updateLexCard({ lastUpdate: error.error.text })\n          this.lexicalService.spinnerAction('off');\n          if (error.status != 200) {\n            this.toastr.error(error.error, 'Error', {\n              timeOut: 5000,\n            });\n          } else {\n            this.toastr.success('Sense reference changed', '', {\n              timeOut: 5000,\n            });\n          }\n        }\n      )\n    })\n  }\n\n  applyUncertain() {\n    this.lexicalService.spinnerAction('on');\n    let oldValue = this.senseCore.get('confidence').value;\n    let senseId = this.object.senseInstanceName;\n    let parameters = {\n      relation: 'confidence',\n      value: 0\n    }\n    console.log(parameters)\n    this.lexicalService.deleteLinguisticRelation(senseId, parameters).subscribe(\n      data => {\n        console.log(data);\n        /* data['request'] = 0;\n        data['new_label'] = confidence_value\n        this.lexicalService.refreshAfterEdit(data); */\n        this.lexicalService.updateLexCard(data)\n        this.lexicalService.spinnerAction('off');\n        this.senseCore.get('confidence').setValue(-1, { emitEvent: false });\n        this.object.confidence = -1;\n      },\n      error => {\n        console.log(error);\n        /*  const data = this.object.etymology;\n        data['request'] = 0;\n        data['new_label'] = confidence_value;\n        this.lexicalService.refreshAfterEdit(data); */\n        this.lexicalService.spinnerAction('off');\n        this.lexicalService.updateLexCard({ lastUpdate: error.error.text })\n        if (error.status == 200) {\n          this.toastr.success('Confidence updated', '', { timeOut: 5000 })\n          this.senseCore.get('confidence').setValue(-1, { emitEvent: false });\n          this.object.confidence = -1;\n        } else {\n          this.toastr.error(error.error, 'Error', { timeOut: 5000 })\n\n        }\n      }\n    )\n  }\n\n  onChangeDefinitionTrait(evt, i) {\n\n    setTimeout(() => {\n      this.definitionArray = this.senseCore.get('definition') as FormArray;\n      this.definitionArray.at(i).patchValue({ propertyID: evt.target.value, propertyValue: \"\" });\n      if (evt.target.value != '') {\n\n        this.definitionMemory[i] = evt.target.value;\n      } else {\n\n        this.definitionMemory.splice(i, 1)\n      }\n\n\n\n    }, 250);\n  }\n\n  createReference() {\n    return this.formBuilder.group({\n      entity: new FormControl(null, [Validators.required, Validators.minLength(5)])\n    })\n  }\n\n  addDefinition(pId?, pVal?) {\n    this.definitionArray = this.senseCore.get('definition') as FormArray;\n    if (pId != undefined) {\n      this.definitionArray.push(this.createDefinition(pId, pVal));\n    } else {\n      this.disableAddDef = true;\n      this.definitionArray.push(this.createDefinition());\n    }\n  }\n\n  removeDefinition(index) {\n    const definitionArray = this.senseCore.get('definition') as FormArray;\n\n    const trait = this.definitionArray.at(index).get('propertyID').value;\n    const value = this.definitionArray.at(index).get('propertyValue').value;\n\n    //console.log(trait + value)\n\n    if (trait != null) {\n\n      let senseId = this.object.senseInstanceName;\n\n      let parameters = {\n        relation: trait,\n        value: value\n      }\n\n      this.lexicalService.deleteLinguisticRelation(senseId, parameters).subscribe(\n        data => {\n          console.log(data)\n          this.lexicalService.updateLexCard(this.object)\n\n          this.toastr.success('Sense definition deleted', '', {\n            timeOut: 5000,\n          });\n\n        }, error => {\n          console.log(error);\n          this.lexicalService.updateLexCard({ lastUpdate: error.error.text })\n          if (typeof (error.error) != 'object') {\n            this.toastr.error(error.error, 'Error', {\n              timeOut: 5000,\n            });\n          }\n        }\n      )\n    } else {\n      this.disableAddDef = false;\n    }\n    this.definitionMemory.splice(index, 1);\n    this.staticDef.splice(index, 1);\n    definitionArray.removeAt(index)\n  }\n\n  debounceExistingKeyup(evt, i) {\n    this.lexicalService.spinnerAction('on');\n    this.subject_ex_def.next({ evt, i })\n  }\n\n  debounceKeyup(evt, i) {\n    this.lexicalService.spinnerAction('on');\n    this.subject_def.next({ evt, i })\n  }\n\n  createDefinition(pId?, pVal?) {\n    if (pId != undefined) {\n      return this.formBuilder.group({\n        propertyID: new FormControl(pId, [Validators.required, Validators.minLength(0)]),\n        propertyValue: new FormControl(pVal, [Validators.required, Validators.minLength(0)])\n      })\n    } else {\n      return this.formBuilder.group({\n        propertyID: new FormControl(null, [Validators.required, Validators.minLength(0)]),\n        propertyValue: new FormControl(null, [Validators.required, Validators.minLength(0)])\n      })\n    }\n\n  }\n\n  onChangeExistingDefinition(evt, i) {\n\n    this.definitionArray = this.senseCore.get('definition') as FormArray;\n    const trait = this.definitionArray.at(i).get('propertyID').value;\n    const newValue = evt.target.value;\n    const senseId = this.object.senseInstanceName;\n    const parameters = { relation: trait, value: newValue }\n\n    if (trait != undefined && newValue != '') {\n\n      this.staticDef[i] = { trait: trait, value: newValue };\n      this.lexicalService.updateSense(senseId, parameters).pipe(debounceTime(1000)).subscribe(\n        data => {\n          console.log(data)\n          this.lexicalService.spinnerAction('off');\n          //this.lexicalService.refreshLexEntryTree();\n          if (trait == 'definition') {\n\n          }\n          this.lexicalService.updateLexCard(data)\n        }, error => {\n          console.log(error);\n          //this.lexicalService.refreshLexEntryTree();\n          if (trait == 'definition') {\n            const data = this.object;\n            data['whatToSearch'] = 'sense';\n            data['new_definition'] = newValue;\n            data['request'] = 6;\n            this.lexicalService.refreshAfterEdit(data);\n          }\n          this.lexicalService.updateLexCard({ lastUpdate: error.error.text })\n          this.lexicalService.spinnerAction('off');\n          if (error.status != 200) {\n            this.toastr.error(error.error, 'Error', {\n              timeOut: 5000,\n            });\n          } else {\n            this.toastr.success('Sense definition changed', '', {\n              timeOut: 5000,\n            });\n          }\n        }\n      )\n    } else {\n      this.lexicalService.spinnerAction('off');\n      this.staticDef[i] = { trait: trait, value: \"\" };\n    }\n  }\n\n  onChangeDefinition(object) {\n\n    this.definitionArray = this.senseCore.get('definition') as FormArray;\n    const trait = this.definitionArray.at(object.i).get('propertyID').value;\n    const newValue = object.evt.target.value;\n    const senseId = this.object.senseInstanceName;\n    const parameters = { relation: trait, value: newValue }\n\n    if (trait != undefined && newValue != '') {\n\n      this.staticDef.push({ trait: trait, value: newValue });\n      this.lexicalService.updateSense(senseId, parameters).pipe(debounceTime(1000)).subscribe(\n        data => {\n          console.log(data)\n          this.lexicalService.spinnerAction('off');\n          //this.lexicalService.refreshLexEntryTree();\n          this.lexicalService.updateLexCard(data)\n          this.disableAddDef = false;\n        }, error => {\n          console.log(error);\n          //this.lexicalService.refreshLexEntryTree();\n          this.disableAddDef = false;\n          if (trait == 'definition') {\n            const data = this.object;\n            data['whatToSearch'] = 'sense';\n            data['new_definition'] = newValue;\n            data['request'] = 6;\n\n            this.lexicalService.refreshAfterEdit(data);\n            if (error.status != 200) {\n              this.toastr.error(error.error, 'Error', {\n                timeOut: 5000,\n              });\n            } else {\n              this.toastr.success('Sense ' + trait + ' changed', '', {\n                timeOut: 5000,\n              });\n            }\n          }\n          this.lexicalService.updateLexCard({ lastUpdate: error.error.text })\n          this.lexicalService.spinnerAction('off');\n        }\n      )\n    } else {\n      this.lexicalService.spinnerAction('off');\n    }\n  }\n\n\n  removeReference(index) {\n    const referenceArray = this.senseCore.get('reference') as FormArray;\n    referenceArray.removeAt(index)\n  }\n\n  createLexicalConcept(e?) {\n    if (e != undefined) {\n      return this.formBuilder.group({\n        lex_concept: new FormControl(e, [Validators.required, Validators.minLength(5)])\n      })\n    } else {\n      return this.formBuilder.group({\n        lex_concept: new FormControl(null, [Validators.required, Validators.minLength(5)])\n      })\n    }\n\n  }\n\n  addLexicalConcept(entity?) {\n    this.lexicalConceptArray = this.senseCore.get('lexical_concept') as FormArray;\n    if (entity != undefined) {\n      this.lexicalConceptArray.push(this.createLexicalConcept(entity));\n    } else {\n      this.lexicalConceptArray.push(this.createLexicalConcept());\n    }\n  }\n\n  removeLexicalConcept(index) {\n    this.lexicalConceptArray = this.senseCore.get('lexical_concept') as FormArray;\n    this.lexicalConceptArray.removeAt(index);\n  }\n}\n","\n\n<form [formGroup]=\"senseCore\">\n    \n    <div class=\"form-group row ml-2 mt-3 mr-2\">\n        <div class=\"input-group col-lg-12\">\n            <div class=\"card\">\n                <span class=\"text-id\"><b>DEFINITIONS</b></span>\n                <a class=\"pointer\" (click)=\"addDefinition()\" [ngClass]=\"{no_pointer: disableAddDef}\"><span class=\"collapse-icon\"><i\n                            class=\"fa fa-plus-square\"></i></span></a>\n                <div class=\"card-body\">\n\n                    <div class=\"d-flex my-3\" *ngFor=\"let def of staticDef; let i = index\">\n                        <div class=\"col-md-3\">\n                            <span style=\"line-height: 50px;\" class=\"col-form-label\">{{def['trait']}}</span>\n                        </div>\n                        <div class=\"input-group col-md-9\">\n                            <textarea type=\"text\" class=\"form-control\"\n                                placeholder=\"\" (keyup)=\"debounceExistingKeyup($event, i)\" [value]=\"def['value']\" style=\"resize: none;\"></textarea>\n                            <div (click)=\"removeDefinition(i)\" class=\"input-group-append ml-2\" *ngIf=\"def['trait'] != 'definition'\"> <button\n                                    class=\"btn btn-danger\" type=\"button\"\n                                    style=\"font-size: 12px; border-radius: .25rem;\"><i\n                                        class=\"fa fa-trash-alt\"></i></button>\n                            </div>\n                            <div class=\"invalid-feedback\" *ngIf=\"staticDef[i]['value'] == ''\" style=\"display: block;\">\n                                Please, don't leave this field blank\n                            </div>\n\n                        </div>\n                    </div>\n\n                    <div class=\"d-flex my-2\" formArrayName=\"definition\"\n                        *ngFor=\"let def of senseCore.get('definition')['controls']; let i = index\">\n                        <div class=\"col-md-3\" [formGroupName]=\"i\" *ngIf=\"i + 1 > staticDef.length\">\n                            <select class=\"form-control selectTrait\" formControlName=\"propertyID\" name=\"propertyID\"\n                                style=\"font-size: 12px; height: 50px;\" (change)=\"onChangeDefinitionTrait($event, i)\">\n                                <option value=\"\">Select a trait...</option>\n                                <option *ngFor=\"let df of definitionData\" [disabled]=\"definitionMemory.indexOf(df) > -1\" [selected]=\"def.value['propertyID'] === df\">{{df}}</option>\n                            </select>\n                            <div class=\"invalid-feedback\" *ngIf=\"def.get('propertyID').invalid\" style=\"display: block;\">\n                                Please, don't leave this field blank\n                            </div>\n                        </div>\n                        <div class=\"input-group col-md-9\" [formGroupName]=\"i\" *ngIf=\"i + 1 > staticDef.length\">\n                            <textarea formControlName=\"propertyValue\" name=\"propertyValue\" type=\"text\" class=\"form-control\"\n                                placeholder=\"\" (keyup)=\"debounceKeyup($event, i)\" style=\"resize: none;\"></textarea>\n                            <div (click)=\"removeDefinition(i)\" class=\"input-group-append ml-2\"> <button\n                                    class=\"btn btn-danger\" type=\"button\"\n                                    style=\"font-size: 12px; border-radius: .25rem;\"><i\n                                        class=\"fa fa-trash-alt\"></i></button>\n                            </div>\n                            <div class=\"invalid-feedback\" *ngIf=\"def.get('propertyValue').invalid\" style=\"display: block;\">\n                                Please, don't leave this field blank\n                            </div>\n                        </div>\n                    </div>\n\n                </div>\n            </div>\n        </div>\n    </div>\n    \n    <div class=\"form-group row ml-2 mt-3 mr-2\" *ngIf=\"{confidence : senseCore.get('confidence').value >= 0}; let variable\">\n        <div class=\"col-lg-3\">\n            <label for=\"uncertainBox\">Uncertain</label>\n        </div>\n        <div class=\"col-lg-3 input-group\">\n            <input *ngIf=\"variable.confidence\" id=\"attributes\"  step=\"0.1\" formControlName=\"confidence\" name=\"confidence\" type=\"number\" min=\"0\" max=\"1\" class=\"form-control\" placeholder=\"No info\" [value]=\"senseCore.get('confidence').value\">\n            <button type=\"button\" class=\"btn btn-secondary rounded-circle ml-2\" *ngIf=\"!variable.confidence\" (click)=\"variable.confidence = !variable.confidence\"><i class=\"fas fa-plus\"></i></button>\n            <button type=\"button\" class=\"btn btn-secondary rounded-circle ml-2\" *ngIf=\"variable.confidence\" (click)=\"variable.confidence = !variable.confidence; applyUncertain()\"><i class=\"fas fa-minus\"></i></button>\n        </div>\n    </div>\n\n    <div class=\"form-group row ml-2 mt-4 mr-2\">\n        <label for=\"inputLabel\" class=\"col-lg-3 col-form-label\">Usage:</label>\n        <div class=\"input-group col-lg-8\">\n            <textarea formControlName=\"usage\" name=\"usage\" class=\"form-control\" style=\"resize: none;\"></textarea>\n        </div>\n    </div>\n\n    <div class=\"form-group row ml-2 mt-4 mr-2\">\n        <label for=\"inputLabel\" class=\"col-lg-3 col-form-label\">Topic:</label>\n        <div class=\"input-group col-lg-8\">\n            <input formControlName=\"topic\" name=\"topic\" class=\"form-control\" style=\"resize: none;\" />\n        </div>\n    </div>\n\n    <!-- REFERENCE -->\n    <div formArrayName=\"reference\">\n        <div *ngFor=\"let ref of senseCore['controls'].reference['controls']; let i = index\">\n            <div [formGroupName]=\"i\">\n                <div class=\"form-group row ml-2 mt-3 mr-2\">\n                    <label for=\"inputLabel\" class=\"col-lg-3 col-form-label\">Reference:</label>\n                    <div class=\"input-group col-xl-9\" *ngIf=\"{switch : false}; let variable\">\n                        <ng-select formControlName=\"entity\" name=\"entity\" [items]=\"people\" bindValue=\"name\"\n                            bindLabel=\"name\" placeholder=\"Search entity\" appendTo=\"body\" [loading]=\"peopleLoading\"\n                            *ngIf=\"!variable.switch\">\n                        </ng-select>\n                        <input formControlName=\"entity\" name=\"entity\" type=\"text\" class=\"form-control\"\n                            placeholder=\"Insert URI\" *ngIf=\"variable.switch\">\n                        <div class=\"input-group-append ml-3 form-check\" style=\"align-items: center;\">\n                            <input class=\"form-check-input vartrans-tooltip\" type=\"checkbox\"\n                                (change)=\"variable.switch=!variable.switch\" data-toggle=\"tooltip\"\n                                data-placement=\"bottom\" data-trigger=\"hover\"\n                                title=\"Clicca per inserire un URI manualmente\">\n                        </div>\n                        <div class=\"input-group-append ml-2\">\n                            <button class=\"btn btn-primary\" type=\"button\"><i\n                                    class=\"fa fa-external-link-alt\"></i></button>\n                        </div>\n                        <div class=\"input-group-append ml-2\">\n                            <button (click)=\"removeReference(i)\" class=\"btn btn-danger\" type=\"button\"><i\n                                    class=\"fa fa-trash-alt\"></i></button>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n\n    <div class=\"form-group row ml-2 mt-4 mr-2\">\n\n    </div>\n\n\n    <!-- LEXICAL CONCEPT -->\n    <div class=\"form-group row ml-2 mt-3 mr-2\">\n        <div class=\"input-group col-xl-12\">\n            <div class=\"card\">\n                <span class=\"text-id\"><b>LEXICAL CONCEPT</b></span>\n                <a class=\"pointer\" (click)=\"addLexicalConcept()\"><span class=\"collapse-icon\"><i\n                            class=\"fa fa-plus-square\"></i></span></a>\n\n                <div class=\"card-body\">\n                    <div class=\"form-group row ml-2 mt-3 mr-2\" formArrayName=\"lexical_concept\"\n                        *ngFor=\"let trans of senseCore.get('lexical_concept')['controls']; let i = index\">\n                        <div class=\"input-group col-xl-12\" *ngIf=\"{switch : false}; let variable\" [formGroupName]=\"i\">\n                            <ng-select formControlName=\"lex_concept\" name=\"lex_concept\" [items]=\"people\"\n                                bindValue=\"name\" bindLabel=\"name\" placeholder=\"Search entity\" appendTo=\"body\"\n                                [loading]=\"peopleLoading\" *ngIf=\"!variable.switch\">\n                            </ng-select>\n                            <input formControlName=\"lex_concept\" name=\"lex_concept\" type=\"text\" class=\"form-control\"\n                                placeholder=\"Insert URI\" *ngIf=\"variable.switch\">\n                            <div class=\"input-group-append ml-3 form-check\" style=\"align-items: center;\">\n                                <input class=\"form-check-input vartrans-tooltip\" type=\"checkbox\"\n                                    (change)=\"variable.switch=!variable.switch\" data-toggle=\"tooltip\"\n                                    data-placement=\"bottom\" data-trigger=\"hover\"\n                                    title=\"Clicca per inserire un URI manualmente\">\n                            </div>\n                            <div class=\"input-group-append ml-2\">\n                                <button class=\"btn btn-primary\" type=\"button\"><i\n                                        class=\"fa fa-external-link-alt\"></i></button>\n                            </div>\n                            <div class=\"input-group-append ml-2\">\n                                <button (click)=\"removeLexicalConcept(i)\" class=\"btn btn-danger\" type=\"button\"><i\n                                        class=\"fa fa-trash-alt\"></i></button>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n\n\n    <!-- SHOW INFERENCE -->\n    <!-- <div class=\"form-group row ml-2 mt-3 mr-2 inference\">\n        <div class=\"input-group col-xl-12\">\n            <div class=\"card\">\n                <span class=\"text-id\"><a data-toggle=\"collapse\" href=\"#inferenceCollapse\" role=\"button\"\n                        aria-expanded=\"false\" aria-controls=\"inferenceCollapse\"><span class=\"badge badge-warning\"><b\n                                style=\"color: white; font-size: 12px;\">SHOW INFERENCE</b></span></a></span>\n                <div class=\"card-body\">\n                    <div class=\"collapse\" id=\"inferenceCollapse\">\n\n                        <div class=\"form-group row ml-2 mt-3 mr-2\">\n                            <div class=\"input-group col-xl-12\" *ngIf=\"{switch : false}; let variable\">\n                                <div class=\"form-group row w-100\">\n                                    <label for=\"inputLabel\" class=\"col-lg-3 col-form-label\">Is sense of:</label>\n                                    <div class=\"input-group col-lg-8\">\n                                        <input formControlName=\"sense_of\" name=\"sense_of\" type=\"text\" class=\"form-control\"\n                                            placeholder=\"\">\n                                    </div>\n                                </div>\n                            </div>\n                        </div>\n\n                        <div class=\"form-group row ml-2 mr-2\">\n                            <label class=\"col-xl-3 col-form-label\">Lexicalized Sense:</label>\n                            <div class=\"col-xl-9 card mt-0 p-0\"\n                                style=\"max-height: 10vh;overflow: auto; border: 1px solid rgba(0,0,0,.125) !important\">\n                                <div class=\"form-group row ml-2 mb-0 mt-0 mr-2\">\n                                    <label class=\"col-xl-6 col-form-label\">Lexical Sense</label>\n                                </div>\n                                <div class=\"form-group row ml-2 mb-0 mt-0 mr-2\">\n                                    <label class=\"col-xl-6 col-form-label\">Lexical Sense</label>\n                                </div>\n                                <div class=\"form-group row ml-2 mb-0 mt-0 mr-2\">\n                                    <label class=\"col-xl-6 col-form-label\">Lexical Sense</label>\n                                </div>\n                            </div>\n                        </div>\n\n                        <div class=\"form-group row ml-2 mr-2\">\n                            <label class=\"col-xl-3 col-form-label\">Is Evoked By:</label>\n                            <div class=\"col-xl-9 card mt-0 p-0\"\n                                style=\"max-height: 10vh;overflow: auto; border: 1px solid rgba(0,0,0,.125) !important\">\n                                <div class=\"form-group row ml-2 mb-0 mt-0 mr-2\">\n                                    <label class=\"col-xl-6 col-form-label\">Lexical Entry@LANG</label>\n                                </div>\n                                <div class=\"form-group row ml-2 mb-0 mt-0 mr-2\">\n                                    <label class=\"col-xl-6 col-form-label\">Lexical Entry@LANG</label>\n                                </div>\n                            </div>\n                        </div>\n\n                        <div class=\"form-group row ml-2 mr-2\">\n                            <label class=\"col-xl-3 col-form-label\">Narrower:</label>\n                            <div class=\"col-xl-9 card mt-0 p-0\"\n                                style=\"max-height: 10vh;overflow: auto; border: 1px solid rgba(0,0,0,.125) !important\">\n                                <div class=\"form-group row ml-2 mb-0 mt-0 mr-2\">\n                                    <label class=\"col-xl-6 col-form-label\">Lexical Concept</label>\n                                    <label class=\"col-xl-6 col-form-label\">Depth</label>\n                                </div>\n                            </div>\n                        </div>\n\n                        <div class=\"form-group row ml-2 mr-2\">\n                            <label class=\"col-xl-3 col-form-label\">Borader:</label>\n                            <div class=\"col-xl-9 card mt-0 p-0\"\n                                style=\"max-height: 10vh;overflow: auto; border: 1px solid rgba(0,0,0,.125) !important\">\n                                <div class=\"form-group row ml-2 mb-0 mt-0 mr-2\">\n                                    <label class=\"col-xl-6 col-form-label\">Lexical Concept</label>\n                                    <label class=\"col-xl-6 col-form-label\">Depth</label>\n                                </div>\n                            </div>\n                        </div>\n\n                    </div>\n                    \n                </div>\n            </div>\n        </div>\n    </div> -->\n</form>","/*\n   Copyright 2021-2022  Istituto di Linguistica Computazionale \"A. Zampolli\", Consiglio Nazionale delle Ricerche, Pisa, Italy.\n \nThis file is part of EpiLexo.\n\nEpiLexo is free software: you can redistribute it and/or modify it under the terms of the GNU General Public License as published by the Free Software Foundation, either version 3 of the License, or (at your option) any later version.\n\nEpiLexo is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for more details.\n\nYou should have received a copy of the GNU General Public License along with EpiLexo. If not, see <https://www.gnu.org/licenses/>.\n*/\n\nimport { Component, Input, OnInit, SimpleChanges } from '@angular/core';\nimport { Subscription } from 'rxjs';\nimport { LexicalEntriesService } from 'src/app/services/lexical-entries/lexical-entries.service';\nimport { DataService, Person } from '../../core-tab/lexical-entry-core-form/data.service';\n\nimport { FormBuilder, FormGroup, FormArray, FormControl } from '@angular/forms';\nimport { debounceTime } from 'rxjs/operators';\n\n@Component({\n  selector: 'app-sense-vartrans-form',\n  templateUrl: './sense-vartrans-form.component.html',\n  styleUrls: ['./sense-vartrans-form.component.scss']\n})\nexport class SenseVartransFormComponent implements OnInit {\n\n  switchInput = false;\n  subscription: Subscription;\n  object: any;\n  people: Person[] = [];\n  peopleLoading = false;\n  counter = 0;\n  componentRef: any;\n\n  @Input() senseData : any;\n\n  senseVartransForm = new FormGroup({\n    label: new FormControl(''),\n    translation: new FormArray([this.createTranslation()]),\n    senseTranslation: new FormArray([this.createSenseTranslation()]),\n    terminologicalRelation: new FormArray([this.createTerminologicalRelation()])\n  })\n\n  translation: FormArray;\n  senseTranslation: FormArray;\n  terminologicalRelation: FormArray;\n  terminologicalRelationSub : FormArray;\n\n  constructor(private dataService: DataService, private lexicalService: LexicalEntriesService, private formBuilder: FormBuilder) {\n  }\n\n  ngOnInit() {\n    \n    this.senseVartransForm = this.formBuilder.group({\n      label: '',\n      translation: this.formBuilder.array([this.createTranslation()]),\n      senseTranslation: this.formBuilder.array([this.createSenseTranslation()]),\n      terminologicalRelation: this.formBuilder.array([this.createTerminologicalRelation()])\n    })\n    this.onChanges();\n    this.loadPeople();\n    this.triggerTooltip();\n  }\n\n  ngOnChanges(changes: SimpleChanges) {\n    setTimeout(()=> {\n      if(this.object != changes.senseData.currentValue){\n        if(this.terminologicalRelation != null){\n          this.terminologicalRelation.clear();\n          this.senseTranslation.clear();\n          this.translation.clear();\n        }\n      }\n      this.loadPeople();\n      this.object = changes.senseData.currentValue;\n      if(this.object != null){\n        this.senseVartransForm.get('label').setValue(this.object.label, {emitEvent:false});\n      }\n      this.triggerTooltip();\n  }, 10)\n  }\n\n  triggerTooltip(){\n    setTimeout(() => {\n      //@ts-ignore\n      $('.vartrans-tooltip').tooltip({\n        trigger : 'hover'\n      });\n    }, 500);\n  }\n\n  private loadPeople() {\n    this.peopleLoading = true;\n    this.dataService.getPeople().subscribe(x => {\n      this.people = x;\n      this.peopleLoading = false;\n    });\n  }\n\n  onChanges(): void {\n    this.senseVartransForm.valueChanges.pipe(debounceTime(200)).subscribe(searchParams => {\n      //console.log(searchParams)\n    })\n  }\n\n  createTranslation(): FormGroup {\n    return this.formBuilder.group({\n      type: '',\n      confidence: 0.0,\n      target: ''\n    })\n  }\n\n  addTranslation() {\n    this.translation = this.senseVartransForm.get('translation') as FormArray;\n    this.translation.push(this.createTranslation());\n    this.triggerTooltip();\n  }\n\n  removeTranslation(index) {\n    this.translation = this.senseVartransForm.get('translation') as FormArray;\n    this.translation.removeAt(index);\n  }\n\n  addSenseTranslation() {\n    this.senseTranslation = this.senseVartransForm.get('senseTranslation') as FormArray;\n    this.senseTranslation.push(this.createSenseTranslation());\n    this.triggerTooltip();\n  }\n\n  removeSenseTranslation(index) {\n    this.senseTranslation = this.senseVartransForm.get('senseTranslation') as FormArray;\n    this.senseTranslation.removeAt(index);\n  }\n\n  addTerminologicalRelation() {\n    this.terminologicalRelation = this.senseVartransForm.get('terminologicalRelation') as FormArray;\n    this.terminologicalRelation.push(this.createTerminologicalRelation());\n    this.triggerTooltip();\n  }\n\n  removeTerminologicalRelation(index) {\n    this.terminologicalRelation = this.senseVartransForm.get('terminologicalRelation') as FormArray;\n    this.terminologicalRelation.removeAt(index);\n  }\n\n  addTerminologicalRelationSub(index) {\n    const control = (<FormArray>this.senseVartransForm.controls['terminologicalRelation']).at(index).get('sub_rel') as FormArray;\n    control.insert(index, this.createSubTerminologicalRelation())\n    this.triggerTooltip();\n  }\n\n  removeTerminologicalRelationSub(index, iy) {\n    const control = (<FormArray>this.senseVartransForm.controls['terminologicalRelation']).at(index).get('sub_rel') as FormArray;\n    control.removeAt(iy);\n  }\n\n  createSenseTranslation(): FormGroup {\n    return this.formBuilder.group({\n      relation: '',\n      entity: ''\n    })\n  }\n\n  createTerminologicalRelation(): FormGroup {\n    return this.formBuilder.group({\n      a_entity: '',\n      relation: '',\n      b_entity: '',\n      sub_rel: new FormArray([])\n    })\n  }\n\n  createSubTerminologicalRelation(): FormGroup {\n    return this.formBuilder.group({\n      sub_relation: 'eee',\n      sub_entity: ''\n    })\n  }\n}\n","\n\n<form [formGroup]=\"senseVartransForm\" *ngIf=\"object!=null\"> \n    <div class=\"form-group row ml-2 mt-3 mr-2\">\n        <label for=\"inputLabel\" class=\"col-xl-3 col-form-label\">Label:</label>\n        <div class=\"input-group col-xl-5\">\n            <input formControlName=\"label\" name=\"label\" type=\"text\" class=\"form-control\" placeholder=\"\">\n        </div>\n    </div>\n    \n    <!-- TRANSLATION -->\n    <div class=\"form-group row ml-2 mt-3 mr-2\">\n        <div class=\"input-group col-xl-12\">\n            <div class=\"card\">\n                <span class=\"text-id\"><b>TRANSLATION</b></span>\n                <a class=\"pointer\" (click)=\"addTranslation()\"><span class=\"collapse-icon\"><i class=\"fa fa-plus-square\"></i></span></a>\n\n                <div class=\"card-body\">\n                    <div formArrayName=\"translation\">\n                        <div *ngFor=\"let trans of senseVartransForm.get('translation')['controls']; let i = index\">\n                            <div class=\"form-group row ml-2 mt-3 mr-2\">\n                        \n                                <label for=\"inputLabel\" class=\"col-xl-3 mb-3 col-form-label \">Type:</label>\n                                <div class=\"input-group col-xl-5 mb-3\" [formGroupName]=\"i\">\n                                    <select class=\"form-control\" formControlName=\"type\" name=\"type\">\n                                        <option>Relations...</option>\n                                        <option>...</option>\n                                    </select>\n                                </div>\n                            </div>\n                            <div class=\"form-group row ml-2 mt-3 mr-2\">\n                                <label for=\"inputLabel\" class=\"col-xl-3 mb-3 col-form-label \">Confidence:</label>\n                                <div class=\"input-group col-xl-2 mb-3\" [formGroupName]=\"i\">\n                                    <input formControlName=\"confidence\" name=\"confidence\" type=\"number\" step=\"0.1\" min=\"0\" max=\"10\" class=\"form-control\" placeholder=\"\">\n                                </div>\n                            </div>\n                            \n                            <div class=\"form-group row ml-2 mt-3 mr-2\">\n                                <label for=\"inputLabel\" class=\"col-xl-3 mb-3 col-form-label \">Target:</label>\n                                <div class=\"input-group col-xl-9\" *ngIf=\"{switch : false}; let variable\" [formGroupName]=\"i\">\n                                    <ng-select formControlName=\"target\" name=\"target\" [items]=\"people\" bindValue=\"name\" bindLabel=\"name\" placeholder=\"Search entity\" appendTo=\"body\"\n                                        [loading]=\"peopleLoading\" *ngIf=\"!variable.switch\">\n                                    </ng-select>\n                                    <input formControlName=\"target\" name=\"target\" type=\"text\" class=\"form-control\" placeholder=\"Insert URI\" *ngIf=\"variable.switch\">\n                                    <div class=\"input-group-append ml-3 form-check\">\n                                        <input class=\"form-check-input vartrans-tooltip\" type=\"checkbox\" (change)=\"variable.switch=!variable.switch\" data-toggle=\"tooltip\" data-placement=\"bottom\" data-trigger=\"hover\" title=\"Clicca per inserire un URI manualmente\">\n                                    </div>\n                                    <div class=\"input-group-append ml-2\">\n                                        <button class=\"btn btn-primary\" type=\"button\" (click)=\"modalRoot.show()\"><i\n                                                class=\"fa fa-external-link-alt\" ></i></button>\n                                                <app-modal #modalRoot class=\"modal-demo\" [maximizable]=\"true\" [backdrop]=\"false\">\n                                                    <ng-container class=\"app-modal-header\">Demo modal</ng-container>\n                                                    <ng-container class=\"app-modal-body\">\n                                                        <h3>MODAL DIALOG</h3>\n                                                        <p>Lorem Ipsum is simply dummy text of the printing and typesetting industry.\n                                                            Lorem Ipsum has been the industrys standard dummy text ever since the 1500s.</p>\n                                                    </ng-container>\n                                                    <ng-container class=\"app-modal-footer\">\n                                                        <button type=\"button\" class=\"button button3\" (click)=\"modalRoot.hide()\">Delete</button>\n                                                        <button type=\"button\" class=\"button button1\" (click)=\"modalRoot.hide()\">Save</button>\n                                                        <button type=\"button\" class=\"button button2\" style=\"float: right;\"\n                                                            (click)=\"modalRoot.hide()\">Close\n                                                        </button>\n                                                    </ng-container>\n                                                </app-modal>\n                                    </div>\n                                    <div class=\"input-group-append ml-2\">\n                                        <button (click)=\"removeTranslation(i)\" class=\"btn btn-danger\" type=\"button\"><i class=\"fa fa-trash-alt\"></i></button>\n                                    </div>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                    \n                </div>\n            </div>\n        </div>\n    </div>\n\n    <!-- SENSE RELATION DIRECT -->\n    <div class=\"form-group row ml-2 mt-3 mr-2\">\n        <div class=\"input-group col-xl-12\">\n            <div class=\"card\">\n                <span class=\"text-id\"><b>SENSE RELATION</b><span class=\"badge badge-primary ml-2\">DIRECT</span></span>\n                <a (click)=\"addSenseTranslation()\" class=\"pointer\"><span class=\"collapse-icon\"><i class=\"fa fa-plus-square\"></i></span></a>\n\n                <div class=\"card-body\">\n                    <div class=\"form-group row ml-2 mt-3 mr-2\" formArrayName=\"senseTranslation\" *ngFor=\"let direct of senseVartransForm.get('senseTranslation')['controls']; let i = index\">\n                        <div class=\"col-xl-5\" [formGroupName]=\"i\">\n                            <select class=\"form-control\" formControlName=\"relation\" name=\"relation\">\n                                <option>Relations...</option>\n                                <option>...</option>\n                            </select>\n                        </div>\n                        <div class=\"input-group col-xl-7\" *ngIf=\"{switch : false}; let variable\" [formGroupName]=\"i\">\n                            <ng-select formControlName=\"entity\" name=\"entity\" [items]=\"people\" bindValue=\"name\" bindLabel=\"name\" placeholder=\"Search entity\" appendTo=\"body\"\n                                [loading]=\"peopleLoading\" *ngIf=\"!variable.switch\">\n                            </ng-select>\n                            <input formControlName=\"entity\" name=\"entity\" type=\"text\" class=\"form-control\" placeholder=\"Insert URI\" *ngIf=\"variable.switch\">\n                            <div class=\"input-group-append ml-3 form-check\">\n                                <input class=\"form-check-input vartrans-tooltip\" type=\"checkbox\" (change)=\"variable.switch=!variable.switch\" data-toggle=\"tooltip\" data-placement=\"bottom\" data-trigger=\"hover\" title=\"Clicca per inserire un URI manualmente\">\n                            </div>\n                            <div class=\"input-group-append ml-2\">\n                                <button class=\"btn btn-primary\" type=\"button\"><i\n                                        class=\"fa fa-external-link-alt\" (click)=\"modalRoot.show()\"></i></button>\n                                <app-modal #modalRoot class=\"modal-demo\" [maximizable]=\"true\" [backdrop]=\"false\">\n                                    <ng-container class=\"app-modal-header\">Demo modal</ng-container>\n                                    <ng-container class=\"app-modal-body\">\n                                        <h3>MODAL DIALOG</h3>\n                                        <p>Lorem Ipsum is simply dummy text of the printing and typesetting industry.\n                                            Lorem Ipsum has been the industrys standard dummy text ever since the 1500s.</p>\n                                    </ng-container>\n                                    <ng-container class=\"app-modal-footer\">\n                                        <button type=\"button\" class=\"button button3\" (click)=\"modalRoot.hide()\">Delete</button>\n                                        <button type=\"button\" class=\"button button1\" (click)=\"modalRoot.hide()\">Save</button>\n                                        <button type=\"button\" class=\"button button2\" style=\"float: right;\"\n                                            (click)=\"modalRoot.hide()\">Close\n                                        </button>\n                                    </ng-container>\n                                </app-modal>\n                            </div>\n                            <div class=\"input-group-append ml-2\">\n                                <button (click)=\"removeSenseTranslation(i)\" class=\"btn btn-danger\" type=\"button\"><i class=\"fa fa-trash-alt\"></i></button>\n                            </div>\n                        </div>\n                    </div>\n                   \n                </div>\n            </div>\n        </div>\n    </div>\n\n\n    <!-- TERMINOLOGICAL RELATION INDIRECT -->\n    <div class=\"form-group row ml-2 mt-3 mr-2\">\n        <div class=\"input-group col-xl-12\">\n            <div class=\"card\">\n                <span class=\"text-id\"><b>TERMINOLOGICAL RELATION</b><span class=\"badge badge-primary ml-2\">INDIRECT</span></span>\n                <a class=\"pointer\" (click)=\"addTerminologicalRelation()\"><span class=\"collapse-icon\"><i class=\"fa fa-plus-square\"></i></span></a>\n                <div class=\"card-body\">\n                    <div formArrayName=\"terminologicalRelation\">\n                        <div *ngFor=\"let indirect of senseVartransForm['controls'].terminologicalRelation['controls']; let i = index\">\n                            <div [formGroupName]=\"i\">\n                                <div class=\"form-group row ml-2 mt-3 mr-2\">\n                                    <div class=\"col-xl-3\">\n                                        <input type=\"text\" class=\"form-control\" formControlName=\"a_entity\" name=\"a_entity\">\n                                    </div>\n                                    <div class=\"col-xl-3\">\n                                        <select class=\"form-control\" formControlName=\"relation\" name=\"relation\">\n                                            <option>Relation</option>\n                                            <option>...</option>\n                                        </select>\n                                    </div>\n                                    <div class=\"input-group col-xl-6\" *ngIf=\"{switch : false}; let variable\">\n                                        <ng-select formControlName=\"b_entity\" name=\"b_entity\" [items]=\"people\" class=\"resizeNgSelect\" bindValue=\"name\" bindLabel=\"name\" placeholder=\"Search entity\" appendTo=\"body\"\n                                            [loading]=\"peopleLoading\" *ngIf=\"!variable.switch\">\n                                        </ng-select>\n                                        <input formControlName=\"b_entity\" name=\"b_entity\" type=\"text\" class=\"form-control\" placeholder=\"Insert URI\" *ngIf=\"variable.switch\">\n                                        <div class=\"input-group-append ml-3 form-check\">\n                                            <input class=\"form-check-input vartrans-tooltip\" type=\"checkbox\" (change)=\"variable.switch=!variable.switch\" data-toggle=\"tooltip\" data-placement=\"bottom\" data-trigger=\"hover\" title=\"Clicca per inserire un URI manualmente\">\n                                        </div>\n                                        <div class=\"input-group-append ml-2\">\n                                            <button class=\"btn btn-primary\" type=\"button\"><i\n                                                    class=\"fa fa-external-link-alt\"></i></button>\n                                        </div>\n                                        <div class=\"input-group-append ml-2\">\n                                            <button (click)=\"removeTerminologicalRelation(i)\" class=\"btn btn-danger\" type=\"button\"><i class=\"fa fa-trash-alt\"></i></button>\n                                        </div>\n                                        <div class=\"input-group-append ml-2\">\n                                            <button (click)=\"addTerminologicalRelationSub(i)\" class=\"btn btn-outline-primary\" type=\"button\"><i class=\"fa fa-plus\"></i></button>\n                                        </div>\n                                    </div>\n                                </div>\n                                <div formArrayName=\"sub_rel\">\n                                    <div *ngFor=\"let sub of indirect['controls'].sub_rel['controls']; let j = index\">\n                                        <div [formGroupName]=\"j\">\n                                            <div class=\"form-group row ml-2 mt-3 mr-2\">\n                                                <div class=\"col-xl-3\" ></div>\n                                                <div class=\"col-xl-3\">\n                                                    <select class=\"form-control\" formControlName=\"sub_relation\" name=\"sub_relation\">\n                                                        <option>{{sub.value['sub_relation']}}</option>\n                                                        <option>...</option>\n                                                    </select>\n                                                </div>\n                                                <div class=\"input-group col-xl-6\" *ngIf=\"{switch : false}; let variable\">\n                                                    <ng-select formControlName=\"sub_entity\" name=\"sub_entity\" [items]=\"people\" class=\"resizeNgSelect\" bindLabel=\"name\" bindValue=\"name\" placeholder=\"Search entity\" appendTo=\"body\"\n                                                        [loading]=\"peopleLoading\" *ngIf=\"!variable.switch\">\n                                                    </ng-select>\n                                                    <input formControlName=\"sub_entity\" name=\"sub_entity\" type=\"text\" class=\"form-control\" id=\"inputDenotes\" placeholder=\"Insert URI\" *ngIf=\"variable.switch\">\n                                                    <div class=\"input-group-append ml-3 form-check\">\n                                                        <input class=\"form-check-input vartrans-tooltip\" type=\"checkbox\" (change)=\"variable.switch=!variable.switch\" data-toggle=\"tooltip\" data-placement=\"bottom\" data-trigger=\"hover\" title=\"Clicca per inserire un URI manualmente\">\n                                                    </div>\n                                                    <div class=\"input-group-append ml-2\">\n                                                        <button class=\"btn btn-primary\" type=\"button\"><i\n                                                                class=\"fa fa-external-link-alt\"></i></button>\n                                                    </div>\n                                                    <div class=\"input-group-append ml-2\">\n                                                        <button (click)=\"removeTerminologicalRelationSub(i, j)\" class=\"btn btn-danger\" type=\"button\"><i class=\"fa fa-trash-alt\"></i></button>\n                                                    </div>\n                                                    <div class=\"input-group-append ml-2\">\n                                                        <button  class=\"btn btn-outline-primary invisible\" type=\"button\"><i class=\"fa fa-plus\"></i></button>\n                                                    </div>\n                                                </div>\n                                            </div>\n                                        </div>\n                                    </div>\n                                </div>\n                            </div>\n                        </div>  \n                    </div>           \n                </div>\n            </div>\n        </div>\n    </div>\n\n    <!-- SHOW INFERENCE -->\n    <!-- <div class=\"form-group row ml-2 mt-3 mr-2 inference\">\n        <div class=\"input-group col-xl-12\">\n            <div class=\"card\">\n                <span class=\"text-id\"><a data-toggle=\"collapse\" href=\"#inferenceCollapse\" role=\"button\" aria-expanded=\"false\" aria-controls=\"inferenceCollapse\"><span class=\"badge badge-warning\"><b style=\"color: white; font-size: 12px;\">SHOW INFERENCE</b></span></a></span>\n                <div class=\"card-body\">\n                    <div class=\"collapse\" id=\"inferenceCollapse\">\n\n                        <div class=\"form-group row ml-2 mr-2\">\n                            <label class=\"col-xl-3 col-form-label\">Lexicalized Sense:</label>\n                            <div class=\"col-xl-9 card mt-0 p-0\" style=\"max-height: 10vh;overflow: auto; border: 1px solid rgba(0,0,0,.125) !important\">    \n                                <div class=\"form-group row ml-2 mb-0 mt-0 mr-2\">\n                                    <label class=\"col-xl-6 col-form-label\">Lexical Sense</label>\n                                </div>      \n                                <div class=\"form-group row ml-2 mb-0 mt-0 mr-2\">\n                                    <label class=\"col-xl-6 col-form-label\">Lexical Sense</label>\n                                </div>        \n                                <div class=\"form-group row ml-2 mb-0 mt-0 mr-2\">\n                                    <label class=\"col-xl-6 col-form-label\">Lexical Sense</label>\n                                </div>  \n                            </div>\n                        </div>\n\n                        <div class=\"form-group row ml-2 mr-2\">\n                            <label class=\"col-xl-3 col-form-label\">Is Evoked By:</label>\n                            <div class=\"col-xl-9 card mt-0 p-0\" style=\"max-height: 10vh;overflow: auto; border: 1px solid rgba(0,0,0,.125) !important\">    \n                                <div class=\"form-group row ml-2 mb-0 mt-0 mr-2\">\n                                    <label class=\"col-xl-6 col-form-label\">Lexical Entry@LANG</label>\n                                </div> \n                                <div class=\"form-group row ml-2 mb-0 mt-0 mr-2\">\n                                    <label class=\"col-xl-6 col-form-label\">Lexical Entry@LANG</label>\n                                </div>          \n                            </div>\n                        </div>\n\n                        <div class=\"form-group row ml-2 mr-2\">\n                            <label class=\"col-xl-3 col-form-label\">Narrower:</label>\n                            <div class=\"col-xl-9 card mt-0 p-0\" style=\"max-height: 10vh;overflow: auto; border: 1px solid rgba(0,0,0,.125) !important\">    \n                                <div class=\"form-group row ml-2 mb-0 mt-0 mr-2\">\n                                    <label class=\"col-xl-6 col-form-label\">Lexical Concept</label>\n                                    <label class=\"col-xl-6 col-form-label\">Depth</label>\n                                </div>           \n                            </div>\n                        </div>\n                        \n                        <div class=\"form-group row ml-2 mr-2\">\n                            <label class=\"col-xl-3 col-form-label\">Borader:</label>\n                            <div class=\"col-xl-9 card mt-0 p-0\" style=\"max-height: 10vh;overflow: auto; border: 1px solid rgba(0,0,0,.125) !important\">    \n                                <div class=\"form-group row ml-2 mb-0 mt-0 mr-2\">\n                                    <label class=\"col-xl-6 col-form-label\">Lexical Concept</label>\n                                    <label class=\"col-xl-6 col-form-label\">Depth</label>\n                                </div>           \n                            </div>\n                        </div>\n                        \n                    </div>\n                </div>\n            </div>\n        </div>\n    </div> -->\n</form>","/*\n   Copyright 2021-2022  Istituto di Linguistica Computazionale \"A. Zampolli\", Consiglio Nazionale delle Ricerche, Pisa, Italy.\n \nThis file is part of EpiLexo.\n\nEpiLexo is free software: you can redistribute it and/or modify it under the terms of the GNU General Public License as published by the Free Software Foundation, either version 3 of the License, or (at your option) any later version.\n\nEpiLexo is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for more details.\n\nYou should have received a copy of the GNU General Public License along with EpiLexo. If not, see <https://www.gnu.org/licenses/>.\n*/\n\nimport { Component, ElementRef, Input, OnChanges, OnInit, SimpleChanges, ViewChild } from '@angular/core';\nimport { ModalComponent } from 'ng-modal-lib';\nimport { ToastrService } from 'ngx-toastr';\nimport { Subject } from 'rxjs';\nimport { debounceTime } from 'rxjs/operators';\nimport { AnnotatorService } from 'src/app/services/annotator/annotator.service';\nimport { BibliographyService } from 'src/app/services/bibliography-service/bibliography.service';\nimport { ExpanderService } from 'src/app/services/expander/expander.service';\nimport { LexicalEntriesService } from 'src/app/services/lexical-entries/lexical-entries.service';\n\n@Component({\n  selector: 'app-attestation-panel',\n  templateUrl: './attestation-panel.component.html',\n  styleUrls: ['./attestation-panel.component.scss']\n})\nexport class AttestationPanelComponent implements OnInit,OnChanges {\n\n  @Input() attestationData: any;\n  @ViewChild('addBibliographyAttestation', {static: false}) modal: ModalComponent;\n  @ViewChild('table_body') tableBody: ElementRef;\n  bibliography = [];\n  private update_anno_subject: Subject<any> = new Subject();\n  private update_biblio_anno_subject: Subject<any> = new Subject();\n  private searchSubject : Subject<any> = new Subject();\n\n  start = 0;\n  sortField = 'title';\n  direction = 'asc';\n  memorySort = {field : '', direction : ''}\n  queryTitle = '';\n  queryMode = 'titleCreatorYear';\n  selectedItem;\n  selectedAnnotation;\n  fileId;\n\n  constructor(private toastr: ToastrService, private biblioService : BibliographyService, private expander: ExpanderService, private annotatorService : AnnotatorService, private lexicalService : LexicalEntriesService) { }\n  \n  \n  formData = [];\n  ngOnInit(): void {\n\n    this.annotatorService.getIdText$.subscribe(\n      data=>{\n        console.log(data);\n        this.fileId = data;\n      },error=>{\n        console.log(error)\n      }\n    )\n\n    this.update_anno_subject.pipe(debounceTime(1000)).subscribe(\n      data => {\n        if(data != null){\n          this.updateAnnotation(data)\n        }\n      }\n    )\n    \n\n    this.update_biblio_anno_subject.pipe(debounceTime(100)).subscribe(\n      data => {\n        if(data != null){\n          this.updateBiblioAnnotation(data)\n        }\n      }\n    )\n\n    this.biblioService.bootstrapData(this.start, this.sortField, this.direction).subscribe(\n      data=> {\n        this.memorySort = {field : this.sortField, direction : this.direction}\n        this.bibliography = data;\n        this.bibliography.forEach(element => {\n          element['selected'] = false;\n        })\n        \n        \n        //@ts-ignore\n        $('#biblioModalAnnotation').modal('hide');\n        $('.modal-backdrop').remove();\n      },error=>{\n        console.log(error)\n      }\n    )\n\n    this.searchSubject.pipe(debounceTime(1000)).subscribe(\n      data => {\n        this.queryTitle  = data.query;\n        data.queryMode ? this.queryMode = 'everything' : this.queryMode = 'titleCreatorYear';\n        this.searchBibliography(this.queryTitle, this.queryMode);\n      }\n    )\n  }\n  \n\n  ngOnChanges(changes: SimpleChanges) { \n    \n    console.log(changes)\n    if(changes.attestationData.currentValue != null){\n      setTimeout(() => {\n\n        if(changes.attestationData.currentValue != this.formData){\n          this.formData = [];\n          this.selectedItem = null;\n          this.selectedAnnotation = null;\n        }\n        this.formData = changes.attestationData.currentValue;\n        console.log(this.formData)\n        if(this.formData.length == 0){\n          this.lexicalService.triggerAttestationPanel(false)\n        }\n        \n      }, 10);\n      \n    }else{\n      this.formData = [];\n      this.selectedItem = null;\n      this.selectedAnnotation = null;\n    }\n  }\n\n  cancelAttestation(index, id, node_id){\n    this.formData.splice(index,1);\n    this.annotatorService.deleteAnnotationRequest(id, node_id);\n    this.annotatorService.deleteAnnotation(id).subscribe(\n      data=> {\n        console.log(data);\n        this.toastr.success('Attestation deleted correctly', 'Info', {\n          timeOut : 5000\n        })\n      },error => {\n        console.log(error);\n        this.toastr.error('Error on deleting attestation', 'Error', {\n          timeOut : 5000\n        })\n      }\n    );\n    if(this.formData.length == 0){\n      this.lexicalService.triggerAttestationPanel(false);\n      //this.lexicalService.sendToCoreTab(null);\n      /* this.expander.openCollapseEdit(false);\n      this.expander.expandCollapseEdit(false);\n\n      this.expander.openCollapseEpigraphy(true);\n      this.expander.expandCollapseEpigraphy(true); */\n    }\n  }\n\n  triggerUpdateAttestation(evt, newValue, propKey, annotation){\n    this.update_anno_subject.next({event : evt, newValue : newValue, propKey: propKey, annotation : annotation})\n  }\n\n  debounceKeyup(value, annotation, index, field){\n    this.update_biblio_anno_subject.next({v: value, a: annotation, i: index, f: field})\n  }\n\n  updateAnnotation(data){\n    if(data !=null){\n      let id_annotation = data?.annotation?.id;\n      let newValue = data?.newValue;\n      let property = data?.propKey;\n\n      let annotation = data?.annotation; \n\n      annotation.attributes[property] = newValue;\n\n      this.annotatorService.updateAnnotation(annotation).subscribe(\n        data=> {\n          console.log(data);\n          this.toastr.success('Attestation updated correctly', 'Info', {\n            timeOut : 5000\n          })\n        },error => {\n          console.log(error);\n          this.toastr.error('Error on updating attestation', 'Error', {\n            timeOut : 5000\n          })\n        }\n      )\n\n    } \n  }\n\n  updateBiblioAnnotation(data){\n    if(data != null){\n      console.log(data);\n\n      let id_annotation = data?.a.id;\n      let newValue = data?.v;\n      let index = data?.i;\n      let field = data?.f;\n\n      this.formData.forEach(\n        element=>{\n          if(element.id == id_annotation){\n            element.attributes.bibliography[index][field] = newValue;\n          }\n        }\n      )\n      let annotation = data?.a;\n      console.log(annotation)\n      this.annotatorService.updateAnnotation(annotation).subscribe(\n        data=> {\n          console.log(data);\n          this.toastr.success('Attestation updated correctly', 'Info', {\n            timeOut : 5000\n          })\n        },error => {\n          console.log(error);\n          this.toastr.error('Error on updating attestation', 'Error', {\n            timeOut : 5000\n          })\n        }\n      )\n      \n    }\n  }\n\n  getForm(formId){\n    \n    this.lexicalService.getFormData(formId, 'core').subscribe(\n      data=>{\n        console.log(data);\n        this.lexicalService.sendToCoreTab(data)\n        this.lexicalService.sendToEtymologyTab(null);\n        this.lexicalService.sendToRightTab(data);\n        this.lexicalService.updateLexCard({lastUpdate : data['lastUpdate'], creationDate : data['creationDate']});\n        \n        if(this.expander.isEpigraphyTabOpen() && !this.expander.isEditTabOpen()){\n          if(this.expander.isEpigraphyTabExpanded() && !this.expander.isEditTabExpanded()){\n            this.expander.openCollapseEdit(true);\n            this.expander.expandCollapseEpigraphy(false)\n          }\n        }\n        \n        var text_detail = document.querySelectorAll('#text-dettaglio');\n        text_detail.forEach(element => {\n          if(!element.classList.contains('show')){\n            element.classList.add('show')\n          }\n        })\n      },\n      error=>{\n        console.log(error)\n      }\n    )\n  }\n\n  showBiblioModal(item){\n    this.selectedAnnotation = item;\n    this.modal.show();\n  }\n\n  checkIfCreatorExist(item?){\n    return item.some(element => element.creatorType === 'author')\n  }\n\n  selectItem(evt, i){\n    /* console.log(evt, i); */\n    if(evt.shiftKey){\n\n    }\n    this.bibliography.forEach(element=> {\n      if(element.key == i.key){\n        element.selected = !element.selected;\n        element.selected ? this.selectedItem = element : this.selectedItem = null;\n        return true;\n      }else{\n        element.selected = false;\n        return false;\n      }\n    })\n    \n  }\n\n  onCloseModal(){\n    this.selectedItem = null;\n    this.start = 0;\n    this.sortField = 'title';\n    this.direction = 'asc';\n    this.tableBody.nativeElement.scrollTop = 0;\n    this.memorySort = { field: this.sortField, direction: this.direction}\n    this.biblioService.bootstrapData(this.start, this.sortField, this.direction).subscribe(\n      data=> {\n        this.bibliography = data;\n        this.bibliography.forEach(element => {\n          element['selected'] = false;\n        }) \n                \n       \n      },error=>{\n        console.log(error)\n      }\n    );\n  }\n\n  onScrollDown(){\n    //@ts-ignore\n    $(\"#biblioModalAnnotation\").modal(\"show\");\n    $('.modal-backdrop').appendTo('.table-body');\n    //@ts-ignore\n    $('#biblioModalAnnotation').modal({backdrop: 'static', keyboard: false})  \n    $('.modal-backdrop').appendTo('.table-body');\n    $('body').removeClass(\"modal-open\")\n    $('body').css(\"padding-right\", \"\");\n\n    this.start += 25;\n    \n    if(this.queryTitle != ''){\n      this.biblioService.filterBibliography(this.start, this.sortField, this.direction, this.queryTitle, this.queryMode).subscribe(\n        data=>{\n          console.log(data)\n          //@ts-ignore\n          $('#biblioModalAnnotation').modal('hide');\n          $('.modal-backdrop').remove();\n          data.forEach(element => {\n            this.bibliography.push(element)\n          });\n        },error=>{\n          console.log(error)\n        }\n      )\n    }else{\n      this.biblioService.filterBibliography(this.start, this.sortField, this.direction, this.queryTitle, this.queryMode).subscribe(\n        data=> {\n          \n          data.forEach(element => {\n            this.bibliography.push(element)\n          });\n                  \n          //@ts-ignore\n          $('#biblioModalAnnotation').modal('hide');\n          $('.modal-backdrop').remove();\n        },error=>{\n          console.log(error)\n        }\n      );\n    }\n\n    \n  }\n\n  addBibliographyItem(item?){\n    //@ts-ignore\n    $(\"#biblioModalAnnotation\").modal(\"show\");\n    $('.modal-backdrop').appendTo('.ui-modal');\n    //@ts-ignore\n    $('#biblioModalAnnotation').modal({backdrop: 'static', keyboard: false})  \n    \n    $('.modal-backdrop').css('height', 'inherit');\n    $('body').removeClass(\"modal-open\")\n    $('body').css(\"padding-right\", \"\");\n\n    let instance = '';\n    /* if(this.object.lexicalEntryInstanceName != undefined\n      && this.object.lexicalEntryInstanceName.senseInstanceName == undefined){\n        instance = this.object.lexicalEntryInstanceName;\n    }else if(this.object.formInstanceName != undefined){\n      instance = this.object.formInstanceName;\n    }else if(this.object.senseInstanceName != undefined){\n      instance = this.object.senseInstanceName;\n    } */\n\n    if(item != undefined){\n\n      let id = item.data.key != undefined ? item.data.key : '';\n      let title = item.data.title != undefined ? item.data.title : '';\n      let author;\n      \n      item.data.creators.forEach(element => {\n        if(element.creatorType == 'author'){\n          author = element.lastName + ' ' + element.firstName;\n          return true;\n        }else{\n          return false;\n        }\n      });\n      author = author != undefined ? author : ''\n      let date = item.data.date != undefined ? item.data.date : '';\n      let url = item.data.url != undefined ? item.data.url : ''\n      let seeAlsoLink = '';\n\n      item.data['note'] = \"\";;\n      item.data['textualRef'] = \"\";\n\n      let parameters = {\n        id : id,\n        title: title,\n        author: author,\n        date: date,\n        url: url,\n        seeAlsoLink: seeAlsoLink\n      }\n\n      console.log(item, this.selectedAnnotation);\n      this.modal.hide();\n\n     let anno_id = this.selectedAnnotation.id;\n\n      this.formData.forEach(\n        attestation => {\n          if(attestation.id == anno_id){\n            console.log(attestation)\n            attestation?.attributes?.bibliography.push(item?.data)\n          }\n        }\n      );\n\n      this.annotatorService.updateAnnotation(this.selectedAnnotation).subscribe(\n        data=>{\n          console.log(data);\n          //@ts-ignore\n          $('#biblioModalAnnotation').modal('hide');\n          $('.modal-backdrop').remove();\n\n          this.modal.hide();\n\n          this.toastr.success('Item added correctly', 'Info', {\n            timeOut : 5000\n          })\n\n        },error=>{\n          console.log(error);\n          //@ts-ignore\n          $('#biblioModalAnnotation').modal('hide');\n          $('.modal-backdrop').remove();\n\n          this.modal.hide();\n\n          this.toastr.error('Error on adding item', 'Info', {\n            timeOut : 5000\n          })\n\n        }\n      )\n      /* this.annotatorService.updateAnnotation() */\n      /*       \n      this.lexicalService.addBibliographyData(instance, parameters).subscribe(\n        data=>{\n          console.log(data);\n          setTimeout(() => {\n            //@ts-ignore\n            $('#biblioModal').modal('hide');\n            $('.modal-backdrop').remove();\n            this.toastr.success('Item added, check bibliography panel', '', {\n              timeOut: 5000,\n            });\n            this.biblioService.triggerPanel(data)\n            setTimeout(() => {\n              this.modal.hide();\n            }, 10);\n          }, 300);\n          this.biblioService.sendDataToBibliographyPanel(data);\n        },error=>{\n          console.log(error)\n          if(typeof(error.error) == 'string' && error.error.length < 1000){\n            this.toastr.error(error.error, '', {\n              timeOut: 5000,\n            });\n          }else{\n            this.toastr.error(error.statusText, '', {\n              timeOut: 5000,\n            });\n          }\n          \n          setTimeout(() => {\n            //@ts-ignore\n            $('#biblioModal').modal('hide');\n            $('.modal-backdrop').remove();\n\n            setTimeout(() => {\n              this.modal.hide();\n            }, 10);\n          }, 300);\n          \n        }\n      ) */\n    }\n    \n  }\n\n  sortBibliography(evt?, val?){\n    \n    \n    if(this.memorySort.field == val){\n      if(this.direction == 'asc'){\n        this.direction = 'desc'\n        this.memorySort.direction = 'desc';\n      }else{\n        this.direction = 'asc';\n        this.memorySort.direction = 'asc';\n      }\n    }else{\n      this.sortField = val;\n      this.direction = 'asc';\n      this.memorySort = {field : this.sortField, direction : this.direction};\n    }\n\n    //@ts-ignore\n    $(\"#biblioModalAnnotation\").modal(\"show\");\n    $('.modal-backdrop').appendTo('.table-body');\n    //@ts-ignore\n    $('#biblioModalAnnotation').modal({backdrop: 'static', keyboard: false})  \n    $('.modal-backdrop').appendTo('.table-body');\n    $('body').removeClass(\"modal-open\")\n    $('body').css(\"padding-right\", \"\");\n    this.start = 0;\n    this.tableBody.nativeElement.scrollTop = 0;\n\n    this.biblioService.filterBibliography(this.start, this.sortField, this.direction, this.queryTitle, this.queryMode).subscribe(\n      data=>{\n        console.log(data)\n        this.bibliography = [];\n        //@ts-ignore\n        $('#biblioModalAnnotation').modal('hide');\n        $('.modal-backdrop').remove();\n        data.forEach(element => {\n          this.bibliography.push(element)\n        });\n      },error=>{\n        console.log(error)\n      }\n    )\n    \n  }\n\n  removeItem(item, j) {\n    console.log(item, j)\n    \n    this.formData.forEach(\n      annotation=>{\n        if(item?.id == annotation.id){\n          annotation.attributes.bibliography.splice(j, 1)\n        }\n      }\n    )\n\n    this.annotatorService.updateAnnotation(item).subscribe(\n      data=>{\n        console.log(data)\n        this.toastr.success('Attestation removed correctly', 'Info', {\n          timeOut : 5000\n        })\n      },\n      error=>{\n        console.log(error)\n        this.toastr.error('Error on removing attestation', 'Error', {\n          timeOut : 5000\n        })\n      }\n    )\n    console.log(this.formData, item)\n  }\n\n  triggerSearch(evt, query, queryMode) {\n    if(evt.key != 'Control' && evt.key != 'Shift' && evt.key != 'Alt'){\n      this.searchSubject.next({query, queryMode})\n    }\n  }\n  \n  searchBibliography(query?:string, queryMode?:any){\n    this.start = 0;\n    this.selectedItem = null;\n    //@ts-ignore\n    $(\"#biblioModalAnnotation\").modal(\"show\");\n    $('.modal-backdrop').appendTo('.table-body');\n    //@ts-ignore\n    $('#biblioModalAnnotation').modal({backdrop: 'static', keyboard: false})  \n    $('body').removeClass(\"modal-open\")\n    $('body').css(\"padding-right\", \"\");\n    this.tableBody.nativeElement.scrollTop = 0;\n    if(this.queryTitle != ''){\n      this.biblioService.filterBibliography(this.start, this.sortField, this.direction, this.queryTitle, this.queryMode).subscribe(\n        data => {\n          console.log(data);\n          this.bibliography = [];\n          data.forEach(element => {\n            this.bibliography.push(element)\n          });\n          //@ts-ignore\n          $('#biblioModalAnnotation').modal('hide');\n          $('.modal-backdrop').remove();\n        },\n        error => {\n          console.log(error)\n        }\n      )\n    }else{\n      this.biblioService.filterBibliography(this.start, this.sortField, this.direction, this.queryTitle, this.queryMode).subscribe(\n        data => {\n          console.log(data);\n          this.bibliography = [];\n          data.forEach(element => {\n            this.bibliography.push(element)\n          });\n          //@ts-ignore\n          $('#biblioModalAnnotation').modal('hide');\n          $('.modal-backdrop').remove();\n        },\n        error => {\n          console.log(error)\n        }\n      )\n    }\n  }\n}\n","\n\n<div class=\"card\">\n    <div class=\"card-header\" id=\"attestationHeading\">\n        <h5 class=\"mb-0\">\n            <a class=\"btn btn-link w-100 d-flex align-self-center collapsed \" data-toggle=\"collapse\"\n                data-target=\"#attestationCollapse\" aria-expanded=\"true\" aria-controls=\"attestationCollapse\">\n                Attestation Panel<i class=\"fa ml-auto\"></i>\n            </a>\n        </h5>\n    </div>\n    <div id=\"attestationCollapse\" class=\"collapse\" aria-labelledby=\"attestationHeading\">\n        <div class=\"card-body\">\n            <div *ngIf=\"formData != null\">\n                <div class=\"card mb-4 pt-4\" *ngFor=\"let item of formData; let i = index\">\n                    <a class=\"attestationCollapse\" data-toggle=\"collapse\" [attr.data-target]=\"'#attestation_collapse-'+i\"\n                        aria-expanded=\"true\" [attr.aria-controls]=\"'#attestation_collapse-'+i\"><span class=\"text-id pointer\"><b\n                                class=\"badge badge-primary\">{{fileId}} - {{item?.attributes.label != undefined ? item?.attributes.label : ''}}</b></span></a>\n                   \n                    <a (click)=\"getForm(item?.attributes.form_id)\" class=\"pointer\"><span class=\"external-icon\"><i class=\"fa fa-external-link-alt\"></i></span></a>\n                    <a (click)=\"cancelAttestation(i, item?.id, item?.attributes.node_id)\" class=\"pointer\"><span class=\"trash-icon\"><i class=\"fa fa-trash\"></i></span></a>\n    \n                    <div [id]=\"'attestation_collapse-'+i\" class=\"collapse\" >\n                        <div class=\"card-body\" style=\"max-height: 15rem;  overflow: auto;  \">\n                            <!-- <div class=\"form-group row ml-2 mr-2 mb-0\">\n                                <label for=\"inputLabel\" class=\"col-lg-4 pl-0 pr-0 col-form-label\">URI:</label>\n                                <div class=\"input-group col-lg-8 pl-0 pr-0\">\n                                    <span class=\"font-italic overflow-auto p-1\">{{item?.value}}</span>\n                                </div>\n                            </div> -->\n                            \n                            <div class=\"form-group row ml-2 mr-2 mb-0\" *ngFor=\"let subprop of item?.attributes | keyvalue\">\n                                <label for=\"inputLabel\" class=\"col-lg-4 pl-0 pr-0 col-form-label\" *ngIf=\"subprop?.key != 'bibliography' && subprop?.key != 'validity' && subprop?.key != 'node_id' && subprop?.key != 'form_id' && subprop?.key != 'creator' && subprop?.key != 'timestamp'\">{{subprop?.key}}:</label>\n                                \n                                <div class=\"input-group col-lg-8 pl-0 pr-0\">\n                                    <span class=\"font-italic overflow-auto p-1\" *ngIf=\"subprop?.key == 'label'\">{{subprop?.value}}</span>\n                                    <input #sub_property *ngIf=\"subprop?.key != 'creator' && \n                                                  subprop?.key != 'label' && \n                                                  subprop?.key != 'note' &&\n                                                  subprop?.key != 'timestamp' &&\n                                                  subprop?.key != 'node_id' &&\n                                                  subprop?.key != 'form_id' &&\n                                                  subprop?.key != 'confidence' &&\n                                                  subprop?.key != 'bibliography'  &&\n                                                  subprop?.key != 'validity'\" \n                                                  (keyup)=\"triggerUpdateAttestation($event, sub_property.value, subprop?.key, item)\" id=\"attributes\" name=\"attributes\" type=\"text\" class=\"form-control\" placeholder=\"No info\" [value]=\"subprop?.value\">\n                                    <input #confidence *ngIf=\"subprop?.key == 'confidence'\" \n                                                  (keyup)=\"triggerUpdateAttestation($event, confidence.value, subprop?.key, item)\" (change)=\"triggerUpdateAttestation($event, confidence.value, subprop?.key, item)\" id=\"attributes\" name=\"attributes\" type=\"number\" min=\"0\" max=\"1\" step=\"0.1\" class=\"form-control\" placeholder=\"No info\" [value]=\"subprop?.value\">\n                                    <!-- <span class=\"font-italic overflow-auto p-1\" *ngIf=\"subprop?.key == 'timestamp'\">{{subprop?.value | date: 'dd/MM/yyyy HH:mm:ss'}}</span> -->\n                                    <textarea #text_area (keyup)=\"triggerUpdateAttestation($event, text_area.value, subprop?.key, item)\" *ngIf=\"subprop?.key == 'note'\" id=\"attributes\" name=\"attributes\" type=\"text\" class=\"form-control\" placeholder=\"No info\" style=\"resize: none;\">{{subprop?.value}}</textarea>\n                                </div>\n                            </div>\n                            <div class=\"form-group row ml-2 mr-2 mb-0\">\n                                <label for=\"inputLabel\" class=\"col-lg-4 pl-0 pr-0 col-form-label\">bibliography:</label>\n                                <div class=\"input-group col-lg-8 pl-0 pr-0 justify-content-between\">\n                                    <span class=\"font-italic overflow-auto p-1\" *ngIf=\"item?.attributes.bibliography.length == 0\">\n                                        No bibliography\n                                    </span>\n                                    <span class=\"font-italic overflow-auto p-1\" *ngIf=\"item?.attributes.bibliography.length != 0\">\n                                        {{item?.attributes?.bibliography.length}} item(s)\n                                    </span>\n                                    <button (click)=\"showBiblioModal(item)\" title=\"Add new bibliography item\" class=\"btn btn-success rounded-circle\" style=\"\n                                    width: 20px;\n                                    height: 20px;\n                                    padding: 0%;\n                                    border-radius: 15px !important;\">\n                                        <i class=\"fas fa-plus\"></i>\n                                    </button>\n                                </div>\n                                \n                                \n                            </div>\n                            <div *ngIf=\"item?.attributes.bibliography.length > 0\">\n                                <div class=\"form-group row ml-2 mt-3 mb-1  mr-2\" *ngFor=\"let item_biblio of item?.attributes.bibliography; let j = index\">\n                                    <div class=\"input-group col-xl-12 p-0\">\n                                        <!-- {{item_biblio.creators | json}} -->\n                                        <div id=\"accordion\">\n                                            <div class=\"card\">\n                                                <a class=\"biblioCollapse\" data-toggle=\"collapse\" [attr.data-target]=\"'#attestation_biblio_collapse-'+item?.id+'-'+j\" aria-expanded=\"true\" [attr.aria-controls]=\"'#attestation_biblio_collapse-'+item?.id+'-'+j\">\n                                                    \n                                                    <span class=\"text-id pointer\" style=\"z-index: 0;\">\n                                                        <span  *ngFor=\"let auth of item_biblio.creators\">\n                                                            <b *ngIf=\"auth.creatorType == 'author'\">{{auth.lastName}} {{auth.firstName}} </b>\n                                                        </span>\n                                                        <b>- ({{item_biblio.title != undefined ? (item_biblio.title | slice:0:10) +'...' : ''}})</b>\n                                                    </span>\n                                                    <!-- <span class=\"text-id pointer\">\n                                                        \n                                                    </span> -->\n                                                </a>\n                                                <span *ngIf=\"item_biblio != undefined\" class=\"icons-container\">\n                                                    <!-- {{bibliographyData[i]['url'] | json}} -->\n                                                    <!-- <span><a target=\"_blank\" class=\"pointer text-primary\" (click)=\"synchronizeBibliography(biblio.get('id').value)\"><span class=\"synchro-icon\"><i class=\"fas fa-sync-alt\" *ngIf=\"!loadingSynchro\"></i> <i class=\"fas fa-sync fa-spin\" *ngIf=\"loadingSynchro\"></i></span></a></span> -->\n                                                    <span ><a href=\"https://www.zotero.org/groups/2552746/prin_italia_antica/items/{{item_biblio.key}}/library\" target=\"_blank\" class=\"pointer text-primary\"><span class=\"external-icon\"><i class=\"fas fa-external-link-alt\"></i></span></a></span>\n                                                    <span><a *ngIf=\"item_biblio.url != ''\" [href]=\"item_biblio.url\" target=\"_blank\" class=\"pointer text-primary\"><span class=\"download-icon\"><i class=\"fas fa-download\"></i></span></a></span>\n                                                </span>\n                                                \n                                                <a class=\"pointer\" (click)=\"removeItem(item, j)\"><span class=\"trash-icon\"><i class=\"fa fa-trash text-danger\"></i></span></a> \n                                                \n                                                <div [id]=\"'attestation_biblio_collapse-'+item?.id+'-'+j\" class=\"collapse\" > <!-- data-parent=\"#accordion\" -->\n                                                    <div class=\"card-body mt-2\">\n                                                        <div class=\"form-group row ml-2 mr-2 mb-0\">\n                                                            <label for=\"inputLabel\" class=\"col-lg-4 px-0 col-form-label\">Title:</label>\n                                                            <div class=\"input-group col-lg-8 pl-0\">\n                                                                <input id=\"title\"  name=\"title\" type=\"text\" class=\"form-control\" placeholder=\"\" disabled [value]=\"item_biblio?.title\">\n                                                            </div>\n                                                        </div>           \n                                                        <div class=\"form-group row ml-2 mr-2 mb-0\">\n                                                            <label for=\"inputLabel\" class=\"col-lg-4 px-0 col-form-label\">Author:</label>\n                                                            <div class=\"input-group col-lg-8 pl-0  \">\n                                                                <span *ngFor=\"let auth of item_biblio.creators\" class=\"pb-1\">\n                                                                    <input id=\"author\"   name=\"author\" type=\"text\" class=\"form-control\" placeholder=\"\" disabled [value]=\"auth.firstName + ' ' + auth.lastName\">\n                                                                </span>\n                                                                \n                                                            </div>\n                                                        </div>   \n                                                        <div class=\"form-group row ml-2 mr-2 mb-0\">\n                                                            <label for=\"inputLabel\" class=\"col-lg-4 px-0 col-form-label\">Date:</label>\n                                                            <div class=\"input-group col-lg-8 pl-0\">\n                                                                <input id=\"date\"   name=\"date\" type=\"text\" class=\"form-control\" placeholder=\"\" disabled [value]=\"item_biblio.date\">\n                                                            </div>\n                                                        </div>\n                                                        <div class=\"form-group row ml-2 mr-2\">\n                                                            <label for=\"inputLabel\" class=\"col-lg-4 px-0 col-form-label\">Note:</label>\n                                                            <div class=\"input-group col-lg-8 pl-0\">\n                                                                <textarea #note_item_biblio_anno (keyup)=\"debounceKeyup(note_item_biblio_anno.value, item, j, 'note')\"  name=\"note\" class=\"form-control\" style=\"resize: none;\" [value]=\"item_biblio.note\"></textarea>\n                                                            </div>\n                                                        </div>  \n                                                        <div class=\"form-group row ml-2 mr-2\">\n                                                            <label for=\"inputLabel\" class=\"col-lg-4 px-0 col-form-label\">TextualRef:</label>\n                                                            <div class=\"input-group col-lg-8 pl-0\">\n                                                                <textarea #txtref_item_biblio_anno (keyup)=\"debounceKeyup(txtref_item_biblio_anno.value, item, j, 'textualRef')\"  name=\"textualReference\" class=\"form-control\" style=\"resize: none;\" [value]=\"item_biblio.textualRef\"></textarea>\n                                                            </div>\n                                                        </div>     \n                                                    </div>\n                                                </div>                                            \n                                            </div>\n                                        </div>\n                                        \n                                        \n                                    </div>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n\n\n                    \n                </div>\n            </div>\n           \n        </div>\n    </div>\n\n</div>\n\n\n<!-- ################ BIBLIO MODAL ################# -->\n                    \n<app-modal #addBibliographyAttestation class=\"biblio_modal\" [backdrop]=\"false\" [inViewport]=\"true\" (closeModal)=\"onCloseModal()\">\n\n    <ng-container class=\"app-modal-header\">\n        <img src=\"../../../../../../assets/images/zotero_logo.png\">\n        <span class=\"ml-2 biblio-header-title\">Library: PRIN Italia Antica</span>\n    </ng-container>\n    \n    <ng-container class=\"app-modal-body\">\n        <!-- SEARCH BAR -->\n        <div class=\"w-25 pt-1 pb-1\">\n            <div class=\"input-group mb-3\" *ngIf=\"{switch : false}; let variable\">\n                <div class=\"input-group-prepend\">\n                    <button class=\"btn btn-outline-secondary dropdown-toggle\" type=\"button\" data-toggle=\"dropdown\"\n                        aria-haspopup=\"true\" aria-expanded=\"false\"><i class=\"fa fa-search\"></i></button>\n                    <div class=\"dropdown-menu\">\n                        <a [class.disable_click_fire]=\"!variable.switch\" class=\"dropdown-item\" style=\"cursor: pointer;\"\n                            (click)=\"variable.switch = false; searchBibliography(searchBiblio.value, variable.switch);\">Normal</a>\n                        <a [class.disable_click_fire]=\"variable.switch\" class=\"dropdown-item\" style=\"cursor: pointer;\"\n                            (click)=\"variable.switch = true; searchBibliography(searchBiblio.value, variable.switch);\">Full\n                            Text</a>\n                    </div>\n                </div>\n                <input #searchBiblio (keyup)=\"triggerSearch($event, searchBiblio.value, variable.switch)\" type=\"text\"\n                    class=\"form-control\" aria-label=\"Text input with dropdown button\"\n                    [placeholder]=\"variable.switch ?'Title, creator, year + Full Text' : 'Title, creator, year'\"\n                    style=\"font-size: 12px;\">\n            </div>\n\n        </div>\n        <!-- {{'start: '+start + ' sortField: '+ sortField + ' direction: '+ direction + ' queryTitle: '+ queryTitle + ' queryMode: '+ queryMode}} -->\n\n        <!-- SKELETON CONTAINER -->\n        <div class=\"container-fluid\">\n            <div class=\"row\">\n                <div class=\"col-md-8 pl-0\">\n\n\n                    <!-- TABLE -->\n                    <div class=\"table-responsive table-body\">\n                        <div id=\"biblioModalAnnotation\" class=\"modal fade\" role=\"dialog\">\n                            <div class=\"modal-dialog\">\n\n                                <!-- Modal content-->\n                                <div class=\"modal-content\">\n                                    <div class=\"modal-body\">\n                                        <div class=\"d-flex justify-content-center\">\n                                            <div class=\"spinner-border\" role=\"status\">\n                                                <span class=\"sr-only\">Loading...</span>\n                                            </div>\n                                        </div>\n                                    </div>\n                                </div>\n\n                            </div>\n                        </div>\n                        \n                        <table class=\"table table-striped table-hover\" [hidden]=\"bibliography.length == 0\">\n                            <thead>\n                                <tr>\n                                    <th scope=\"col\" style=\"width: 50%; cursor: pointer;\" (click)=\"sortBibliography($event, 'title')\">\n                                        <span>Title</span>\n                                        <span class=\"float-right\">\n                                            <i class=\"fas fa-sort-up\" *ngIf=\"direction == 'asc' && sortField == 'title'\"></i>\n                                            <i class=\"fas fa-sort-down\" *ngIf=\"direction == 'desc' && sortField == 'title'\"></i>\n                                        </span>\n                                    </th>\n                                    <th scope=\"col\" style=\"width: 30%; cursor: pointer;\" (click)=\"sortBibliography($event, 'creator')\">\n                                        <span>Creator</span>\n                                        <span class=\"float-right\">\n                                            <i class=\"fas fa-sort-up\" *ngIf=\"direction == 'asc' && sortField == 'creator'\"></i>\n                                            <i class=\"fas fa-sort-down\" *ngIf=\"direction == 'desc' && sortField == 'creator'\"></i>\n                                        </span>\n                                    </th>\n                                    <th scope=\"col\" style=\"width: 20%; cursor: pointer;\" (click)=\"sortBibliography($event, 'date')\">\n                                        <span>Date</span>\n                                        <span class=\"float-right\">\n                                            <i class=\"fas fa-sort-up\" *ngIf=\"direction == 'asc' && sortField == 'date'\"></i>\n                                            <i class=\"fas fa-sort-down\" *ngIf=\"direction == 'desc' && sortField == 'date'\"></i>\n                                        </span>\n                                    </th>\n                                </tr>\n                            </thead>\n                            <tbody #table_body infiniteScroll [infiniteScrollDistance]=\"0.4\"\n                                [infiniteScrollThrottle]=\"150\" [scrollWindow]=\"false\" (scrolled)=\"onScrollDown()\">\n\n\n                                <tr *ngFor=\"let item of bibliography\" (click)=\"selectItem($event, item)\"\n                                    [ngClass]=\"item?.selected ? 'selected' : ''\" style=\"cursor: pointer;\">\n                                    <td style=\"width: 50%\">\n                                        <span *ngIf=\"item.data.itemType == 'book'\" class=\"pl-1 pr-1\">\n                                            <i class=\"fas fa-book\"></i>\n                                        </span>\n                                        <span *ngIf=\"item.data.itemType == 'bookSection'\" class=\"pl-1 pr-1\">\n                                            <i class=\"fas fa-book-open\"></i>\n                                        </span>\n                                        <span *ngIf=\"item.data.itemType == 'journalArticle'\" class=\"pl-1 pr-1\">\n                                            <i class=\"far fa-newspaper\"></i>\n                                        </span>\n                                        <span *ngIf=\"item.data.itemType == 'note'\" class=\"pl-1 pr-1\">\n                                            <i class=\"far fa-clipboard\"></i>\n                                        </span>\n                                        <span *ngIf=\"item.data.itemType == 'attachment'\" class=\"pl-1 pr-1\">\n                                            <i class=\"fas fa-paperclip\"></i>\n                                        </span>\n                                        <span *ngIf=\"item.data.itemType == 'conferencePaper'\" class=\"pl-1 pr-1\">\n                                            <i class=\"fas fa-chalkboard-teacher\"></i>\n                                        </span>\n                                        <span\n                                            *ngIf=\"item.data.title != undefined && item.data.title != ''\">{{item.data.title |titlecase}}</span>\n                                        <span *ngIf=\"item.data.title == undefined || item.data.title == ''\"\n                                            class=\"font-italic\">No title</span>\n                                    </td>\n                                    <td style=\"width: 30%\">\n                                        <span *ngIf=\"item.data.creators != undefined\">\n                                            <span *ngFor=\"let author of item.data.creators; let i = index\">\n                                                <span *ngIf=\"author.creatorType == 'author'\">\n                                                    {{author.lastName | titlecase}} {{author.firstName | titlecase}} \n                                                </span>\n                                            </span>\n                                            <span *ngIf=\"!checkIfCreatorExist(item.data.creators)\"\n                                                class=\"font-italic\">No data</span>\n                                        </span>\n                                        <span *ngIf=\"item.data.creators == undefined\" class=\"font-italic\">No data</span>\n                                    </td>\n                                    <td style=\"width: 20%\">\n                                        <span *ngIf=\"item.data.date != undefined && item.data.date != ''\">\n                                            {{item.data.date | titlecase}}\n                                        </span>\n                                        <span *ngIf=\"item.data.date == undefined || item.data.date == ''\"\n                                            class=\"font-italic\">\n                                            No info\n                                        </span>\n                                    </td>\n                                </tr>\n                            </tbody>\n                        </table>\n                        <p class=\"font-italic text-muted no-results\" *ngIf=\"bibliography.length == 0\">No results</p>\n                    </div>\n\n\n                </div>\n                <div class=\"col-md-4\" style=\"font-size: 14px;\">\n                    <div class=\"row\">\n                        <div class=\"col-md-12 item-description\"\n                            style=\"height: calc(100vh - 37rem); overflow: auto; font-size: 13px;\">\n                            <div *ngIf=\"!selectedItem\">\n                                <div class=\"row\">\n                                    <div class=\"col-md-12\">\n                                        <p class=\"text-muted text-center align-middle mb-1 font-italic\">\n                                            No item selected\n                                        </p>\n                                    </div>\n                                </div>\n                            </div>\n                            <div *ngIf=\"selectedItem\">\n                                <div class=\"row\"\n                                    *ngIf=\"selectedItem.data.itemType != '' && selectedItem.data.itemType != undefined\">\n                                    <div class=\"col-md-4 left\" style=\"text-align: right;\">\n                                        <p class=\"text-muted font-weight-bold mb-1\">\n                                            Item type\n                                        </p>\n                                    </div>\n                                    <div class=\"col-md-8 right\" style=\"text-align: left;\">\n                                        <p class=\"font-weight-normal mb-1\">\n                                            {{selectedItem.data.itemType | titlecase}}\n                                        </p>\n                                    </div>\n                                </div>\n                                <div class=\"row\"\n                                    *ngIf=\"selectedItem.data.title != '' && selectedItem.data.title != undefined\">\n                                    <div class=\"col-md-4 left\" style=\"text-align: right;\">\n                                        <p class=\"text-muted font-weight-bold mb-1\">\n                                            Title\n                                        </p>\n                                    </div>\n                                    <div class=\"col-md-8 right\" style=\"text-align: left;\">\n                                        <p class=\"font-weight-normal mb-1\">\n                                            {{selectedItem.data.title | titlecase}}\n                                        </p>\n                                    </div>\n                                </div>\n                                <div class=\"row\"\n                                    *ngIf=\"selectedItem.data.creators != undefined && selectedItem.data.creators.length > 0 && checkIfCreatorExist(selectedItem.data.creators)\">\n                                    <div class=\"col-md-4 left\" style=\"text-align: right;\">\n                                        <p class=\"text-muted font-weight-bold mb-1\">\n                                            Author\n                                        </p>\n                                    </div>\n                                    <div class=\"col-md-8 right\" style=\"text-align: left;\">\n                                        <span *ngFor=\"let author of selectedItem.data.creators\">\n                                            <span *ngIf=\"author.creatorType == 'author'\">\n                                                <p class=\"font-weight-normal mb-1\">\n                                                    {{author.firstName | titlecase}} {{author.lastName | titlecase}}\n                                                </p>\n                                            </span>\n                                        </span>\n                                    </div>\n                                </div>\n                                <div class=\"row\"\n                                    *ngIf=\"selectedItem.data.creators != undefined && selectedItem.data.creators.length > 0\">\n                                    <div class=\"col-md-4 left\" style=\"text-align: right;\">\n                                        <p class=\"text-muted font-weight-bold mb-1\">\n                                            Editor\n                                        </p>\n                                    </div>\n                                    <div class=\"col-md-8 right\" style=\"text-align: left;\">\n                                        <span *ngFor=\"let editor of selectedItem.data.creators\">\n                                            <span *ngIf=\"editor.creatorType == 'editor'\">\n                                                <p class=\"font-weight-normal mb-1\">\n                                                    {{editor.firstName | titlecase}} {{editor.lastName | titlecase}}\n                                                </p>\n                                            </span>\n                                        </span>\n                                    </div>\n                                </div>\n                                <div class=\"row\"\n                                    *ngIf=\"selectedItem.data.publicationTitle != '' && selectedItem.data.publicationTitle != undefined\">\n                                    <div class=\"col-md-4 left\" style=\"text-align: right;\">\n                                        <p class=\"text-muted font-weight-bold mb-1\">\n                                            Publication\n                                        </p>\n                                    </div>\n                                    <div class=\"col-md-8 right\" style=\"text-align: left;\">\n                                        <p class=\"font-weight-normal mb-1\">\n                                            {{selectedItem.data.publicationTitle | titlecase}}\n                                        </p>\n                                    </div>\n                                </div>\n                                <div class=\"row\"\n                                    *ngIf=\"selectedItem.data.publisher != '' && selectedItem.data.publisher != undefined\">\n                                    <div class=\"col-md-4 left\" style=\"text-align: right;\">\n                                        <p class=\"text-muted font-weight-bold mb-1\">\n                                            Publisher\n                                        </p>\n                                    </div>\n                                    <div class=\"col-md-8 right\" style=\"text-align: left;\">\n                                        <p class=\"font-weight-normal mb-1\">\n                                            {{selectedItem.data.publisher | titlecase}}\n                                        </p>\n                                    </div>\n                                </div>\n                                <div class=\"row\"\n                                    *ngIf=\"selectedItem.data.issue != '' && selectedItem.data.issue != undefined\">\n                                    <div class=\"col-md-4 left\" style=\"text-align: right;\">\n                                        <p class=\"text-muted font-weight-bold mb-1\">\n                                            Issue\n                                        </p>\n                                    </div>\n                                    <div class=\"col-md-8 right\" style=\"text-align: left;\">\n                                        <p class=\"font-weight-normal mb-1\">\n                                            {{selectedItem.data.issue | titlecase}}\n                                        </p>\n                                    </div>\n                                </div>\n                                <div class=\"row\"\n                                    *ngIf=\"selectedItem.data.pages != '' && selectedItem.data.pages != undefined\">\n                                    <div class=\"col-md-4 left\" style=\"text-align: right;\">\n                                        <p class=\"text-muted font-weight-bold mb-1\">\n                                            Pages\n                                        </p>\n                                    </div>\n                                    <div class=\"col-md-8 right\" style=\"text-align: left;\">\n                                        <p class=\"font-weight-normal mb-1\">\n                                            {{selectedItem.data.pages | titlecase }}\n                                        </p>\n                                    </div>\n                                </div>\n                                <div class=\"row\"\n                                    *ngIf=\"selectedItem.data.place != '' && selectedItem.data.place != undefined\">\n                                    <div class=\"col-md-4 left\" style=\"text-align: right;\">\n                                        <p class=\"text-muted font-weight-bold mb-1\">\n                                            Place\n                                        </p>\n                                    </div>\n                                    <div class=\"col-md-8 right\" style=\"text-align: left;\">\n                                        <p class=\"font-weight-normal mb-1\">\n                                            {{selectedItem.data.place | titlecase }}\n                                        </p>\n                                    </div>\n                                </div>\n                                <div class=\"row\"\n                                    *ngIf=\"selectedItem.data.date != '' && selectedItem.data.pages != date\">\n                                    <div class=\"col-md-4 left\" style=\"text-align: right;\">\n                                        <p class=\"text-muted font-weight-bold mb-1\">\n                                            Date\n                                        </p>\n                                    </div>\n                                    <div class=\"col-md-8 right\" style=\"text-align: left;\">\n                                        <p class=\"font-weight-normal mb-1\">\n                                            {{selectedItem.data.date | titlecase}}\n                                        </p>\n                                    </div>\n                                </div>\n                                <div class=\"row\"\n                                    *ngIf=\"selectedItem.data.journalAbbreviation != '' && selectedItem.data.journalAbbreviation != undefined\">\n                                    <div class=\"col-md-4 left\" style=\"text-align: right;\">\n                                        <p class=\"text-muted font-weight-bold mb-1\">\n                                            Journal Abbr\n                                        </p>\n                                    </div>\n                                    <div class=\"col-md-8 right\" style=\"text-align: left;\">\n                                        <p class=\"font-weight-normal mb-1\">\n                                            {{selectedItem.data.journalAbbreviation | titlecase}}\n                                        </p>\n                                    </div>\n                                </div>\n                                <div class=\"row\"\n                                    *ngIf=\"selectedItem.data.DOI != '' && selectedItem.data.DOI != undefined\">\n                                    <div class=\"col-md-4 left\" style=\"text-align: right;\">\n                                        <p class=\"text-muted font-weight-bold mb-1\">\n                                            <a class=\"text-muted\" href=\"{{'https://doi.org/'+selectedItem.data.DOI}}\"\n                                                target=\"_blank\">DOI <i class=\"fas fa-external-link-alt\"></i></a>\n                                        </p>\n                                    </div>\n                                    <div class=\"col-md-8 right\" style=\"text-align: left;\">\n                                        <p class=\"font-weight-normal mb-1\">\n                                            {{selectedItem.data.DOI | titlecase}}\n                                        </p>\n                                    </div>\n                                </div>\n                                <div class=\"row\"\n                                    *ngIf=\"selectedItem.data.ISSN != '' && selectedItem.data.ISSN != undefined\">\n                                    <div class=\"col-md-4 left\" style=\"text-align: right;\">\n                                        <p class=\"text-muted font-weight-bold mb-1\">\n                                            ISSN\n                                        </p>\n                                    </div>\n                                    <div class=\"col-md-8 right\" style=\"text-align: left;\">\n                                        <p class=\"font-weight-normal mb-1\">\n                                            {{selectedItem.data.ISSN | titlecase}}\n                                        </p>\n                                    </div>\n                                </div>\n                                <div class=\"row\"\n                                    *ngIf=\"selectedItem.data.url != '' && selectedItem.data.url != undefined\">\n                                    <div class=\"col-md-4 left\" style=\"text-align: right;\">\n                                        <p class=\"text-muted font-weight-bold mb-1\">\n                                            <a class=\"text-muted\" href=\"{{selectedItem.data.url}}\" target=\"_blank\">URL\n                                                <i class=\"fas fa-external-link-alt\"></i></a>\n                                        </p>\n                                    </div>\n                                    <div class=\"col-md-8 right\" style=\"text-align: left;\">\n                                        <p class=\"font-weight-normal mb-1\">\n                                            {{selectedItem.data.url}}\n                                        </p>\n                                    </div>\n                                </div>\n                                <div class=\"row\"\n                                    *ngIf=\"selectedItem.data.accessDate != '' && selectedItem.data.accessDate != undefined\">\n                                    <div class=\"col-md-4 left\" style=\"text-align: right;\">\n                                        <p class=\"text-muted font-weight-bold mb-1\">\n                                            Accessed\n                                        </p>\n                                    </div>\n                                    <div class=\"col-md-8 right\" style=\"text-align: left;\">\n                                        <p class=\"font-weight-normal mb-1\">\n                                            {{selectedItem.data.accessDate}}\n                                        </p>\n                                    </div>\n                                </div>\n                            </div>\n\n                        </div>\n                    </div>\n                    <div class=\"row\">\n                        <div class=\"col-md-12\" style=\"height: calc(40vh - 10rem); overflow: auto; font-size: 13px;\">\n                            <div *ngIf=\"!selectedItem\">\n                                <div class=\"row\">\n                                    <div class=\"col-md-12\">\n                                        <p class=\"text-muted text-center align-middle mb-1 font-italic\">\n                                            No item selected\n                                        </p>\n                                    </div>\n                                </div>\n                            </div>\n                            <div\n                                *ngIf=\"selectedItem && (selectedItem.data.abstractNote == '' || selectedItem.data.abstractNote == undefined)\">\n                                <div class=\"row\">\n                                    <div class=\"col-md-12\">\n                                        <p class=\"text-muted text-center align-middle mb-1 font-italic\">\n                                            No info\n                                        </p>\n                                    </div>\n                                </div>\n                            </div>\n                            <div\n                                *ngIf=\"selectedItem && (selectedItem.data.abstractNote != '' && selectedItem.data.abstractNote != undefined)\">\n                                <p class=\"text-muted font-weight-bold\">\n                                    Abstract\n                                </p>\n                                <p class=\"font-weight-normal\">\n                                    {{selectedItem.data.abstractNote}}\n                                </p>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n            <div class=\"row\">\n                <div class=\"col-md-12 d-flex justify-content-end\">\n                    <button class=\"btn btn-secondary w-25\" [disabled]=\"!selectedItem\" (click)=\"addBibliographyItem(selectedItem)\">Save</button>\n                    <!-- <button class=\"btn btn-secondary\" (click)=\"addBibliography.hide()\">Close</button> -->\n                </div>\n            </div>\n        </div>\n    </ng-container>\n\n    <ng-container class=\"app-modal-footer\">\n    </ng-container>\n</app-modal>","/*\n   Copyright 2021-2022  Istituto di Linguistica Computazionale \"A. Zampolli\", Consiglio Nazionale delle Ricerche, Pisa, Italy.\n \nThis file is part of EpiLexo.\n\nEpiLexo is free software: you can redistribute it and/or modify it under the terms of the GNU General Public License as published by the Free Software Foundation, either version 3 of the License, or (at your option) any later version.\n\nEpiLexo is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for more details.\n\nYou should have received a copy of the GNU General Public License along with EpiLexo. If not, see <https://www.gnu.org/licenses/>.\n*/\n\nimport { Component, OnInit } from '@angular/core';\n\n@Component({\n  selector: 'app-search-page',\n  templateUrl: './search-page.component.html',\n  styleUrls: ['./search-page.component.scss']\n})\nexport class SearchPageComponent implements OnInit {\n\n  constructor() { }\n\n  ngOnInit(): void {\n  }\n\n}\n","\n\n<div class=\"container-fluid\">\n\t<div class=\"row justify-content-center\">\n\t\t<div class=\"col-md-3 d-flex\">\n      <br>\n      <app-data-search-form class=\"w-100\"></app-data-search-form>  \n    </div>\n    <div class=\"col-md-9\">\n\n    </div>\n\t</div>\n</div>","/*\n   Copyright 2021-2022  Istituto di Linguistica Computazionale \"A. Zampolli\", Consiglio Nazionale delle Ricerche, Pisa, Italy.\n \nThis file is part of EpiLexo.\n\nEpiLexo is free software: you can redistribute it and/or modify it under the terms of the GNU General Public License as published by the Free Software Foundation, either version 3 of the License, or (at your option) any later version.\n\nEpiLexo is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for more details.\n\nYou should have received a copy of the GNU General Public License along with EpiLexo. If not, see <https://www.gnu.org/licenses/>.\n*/\n\nimport { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\nimport { AuthGuard } from './services/guard/auth.guard';\nimport { HomePageComponent } from './views/home-page/home-page.component';\nimport { LexiconPageComponent } from './views/lexicon-page/lexicon-page.component';\nimport { LoginPageComponent } from './views/login-page/login-page.component';\nimport { PageNotFoundComponent } from './views/page-not-found/page-not-found.component';\nimport { ProfilePageComponent } from './views/profile-page/profile-page.component';\nimport { SearchPageComponent } from './views/search-page/search-page.component';\n\nconst routes: Routes = [\n  {path: '', redirectTo: 'lexicon', pathMatch: 'full'},\n  /* {path: 'home', component: HomePageComponent}, */\n  /* {path: 'login', component: LoginPageComponent}, */\n  {path: 'lexicon', component: LexiconPageComponent, canActivate: [AuthGuard], data: {roles: ['USER']}},\n  {path: 'user', component: ProfilePageComponent, canActivate: [AuthGuard], data: {roles: ['ADMIN']}},\n  {path: 'search', component: SearchPageComponent},\n  {path: '**', component: PageNotFoundComponent}\n];\n\n@NgModule({\n  imports: [RouterModule.forRoot(routes)],\n  exports: [RouterModule]\n})\nexport class AppRoutingModule { }\n","/*\n   Copyright 2021-2022  Istituto di Linguistica Computazionale \"A. Zampolli\", Consiglio Nazionale delle Ricerche, Pisa, Italy.\n \nThis file is part of EpiLexo.\n\nEpiLexo is free software: you can redistribute it and/or modify it under the terms of the GNU General Public License as published by the Free Software Foundation, either version 3 of the License, or (at your option) any later version.\n\nEpiLexo is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for more details.\n\nYou should have received a copy of the GNU General Public License along with EpiLexo. If not, see <https://www.gnu.org/licenses/>.\n*/\n\nimport { HttpClient } from '@angular/common/http';\nimport { Injectable } from '@angular/core';\nimport { Observable } from 'rxjs';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class LilaService {\n\n  private baseUrl_document = \"/LexO-backend-itant/service/fedex/search\"\n  private endpoint = 'https://lila-erc.eu/sparql/lila_knowledge_base/sparql'\n\n  constructor(private http: HttpClient) { }\n\n  queryCognate(label: string): Observable<any> {\n    return this.http.post(this.baseUrl_document+'?sparqlQuery='+encodeURIComponent('prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#>  prefix ontolex: <http://www.w3.org/ns/lemon/ontolex#>  prefix lila: <http://lila-erc.eu/ontologies/lila/>  SELECT ?lemma ?pos  WHERE {  ?lemma a lila:Lemma ;  ontolex:writtenRep \\''+label+'\\';  lila:hasPOS ?pos  }')+'&endpoint='+this.endpoint, null)\n  }\n\n  queryEtymon(label: string): Observable<any> {\n    return this.http.post(this.baseUrl_document+'?sparqlQuery='+encodeURIComponent('PREFIX lime: <http://www.w3.org/ns/lemon/lime#> PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#> PREFIX lemonEty: <http://lari-datasets.ilc.cnr.it/lemonEty#> SELECT  ?etymon ?language WHERE { ?etymon a lemonEty:Etymon ; rdfs:label \\''+label+'\\' ; lime:language ?language . }')+'&endpoint='+this.endpoint, null)\n  }\n}\n","/*\n   Copyright 2021-2022  Istituto di Linguistica Computazionale \"A. Zampolli\", Consiglio Nazionale delle Ricerche, Pisa, Italy.\n \nThis file is part of EpiLexo.\n\nEpiLexo is free software: you can redistribute it and/or modify it under the terms of the GNU General Public License as published by the Free Software Foundation, either version 3 of the License, or (at your option) any later version.\n\nEpiLexo is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for more details.\n\nYou should have received a copy of the GNU General Public License along with EpiLexo. If not, see <https://www.gnu.org/licenses/>.\n*/\n\nimport { Component, Input, OnInit, SimpleChanges } from '@angular/core';\nimport { Form, FormArray, FormBuilder, FormControl, FormGroup, Validators } from '@angular/forms';\nimport { Subject, Subscription } from 'rxjs';\nimport { debounceTime, pairwise, startWith } from 'rxjs/operators';\nimport { LexicalEntriesService } from 'src/app/services/lexical-entries/lexical-entries.service';\nimport { DataService, Person } from '../lexical-entry-core-form/data.service';\nimport { ToastrService } from 'ngx-toastr';\n\n@Component({\n  selector: 'app-form-core-form',\n  templateUrl: './form-core-form.component.html',\n  styleUrls: ['./form-core-form.component.scss']\n})\nexport class FormCoreFormComponent implements OnInit {\n\n  @Input() formData: any;\n\n  private subject_label: Subject<any> = new Subject();\n  private subject_ex_label: Subject<any> = new Subject();\n\n  switchInput = false;\n  subscription: Subscription;\n  object: any;\n  people: Person[] = [];\n  peopleLoading = false;\n  counter = 0;\n  typesData = [];\n  morphologyData = [];\n  valueTraits = [];\n  memoryTraits = [];\n  interval;\n\n  formCore = new FormGroup({\n    inheritance: new FormArray([this.createInheritance()]),\n    type: new FormControl(''),\n    confidence : new FormControl(null),\n    label: new FormArray([this.createLabel()]),\n    morphoTraits: new FormArray([this.createMorphoTraits()])\n  })\n\n  labelData = [];\n  memoryLabel = [];\n\n  typeDesc = '';\n\n  staticOtherDef = [];\n  staticMorpho = [];\n\n  morphoTraits: FormArray;\n  inheritanceArray: FormArray;\n  labelArray: FormArray;\n\n  disableAddOther = false;\n  disableAddMorpho = false;\n\n  constructor(private dataService: DataService, private lexicalService: LexicalEntriesService, private formBuilder: FormBuilder, private toastr: ToastrService) { }\n\n  ngOnInit() {\n    this.lexicalService.getMorphologyData().subscribe(\n      data => {\n        this.morphologyData = data;\n        this.morphologyData = this.morphologyData.filter(x => {\n          if (x.propertyId != 'partOfSpeech') {\n            return true;\n          } else {\n            return false\n          }\n        })\n        /* //console.log(this.morphologyData) */\n      }\n    )\n\n    setTimeout(() => {\n      //@ts-ignore\n      $('.denotes-tooltip').tooltip({\n        trigger: 'hover'\n      });\n    }, 1000);\n    this.loadPeople();\n\n    this.formCore = this.formBuilder.group({\n      inheritance: this.formBuilder.array([]),\n      type: '',\n      confidence : null,\n      label: this.formBuilder.array([]),\n      morphoTraits: this.formBuilder.array([]),\n    })\n\n    this.onChanges();\n    this.subject_label.pipe(debounceTime(1000)).subscribe(\n      data => {\n        this.onChangeLabel(data)\n      }\n    )\n\n    this.subject_ex_label.pipe(debounceTime(1000)).subscribe(\n      data => {\n\n        this.onChangeExistingLabelValue(data['evt'], data['i']);\n      }\n    )\n\n    this.lexicalService.getFormTypes().subscribe(\n      data => {\n        this.typesData = data;\n        //console.log(this.typesData)\n      },\n      error => {\n        //console.log(error)\n      }\n    )\n\n  }\n\n  private loadPeople() {\n    this.peopleLoading = true;\n    this.dataService.getPeople().subscribe(x => {\n      this.people = x;\n      this.peopleLoading = false;\n    });\n  }\n\n  ngOnChanges(changes: SimpleChanges) {\n    setTimeout(() => {\n      if (this.object != changes.formData.currentValue) {\n        this.morphoTraits = this.formCore.get('morphoTraits') as FormArray;\n        this.morphoTraits.clear();\n\n        this.inheritanceArray = this.formCore.get('inheritance') as FormArray;\n        this.inheritanceArray.clear();\n\n        this.labelArray = this.formCore.get('label') as FormArray;\n        this.labelArray.clear();\n\n        this.staticMorpho = [];\n        this.staticOtherDef = [];\n      }\n      this.object = changes.formData.currentValue;\n      //console.log(this.object)\n      if (this.object != null) {\n\n        this.valueTraits = [];\n        this.memoryTraits = [];\n        this.memoryLabel = [];\n        this.labelData = [];\n\n        for (var i = 0; i < this.object.inheritedMorphology.length; i++) {\n          const trait = this.object.inheritedMorphology[i]['trait'];\n          const value = this.object.inheritedMorphology[i]['value'];\n          this.addInheritance(trait, value);\n        }\n\n        this.formCore.get('confidence').setValue(this.object.confidence, { emitEvent : false});\n        this.formCore.get('type').setValue(this.object.type, { emitEvent: false });\n\n        for (var i = 0; i < this.object.label.length; i++) {\n\n          const trait = this.object.label[i]['propertyID'];\n          const value = this.object.label[i]['propertyValue'];\n\n          this.labelData.push(trait);\n\n          if (value != '') {\n            this.addLabel(trait, value);\n            this.memoryLabel.push(trait);\n\n\n            this.staticOtherDef.push({ trait: trait, value: value })\n          }\n\n        }\n\n        setTimeout(() => {\n          for (var i = 0; i < this.object.morphology.length; i++) {\n            const trait = this.object.morphology[i]['trait'];\n            const value = this.object.morphology[i]['value'];\n\n            let traitDescription = '';\n            this.morphologyData.filter(x => {\n              if (x.propertyId == trait && trait != 'partOfSpeech') {\n                x.propertyValues.filter(y => {\n                  if (y.valueId == value) {\n                    traitDescription = y.valueDescription;\n                    return true;\n                  } else {\n                    return false;\n                  }\n                })\n                return true;\n              } else {\n                return false;\n              }\n            })\n            this.addMorphoTraits(trait, value, traitDescription);\n            this.onChangeTrait(trait, i);\n\n            this.staticMorpho.push({ trait: trait, value: value })\n          }\n        }, 100);\n\n\n        setTimeout(() => {\n          let type = this.formCore.get('type').value;\n          this.typesData.forEach(el => {\n            if (el.valueId == type) {\n\n              this.typeDesc = el.valueDescription;\n            }\n          })\n          //@ts-ignore\n          $('.type-tooltip').tooltip({\n            trigger: 'hover'\n          });\n\n\n        }, 1000);\n\n        setTimeout(() => {\n\n          //@ts-ignore\n          $('.trait-tooltip').tooltip({\n            trigger: 'hover'\n          });\n\n\n        }, 1000);\n      }\n    }, 200)\n\n  }\n\n  onChanges(): void {\n\n    this.formCore.controls['confidence'].valueChanges.pipe(startWith(undefined), debounceTime(1000), pairwise()).subscribe(newConfidence => {\n      console.log('Old value: ', newConfidence[0]);\n      console.log('New value: ', newConfidence[1]);\n      this.lexicalService.spinnerAction('on');\n      let parameters = {};\n      let lexId = this.object.formInstanceName;\n      let oldValue = newConfidence[0];\n      let newValue = newConfidence[1];\n\n      if (oldValue == undefined) {\n        parameters = {\n          type: \"confidence\",\n          relation: 'confidence',\n          value: newValue\n        }\n      } else if (oldValue != undefined && this.object.confidence == -1) {\n        parameters = {\n          type: \"confidence\",\n          relation: 'confidence',\n          value: newValue,\n          currentValue: -1\n        }\n      } else {\n        parameters = {\n          type: \"confidence\",\n          relation: 'confidence',\n          value: newValue,\n          currentValue: oldValue\n        }\n      }\n\n      console.log(parameters)\n      this.lexicalService.updateGenericRelation(lexId, parameters).subscribe(\n        data => {\n          console.log(data);\n\n          this.lexicalService.updateLexCard(data)\n          this.lexicalService.spinnerAction('off');\n        },\n        error => {\n          console.log(error);\n\n          this.lexicalService.spinnerAction('off');\n\n          if (error.status == 200) {\n            this.toastr.success('Confidence updated', '', { timeOut: 5000 })\n            this.lexicalService.updateLexCard({ lastUpdate: error.error.text })\n            this.formCore.get('confidence').setValue(newValue, { emitEvent: false });\n            this.object.confidence = newValue;\n          } else {\n            this.toastr.error(error.error, 'Error', { timeOut: 5000 })\n\n          }\n        }\n      )\n    })\n  }\n\n  applyUncertain() {\n    this.lexicalService.spinnerAction('on');\n    let oldValue = this.formCore.get('confidence').value;\n    let lexId = this.object.formInstanceName;\n    let parameters = {\n      relation: 'confidence',\n      value: 0\n    }\n    console.log(parameters)\n    this.lexicalService.deleteLinguisticRelation(lexId, parameters).subscribe(\n      data => {\n        console.log(data);\n        /* data['request'] = 0;\n        data['new_label'] = confidence_value\n        this.lexicalService.refreshAfterEdit(data); */\n        this.lexicalService.updateLexCard(data)\n        this.lexicalService.spinnerAction('off');\n        this.formCore.get('confidence').setValue(-1, { emitEvent: false });\n        this.object.confidence = -1;\n      },\n      error => {\n        console.log(error);\n        /*  const data = this.object.etymology;\n        data['request'] = 0;\n        data['new_label'] = confidence_value;\n        this.lexicalService.refreshAfterEdit(data); */\n        this.lexicalService.spinnerAction('off');\n        this.lexicalService.updateLexCard({ lastUpdate: error.error.text })\n        if (error.status == 200) {\n          this.toastr.success('Confidence updated', '', { timeOut: 5000 })\n          this.formCore.get('confidence').setValue(-1, { emitEvent: false });\n          this.object.confidence = -1;\n\n        } else {\n          this.toastr.error(error.error, 'Error', { timeOut: 5000 })\n\n        }\n      }\n    )\n  }\n\n  onChangeType(evt) {\n    this.lexicalService.spinnerAction('on');\n    const newType = evt.target.value;\n    const formId = this.object.formInstanceName\n    const parameters = { relation: \"type\", value: newType }\n    this.lexicalService.updateForm(formId, parameters).pipe(debounceTime(500)).subscribe(\n      data => {\n        console.log(data)\n        this.lexicalService.spinnerAction('off');\n        data['request'] = 5;\n        data['new_type'] = newType;\n        this.lexicalService.refreshAfterEdit(data);\n        this.lexicalService.updateLexCard(this.object)\n\n        setTimeout(() => {\n          let type = this.formCore.get('type').value;\n          this.typesData.forEach(el => {\n            if (el.valueId == type) {\n\n              this.typeDesc = el.valueDescription;\n            }\n          })\n          //@ts-ignore\n          $('.type-tooltip').tooltip({\n            trigger: 'hover'\n          });\n\n\n        }, 1000);\n      }, error => {\n        console.log(error);\n        const data = this.object;\n        data['request'] = 5;\n        data['new_type'] = newType;\n        this.lexicalService.refreshAfterEdit(data);\n        this.lexicalService.updateLexCard({ lastUpdate: error.error.text })\n        this.lexicalService.spinnerAction('off');\n\n        if (typeof (error.error) != 'object') {\n          this.toastr.error(error.error, 'Error', {\n            timeOut: 5000,\n          });\n        } else {\n          this.toastr.success('Type changed', '', {\n            timeOut: 5000,\n          });\n        }\n\n        setTimeout(() => {\n          let type = this.formCore.get('type').value;\n          this.typesData.forEach(el => {\n            if (el.valueId == type) {\n\n              this.typeDesc = el.valueDescription;\n            }\n          })\n          //@ts-ignore\n          $('.type-tooltip').tooltip({\n            trigger: 'hover'\n          });\n\n\n        }, 1000);\n      }\n    )\n  }\n\n  debounceKeyup(evt, i) {\n    this.lexicalService.spinnerAction('on');\n    this.subject_label.next({ evt, i })\n  }\n\n  debounceKeyupExisting(evt, i) {\n    this.lexicalService.spinnerAction('on');\n    this.subject_ex_label.next({ evt, i })\n  }\n\n  onChangeExistingValue(evt, i) {\n    this.lexicalService.spinnerAction('on');\n    this.morphoTraits = this.formCore.get('morphoTraits') as FormArray;\n    const trait = this.morphoTraits.at(i).get('trait').value;\n    const oldValue = this.morphoTraits.at(i).get('value').value;\n    const newValue = evt.target.value;\n\n    this.morphoTraits.at(i).get('value').setValue(newValue, { emitEvent: false });\n\n    if (newValue != '') {\n      let parameters = {\n        type: \"morphology\",\n        relation: trait,\n        value: newValue,\n        currentValue: oldValue\n      }\n\n      this.staticMorpho[i] = { trait: trait, value: newValue }\n      let formId = this.object.formInstanceName;\n      console.log(parameters)\n\n      this.lexicalService.updateLinguisticRelation(formId, parameters).pipe(debounceTime(1000)).subscribe(\n        data => {\n          console.log(data)\n          //this.lexicalService.refreshAfterEdit(data);\n          this.lexicalService.updateLexCard(data)\n          this.lexicalService.spinnerAction('off');\n        },\n        error => {\n          console.log(error)\n          //this.lexicalService.refreshAfterEdit({ label: this.object.label });\n          this.lexicalService.updateLexCard({ lastUpdate: error.error.text })\n          this.lexicalService.spinnerAction('off');\n          if (error.status != 200) {\n            this.toastr.error(error.error, 'Error', {\n              timeOut: 5000,\n            });\n          } else {\n            this.toastr.success('Morphologic trait changed', '', {\n              timeOut: 5000,\n            });\n          }\n        }\n      )\n\n    } else {\n      this.lexicalService.spinnerAction('off');\n    }\n  }\n\n  onChangeValue(i) {\n    this.lexicalService.spinnerAction('on');\n    this.morphoTraits = this.formCore.get('morphoTraits') as FormArray;\n    const trait = this.morphoTraits.at(i).get('trait').value;\n    const value = this.morphoTraits.at(i).get('value').value;\n    if (trait != '' && value != '') {\n\n      let parameters = {\n        type: \"morphology\",\n        relation: trait,\n        value: value\n      }\n      let formId = this.object.formInstanceName;\n\n      let traitDescription = '';\n      this.morphologyData.filter(x => {\n        if (x.propertyId == trait && trait != 'partOfSpeech') {\n          x.propertyValues.filter(y => {\n            if (y.valueId == value) {\n              traitDescription = y.valueDescription;\n              return true;\n            } else {\n              return false;\n            }\n          })\n          return true;\n        } else {\n          return false;\n        }\n      })\n      console.log(parameters);\n      this.morphoTraits.at(i).get('description').setValue(traitDescription, { emitEvent: false });\n\n      this.staticMorpho.push({ trait: trait, value: value })\n\n      this.lexicalService.updateLinguisticRelation(formId, parameters).pipe(debounceTime(1000)).subscribe(\n        data => {\n          console.log(data)\n          this.lexicalService.spinnerAction('off');\n          this.lexicalService.updateLexCard(this.object)\n          this.disableAddMorpho = false;\n          setTimeout(() => {\n\n            //@ts-ignore\n            $('.trait-tooltip').tooltip({\n              trigger: 'hover'\n            });\n\n\n          }, 1000);\n        },\n        error => {\n          console.log(error)\n          this.lexicalService.updateLexCard({ lastUpdate: error.error.text })\n          this.lexicalService.spinnerAction('off');\n          this.disableAddMorpho = false;\n          if (typeof (error.error) != 'object') {\n            this.toastr.error(error.error, 'Error', {\n              timeOut: 5000,\n            });\n          } else {\n            this.toastr.info('', 'Ok', {\n              timeOut: 5000,\n            });\n          }\n\n          setTimeout(() => {\n\n            //@ts-ignore\n            $('.trait-tooltip').tooltip({\n              trigger: 'hover'\n            });\n\n\n          }, 1000);\n        }\n      )\n    } else {\n      this.lexicalService.spinnerAction('off');\n    }\n  }\n\n  onChangeTrait(evt, i) {\n\n    if (evt.target != undefined) {\n      setTimeout(() => {\n        this.morphoTraits = this.formCore.get('morphoTraits') as FormArray;\n        this.morphoTraits.at(i).patchValue({ trait: evt.target.value, value: \"\" });\n        //console.log(evt.target.value)\n        if (evt.target.value != '') {\n          var arrayValues = this.morphologyData.filter(x => {\n            return x['propertyId'] == evt.target.value;\n          })['0']['propertyValues'];\n          this.valueTraits[i] = arrayValues;\n          this.memoryTraits[i] = evt.target.value;\n        } else {\n          let arrayValues = [];\n          this.valueTraits[i] = arrayValues\n          this.memoryTraits.splice(i, 1)\n        }\n\n\n\n      }, 500);\n    } else {\n\n      var timer = setInterval((val) => {\n        try {\n          var arrayValues = this.morphologyData.filter(x => {\n            return x['propertyId'] == evt;\n          })['0']['propertyValues'];\n          this.valueTraits[i] = arrayValues;\n          this.memoryTraits.push(evt);\n          //console.log(\"CIAO\")\n          if (this.valueTraits != undefined) {\n            clearInterval(timer)\n          }\n\n        } catch (e) {\n          console.log(e)\n        }\n      }, 500)\n\n      /* setTimeout(() => {\n\n        var arrayValues = this.morphologyData.filter(x => {\n          return x['propertyId'] == evt;\n        })['0']['propertyValues'];\n        this.valueTraits[i] = arrayValues;\n        //console.log(this.valueTraits)\n        this.memoryTraits.push(evt);\n\n      }, 500); */\n    }\n  }\n\n  onChangeLabelTrait(evt, i) {\n\n    setTimeout(() => {\n      this.labelArray = this.formCore.get('label') as FormArray;\n      this.labelArray.at(i).patchValue({ propertyID: evt.target.value, propertyValue: \"\" });\n      //console.log(this.labelArray)\n      if (evt.target.value != '') {\n\n        this.memoryLabel[i] = evt.target.value;\n      } else {\n\n        this.memoryLabel.splice(i, 1)\n      }\n\n\n\n    }, 250);\n  }\n\n  onChangeExistingLabelValue(evt, i) {\n    this.lexicalService.spinnerAction('on');\n    this.labelArray = this.formCore.get('label') as FormArray;\n    const trait = this.labelArray.at(i).get('propertyID').value;\n    const newValue = evt.target.value;\n\n    //console.log(this.object)\n\n    if (newValue != '') {\n      const parameters = { relation: trait, value: newValue }\n\n      this.staticOtherDef[i] = { trait: trait, value: newValue }\n      let formId = this.object.formInstanceName;\n\n\n\n      this.lexicalService.updateForm(formId, parameters).pipe(debounceTime(1000)).subscribe(\n        data => {\n          console.log(data)\n          this.lexicalService.spinnerAction('off');\n          //this.lexicalService.refreshLexEntryTree();\n          this.lexicalService.updateLexCard(data)\n        }, error => {\n          console.log(error);\n          //this.lexicalService.refreshLexEntryTree();\n\n          this.lexicalService.updateLexCard({ lastUpdate: error.error.text })\n          this.lexicalService.spinnerAction('off');\n\n          if (typeof (error.error) != 'object') {\n            this.toastr.error(error.error, 'Error', {\n              timeOut: 5000,\n            });\n          } else {\n            this.toastr.success('Label changed', '', {\n              timeOut: 5000,\n            });\n          }\n        }\n      )\n\n      if (trait == 'writtenRep') {\n        const data = this.object;\n        data['whatToSearch'] = 'form';\n        data['new_label'] = newValue;\n        data['request'] = 3;\n        this.lexicalService.refreshAfterEdit(data);\n      }\n\n    } else {\n      this.lexicalService.spinnerAction('off');\n      this.staticOtherDef[i] = { trait: trait, value: \"\" }\n    }\n  }\n\n  onChangeLabel(object) {\n\n    this.labelArray = this.formCore.get('label') as FormArray;\n    const trait = this.labelArray.at(object.i).get('propertyID').value;\n    const newValue = object.evt.target.value;\n    const formId = this.object.formInstanceName;\n    const parameters = { relation: trait, value: newValue }\n    //console.log(this.object)\n\n    this.staticOtherDef.push({ trait: trait, value: newValue })\n\n    if (trait != undefined && newValue != '') {\n      this.lexicalService.updateForm(formId, parameters).pipe(debounceTime(1000)).subscribe(\n        data => {\n          console.log(data)\n          this.lexicalService.spinnerAction('off');\n          /* this.lexicalService.refreshAfterEdit(data); */\n          this.lexicalService.updateLexCard(data)\n          this.disableAddOther = false;\n        }, error => {\n          console.log(error);\n          this.disableAddOther = false;\n\n          this.lexicalService.updateLexCard({ lastUpdate: error.error.text })\n          this.lexicalService.spinnerAction('off');\n        }\n      )\n    } else {\n      this.lexicalService.spinnerAction('off');\n    }\n  }\n\n  createMorphoTraits(t?, v?, d?): FormGroup {\n    if (t != undefined) {\n      return this.formBuilder.group({\n        trait: new FormControl(t, [Validators.required, Validators.minLength(0)]),\n        value: new FormControl(v, [Validators.required, Validators.minLength(0)]),\n        description: new FormControl(d, [Validators.required, Validators.minLength(0)])\n      })\n    } else {\n      return this.formBuilder.group({\n        trait: new FormControl('', [Validators.required, Validators.minLength(0)]),\n        value: new FormControl('', [Validators.required, Validators.minLength(0)]),\n        description: new FormControl('', [Validators.required, Validators.minLength(0)])\n      })\n    }\n  }\n\n  createInheritance(t?, v?): FormGroup {\n    return this.formBuilder.group({\n      trait: t,\n      value: v\n    })\n  }\n\n  createLabel(t?, v?): FormGroup {\n    if (t != undefined) {\n      return this.formBuilder.group({\n        propertyID: new FormControl(t, [Validators.required, Validators.minLength(0)]),\n        propertyValue: new FormControl(v, [Validators.required, Validators.minLength(0)])\n      })\n    } else {\n      return this.formBuilder.group({\n        propertyID: new FormControl('', [Validators.required, Validators.minLength(0)]),\n        propertyValue: new FormControl('', [Validators.required, Validators.minLength(0)])\n      })\n    }\n\n  }\n\n  addLabel(t?, v?) {\n    this.labelArray = this.formCore.get('label') as FormArray;\n    if (t != undefined) {\n      this.labelArray.push(this.createLabel(t, v));\n    } else {\n      this.disableAddOther = true;\n      this.labelArray.push(this.createLabel());\n    }\n\n  }\n\n  addInheritance(t?, v?) {\n    this.inheritanceArray = this.formCore.get('inheritance') as FormArray;\n    this.inheritanceArray.push(this.createInheritance(t, v));\n  }\n\n  addMorphoTraits(t?, v?, d?) {\n    this.morphoTraits = this.formCore.get('morphoTraits') as FormArray;\n    if (t != undefined) {\n      this.morphoTraits.push(this.createMorphoTraits(t, v, d));\n    } else {\n      this.morphoTraits.push(this.createMorphoTraits());\n      this.disableAddMorpho = true;\n    }\n  }\n\n  removeElement(index) {\n    this.morphoTraits = this.formCore.get('morphoTraits') as FormArray;\n\n    const trait = this.morphoTraits.at(index).get('trait').value;\n    const value = this.morphoTraits.at(index).get('value').value;\n\n    //console.log(trait + value)\n\n    if (trait != '') {\n\n      let formId = this.object.formInstanceName;\n\n      let parameters = {\n        type: 'morphology',\n        relation: trait,\n        value: value\n      }\n\n      this.lexicalService.deleteLinguisticRelation(formId, parameters).subscribe(\n        data => {\n          console.log(data)\n          this.toastr.success('Element removed', '', {\n            timeOut: 5000,\n          });\n          this.lexicalService.updateLexCard(this.object)\n        }, error => {\n          console.log(error)\n          if (error.status != 200) {\n            this.toastr.error(error.error, 'Error', {\n              timeOut: 5000,\n            });\n          }\n        }\n      )\n    } else {\n      this.disableAddMorpho = false;\n    }\n\n    this.staticMorpho.splice(index, 1);\n    this.morphoTraits.removeAt(index);\n    this.memoryTraits.splice(index, 1);\n    this.valueTraits.splice(index, 1)\n  }\n\n  removeLabel(index) {\n    this.labelArray = this.formCore.get('label') as FormArray;\n\n\n    const trait = this.labelArray.at(index).get('propertyID').value;\n    const value = this.labelArray.at(index).get('propertyValue').value;\n\n    //console.log(trait + value)\n\n    if (trait != '') {\n\n      let formId = this.object.formInstanceName;\n\n      let parameters = {\n        type: 'morphology',\n        relation: trait,\n        value: value\n      }\n\n      this.lexicalService.deleteLinguisticRelation(formId, parameters).subscribe(\n        data => {\n          console.log(data)\n          this.lexicalService.updateLexCard(this.object)\n        }, error => {\n          console.log(error)\n        }\n      )\n    } else {\n      this.disableAddOther = false;\n\n    }\n    this.staticOtherDef.splice(index, 1)\n    this.labelArray.removeAt(index);\n  }\n\n}\n","\n\n<form [formGroup]=\"formCore\" *ngIf=\"object != null\">\n    <div class=\"form-group row ml-2 mt-3 mr-2\">\n        <div class=\"input-group col-lg-12\">\n            <div class=\"card\">\n                <span class=\"text-id\"><b>INHERITANCE</b></span>\n                <div class=\"card-body\">\n                    <div class=\"d-flex my-2\" formArrayName=\"inheritance\"\n                        *ngFor=\"let inher of formCore.get('inheritance')['controls']; let i = index\">\n                        <div class=\"col-md-3\" [formGroupName]=\"i\">\n                            <span class=\"col-form-label\">{{inher.value['trait']}}</span>\n                        </div>\n                        <div class=\"input-group col-md-7\" [formGroupName]=\"i\">\n\n                            <input formControlName=\"value\" name=\"value\" type=\"text\" class=\"form-control\" placeholder=\"\"\n                                [value]=\"inher.value['value']\" readonly>\n                        </div>\n                    </div>\n\n                </div>\n            </div>\n        </div>\n    </div>\n    <div class=\"form-group row ml-2 mt-3 mr-2\">\n        <label for=\"inputType\" class=\"col-lg-3 col-form-label\">Type:</label>\n        <div class=\"col-lg-7 input-group\">\n            <select formControlName=\"type\" name=\"type\" class=\"form-control\" (change)=\"onChangeType($event)\">\n                <option *ngFor=\"let type of typesData\" [selected]=\"object.type === type['valueId']\">{{type['valueId'] }}\n                </option>\n            </select>\n            <div class=\"input-group-append ml-2\">\n                 <button class=\"btn btn-secondary type-tooltip\" type=\"button\" data-toggle=\"tooltip\"\n                data-placement=\"top\" data-trigger=\"hover\" [attr.data-original-title]=\"typeDesc\"\n                    style=\"font-size: 12px; border-radius: .25rem;\"><i class=\"fas fa-question\"></i></button>\n            </div>\n        </div>\n    </div>\n    \n    <div class=\"form-group row ml-2 mt-3 mr-2\" *ngIf=\"{confidence : formCore.get('confidence').value >= 0}; let variable\">\n        <div class=\"col-lg-3\">\n            <label for=\"uncertainBox\">Uncertain</label>\n        </div>\n        <div class=\"col-lg-3 input-group\">\n            <input *ngIf=\"variable.confidence\" id=\"attributes\"  step=\"0.1\" formControlName=\"confidence\" name=\"confidence\" type=\"number\" min=\"0\" max=\"1\" class=\"form-control\" placeholder=\"No info\" [value]=\"formCore.get('confidence').value\">\n            <button type=\"button\" class=\"btn btn-secondary rounded-circle ml-2\" *ngIf=\"!variable.confidence\" (click)=\"variable.confidence = !variable.confidence\"><i class=\"fas fa-plus\"></i></button>\n            <button type=\"button\" class=\"btn btn-secondary rounded-circle ml-2\" *ngIf=\"variable.confidence\" (click)=\"variable.confidence = !variable.confidence; applyUncertain()\"><i class=\"fas fa-minus\"></i></button>\n        </div>\n    </div>\n\n    <div class=\"form-group row ml-2 mt-3 mr-2\">\n        <div class=\"input-group col-lg-12\">\n            <div class=\"card\">\n                <span class=\"text-id\"><b>OTHER REPRESENTATION</b></span>\n                <a class=\"pointer\" (click)=\"addLabel()\" [ngClass]=\"{no_pointer: disableAddOther}\"><span class=\"collapse-icon\"><i\n                            class=\"fa fa-plus-square\"></i></span></a>\n                <div class=\"card-body\">\n                    <div class=\"d-flex my-3\" *ngFor=\"let def of staticOtherDef; let i = index\">\n                        <div class=\"col-md-4\">\n                            <label class=\"col-form-label\">{{def['trait']}}</label>\n                        </div>\n                        <div class=\"input-group col-md-8\">\n                            <input type=\"text\" class=\"form-control\"\n                                placeholder=\"\" (keyup)=\"debounceKeyupExisting($event, i)\" [value]=\"def['value']\">\n                            <div *ngIf=\"def['trait'] != 'writtenRep'\" (click)=\"removeLabel(i)\" class=\"input-group-append ml-2\"> <button\n                                    class=\"btn btn-danger\" type=\"button\"\n                                    style=\"font-size: 12px; border-radius: .25rem;\"><i\n                                        class=\"fa fa-trash-alt\"></i></button>\n                            </div>\n                            <div class=\"invalid-feedback\" *ngIf=\"staticOtherDef[i]['value'] == ''\" style=\"display: block;\">\n                                Please, don't leave this field blank\n                            </div>\n\n                        </div>\n                    </div>\n                    <div class=\"d-flex my-2\" formArrayName=\"label\"\n                        *ngFor=\"let l of formCore.get('label')['controls']; let i = index\">\n                        <div class=\"col-md-4\" [formGroupName]=\"i\" *ngIf=\"i + 1 > staticOtherDef.length\">\n                            <select class=\"form-control selectTrait\" formControlName=\"propertyID\" name=\"propertyID\"\n                                style=\"font-size: 12px;\" (change)=\"onChangeLabelTrait($event, i)\">\n                                <option value=\"\">Select a trait...</option>\n                                <option *ngFor=\"let ld of labelData\" [selected]=\"l.value['propertyID'] === ld\"\n                                    [disabled]=\"memoryLabel.indexOf(ld) > -1\">{{ld}}</option>\n                            </select>\n                            <div class=\"invalid-feedback\" *ngIf=\"l.get('propertyID').invalid\" style=\"display: block;\">\n                                Please, don't leave this field blank\n                            </div>\n                        </div>\n                        <div class=\"input-group col-md-8\" [formGroupName]=\"i\" *ngIf=\"i + 1 > staticOtherDef.length\">\n                            <input formControlName=\"propertyValue\" name=\"propertyValue\" type=\"text\" class=\"form-control\"\n                                placeholder=\"\" (keyup)=\"debounceKeyup($event, i)\">\n                            <div (click)=\"removeLabel(i)\" class=\"input-group-append ml-2\"> <button\n                                    class=\"btn btn-danger\" type=\"button\"\n                                    style=\"font-size: 12px; border-radius: .25rem;\"><i\n                                        class=\"fa fa-trash-alt\"></i></button>\n                            </div>\n                            <div class=\"invalid-feedback\" *ngIf=\"l.get('propertyValue').invalid\" style=\"display: block;\">\n                                Please, don't leave this field blank\n                            </div>\n                        </div>\n                    </div>\n\n                </div>\n            </div>\n        </div>\n    </div>\n\n\n\n    <div class=\"form-group row ml-2 mt-3 mr-2\">\n        <div class=\"input-group col-lg-12\">\n            <div class=\"card\">\n                <span class=\"text-id\"><b>MORPHOLOGY</b></span>\n                <a class=\"pointer\" (click)=\"addMorphoTraits()\" [ngClass]=\"{no_pointer: disableAddMorpho}\"><span class=\"collapse-icon\"><i\n                            class=\"fa fa-plus-square\"></i></span></a>\n                <div class=\"card-body\">\n\n                    <div class=\"d-flex my-3\" *ngFor=\"let stat of staticMorpho; let i = index\">\n                        \n                        <div class=\"col-md-4\"> <!-- *ngIf=\"stat['trait'] != 'partOfSpeech'\" -->\n                            <label class=\"col-form-label\">{{stat['trait']}}</label>\n                        </div>\n                        <div class=\"input-group col-md-8\">\n                            <select class=\"form-control selectTrait\" style=\"font-size:12px;\"\n                                (change)=\"onChangeExistingValue($event, i)\">\n                                <option *ngFor=\"let item of valueTraits[i];\"\n                                    [selected]=\"stat['value'] === item.valueId\">{{item.valueId}}</option>\n                            </select>\n                           \n                            <div class=\"input-group-append ml-2\">\n                                <button *ngIf=\"formCore['controls'].morphoTraits?.value[i] != null\" class=\"btn btn-secondary trait-tooltip\" type=\"button\" data-toggle=\"tooltip\"\n                                data-placement=\"top\" data-trigger=\"hover\" [attr.data-original-title]=\"formCore.get('morphoTraits').at(i).get('description').value\"\n                                    style=\"font-size: 12px; border-radius: .25rem;\"><i class=\"fas fa-question\"></i></button>\n                            </div>\n                            <div (click)=\"removeElement(i)\" class=\"input-group-append ml-2\"> <button\n                                    class=\"btn btn-danger\" type=\"button\"\n                                    style=\"font-size: 12px; border-radius: .25rem;\"><i\n                                        class=\"fa fa-trash-alt\"></i></button>\n                            </div>\n                        </div>\n                    </div>\n                    \n                    <div>\n\n                    </div>\n                    \n                    <div class=\"d-flex\" formArrayName=\"morphoTraits\"\n                        *ngFor=\"let morpho of formCore.get('morphoTraits')['controls']; let i = index\">\n                        <div class=\"col-md-4 my-2\" [formGroupName]=\"i\" *ngIf=\"i + 1 > staticMorpho.length\">\n                            <select class=\"form-control selectTrait\" formControlName=\"trait\" name=\"trait\"\n                                style=\"font-size: 12px;\" (change)=\"onChangeTrait($event, i)\">\n                                <option value=\"\">Select a trait...</option>\n                                <option *ngFor=\"let mt of morphologyData\"\n                                    [selected]=\"morpho.value['trait'] === mt.propertyId\"\n                                    [disabled]=\"memoryTraits.indexOf(mt.propertyId) > -1\">{{mt.propertyId}}</option>\n                            </select>\n                            <div class=\"invalid-feedback\" *ngIf=\"morpho.get('trait').invalid\" style=\"display: block;\">\n                                Please, don't leave this field blank\n                            </div>\n                        </div>\n                        <div class=\"input-group col-md-8 my-2\" [formGroupName]=\"i\" *ngIf=\"i + 1> staticMorpho.length\">\n                            <select class=\"form-control selectTrait\" formControlName=\"value\" name=\"value\"\n                                style=\"font-size:12px;\" (change)=\"onChangeValue(i)\">\n                                <option value=\"\">Select a value...</option>\n                                <option *ngFor=\"let item of valueTraits[i];\" [attr.data-index]=\"i\"\n                                    [selected]=\"morpho.value['value'] === item.valueId\">{{item.valueId}}</option>\n                            </select>\n\n                            <div (click)=\"removeElement(i)\" class=\"input-group-append ml-2\"> <button\n                                    class=\"btn btn-danger\" type=\"button\"\n                                    style=\"font-size: 12px; border-radius: .25rem;\"><i\n                                        class=\"fa fa-trash-alt\"></i></button>\n                            </div>\n                            <div class=\"invalid-feedback\" *ngIf=\"morpho.get('value').invalid\" style=\"display: block;\">\n                                Please, don't leave this field blank\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n</form>","/*\n   Copyright 2021-2022  Istituto di Linguistica Computazionale \"A. Zampolli\", Consiglio Nazionale delle Ricerche, Pisa, Italy.\n \nThis file is part of EpiLexo.\n\nEpiLexo is free software: you can redistribute it and/or modify it under the terms of the GNU General Public License as published by the Free Software Foundation, either version 3 of the License, or (at your option) any later version.\n\nEpiLexo is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for more details.\n\nYou should have received a copy of the GNU General Public License along with EpiLexo. If not, see <https://www.gnu.org/licenses/>.\n*/\n\nimport { Component, OnInit } from '@angular/core';\n\n@Component({\n  selector: 'app-data-search-form',\n  templateUrl: './data-search-form.component.html',\n  styleUrls: ['./data-search-form.component.scss']\n})\nexport class DataSearchFormComponent implements OnInit {\n\n  constructor() { }\n\n  ngOnInit(): void {\n  }\n\n  onSubmit(): void {\n    // Process checkout data here\n    \n    console.warn('Your order has been submitted');\n    \n  }\n}\n","\n\n<form (ngSubmit)=\"onSubmit()\" class=\"h-100 d-flex flex-column\">\n    <!-- FULL TEXT -->\n    <div class=\"card\">\n        <div class=\"card-header\" id=\"headingOne\">\n            <h5 class=\"mb-0\">\n                <a class=\"btn\" aria-expanded=\"true\">\n                    Ricerca Full-Text\n                </a>\n            </h5>\n        </div>\n        <div class=\"collapse show\" aria-labelledby=\"headingOne\" data-parent=\"#search-accordion\">\n            <div class=\"card-body\">\n                <div class=\"form-row\">\n                    <div class=\"form-group col-md-8\">\n                        <label for=\"fullTextInput\">Testo: </label>\n                        <input type=\"text\" class=\"form-control\" id=\"fullTextInput\" placeholder=\"\">\n                    </div>\n                </div>\n                <div class=\"form-row\">\n                    <div class=\"form-group col-md-8\">\n                        <label for=\"selectFullText\">Cerca le schede che contengono:</label>\n                        <select class=\"form-control\" id=\"selectFullText\">\n                            <option>Tutte le parole</option>\n                            <option>Una qualsiasi delle parole</option>\n                            <option>La frase esatta</option>\n                        </select>\n                    </div>\n                </div>\n\n            </div>\n        </div>\n    </div>\n\n    <div id=\"search-accordion\">\n\n        <!-- DATI GENERALI -->\n        <div class=\"card\">\n            <div class=\"card-header\" id=\"generalDataHeading\">\n                <h5 class=\"mb-0\">\n                    <a class=\"btn btn-link collapsed\" data-toggle=\"collapse\" data-target=\"#generalDataCollapse\"\n                        aria-expanded=\"false\" aria-controls=\"generalDataCollapse\">\n                        <i class=\"fa\"></i>&nbsp;Dati generali\n                    </a>\n                </h5>\n            </div>\n            <div id=\"generalDataCollapse\" class=\"collapse\" aria-labelledby=\"generalDataHeading\"\n                data-parent=\"#search-accordion\">\n                <div class=\"card-body form-row\">\n                    <div class=\"form-group col-md-6\">\n                        <label for=\"idText\">Identificativo:</label>\n                        <input type=\"text\" class=\"form-control\" id=\"idText\" placeholder=\"\">\n                    </div>\n                    <div class=\"form-group col-md-6\">\n                        <label for=\"titleInput\">Titolo: </label>\n                        <input type=\"text\" class=\"form-control\" id=\"titleInput\" placeholder=\"\">\n                    </div>\n                    <div class=\"form-group col-md-8\">\n                        <label for=\"selectTitle\">Cerca le schede che contengono:</label>\n                        <select class=\"form-control\" id=\"selectTitle\">\n                            <option>Tutte le parole</option>\n                            <option>Una qualsiasi delle parole</option>\n                            <option>La frase esatta</option>\n                        </select>\n                    </div>\n                </div>\n            </div>\n        </div>\n\n        <!-- SUPPORTO -->\n        <div class=\"card\">\n            <div class=\"card-header\" id=\"supportHeading\">\n                <h5 class=\"mb-0\">\n                    <a class=\"btn btn-link collapsed\" data-toggle=\"collapse\" data-target=\"#supportCollapse\"\n                        aria-expanded=\"false\" aria-controls=\"supportCollapse\">\n                        <i class=\"fa\"></i>&nbsp;Supporto\n                    </a>\n                </h5>\n            </div>\n            <div id=\"supportCollapse\" class=\"collapse\" aria-labelledby=\"supportHeading\" data-parent=\"#search-accordion\">\n                <div class=\"card-body\">\n                    <div class=\"row\">\n                        <div class=\"form-group col-md-8\">\n                            <label for=\"inscriptionType\">Tipo di iscrizione: </label>\n                            <select class=\"form-control\" id=\"inscriptionType\">\n                                <option>Funeraria</option>\n                                <option>Ode</option>\n                                <option>Mercantile</option>\n                            </select>\n                        </div>\n                    </div>\n                    <div class=\"row\">\n                        <div class=\"form-group col-md-8\">\n                            <label for=\"objectType\">Tipo di oggetto: </label>\n                            <select class=\"form-control\" id=\"objectType\">\n                                <option>Marmo</option>\n                                <option>Papiro</option>\n                                <option>Pietra</option>\n                            </select>\n                        </div>\n                    </div>\n                    <div class=\"row\">\n                        <div class=\"form-group col-md-8\">\n                            <label for=\"ancientPlaceName\">Luogo di rinvenimento (nome antico): </label>\n                            <input type=\"text\" class=\"form-control\" id=\"ancientPlaceName\" placeholder=\"\">\n                        </div>\n                    </div>\n                    <div class=\"row\">\n                        <div class=\"form-group col-md-8\">\n                            <label for=\"modernPlaceName\">Luogo di rinvenimento (nome moderno): </label>\n                            <input type=\"text\" class=\"form-control\" id=\"modernPlaceName\" placeholder=\"\">\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n\n\n        <!-- BIBLIOGRAFIA -->\n        <div class=\"card\">\n            <div class=\"card-header\" id=\"bibliographyHeading\">\n                <h5 class=\"mb-0\">\n                    <a class=\"btn btn-link collapsed\" data-toggle=\"collapse\" data-target=\"#bibliographyCollapse\"\n                        aria-expanded=\"false\" aria-controls=\"bibliographyCollapse\">\n                        <i class=\"fa\"></i>&nbsp;Bibliografia\n                    </a>\n                </h5>\n            </div>\n            <div id=\"bibliographyCollapse\" class=\"collapse\" aria-labelledby=\"bibliographyHeading\"\n                data-parent=\"#search-accordion\">\n                <div class=\"card-body\">\n                    <div class=\"row\">\n                        <div class=\"form-group col-md-8\">\n                            <label for=\"authorSelect\">Autore: </label>\n                            <select class=\"form-control\" id=\"authorSelect\">\n                                <option>...</option>\n                            </select>\n                        </div>\n                    </div>\n                    <div class=\"row\">\n                        <div class=\"form-group col-md-8\">\n                            <label for=\"titleInput\">Titolo: </label>\n                            <input type=\"text\" class=\"form-control\" id=\"titleInput\" placeholder=\"\">\n                        </div>\n                    </div>\n                    <div class=\"row\">\n                        <div class=\"form-group col-md-8\">\n                            <label for=\"publicationYear\">Anno pubblicazione:&nbsp;&nbsp;&nbsp;&nbsp;</label>\n                            <input type=\"number\" class=\"form-control\" id=\"publicationYear\" placeholder=\"1900\">\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n\n        <!-- CRONOLOGIA -->\n        <div class=\"card\">\n            <div class=\"card-header\" id=\"chronologyHeading\">\n                <h5 class=\"mb-0\">\n                    <a class=\"btn btn-link collapsed\" data-toggle=\"collapse\" data-target=\"#chronologyCollapse\"\n                        aria-expanded=\"false\" aria-controls=\"chronologyCollapse\">\n                        <i class=\"fa\"></i>&nbsp;Cronologia\n                    </a>\n                </h5>\n            </div>\n            <div id=\"chronologyCollapse\" class=\"collapse\" aria-labelledby=\"chronologyHeading\"\n                data-parent=\"#search-accordion\">\n                <div class=\"card-body\">\n                    <div class=\"form-group\">\n                        <div class=\"form-check\">\n                            <input class=\"form-check-input\" type=\"checkbox\" id=\"intervalDate\"\n                                onchange=\"document.getElementById('toDate').disabled = !this.checked;\">\n                            <label class=\"form-check-label\" for=\"intervalDate\">\n                                Intervallo\n                            </label>\n                        </div>\n                    </div>\n\n                    <div class=\"form-group mb-2\">\n                        <label for=\"fromDate\">Da:&nbsp;&nbsp;&nbsp;&nbsp;</label>\n                        <input type=\"number\" class=\"form-control\" id=\"fromDate\" placeholder=\"-100\">\n                    </div>\n                    <div class=\"form-group mb-2\">\n                        <label for=\"toDate\">A:&nbsp;&nbsp;&nbsp;&nbsp;</label>\n                        <input type=\"number\" class=\"form-control\" id=\"toDate\" placeholder=\"100\" disabled>\n                    </div>\n\n                </div>\n            </div>\n        </div>\n\n        <!-- TESTO -->\n        <div class=\"card\">\n            <div class=\"card-header\" id=\"textHeading\">\n                <h5 class=\"mb-0\">\n                    <a class=\"btn btn-link collapsed\" data-toggle=\"collapse\" data-target=\"#textCollapse\"\n                        aria-expanded=\"false\" aria-controls=\"textCollapse\">\n                        <i class=\"fa\"></i>&nbsp;Testo\n                    </a>\n                </h5>\n            </div>\n            <div id=\"textCollapse\" class=\"collapse\" aria-labelledby=\"textHeading\" data-parent=\"#search-accordion\">\n                <div class=\"card-body\">\n                    <div class=\"form-row align-items-center\">\n                        <div class=\"col-sm-6 my-1\">\n                            <label class=\"sr-only\" for=\"searchText\">Testo:</label>\n                            <input type=\"text\" class=\"form-control\" id=\"searchText\" placeholder=\"Cerca nel testo\">\n                        </div>\n                        <div class=\"col-sm-6 my-1\">\n                            <div class=\"custom-control custom-switch custom-switch-lg\">\n                                <input type=\"checkbox\" class=\"custom-control-input\" id=\"transliteratorSwitcher\">\n                                <label class=\"custom-control-label\" for=\"transliteratorSwitcher\">Greek char</label>\n                            </div>\n                        </div>\n                        <div class=\"col-sm-6 my-2\">\n                            <label class=\"sr-only\" for=\"editionSelect\">Example select</label>\n                            <select class=\"form-control\" id=\"editionSelect\">\n                                <option>Diplomatica</option>\n                                <option>Interpretativa</option>\n                                <option>Entrambe</option>\n                            </select>\n                        </div>\n                    </div>\n                    <div class=\"form-row align-items-center\">\n                        <div class=\"col-md-4 col-sm-12\">\n                            <label for=\"langSelect\">Lingua</label>\n                            <select class=\"form-control\" id=\"langSelect\">\n                                <option>...</option>\n                            </select>\n                        </div>\n                        <div class=\"col-md-4 col-sm-12\">\n                            <label for=\"alfaSelect\">Alfabeto</label>\n                            <select class=\"form-control\" id=\"alfaSelect\">\n                                <option>...</option>\n                            </select>\n                        </div>\n                        <div class=\"col-md-4 col-sm-12\">\n                            <label for=\"ducSelect\">Ductus</label>\n                            <select class=\"form-control\" id=\"ducSelect\">\n                                <option>...</option>\n                            </select>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n\n    <!-- BUTTONS -->\n    <div class=\"h-100 mb-3\" style=\"border:none;\">\n        <div class=\" h-100\">\n            <div class=\"form-row align-items-end h-100\">\n                <div class=\"col-sm-2\">\n\n                </div>\n                <div class=\"col-sm-4\">\n                    <button class=\"btn btn-danger btn-block\" type=\"reset\" value=\"Reset\"><i class=\"fa fa-eraser\"></i>\n                        Reset</button>\n                </div>\n                <div class=\"col-sm-4\">\n                    <button class=\"btn btn-primary btn-block\" type=\"submit\" value=\"Submit\"><i class=\"fa fa-search\"></i>\n                        Cerca</button>\n                </div>\n                <div class=\"col-sm-2\">\n\n                </div>\n            </div>\n        </div>\n    </div>\n</form>","/*\n   Copyright 2021-2022  Istituto di Linguistica Computazionale \"A. Zampolli\", Consiglio Nazionale delle Ricerche, Pisa, Italy.\n \nThis file is part of EpiLexo.\n\nEpiLexo is free software: you can redistribute it and/or modify it under the terms of the GNU General Public License as published by the Free Software Foundation, either version 3 of the License, or (at your option) any later version.\n\nEpiLexo is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for more details.\n\nYou should have received a copy of the GNU General Public License along with EpiLexo. If not, see <https://www.gnu.org/licenses/>.\n*/\n\nimport { ChangeDetectorRef, Component, Input, OnInit, SimpleChanges } from '@angular/core';\nimport { DataService, Person } from './data.service';\nimport { LexicalEntriesService } from '../../../../../../services/lexical-entries/lexical-entries.service';\nimport { Subject, Subscription } from 'rxjs';\nimport { ToastrService } from 'ngx-toastr';\n\n\nimport { FormBuilder, FormGroup, FormArray, FormControl, Validators, Form } from '@angular/forms';\nimport { debounceTime, pairwise, startWith } from 'rxjs/operators';\nimport { NgSelectComponent } from '@ng-select/ng-select';\nimport { LilaService } from 'src/app/services/lila/lila.service';\n\n\n@Component({\n    selector: 'app-lexical-entry-core-form',\n    templateUrl: './lexical-entry-core-form.component.html',\n    styleUrls: ['./lexical-entry-core-form.component.scss']\n})\nexport class LexicalEntryCoreFormComponent implements OnInit {\n\n    @Input() lexData: any;\n\n    private subject: Subject<any> = new Subject();\n    switchInput = false;\n    subscription: Subscription;\n    object: any;\n    people: Person[] = [];\n    peopleLoading = false;\n    counter = 0;\n    lexEntryTypesData = [];\n    morphologyData = [];\n    valueTraits = [];\n    memoryTraits = [];\n    memoryValues = [];\n    languages = [];\n\n    memoryDenotes = [];\n    memoryCognates = [];\n    memoryEvokes = [];\n\n    valuePos = [];\n    memoryPos = '';\n\n    posDescription = '';\n    typeDesc = '';\n    staticMorpho = [];\n\n    interval;\n\n    searchResults= [];\n    filterLoading = false;\n\n    private denotes_subject: Subject<any> = new Subject();\n    private cognates_subject: Subject<any> = new Subject();\n    private evokes_subject: Subject<any> = new Subject();\n\n    /* public urlRegex = /(^|\\s)((https?:\\/\\/)?[\\w-]+(\\.[\\w-]+)+\\.?(:\\d+)?(\\/\\S*)?)/gi */\n    public urlRegex = /(^|\\s)((https?:\\/\\/.+))/;\n\n    emptyLabelFlag = false;\n    emptyFlag = false;\n\n    disableAddMorpho = false;\n\n    coreForm = new FormGroup({\n        label: new FormControl('', [Validators.required, Validators.minLength(3)]),\n        type: new FormControl(''),\n        confidence : new FormControl(null),\n        language: new FormControl('', [Validators.required, Validators.minLength(0)]),\n        pos: new FormControl(''),\n        morphoTraits: new FormArray([this.createMorphoTraits()]),\n        stemType : new FormControl(''),\n        evokes: new FormArray([this.createEvokes()]),\n        denotes: new FormArray([this.createDenotes()]),\n        cognates : new FormArray([this.createCognates()]),\n        isCognate : new FormControl(null),\n        isEtymon : new FormControl(null)\n    })\n\n    morphoTraits: FormArray;\n    evokesArray: FormArray;\n    denotesArray: FormArray;\n    cognatesArray: FormArray;\n\n    constructor(private lexicalService: LexicalEntriesService, \n                private formBuilder: FormBuilder, \n                private toastr: ToastrService,\n                private lilaService : LilaService) {\n\n    }\n\n    ngOnInit() {\n        /* setTimeout(() => {\n            //@ts-ignore\n            $('.denotes-tooltip').tooltip({\n                trigger: 'hover'\n            });\n        }, 1000); */\n\n\n       \n\n        this.denotes_subject.pipe(debounceTime(1000)).subscribe(\n            data => {\n                this.onChangeDenotes(data)\n            }\n        )\n\n        this.cognates_subject.pipe(debounceTime(1000)).subscribe(\n            data => {\n                this.onChangeCognates(data)\n            }\n        )\n\n        /* this.evokes_subject.pipe(debounceTime(1000)).subscribe(\n            data => {\n                this.onChangeEvokes(data)\n            }\n        ) */\n\n        this.lexicalService.updateLangSelect$.subscribe(\n            signal => {\n        \n                if(signal != null){\n                    \n                    this.languages = [];\n                    this.lexicalService.getLexiconLanguages().subscribe(\n                        data => {\n                            console.log(data)\n                            for (var i = 0; i < data.length; i++) {\n                                this.languages[i] = data[i]\n                            }\n                        }\n                    );\n                }\n            }\n        );\n\n        this.lexicalService.getLexiconLanguages().subscribe(\n            data => {\n                this.languages = [];\n                for (var i = 0; i < data.length; i++) {\n                    this.languages[i] = data[i]\n                }\n            }\n        );\n\n        this.subject.pipe(debounceTime(1000)).subscribe(\n            data => {\n                this.onSearchFilter(data)\n            }\n        )\n\n        this.loadMorphologyData();\n        this.loadLexEntryTypeData();\n\n        this.coreForm = this.formBuilder.group({\n            label: '',\n            type: '',\n            confidence : null,\n            language: '',\n            pos: '',\n            morphoTraits: this.formBuilder.array([]),\n            stemType : '',\n            evokes: this.formBuilder.array([this.createEvokes()]),\n            denotes: this.formBuilder.array([this.createDenotes()]),\n            cognates: this.formBuilder.array([this.createCognates()]),\n            isCognate : false,\n            isEtymon : false\n        })\n\n        this.onChanges();\n    }\n\n    /* triggerDenotes(evt) {\n        if (evt.target != undefined) {\n            this.subject.next(evt.target.value)\n        }\n    } */\n\n    triggerCognates(evt, i) {\n        console.log(evt)\n        if (evt.target != undefined) {\n            \n            this.subject.next({value: evt.target.value, index: i})\n        }\n    }\n\n    loadLexEntryTypeData() {\n        this.lexicalService.getLexEntryTypes().subscribe(\n            data => {\n                this.lexEntryTypesData = data;\n                \n            }\n        )\n    }\n\n    onSearchFilter(data) {\n        this.filterLoading = true;\n        this.searchResults = [];\n\n        let value = data.value;\n        let index = data.index;\n\n        this.cognatesArray = this.coreForm.get('cognates') as FormArray;\n        \n        if (this.object.lexicalEntryInstanceName != undefined && !this.cognatesArray.at(index).get('lila').value) {\n            let parameters = {\n                text: data,\n                searchMode: \"startsWith\",\n                type: \"\",\n                pos: \"\",\n                formType: \"entry\",\n                author: \"\",\n                lang: \"\",\n                status: \"\",\n                offset: 0,\n                limit: 500\n            }\n            \n            /* && data.length >= 3 */\n            this.lexicalService.getLexicalEntriesList(parameters).subscribe(\n                data => {\n                    console.log(data)\n\n                    let filter_lang = data.list.filter(\n                        x => {\n                            return x.language != this.object.language;\n                        }\n                    )\n                    filter_lang.forEach(element => {\n                        element['label_lang'] = element.label+\"@\"+element.language\n                    });\n                    console.log(filter_lang)\n                    this.searchResults = filter_lang;\n                    this.filterLoading = false;\n                }, error => {\n                    //console.log(error)\n                    this.filterLoading = false;\n                }\n            )\n            \n        } else if(this.object.lexicalEntryInstanceName != undefined && this.cognatesArray.at(index).get('lila').value){\n\n            this.searchResults = [];\n            if(this.coreForm.get('isEtymon').value){\n                this.lilaService.queryEtymon(value).subscribe(\n                    data=>{\n                        console.log(data)\n                        if(data.list.length > 0){\n                            data.list.forEach(element => {\n                                this.searchResults.push(element)\n                            });\n                        }\n                    },\n                    error=>{\n                        console.log(error)\n                    }\n                )\n            }\n\n\n            if(this.coreForm.get('isCognate').value){\n                this.lilaService.queryCognate(value).subscribe(\n                    data=>{\n                        console.log(data);\n                        if(data.list.length > 0){\n                            data.list.forEach(element => {\n                                this.searchResults.push(element)\n                            });\n                        }\n                    },\n                    error=>{\n                        console.log(error)\n                    }\n                )\n            }\n\n        } else {\n            this.filterLoading = false;\n        }\n        \n    }\n\n    deleteData() {\n        this.searchResults = [];\n    }\n\n    loadMorphologyData() {\n        this.lexicalService.getMorphologyData().subscribe(\n            data => {\n                this.morphologyData = data;\n                /* //console.log(this.morphologyData) */\n                this.valuePos = this.morphologyData.filter(x => {\n                    if (x.propertyId == 'partOfSpeech') {\n                        return true;\n                    } else {\n                        return false;\n                    }\n                })\n\n                this.valuePos = this.valuePos[0]['propertyValues'];\n                \n            }\n        )\n    }\n\n\n    ngOnChanges(changes: SimpleChanges) {\n        setTimeout(() => {\n            if (this.object != changes.lexData.currentValue) {\n                this.morphoTraits = this.coreForm.get('morphoTraits') as FormArray;\n                this.morphoTraits.clear();\n\n                this.denotesArray = this.coreForm.get('denotes') as FormArray;\n                this.denotesArray.clear();\n\n                this.cognatesArray = this.coreForm.get('cognates') as FormArray;\n                this.cognatesArray.clear();\n\n                this.evokesArray = this.coreForm.get('evokes') as FormArray;\n                this.evokesArray.clear();\n\n                this.memoryPos = '';\n\n                this.staticMorpho = []\n            }\n            this.object = changes.lexData.currentValue;\n\n            \n            if (this.object != null) {\n                \n                const lexId = this.object.lexicalEntryInstanceName;\n                this.coreForm.get('label').setValue(this.object.label, { emitEvent: false });\n                this.coreForm.get('stemType').setValue(this.object.stemType, { emitEvent: false });\n                if(this.object.type == 'Etymon'){\n                    this.coreForm.get('type').disable({onlySelf: true, emitEvent: false})\n                }else{\n                    this.coreForm.get('type').enable({onlySelf: true, emitEvent: false})\n                }\n                this.coreForm.get('confidence').setValue(this.object.confidence, { emitEvent: false });\n                \n\n                this.object.type.forEach(element => {\n                    if(element != 'Cognate'){\n                        this.coreForm.get('type').setValue(element, { emitEvent: false });\n                        return true;\n                    }else{\n                        return false;\n                    }\n                });\n\n                let isCognate = this.object.type.find(element => element == 'Cognate');\n                if(isCognate){\n                    this.coreForm.get('isCognate').setValue(true, {emitEvent: false})\n                }else{\n                    this.coreForm.get('isCognate').setValue(false, {emitEvent: false})\n                }\n\n                let isEtymon = this.object.type.find(element => element == 'Etymon');\n                if(isEtymon){\n                    this.coreForm.get('isEtymon').setValue(true, {emitEvent: false})\n                }else{\n                    this.coreForm.get('isEtymon').setValue(false, {emitEvent: false})\n                }\n\n                //this.coreForm.get('type').setValue(this.object.type, { emitEvent: false });\n                this.coreForm.get('language').setValue(this.object.language, { emitEvent: false });\n                this.coreForm.get('pos').setValue(this.object.pos, { emitEvent: false });\n\n                this.memoryPos = this.object.pos;\n\n                this.valueTraits = [];\n                this.memoryTraits = [];\n                this.memoryDenotes = [];\n                this.memoryCognates = [];\n                this.memoryValues = [];\n\n               /*  //console.log('MORFOLOGIA')\n                //console.log(this.object.morphology) */\n                setTimeout(() => {\n                    for (var i = 0; i < this.object.morphology.length; i++) {\n                        const trait = this.object.morphology[i]['trait'];\n                        const value = this.object.morphology[i]['value'];\n                        \n                        let traitDescription = '';\n                        this.morphologyData.filter(x => {\n                            if (x.propertyId == trait && trait != 'partOfSpeech') {\n                                x.propertyValues.filter(y => {\n                                    if(y.valueId == value){\n                                        traitDescription = y.valueDescription;\n                                        return true;\n                                    }else{\n                                        return false;\n                                    }\n                                })\n                                return true;\n                            } else {\n                                return false;\n                            }\n                        })\n                        \n                        this.memoryValues[i] = value;\n                       \n                        this.addMorphoTraits(trait, value, traitDescription);\n                        this.onChangeTrait(trait, i);\n    \n                        this.staticMorpho.push({ trait: trait, value: value });\n                        \n                    }\n                }, 100);\n                \n\n                setTimeout(() => {\n                    let pos = this.coreForm.get('pos').value;\n                    this.valuePos.forEach(el => {\n                        if(el.valueId == pos){\n                           \n                            this.posDescription = el.valueDescription;\n                        }\n                    })\n                    //@ts-ignore\n                    $('.pos-tooltip').tooltip({\n                        trigger: 'hover'\n                    });\n                    \n                    \n                }, 1000);\n\n                setTimeout(() => {\n                    \n                    //@ts-ignore\n                    $('.trait-tooltip').tooltip({\n                        trigger: 'hover'\n                    });\n                    \n                    \n                }, 1000);\n\n                setTimeout(() => {\n                    let type = this.coreForm.get('type').value;\n                    this.lexEntryTypesData.forEach(el => {\n                        if(el.valueId == type){\n                            \n                            this.typeDesc = el.valueDescription;\n                        }\n                    })\n                    //@ts-ignore\n                    $('.type-tooltip').tooltip({\n                        trigger: 'hover'\n                    });\n                    \n                    \n                }, 1000);\n\n                this.lexicalService.getLexEntryLinguisticRelation(lexId, 'denotes').subscribe(\n                    data => {\n                        //console.log(data)\n                        for (var i = 0; i < data.length; i++) {\n                            let entity = data[i]['lexicalEntity'];\n                            let type = data[i]['linkType'];\n                            this.addDenotes(entity, type);\n                            this.memoryDenotes.push(data[i])\n                        }\n                    }, error => {\n                        //console.log(error)\n                    }\n                )\n                \n                this.lexicalService.getLexEntryLinguisticRelation(lexId, 'cognate').subscribe(\n                    data => {\n                        console.log(data)\n                        for (var i = 0; i < data.length; i++) {\n                            let entity = data[i]['lexicalEntity'];\n                            let type = data[i]['linkType'];\n                            this.addCognates(entity, type);\n                            this.memoryCognates.push(data[i])\n                        }\n                    }, error => {\n                        console.log(error)\n                    }\n                )\n            }\n\n\n        }, 10)\n\n    }\n\n    onChangeLanguage(evt) {\n\n        this.lexicalService.spinnerAction('on');\n        let langLabel = evt.target.value;\n        let langValue;\n        this.languages.forEach(element => {\n            if (element['label'].toLowerCase() == langLabel.toLowerCase()) {\n                langValue = element['label'];\n                return;\n            }\n        });\n\n        if (langValue != undefined) {\n            let lexId = this.object.lexicalEntryInstanceName;\n            let parameters = {\n                relation: 'language',\n                value: langValue\n            }\n          \n            this.lexicalService.updateLexicalEntry(lexId, parameters).subscribe(\n                data => {\n                    //console.log(data)\n                    this.lexicalService.spinnerAction('off');\n                    this.lexicalService.updateLexCard(data)\n                    data['request'] = 0;\n                    data['new_lang'] = langValue.toLowerCase();\n                    this.lexicalService.refreshAfterEdit(data);\n                    this.lexicalService.refreshLangTable();\n                    this.lexicalService.refreshFilter({ request: true })\n                }, error => {\n                    //console.log(error)\n                    const data = this.object;\n                    data['request'] = 0;\n                    data['new_lang'] = langValue.toLowerCase();\n                    this.lexicalService.refreshAfterEdit(data);\n                    this.lexicalService.spinnerAction('off');\n                    this.lexicalService.refreshLangTable();\n                    this.lexicalService.refreshFilter({ request: true })\n                    this.lexicalService.updateLexCard({ lastUpdate: error.error.text })\n                    if(typeof(error.error) != 'object'){\n                        this.toastr.error(error.error, 'Error', {\n                          timeOut: 5000,\n                        });\n                    }else{\n                        this.toastr.success('Language changed correctly for ' + lexId, '', {\n                            timeOut: 5000,\n                        });\n                    }\n                }\n            )\n        } else {\n            this.lexicalService.spinnerAction('off');\n        }\n\n    }\n\n    onChangePos(evt) {\n        this.lexicalService.spinnerAction('on');\n        let posValue = evt.target.value;\n        let lexId = this.object.lexicalEntryInstanceName;\n        let parameters;\n        if (this.memoryPos == '') {\n\n            parameters = {\n                type: \"morphology\",\n                relation: 'partOfSpeech',\n                value: posValue\n            }\n\n        } else {\n            parameters = {\n                type: \"morphology\",\n                relation: 'partOfSpeech',\n                value: posValue,\n                currentValue: this.memoryPos\n            }\n        }\n        \n        console.log(parameters)\n        this.lexicalService.updateLinguisticRelation(lexId, parameters).pipe(debounceTime(1000)).subscribe(\n            response => {\n                console.log(response)\n                this.memoryPos = posValue;\n                let data= {};\n                data['request'] = 0;\n                data['new_pos'] = posValue;\n                data['lexicalEntryInstanceName'] = this.object.lexicalEntryInstanceName;\n                //this.lexicalService.updateLexCard(data)\n                this.lexicalService.spinnerAction('off');\n                this.lexicalService.refreshAfterEdit(data);\n                this.lexicalService.refreshFilter({ request: true })\n                \n                setTimeout(() => {\n                    \n                    this.valuePos.forEach(el => {\n                        if(el.valueId == posValue){\n                            this.posDescription = el.valueDescription;\n                        }\n                    })\n                    //@ts-ignore\n                    $('.pos-tooltip').tooltip({\n                        trigger: 'hover',\n                    });\n\n                }, 1000);\n            },\n            error => {\n                console.log(error);\n                this.memoryPos = posValue;\n                this.lexicalService.spinnerAction('off');\n                const data = this.object;\n                data['request'] = 0;\n                data['new_pos'] = posValue;\n                this.lexicalService.refreshAfterEdit(data);\n                this.lexicalService.refreshFilter({ request: true })\n                this.lexicalService.updateLexCard({ lastUpdate: error.error.text })\n                if(typeof(error.error) != 'object'){\n                    this.toastr.error(error.error, 'Error', {\n                      timeOut: 5000,\n                    });\n                }else{\n                    this.toastr.success('Pos changed correctly for ' + lexId, '', {\n                        timeOut: 5000,\n                    });\n                }\n                setTimeout(() => {\n                    \n                    this.valuePos.forEach(el => {\n                        if(el.valueId == posValue){\n                            this.posDescription = el.valueDescription;\n                        }\n                    })\n                    //@ts-ignore\n                    $('.pos-tooltip').tooltip({\n                        trigger: 'hover'\n                    });\n\n                }, 1000);\n            }\n        )\n        \n\n    }\n\n    onChangeExistingValue(evt, i) {\n        this.lexicalService.spinnerAction('on');\n        this.morphoTraits = this.coreForm.get('morphoTraits') as FormArray;\n        const trait = this.morphoTraits.at(i).get('trait').value;\n        const oldValue = this.morphoTraits.at(i).get('value').value;\n        const newValue = evt.target.value;\n        if (newValue != '') {\n            let parameters = {\n                type: \"morphology\",\n                relation: trait,\n                value: newValue,\n                currentValue: oldValue\n            }\n\n            this.morphoTraits.at(i).get('value').setValue(newValue, { emitEvent: false });\n\n            this.staticMorpho[i] = { trait: trait, value: newValue }\n            let lexId = this.object.lexicalEntryInstanceName;\n\n            this.lexicalService.updateLinguisticRelation(lexId, parameters).pipe(debounceTime(1000)).subscribe(\n                data => {\n                    //console.log(data)\n                    data['request'] = 0;\n                    this.lexicalService.refreshAfterEdit(data);\n                    this.lexicalService.spinnerAction('off');\n                    this.lexicalService.refreshFilter({ request: true })\n                    this.lexicalService.updateLexCard(data)\n                },\n                error => {\n                    //console.log(error)\n                    this.lexicalService.refreshAfterEdit({ request: 0, label: this.object.label });\n                    this.lexicalService.spinnerAction('off');\n                    this.lexicalService.refreshFilter({ request: true })\n                    this.lexicalService.updateLexCard({ lastUpdate: error.error.text })\n                    if(typeof(error.error) != 'object'){\n                        this.toastr.error(error.error, 'Error', {\n                          timeOut: 5000,\n                        });\n                    }else{\n                        this.toastr.success('Morphotraits changed correctly for ' + lexId, '', {\n                            timeOut: 5000,\n                        });\n                    }\n                }\n            )\n\n        } else {\n            this.lexicalService.spinnerAction('on');\n        }\n    }\n\n    onChangeValue(i) {\n        this.lexicalService.spinnerAction('on');\n        this.morphoTraits = this.coreForm.get('morphoTraits') as FormArray;\n        const trait = this.morphoTraits.at(i).get('trait').value;\n        const value = this.morphoTraits.at(i).get('value').value;\n      \n        if (trait != '' && value != '') {\n            let parameters;\n            if (this.memoryValues[i] == \"\") {\n                parameters = {\n                    type: \"morphology\",\n                    relation: trait,\n                    value: value\n                }\n            } else {\n                parameters = {\n                    type: \"morphology\",\n                    relation: trait,\n                    value: value,\n                    currentValue: this.memoryValues[i]\n                }\n            }\n\n            this.staticMorpho.push({ trait: trait, value: value })\n            let lexId = this.object.lexicalEntryInstanceName;\n\n            this.lexicalService.updateLinguisticRelation(lexId, parameters).pipe(debounceTime(1000)).subscribe(\n                data => {\n                    //console.log(data)\n                    data['request'] = 0;\n                    this.lexicalService.refreshAfterEdit(data);\n                    this.lexicalService.spinnerAction('off');\n                    this.lexicalService.refreshFilter({ request: true })\n                    this.lexicalService.updateLexCard(data)\n\n                    this.disableAddMorpho = false;\n                    setTimeout(() => {\n                        \n                        let traitDescription = '';\n                        this.morphologyData.filter(x => {\n                            if (x.propertyId == trait && trait != 'partOfSpeech') {\n                                x.propertyValues.filter(y => {\n                                    if(y.valueId == value){\n                                        traitDescription = y.valueDescription;\n                                        return true;\n                                    }else{\n                                        return false;\n                                    }\n                                })\n                                return true;\n                            } else {\n                                return false;\n                            }\n                        })\n\n                        //@ts-ignore\n                        $('.trait-tooltip').tooltip({\n                            trigger: 'hover'\n                        });\n                        \n                        \n                    }, 1000);\n                },\n                error => {\n                    //console.log(error)\n                    this.lexicalService.refreshAfterEdit({ request: 0, label: this.object.label });\n                    this.lexicalService.spinnerAction('off');\n                    this.lexicalService.refreshFilter({ request: true })\n                    this.disableAddMorpho = false;\n                    this.lexicalService.updateLexCard({ lastUpdate: error.error.text })\n                    setTimeout(() => {\n                        \n                        let traitDescription = '';\n                        this.morphologyData.filter(x => {\n                            if (x.propertyId == trait && trait != 'partOfSpeech') {\n                                x.propertyValues.filter(y => {\n                                    if(y.valueId == value){\n                                        traitDescription = y.valueDescription;\n                                        return true;\n                                    }else{\n                                        return false;\n                                    }\n                                })\n                                return true;\n                            } else {\n                                return false;\n                            }\n                        })\n\n                        this.morphoTraits = this.coreForm.get('morphoTraits') as FormArray;\n                        this.morphoTraits.at(i).patchValue({ trait: trait, value: value, description: traitDescription });\n                        \n                        //@ts-ignore\n                        $('.trait-tooltip').tooltip({\n                            trigger: 'hover'\n                        });\n                        if(typeof(error.error) != 'object'){\n                            this.toastr.error(error.error, 'Error', {\n                              timeOut: 5000,\n                            });\n                        }else{\n                            this.toastr.success('Morphotraits changed correctly for ' + lexId, '', {\n                                timeOut: 5000,\n                            });\n                        }\n                        \n                    }, 1000);\n                }\n            )\n        } else {\n            this.lexicalService.spinnerAction('off');\n        }\n    }\n\n    onChangeTrait(evt, i) {\n\n        if (evt.target != undefined) {\n            setTimeout(() => {\n                this.morphoTraits = this.coreForm.get('morphoTraits') as FormArray;\n                this.morphoTraits.at(i).patchValue({ trait: evt.target.value, value: \"\" });\n                if (evt.target.value != '') {\n                    let arrayValues = this.morphologyData.filter(x => {\n                        return x['propertyId'] == evt.target.value;\n                    })['0']['propertyValues'];\n                    this.valueTraits[i] = arrayValues;\n                    this.memoryTraits[i] = evt.target.value;\n                    this.memoryValues[i] = \"\";\n                } else {\n                    this.memoryValues.splice(i, 1);\n                    let arrayValues = [];\n                    this.valueTraits[i] = arrayValues\n                    this.memoryTraits.splice(i, 1)\n                }\n            }, 500);\n        } else {\n\n            var that = this;\n            var timer = setInterval((val)=>{                \n                \n                try{\n                    var arrayValues = this.morphologyData.filter(x => {\n                        return x['propertyId'] == evt;\n                    })['0']['propertyValues'];\n                    this.valueTraits[i] = arrayValues;\n                    this.memoryTraits.push(evt);\n                    clearInterval(timer)\n                }catch(e){\n                    console.log(e)\n                }\n                    \n                       \n            }, 500)\n\n        }\n    }\n\n\n    onChanges(): void {\n\n        this.coreForm.get(\"label\").valueChanges.pipe(debounceTime(1000)).subscribe(\n            updatedLabel => {\n                if (updatedLabel.length > 2 && updatedLabel.trim() != '') {\n                    this.emptyLabelFlag = false;\n                    this.lexicalService.spinnerAction('on');\n                    let lexId = this.object.lexicalEntryInstanceName;\n                    let parameters = {\n                        relation: 'label',\n                        value: updatedLabel\n                    }\n                    this.lexicalService.updateLexicalEntry(lexId, parameters).subscribe(\n                        data => {\n                            console.log(data);\n                            data['request'] = 0;\n                            data['new_label'] = updatedLabel\n                            this.lexicalService.refreshAfterEdit(data);\n                            this.lexicalService.spinnerAction('off');\n                            this.lexicalService.updateLexCard(data)\n                            \n                        },\n                        error => {\n                            console.log(error);\n                            const data = this.object;\n                            data['request'] = 0;\n                            data['new_label'] = updatedLabel;\n                            this.lexicalService.refreshAfterEdit(data);\n                            this.lexicalService.spinnerAction('off');\n                            this.lexicalService.updateLexCard({ lastUpdate: error.error.text });\n                            this.lexicalService.changeDecompLabel(updatedLabel)\n                            if(typeof(error.error) != 'object'){\n                                this.toastr.error(error.error, 'Error', {\n                                  timeOut: 5000,\n                                });\n                            }else{\n                                this.toastr.success('Label changed correctly for ' + lexId, '', {\n                                    timeOut: 5000,\n                                });\n                            }\n                        }\n                    )\n                } else if (updatedLabel.length < 3) {\n                    \n                    this.emptyLabelFlag = true;\n                }\n            }\n        )\n\n        this.coreForm.controls['confidence'].valueChanges.pipe(startWith(undefined), debounceTime(1000), pairwise()).subscribe(newConfidence => {\n            console.log('Old value: ', newConfidence[0]);\n            console.log('New value: ', newConfidence[1]);\n            this.lexicalService.spinnerAction('on');\n            let parameters = {};\n            let lexId = this.object.lexicalEntryInstanceName;\n            let oldValue = newConfidence[0];\n            let newValue = newConfidence[1];\n\n            if(oldValue == undefined){\n                parameters = {\n                    type: \"confidence\",\n                    relation: 'confidence',\n                    value: newValue\n                }\n            }else if(oldValue != undefined && this.object.confidence == -1){\n                parameters = {\n                    type: \"confidence\",\n                    relation: 'confidence',\n                    value: newValue,\n                    currentValue : -1\n                }\n            }else{\n                parameters = {\n                    type: \"confidence\",\n                    relation: 'confidence',\n                    value: newValue,\n                    currentValue : oldValue\n                }\n            }\n            \n            console.log(parameters)\n            this.lexicalService.updateGenericRelation(lexId, parameters).subscribe(\n                data => {\n                    console.log(data);\n                   \n                    this.lexicalService.updateLexCard(data)\n                    this.lexicalService.spinnerAction('off');\n                },\n                error => {\n                    console.log(error);\n                   \n                    this.lexicalService.spinnerAction('off');\n                    \n                    if(error.status == 200){\n                      this.toastr.success('Confidence updated', '', {timeOut: 5000})\n                      this.lexicalService.updateLexCard({ lastUpdate: error.error.text })\n                      this.coreForm.get('confidence').setValue(newValue, { emitEvent: false });\n                      this.object.confidence = newValue;\n                    }else{\n                      this.toastr.error(error.error, 'Error', {timeOut: 5000})\n      \n                    }\n                }\n            )\n        })\n\n        \n\n        this.coreForm.get(\"stemType\").valueChanges.pipe(debounceTime(1000)).subscribe(\n            updateStem => {\n                \n                this.lexicalService.spinnerAction('on');\n                let lexId = this.object.lexicalEntryInstanceName;\n                let parameters = {\n                    type: 'extension',\n                    relation : 'stemType',\n                    value: updateStem\n                }\n                this.lexicalService.updateGenericRelation(lexId, parameters).subscribe(\n                    data => {\n                        console.log(data);\n                        \n                        this.lexicalService.spinnerAction('off');\n                        this.lexicalService.updateLexCard(data)\n                        \n                    },\n                    error => {\n                        console.log(error);\n                       \n                        this.lexicalService.spinnerAction('off');\n                        this.lexicalService.updateLexCard({ lastUpdate: error.error.text })\n                        if(typeof(error.error) != 'object'){\n                            this.toastr.error(error.error, 'Error', {\n                                timeOut: 5000,\n                            });\n                        }else{\n                            this.toastr.success('stemType changed correctly for ' + lexId, '', {\n                                timeOut: 5000,\n                            });\n                        }\n                    }\n                )\n                 \n            }\n        )\n\n        this.coreForm.get(\"type\").valueChanges.pipe(debounceTime(200)).subscribe(\n            newType => {\n                this.lexicalService.spinnerAction('on');\n                let lexId = this.object.lexicalEntryInstanceName;\n                let parameters = {\n                    relation: 'type',\n                    value: newType\n                }\n                this.lexicalService.updateLexicalEntry(lexId, parameters).subscribe(\n                    data => {\n                        //console.log(data);\n                        this.lexicalService.spinnerAction('off');\n                        data['request'] = 0;\n                        data['new_type'] = newType;\n                        this.lexicalService.refreshAfterEdit(data);\n                        this.lexicalService.refreshFilter({ request: true })\n                        this.lexicalService.updateLexCard(data)\n\n                        setTimeout(() => {\n                            let type = this.coreForm.get('type').value;\n                            this.lexEntryTypesData.forEach(el => {\n                                if(el.valueId == type){\n                                    \n                                    this.typeDesc = el.valueDescription;\n                                }\n                            })\n                            //@ts-ignore\n                            $('.type-tooltip').tooltip({\n                                trigger: 'hover'\n                            });\n                            \n                            \n                        }, 1000);\n                        \n                    },\n                    error => {\n                        //console.log(error);\n                        const data = this.object;\n                        data['request'] = 0;\n                        data['new_type'] = newType;\n                        this.lexicalService.refreshAfterEdit(data);\n                        this.lexicalService.spinnerAction('off');\n                        this.lexicalService.updateLexCard({ lastUpdate: error.error.text })\n                        this.lexicalService.refreshFilter({ request: true })\n                        if(typeof(error.error) != 'object'){\n                            this.toastr.error(error.error, 'Error', {\n                              timeOut: 5000,\n                            });\n                        }else{\n                            this.toastr.success('Type changed correctly for ' + lexId, '', {\n                                timeOut: 5000,\n                            });\n                        }\n                        setTimeout(() => {\n                            let type = this.coreForm.get('type').value;\n                            this.lexEntryTypesData.forEach(el => {\n                                if(el.valueId == type){\n                                    \n                                    this.typeDesc = el.valueDescription;\n                                }\n                            })\n                            //@ts-ignore\n                            $('.type-tooltip').tooltip({\n                                trigger: 'hover'\n                            });\n                            \n                            \n                        }, 1000);\n                    }\n                )\n            }\n        )\n    }\n\n    applyUncertain(){\n        this.lexicalService.spinnerAction('on');\n        let oldValue = this.coreForm.get('confidence').value;\n        let lexId = this.object.lexicalEntryInstanceName;\n        let parameters = {\n            relation: 'confidence',\n            value: 0,\n        }\n        console.log(parameters)\n        this.lexicalService.deleteLinguisticRelation(lexId, parameters).subscribe(\n            data => {\n                console.log(data);\n                /* data['request'] = 0;\n                data['new_label'] = confidence_value\n                this.lexicalService.refreshAfterEdit(data); */\n                this.lexicalService.updateLexCard(data)\n                this.lexicalService.spinnerAction('off');\n                this.coreForm.get('confidence').setValue(-1, { emitEvent: false });\n                this.object.confidence = -1;\n            },\n            error => {\n                console.log(error);\n                /*  const data = this.object.etymology;\n                data['request'] = 0;\n                data['new_label'] = confidence_value;\n                this.lexicalService.refreshAfterEdit(data); */\n                this.lexicalService.spinnerAction('off');\n                this.lexicalService.updateLexCard({ lastUpdate: error.error.text })\n                if(error.status == 200){\n                    this.toastr.success('Confidence updated', '', {timeOut: 5000})\n                    this.coreForm.get('confidence').setValue(-1, { emitEvent: false });\n                    this.object.confidence = -1;\n                }else{\n                    this.toastr.error(error.error, 'Error', {timeOut: 5000})\n    \n                }\n            }\n        )\n    }\n\n    createMorphoTraits(t?, v?, d?): FormGroup {\n        if (t != undefined) {\n            return this.formBuilder.group({\n                trait: new FormControl(t, [Validators.required, Validators.minLength(0)]),\n                value: new FormControl(v, [Validators.required, Validators.minLength(0)]),\n                description : new FormControl(d, [Validators.required, Validators.minLength(0)]),\n            })\n        } else {\n            return this.formBuilder.group({\n                trait: new FormControl('', [Validators.required, Validators.minLength(0)]),\n                value: new FormControl('', [Validators.required, Validators.minLength(0)]),\n                description : new FormControl(null, [Validators.required, Validators.minLength(0)])\n            })\n        }\n    }\n\n    createEvokes(e?): FormGroup {\n\n        if (e != undefined) {\n            return this.formBuilder.group({\n                entity: new FormControl(e, [Validators.required, Validators.pattern(this.urlRegex)])\n            })\n        } else {\n            return this.formBuilder.group({\n                entity: new FormControl('', [Validators.required, Validators.pattern(this.urlRegex)])\n            })\n        }\n    }\n\n    createDenotes(e?, t?): FormGroup {\n        if (e != undefined) {\n            return this.formBuilder.group({\n                entity: new FormControl(e, [Validators.required, Validators.pattern(this.urlRegex)]),\n                type: t\n            })\n        } else {\n            return this.formBuilder.group({\n                entity: new FormControl(null, [Validators.required, Validators.pattern(this.urlRegex)]),\n                type: null\n            })\n        }\n    }\n\n    createCognates(e?, t?): FormGroup {\n        if (e != undefined) {\n            return this.formBuilder.group({\n                entity: new FormControl(e, [Validators.required, Validators.pattern(this.urlRegex)]),\n                type: t,\n                lila: false\n            })\n        } else {\n            return this.formBuilder.group({\n                entity: new FormControl(null, [Validators.required, Validators.pattern(this.urlRegex)]),\n                type: null,\n                lila: false\n            })\n        }\n    }\n\n\n    handleDenotes(evt, i) {\n\n        if (evt instanceof NgSelectComponent) {\n            if (evt.selectedItems.length > 0) {\n                let label = evt.selectedItems[0]['value']['lexicalEntry'];\n                this.onChangeDenotes({ name: label, i: i })\n            }\n        } else {\n            let label = evt.target.value;\n            this.denotes_subject.next({ name: label, i: i })\n        }\n    }\n\n    handleCognates(evt, i) {\n\n        if (evt instanceof NgSelectComponent) {\n            if (evt.selectedItems.length > 0) {\n                console.log(evt.selectedItems[0])\n                let label = evt.selectedItems[0]['value']['lexicalEntryInstanceName'];\n                this.onChangeCognates({ name: label, i: i })\n            }\n        } else {\n            let label = evt.target.value;\n            this.cognates_subject.next({ name: label, i: i })\n        }\n    }\n\n    onChangeDenotes(data) {\n        var index = data['i'];\n        this.denotesArray = this.coreForm.get(\"denotes\") as FormArray;\n        if (this.memoryDenotes[index] == undefined) {\n            const newValue = data['name']\n            const parameters = {\n                type: \"conceptRef\",\n                relation: \"denotes\",\n                value: newValue\n            }\n            //console.log(parameters)\n            let lexId = this.object.lexicalEntryInstanceName;\n            this.lexicalService.updateLinguisticRelation(lexId, parameters).subscribe(\n                data => {\n                    //console.log(data);\n                    this.lexicalService.spinnerAction('off');\n                    data['request'] = 0;\n                    this.lexicalService.refreshAfterEdit(data);\n                    this.lexicalService.updateLexCard(data)\n                }, error => {\n                    //console.log(error)\n\n                    /* this.toastr.error(error.error, 'Error', {\n                        timeOut: 5000,\n                    }); */\n                    this.lexicalService.updateLexCard({ lastUpdate: error.error.text })\n                    \n                    this.lexicalService.spinnerAction('off');\n                    if(error.status == 200){\n                        this.toastr.success('Denotes changed correctly for ' + lexId, '', {\n                            timeOut: 5000,\n                        });\n                    }else{\n                        this.toastr.error(error.error, 'Error', {\n                            timeOut: 5000,\n                        });\n                        \n                    }\n                }\n            )\n            this.memoryDenotes[index] = data;\n\n\n        } else {\n            const oldValue = this.memoryDenotes[index]['lexicalEntity']\n            const newValue = data['name']\n            const parameters = {\n                type: \"conceptRef\",\n                relation: \"denotes\",\n                value: newValue,\n                currentValue: oldValue\n            }\n           \n            let lexId = this.object.lexicalEntryInstanceName;\n            //console.log(parameters)\n            this.lexicalService.updateLinguisticRelation(lexId, parameters).subscribe(\n                data => {\n                    //console.log(data);\n                    this.lexicalService.spinnerAction('off');\n                    this.lexicalService.updateLexCard(data)\n                    data['request'] = 0;\n                    this.lexicalService.refreshAfterEdit(data);\n                }, error => {\n                    //console.log(error)\n                    const data = this.object;\n                    data['request'] = 0;\n                    this.toastr.error(error.error, 'Error', {\n                        timeOut: 5000,\n                    });\n                    //this.lexicalService.refreshAfterEdit(data);\n                    this.lexicalService.updateLexCard({ lastUpdate: error.error.text })\n                    this.lexicalService.spinnerAction('off');\n                    if(typeof(error.error) != 'object'){\n                        this.toastr.error(error.error, 'Error', {\n                          timeOut: 5000,\n                        });\n                    }else{\n                        this.toastr.success('Label changed correctly for ' + lexId, '', {\n                            timeOut: 5000,\n                        });\n                    }\n                }\n            )\n            this.memoryDenotes[index] = data;\n        }\n\n\n    }\n\n    onChangeCognates(data) {\n        var index = data['i'];\n        this.cognatesArray = this.coreForm.get(\"cognates\") as FormArray;\n        if (this.memoryCognates[index] == undefined) {\n            const newValue = data['name']\n            const parameters = {\n                type: \"lexicalRel\",\n                relation: \"cognate\",\n                value: newValue\n            }\n            console.log(parameters)\n            let lexId = this.object.lexicalEntryInstanceName;\n            this.lexicalService.updateLinguisticRelation(lexId, parameters).subscribe(\n                data => {\n                    console.log(data);\n                    this.lexicalService.spinnerAction('off');\n                    data['request'] = 0;\n                    this.lexicalService.refreshAfterEdit(data);\n                    this.lexicalService.updateLexCard(data)\n                }, error => {\n                    console.log(error)\n\n                    /* this.toastr.error(error.error, 'Error', {\n                        timeOut: 5000,\n                    }); */\n                    this.lexicalService.updateLexCard({ lastUpdate: error.error.text })\n                    this.lexicalService.spinnerAction('off');\n                    if(error.status == 200){\n                        this.toastr.success('Cognates changed correctly for ' + lexId, '', {\n                            timeOut: 5000,\n                        });\n                    }else{\n                        this.toastr.error(error.error, 'Error', {\n                            timeOut: 5000,\n                          });\n                        \n                    }\n                }\n            )\n            this.memoryCognates[index] = data;\n\n\n        } else {\n            const oldValue = this.memoryCognates[index]['lexicalEntity']\n            const newValue = data['name']\n            const parameters = {\n                type: \"lexicalRel\",\n                relation: \"cognate\",\n                value: newValue,\n                currentValue: oldValue\n            }\n           \n            let lexId = this.object.lexicalEntryInstanceName;\n            console.log(parameters)\n            this.lexicalService.updateLinguisticRelation(lexId, parameters).subscribe(\n                data => {\n                    console.log(data);\n                    this.lexicalService.spinnerAction('off');\n                    this.lexicalService.updateLexCard(data)\n                    data['request'] = 0;\n                    this.lexicalService.refreshAfterEdit(data);\n                }, error => {\n                    console.log(error)\n                    const data = this.object;\n                    data['request'] = 0;\n                    \n                    //this.lexicalService.refreshAfterEdit(data);\n                    this.lexicalService.updateLexCard({ lastUpdate: error.error.text })\n                    this.lexicalService.spinnerAction('off');\n                    if(error.status == 200){\n                        this.toastr.success('Label changed correctly for ' + lexId, '', {\n                            timeOut: 5000,\n                        });\n                    }else{\n                        this.toastr.error(error.error, 'Error', {\n                            timeOut: 5000,\n                          });\n                    }\n                }\n            )\n            this.memoryCognates[index] = data;\n        }\n\n\n    }\n\n   /*  handleEvokes(evt, i) {\n\n        if (evt instanceof NgSelectComponent) {\n            if (evt.selectedItems.length > 0) {\n                let label = evt.selectedItems[0].label\n                this.onChangeDenotes({ name: label, i: i })\n            }\n        } else {\n            let label = evt.target.value;\n            this.evokes_subject.next({ name: label, i: i })\n        }\n\n    }\n */\n    \n\n    addDenotes(e?, t?) {\n        this.denotesArray = this.coreForm.get(\"denotes\") as FormArray;\n        if (e != undefined) {\n            this.denotesArray.push(this.createDenotes(e, t));\n        } else {\n            this.denotesArray.push(this.createDenotes());\n        }\n\n    }\n\n    addCognates(e?, t?) {\n        setTimeout(() => {\n            //@ts-ignore\n            $('.cognates-tooltip').tooltip({\n                trigger: 'hover'\n            });\n        }, 1000);\n        this.cognatesArray = this.coreForm.get(\"cognates\") as FormArray;\n        if (e != undefined) {\n            this.cognatesArray.push(this.createCognates(e, t));\n        } else {\n            this.cognatesArray.push(this.createCognates());\n        }\n\n    }\n\n    \n\n    addMorphoTraits(t?, v?, d?) {\n        \n        this.morphoTraits = this.coreForm.get('morphoTraits') as FormArray;\n        if (t != undefined) {\n            this.morphoTraits.push(this.createMorphoTraits(t, v, d));\n        } else {\n            this.disableAddMorpho = true;\n            this.morphoTraits.push(this.createMorphoTraits());\n        }\n    }\n\n    removeElement(index) {\n        \n        this.memoryTraits.splice(index, 1);\n        this.valueTraits.splice(index, 1);\n        this.staticMorpho.splice(index, 1)\n        \n        this.morphoTraits = this.coreForm.get('morphoTraits') as FormArray;\n\n        const trait = this.morphoTraits.at(index).get('trait').value;\n        const value = this.morphoTraits.at(index).get('value').value;\n\n        \n\n        if (trait != '') {\n\n            let lexId = this.object.lexicalEntryInstanceName;\n\n            let parameters = {\n                type: 'morphology',\n                relation: trait,\n                value: value\n            }\n\n            //console.log(parameters)\n\n            this.lexicalService.deleteLinguisticRelation(lexId, parameters).subscribe(\n                data => {\n                    //console.log(data)\n                    this.lexicalService.updateLexCard(this.object)\n                    this.lexicalService.refreshAfterEdit({ request: 0, label: this.object.label });\n                    this.lexicalService.spinnerAction('off');\n                    this.lexicalService.refreshFilter({ request: true })\n                }, error => {\n                    //console.log(error)\n                    this.lexicalService.refreshAfterEdit({ request: 0, label: this.object.label });\n                    this.lexicalService.spinnerAction('off');\n                    this.lexicalService.refreshFilter({ request: true })\n                    this.lexicalService.updateLexCard({ lastUpdate: error.error.text })\n                    if(typeof(error.error) != 'object'){\n                        this.toastr.error(error.error, 'Error', {\n                          timeOut: 5000,\n                        });\n                    }else{\n                        this.toastr.success('Element removed correctly for ' + lexId, '', {\n                            timeOut: 5000,\n                        });\n                    }\n                }\n            )\n        }else{\n            this.disableAddMorpho = false;\n        }\n\n\n        this.morphoTraits.removeAt(index);\n    }\n\n    removeDenotes(index) {\n        this.denotesArray = this.coreForm.get('denotes') as FormArray;\n\n        const entity = this.denotesArray.at(index).get('entity').value;\n\n        let lexId = this.object.lexicalEntryInstanceName;\n\n        let parameters = {\n            relation: 'denotes',\n            value: entity\n        }\n        \n\n        if (entity != '') {\n            this.lexicalService.deleteLinguisticRelation(lexId, parameters).subscribe(\n                data => {\n                    console.log(data)\n                    this.lexicalService.updateLexCard(this.object);\n                    \n                }, error => {\n                    console.log(error)\n                    //this.lexicalService.updateLexCard({ lastUpdate: error.error.text })\n                    this.toastr.error(error.error, 'Error', {\n                        timeOut: 5000,\n                    });\n                }\n            )\n        }\n\n\n        this.denotesArray.removeAt(index);\n\n        this.memoryDenotes.splice(index, 1)\n    }\n\n    removeCognates(index) {\n        this.cognatesArray = this.coreForm.get('cognates') as FormArray;\n\n        const entity = this.cognatesArray.at(index).get('entity').value;\n\n        let lexId = this.object.lexicalEntryInstanceName;\n\n        let parameters = {\n            relation: 'cognate',\n            value: entity\n        }\n        \n\n        if (entity != '') {\n            this.lexicalService.deleteLinguisticRelation(lexId, parameters).subscribe(\n                data => {\n                    console.log(data)\n                    this.lexicalService.updateLexCard(this.object);\n                    this.toastr.success(\"Cognate deleted successfully\", '', {\n                        timeOut: 5000,\n                    });\n                    \n                }, error => {\n                    console.log(error)\n                    //this.lexicalService.updateLexCard({ lastUpdate: error.error.text })\n                    this.toastr.error(error.error, 'Error', {\n                        timeOut: 5000,\n                    });\n                }\n            )\n        }\n\n\n        this.cognatesArray.removeAt(index);\n\n        this.memoryCognates.splice(index, 1)\n    }\n\n    isEtymon(boolean: boolean){\n        \n        setTimeout(() => {\n            //@ts-ignore\n        $('.type-tooltip').tooltip({\n            trigger: 'hover'\n        });\n        }, 700);\n\n        this.lexicalService.spinnerAction('on');\n        let lexId = this.object.lexicalEntryInstanceName;\n        let value = '';\n        if(boolean){\n            value = 'Etymon'\n            this.coreForm.get('type').setValue('Etymon', { emitEvent: false });\n            this.coreForm.get('type').disable({onlySelf: true, emitEvent: false})\n        }else{\n            value = 'LexicalEntry'\n            this.coreForm.get('type').setValue('LexicalEntry', { emitEvent: false });\n            this.coreForm.get('type').enable({onlySelf: true, emitEvent: false})\n        }\n\n        let parameters = {\n            relation: 'type',\n            value: value\n        }\n\n        this.lexicalService.updateLexicalEntry(lexId, parameters).subscribe(\n            data => {\n                //console.log(data);\n                this.lexicalService.spinnerAction('off');\n                this.lexicalService.updateLexCard(data)\n                this.lexicalService.refreshFilter({ request: true })\n\n               \n            },\n            error => {\n                //console.log(error);\n                const data = this.object;\n                this.lexicalService.spinnerAction('off');\n                this.lexicalService.refreshFilter({ request: true })\n                this.lexicalService.updateLexCard({ lastUpdate: error.error.text })\n            }\n        )\n    } \n}\n","\n\n<form [formGroup]=\"coreForm\" *ngIf=\"object != null\">\n    <div *ngIf=\"{etymon : coreForm.get('type').value == 'Etymon'}; let variable\">\n        <div class=\"form-group row m-2\">\n            <label for=\"inputLabel\" class=\"col-lg-3 col-form-label\">Label:</label>\n            <div class=\"input-group col-lg-7\">\n                <input id=\"label\" formControlName=\"label\" name=\"label\" type=\"text\" class=\"form-control\" placeholder=\"\"\n                    required>\n                <div class=\"invalid-feedback\" *ngIf=\"emptyLabelFlag\" style=\"display: block;\">\n                    Please, insert at least three characters.\n                </div>\n            </div>\n        </div>\n        <!-- <div class=\"form-group row m-2\">\n            <div class=\"col-lg-3\">\n                <div class=\"form-check p-0\">\n                    <label class=\"form-check-label\" for=\"gridCheck1\">\n                        Etymon\n                    </label>\n                    <input [checked]=\"coreForm.get('type').value == 'Etymon'\" class=\"form-check-input\" style=\"margin-left: 10px;\" type=\"checkbox\" id=\"gridCheck1\" onchange=\"document.getElementById('typeSelect').disabled = this.checked;\" (change)=\"variable.etymon = !variable.etymon; isEtymon(variable.etymon);\">\n                </div>\n            </div>\n        </div> -->\n\n        <div class=\"form-group row m-2\">\n            <div class=\"col-lg-3\">\n                <label class=\"\" for=\"sw\">Etymon</label>\n            </div>\n            <div class=\"col-lg-9\">\n                <div class=\"custom-control custom-switch d-inline\" id=\"sw\">\n                    <input type=\"checkbox\" class=\"custom-control-input\" id=\"edit_extra_block\" name=\"extra_block\" value=\"\" [checked]=\"coreForm.get('type').value == 'Etymon'\" style=\"margin-left: 10px;\" onchange=\"document.getElementById('typeSelect').disabled = this.checked;\" (change)=\"variable.etymon = !variable.etymon; isEtymon(variable.etymon);\">\n                    <label class=\"custom-control-label\" for=\"edit_extra_block\"></label>\n                 </div>\n            </div>\n        </div>\n\n        <div class=\"form-group row m-2\" *ngIf=\"{confidence : coreForm.get('confidence').value >= 0}; let variable\">\n            <div class=\"col-lg-3\">\n                <label for=\"uncertainBox\">Uncertain</label>\n            </div>\n            <div class=\"col-lg-3 input-group uncertain\">\n                <input *ngIf=\"variable.confidence\" id=\"attributes\"  step=\"0.1\" formControlName=\"confidence\" name=\"confidence\" type=\"number\" min=\"0\" max=\"1\" class=\"form-control\" placeholder=\"No info\" [value]=\"coreForm.get('confidence').value\">\n                <button type=\"button\" class=\"btn btn-secondary btn-sm rounded-circle\" *ngIf=\"!variable.confidence\" (click)=\"variable.confidence = !variable.confidence\"><i class=\"fas fa-plus\"></i></button>\n                <button type=\"button\" class=\"btn btn-secondary btn-sm rounded-circle\" *ngIf=\"variable.confidence\" (click)=\"variable.confidence = !variable.confidence; applyUncertain()\"><i class=\"fas fa-minus\"></i></button>\n            </div>\n        </div>\n\n        <div class=\"form-group row m-2\" *ngIf=\"!variable.etymon\">\n            <div class=\"col-lg-3 col-form-label\">\n                <label for=\"inputType\">Type:</label>\n            </div>\n            <div class=\"col-lg-9 input-group\">\n                <select id=\"typeSelect\" formControlName=\"type\" name=\"type\" class=\"form-control\">\n                    <option *ngFor=\"let lx of lexEntryTypesData\" [selected]=\"coreForm.get('type').value === lx['valueId']\">\n                        {{lx['valueId']}}\n                    </option>\n                </select>\n                <div class=\"input-group-append ml-2\">\n                    <button *ngIf=\"!variable.etymon\" class=\"btn btn-secondary type-tooltip\" type=\"button\" data-toggle=\"tooltip\"\n                    data-placement=\"top\" data-trigger=\"hover\" [attr.data-original-title]=\"typeDesc\"\n                        style=\"font-size: 12px; border-radius: .25rem;\"><i class=\"fas fa-question\"></i></button>\n                    <button *ngIf=\"variable.etymon\" class=\"btn btn-secondary type-tooltip\" type=\"button\" data-toggle=\"tooltip\"\n                    data-placement=\"top\" data-trigger=\"hover\" title=\"Etymon' is a subclass of Lexical Entry that consists of individuals whose role is to describe the origin and history of another Lexical Entry.\"\n                    style=\"font-size: 12px; border-radius: .25rem;\"><i class=\"fas fa-question\"></i></button>\n                </div>\n                <div class=\"input-group-append ml-2\">\n                    <button [style.visibility]=\"coreForm.get('isCognate').value ? 'visible' : 'hidden'\" class=\"btn btn-warning type-tooltip\" type=\"button\" data-toggle=\"tooltip\"\n                    data-placement=\"top\" data-trigger=\"hover\" title=\"In linguistics, cognates, also called lexical cognates, are words that have a common etymological origin.\"\n                        style=\"font-size: 12px; border-radius: .25rem;\">Cognate</button>\n                </div>\n            </div>\n        </div>\n        <div class=\"form-group row m-2\">\n            <label for=\"inputLanguage\" class=\"col-lg-3 col-form-label\">Language:</label>\n            <div class=\"col-lg-7\">                \n                <select formControlName=\"language\" name=\"language\" class=\"form-control\" (change)=\"onChangeLanguage($event)\">\n                    <option value=\"\">Select language....</option>\n                    <option *ngFor=\"let la of languages\" [value]=\"la['label'].toLowerCase()\" [selected]=\"object.language.toLowerCase() == la['label'].toLowerCase()\">{{la['label']}}\n                    </option>\n                </select>\n                <div class=\"invalid-feedback\" *ngIf=\"coreForm.get('language').value == ''\" style=\"display: block;\">\n                    Please, don't leave this field blank\n                </div>\n            </div>\n        </div>\n    </div>\n    \n\n    <!-- MORPHOLOGY -->\n    <div class=\"form-group row m-2\">\n        <div class=\"input-group col-lg-12\">\n            <div class=\"card\">\n                <span class=\"text-id\"><b>MORPHOLOGY</b></span>\n                <a class=\"pointer\" (click)=\"addMorphoTraits()\" [ngClass]=\"{no_pointer: disableAddMorpho}\"><span class=\"collapse-icon\"><i\n                            class=\"fa fa-plus-square\"></i></span></a>\n                <div class=\"card-body\">\n                    <div class=\"d-flex my-3\">\n                        <div class=\"col-md-4\">\n                            <label for=\"selectPos\" class=\"col-form-label\">Part of speech:</label>\n                        </div>\n                        <div class=\"input-group col-md-8\">\n                            <select class=\"form-control selectTrait\" formControlName=\"pos\" name=\"pos\"\n                                style=\"font-size:12px;\" (change)=\"onChangePos($event)\">\n                                <option value=\"\">Select a value...</option>\n                                <option *ngFor=\"let item of valuePos;\" [selected]=\"item.valueId == object.pos\">\n                                    {{item.valueId}}</option>\n                            </select>\n                            <div class=\"input-group-append ml-2\">\n                                <button class=\"btn btn-secondary pos-tooltip\" type=\"button\" data-toggle=\"tooltip\"\n                                data-placement=\"top\" data-trigger=\"hover\" [attr.data-original-title]=\"posDescription\"\n                                    style=\"font-size: 12px; border-radius: .25rem;\"><i class=\"fas fa-question\"></i></button>\n                            </div>\n\n                            <div class=\"invalid-feedback\" *ngIf=\"!coreForm.get('pos').valid\"\n                                style=\"display: block;\">\n                                Please, don't leave this field blank\n                            </div>\n\n                        </div>\n                    </div>\n\n\n                    <ng-container *ngFor=\"let stat of staticMorpho; let i = index\">\n                        <div class=\"d-flex my-3\" *ngIf=\"stat['trait'] != 'partOfSpeech'\">\n                            <div class=\"col-md-4\">\n                                <label class=\"col-form-label\">{{stat['trait']}}</label>\n                            </div>\n                            <div class=\"input-group col-md-8\">\n                                <select class=\"form-control selectTrait\" style=\"font-size:12px;\"\n                                    (change)=\"onChangeExistingValue($event, i)\">\n                                    <option *ngFor=\"let item of valueTraits[i];\"\n                                        [selected]=\"stat['value'] === item.valueId\">{{item.valueId}}</option>\n                                </select>\n                                <div class=\"input-group-append ml-2\">\n                                    <button *ngIf=\"coreForm['controls'].morphoTraits?.value[i] != null\" class=\"btn btn-secondary trait-tooltip\" type=\"button\" data-toggle=\"tooltip\"\n                                    data-placement=\"top\" data-trigger=\"hover\" [attr.data-original-title]=\"coreForm.get('morphoTraits').at(i).get('description').value\"\n                                        style=\"font-size: 12px; border-radius: .25rem;\"><i class=\"fas fa-question\"></i></button>\n                                        \n                                </div>\n                                <div (click)=\"removeElement(i)\" class=\"input-group-append ml-2\"> <button\n                                        class=\"btn btn-danger\" type=\"button\"\n                                        style=\"font-size: 12px; border-radius: .25rem;\"><i\n                                            class=\"fa fa-trash-alt\"></i></button>\n                                </div>\n                            </div>\n                        </div>\n                    </ng-container>\n\n                    <ng-container formArrayName=\"morphoTraits\"\n                        *ngFor=\"let morpho of coreForm.get('morphoTraits')['controls']; let i = index\">\n                        <div class=\"d-flex my-2\" *ngIf=\"i + 1 > staticMorpho.length\">\n                            <div class=\"col-md-4\" [formGroupName]=\"i\">\n                                <select class=\"form-control selectTrait\" formControlName=\"trait\" name=\"trait\"\n                                    style=\"font-size: 12px;\" (change)=\"onChangeTrait($event, i)\">\n                                    <option value=\"\">Select a trait...</option>\n                                    <option *ngFor=\"let mt of morphologyData\"\n                                        [selected]=\"morpho.value['trait'] === mt.propertyId\"\n                                        [disabled]=\"memoryTraits.indexOf(mt.propertyId) > -1 || mt.propertyId == 'partOfSpeech'\">{{mt.propertyId}}</option>\n                                </select>\n                                <div class=\"invalid-feedback\" *ngIf=\"morpho.get('trait').invalid\"\n                                    style=\"display: block;\">\n                                    Please, don't leave this field blank\n                                </div>\n                            </div>\n                            <div class=\"input-group col-md-8\" [formGroupName]=\"i\">\n                                <select class=\"form-control selectTrait\" formControlName=\"value\" name=\"value\"\n                                    style=\"font-size:12px;\" (change)=\"onChangeValue(i)\">\n                                    <option value=\"\">Select a value...</option>\n                                    <option *ngFor=\"let item of valueTraits[i];\" [attr.data-index]=\"i\"\n                                        [selected]=\"morpho.value['value'] === item.valueId\">{{item.valueId}}</option>\n                                </select>\n                                <div (click)=\"removeElement(i)\" class=\"input-group-append ml-2\"> <button\n                                        class=\"btn btn-danger\" type=\"button\"\n                                        style=\"font-size: 12px; border-radius: .25rem;\"><i\n                                            class=\"fa fa-trash-alt\"></i></button>\n                                </div>\n                                <div class=\"invalid-feedback\" *ngIf=\"morpho.get('value').invalid\"\n                                    style=\"display: block;\">\n                                    Please, don't leave this field blank\n                                </div>\n                            </div>\n                        </div>\n\n                    </ng-container>\n\n\n\n                </div>\n            </div>\n        </div>\n    </div>\n\n    <div class=\"form-group row m-2 mt-3\">\n        <label for=\"inputLabel\" class=\"col-lg-3 col-form-label\">Stem type:</label>\n        <div class=\"input-group col-lg-7\">\n            <input id=\"stemType\" formControlName=\"stemType\" name=\"stemType\" type=\"text\" class=\"form-control\" placeholder=\"\"\n                required>\n            <!-- <div class=\"invalid-feedback\" *ngIf=\"emptyLabelFlag\" style=\"display: block;\">\n                Please, insert at least three characters.\n            </div> -->\n        </div>\n    </div>\n\n\n    <div class=\"form-group row m-2\">\n        <div class=\"input-group col-lg-12\">\n            <div class=\"card\">\n                <span class=\"text-id\"><b>DENOTES</b></span>\n                <a class=\"pointer\" (click)=\"addDenotes()\"><span class=\"collapse-icon\"><i\n                            class=\"fa fa-plus-square\"></i></span></a>\n                <div class=\"card-body\">\n                    <div class=\"form-group row m-2\" formArrayName=\"denotes\"\n                        *ngFor=\"let den of coreForm.get('denotes')['controls']; let i = index\">\n                        <div class=\"input-group col-xl-12\"  [formGroupName]=\"i\">\n                            <input formControlName=\"entity\" name=\"entity\" type=\"text\" [value]=\"den.get('entity').value\"\n                                class=\"form-control\" placeholder=\"Insert URI\"\n                               \n                                (keyup)=\"handleDenotes($event, i)\">\n                            <div class=\"input-group-append ml-2\">\n                                <button class=\"btn btn-primary\" type=\"button\"><i\n                                        class=\"fa fa-external-link-alt\"></i></button>\n                            </div>\n                            <div class=\"input-group-append ml-2\">\n                                <button (click)=\"removeDenotes(i)\" class=\"btn btn-danger\" type=\"button\"><i\n                                        class=\"fa fa-trash-alt\"></i></button>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n\n    <div class=\"form-group row m-2\">\n        <div class=\"input-group col-lg-12\">\n            <div class=\"card\">\n                <span class=\"text-id\"><b>COGNATES</b></span>\n                <a class=\"pointer\" (click)=\"addCognates()\"><span class=\"collapse-icon\"><i\n                            class=\"fa fa-plus-square\"></i></span></a>\n                <div class=\"card-body\">\n                    <div class=\"form-group row m-2\" formArrayName=\"cognates\"\n                        *ngFor=\"let cog of coreForm.get('cognates')['controls']; let i = index\">\n                        <div class=\"input-group col-xl-12\"  [formGroupName]=\"i\" *ngIf=\"{switch : false}; let variable\">\n                            <ng-select #select_cognates formControlName=\"entity\" name=\"entity\" [dropdownPosition]=\"'top'\"\n                                (keyup)=\"triggerCognates($event, i)\" (change)=\"handleCognates(select_cognates, i)\"\n                                [items]=\"searchResults\" bindValue=\"label\" (focus)=\"deleteData()\" bindLabel=\"label\"\n                                placeholder=\"Search cognates\" appendTo=\"body\"\n                                *ngIf=\"!variable.switch && cog.get('type').value != 'external'\">\n                                <ng-template ng-option-tmp let-item=\"item\" let-search=\"searchTerm\">\n                                    <div>\n                                        <span>{{item.label}} </span><span style=\"color: blue;\">@{{item.language}}</span>\n                                    </div>\n\n                                </ng-template>\n                            </ng-select>\n                            <input formControlName=\"entity\" name=\"entity\" type=\"text\" [value]=\"cog.get('entity').value\"\n                                class=\"form-control\" placeholder=\"Insert URI\"\n                                *ngIf=\"variable.switch || cog.get('type').value == 'external'\"\n                                (keyup)=\"handleCognates($event, i)\">\n                            <div class=\"input-group-append ml-3 form-check\" style=\"align-items: center;\"\n                                [hidden]=\"cog.get('type').value == 'external'\">\n                                <input class=\"form-check-input cognates-tooltip\" type=\"checkbox\"\n                                    (change)=\"variable.switch=!variable.switch\" data-toggle=\"tooltip\"\n                                    data-placement=\"bottom\" data-trigger=\"hover\"\n                                    title=\"Clicca per inserire un URI manualmente\">\n                            </div>\n                            <!-- <div class=\"input-group-append ml-2\">\n                                <div class=\"btn-group-toggle\" data-toggle=\"buttons\" placement=\"top\" ngbTooltip=\"Enable LiLa endpoint\" title=\"Enable LiLa endpoint\" >\n                                    <label class=\"btn btn-secondary\" >\n                                      <input type=\"checkbox\" autocomplete=\"off\" autocomplete=\"off\" formControlName=\"lila\" name=\"lila\" style=\"border-radius: .3rem;\" *ngIf=\"!variable.switch && cog.get('type').value != 'external'\"> \n                                        <img src=\"../../../../../../../assets/images/graphql.png\" alt=\"Avatar\" class=\"image\" style=\"height: 20px;\">\n                                    </label>\n                                </div>\n                            </div> -->\n                            <div class=\"input-group-append ml-2\">\n                                <button (click)=\"removeCognates(i)\" class=\"btn btn-danger\" type=\"button\"><i\n                                        class=\"fa fa-trash-alt\"></i></button>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n\n</form>\n\n<!-- {{coreForm.value | json}} -->","/*\n   Copyright 2021-2022  Istituto di Linguistica Computazionale \"A. Zampolli\", Consiglio Nazionale delle Ricerche, Pisa, Italy.\n \nThis file is part of EpiLexo.\n\nEpiLexo is free software: you can redistribute it and/or modify it under the terms of the GNU General Public License as published by the Free Software Foundation, either version 3 of the License, or (at your option) any later version.\n\nEpiLexo is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for more details.\n\nYou should have received a copy of the GNU General Public License along with EpiLexo. If not, see <https://www.gnu.org/licenses/>.\n*/\n\nimport { enableProdMode } from '@angular/core';\nimport { platformBrowserDynamic } from '@angular/platform-browser-dynamic';\n\nimport { AppModule } from './app/app.module';\nimport { environment } from './environments/environment';\n\nif (environment.production) {\n  enableProdMode();\n}\n\nplatformBrowserDynamic().bootstrapModule(AppModule)\n  .catch(err => console.error(err));\n","function webpackEmptyAsyncContext(req) {\n\t// Here Promise.resolve().then() is used instead of new Promise() to prevent\n\t// uncaught exception popping up in devtools\n\treturn Promise.resolve().then(function() {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t});\n}\nwebpackEmptyAsyncContext.keys = function() { return []; };\nwebpackEmptyAsyncContext.resolve = webpackEmptyAsyncContext;\nmodule.exports = webpackEmptyAsyncContext;\nwebpackEmptyAsyncContext.id = \"zn8P\";","/*\n   Copyright 2021-2022  Istituto di Linguistica Computazionale \"A. Zampolli\", Consiglio Nazionale delle Ricerche, Pisa, Italy.\n \nThis file is part of EpiLexo.\n\nEpiLexo is free software: you can redistribute it and/or modify it under the terms of the GNU General Public License as published by the Free Software Foundation, either version 3 of the License, or (at your option) any later version.\n\nEpiLexo is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for more details.\n\nYou should have received a copy of the GNU General Public License along with EpiLexo. If not, see <https://www.gnu.org/licenses/>.\n*/\n\nimport { Component, Input, OnInit, SimpleChanges } from '@angular/core';\nimport { LexicalEntriesService } from 'src/app/services/lexical-entries/lexical-entries.service';\n\n@Component({\n  selector: 'app-link-panel',\n  templateUrl: './link-panel.component.html',\n  styleUrls: ['./link-panel.component.scss']\n})\nexport class LinkPanelComponent implements OnInit {\n\n  @Input() linkData: any[] | any;\n  \n  seeAlsoData : {};\n  sameAsData : {};\n  counterElement = 0;\n  object : any;\n  constructor(private lexicalService: LexicalEntriesService) { }\n\n  ngOnInit(): void {\n  }\n\n  ngOnChanges(changes: SimpleChanges){\n    if(changes.linkData.currentValue != null){\n      this.counterElement = 0;\n      this.object = changes.linkData.currentValue;\n      this.sameAsData = null;\n      this.seeAlsoData = null;\n      \n      /* //console.log(changes.linkData.currentValue) */\n\n      if(this.object.lexicalEntryInstanceName != undefined){\n        let lexId = this.object.lexicalEntryInstanceName;\n        this.lexicalService.getLexEntryLinguisticRelation(lexId, 'sameAs').subscribe(\n          data=>{\n            console.log(data, this.object);\n            this.sameAsData = {}\n            this.sameAsData['array'] = data;\n            this.sameAsData['parentNodeLabel']= this.object['lexicalEntry'];\n            this.sameAsData['lexicalEntryInstanceName']= this.object['lexicalEntryInstanceName'];\n            this.sameAsData['type'] = this.object.type;\n          }, error=>{\n            console.log(this.object)\n            this.sameAsData = {}\n            this.sameAsData['array'] = [];\n            this.sameAsData['parentNodeLabel']= this.object['lexicalEntry'];\n            this.sameAsData['lexicalEntryInstanceName']= this.object['lexicalEntryInstanceName'];\n            this.sameAsData['label']= this.object['label'];\n            this.sameAsData['type'] = this.object.type;\n            console.log(error);\n            \n          }\n        )\n\n        this.lexicalService.getLexEntryLinguisticRelation(lexId, 'seeAlso').subscribe(\n          data=>{\n            console.log(data)\n            this.seeAlsoData = {}\n            this.seeAlsoData['array'] = data;\n            this.seeAlsoData['parentNodeLabel']= this.object['lexicalEntry'];\n            this.seeAlsoData['lexicalEntryInstanceName']= this.object['lexicalEntryInstanceName'];\n          }, error=>{\n            this.seeAlsoData = {}\n            this.seeAlsoData['array'] = [];\n            this.seeAlsoData['parentNodeLabel']= this.object['lexicalEntry'];\n            this.seeAlsoData['lexicalEntryInstanceName']= this.object['lexicalEntryInstanceName'];\n            //console.log(error);\n            \n          }\n        )\n\n        //console.log(this.object)\n        this.object.links.forEach(element => {\n          if(element.type != undefined){\n            if(element.type == 'Reference'){\n              element.elements.forEach(sub => {\n                this.counterElement += sub.count;\n              });\n            }\n          }\n        });\n      }else if(this.object.formInstanceName != undefined){\n        let formId = this.object.formInstanceName;\n        this.lexicalService.getLexEntryLinguisticRelation(formId, 'sameAs').subscribe(\n          data=>{\n            //console.log(data);\n            this.sameAsData = {}\n            this.sameAsData['array'] = data;\n            this.sameAsData['formInstanceName']= this.object['formInstanceName'];\n          }, error=>{\n            this.sameAsData = {}\n            this.sameAsData['array'] = [];\n            this.sameAsData['formInstanceName']= this.object['formInstanceName'];\n            //console.log(error);\n            \n          }\n        )\n\n        this.lexicalService.getLexEntryLinguisticRelation(formId, 'seeAlso').subscribe(\n          data=>{\n            this.seeAlsoData = {}\n            this.seeAlsoData['array'] = data;\n            this.seeAlsoData['formInstanceName']= this.object['formInstanceName'];\n          }, error=>{\n            this.seeAlsoData = {}\n            this.seeAlsoData['array'] = [];\n            this.seeAlsoData['formInstanceName']= this.object['formInstanceName'];\n            //console.log(error);\n            \n          }\n        )\n\n        //console.log(this.object)\n        if(this.object.links != null){\n          this.object.links.forEach(element => {\n            if(element.type != undefined){\n              if(element.type == 'Reference'){\n                element.elements.forEach(sub => {\n                  this.counterElement += sub.count;\n                });\n              }\n            }\n          });\n        }\n        \n      }else if(this.object.senseInstanceName != undefined){\n        let senseId = this.object.senseInstanceName;\n        this.lexicalService.getLexEntryLinguisticRelation(senseId, 'sameAs').subscribe(\n          data=>{\n            //console.log(data);\n            this.sameAsData = {}\n            this.sameAsData['array'] = data;\n            this.sameAsData['senseInstanceName']= this.object['senseInstanceName'];\n          }, error=>{\n            this.sameAsData = {}\n            this.sameAsData['array'] = [];\n            this.sameAsData['senseInstanceName']= this.object['senseInstanceName'];\n            //console.log(error);\n            \n          }\n        )\n\n        this.lexicalService.getLexEntryLinguisticRelation(senseId, 'seeAlso').subscribe(\n          data=>{\n            //console.log(data)\n            this.seeAlsoData = {}\n            this.seeAlsoData['array'] = data;\n            this.seeAlsoData['senseInstanceName']= this.object['senseInstanceName'];\n          }, error=>{\n            this.seeAlsoData = {}\n            this.seeAlsoData['array'] = [];\n            this.seeAlsoData['senseInstanceName']= this.object['senseInstanceName'];\n            //console.log(error);\n            \n          }\n        )\n\n        //console.log(this.object)\n        if(this.object.links != null){\n          this.object.links.forEach(element => {\n            if(element.type != undefined){\n              if(element.type == 'Reference'){\n                element.elements.forEach(sub => {\n                  this.counterElement += sub.count;\n                });\n              }\n            }\n          });\n        }\n      }else if(this.object.etymologyInstanceName != undefined){\n        let etymId = this.object.etymologyInstanceName;\n        this.lexicalService.getLexEntryLinguisticRelation(etymId, 'sameAs').subscribe(\n          data=>{\n            //console.log(data);\n            this.sameAsData = {}\n            this.sameAsData['array'] = data;\n            this.sameAsData['etymologyInstanceName']= this.object['etymologyInstanceName'];\n          }, error=>{\n            this.sameAsData = {}\n            this.sameAsData['array'] = [];\n            this.sameAsData['etymologyInstanceName']= this.object['etymologyInstanceName'];\n            //console.log(error);\n            \n          }\n        )\n\n        this.lexicalService.getLexEntryLinguisticRelation(etymId, 'seeAlso').subscribe(\n          data=>{\n            //console.log(data)\n            this.seeAlsoData = {}\n            this.seeAlsoData['array'] = data;\n            this.seeAlsoData['etymologyInstanceName']= this.object['etymologyInstanceName'];\n          }, error=>{\n            this.seeAlsoData = {}\n            this.seeAlsoData['array'] = [];\n            this.seeAlsoData['etymologyInstanceName']= this.object['etymologyInstanceName'];\n            //console.log(error);\n            \n          }\n        )\n\n        //console.log(this.object)\n        if(this.object.links != null){\n          this.object.links.forEach(element => {\n            if(element.type != undefined){\n              if(element.type == 'Reference'){\n                element.elements.forEach(sub => {\n                  this.counterElement += sub.count;\n                });\n              }\n            }\n          });\n        }\n      }  \n    }else{\n      this.counterElement = 0;\n      this.sameAsData = null;\n      this.seeAlsoData = null;\n    }\n  }\n\n  refreshCounter(evt?){\n    this.counterElement = evt;\n  }\n\n}\n","\n\n<div class=\"card\">\n    <div class=\"card-header\" id=\"referenceHeading\">\n        <h5 class=\"mb-0\">\n            <a class=\"btn btn-link w-100 d-flex align-self-center collapsed\" data-toggle=\"collapse\"\n                data-target=\"#referenceCollapse\" aria-expanded=\"true\" aria-controls=\"referenceCollapse\">\n                Link Panel&nbsp; <span *ngIf=\"counterElement > 0\">({{counterElement}})</span><i class=\"fa  ml-auto\"></i>\n            </a>\n        </h5>\n    </div>\n    <div id=\"referenceCollapse\" class=\"collapse\" aria-labelledby=\"referenceHeading\">\n        <div class=\"card-body\">\n            <app-see-also (countRefresh)=\"refreshCounter($event)\" *ngIf=\"seeAlsoData != undefined\" [seeAlsoData]=\"seeAlsoData\"></app-see-also>\n            <app-same-as *ngIf=\"sameAsData != undefined\"  [sameAsData]=\"sameAsData\"></app-same-as>\n        </div>\n    </div>\n</div>"]}