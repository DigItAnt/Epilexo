{"version":3,"file":"circlon-angular-tree-component.umd.js","sources":["../../../projects/angular-tree-component/src/lib/mobx-angular/tree-mobx-autorun.directive.ts","../../../projects/angular-tree-component/src/lib/constants/keys.ts","../../../projects/angular-tree-component/src/lib/models/tree-options.model.ts","../../../node_modules/tslib/tslib.es6.js","../../../projects/angular-tree-component/src/lib/constants/events.ts","../../../projects/angular-tree-component/src/lib/models/tree-node.model.ts","../../../projects/angular-tree-component/src/lib/models/tree.model.ts","../../../projects/angular-tree-component/src/lib/models/tree-dragged-element.model.ts","../../../projects/angular-tree-component/src/lib/models/tree-virtual-scroll.model.ts","../../../projects/angular-tree-component/src/lib/components/loading.component.ts","../../../projects/angular-tree-component/src/lib/components/tree.component.ts","../../../projects/angular-tree-component/src/lib/components/tree-node.component.ts","../../../projects/angular-tree-component/src/lib/components/tree-node-content.component.ts","../../../projects/angular-tree-component/src/lib/components/tree-node-drop-slot.component.ts","../../../projects/angular-tree-component/src/lib/components/tree-node-expander.component.ts","../../../projects/angular-tree-component/src/lib/components/tree-node-children.component.ts","../../../projects/angular-tree-component/src/lib/mobx-angular/mobx-proxy.ts","../../../projects/angular-tree-component/src/lib/components/tree-node-collection.component.ts","../../../projects/angular-tree-component/src/lib/components/tree-node-wrapper.component.ts","../../../projects/angular-tree-component/src/lib/components/tree-viewport.component.ts","../../../projects/angular-tree-component/src/lib/components/tree-node-checkbox.component.ts","../../../projects/angular-tree-component/src/lib/directives/tree-drop.directive.ts","../../../projects/angular-tree-component/src/lib/directives/tree-drag.directive.ts","../../../projects/angular-tree-component/src/lib/directives/tree-animate-open.directive.ts","../../../projects/angular-tree-component/src/lib/angular-tree-component.module.ts"],"names":["autorun","Directive","TemplateRef","ViewContainerRef","Input","defaultsDeep","get","omit","isNumber","some","every","first","last","reaction","__decorate","computed","observable","action","compact","find","isString","isFunction","Injectable","Component","ViewEncapsulation","EventEmitter","includes","pick","ContentChild","ViewChild","Output","HostListener","mobxAction","mobxComputed","mobxObservable","throttle","ElementRef","NgZone","Renderer2","DRAG_OVER_CLASS","NgModule","CommonModule"],"mappings":"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","sourcesContent":["import {\r\n  Directive,\r\n  ViewContainerRef,\r\n  TemplateRef,\r\n  OnInit,\r\n  OnDestroy,\r\n  Input,\r\n  EmbeddedViewRef\r\n} from '@angular/core';\r\nimport { autorun } from 'mobx';\r\n\r\n@Directive({ selector: '[treeMobxAutorun]' })\r\nexport class TreeMobxAutorunDirective implements OnInit, OnDestroy {\r\n  protected templateBindings = {};\r\n  protected dispose: any;\r\n  protected view: EmbeddedViewRef<any>;\r\n  @Input() treeMobxAutorun;\r\n\r\n  constructor(\r\n    protected templateRef: TemplateRef<any>,\r\n    protected viewContainer: ViewContainerRef\r\n  ) {}\r\n\r\n  ngOnInit() {\r\n    this.view = this.viewContainer.createEmbeddedView(this.templateRef);\r\n\r\n    if (this.dispose) {\r\n      this.dispose();\r\n    }\r\n\r\n    if (this.shouldDetach()) {\r\n      this.view.detach();\r\n    }\r\n    this.autoDetect(this.view);\r\n  }\r\n\r\n  shouldDetach() {\r\n    return this.treeMobxAutorun && this.treeMobxAutorun.detach;\r\n  }\r\n\r\n  autoDetect(view: EmbeddedViewRef<any>) {\r\n    this.dispose = autorun(() => view.detectChanges());\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    if (this.dispose) {\r\n      this.dispose();\r\n    }\r\n  }\r\n}\r\n","export const KEYS = {\r\n  LEFT: 37,\r\n  UP: 38,\r\n  RIGHT: 39,\r\n  DOWN: 40,\r\n  ENTER: 13,\r\n  SPACE: 32,\r\n  CONTEXT_MENU: 32\r\n};\r\n","import { TreeNode } from './tree-node.model';\r\nimport { TreeModel } from './tree.model';\r\nimport { KEYS } from '../constants/keys';\r\nimport { ITreeOptions } from '../defs/api';\r\n\r\nimport { defaultsDeep, get, omit, isNumber } from 'lodash-es';\r\n\r\nexport interface IActionHandler {\r\n  (tree: TreeModel, node: TreeNode, $event: any, ...rest);\r\n}\r\n\r\nexport const TREE_ACTIONS = {\r\n  TOGGLE_ACTIVE: (tree: TreeModel, node: TreeNode, $event: any) => node && node.toggleActivated(),\r\n  TOGGLE_ACTIVE_MULTI: (tree: TreeModel, node: TreeNode, $event: any) => node && node.toggleActivated(true),\r\n  TOGGLE_SELECTED: (tree: TreeModel, node: TreeNode, $event: any) => node && node.toggleSelected(),\r\n  ACTIVATE: (tree: TreeModel, node: TreeNode, $event: any) => node.setIsActive(true),\r\n  DEACTIVATE: (tree: TreeModel, node: TreeNode, $event: any) => node.setIsActive(false),\r\n  SELECT: (tree: TreeModel, node: TreeNode, $event: any) => node.setIsSelected(true),\r\n  DESELECT: (tree: TreeModel, node: TreeNode, $event: any) => node.setIsSelected(false),\r\n  FOCUS: (tree: TreeModel, node: TreeNode, $event: any) => node.focus(),\r\n  TOGGLE_EXPANDED: (tree: TreeModel, node: TreeNode, $event: any) => node.hasChildren && node.toggleExpanded(),\r\n  EXPAND: (tree: TreeModel, node: TreeNode, $event: any) => node.expand(),\r\n  COLLAPSE: (tree: TreeModel, node: TreeNode, $event: any) => node.collapse(),\r\n  DRILL_DOWN: (tree: TreeModel, node: TreeNode, $event: any) => tree.focusDrillDown(),\r\n  DRILL_UP: (tree: TreeModel, node: TreeNode, $event: any) => tree.focusDrillUp(),\r\n  NEXT_NODE: (tree: TreeModel, node: TreeNode, $event: any) =>  tree.focusNextNode(),\r\n  PREVIOUS_NODE: (tree: TreeModel, node: TreeNode, $event: any) =>  tree.focusPreviousNode(),\r\n  MOVE_NODE: (tree: TreeModel, node: TreeNode, $event: any, {from , to}: {from: any, to: any}) => {\r\n    // default action assumes from = node, to = {parent, index}\r\n    if ($event.ctrlKey) {\r\n      tree.copyNode(from, to);\r\n    } else {\r\n      tree.moveNode(from, to);\r\n    }\r\n  }\r\n};\r\n\r\nconst defaultActionMapping: IActionMapping = {\r\n  mouse: {\r\n    click: TREE_ACTIONS.TOGGLE_ACTIVE,\r\n    dblClick: null,\r\n    contextMenu: null,\r\n    expanderClick: TREE_ACTIONS.TOGGLE_EXPANDED,\r\n    checkboxClick: TREE_ACTIONS.TOGGLE_SELECTED,\r\n    drop: TREE_ACTIONS.MOVE_NODE\r\n  },\r\n  keys: {\r\n    [KEYS.RIGHT]: TREE_ACTIONS.DRILL_DOWN,\r\n    [KEYS.LEFT]: TREE_ACTIONS.DRILL_UP,\r\n    [KEYS.DOWN]: TREE_ACTIONS.NEXT_NODE,\r\n    [KEYS.UP]: TREE_ACTIONS.PREVIOUS_NODE,\r\n    [KEYS.SPACE]: TREE_ACTIONS.TOGGLE_ACTIVE,\r\n    [KEYS.ENTER]: TREE_ACTIONS.TOGGLE_ACTIVE\r\n  }\r\n};\r\n\r\nexport interface IActionMapping {\r\n  mouse?: {\r\n    click?: IActionHandler,\r\n    dblClick?: IActionHandler,\r\n    contextMenu?: IActionHandler,\r\n    expanderClick?: IActionHandler,\r\n    checkboxClick?: IActionHandler,\r\n    dragStart?: IActionHandler,\r\n    drag?: IActionHandler,\r\n    dragEnd?: IActionHandler,\r\n    dragOver?: IActionHandler,\r\n    dragLeave?: IActionHandler,\r\n    dragEnter?: IActionHandler,\r\n    drop?: IActionHandler,\r\n    mouseOver?: IActionHandler,\r\n    mouseOut?: IActionHandler\r\n  };\r\n  keys?: {\r\n    [key: number]: IActionHandler\r\n  };\r\n}\r\n\r\nexport class TreeOptions {\r\n  get hasChildrenField(): string { return this.options.hasChildrenField || 'hasChildren'; }\r\n  get childrenField(): string { return this.options.childrenField || 'children'; }\r\n  get displayField(): string { return this.options.displayField || 'name'; }\r\n  get idField(): string { return this.options.idField || 'id'; }\r\n  get isExpandedField(): string { return this.options.isExpandedField || 'isExpanded'; }\r\n  get getChildren(): any { return this.options.getChildren; }\r\n  get levelPadding(): number { return this.options.levelPadding || 0; }\r\n  get useVirtualScroll(): boolean { return this.options.useVirtualScroll; }\r\n  get animateExpand(): boolean { return this.options.animateExpand; }\r\n  get animateSpeed(): number { return this.options.animateSpeed || 1; }\r\n  get animateAcceleration(): number { return this.options.animateAcceleration || 1.2; }\r\n  get scrollOnActivate(): boolean { return this.options.scrollOnActivate === undefined ? true : this.options.scrollOnActivate; }\r\n  get rtl(): boolean { return !!this.options.rtl; }\r\n  get rootId(): any {return this.options.rootId; }\r\n  get useCheckbox(): boolean { return this.options.useCheckbox; }\r\n  get useTriState(): boolean { return this.options.useTriState === undefined ? true : this.options.useTriState; }\r\n  get scrollContainer(): HTMLElement { return this.options.scrollContainer; }\r\n  get allowDragoverStyling(): boolean { return this.options.allowDragoverStyling === undefined ? true : this.options.allowDragoverStyling; }\r\n  actionMapping: IActionMapping;\r\n\r\n  constructor(private options: ITreeOptions = {}) {\r\n    this.actionMapping = defaultsDeep({}, this.options.actionMapping, defaultActionMapping);\r\n    if (options.rtl) {\r\n      this.actionMapping.keys[KEYS.RIGHT] = <IActionHandler>get(options, ['actionMapping', 'keys', KEYS.RIGHT]) || TREE_ACTIONS.DRILL_UP;\r\n      this.actionMapping.keys[KEYS.LEFT] = <IActionHandler>get(options, ['actionMapping', 'keys', KEYS.LEFT]) || TREE_ACTIONS.DRILL_DOWN;\r\n    }\r\n  }\r\n\r\n  getNodeClone(node: TreeNode): any {\r\n    if (this.options.getNodeClone) {\r\n      return this.options.getNodeClone(node);\r\n    }\r\n\r\n    return omit(Object.assign({}, node.data), ['id']);\r\n  }\r\n\r\n  allowDrop(element, to, $event?): boolean {\r\n    if (this.options.allowDrop instanceof Function) {\r\n      return this.options.allowDrop(element, to, $event);\r\n    }\r\n    else {\r\n      return this.options.allowDrop === undefined ? true : this.options.allowDrop;\r\n    }\r\n  }\r\n\r\n  allowDrag(node: TreeNode): boolean {\r\n    if (this.options.allowDrag instanceof Function) {\r\n      return this.options.allowDrag(node);\r\n    } else {\r\n      return this.options.allowDrag;\r\n    }\r\n  }\r\n\r\n  nodeClass(node: TreeNode): string {\r\n    return this.options.nodeClass ? this.options.nodeClass(node) : '';\r\n  }\r\n\r\n  nodeHeight(node: TreeNode): number {\r\n    if (node.data.virtual) {\r\n      return 0;\r\n    }\r\n\r\n    let nodeHeight = this.options.nodeHeight || 22;\r\n\r\n    if (typeof nodeHeight === 'function') {\r\n      nodeHeight = nodeHeight(node);\r\n    }\r\n\r\n    // account for drop slots:\r\n    return nodeHeight + (node.index === 0 ?  2 : 1) * this.dropSlotHeight;\r\n  }\r\n\r\n  get dropSlotHeight(): number {\r\n    return isNumber(this.options.dropSlotHeight) ? this.options.dropSlotHeight : 2;\r\n  }\r\n}\r\n","/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport var __createBinding = Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n});\r\n\r\nexport function __exportStar(m, exports) {\r\n    for (var p in m) if (p !== \"default\" && !exports.hasOwnProperty(p)) __createBinding(exports, m, p);\r\n}\r\n\r\nexport function __values(o) {\r\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\r\n    if (m) return m.call(o);\r\n    if (o && typeof o.length === \"number\") return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\nexport function __spreadArrays() {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n};\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nvar __setModuleDefault = Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n\r\nexport function __classPrivateFieldGet(receiver, privateMap) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to get private field on non-instance\");\r\n    }\r\n    return privateMap.get(receiver);\r\n}\r\n\r\nexport function __classPrivateFieldSet(receiver, privateMap, value) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to set private field on non-instance\");\r\n    }\r\n    privateMap.set(receiver, value);\r\n    return value;\r\n}\r\n","export const TREE_EVENTS = {\r\n  toggleExpanded: 'toggleExpanded',\r\n  activate: 'activate',\r\n  deactivate: 'deactivate',\r\n  nodeActivate: 'nodeActivate',\r\n  nodeDeactivate: 'nodeDeactivate',\r\n  select: 'select',\r\n  deselect: 'deselect',\r\n  focus: 'focus',\r\n  blur: 'blur',\r\n  initialized: 'initialized',\r\n  updateData: 'updateData',\r\n  moveNode: 'moveNode',\r\n  copyNode: 'copyNode',\r\n  event: 'event',\r\n  loadNodeChildren: 'loadNodeChildren',\r\n  changeFilter: 'changeFilter',\r\n  stateChange: 'stateChange'\r\n};\r\n","import { observable, computed, reaction, autorun, action, IReactionDisposer } from 'mobx';\r\nimport { TreeModel } from './tree.model';\r\nimport { TreeOptions } from './tree-options.model';\r\nimport { ITreeNode } from '../defs/api';\r\nimport { TREE_EVENTS } from '../constants/events';\r\n\r\nimport { first, last, some, every } from 'lodash-es';\r\n\r\nexport class TreeNode implements ITreeNode {\r\n  private handler: IReactionDisposer;\r\n  @computed get isHidden() { return this.treeModel.isHidden(this); };\r\n  @computed get isExpanded() { return this.treeModel.isExpanded(this); };\r\n  @computed get isActive() { return this.treeModel.isActive(this); };\r\n  @computed get isFocused() { return this.treeModel.isNodeFocused(this); };\r\n  @computed get isSelected() {\r\n    if (this.isSelectable()) {\r\n        return this.treeModel.isSelected(this);\r\n    } else {\r\n      return some(this.children, (node: TreeNode) => node.isSelected);\r\n    }\r\n  };\r\n  @computed get isAllSelected() {\r\n    if (this.isSelectable()) {\r\n      return this.treeModel.isSelected(this);\r\n    } else {\r\n      return every(this.children, (node: TreeNode) => node.isAllSelected);\r\n    }\r\n  };\r\n  @computed get isPartiallySelected() {\r\n    return this.isSelected && !this.isAllSelected;\r\n  }\r\n\r\n  @observable children: TreeNode[];\r\n  @observable index: number;\r\n  @observable position = 0;\r\n  @observable height: number;\r\n  @computed get level(): number {\r\n    return this.parent ? this.parent.level + 1 : 0;\r\n  }\r\n  @computed get path(): string[] {\r\n    return this.parent ? [...this.parent.path, this.id] : [];\r\n  }\r\n\r\n  get elementRef(): any {\r\n    throw `Element Ref is no longer supported since introducing virtual scroll\\n\r\n      You may use a template to obtain a reference to the element`;\r\n  }\r\n\r\n  private _originalNode: any;\r\n  get originalNode() { return this._originalNode; };\r\n\r\n  constructor(public data: any, public parent: TreeNode, public treeModel: TreeModel, index: number) {\r\n    if (this.id === undefined || this.id === null) {\r\n      this.id = uuid();\r\n    } // Make sure there's a unique id without overriding existing ids to work with immutable data structures\r\n    this.index = index;\r\n\r\n    if (this.getField('children')) {\r\n      this._initChildren();\r\n    }\r\n    this.autoLoadChildren();\r\n  }\r\n\r\n  // helper get functions:\r\n  get hasChildren(): boolean {\r\n    return !!(this.getField('hasChildren') || (this.children && this.children.length > 0));\r\n  }\r\n  get isCollapsed(): boolean { return !this.isExpanded; }\r\n  get isLeaf(): boolean { return !this.hasChildren; }\r\n  get isRoot(): boolean { return this.parent.data.virtual; }\r\n  get realParent(): TreeNode { return this.isRoot ? null : this.parent; }\r\n\r\n  // proxy functions:\r\n  get options(): TreeOptions { return this.treeModel.options; }\r\n  fireEvent(event) { this.treeModel.fireEvent(event); }\r\n\r\n  // field accessors:\r\n  get displayField() {\r\n    return this.getField('display');\r\n  }\r\n\r\n  get id() {\r\n    return this.getField('id');\r\n  }\r\n\r\n  set id(value) {\r\n    this.setField('id', value);\r\n  }\r\n\r\n  getField(key) {\r\n    return this.data[this.options[`${key}Field`]];\r\n  }\r\n\r\n  setField(key, value) {\r\n    this.data[this.options[`${key}Field`]] = value;\r\n  }\r\n\r\n  // traversing:\r\n  _findAdjacentSibling(steps, skipHidden = false) {\r\n    const siblings = this._getParentsChildren(skipHidden);\r\n    const index = siblings.indexOf(this);\r\n\r\n    return siblings.length > index + steps ? siblings[index + steps] : null;\r\n  }\r\n\r\n  findNextSibling(skipHidden = false) {\r\n    return this._findAdjacentSibling(+1, skipHidden);\r\n  }\r\n\r\n  findPreviousSibling(skipHidden = false) {\r\n    return this._findAdjacentSibling(-1, skipHidden);\r\n  }\r\n\r\n  getVisibleChildren() {\r\n    return this.visibleChildren;\r\n  }\r\n\r\n  @computed get visibleChildren() {\r\n    return (this.children || []).filter((node) => !node.isHidden);\r\n  }\r\n\r\n  getFirstChild(skipHidden = false) {\r\n    let children = skipHidden ? this.visibleChildren : this.children;\r\n\r\n    return first(children || []);\r\n  }\r\n\r\n  getLastChild(skipHidden = false) {\r\n    let children = skipHidden ? this.visibleChildren : this.children;\r\n\r\n    return last(children || []);\r\n  }\r\n\r\n  findNextNode(goInside = true, skipHidden = false) {\r\n    return goInside && this.isExpanded && this.getFirstChild(skipHidden) ||\r\n           this.findNextSibling(skipHidden) ||\r\n           this.parent && this.parent.findNextNode(false, skipHidden);\r\n  }\r\n\r\n  findPreviousNode(skipHidden = false) {\r\n    let previousSibling = this.findPreviousSibling(skipHidden);\r\n    if (!previousSibling) {\r\n      return this.realParent;\r\n    }\r\n    return previousSibling._getLastOpenDescendant(skipHidden);\r\n  }\r\n\r\n  _getLastOpenDescendant(skipHidden = false) {\r\n    const lastChild = this.getLastChild(skipHidden);\r\n    return (this.isCollapsed || !lastChild)\r\n      ? this\r\n      : lastChild._getLastOpenDescendant(skipHidden);\r\n  }\r\n\r\n  private _getParentsChildren(skipHidden = false): any[] {\r\n    const children = this.parent &&\r\n      (skipHidden ? this.parent.getVisibleChildren() : this.parent.children);\r\n\r\n    return children || [];\r\n  }\r\n\r\n  private getIndexInParent(skipHidden = false) {\r\n    return this._getParentsChildren(skipHidden).indexOf(this);\r\n  }\r\n\r\n  isDescendantOf(node: TreeNode) {\r\n    if (this === node) return true;\r\n    else return this.parent && this.parent.isDescendantOf(node);\r\n  }\r\n\r\n  getNodePadding(): string {\r\n    return this.options.levelPadding * (this.level - 1) + 'px';\r\n  }\r\n\r\n  getClass(): string {\r\n    return [this.options.nodeClass(this), `tree-node-level-${ this.level }`].join(' ');\r\n  }\r\n\r\n  onDrop($event) {\r\n    this.mouseAction('drop', $event.event, {\r\n      from: $event.element,\r\n      to: { parent: this, index: 0, dropOnNode: true }\r\n    });\r\n  }\r\n\r\n  allowDrop = (element, $event?) => {\r\n    return this.options.allowDrop(element, { parent: this, index: 0 }, $event);\r\n  }\r\n\r\n  allowDragoverStyling = () => {\r\n    return this.options.allowDragoverStyling;\r\n  }\r\n\r\n  allowDrag() {\r\n    return this.options.allowDrag(this);\r\n  }\r\n\r\n\r\n  // helper methods:\r\n  loadNodeChildren() {\r\n    if (!this.options.getChildren) {\r\n      return Promise.resolve(); // Not getChildren method - for using redux\r\n    }\r\n    return Promise.resolve(this.options.getChildren(this))\r\n      .then((children) => {\r\n        if (children) {\r\n          this.setField('children', children);\r\n          this._initChildren();\r\n          if (this.options.useTriState && this.treeModel.isSelected(this)) {\r\n            this.setIsSelected(true);\r\n          }\r\n          this.children.forEach((child) => {\r\n            if (child.getField('isExpanded') && child.hasChildren) {\r\n              child.expand();\r\n            }\r\n          });\r\n      }}).then(() => {\r\n        this.fireEvent({\r\n          eventName: TREE_EVENTS.loadNodeChildren,\r\n          node: this\r\n        });\r\n      });\r\n  }\r\n\r\n  expand() {\r\n    if (!this.isExpanded) {\r\n      this.toggleExpanded();\r\n    }\r\n\r\n    return this;\r\n  }\r\n\r\n  collapse() {\r\n    if (this.isExpanded) {\r\n      this.toggleExpanded();\r\n    }\r\n\r\n    return this;\r\n  }\r\n\r\n  doForAll(fn: (node: ITreeNode) => any) {\r\n    Promise.resolve(fn(this)).then(() => {\r\n      if (this.children) {\r\n        this.children.forEach((child) => child.doForAll(fn));\r\n      }\r\n    });\r\n  }\r\n\r\n  expandAll() {\r\n    this.doForAll((node) => node.expand());\r\n  }\r\n\r\n  collapseAll() {\r\n    this.doForAll((node) => node.collapse());\r\n  }\r\n\r\n  ensureVisible() {\r\n    if (this.realParent) {\r\n      this.realParent.expand();\r\n      this.realParent.ensureVisible();\r\n    }\r\n\r\n    return this;\r\n  }\r\n\r\n  toggleExpanded() {\r\n    this.setIsExpanded(!this.isExpanded);\r\n\r\n    return this;\r\n  }\r\n\r\n  setIsExpanded(value) {\r\n    if (this.hasChildren) {\r\n      this.treeModel.setExpandedNode(this, value);\r\n    }\r\n\r\n    return this;\r\n  };\r\n\r\n  autoLoadChildren() {\r\n    this.handler =\r\n      reaction(\r\n        () => this.isExpanded,\r\n        (isExpanded) => {\r\n          if (!this.children && this.hasChildren && isExpanded) {\r\n            this.loadNodeChildren();\r\n          }\r\n        },\r\n        { fireImmediately: true }\r\n      );\r\n  }\r\n\r\n  dispose() {\r\n    if (this.children) {\r\n      this.children.forEach((child) => child.dispose());\r\n    }\r\n    if (this.handler) {\r\n      this.handler();\r\n    }\r\n    this.parent = null;\r\n    this.children = null;\r\n  }\r\n\r\n  setIsActive(value, multi = false) {\r\n    this.treeModel.setActiveNode(this, value, multi);\r\n    if (value) {\r\n      this.focus(this.options.scrollOnActivate);\r\n    }\r\n\r\n    return this;\r\n  }\r\n\r\n  isSelectable() {\r\n    return this.isLeaf || !this.children || !this.options.useTriState;\r\n  }\r\n\r\n  @action setIsSelected(value) {\r\n    if (this.isSelectable()) {\r\n      this.treeModel.setSelectedNode(this, value);\r\n    } else {\r\n      this.visibleChildren.forEach((child) => child.setIsSelected(value));\r\n    }\r\n\r\n    return this;\r\n  }\r\n\r\n  toggleSelected() {\r\n    this.setIsSelected(!this.isSelected);\r\n\r\n    return this;\r\n  }\r\n\r\n  toggleActivated(multi = false) {\r\n    this.setIsActive(!this.isActive, multi);\r\n\r\n    return this;\r\n  }\r\n\r\n  setActiveAndVisible(multi = false) {\r\n    this.setIsActive(true, multi)\r\n      .ensureVisible();\r\n\r\n    setTimeout(this.scrollIntoView.bind(this));\r\n\r\n    return this;\r\n  }\r\n\r\n  scrollIntoView(force = false) {\r\n    this.treeModel.virtualScroll.scrollIntoView(this, force);\r\n  }\r\n\r\n  focus(scroll = true) {\r\n    let previousNode = this.treeModel.getFocusedNode();\r\n    this.treeModel.setFocusedNode(this);\r\n    if (scroll) {\r\n      this.scrollIntoView();\r\n    }\r\n    if (previousNode) {\r\n      this.fireEvent({ eventName: TREE_EVENTS.blur, node: previousNode });\r\n    }\r\n    this.fireEvent({ eventName: TREE_EVENTS.focus, node: this });\r\n\r\n    return this;\r\n  }\r\n\r\n  blur() {\r\n    let previousNode = this.treeModel.getFocusedNode();\r\n    this.treeModel.setFocusedNode(null);\r\n    if (previousNode) {\r\n      this.fireEvent({ eventName: TREE_EVENTS.blur, node: this });\r\n    }\r\n\r\n    return this;\r\n  }\r\n\r\n  setIsHidden(value) {\r\n    this.treeModel.setIsHidden(this, value);\r\n  }\r\n\r\n  hide() {\r\n    this.setIsHidden(true);\r\n  }\r\n\r\n  show() {\r\n    this.setIsHidden(false);\r\n  }\r\n\r\n  mouseAction(actionName: string, $event, data: any = null) {\r\n    this.treeModel.setFocus(true);\r\n\r\n    const actionMapping = this.options.actionMapping.mouse;\r\n    const mouseAction = actionMapping[actionName];\r\n\r\n    if (mouseAction) {\r\n      mouseAction(this.treeModel, this, $event, data);\r\n    }\r\n  }\r\n\r\n  getSelfHeight() {\r\n    return this.options.nodeHeight(this);\r\n  }\r\n\r\n  @action _initChildren() {\r\n    this.children = this.getField('children')\r\n      .map((c, index) => new TreeNode(c, this, this.treeModel, index));\r\n  }\r\n}\r\n\r\nfunction uuid() {\r\n  return Math.floor(Math.random() * 10000000000000);\r\n}\r\n","import { Injectable, EventEmitter, OnDestroy } from '@angular/core';\r\nimport { observable, computed, action, autorun } from 'mobx';\r\nimport { Subscription } from 'rxjs';\r\nimport { TreeNode } from './tree-node.model';\r\nimport { TreeOptions } from './tree-options.model';\r\nimport { TreeVirtualScroll } from './tree-virtual-scroll.model';\r\nimport { ITreeModel, IDType, IDTypeDictionary } from '../defs/api';\r\nimport { TREE_EVENTS } from '../constants/events';\r\n\r\nimport { first, last, compact, find, isString, isFunction } from 'lodash-es';\r\n\r\n@Injectable()\r\nexport class TreeModel implements ITreeModel, OnDestroy {\r\n  static focusedTree = null;\r\n\r\n  options: TreeOptions = new TreeOptions();\r\n  nodes: any[];\r\n  eventNames = Object.keys(TREE_EVENTS);\r\n  virtualScroll: TreeVirtualScroll;\r\n\r\n  @observable roots: TreeNode[];\r\n  @observable expandedNodeIds: IDTypeDictionary = {};\r\n  @observable selectedLeafNodeIds: IDTypeDictionary = {};\r\n  @observable activeNodeIds: IDTypeDictionary = {};\r\n  @observable hiddenNodeIds: IDTypeDictionary = {};\r\n  @observable focusedNodeId: IDType = null;\r\n  @observable virtualRoot: TreeNode;\r\n\r\n  private firstUpdate = true;\r\n  private events: any;\r\n  private subscriptions: Subscription[] = [];\r\n\r\n  // events\r\n  fireEvent(event) {\r\n    event.treeModel = this;\r\n    this.events[event.eventName].emit(event);\r\n    this.events.event.emit(event);\r\n  }\r\n\r\n  subscribe(eventName, fn) {\r\n    const subscription = this.events[eventName].subscribe(fn);\r\n    this.subscriptions.push(subscription);\r\n  }\r\n\r\n\r\n  // getters\r\n  getFocusedNode(): TreeNode {\r\n    return this.focusedNode;\r\n  }\r\n\r\n\r\n  getActiveNode(): TreeNode {\r\n    return this.activeNodes[0];\r\n  }\r\n\r\n  getActiveNodes(): TreeNode[] {\r\n    return this.activeNodes;\r\n  }\r\n\r\n  getVisibleRoots() {\r\n    return this.virtualRoot.visibleChildren;\r\n  }\r\n\r\n  getFirstRoot(skipHidden = false) {\r\n    return first(skipHidden ? this.getVisibleRoots() : this.roots);\r\n  }\r\n\r\n  getLastRoot(skipHidden = false) {\r\n    return last(skipHidden ? this.getVisibleRoots() : this.roots);\r\n  }\r\n\r\n  get isFocused() {\r\n    return TreeModel.focusedTree === this;\r\n  }\r\n\r\n  isNodeFocused(node) {\r\n    return this.focusedNode === node;\r\n  }\r\n\r\n  isEmptyTree(): boolean {\r\n    return this.roots && this.roots.length === 0;\r\n  }\r\n\r\n  @computed get focusedNode() {\r\n    return this.focusedNodeId ? this.getNodeById(this.focusedNodeId) : null;\r\n  }\r\n\r\n  @computed get expandedNodes() {\r\n    const nodes = Object.keys(this.expandedNodeIds)\r\n      .filter((id) => this.expandedNodeIds[id])\r\n      .map((id) => this.getNodeById(id));\r\n\r\n    return compact(nodes);\r\n  }\r\n\r\n  @computed get activeNodes() {\r\n    const nodes = Object.keys(this.activeNodeIds)\r\n      .filter((id) => this.activeNodeIds[id])\r\n      .map((id) => this.getNodeById(id));\r\n\r\n    return compact(nodes);\r\n  }\r\n\r\n  @computed get hiddenNodes() {\r\n    const nodes = Object.keys(this.hiddenNodeIds)\r\n        .filter((id) => this.hiddenNodeIds[id])\r\n        .map((id) => this.getNodeById(id));\r\n\r\n    return compact(nodes);\r\n  }\r\n\r\n  @computed get selectedLeafNodes() {\r\n    const nodes = Object.keys(this.selectedLeafNodeIds)\r\n        .filter((id) => this.selectedLeafNodeIds[id])\r\n        .map((id) => this.getNodeById(id));\r\n\r\n    return compact(nodes);\r\n  }\r\n\r\n  // locating nodes\r\n  getNodeByPath(path: any[], startNode= null): TreeNode {\r\n    if (!path) return null;\r\n\r\n    startNode = startNode || this.virtualRoot;\r\n    if (path.length === 0) return startNode;\r\n\r\n    if (!startNode.children) return null;\r\n\r\n    const childId = path.shift();\r\n    const childNode = find(startNode.children, { id: childId });\r\n\r\n    if (!childNode) return null;\r\n\r\n    return this.getNodeByPath(path, childNode);\r\n  }\r\n\r\n  getNodeById(id) {\r\n    const idStr = id.toString();\r\n\r\n    return this.getNodeBy((node) => node.id.toString() === idStr);\r\n  }\r\n\r\n  getNodeBy(predicate, startNode = null) {\r\n    startNode = startNode || this.virtualRoot;\r\n\r\n    if (!startNode.children) return null;\r\n\r\n    const found = find(startNode.children, predicate);\r\n\r\n    if (found) { // found in children\r\n      return found;\r\n    } else { // look in children's children\r\n      for (let child of startNode.children) {\r\n        const foundInChildren = this.getNodeBy(predicate, child);\r\n        if (foundInChildren) return foundInChildren;\r\n      }\r\n    }\r\n  }\r\n\r\n  isExpanded(node) {\r\n    return this.expandedNodeIds[node.id];\r\n  }\r\n\r\n  isHidden(node) {\r\n    return this.hiddenNodeIds[node.id];\r\n  }\r\n\r\n  isActive(node) {\r\n    return this.activeNodeIds[node.id];\r\n  }\r\n\r\n  isSelected(node) {\r\n    return this.selectedLeafNodeIds[node.id];\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    this.dispose();\r\n    this.unsubscribeAll();\r\n  }\r\n\r\n  dispose() {\r\n    // Dispose reactions of the replaced nodes\r\n    if (this.virtualRoot) {\r\n      this.virtualRoot.dispose();\r\n    }\r\n  }\r\n\r\n  unsubscribeAll() {\r\n    this.subscriptions.forEach(subscription => subscription.unsubscribe());\r\n    this.subscriptions = [];\r\n  }\r\n\r\n  // actions\r\n  @action setData({ nodes, options = null, events = null }: {nodes: any, options: any, events: any}) {\r\n    if (options) {\r\n      this.options = new TreeOptions(options);\r\n    }\r\n    if (events) {\r\n      this.events = events;\r\n    }\r\n    if (nodes) {\r\n      this.nodes = nodes;\r\n    }\r\n\r\n    this.update();\r\n  }\r\n\r\n  @action update() {\r\n    // Rebuild tree:\r\n    let virtualRootConfig = {\r\n      id: this.options.rootId,\r\n      virtual: true,\r\n      [this.options.childrenField]: this.nodes\r\n    };\r\n\r\n    this.dispose();\r\n\r\n    this.virtualRoot = new TreeNode(virtualRootConfig, null, this, 0);\r\n\r\n    this.roots = this.virtualRoot.children;\r\n\r\n    // Fire event:\r\n    if (this.firstUpdate) {\r\n      if (this.roots) {\r\n        this.firstUpdate = false;\r\n        this._calculateExpandedNodes();\r\n      }\r\n    } else {\r\n      this.fireEvent({ eventName: TREE_EVENTS.updateData });\r\n    }\r\n  }\r\n\r\n\r\n  @action setFocusedNode(node) {\r\n    this.focusedNodeId = node ? node.id : null;\r\n  }\r\n\r\n  @action setFocus(value) {\r\n    TreeModel.focusedTree = value ? this : null;\r\n  }\r\n\r\n  @action doForAll(fn) {\r\n    this.roots.forEach((root) => root.doForAll(fn));\r\n  }\r\n\r\n  @action focusNextNode() {\r\n    let previousNode = this.getFocusedNode();\r\n    let nextNode = previousNode ? previousNode.findNextNode(true, true) : this.getFirstRoot(true);\r\n    if (nextNode) nextNode.focus();\r\n  }\r\n\r\n  @action focusPreviousNode() {\r\n    let previousNode = this.getFocusedNode();\r\n    let nextNode = previousNode ? previousNode.findPreviousNode(true) : this.getLastRoot(true);\r\n    if (nextNode) nextNode.focus();\r\n  }\r\n\r\n  @action focusDrillDown() {\r\n    let previousNode = this.getFocusedNode();\r\n    if (previousNode && previousNode.isCollapsed && previousNode.hasChildren) {\r\n      previousNode.toggleExpanded();\r\n    }\r\n    else {\r\n      let nextNode = previousNode ? previousNode.getFirstChild(true) : this.getFirstRoot(true);\r\n      if (nextNode) nextNode.focus();\r\n    }\r\n  }\r\n\r\n  @action focusDrillUp() {\r\n    let previousNode = this.getFocusedNode();\r\n    if (!previousNode) return;\r\n    if (previousNode.isExpanded) {\r\n      previousNode.toggleExpanded();\r\n    }\r\n    else {\r\n      let nextNode = previousNode.realParent;\r\n      if (nextNode) nextNode.focus();\r\n    }\r\n  }\r\n\r\n  @action setActiveNode(node, value, multi = false) {\r\n    if (multi) {\r\n      this._setActiveNodeMulti(node, value);\r\n    }\r\n    else {\r\n      this._setActiveNodeSingle(node, value);\r\n    }\r\n\r\n    if (value) {\r\n      node.focus(this.options.scrollOnActivate);\r\n      this.fireEvent({ eventName: TREE_EVENTS.activate, node });\r\n      this.fireEvent({ eventName: TREE_EVENTS.nodeActivate, node }); // For IE11\r\n    } else {\r\n      this.fireEvent({ eventName: TREE_EVENTS.deactivate, node });\r\n      this.fireEvent({ eventName: TREE_EVENTS.nodeDeactivate, node }); // For IE11\r\n    }\r\n  }\r\n\r\n  @action setSelectedNode(node, value) {\r\n    this.selectedLeafNodeIds = Object.assign({}, this.selectedLeafNodeIds, {[node.id]: value});\r\n\r\n    if (value) {\r\n      node.focus();\r\n      this.fireEvent({ eventName: TREE_EVENTS.select, node });\r\n    } else {\r\n      this.fireEvent({ eventName: TREE_EVENTS.deselect, node });\r\n    }\r\n  }\r\n\r\n  @action setExpandedNode(node, value) {\r\n    this.expandedNodeIds = Object.assign({}, this.expandedNodeIds, {[node.id]: value});\r\n    this.fireEvent({ eventName: TREE_EVENTS.toggleExpanded, node, isExpanded: value });\r\n  }\r\n\r\n  @action expandAll() {\r\n    this.roots.forEach((root) => root.expandAll());\r\n  }\r\n\r\n  @action collapseAll() {\r\n    this.roots.forEach((root) => root.collapseAll());\r\n  }\r\n\r\n  @action setIsHidden(node, value) {\r\n    this.hiddenNodeIds = Object.assign({}, this.hiddenNodeIds, {[node.id]: value});\r\n  }\r\n\r\n  @action setHiddenNodeIds(nodeIds) {\r\n    this.hiddenNodeIds = nodeIds.reduce((hiddenNodeIds, id) => Object.assign(hiddenNodeIds, {\r\n      [id]: true\r\n    }), {});\r\n  }\r\n\r\n  performKeyAction(node, $event) {\r\n    const keyAction = this.options.actionMapping.keys[$event.keyCode];\r\n    if (keyAction) {\r\n      $event.preventDefault();\r\n      keyAction(this, node, $event);\r\n      return true;\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  @action filterNodes(filter, autoShow = true) {\r\n    let filterFn;\r\n\r\n    if (!filter) {\r\n      return this.clearFilter();\r\n    }\r\n\r\n    // support function and string filter\r\n    if (isString(filter)) {\r\n      filterFn = (node) => node.displayField.toLowerCase().indexOf(filter.toLowerCase()) !== -1;\r\n    }\r\n    else if (isFunction(filter)) {\r\n       filterFn = filter;\r\n    }\r\n    else {\r\n      console.error('Don\\'t know what to do with filter', filter);\r\n      console.error('Should be either a string or function');\r\n      return;\r\n    }\r\n\r\n    const ids = {};\r\n    this.roots.forEach((node) => this._filterNode(ids, node, filterFn, autoShow));\r\n    this.hiddenNodeIds = ids;\r\n    this.fireEvent({ eventName: TREE_EVENTS.changeFilter });\r\n  }\r\n\r\n  @action clearFilter() {\r\n    this.hiddenNodeIds = {};\r\n    this.fireEvent({ eventName: TREE_EVENTS.changeFilter });\r\n  }\r\n\r\n  @action moveNode(node, to) {\r\n    const fromIndex = node.getIndexInParent();\r\n    const fromParent = node.parent;\r\n\r\n    if (!this.canMoveNode(node, to, fromIndex)) return;\r\n\r\n    const fromChildren = fromParent.getField('children');\r\n\r\n    // If node doesn't have children - create children array\r\n    if (!to.parent.getField('children')) {\r\n      to.parent.setField('children', []);\r\n    }\r\n    const toChildren = to.parent.getField('children');\r\n\r\n    const originalNode = fromChildren.splice(fromIndex, 1)[0];\r\n\r\n    // Compensate for index if already removed from parent:\r\n    let toIndex = (fromParent === to.parent && to.index > fromIndex) ? to.index - 1 : to.index;\r\n\r\n    toChildren.splice(toIndex, 0, originalNode);\r\n\r\n    fromParent.treeModel.update();\r\n    if (to.parent.treeModel !== fromParent.treeModel) {\r\n      to.parent.treeModel.update();\r\n    }\r\n\r\n    this.fireEvent({\r\n      eventName: TREE_EVENTS.moveNode,\r\n      node: originalNode,\r\n      to: { parent: to.parent.data, index: toIndex },\r\n      from: { parent: fromParent.data, index: fromIndex}\r\n    });\r\n  }\r\n\r\n  @action copyNode(node, to) {\r\n    const fromIndex = node.getIndexInParent();\r\n\r\n    if (!this.canMoveNode(node, to, fromIndex)) return;\r\n\r\n    // If node doesn't have children - create children array\r\n    if (!to.parent.getField('children')) {\r\n      to.parent.setField('children', []);\r\n    }\r\n    const toChildren = to.parent.getField('children');\r\n\r\n    const nodeCopy = this.options.getNodeClone(node);\r\n\r\n    toChildren.splice(to.index, 0, nodeCopy);\r\n\r\n    node.treeModel.update();\r\n    if (to.parent.treeModel !== node.treeModel) {\r\n      to.parent.treeModel.update();\r\n    }\r\n\r\n    this.fireEvent({ eventName: TREE_EVENTS.copyNode, node: nodeCopy, to: { parent: to.parent.data, index: to.index } });\r\n  }\r\n\r\n  getState() {\r\n    return {\r\n      expandedNodeIds: this.expandedNodeIds,\r\n      selectedLeafNodeIds: this.selectedLeafNodeIds,\r\n      activeNodeIds: this.activeNodeIds,\r\n      hiddenNodeIds: this.hiddenNodeIds,\r\n      focusedNodeId: this.focusedNodeId\r\n    };\r\n  }\r\n\r\n  @action setState(state) {\r\n    if (!state) return;\r\n\r\n    Object.assign(this, {\r\n      expandedNodeIds: state.expandedNodeIds || {},\r\n      selectedLeafNodeIds: state.selectedLeafNodeIds || {},\r\n      activeNodeIds: state.activeNodeIds || {},\r\n      hiddenNodeIds: state.hiddenNodeIds || {},\r\n      focusedNodeId: state.focusedNodeId\r\n    });\r\n  }\r\n\r\n  subscribeToState(fn) {\r\n    autorun(() => fn(this.getState()));\r\n  }\r\n\r\n  canMoveNode(node, to, fromIndex = undefined) {\r\n    const fromNodeIndex = fromIndex || node.getIndexInParent();\r\n\r\n    // same node:\r\n    if (node.parent === to.parent && fromIndex === to.index) {\r\n      return false;\r\n    }\r\n\r\n    return !to.parent.isDescendantOf(node);\r\n  }\r\n\r\n  calculateExpandedNodes() {\r\n      this._calculateExpandedNodes();\r\n  }\r\n\r\n  // private methods\r\n  private _filterNode(ids, node, filterFn, autoShow) {\r\n    // if node passes function then it's visible\r\n    let isVisible = filterFn(node);\r\n\r\n    if (node.children) {\r\n      // if one of node's children passes filter then this node is also visible\r\n      node.children.forEach((child) => {\r\n        if (this._filterNode(ids, child, filterFn, autoShow)) {\r\n          isVisible = true;\r\n        }\r\n      });\r\n    }\r\n\r\n    // mark node as hidden\r\n    if (!isVisible) {\r\n      ids[node.id] = true;\r\n    }\r\n    // auto expand parents to make sure the filtered nodes are visible\r\n    if (autoShow && isVisible) {\r\n      node.ensureVisible();\r\n    }\r\n    return isVisible;\r\n  }\r\n\r\n  private _calculateExpandedNodes(startNode = null) {\r\n    startNode = startNode || this.virtualRoot;\r\n\r\n    if (startNode.data[this.options.isExpandedField]) {\r\n      this.expandedNodeIds = Object.assign({}, this.expandedNodeIds, {[startNode.id]: true});\r\n    }\r\n    if (startNode.children) {\r\n      startNode.children.forEach((child) => this._calculateExpandedNodes(child));\r\n    }\r\n  }\r\n\r\n  private _setActiveNodeSingle(node, value) {\r\n    // Deactivate all other nodes:\r\n    this.activeNodes\r\n      .filter((activeNode) => activeNode !== node)\r\n      .forEach((activeNode) => {\r\n        this.fireEvent({ eventName: TREE_EVENTS.deactivate, node: activeNode });\r\n        this.fireEvent({ eventName: TREE_EVENTS.nodeDeactivate, node: activeNode }); // For IE11\r\n      });\r\n\r\n    if (value) {\r\n      this.activeNodeIds = {[node.id]: true};\r\n    }\r\n    else {\r\n      this.activeNodeIds = {};\r\n    }\r\n  }\r\n\r\n  private _setActiveNodeMulti(node, value) {\r\n    this.activeNodeIds = Object.assign({}, this.activeNodeIds, {[node.id]: value});\r\n  }\r\n\r\n}\r\n","import { Injectable } from '@angular/core';\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class TreeDraggedElement {\r\n  _draggedElement: any = null;\r\n\r\n  set(draggedElement: any) {\r\n    this._draggedElement = draggedElement;\r\n  }\r\n\r\n  get(): any {\r\n    return this._draggedElement;\r\n  }\r\n\r\n  isDragging() {\r\n    return !!this.get();\r\n  }\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { observable, computed, action, autorun, reaction } from 'mobx';\r\nimport { TreeModel } from './tree.model';\r\nimport { TREE_EVENTS } from '../constants/events';\r\n\r\nconst Y_OFFSET = 500; // Extra pixels outside the viewport, in each direction, to render nodes in\r\nconst Y_EPSILON = 150; // Minimum pixel change required to recalculate the rendered nodes\r\n\r\n@Injectable()\r\nexport class TreeVirtualScroll {\r\n  private _dispose: any;\r\n\r\n  @observable yBlocks = 0;\r\n  @observable x = 0;\r\n  @observable viewportHeight = null;\r\n  viewport = null;\r\n\r\n  @computed get y() {\r\n    return this.yBlocks * Y_EPSILON;\r\n  }\r\n\r\n  @computed get totalHeight() {\r\n    return this.treeModel.virtualRoot ? this.treeModel.virtualRoot.height : 0;\r\n  }\r\n\r\n  constructor(private treeModel: TreeModel) {\r\n    treeModel.virtualScroll = this;\r\n    this._dispose = [autorun(() => this.fixScroll())];\r\n  }\r\n\r\n  fireEvent(event) {\r\n    this.treeModel.fireEvent(event);\r\n  }\r\n\r\n  init() {\r\n    const fn = this.recalcPositions.bind(this);\r\n\r\n    fn();\r\n    this._dispose = [\r\n      ...this._dispose,\r\n      reaction(() => this.treeModel.roots, fn),\r\n      reaction(() => this.treeModel.expandedNodeIds, fn),\r\n      reaction(() => this.treeModel.hiddenNodeIds, fn)\r\n    ];\r\n    this.treeModel.subscribe(TREE_EVENTS.loadNodeChildren, fn);\r\n  }\r\n\r\n  isEnabled() {\r\n    return this.treeModel.options.useVirtualScroll;\r\n  }\r\n\r\n  @action private _setYBlocks(value) {\r\n    this.yBlocks = value;\r\n  }\r\n\r\n  @action recalcPositions() {\r\n    this.treeModel.virtualRoot.height = this._getPositionAfter(this.treeModel.getVisibleRoots(), 0);\r\n  }\r\n\r\n  private _getPositionAfter(nodes, startPos) {\r\n    let position = startPos;\r\n\r\n    nodes.forEach((node) => {\r\n      node.position = position;\r\n      position = this._getPositionAfterNode(node, position);\r\n    });\r\n    return position;\r\n  }\r\n\r\n  private _getPositionAfterNode(node, startPos) {\r\n    let position = node.getSelfHeight() + startPos;\r\n\r\n    if (node.children && node.isExpanded) { // TBD: consider loading component as well\r\n      position = this._getPositionAfter(node.visibleChildren, position);\r\n    }\r\n    node.height = position - startPos;\r\n    return position;\r\n  }\r\n\r\n\r\n  clear() {\r\n    this._dispose.forEach((d) => d());\r\n  }\r\n\r\n  @action setViewport(viewport) {\r\n    Object.assign(this, {\r\n      viewport,\r\n      x: viewport.scrollLeft,\r\n      yBlocks: Math.round(viewport.scrollTop / Y_EPSILON),\r\n      viewportHeight: viewport.getBoundingClientRect ? viewport.getBoundingClientRect().height : 0\r\n    });\r\n  }\r\n\r\n  @action scrollIntoView(node, force, scrollToMiddle = true) {\r\n    if (node.options.scrollContainer) {\r\n      const scrollContainer = node.options.scrollContainer;\r\n      const scrollContainerHeight = scrollContainer.getBoundingClientRect().height;\r\n      const scrollContainerTop = scrollContainer.getBoundingClientRect().top;\r\n      const nodeTop = this.viewport.getBoundingClientRect().top + node.position - scrollContainerTop;\r\n\r\n      if (force || // force scroll to node\r\n        nodeTop < scrollContainer.scrollTop || // node is above scroll container\r\n        nodeTop + node.getSelfHeight() > scrollContainer.scrollTop + scrollContainerHeight) { // node is below container\r\n        scrollContainer.scrollTop = scrollToMiddle ?\r\n          nodeTop - scrollContainerHeight / 2 : // scroll to middle\r\n          nodeTop; // scroll to start\r\n      }\r\n    } else {\r\n      if (force || // force scroll to node\r\n        node.position < this.y || // node is above viewport\r\n        node.position + node.getSelfHeight() > this.y + this.viewportHeight) { // node is below viewport\r\n        if (this.viewport) {\r\n          this.viewport.scrollTop = scrollToMiddle ?\r\n          node.position - this.viewportHeight / 2 : // scroll to middle\r\n          node.position; // scroll to start\r\n\r\n          this._setYBlocks(Math.floor(this.viewport.scrollTop / Y_EPSILON));\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  getViewportNodes(nodes) {\r\n    if (!nodes) return [];\r\n\r\n    const visibleNodes = nodes.filter((node) => !node.isHidden);\r\n\r\n    if (!this.isEnabled()) return visibleNodes;\r\n\r\n    if (!this.viewportHeight || !visibleNodes.length) return [];\r\n\r\n    // When loading children async this method is called before their height and position is calculated.\r\n    // In that case firstIndex === 0 and lastIndex === visibleNodes.length - 1 (e.g. 1000),\r\n    // which means that it loops through every visibleNodes item and push them into viewportNodes array.\r\n    // We can prevent nodes from being pushed to the array and wait for the appropriate calculations to take place\r\n    const lastVisibleNode = visibleNodes.slice(-1)[0]\r\n    if (!lastVisibleNode.height && lastVisibleNode.position === 0) return [];\r\n\r\n    // Search for first node in the viewport using binary search\r\n    // Look for first node that starts after the beginning of the viewport (with buffer)\r\n    // Or that ends after the beginning of the viewport\r\n    const firstIndex = binarySearch(visibleNodes, (node) => {\r\n      return (node.position + Y_OFFSET > this.y) ||\r\n             (node.position + node.height > this.y);\r\n    });\r\n\r\n    // Search for last node in the viewport using binary search\r\n    // Look for first node that starts after the end of the viewport (with buffer)\r\n    const lastIndex = binarySearch(visibleNodes, (node) => {\r\n      return node.position - Y_OFFSET > this.y + this.viewportHeight;\r\n    }, firstIndex);\r\n\r\n    const viewportNodes = [];\r\n\r\n    for (let i = firstIndex; i <= lastIndex; i++) {\r\n      viewportNodes.push(visibleNodes[i]);\r\n    }\r\n\r\n    return viewportNodes;\r\n  }\r\n\r\n  fixScroll() {\r\n    const maxY = Math.max(0, this.totalHeight - this.viewportHeight);\r\n\r\n    if (this.y < 0) this._setYBlocks(0);\r\n    if (this.y > maxY) this._setYBlocks(maxY / Y_EPSILON);\r\n  }\r\n}\r\n\r\nfunction binarySearch(nodes, condition, firstIndex = 0) {\r\n  let index = firstIndex;\r\n  let toIndex = nodes.length - 1;\r\n\r\n  while (index !== toIndex) {\r\n    let midIndex = Math.floor((index + toIndex) / 2);\r\n\r\n    if (condition(nodes[midIndex])) {\r\n      toIndex = midIndex;\r\n    }\r\n    else {\r\n      if (index === midIndex) index = toIndex;\r\n      else index = midIndex;\r\n    }\r\n  }\r\n  return index;\r\n}\r\n","import { Component, Input, TemplateRef, ViewEncapsulation } from '@angular/core';\r\nimport { TreeNode } from '../models/tree-node.model';\r\n\r\n@Component({\r\n  encapsulation: ViewEncapsulation.None,\r\n  selector: 'tree-loading-component',\r\n  template: `\r\n    <span *ngIf=\"!template\">loading...</span>\r\n    <ng-container\r\n      [ngTemplateOutlet]=\"template\"\r\n      [ngTemplateOutletContext]=\"{ $implicit: node }\">\r\n    </ng-container>\r\n  `,\r\n})\r\nexport class LoadingComponent {\r\n  @Input() template: TemplateRef<any>;\r\n  @Input() node: TreeNode;\r\n}\r\n","import { Component, ContentChild, EventEmitter, HostListener, Input, OnChanges, Output, TemplateRef, ViewChild } from '@angular/core';\r\nimport { TreeModel } from '../models/tree.model';\r\nimport { TreeDraggedElement } from '../models/tree-dragged-element.model';\r\nimport { TreeOptions } from '../models/tree-options.model';\r\nimport { ITreeOptions } from '../defs/api';\r\nimport { TreeViewportComponent } from './tree-viewport.component';\r\n\r\nimport { includes, pick } from 'lodash-es';\r\n\r\n@Component({\r\n  selector: 'Tree, tree-root',\r\n  providers: [TreeModel],\r\n  styles: [],\r\n  template: `\r\n      <tree-viewport #viewport>\r\n          <div\r\n                  class=\"angular-tree-component\"\r\n                  [class.node-dragging]=\"treeDraggedElement.isDragging()\"\r\n                  [class.angular-tree-component-rtl]=\"treeModel.options.rtl\">\r\n              <tree-node-collection\r\n                      *ngIf=\"treeModel.roots\"\r\n                      [nodes]=\"treeModel.roots\"\r\n                      [treeModel]=\"treeModel\"\r\n                      [templates]=\"{\r\n            loadingTemplate: loadingTemplate,\r\n            treeNodeTemplate: treeNodeTemplate,\r\n            treeNodeWrapperTemplate: treeNodeWrapperTemplate,\r\n            treeNodeFullTemplate: treeNodeFullTemplate\r\n          }\">\r\n              </tree-node-collection>\r\n              <tree-node-drop-slot\r\n                      class=\"empty-tree-drop-slot\"\r\n                      *ngIf=\"treeModel.isEmptyTree()\"\r\n                      [dropIndex]=\"0\"\r\n                      [node]=\"treeModel.virtualRoot\">\r\n              </tree-node-drop-slot>\r\n          </div>\r\n      </tree-viewport>\r\n  `\r\n})\r\nexport class TreeComponent implements OnChanges {\r\n  _nodes: any[];\r\n  _options: TreeOptions;\r\n\r\n  @ContentChild('loadingTemplate', { static: false }) loadingTemplate: TemplateRef<any>;\r\n  @ContentChild('treeNodeTemplate', { static: false }) treeNodeTemplate: TemplateRef<any>;\r\n  @ContentChild('treeNodeWrapperTemplate', { static: false }) treeNodeWrapperTemplate: TemplateRef<any>;\r\n  @ContentChild('treeNodeFullTemplate', { static: false }) treeNodeFullTemplate: TemplateRef<any>;\r\n  @ViewChild('viewport', { static: false }) viewportComponent: TreeViewportComponent;\r\n\r\n  // Will be handled in ngOnChanges\r\n  @Input() set nodes(nodes: any[]) {\r\n  };\r\n\r\n  @Input() set options(options: ITreeOptions) {\r\n  };\r\n\r\n  @Input() set focused(value: boolean) {\r\n    this.treeModel.setFocus(value);\r\n  }\r\n\r\n  @Input() set state(state) {\r\n    this.treeModel.setState(state);\r\n  }\r\n\r\n  @Output() toggleExpanded;\r\n  @Output() activate;\r\n  @Output() deactivate;\r\n  @Output() nodeActivate;\r\n  @Output() nodeDeactivate;\r\n  @Output() select;\r\n  @Output() deselect;\r\n  @Output() focus;\r\n  @Output() blur;\r\n  @Output() updateData;\r\n  @Output() initialized;\r\n  @Output() moveNode;\r\n  @Output() copyNode;\r\n  @Output() loadNodeChildren;\r\n  @Output() changeFilter;\r\n  @Output() event;\r\n  @Output() stateChange;\r\n\r\n  constructor(\r\n    public treeModel: TreeModel,\r\n    public treeDraggedElement: TreeDraggedElement) {\r\n\r\n    treeModel.eventNames.forEach((name) => this[name] = new EventEmitter());\r\n    treeModel.subscribeToState((state) => this.stateChange.emit(state));\r\n  }\r\n\r\n  @HostListener('body: keydown', ['$event'])\r\n  onKeydown($event) {\r\n    if (!this.treeModel.isFocused) return;\r\n    if (includes(['input', 'textarea'],\r\n      document.activeElement.tagName.toLowerCase())) return;\r\n\r\n    const focusedNode = this.treeModel.getFocusedNode();\r\n\r\n    this.treeModel.performKeyAction(focusedNode, $event);\r\n  }\r\n\r\n  @HostListener('body: mousedown', ['$event'])\r\n  onMousedown($event) {\r\n    function isOutsideClick(startElement: Element, nodeName: string) {\r\n      return !startElement ? true : startElement.localName === nodeName ? false : isOutsideClick(startElement.parentElement, nodeName);\r\n    }\r\n\r\n    if (isOutsideClick($event.target, 'tree-root')) {\r\n      this.treeModel.setFocus(false);\r\n    }\r\n  }\r\n\r\n  ngOnChanges(changes) {\r\n    if (changes.options || changes.nodes) {\r\n      this.treeModel.setData({\r\n        options: changes.options && changes.options.currentValue,\r\n        nodes: changes.nodes && changes.nodes.currentValue,\r\n        events: pick(this, this.treeModel.eventNames)\r\n      });\r\n    }\r\n  }\r\n\r\n  sizeChanged() {\r\n    this.viewportComponent.setViewport();\r\n  }\r\n}\r\n","import {\r\n  Component,\r\n  Input,\r\n  ViewEncapsulation,\r\n  TemplateRef\r\n} from '@angular/core';\r\nimport { TreeNode } from '../models/tree-node.model';\r\n\r\n@Component({\r\n  selector: 'TreeNode, tree-node',\r\n  encapsulation: ViewEncapsulation.None,\r\n  styles: [],\r\n  template: `\r\n    <ng-container *treeMobxAutorun=\"{ dontDetach: true }\">\r\n      <div\r\n        *ngIf=\"!templates.treeNodeFullTemplate\"\r\n        [class]=\"node.getClass()\"\r\n        [class.tree-node]=\"true\"\r\n        [class.tree-node-expanded]=\"node.isExpanded && node.hasChildren\"\r\n        [class.tree-node-collapsed]=\"node.isCollapsed && node.hasChildren\"\r\n        [class.tree-node-leaf]=\"node.isLeaf\"\r\n        [class.tree-node-active]=\"node.isActive\"\r\n        [class.tree-node-focused]=\"node.isFocused\"\r\n      >\r\n        <tree-node-drop-slot\r\n          *ngIf=\"index === 0\"\r\n          [dropIndex]=\"node.index\"\r\n          [node]=\"node.parent\"\r\n        ></tree-node-drop-slot>\r\n\r\n        <tree-node-wrapper\r\n          [node]=\"node\"\r\n          [index]=\"index\"\r\n          [templates]=\"templates\"\r\n        ></tree-node-wrapper>\r\n\r\n        <tree-node-children\r\n          [node]=\"node\"\r\n          [templates]=\"templates\"\r\n        ></tree-node-children>\r\n        <tree-node-drop-slot\r\n          [dropIndex]=\"node.index + 1\"\r\n          [node]=\"node.parent\"\r\n        ></tree-node-drop-slot>\r\n      </div>\r\n      <ng-container\r\n        [ngTemplateOutlet]=\"templates.treeNodeFullTemplate\"\r\n        [ngTemplateOutletContext]=\"{\r\n          $implicit: node,\r\n          node: node,\r\n          index: index,\r\n          templates: templates\r\n        }\"\r\n      >\r\n      </ng-container>\r\n    </ng-container>\r\n  `\r\n})\r\nexport class TreeNodeComponent {\r\n  @Input() node: TreeNode;\r\n  @Input() index: number;\r\n  @Input() templates: any;\r\n}\r\n","import { Component, Input, ViewEncapsulation, TemplateRef } from '@angular/core';\r\nimport { TreeNode } from '../models/tree-node.model';\r\n\r\n@Component({\r\n  selector: 'tree-node-content',\r\n  encapsulation: ViewEncapsulation.None,\r\n  template: `\r\n  <span *ngIf=\"!template\">{{ node.displayField }}</span>\r\n  <ng-container\r\n    [ngTemplateOutlet]=\"template\"\r\n    [ngTemplateOutletContext]=\"{ $implicit: node, node: node, index: index }\">\r\n  </ng-container>`,\r\n})\r\nexport class TreeNodeContent {\r\n  @Input() node: TreeNode;\r\n  @Input() index: number;\r\n  @Input() template: TemplateRef<any>;\r\n}\r\n","import { Component, Input, ViewEncapsulation } from '@angular/core';\r\nimport { TreeNode } from '../models/tree-node.model';\r\n\r\n@Component({\r\n  selector: 'TreeNodeDropSlot, tree-node-drop-slot',\r\n  encapsulation: ViewEncapsulation.None,\r\n  styles: [],\r\n  template: `\r\n    <div\r\n      class=\"node-drop-slot\"\r\n      (treeDrop)=\"onDrop($event)\"\r\n      [treeAllowDrop]=\"allowDrop.bind(this)\"\r\n      [allowDragoverStyling]=\"true\">\r\n    </div>\r\n  `\r\n})\r\nexport class TreeNodeDropSlot {\r\n  @Input() node: TreeNode;\r\n  @Input() dropIndex: number;\r\n\r\n  onDrop($event) {\r\n    this.node.mouseAction('drop', $event.event, {\r\n      from: $event.element,\r\n      to: { parent: this.node, index: this.dropIndex }\r\n    });\r\n  }\r\n\r\n  allowDrop(element, $event) {\r\n    return this.node.options.allowDrop(element, { parent: this.node, index: this.dropIndex }, $event);\r\n  }\r\n}\r\n","import { Component, Input, ViewEncapsulation } from '@angular/core';\r\nimport { TreeNode } from '../models/tree-node.model';\r\n\r\n@Component({\r\n  selector: 'tree-node-expander',\r\n  encapsulation: ViewEncapsulation.None,\r\n  styles: [],\r\n  template: `\r\n    <ng-container *treeMobxAutorun=\"{ dontDetach: true }\">\r\n      <span\r\n        *ngIf=\"node.hasChildren\"\r\n        [class.toggle-children-wrapper-expanded]=\"node.isExpanded\"\r\n        [class.toggle-children-wrapper-collapsed]=\"node.isCollapsed\"\r\n        class=\"toggle-children-wrapper\"\r\n        (click)=\"node.mouseAction('expanderClick', $event)\"\r\n      >\r\n        <span class=\"toggle-children\"></span>\r\n      </span>\r\n      <span *ngIf=\"!node.hasChildren\" class=\"toggle-children-placeholder\">\r\n      </span>\r\n    </ng-container>\r\n  `\r\n})\r\nexport class TreeNodeExpanderComponent {\r\n  @Input() node: TreeNode;\r\n}\r\n","import { Component, Input, ViewEncapsulation } from '@angular/core';\r\nimport { TreeNode } from '../models/tree-node.model';\r\n\r\n@Component({\r\n  selector: 'tree-node-children',\r\n  encapsulation: ViewEncapsulation.None,\r\n  styles: [],\r\n  template: `\r\n    <ng-container *treeMobxAutorun=\"{ dontDetach: true }\">\r\n      <div\r\n        [class.tree-children]=\"true\"\r\n        [class.tree-children-no-padding]=\"node.options.levelPadding\"\r\n        *treeAnimateOpen=\"\r\n          node.isExpanded;\r\n          speed: node.options.animateSpeed;\r\n          acceleration: node.options.animateAcceleration;\r\n          enabled: node.options.animateExpand\r\n        \"\r\n      >\r\n        <tree-node-collection\r\n          *ngIf=\"node.children\"\r\n          [nodes]=\"node.children\"\r\n          [templates]=\"templates\"\r\n          [treeModel]=\"node.treeModel\"\r\n        >\r\n        </tree-node-collection>\r\n        <tree-loading-component\r\n          [style.padding-left]=\"node.getNodePadding()\"\r\n          class=\"tree-node-loading\"\r\n          *ngIf=\"!node.children\"\r\n          [template]=\"templates.loadingTemplate\"\r\n          [node]=\"node\"\r\n        ></tree-loading-component>\r\n      </div>\r\n    </ng-container>\r\n  `\r\n})\r\nexport class TreeNodeChildrenComponent {\r\n  @Input() node: TreeNode;\r\n  @Input() templates: any;\r\n}\r\n","import { action as mobxAction } from 'mobx';\r\nimport { computed as mobxComputed } from 'mobx';\r\nimport { observable as mobxObservable } from 'mobx';\r\n\r\n// Re-export mobx operators to be able to use inside components with AOT:\r\nexport function actionInternal(...args) {\r\n  return (mobxAction as any)(...args);\r\n}\r\nexport const action: typeof mobxAction = Object.assign(\r\n  actionInternal,\r\n  mobxAction\r\n) as any;\r\n\r\nfunction computedInternal(...args) {\r\n  return (mobxComputed as any)(...args);\r\n}\r\nexport const computed: typeof mobxComputed = Object.assign(\r\n  computedInternal,\r\n  mobxComputed\r\n) as any;\r\n\r\nfunction observableInternal(...args) {\r\n  return (mobxObservable as any)(...args);\r\n}\r\n\r\nexport const observable: typeof mobxObservable = Object.assign(\r\n  observableInternal,\r\n  mobxObservable\r\n) as any;\r\n","import {\r\n  Component,\r\n  Input,\r\n  ViewEncapsulation,\r\n  OnInit,\r\n  OnDestroy\r\n} from '@angular/core';\r\nimport { reaction } from 'mobx';\r\nimport { observable, computed, action } from '../mobx-angular/mobx-proxy';\r\nimport { TreeVirtualScroll } from '../models/tree-virtual-scroll.model';\r\nimport { TreeNode } from '../models/tree-node.model';\r\nimport { TreeModel } from '../models/tree.model';\r\n\r\n@Component({\r\n  selector: 'tree-node-collection',\r\n  encapsulation: ViewEncapsulation.None,\r\n  template: `\r\n    <ng-container *treeMobxAutorun=\"{ dontDetach: true }\">\r\n      <div [style.margin-top]=\"marginTop\">\r\n        <tree-node\r\n          *ngFor=\"let node of viewportNodes; let i = index; trackBy: trackNode\"\r\n          [node]=\"node\"\r\n          [index]=\"i\"\r\n          [templates]=\"templates\"\r\n        >\r\n        </tree-node>\r\n      </div>\r\n    </ng-container>\r\n  `\r\n})\r\nexport class TreeNodeCollectionComponent implements OnInit, OnDestroy {\r\n  @Input()\r\n  get nodes() {\r\n    return this._nodes;\r\n  }\r\n  set nodes(nodes) {\r\n    this.setNodes(nodes);\r\n  }\r\n\r\n  @Input() treeModel: TreeModel;\r\n\r\n  @observable _nodes;\r\n  private virtualScroll: TreeVirtualScroll; // Cannot inject this, because we might be inside treeNodeTemplateFull\r\n  @Input() templates;\r\n\r\n  @observable viewportNodes: TreeNode[];\r\n\r\n  @computed get marginTop(): string {\r\n    const firstNode =\r\n      this.viewportNodes && this.viewportNodes.length && this.viewportNodes[0];\r\n    const relativePosition =\r\n      firstNode && firstNode.parent\r\n        ? firstNode.position -\r\n          firstNode.parent.position -\r\n          firstNode.parent.getSelfHeight()\r\n        : 0;\r\n\r\n    return `${relativePosition}px`;\r\n  }\r\n\r\n  _dispose = [];\r\n\r\n  @action setNodes(nodes) {\r\n    this._nodes = nodes;\r\n  }\r\n\r\n  ngOnInit() {\r\n    this.virtualScroll = this.treeModel.virtualScroll;\r\n    this._dispose = [\r\n      // return node indexes so we can compare structurally,\r\n      reaction(\r\n        () => {\r\n          return this.virtualScroll\r\n            .getViewportNodes(this.nodes)\r\n            .map(n => n.index);\r\n        },\r\n        nodeIndexes => {\r\n          this.viewportNodes = nodeIndexes.map(i => this.nodes[i]);\r\n        },\r\n        { compareStructural: true, fireImmediately: true } as any\r\n      ),\r\n      reaction(\r\n        () => this.nodes,\r\n        nodes => {\r\n          this.viewportNodes = this.virtualScroll.getViewportNodes(nodes);\r\n        }\r\n      )\r\n    ];\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    this._dispose.forEach(d => d());\r\n  }\r\n\r\n  trackNode(index, node) {\r\n    return node.id;\r\n  }\r\n}\r\n","import { Component , Input , ViewEncapsulation , TemplateRef } from '@angular/core';\r\nimport { TreeNode } from '../models/tree-node.model';\r\n\r\n@Component({\r\n  selector: 'tree-node-wrapper' ,\r\n  encapsulation: ViewEncapsulation.None ,\r\n  styles: [] ,\r\n  template: `\r\n      <div *ngIf=\"!templates.treeNodeWrapperTemplate\" class=\"node-wrapper\" [style.padding-left]=\"node.getNodePadding()\">\r\n          <tree-node-checkbox *ngIf=\"node.options.useCheckbox\" [node]=\"node\"></tree-node-checkbox>\r\n          <tree-node-expander [node]=\"node\"></tree-node-expander>\r\n          <div class=\"node-content-wrapper\"\r\n               [class.node-content-wrapper-active]=\"node.isActive\"\r\n               [class.node-content-wrapper-focused]=\"node.isFocused\"\r\n               (click)=\"node.mouseAction('click', $event)\"\r\n               (dblclick)=\"node.mouseAction('dblClick', $event)\"\r\n               (mouseover)=\"node.mouseAction('mouseOver', $event)\"\r\n               (mouseout)=\"node.mouseAction('mouseOut', $event)\"\r\n               (contextmenu)=\"node.mouseAction('contextMenu', $event)\"\r\n               (treeDrop)=\"node.onDrop($event)\"\r\n               (treeDropDragOver)=\"node.mouseAction('dragOver', $event)\"\r\n               (treeDropDragLeave)=\"node.mouseAction('dragLeave', $event)\"\r\n               (treeDropDragEnter)=\"node.mouseAction('dragEnter', $event)\"\r\n               [treeAllowDrop]=\"node.allowDrop\"\r\n               [allowDragoverStyling]=\"node.allowDragoverStyling()\"\r\n               [treeDrag]=\"node\"\r\n               [treeDragEnabled]=\"node.allowDrag()\">\r\n\r\n              <tree-node-content [node]=\"node\" [index]=\"index\" [template]=\"templates.treeNodeTemplate\">\r\n              </tree-node-content>\r\n          </div>\r\n      </div>\r\n      <ng-container\r\n              [ngTemplateOutlet]=\"templates.treeNodeWrapperTemplate\"\r\n              [ngTemplateOutletContext]=\"{ $implicit: node, node: node, index: index, templates: templates }\">\r\n      </ng-container>\r\n  `\r\n})\r\n\r\nexport class TreeNodeWrapperComponent {\r\n\r\n  @Input() node: TreeNode;\r\n  @Input() index: number;\r\n  @Input() templates: any;\r\n\r\n  constructor() {\r\n  }\r\n\r\n}\r\n","import {\r\n  Component,\r\n  ElementRef,\r\n  ViewEncapsulation,\r\n  AfterViewInit,\r\n  OnInit,\r\n  OnDestroy,\r\n  NgZone\r\n} from '@angular/core';\r\nimport { TreeVirtualScroll } from '../models/tree-virtual-scroll.model';\r\nimport { TREE_EVENTS } from '../constants/events';\r\nimport { throttle } from 'lodash-es';\r\n\r\n@Component({\r\n  selector: 'tree-viewport',\r\n  styles: [],\r\n  providers: [TreeVirtualScroll],\r\n  template: `\r\n    <ng-container *treeMobxAutorun=\"{ dontDetach: true }\">\r\n      <div [style.height]=\"getTotalHeight()\">\r\n        <ng-content></ng-content>\r\n      </div>\r\n    </ng-container>\r\n  `\r\n})\r\nexport class TreeViewportComponent implements AfterViewInit, OnInit, OnDestroy {\r\n  setViewport = throttle(() => {\r\n    this.virtualScroll.setViewport(this.elementRef.nativeElement);\r\n  }, 17);\r\n  private readonly scrollEventHandler: ($event: Event) => void;\r\n\r\n  constructor(\r\n    private elementRef: ElementRef,\r\n    private ngZone: NgZone,\r\n    public virtualScroll: TreeVirtualScroll\r\n  ) {\r\n    this.scrollEventHandler = this.setViewport.bind(this);\r\n  }\r\n\r\n  ngOnInit() {\r\n    this.virtualScroll.init();\r\n  }\r\n\r\n  ngAfterViewInit() {\r\n    setTimeout(() => {\r\n      this.setViewport();\r\n      this.virtualScroll.fireEvent({ eventName: TREE_EVENTS.initialized });\r\n    });\r\n    let el: HTMLElement = this.elementRef.nativeElement;\r\n    this.ngZone.runOutsideAngular(() => {\r\n      el.addEventListener('scroll', this.scrollEventHandler);\r\n    });\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    this.virtualScroll.clear();\r\n    let el: HTMLElement = this.elementRef.nativeElement;\r\n    el.removeEventListener('scroll', this.scrollEventHandler);\r\n  }\r\n\r\n  getTotalHeight() {\r\n    return (\r\n      (this.virtualScroll.isEnabled() &&\r\n        this.virtualScroll.totalHeight + 'px') ||\r\n      'auto'\r\n    );\r\n  }\r\n}\r\n","import { Component, Input, ViewEncapsulation } from '@angular/core';\r\nimport { TreeNode } from '../models/tree-node.model';\r\n\r\n@Component({\r\n  selector: 'tree-node-checkbox',\r\n  encapsulation: ViewEncapsulation.None,\r\n  styles: [],\r\n  template: `\r\n    <ng-container *treeMobxAutorun=\"{ dontDetach: true }\">\r\n      <input\r\n        class=\"tree-node-checkbox\"\r\n        type=\"checkbox\"\r\n        (click)=\"node.mouseAction('checkboxClick', $event)\"\r\n        [checked]=\"node.isSelected\"\r\n        [indeterminate]=\"node.isPartiallySelected\"\r\n      />\r\n    </ng-container>\r\n  `\r\n})\r\nexport class TreeNodeCheckboxComponent {\r\n  @Input() node: TreeNode;\r\n}\r\n","import {\r\n  AfterViewInit,\r\n  Directive,\r\n  ElementRef,\r\n  EventEmitter,\r\n  HostListener,\r\n  Input,\r\n  NgZone,\r\n  OnDestroy,\r\n  Output,\r\n  Renderer2\r\n} from '@angular/core';\r\nimport { TreeDraggedElement } from '../models/tree-dragged-element.model';\r\n\r\nconst DRAG_OVER_CLASS = 'is-dragging-over';\r\nconst DRAG_DISABLED_CLASS = 'is-dragging-over-disabled';\r\n\r\n@Directive({\r\n  selector: '[treeDrop]'\r\n})\r\nexport class TreeDropDirective implements AfterViewInit, OnDestroy {\r\n  @Input() allowDragoverStyling = true;\r\n  @Output('treeDrop') onDropCallback = new EventEmitter();\r\n  @Output('treeDropDragOver') onDragOverCallback = new EventEmitter();\r\n  @Output('treeDropDragLeave') onDragLeaveCallback = new EventEmitter();\r\n  @Output('treeDropDragEnter') onDragEnterCallback = new EventEmitter();\r\n  private readonly dragOverEventHandler: (ev: DragEvent) => void;\r\n  private readonly dragEnterEventHandler: (ev: DragEvent) => void;\r\n  private readonly dragLeaveEventHandler: (ev: DragEvent) => void;\r\n\r\n  private _allowDrop = (element, $event) => true;\r\n\r\n  @Input() set treeAllowDrop(allowDrop) {\r\n    if (allowDrop instanceof Function) {\r\n      this._allowDrop = allowDrop;\r\n    }\r\n    else this._allowDrop = (element, $event) => allowDrop;\r\n  }\r\n\r\n  allowDrop($event) {\r\n    return this._allowDrop(this.treeDraggedElement.get(), $event);\r\n  }\r\n\r\n  constructor(private el: ElementRef, private renderer: Renderer2, private treeDraggedElement: TreeDraggedElement, private ngZone: NgZone) {\r\n    this.dragOverEventHandler = this.onDragOver.bind(this);\r\n    this.dragEnterEventHandler = this.onDragEnter.bind(this);\r\n    this.dragLeaveEventHandler = this.onDragLeave.bind(this);\r\n  }\r\n\r\n  ngAfterViewInit() {\r\n    let el: HTMLElement = this.el.nativeElement;\r\n    this.ngZone.runOutsideAngular(() => {\r\n      el.addEventListener('dragover', this.dragOverEventHandler);\r\n      el.addEventListener('dragenter', this.dragEnterEventHandler);\r\n      el.addEventListener('dragleave', this.dragLeaveEventHandler);\r\n    });\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    let el: HTMLElement = this.el.nativeElement;\r\n    el.removeEventListener('dragover', this.dragOverEventHandler);\r\n    el.removeEventListener('dragenter', this.dragEnterEventHandler);\r\n    el.removeEventListener('dragleave', this.dragLeaveEventHandler);\r\n  }\r\n\r\n  onDragOver($event) {\r\n    if (!this.allowDrop($event)) {\r\n      if (this.allowDragoverStyling) {\r\n        return this.addDisabledClass();\r\n      }\r\n      return;\r\n    }\r\n\r\n    this.onDragOverCallback.emit({event: $event, element: this.treeDraggedElement.get()});\r\n\r\n    $event.preventDefault();\r\n    if (this.allowDragoverStyling) {\r\n      this.addClass();\r\n    }\r\n  }\r\n\r\n  onDragEnter($event) {\r\n    if (!this.allowDrop($event)) return;\r\n\r\n    $event.preventDefault();\r\n    this.onDragEnterCallback.emit({event: $event, element: this.treeDraggedElement.get()});\r\n  }\r\n\r\n  onDragLeave($event) {\r\n    if (!this.allowDrop($event)) {\r\n      if (this.allowDragoverStyling) {\r\n        return this.removeDisabledClass();\r\n      }\r\n      return;\r\n    }\r\n    this.onDragLeaveCallback.emit({event: $event, element: this.treeDraggedElement.get()});\r\n\r\n    if (this.allowDragoverStyling) {\r\n      this.removeClass();\r\n    }\r\n  }\r\n\r\n  @HostListener('drop', ['$event']) onDrop($event) {\r\n    if (!this.allowDrop($event)) return;\r\n\r\n    $event.preventDefault();\r\n    this.onDropCallback.emit({event: $event, element: this.treeDraggedElement.get()});\r\n\r\n    if (this.allowDragoverStyling) {\r\n      this.removeClass();\r\n    }\r\n    this.treeDraggedElement.set(null);\r\n  }\r\n\r\n  private addClass() {\r\n    this.renderer.addClass(this.el.nativeElement, DRAG_OVER_CLASS);\r\n  }\r\n\r\n  private removeClass() {\r\n    this.renderer.removeClass(this.el.nativeElement, DRAG_OVER_CLASS);\r\n  }\r\n\r\n  private addDisabledClass() {\r\n    this.renderer.addClass(this.el.nativeElement, DRAG_DISABLED_CLASS);\r\n  }\r\n\r\n  private removeDisabledClass() {\r\n    this.renderer.removeClass(this.el.nativeElement, DRAG_DISABLED_CLASS);\r\n  }\r\n}\r\n","import { AfterViewInit, Directive, DoCheck, ElementRef, HostListener, Input, NgZone, OnDestroy, Renderer2 } from '@angular/core';\r\nimport { TreeDraggedElement } from '../models/tree-dragged-element.model';\r\n\r\nconst DRAG_OVER_CLASS = 'is-dragging-over';\r\n\r\n@Directive({\r\n  selector: '[treeDrag]'\r\n})\r\nexport class TreeDragDirective implements AfterViewInit, DoCheck, OnDestroy {\r\n  @Input('treeDrag') draggedElement;\r\n  @Input() treeDragEnabled;\r\n  private readonly dragEventHandler: (ev: DragEvent) => void;\r\n\r\n  constructor(private el: ElementRef, private renderer: Renderer2, private treeDraggedElement: TreeDraggedElement, private ngZone: NgZone) {\r\n    this.dragEventHandler = this.onDrag.bind(this);\r\n  }\r\n\r\n  ngAfterViewInit() {\r\n    let el: HTMLElement = this.el.nativeElement;\r\n    this.ngZone.runOutsideAngular(() => {\r\n      el.addEventListener('drag', this.dragEventHandler);\r\n    });\r\n  }\r\n\r\n  ngDoCheck() {\r\n    this.renderer.setAttribute(this.el.nativeElement, 'draggable', this.treeDragEnabled ? 'true' : 'false');\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    let el: HTMLElement = this.el.nativeElement;\r\n    el.removeEventListener('drag', this.dragEventHandler);\r\n  }\r\n\r\n  @HostListener('dragstart', ['$event']) onDragStart(ev) {\r\n    // setting the data is required by firefox\r\n    ev.dataTransfer.setData('text', ev.target.id);\r\n    this.treeDraggedElement.set(this.draggedElement);\r\n    if (this.draggedElement.mouseAction) {\r\n      this.draggedElement.mouseAction('dragStart', ev);\r\n    }\r\n  }\r\n\r\n  onDrag(ev) {\r\n    if (this.draggedElement.mouseAction) {\r\n      this.draggedElement.mouseAction('drag', ev);\r\n    }\r\n  }\r\n\r\n  @HostListener('dragend') onDragEnd() {\r\n    if (this.draggedElement.mouseAction) {\r\n      this.draggedElement.mouseAction('dragEnd');\r\n    }\r\n    this.treeDraggedElement.set(null);\r\n  }\r\n}\r\n","import { Directive, Input, Renderer2, TemplateRef, ViewContainerRef } from '@angular/core';\r\n\r\nconst EASE_ACCELERATION = 1.005;\r\n\r\n@Directive({\r\n  selector: '[treeAnimateOpen]'\r\n})\r\nexport class TreeAnimateOpenDirective {\r\n  private _isOpen: boolean;\r\n\r\n  @Input('treeAnimateOpenSpeed') animateSpeed: number;\r\n  @Input('treeAnimateOpenAcceleration') animateAcceleration: number;\r\n  @Input('treeAnimateOpenEnabled') isEnabled: boolean;\r\n\r\n  @Input('treeAnimateOpen')\r\n  set isOpen(value: boolean) {\r\n    if (value) {\r\n      this._show();\r\n      if (this.isEnabled && this._isOpen === false) {\r\n        this._animateOpen();\r\n      }\r\n    } else {\r\n      this.isEnabled ? this._animateClose() : this._hide();\r\n    }\r\n    this._isOpen = !!value;\r\n  };\r\n\r\n  private innerElement: any;\r\n\r\n  constructor(\r\n    private renderer: Renderer2,\r\n    private templateRef: TemplateRef<any>,\r\n    private viewContainerRef: ViewContainerRef) {\r\n  }\r\n\r\n  private _show() {\r\n    if (this.innerElement) return;\r\n\r\n    // create child view\r\n    this.innerElement = this.viewContainerRef.createEmbeddedView(this.templateRef).rootNodes[0];\r\n  }\r\n\r\n  private _hide() {\r\n    this.viewContainerRef.clear();\r\n    this.innerElement = null;\r\n  }\r\n\r\n  private _animateOpen() {\r\n    let delta = this.animateSpeed;\r\n    let ease = this.animateAcceleration;\r\n    let maxHeight = 0;\r\n\r\n    // set height to 0\r\n    this.renderer.setStyle(this.innerElement, 'max-height', `0`);\r\n\r\n    // increase maxHeight until height doesn't change\r\n    setTimeout(() => { // Allow inner element to create its content\r\n      const i = setInterval(() => {\r\n        if (!this._isOpen || !this.innerElement) return clearInterval(i);\r\n\r\n        maxHeight += delta;\r\n        const roundedMaxHeight = Math.round(maxHeight);\r\n\r\n        this.renderer.setStyle(this.innerElement, 'max-height', `${roundedMaxHeight}px`);\r\n        const height = this.innerElement.getBoundingClientRect ? this.innerElement.getBoundingClientRect().height : 0; // TBD use renderer\r\n\r\n        delta *= ease;\r\n        ease *= EASE_ACCELERATION;\r\n        if (height < roundedMaxHeight) {\r\n          // Make maxHeight auto because animation finished and container might change height later on\r\n          this.renderer.setStyle(this.innerElement, 'max-height', null);\r\n          clearInterval(i);\r\n        }\r\n      }, 17);\r\n    });\r\n  }\r\n\r\n  private _animateClose() {\r\n    if (!this.innerElement) return;\r\n\r\n    let delta = this.animateSpeed;\r\n    let ease = this.animateAcceleration;\r\n    let height = this.innerElement.getBoundingClientRect().height; // TBD use renderer\r\n\r\n    // slowly decrease maxHeight to 0, starting from current height\r\n    const i = setInterval(() => {\r\n      if (this._isOpen || !this.innerElement) return clearInterval(i);\r\n\r\n      height -= delta;\r\n      this.renderer.setStyle(this.innerElement, 'max-height', `${height}px`);\r\n      delta *= ease;\r\n      ease *= EASE_ACCELERATION;\r\n\r\n      if (height <= 0) {\r\n        // after animation complete - remove child element\r\n        this.viewContainerRef.clear();\r\n        this.innerElement = null;\r\n        clearInterval(i);\r\n      }\r\n    }, 17);\r\n  }\r\n}\r\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { TreeMobxAutorunDirective } from './mobx-angular/tree-mobx-autorun.directive';\r\n\r\nimport {\r\n  IActionHandler,\r\n  IActionMapping,\r\n  TREE_ACTIONS\r\n} from './models/tree-options.model';\r\nimport {\r\n  IAllowDragFn,\r\n  IAllowDropFn,\r\n  ITreeOptions,\r\n  ITreeState\r\n} from './defs/api';\r\nimport { KEYS } from './constants/keys';\r\nimport { TreeModel } from './models/tree.model';\r\nimport { TreeNode } from './models/tree-node.model';\r\nimport { TreeDraggedElement } from './models/tree-dragged-element.model';\r\nimport { TreeVirtualScroll } from './models/tree-virtual-scroll.model';\r\nimport { LoadingComponent } from './components/loading.component';\r\nimport { TreeComponent } from './components/tree.component';\r\nimport { TreeNodeComponent } from './components/tree-node.component';\r\nimport { TreeNodeContent } from './components/tree-node-content.component';\r\nimport { TreeNodeDropSlot } from './components/tree-node-drop-slot.component';\r\nimport { TreeNodeExpanderComponent } from './components/tree-node-expander.component';\r\nimport { TreeNodeChildrenComponent } from './components/tree-node-children.component';\r\nimport { TreeNodeCollectionComponent } from './components/tree-node-collection.component';\r\nimport { TreeNodeWrapperComponent } from './components/tree-node-wrapper.component';\r\nimport { TreeViewportComponent } from './components/tree-viewport.component';\r\nimport { TreeNodeCheckboxComponent } from './components/tree-node-checkbox.component';\r\nimport { TreeDropDirective } from './directives/tree-drop.directive';\r\nimport { TreeDragDirective } from './directives/tree-drag.directive';\r\nimport { TreeAnimateOpenDirective } from './directives/tree-animate-open.directive';\r\n\r\n@NgModule({\r\n  declarations: [\r\n    TreeComponent,\r\n    TreeNodeComponent,\r\n    TreeNodeContent,\r\n    LoadingComponent,\r\n    TreeDropDirective,\r\n    TreeDragDirective,\r\n    TreeNodeExpanderComponent,\r\n    TreeNodeChildrenComponent,\r\n    TreeNodeDropSlot,\r\n    TreeNodeCollectionComponent,\r\n    TreeViewportComponent,\r\n    TreeNodeWrapperComponent,\r\n    TreeNodeCheckboxComponent,\r\n    TreeAnimateOpenDirective,\r\n    TreeMobxAutorunDirective\r\n  ],\r\n  exports: [\r\n    TreeComponent,\r\n    TreeNodeComponent,\r\n    TreeNodeContent,\r\n    LoadingComponent,\r\n    TreeDropDirective,\r\n    TreeDragDirective,\r\n    TreeNodeExpanderComponent,\r\n    TreeNodeChildrenComponent,\r\n    TreeNodeDropSlot,\r\n    TreeNodeCollectionComponent,\r\n    TreeViewportComponent,\r\n    TreeNodeWrapperComponent,\r\n    TreeNodeCheckboxComponent,\r\n    TreeAnimateOpenDirective,\r\n    TreeMobxAutorunDirective\r\n  ],\r\n  imports: [CommonModule],\r\n  providers: []\r\n})\r\nexport class TreeModule {}\r\n\r\nexport {\r\n  TreeModel,\r\n  TreeNode,\r\n  TreeDraggedElement,\r\n  TreeVirtualScroll,\r\n  ITreeOptions,\r\n  TREE_ACTIONS,\r\n  KEYS,\r\n  IActionMapping,\r\n  IActionHandler,\r\n  IAllowDropFn,\r\n  IAllowDragFn,\r\n  LoadingComponent,\r\n  TreeAnimateOpenDirective,\r\n  TreeComponent,\r\n  TreeNodeComponent,\r\n  TreeNodeWrapperComponent,\r\n  TreeNodeContent,\r\n  TreeDropDirective,\r\n  TreeDragDirective,\r\n  TreeNodeExpanderComponent,\r\n  TreeNodeChildrenComponent,\r\n  TreeNodeDropSlot,\r\n  TreeNodeCollectionComponent,\r\n  TreeViewportComponent,\r\n  TreeNodeCheckboxComponent,\r\n  ITreeState\r\n};\r\n"]}