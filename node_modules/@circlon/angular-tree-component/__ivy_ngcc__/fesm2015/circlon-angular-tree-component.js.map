{"version":3,"file":"circlon-angular-tree-component.js","sources":["../../../projects/angular-tree-component/src/lib/mobx-angular/tree-mobx-autorun.directive.ts","../../../projects/angular-tree-component/src/lib/constants/keys.ts","../../../projects/angular-tree-component/src/lib/models/tree-options.model.ts","../../../projects/angular-tree-component/src/lib/constants/events.ts","../../../projects/angular-tree-component/src/lib/models/tree-node.model.ts","../../../projects/angular-tree-component/src/lib/models/tree.model.ts","../../../projects/angular-tree-component/src/lib/models/tree-dragged-element.model.ts","../../../projects/angular-tree-component/src/lib/models/tree-virtual-scroll.model.ts","../../../projects/angular-tree-component/src/lib/components/loading.component.ts","../../../projects/angular-tree-component/src/lib/components/tree-viewport.component.ts","../../../projects/angular-tree-component/src/lib/components/tree.component.ts","../../../projects/angular-tree-component/src/lib/components/tree-node.component.ts","../../../projects/angular-tree-component/src/lib/components/tree-node-content.component.ts","../../../projects/angular-tree-component/src/lib/components/tree-node-drop-slot.component.ts","../../../projects/angular-tree-component/src/lib/components/tree-node-expander.component.ts","../../../projects/angular-tree-component/src/lib/components/tree-node-children.component.ts","../../../projects/angular-tree-component/src/lib/mobx-angular/mobx-proxy.ts","../../../projects/angular-tree-component/src/lib/components/tree-node-collection.component.ts","../../../projects/angular-tree-component/src/lib/components/tree-node-wrapper.component.ts","../../../projects/angular-tree-component/src/lib/components/tree-node-checkbox.component.ts","../../../projects/angular-tree-component/src/lib/directives/tree-drop.directive.ts","../../../projects/angular-tree-component/src/lib/directives/tree-drag.directive.ts","../../../projects/angular-tree-component/src/lib/directives/tree-animate-open.directive.ts","../../../projects/angular-tree-component/src/lib/angular-tree-component.module.ts"],"names":["computed","observable","action","__decorate","mobxAction","mobxComputed","mobxObservable","DRAG_OVER_CLASS"],"mappings":"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","sourcesContent":["import {\r\n  Directive,\r\n  ViewContainerRef,\r\n  TemplateRef,\r\n  OnInit,\r\n  OnDestroy,\r\n  Input,\r\n  EmbeddedViewRef\r\n} from '@angular/core';\r\nimport { autorun } from 'mobx';\r\n\r\n@Directive({ selector: '[treeMobxAutorun]' })\r\nexport class TreeMobxAutorunDirective implements OnInit, OnDestroy {\r\n  protected templateBindings = {};\r\n  protected dispose: any;\r\n  protected view: EmbeddedViewRef<any>;\r\n  @Input() treeMobxAutorun;\r\n\r\n  constructor(\r\n    protected templateRef: TemplateRef<any>,\r\n    protected viewContainer: ViewContainerRef\r\n  ) {}\r\n\r\n  ngOnInit() {\r\n    this.view = this.viewContainer.createEmbeddedView(this.templateRef);\r\n\r\n    if (this.dispose) {\r\n      this.dispose();\r\n    }\r\n\r\n    if (this.shouldDetach()) {\r\n      this.view.detach();\r\n    }\r\n    this.autoDetect(this.view);\r\n  }\r\n\r\n  shouldDetach() {\r\n    return this.treeMobxAutorun && this.treeMobxAutorun.detach;\r\n  }\r\n\r\n  autoDetect(view: EmbeddedViewRef<any>) {\r\n    this.dispose = autorun(() => view.detectChanges());\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    if (this.dispose) {\r\n      this.dispose();\r\n    }\r\n  }\r\n}\r\n","export const KEYS = {\r\n  LEFT: 37,\r\n  UP: 38,\r\n  RIGHT: 39,\r\n  DOWN: 40,\r\n  ENTER: 13,\r\n  SPACE: 32,\r\n  CONTEXT_MENU: 32\r\n};\r\n","import { TreeNode } from './tree-node.model';\r\nimport { TreeModel } from './tree.model';\r\nimport { KEYS } from '../constants/keys';\r\nimport { ITreeOptions } from '../defs/api';\r\n\r\nimport { defaultsDeep, get, omit, isNumber } from 'lodash-es';\r\n\r\nexport interface IActionHandler {\r\n  (tree: TreeModel, node: TreeNode, $event: any, ...rest);\r\n}\r\n\r\nexport const TREE_ACTIONS = {\r\n  TOGGLE_ACTIVE: (tree: TreeModel, node: TreeNode, $event: any) => node && node.toggleActivated(),\r\n  TOGGLE_ACTIVE_MULTI: (tree: TreeModel, node: TreeNode, $event: any) => node && node.toggleActivated(true),\r\n  TOGGLE_SELECTED: (tree: TreeModel, node: TreeNode, $event: any) => node && node.toggleSelected(),\r\n  ACTIVATE: (tree: TreeModel, node: TreeNode, $event: any) => node.setIsActive(true),\r\n  DEACTIVATE: (tree: TreeModel, node: TreeNode, $event: any) => node.setIsActive(false),\r\n  SELECT: (tree: TreeModel, node: TreeNode, $event: any) => node.setIsSelected(true),\r\n  DESELECT: (tree: TreeModel, node: TreeNode, $event: any) => node.setIsSelected(false),\r\n  FOCUS: (tree: TreeModel, node: TreeNode, $event: any) => node.focus(),\r\n  TOGGLE_EXPANDED: (tree: TreeModel, node: TreeNode, $event: any) => node.hasChildren && node.toggleExpanded(),\r\n  EXPAND: (tree: TreeModel, node: TreeNode, $event: any) => node.expand(),\r\n  COLLAPSE: (tree: TreeModel, node: TreeNode, $event: any) => node.collapse(),\r\n  DRILL_DOWN: (tree: TreeModel, node: TreeNode, $event: any) => tree.focusDrillDown(),\r\n  DRILL_UP: (tree: TreeModel, node: TreeNode, $event: any) => tree.focusDrillUp(),\r\n  NEXT_NODE: (tree: TreeModel, node: TreeNode, $event: any) =>  tree.focusNextNode(),\r\n  PREVIOUS_NODE: (tree: TreeModel, node: TreeNode, $event: any) =>  tree.focusPreviousNode(),\r\n  MOVE_NODE: (tree: TreeModel, node: TreeNode, $event: any, {from , to}: {from: any, to: any}) => {\r\n    // default action assumes from = node, to = {parent, index}\r\n    if ($event.ctrlKey) {\r\n      tree.copyNode(from, to);\r\n    } else {\r\n      tree.moveNode(from, to);\r\n    }\r\n  }\r\n};\r\n\r\nconst defaultActionMapping: IActionMapping = {\r\n  mouse: {\r\n    click: TREE_ACTIONS.TOGGLE_ACTIVE,\r\n    dblClick: null,\r\n    contextMenu: null,\r\n    expanderClick: TREE_ACTIONS.TOGGLE_EXPANDED,\r\n    checkboxClick: TREE_ACTIONS.TOGGLE_SELECTED,\r\n    drop: TREE_ACTIONS.MOVE_NODE\r\n  },\r\n  keys: {\r\n    [KEYS.RIGHT]: TREE_ACTIONS.DRILL_DOWN,\r\n    [KEYS.LEFT]: TREE_ACTIONS.DRILL_UP,\r\n    [KEYS.DOWN]: TREE_ACTIONS.NEXT_NODE,\r\n    [KEYS.UP]: TREE_ACTIONS.PREVIOUS_NODE,\r\n    [KEYS.SPACE]: TREE_ACTIONS.TOGGLE_ACTIVE,\r\n    [KEYS.ENTER]: TREE_ACTIONS.TOGGLE_ACTIVE\r\n  }\r\n};\r\n\r\nexport interface IActionMapping {\r\n  mouse?: {\r\n    click?: IActionHandler,\r\n    dblClick?: IActionHandler,\r\n    contextMenu?: IActionHandler,\r\n    expanderClick?: IActionHandler,\r\n    checkboxClick?: IActionHandler,\r\n    dragStart?: IActionHandler,\r\n    drag?: IActionHandler,\r\n    dragEnd?: IActionHandler,\r\n    dragOver?: IActionHandler,\r\n    dragLeave?: IActionHandler,\r\n    dragEnter?: IActionHandler,\r\n    drop?: IActionHandler,\r\n    mouseOver?: IActionHandler,\r\n    mouseOut?: IActionHandler\r\n  };\r\n  keys?: {\r\n    [key: number]: IActionHandler\r\n  };\r\n}\r\n\r\nexport class TreeOptions {\r\n  get hasChildrenField(): string { return this.options.hasChildrenField || 'hasChildren'; }\r\n  get childrenField(): string { return this.options.childrenField || 'children'; }\r\n  get displayField(): string { return this.options.displayField || 'name'; }\r\n  get idField(): string { return this.options.idField || 'id'; }\r\n  get isExpandedField(): string { return this.options.isExpandedField || 'isExpanded'; }\r\n  get getChildren(): any { return this.options.getChildren; }\r\n  get levelPadding(): number { return this.options.levelPadding || 0; }\r\n  get useVirtualScroll(): boolean { return this.options.useVirtualScroll; }\r\n  get animateExpand(): boolean { return this.options.animateExpand; }\r\n  get animateSpeed(): number { return this.options.animateSpeed || 1; }\r\n  get animateAcceleration(): number { return this.options.animateAcceleration || 1.2; }\r\n  get scrollOnActivate(): boolean { return this.options.scrollOnActivate === undefined ? true : this.options.scrollOnActivate; }\r\n  get rtl(): boolean { return !!this.options.rtl; }\r\n  get rootId(): any {return this.options.rootId; }\r\n  get useCheckbox(): boolean { return this.options.useCheckbox; }\r\n  get useTriState(): boolean { return this.options.useTriState === undefined ? true : this.options.useTriState; }\r\n  get scrollContainer(): HTMLElement { return this.options.scrollContainer; }\r\n  get allowDragoverStyling(): boolean { return this.options.allowDragoverStyling === undefined ? true : this.options.allowDragoverStyling; }\r\n  actionMapping: IActionMapping;\r\n\r\n  constructor(private options: ITreeOptions = {}) {\r\n    this.actionMapping = defaultsDeep({}, this.options.actionMapping, defaultActionMapping);\r\n    if (options.rtl) {\r\n      this.actionMapping.keys[KEYS.RIGHT] = <IActionHandler>get(options, ['actionMapping', 'keys', KEYS.RIGHT]) || TREE_ACTIONS.DRILL_UP;\r\n      this.actionMapping.keys[KEYS.LEFT] = <IActionHandler>get(options, ['actionMapping', 'keys', KEYS.LEFT]) || TREE_ACTIONS.DRILL_DOWN;\r\n    }\r\n  }\r\n\r\n  getNodeClone(node: TreeNode): any {\r\n    if (this.options.getNodeClone) {\r\n      return this.options.getNodeClone(node);\r\n    }\r\n\r\n    return omit(Object.assign({}, node.data), ['id']);\r\n  }\r\n\r\n  allowDrop(element, to, $event?): boolean {\r\n    if (this.options.allowDrop instanceof Function) {\r\n      return this.options.allowDrop(element, to, $event);\r\n    }\r\n    else {\r\n      return this.options.allowDrop === undefined ? true : this.options.allowDrop;\r\n    }\r\n  }\r\n\r\n  allowDrag(node: TreeNode): boolean {\r\n    if (this.options.allowDrag instanceof Function) {\r\n      return this.options.allowDrag(node);\r\n    } else {\r\n      return this.options.allowDrag;\r\n    }\r\n  }\r\n\r\n  nodeClass(node: TreeNode): string {\r\n    return this.options.nodeClass ? this.options.nodeClass(node) : '';\r\n  }\r\n\r\n  nodeHeight(node: TreeNode): number {\r\n    if (node.data.virtual) {\r\n      return 0;\r\n    }\r\n\r\n    let nodeHeight = this.options.nodeHeight || 22;\r\n\r\n    if (typeof nodeHeight === 'function') {\r\n      nodeHeight = nodeHeight(node);\r\n    }\r\n\r\n    // account for drop slots:\r\n    return nodeHeight + (node.index === 0 ?  2 : 1) * this.dropSlotHeight;\r\n  }\r\n\r\n  get dropSlotHeight(): number {\r\n    return isNumber(this.options.dropSlotHeight) ? this.options.dropSlotHeight : 2;\r\n  }\r\n}\r\n","export const TREE_EVENTS = {\r\n  toggleExpanded: 'toggleExpanded',\r\n  activate: 'activate',\r\n  deactivate: 'deactivate',\r\n  nodeActivate: 'nodeActivate',\r\n  nodeDeactivate: 'nodeDeactivate',\r\n  select: 'select',\r\n  deselect: 'deselect',\r\n  focus: 'focus',\r\n  blur: 'blur',\r\n  initialized: 'initialized',\r\n  updateData: 'updateData',\r\n  moveNode: 'moveNode',\r\n  copyNode: 'copyNode',\r\n  event: 'event',\r\n  loadNodeChildren: 'loadNodeChildren',\r\n  changeFilter: 'changeFilter',\r\n  stateChange: 'stateChange'\r\n};\r\n","import { observable, computed, reaction, autorun, action, IReactionDisposer } from 'mobx';\r\nimport { TreeModel } from './tree.model';\r\nimport { TreeOptions } from './tree-options.model';\r\nimport { ITreeNode } from '../defs/api';\r\nimport { TREE_EVENTS } from '../constants/events';\r\n\r\nimport { first, last, some, every } from 'lodash-es';\r\n\r\nexport class TreeNode implements ITreeNode {\r\n  private handler: IReactionDisposer;\r\n  @computed get isHidden() { return this.treeModel.isHidden(this); };\r\n  @computed get isExpanded() { return this.treeModel.isExpanded(this); };\r\n  @computed get isActive() { return this.treeModel.isActive(this); };\r\n  @computed get isFocused() { return this.treeModel.isNodeFocused(this); };\r\n  @computed get isSelected() {\r\n    if (this.isSelectable()) {\r\n        return this.treeModel.isSelected(this);\r\n    } else {\r\n      return some(this.children, (node: TreeNode) => node.isSelected);\r\n    }\r\n  };\r\n  @computed get isAllSelected() {\r\n    if (this.isSelectable()) {\r\n      return this.treeModel.isSelected(this);\r\n    } else {\r\n      return every(this.children, (node: TreeNode) => node.isAllSelected);\r\n    }\r\n  };\r\n  @computed get isPartiallySelected() {\r\n    return this.isSelected && !this.isAllSelected;\r\n  }\r\n\r\n  @observable children: TreeNode[];\r\n  @observable index: number;\r\n  @observable position = 0;\r\n  @observable height: number;\r\n  @computed get level(): number {\r\n    return this.parent ? this.parent.level + 1 : 0;\r\n  }\r\n  @computed get path(): string[] {\r\n    return this.parent ? [...this.parent.path, this.id] : [];\r\n  }\r\n\r\n  get elementRef(): any {\r\n    throw `Element Ref is no longer supported since introducing virtual scroll\\n\r\n      You may use a template to obtain a reference to the element`;\r\n  }\r\n\r\n  private _originalNode: any;\r\n  get originalNode() { return this._originalNode; };\r\n\r\n  constructor(public data: any, public parent: TreeNode, public treeModel: TreeModel, index: number) {\r\n    if (this.id === undefined || this.id === null) {\r\n      this.id = uuid();\r\n    } // Make sure there's a unique id without overriding existing ids to work with immutable data structures\r\n    this.index = index;\r\n\r\n    if (this.getField('children')) {\r\n      this._initChildren();\r\n    }\r\n    this.autoLoadChildren();\r\n  }\r\n\r\n  // helper get functions:\r\n  get hasChildren(): boolean {\r\n    return !!(this.getField('hasChildren') || (this.children && this.children.length > 0));\r\n  }\r\n  get isCollapsed(): boolean { return !this.isExpanded; }\r\n  get isLeaf(): boolean { return !this.hasChildren; }\r\n  get isRoot(): boolean { return this.parent.data.virtual; }\r\n  get realParent(): TreeNode { return this.isRoot ? null : this.parent; }\r\n\r\n  // proxy functions:\r\n  get options(): TreeOptions { return this.treeModel.options; }\r\n  fireEvent(event) { this.treeModel.fireEvent(event); }\r\n\r\n  // field accessors:\r\n  get displayField() {\r\n    return this.getField('display');\r\n  }\r\n\r\n  get id() {\r\n    return this.getField('id');\r\n  }\r\n\r\n  set id(value) {\r\n    this.setField('id', value);\r\n  }\r\n\r\n  getField(key) {\r\n    return this.data[this.options[`${key}Field`]];\r\n  }\r\n\r\n  setField(key, value) {\r\n    this.data[this.options[`${key}Field`]] = value;\r\n  }\r\n\r\n  // traversing:\r\n  _findAdjacentSibling(steps, skipHidden = false) {\r\n    const siblings = this._getParentsChildren(skipHidden);\r\n    const index = siblings.indexOf(this);\r\n\r\n    return siblings.length > index + steps ? siblings[index + steps] : null;\r\n  }\r\n\r\n  findNextSibling(skipHidden = false) {\r\n    return this._findAdjacentSibling(+1, skipHidden);\r\n  }\r\n\r\n  findPreviousSibling(skipHidden = false) {\r\n    return this._findAdjacentSibling(-1, skipHidden);\r\n  }\r\n\r\n  getVisibleChildren() {\r\n    return this.visibleChildren;\r\n  }\r\n\r\n  @computed get visibleChildren() {\r\n    return (this.children || []).filter((node) => !node.isHidden);\r\n  }\r\n\r\n  getFirstChild(skipHidden = false) {\r\n    let children = skipHidden ? this.visibleChildren : this.children;\r\n\r\n    return first(children || []);\r\n  }\r\n\r\n  getLastChild(skipHidden = false) {\r\n    let children = skipHidden ? this.visibleChildren : this.children;\r\n\r\n    return last(children || []);\r\n  }\r\n\r\n  findNextNode(goInside = true, skipHidden = false) {\r\n    return goInside && this.isExpanded && this.getFirstChild(skipHidden) ||\r\n           this.findNextSibling(skipHidden) ||\r\n           this.parent && this.parent.findNextNode(false, skipHidden);\r\n  }\r\n\r\n  findPreviousNode(skipHidden = false) {\r\n    let previousSibling = this.findPreviousSibling(skipHidden);\r\n    if (!previousSibling) {\r\n      return this.realParent;\r\n    }\r\n    return previousSibling._getLastOpenDescendant(skipHidden);\r\n  }\r\n\r\n  _getLastOpenDescendant(skipHidden = false) {\r\n    const lastChild = this.getLastChild(skipHidden);\r\n    return (this.isCollapsed || !lastChild)\r\n      ? this\r\n      : lastChild._getLastOpenDescendant(skipHidden);\r\n  }\r\n\r\n  private _getParentsChildren(skipHidden = false): any[] {\r\n    const children = this.parent &&\r\n      (skipHidden ? this.parent.getVisibleChildren() : this.parent.children);\r\n\r\n    return children || [];\r\n  }\r\n\r\n  private getIndexInParent(skipHidden = false) {\r\n    return this._getParentsChildren(skipHidden).indexOf(this);\r\n  }\r\n\r\n  isDescendantOf(node: TreeNode) {\r\n    if (this === node) return true;\r\n    else return this.parent && this.parent.isDescendantOf(node);\r\n  }\r\n\r\n  getNodePadding(): string {\r\n    return this.options.levelPadding * (this.level - 1) + 'px';\r\n  }\r\n\r\n  getClass(): string {\r\n    return [this.options.nodeClass(this), `tree-node-level-${ this.level }`].join(' ');\r\n  }\r\n\r\n  onDrop($event) {\r\n    this.mouseAction('drop', $event.event, {\r\n      from: $event.element,\r\n      to: { parent: this, index: 0, dropOnNode: true }\r\n    });\r\n  }\r\n\r\n  allowDrop = (element, $event?) => {\r\n    return this.options.allowDrop(element, { parent: this, index: 0 }, $event);\r\n  }\r\n\r\n  allowDragoverStyling = () => {\r\n    return this.options.allowDragoverStyling;\r\n  }\r\n\r\n  allowDrag() {\r\n    return this.options.allowDrag(this);\r\n  }\r\n\r\n\r\n  // helper methods:\r\n  loadNodeChildren() {\r\n    if (!this.options.getChildren) {\r\n      return Promise.resolve(); // Not getChildren method - for using redux\r\n    }\r\n    return Promise.resolve(this.options.getChildren(this))\r\n      .then((children) => {\r\n        if (children) {\r\n          this.setField('children', children);\r\n          this._initChildren();\r\n          if (this.options.useTriState && this.treeModel.isSelected(this)) {\r\n            this.setIsSelected(true);\r\n          }\r\n          this.children.forEach((child) => {\r\n            if (child.getField('isExpanded') && child.hasChildren) {\r\n              child.expand();\r\n            }\r\n          });\r\n      }}).then(() => {\r\n        this.fireEvent({\r\n          eventName: TREE_EVENTS.loadNodeChildren,\r\n          node: this\r\n        });\r\n      });\r\n  }\r\n\r\n  expand() {\r\n    if (!this.isExpanded) {\r\n      this.toggleExpanded();\r\n    }\r\n\r\n    return this;\r\n  }\r\n\r\n  collapse() {\r\n    if (this.isExpanded) {\r\n      this.toggleExpanded();\r\n    }\r\n\r\n    return this;\r\n  }\r\n\r\n  doForAll(fn: (node: ITreeNode) => any) {\r\n    Promise.resolve(fn(this)).then(() => {\r\n      if (this.children) {\r\n        this.children.forEach((child) => child.doForAll(fn));\r\n      }\r\n    });\r\n  }\r\n\r\n  expandAll() {\r\n    this.doForAll((node) => node.expand());\r\n  }\r\n\r\n  collapseAll() {\r\n    this.doForAll((node) => node.collapse());\r\n  }\r\n\r\n  ensureVisible() {\r\n    if (this.realParent) {\r\n      this.realParent.expand();\r\n      this.realParent.ensureVisible();\r\n    }\r\n\r\n    return this;\r\n  }\r\n\r\n  toggleExpanded() {\r\n    this.setIsExpanded(!this.isExpanded);\r\n\r\n    return this;\r\n  }\r\n\r\n  setIsExpanded(value) {\r\n    if (this.hasChildren) {\r\n      this.treeModel.setExpandedNode(this, value);\r\n    }\r\n\r\n    return this;\r\n  };\r\n\r\n  autoLoadChildren() {\r\n    this.handler =\r\n      reaction(\r\n        () => this.isExpanded,\r\n        (isExpanded) => {\r\n          if (!this.children && this.hasChildren && isExpanded) {\r\n            this.loadNodeChildren();\r\n          }\r\n        },\r\n        { fireImmediately: true }\r\n      );\r\n  }\r\n\r\n  dispose() {\r\n    if (this.children) {\r\n      this.children.forEach((child) => child.dispose());\r\n    }\r\n    if (this.handler) {\r\n      this.handler();\r\n    }\r\n    this.parent = null;\r\n    this.children = null;\r\n  }\r\n\r\n  setIsActive(value, multi = false) {\r\n    this.treeModel.setActiveNode(this, value, multi);\r\n    if (value) {\r\n      this.focus(this.options.scrollOnActivate);\r\n    }\r\n\r\n    return this;\r\n  }\r\n\r\n  isSelectable() {\r\n    return this.isLeaf || !this.children || !this.options.useTriState;\r\n  }\r\n\r\n  @action setIsSelected(value) {\r\n    if (this.isSelectable()) {\r\n      this.treeModel.setSelectedNode(this, value);\r\n    } else {\r\n      this.visibleChildren.forEach((child) => child.setIsSelected(value));\r\n    }\r\n\r\n    return this;\r\n  }\r\n\r\n  toggleSelected() {\r\n    this.setIsSelected(!this.isSelected);\r\n\r\n    return this;\r\n  }\r\n\r\n  toggleActivated(multi = false) {\r\n    this.setIsActive(!this.isActive, multi);\r\n\r\n    return this;\r\n  }\r\n\r\n  setActiveAndVisible(multi = false) {\r\n    this.setIsActive(true, multi)\r\n      .ensureVisible();\r\n\r\n    setTimeout(this.scrollIntoView.bind(this));\r\n\r\n    return this;\r\n  }\r\n\r\n  scrollIntoView(force = false) {\r\n    this.treeModel.virtualScroll.scrollIntoView(this, force);\r\n  }\r\n\r\n  focus(scroll = true) {\r\n    let previousNode = this.treeModel.getFocusedNode();\r\n    this.treeModel.setFocusedNode(this);\r\n    if (scroll) {\r\n      this.scrollIntoView();\r\n    }\r\n    if (previousNode) {\r\n      this.fireEvent({ eventName: TREE_EVENTS.blur, node: previousNode });\r\n    }\r\n    this.fireEvent({ eventName: TREE_EVENTS.focus, node: this });\r\n\r\n    return this;\r\n  }\r\n\r\n  blur() {\r\n    let previousNode = this.treeModel.getFocusedNode();\r\n    this.treeModel.setFocusedNode(null);\r\n    if (previousNode) {\r\n      this.fireEvent({ eventName: TREE_EVENTS.blur, node: this });\r\n    }\r\n\r\n    return this;\r\n  }\r\n\r\n  setIsHidden(value) {\r\n    this.treeModel.setIsHidden(this, value);\r\n  }\r\n\r\n  hide() {\r\n    this.setIsHidden(true);\r\n  }\r\n\r\n  show() {\r\n    this.setIsHidden(false);\r\n  }\r\n\r\n  mouseAction(actionName: string, $event, data: any = null) {\r\n    this.treeModel.setFocus(true);\r\n\r\n    const actionMapping = this.options.actionMapping.mouse;\r\n    const mouseAction = actionMapping[actionName];\r\n\r\n    if (mouseAction) {\r\n      mouseAction(this.treeModel, this, $event, data);\r\n    }\r\n  }\r\n\r\n  getSelfHeight() {\r\n    return this.options.nodeHeight(this);\r\n  }\r\n\r\n  @action _initChildren() {\r\n    this.children = this.getField('children')\r\n      .map((c, index) => new TreeNode(c, this, this.treeModel, index));\r\n  }\r\n}\r\n\r\nfunction uuid() {\r\n  return Math.floor(Math.random() * 10000000000000);\r\n}\r\n","import { Injectable, EventEmitter, OnDestroy } from '@angular/core';\r\nimport { observable, computed, action, autorun } from 'mobx';\r\nimport { Subscription } from 'rxjs';\r\nimport { TreeNode } from './tree-node.model';\r\nimport { TreeOptions } from './tree-options.model';\r\nimport { TreeVirtualScroll } from './tree-virtual-scroll.model';\r\nimport { ITreeModel, IDType, IDTypeDictionary } from '../defs/api';\r\nimport { TREE_EVENTS } from '../constants/events';\r\n\r\nimport { first, last, compact, find, isString, isFunction } from 'lodash-es';\r\n\r\n@Injectable()\r\nexport class TreeModel implements ITreeModel, OnDestroy {\r\n  static focusedTree = null;\r\n\r\n  options: TreeOptions = new TreeOptions();\r\n  nodes: any[];\r\n  eventNames = Object.keys(TREE_EVENTS);\r\n  virtualScroll: TreeVirtualScroll;\r\n\r\n  @observable roots: TreeNode[];\r\n  @observable expandedNodeIds: IDTypeDictionary = {};\r\n  @observable selectedLeafNodeIds: IDTypeDictionary = {};\r\n  @observable activeNodeIds: IDTypeDictionary = {};\r\n  @observable hiddenNodeIds: IDTypeDictionary = {};\r\n  @observable focusedNodeId: IDType = null;\r\n  @observable virtualRoot: TreeNode;\r\n\r\n  private firstUpdate = true;\r\n  private events: any;\r\n  private subscriptions: Subscription[] = [];\r\n\r\n  // events\r\n  fireEvent(event) {\r\n    event.treeModel = this;\r\n    this.events[event.eventName].emit(event);\r\n    this.events.event.emit(event);\r\n  }\r\n\r\n  subscribe(eventName, fn) {\r\n    const subscription = this.events[eventName].subscribe(fn);\r\n    this.subscriptions.push(subscription);\r\n  }\r\n\r\n\r\n  // getters\r\n  getFocusedNode(): TreeNode {\r\n    return this.focusedNode;\r\n  }\r\n\r\n\r\n  getActiveNode(): TreeNode {\r\n    return this.activeNodes[0];\r\n  }\r\n\r\n  getActiveNodes(): TreeNode[] {\r\n    return this.activeNodes;\r\n  }\r\n\r\n  getVisibleRoots() {\r\n    return this.virtualRoot.visibleChildren;\r\n  }\r\n\r\n  getFirstRoot(skipHidden = false) {\r\n    return first(skipHidden ? this.getVisibleRoots() : this.roots);\r\n  }\r\n\r\n  getLastRoot(skipHidden = false) {\r\n    return last(skipHidden ? this.getVisibleRoots() : this.roots);\r\n  }\r\n\r\n  get isFocused() {\r\n    return TreeModel.focusedTree === this;\r\n  }\r\n\r\n  isNodeFocused(node) {\r\n    return this.focusedNode === node;\r\n  }\r\n\r\n  isEmptyTree(): boolean {\r\n    return this.roots && this.roots.length === 0;\r\n  }\r\n\r\n  @computed get focusedNode() {\r\n    return this.focusedNodeId ? this.getNodeById(this.focusedNodeId) : null;\r\n  }\r\n\r\n  @computed get expandedNodes() {\r\n    const nodes = Object.keys(this.expandedNodeIds)\r\n      .filter((id) => this.expandedNodeIds[id])\r\n      .map((id) => this.getNodeById(id));\r\n\r\n    return compact(nodes);\r\n  }\r\n\r\n  @computed get activeNodes() {\r\n    const nodes = Object.keys(this.activeNodeIds)\r\n      .filter((id) => this.activeNodeIds[id])\r\n      .map((id) => this.getNodeById(id));\r\n\r\n    return compact(nodes);\r\n  }\r\n\r\n  @computed get hiddenNodes() {\r\n    const nodes = Object.keys(this.hiddenNodeIds)\r\n        .filter((id) => this.hiddenNodeIds[id])\r\n        .map((id) => this.getNodeById(id));\r\n\r\n    return compact(nodes);\r\n  }\r\n\r\n  @computed get selectedLeafNodes() {\r\n    const nodes = Object.keys(this.selectedLeafNodeIds)\r\n        .filter((id) => this.selectedLeafNodeIds[id])\r\n        .map((id) => this.getNodeById(id));\r\n\r\n    return compact(nodes);\r\n  }\r\n\r\n  // locating nodes\r\n  getNodeByPath(path: any[], startNode= null): TreeNode {\r\n    if (!path) return null;\r\n\r\n    startNode = startNode || this.virtualRoot;\r\n    if (path.length === 0) return startNode;\r\n\r\n    if (!startNode.children) return null;\r\n\r\n    const childId = path.shift();\r\n    const childNode = find(startNode.children, { id: childId });\r\n\r\n    if (!childNode) return null;\r\n\r\n    return this.getNodeByPath(path, childNode);\r\n  }\r\n\r\n  getNodeById(id) {\r\n    const idStr = id.toString();\r\n\r\n    return this.getNodeBy((node) => node.id.toString() === idStr);\r\n  }\r\n\r\n  getNodeBy(predicate, startNode = null) {\r\n    startNode = startNode || this.virtualRoot;\r\n\r\n    if (!startNode.children) return null;\r\n\r\n    const found = find(startNode.children, predicate);\r\n\r\n    if (found) { // found in children\r\n      return found;\r\n    } else { // look in children's children\r\n      for (let child of startNode.children) {\r\n        const foundInChildren = this.getNodeBy(predicate, child);\r\n        if (foundInChildren) return foundInChildren;\r\n      }\r\n    }\r\n  }\r\n\r\n  isExpanded(node) {\r\n    return this.expandedNodeIds[node.id];\r\n  }\r\n\r\n  isHidden(node) {\r\n    return this.hiddenNodeIds[node.id];\r\n  }\r\n\r\n  isActive(node) {\r\n    return this.activeNodeIds[node.id];\r\n  }\r\n\r\n  isSelected(node) {\r\n    return this.selectedLeafNodeIds[node.id];\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    this.dispose();\r\n    this.unsubscribeAll();\r\n  }\r\n\r\n  dispose() {\r\n    // Dispose reactions of the replaced nodes\r\n    if (this.virtualRoot) {\r\n      this.virtualRoot.dispose();\r\n    }\r\n  }\r\n\r\n  unsubscribeAll() {\r\n    this.subscriptions.forEach(subscription => subscription.unsubscribe());\r\n    this.subscriptions = [];\r\n  }\r\n\r\n  // actions\r\n  @action setData({ nodes, options = null, events = null }: {nodes: any, options: any, events: any}) {\r\n    if (options) {\r\n      this.options = new TreeOptions(options);\r\n    }\r\n    if (events) {\r\n      this.events = events;\r\n    }\r\n    if (nodes) {\r\n      this.nodes = nodes;\r\n    }\r\n\r\n    this.update();\r\n  }\r\n\r\n  @action update() {\r\n    // Rebuild tree:\r\n    let virtualRootConfig = {\r\n      id: this.options.rootId,\r\n      virtual: true,\r\n      [this.options.childrenField]: this.nodes\r\n    };\r\n\r\n    this.dispose();\r\n\r\n    this.virtualRoot = new TreeNode(virtualRootConfig, null, this, 0);\r\n\r\n    this.roots = this.virtualRoot.children;\r\n\r\n    // Fire event:\r\n    if (this.firstUpdate) {\r\n      if (this.roots) {\r\n        this.firstUpdate = false;\r\n        this._calculateExpandedNodes();\r\n      }\r\n    } else {\r\n      this.fireEvent({ eventName: TREE_EVENTS.updateData });\r\n    }\r\n  }\r\n\r\n\r\n  @action setFocusedNode(node) {\r\n    this.focusedNodeId = node ? node.id : null;\r\n  }\r\n\r\n  @action setFocus(value) {\r\n    TreeModel.focusedTree = value ? this : null;\r\n  }\r\n\r\n  @action doForAll(fn) {\r\n    this.roots.forEach((root) => root.doForAll(fn));\r\n  }\r\n\r\n  @action focusNextNode() {\r\n    let previousNode = this.getFocusedNode();\r\n    let nextNode = previousNode ? previousNode.findNextNode(true, true) : this.getFirstRoot(true);\r\n    if (nextNode) nextNode.focus();\r\n  }\r\n\r\n  @action focusPreviousNode() {\r\n    let previousNode = this.getFocusedNode();\r\n    let nextNode = previousNode ? previousNode.findPreviousNode(true) : this.getLastRoot(true);\r\n    if (nextNode) nextNode.focus();\r\n  }\r\n\r\n  @action focusDrillDown() {\r\n    let previousNode = this.getFocusedNode();\r\n    if (previousNode && previousNode.isCollapsed && previousNode.hasChildren) {\r\n      previousNode.toggleExpanded();\r\n    }\r\n    else {\r\n      let nextNode = previousNode ? previousNode.getFirstChild(true) : this.getFirstRoot(true);\r\n      if (nextNode) nextNode.focus();\r\n    }\r\n  }\r\n\r\n  @action focusDrillUp() {\r\n    let previousNode = this.getFocusedNode();\r\n    if (!previousNode) return;\r\n    if (previousNode.isExpanded) {\r\n      previousNode.toggleExpanded();\r\n    }\r\n    else {\r\n      let nextNode = previousNode.realParent;\r\n      if (nextNode) nextNode.focus();\r\n    }\r\n  }\r\n\r\n  @action setActiveNode(node, value, multi = false) {\r\n    if (multi) {\r\n      this._setActiveNodeMulti(node, value);\r\n    }\r\n    else {\r\n      this._setActiveNodeSingle(node, value);\r\n    }\r\n\r\n    if (value) {\r\n      node.focus(this.options.scrollOnActivate);\r\n      this.fireEvent({ eventName: TREE_EVENTS.activate, node });\r\n      this.fireEvent({ eventName: TREE_EVENTS.nodeActivate, node }); // For IE11\r\n    } else {\r\n      this.fireEvent({ eventName: TREE_EVENTS.deactivate, node });\r\n      this.fireEvent({ eventName: TREE_EVENTS.nodeDeactivate, node }); // For IE11\r\n    }\r\n  }\r\n\r\n  @action setSelectedNode(node, value) {\r\n    this.selectedLeafNodeIds = Object.assign({}, this.selectedLeafNodeIds, {[node.id]: value});\r\n\r\n    if (value) {\r\n      node.focus();\r\n      this.fireEvent({ eventName: TREE_EVENTS.select, node });\r\n    } else {\r\n      this.fireEvent({ eventName: TREE_EVENTS.deselect, node });\r\n    }\r\n  }\r\n\r\n  @action setExpandedNode(node, value) {\r\n    this.expandedNodeIds = Object.assign({}, this.expandedNodeIds, {[node.id]: value});\r\n    this.fireEvent({ eventName: TREE_EVENTS.toggleExpanded, node, isExpanded: value });\r\n  }\r\n\r\n  @action expandAll() {\r\n    this.roots.forEach((root) => root.expandAll());\r\n  }\r\n\r\n  @action collapseAll() {\r\n    this.roots.forEach((root) => root.collapseAll());\r\n  }\r\n\r\n  @action setIsHidden(node, value) {\r\n    this.hiddenNodeIds = Object.assign({}, this.hiddenNodeIds, {[node.id]: value});\r\n  }\r\n\r\n  @action setHiddenNodeIds(nodeIds) {\r\n    this.hiddenNodeIds = nodeIds.reduce((hiddenNodeIds, id) => Object.assign(hiddenNodeIds, {\r\n      [id]: true\r\n    }), {});\r\n  }\r\n\r\n  performKeyAction(node, $event) {\r\n    const keyAction = this.options.actionMapping.keys[$event.keyCode];\r\n    if (keyAction) {\r\n      $event.preventDefault();\r\n      keyAction(this, node, $event);\r\n      return true;\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  @action filterNodes(filter, autoShow = true) {\r\n    let filterFn;\r\n\r\n    if (!filter) {\r\n      return this.clearFilter();\r\n    }\r\n\r\n    // support function and string filter\r\n    if (isString(filter)) {\r\n      filterFn = (node) => node.displayField.toLowerCase().indexOf(filter.toLowerCase()) !== -1;\r\n    }\r\n    else if (isFunction(filter)) {\r\n       filterFn = filter;\r\n    }\r\n    else {\r\n      console.error('Don\\'t know what to do with filter', filter);\r\n      console.error('Should be either a string or function');\r\n      return;\r\n    }\r\n\r\n    const ids = {};\r\n    this.roots.forEach((node) => this._filterNode(ids, node, filterFn, autoShow));\r\n    this.hiddenNodeIds = ids;\r\n    this.fireEvent({ eventName: TREE_EVENTS.changeFilter });\r\n  }\r\n\r\n  @action clearFilter() {\r\n    this.hiddenNodeIds = {};\r\n    this.fireEvent({ eventName: TREE_EVENTS.changeFilter });\r\n  }\r\n\r\n  @action moveNode(node, to) {\r\n    const fromIndex = node.getIndexInParent();\r\n    const fromParent = node.parent;\r\n\r\n    if (!this.canMoveNode(node, to, fromIndex)) return;\r\n\r\n    const fromChildren = fromParent.getField('children');\r\n\r\n    // If node doesn't have children - create children array\r\n    if (!to.parent.getField('children')) {\r\n      to.parent.setField('children', []);\r\n    }\r\n    const toChildren = to.parent.getField('children');\r\n\r\n    const originalNode = fromChildren.splice(fromIndex, 1)[0];\r\n\r\n    // Compensate for index if already removed from parent:\r\n    let toIndex = (fromParent === to.parent && to.index > fromIndex) ? to.index - 1 : to.index;\r\n\r\n    toChildren.splice(toIndex, 0, originalNode);\r\n\r\n    fromParent.treeModel.update();\r\n    if (to.parent.treeModel !== fromParent.treeModel) {\r\n      to.parent.treeModel.update();\r\n    }\r\n\r\n    this.fireEvent({\r\n      eventName: TREE_EVENTS.moveNode,\r\n      node: originalNode,\r\n      to: { parent: to.parent.data, index: toIndex },\r\n      from: { parent: fromParent.data, index: fromIndex}\r\n    });\r\n  }\r\n\r\n  @action copyNode(node, to) {\r\n    const fromIndex = node.getIndexInParent();\r\n\r\n    if (!this.canMoveNode(node, to, fromIndex)) return;\r\n\r\n    // If node doesn't have children - create children array\r\n    if (!to.parent.getField('children')) {\r\n      to.parent.setField('children', []);\r\n    }\r\n    const toChildren = to.parent.getField('children');\r\n\r\n    const nodeCopy = this.options.getNodeClone(node);\r\n\r\n    toChildren.splice(to.index, 0, nodeCopy);\r\n\r\n    node.treeModel.update();\r\n    if (to.parent.treeModel !== node.treeModel) {\r\n      to.parent.treeModel.update();\r\n    }\r\n\r\n    this.fireEvent({ eventName: TREE_EVENTS.copyNode, node: nodeCopy, to: { parent: to.parent.data, index: to.index } });\r\n  }\r\n\r\n  getState() {\r\n    return {\r\n      expandedNodeIds: this.expandedNodeIds,\r\n      selectedLeafNodeIds: this.selectedLeafNodeIds,\r\n      activeNodeIds: this.activeNodeIds,\r\n      hiddenNodeIds: this.hiddenNodeIds,\r\n      focusedNodeId: this.focusedNodeId\r\n    };\r\n  }\r\n\r\n  @action setState(state) {\r\n    if (!state) return;\r\n\r\n    Object.assign(this, {\r\n      expandedNodeIds: state.expandedNodeIds || {},\r\n      selectedLeafNodeIds: state.selectedLeafNodeIds || {},\r\n      activeNodeIds: state.activeNodeIds || {},\r\n      hiddenNodeIds: state.hiddenNodeIds || {},\r\n      focusedNodeId: state.focusedNodeId\r\n    });\r\n  }\r\n\r\n  subscribeToState(fn) {\r\n    autorun(() => fn(this.getState()));\r\n  }\r\n\r\n  canMoveNode(node, to, fromIndex = undefined) {\r\n    const fromNodeIndex = fromIndex || node.getIndexInParent();\r\n\r\n    // same node:\r\n    if (node.parent === to.parent && fromIndex === to.index) {\r\n      return false;\r\n    }\r\n\r\n    return !to.parent.isDescendantOf(node);\r\n  }\r\n\r\n  calculateExpandedNodes() {\r\n      this._calculateExpandedNodes();\r\n  }\r\n\r\n  // private methods\r\n  private _filterNode(ids, node, filterFn, autoShow) {\r\n    // if node passes function then it's visible\r\n    let isVisible = filterFn(node);\r\n\r\n    if (node.children) {\r\n      // if one of node's children passes filter then this node is also visible\r\n      node.children.forEach((child) => {\r\n        if (this._filterNode(ids, child, filterFn, autoShow)) {\r\n          isVisible = true;\r\n        }\r\n      });\r\n    }\r\n\r\n    // mark node as hidden\r\n    if (!isVisible) {\r\n      ids[node.id] = true;\r\n    }\r\n    // auto expand parents to make sure the filtered nodes are visible\r\n    if (autoShow && isVisible) {\r\n      node.ensureVisible();\r\n    }\r\n    return isVisible;\r\n  }\r\n\r\n  private _calculateExpandedNodes(startNode = null) {\r\n    startNode = startNode || this.virtualRoot;\r\n\r\n    if (startNode.data[this.options.isExpandedField]) {\r\n      this.expandedNodeIds = Object.assign({}, this.expandedNodeIds, {[startNode.id]: true});\r\n    }\r\n    if (startNode.children) {\r\n      startNode.children.forEach((child) => this._calculateExpandedNodes(child));\r\n    }\r\n  }\r\n\r\n  private _setActiveNodeSingle(node, value) {\r\n    // Deactivate all other nodes:\r\n    this.activeNodes\r\n      .filter((activeNode) => activeNode !== node)\r\n      .forEach((activeNode) => {\r\n        this.fireEvent({ eventName: TREE_EVENTS.deactivate, node: activeNode });\r\n        this.fireEvent({ eventName: TREE_EVENTS.nodeDeactivate, node: activeNode }); // For IE11\r\n      });\r\n\r\n    if (value) {\r\n      this.activeNodeIds = {[node.id]: true};\r\n    }\r\n    else {\r\n      this.activeNodeIds = {};\r\n    }\r\n  }\r\n\r\n  private _setActiveNodeMulti(node, value) {\r\n    this.activeNodeIds = Object.assign({}, this.activeNodeIds, {[node.id]: value});\r\n  }\r\n\r\n}\r\n","import { Injectable } from '@angular/core';\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class TreeDraggedElement {\r\n  _draggedElement: any = null;\r\n\r\n  set(draggedElement: any) {\r\n    this._draggedElement = draggedElement;\r\n  }\r\n\r\n  get(): any {\r\n    return this._draggedElement;\r\n  }\r\n\r\n  isDragging() {\r\n    return !!this.get();\r\n  }\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { observable, computed, action, autorun, reaction } from 'mobx';\r\nimport { TreeModel } from './tree.model';\r\nimport { TREE_EVENTS } from '../constants/events';\r\n\r\nconst Y_OFFSET = 500; // Extra pixels outside the viewport, in each direction, to render nodes in\r\nconst Y_EPSILON = 150; // Minimum pixel change required to recalculate the rendered nodes\r\n\r\n@Injectable()\r\nexport class TreeVirtualScroll {\r\n  private _dispose: any;\r\n\r\n  @observable yBlocks = 0;\r\n  @observable x = 0;\r\n  @observable viewportHeight = null;\r\n  viewport = null;\r\n\r\n  @computed get y() {\r\n    return this.yBlocks * Y_EPSILON;\r\n  }\r\n\r\n  @computed get totalHeight() {\r\n    return this.treeModel.virtualRoot ? this.treeModel.virtualRoot.height : 0;\r\n  }\r\n\r\n  constructor(private treeModel: TreeModel) {\r\n    treeModel.virtualScroll = this;\r\n    this._dispose = [autorun(() => this.fixScroll())];\r\n  }\r\n\r\n  fireEvent(event) {\r\n    this.treeModel.fireEvent(event);\r\n  }\r\n\r\n  init() {\r\n    const fn = this.recalcPositions.bind(this);\r\n\r\n    fn();\r\n    this._dispose = [\r\n      ...this._dispose,\r\n      reaction(() => this.treeModel.roots, fn),\r\n      reaction(() => this.treeModel.expandedNodeIds, fn),\r\n      reaction(() => this.treeModel.hiddenNodeIds, fn)\r\n    ];\r\n    this.treeModel.subscribe(TREE_EVENTS.loadNodeChildren, fn);\r\n  }\r\n\r\n  isEnabled() {\r\n    return this.treeModel.options.useVirtualScroll;\r\n  }\r\n\r\n  @action private _setYBlocks(value) {\r\n    this.yBlocks = value;\r\n  }\r\n\r\n  @action recalcPositions() {\r\n    this.treeModel.virtualRoot.height = this._getPositionAfter(this.treeModel.getVisibleRoots(), 0);\r\n  }\r\n\r\n  private _getPositionAfter(nodes, startPos) {\r\n    let position = startPos;\r\n\r\n    nodes.forEach((node) => {\r\n      node.position = position;\r\n      position = this._getPositionAfterNode(node, position);\r\n    });\r\n    return position;\r\n  }\r\n\r\n  private _getPositionAfterNode(node, startPos) {\r\n    let position = node.getSelfHeight() + startPos;\r\n\r\n    if (node.children && node.isExpanded) { // TBD: consider loading component as well\r\n      position = this._getPositionAfter(node.visibleChildren, position);\r\n    }\r\n    node.height = position - startPos;\r\n    return position;\r\n  }\r\n\r\n\r\n  clear() {\r\n    this._dispose.forEach((d) => d());\r\n  }\r\n\r\n  @action setViewport(viewport) {\r\n    Object.assign(this, {\r\n      viewport,\r\n      x: viewport.scrollLeft,\r\n      yBlocks: Math.round(viewport.scrollTop / Y_EPSILON),\r\n      viewportHeight: viewport.getBoundingClientRect ? viewport.getBoundingClientRect().height : 0\r\n    });\r\n  }\r\n\r\n  @action scrollIntoView(node, force, scrollToMiddle = true) {\r\n    if (node.options.scrollContainer) {\r\n      const scrollContainer = node.options.scrollContainer;\r\n      const scrollContainerHeight = scrollContainer.getBoundingClientRect().height;\r\n      const scrollContainerTop = scrollContainer.getBoundingClientRect().top;\r\n      const nodeTop = this.viewport.getBoundingClientRect().top + node.position - scrollContainerTop;\r\n\r\n      if (force || // force scroll to node\r\n        nodeTop < scrollContainer.scrollTop || // node is above scroll container\r\n        nodeTop + node.getSelfHeight() > scrollContainer.scrollTop + scrollContainerHeight) { // node is below container\r\n        scrollContainer.scrollTop = scrollToMiddle ?\r\n          nodeTop - scrollContainerHeight / 2 : // scroll to middle\r\n          nodeTop; // scroll to start\r\n      }\r\n    } else {\r\n      if (force || // force scroll to node\r\n        node.position < this.y || // node is above viewport\r\n        node.position + node.getSelfHeight() > this.y + this.viewportHeight) { // node is below viewport\r\n        if (this.viewport) {\r\n          this.viewport.scrollTop = scrollToMiddle ?\r\n          node.position - this.viewportHeight / 2 : // scroll to middle\r\n          node.position; // scroll to start\r\n\r\n          this._setYBlocks(Math.floor(this.viewport.scrollTop / Y_EPSILON));\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  getViewportNodes(nodes) {\r\n    if (!nodes) return [];\r\n\r\n    const visibleNodes = nodes.filter((node) => !node.isHidden);\r\n\r\n    if (!this.isEnabled()) return visibleNodes;\r\n\r\n    if (!this.viewportHeight || !visibleNodes.length) return [];\r\n\r\n    // When loading children async this method is called before their height and position is calculated.\r\n    // In that case firstIndex === 0 and lastIndex === visibleNodes.length - 1 (e.g. 1000),\r\n    // which means that it loops through every visibleNodes item and push them into viewportNodes array.\r\n    // We can prevent nodes from being pushed to the array and wait for the appropriate calculations to take place\r\n    const lastVisibleNode = visibleNodes.slice(-1)[0]\r\n    if (!lastVisibleNode.height && lastVisibleNode.position === 0) return [];\r\n\r\n    // Search for first node in the viewport using binary search\r\n    // Look for first node that starts after the beginning of the viewport (with buffer)\r\n    // Or that ends after the beginning of the viewport\r\n    const firstIndex = binarySearch(visibleNodes, (node) => {\r\n      return (node.position + Y_OFFSET > this.y) ||\r\n             (node.position + node.height > this.y);\r\n    });\r\n\r\n    // Search for last node in the viewport using binary search\r\n    // Look for first node that starts after the end of the viewport (with buffer)\r\n    const lastIndex = binarySearch(visibleNodes, (node) => {\r\n      return node.position - Y_OFFSET > this.y + this.viewportHeight;\r\n    }, firstIndex);\r\n\r\n    const viewportNodes = [];\r\n\r\n    for (let i = firstIndex; i <= lastIndex; i++) {\r\n      viewportNodes.push(visibleNodes[i]);\r\n    }\r\n\r\n    return viewportNodes;\r\n  }\r\n\r\n  fixScroll() {\r\n    const maxY = Math.max(0, this.totalHeight - this.viewportHeight);\r\n\r\n    if (this.y < 0) this._setYBlocks(0);\r\n    if (this.y > maxY) this._setYBlocks(maxY / Y_EPSILON);\r\n  }\r\n}\r\n\r\nfunction binarySearch(nodes, condition, firstIndex = 0) {\r\n  let index = firstIndex;\r\n  let toIndex = nodes.length - 1;\r\n\r\n  while (index !== toIndex) {\r\n    let midIndex = Math.floor((index + toIndex) / 2);\r\n\r\n    if (condition(nodes[midIndex])) {\r\n      toIndex = midIndex;\r\n    }\r\n    else {\r\n      if (index === midIndex) index = toIndex;\r\n      else index = midIndex;\r\n    }\r\n  }\r\n  return index;\r\n}\r\n","import { Component, Input, TemplateRef, ViewEncapsulation } from '@angular/core';\r\nimport { TreeNode } from '../models/tree-node.model';\r\n\r\n@Component({\r\n  encapsulation: ViewEncapsulation.None,\r\n  selector: 'tree-loading-component',\r\n  template: `\r\n    <span *ngIf=\"!template\">loading...</span>\r\n    <ng-container\r\n      [ngTemplateOutlet]=\"template\"\r\n      [ngTemplateOutletContext]=\"{ $implicit: node }\">\r\n    </ng-container>\r\n  `,\r\n})\r\nexport class LoadingComponent {\r\n  @Input() template: TemplateRef<any>;\r\n  @Input() node: TreeNode;\r\n}\r\n","import {\r\n  Component,\r\n  ElementRef,\r\n  ViewEncapsulation,\r\n  AfterViewInit,\r\n  OnInit,\r\n  OnDestroy,\r\n  NgZone\r\n} from '@angular/core';\r\nimport { TreeVirtualScroll } from '../models/tree-virtual-scroll.model';\r\nimport { TREE_EVENTS } from '../constants/events';\r\nimport { throttle } from 'lodash-es';\r\n\r\n@Component({\r\n  selector: 'tree-viewport',\r\n  styles: [],\r\n  providers: [TreeVirtualScroll],\r\n  template: `\r\n    <ng-container *treeMobxAutorun=\"{ dontDetach: true }\">\r\n      <div [style.height]=\"getTotalHeight()\">\r\n        <ng-content></ng-content>\r\n      </div>\r\n    </ng-container>\r\n  `\r\n})\r\nexport class TreeViewportComponent implements AfterViewInit, OnInit, OnDestroy {\r\n  setViewport = throttle(() => {\r\n    this.virtualScroll.setViewport(this.elementRef.nativeElement);\r\n  }, 17);\r\n  private readonly scrollEventHandler: ($event: Event) => void;\r\n\r\n  constructor(\r\n    private elementRef: ElementRef,\r\n    private ngZone: NgZone,\r\n    public virtualScroll: TreeVirtualScroll\r\n  ) {\r\n    this.scrollEventHandler = this.setViewport.bind(this);\r\n  }\r\n\r\n  ngOnInit() {\r\n    this.virtualScroll.init();\r\n  }\r\n\r\n  ngAfterViewInit() {\r\n    setTimeout(() => {\r\n      this.setViewport();\r\n      this.virtualScroll.fireEvent({ eventName: TREE_EVENTS.initialized });\r\n    });\r\n    let el: HTMLElement = this.elementRef.nativeElement;\r\n    this.ngZone.runOutsideAngular(() => {\r\n      el.addEventListener('scroll', this.scrollEventHandler);\r\n    });\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    this.virtualScroll.clear();\r\n    let el: HTMLElement = this.elementRef.nativeElement;\r\n    el.removeEventListener('scroll', this.scrollEventHandler);\r\n  }\r\n\r\n  getTotalHeight() {\r\n    return (\r\n      (this.virtualScroll.isEnabled() &&\r\n        this.virtualScroll.totalHeight + 'px') ||\r\n      'auto'\r\n    );\r\n  }\r\n}\r\n","import { Component, ContentChild, EventEmitter, HostListener, Input, OnChanges, Output, TemplateRef, ViewChild } from '@angular/core';\r\nimport { TreeModel } from '../models/tree.model';\r\nimport { TreeDraggedElement } from '../models/tree-dragged-element.model';\r\nimport { TreeOptions } from '../models/tree-options.model';\r\nimport { ITreeOptions } from '../defs/api';\r\nimport { TreeViewportComponent } from './tree-viewport.component';\r\n\r\nimport { includes, pick } from 'lodash-es';\r\n\r\n@Component({\r\n  selector: 'Tree, tree-root',\r\n  providers: [TreeModel],\r\n  styles: [],\r\n  template: `\r\n      <tree-viewport #viewport>\r\n          <div\r\n                  class=\"angular-tree-component\"\r\n                  [class.node-dragging]=\"treeDraggedElement.isDragging()\"\r\n                  [class.angular-tree-component-rtl]=\"treeModel.options.rtl\">\r\n              <tree-node-collection\r\n                      *ngIf=\"treeModel.roots\"\r\n                      [nodes]=\"treeModel.roots\"\r\n                      [treeModel]=\"treeModel\"\r\n                      [templates]=\"{\r\n            loadingTemplate: loadingTemplate,\r\n            treeNodeTemplate: treeNodeTemplate,\r\n            treeNodeWrapperTemplate: treeNodeWrapperTemplate,\r\n            treeNodeFullTemplate: treeNodeFullTemplate\r\n          }\">\r\n              </tree-node-collection>\r\n              <tree-node-drop-slot\r\n                      class=\"empty-tree-drop-slot\"\r\n                      *ngIf=\"treeModel.isEmptyTree()\"\r\n                      [dropIndex]=\"0\"\r\n                      [node]=\"treeModel.virtualRoot\">\r\n              </tree-node-drop-slot>\r\n          </div>\r\n      </tree-viewport>\r\n  `\r\n})\r\nexport class TreeComponent implements OnChanges {\r\n  _nodes: any[];\r\n  _options: TreeOptions;\r\n\r\n  @ContentChild('loadingTemplate', { static: false }) loadingTemplate: TemplateRef<any>;\r\n  @ContentChild('treeNodeTemplate', { static: false }) treeNodeTemplate: TemplateRef<any>;\r\n  @ContentChild('treeNodeWrapperTemplate', { static: false }) treeNodeWrapperTemplate: TemplateRef<any>;\r\n  @ContentChild('treeNodeFullTemplate', { static: false }) treeNodeFullTemplate: TemplateRef<any>;\r\n  @ViewChild('viewport', { static: false }) viewportComponent: TreeViewportComponent;\r\n\r\n  // Will be handled in ngOnChanges\r\n  @Input() set nodes(nodes: any[]) {\r\n  };\r\n\r\n  @Input() set options(options: ITreeOptions) {\r\n  };\r\n\r\n  @Input() set focused(value: boolean) {\r\n    this.treeModel.setFocus(value);\r\n  }\r\n\r\n  @Input() set state(state) {\r\n    this.treeModel.setState(state);\r\n  }\r\n\r\n  @Output() toggleExpanded;\r\n  @Output() activate;\r\n  @Output() deactivate;\r\n  @Output() nodeActivate;\r\n  @Output() nodeDeactivate;\r\n  @Output() select;\r\n  @Output() deselect;\r\n  @Output() focus;\r\n  @Output() blur;\r\n  @Output() updateData;\r\n  @Output() initialized;\r\n  @Output() moveNode;\r\n  @Output() copyNode;\r\n  @Output() loadNodeChildren;\r\n  @Output() changeFilter;\r\n  @Output() event;\r\n  @Output() stateChange;\r\n\r\n  constructor(\r\n    public treeModel: TreeModel,\r\n    public treeDraggedElement: TreeDraggedElement) {\r\n\r\n    treeModel.eventNames.forEach((name) => this[name] = new EventEmitter());\r\n    treeModel.subscribeToState((state) => this.stateChange.emit(state));\r\n  }\r\n\r\n  @HostListener('body: keydown', ['$event'])\r\n  onKeydown($event) {\r\n    if (!this.treeModel.isFocused) return;\r\n    if (includes(['input', 'textarea'],\r\n      document.activeElement.tagName.toLowerCase())) return;\r\n\r\n    const focusedNode = this.treeModel.getFocusedNode();\r\n\r\n    this.treeModel.performKeyAction(focusedNode, $event);\r\n  }\r\n\r\n  @HostListener('body: mousedown', ['$event'])\r\n  onMousedown($event) {\r\n    function isOutsideClick(startElement: Element, nodeName: string) {\r\n      return !startElement ? true : startElement.localName === nodeName ? false : isOutsideClick(startElement.parentElement, nodeName);\r\n    }\r\n\r\n    if (isOutsideClick($event.target, 'tree-root')) {\r\n      this.treeModel.setFocus(false);\r\n    }\r\n  }\r\n\r\n  ngOnChanges(changes) {\r\n    if (changes.options || changes.nodes) {\r\n      this.treeModel.setData({\r\n        options: changes.options && changes.options.currentValue,\r\n        nodes: changes.nodes && changes.nodes.currentValue,\r\n        events: pick(this, this.treeModel.eventNames)\r\n      });\r\n    }\r\n  }\r\n\r\n  sizeChanged() {\r\n    this.viewportComponent.setViewport();\r\n  }\r\n}\r\n","import {\r\n  Component,\r\n  Input,\r\n  ViewEncapsulation,\r\n  TemplateRef\r\n} from '@angular/core';\r\nimport { TreeNode } from '../models/tree-node.model';\r\n\r\n@Component({\r\n  selector: 'TreeNode, tree-node',\r\n  encapsulation: ViewEncapsulation.None,\r\n  styles: [],\r\n  template: `\r\n    <ng-container *treeMobxAutorun=\"{ dontDetach: true }\">\r\n      <div\r\n        *ngIf=\"!templates.treeNodeFullTemplate\"\r\n        [class]=\"node.getClass()\"\r\n        [class.tree-node]=\"true\"\r\n        [class.tree-node-expanded]=\"node.isExpanded && node.hasChildren\"\r\n        [class.tree-node-collapsed]=\"node.isCollapsed && node.hasChildren\"\r\n        [class.tree-node-leaf]=\"node.isLeaf\"\r\n        [class.tree-node-active]=\"node.isActive\"\r\n        [class.tree-node-focused]=\"node.isFocused\"\r\n      >\r\n        <tree-node-drop-slot\r\n          *ngIf=\"index === 0\"\r\n          [dropIndex]=\"node.index\"\r\n          [node]=\"node.parent\"\r\n        ></tree-node-drop-slot>\r\n\r\n        <tree-node-wrapper\r\n          [node]=\"node\"\r\n          [index]=\"index\"\r\n          [templates]=\"templates\"\r\n        ></tree-node-wrapper>\r\n\r\n        <tree-node-children\r\n          [node]=\"node\"\r\n          [templates]=\"templates\"\r\n        ></tree-node-children>\r\n        <tree-node-drop-slot\r\n          [dropIndex]=\"node.index + 1\"\r\n          [node]=\"node.parent\"\r\n        ></tree-node-drop-slot>\r\n      </div>\r\n      <ng-container\r\n        [ngTemplateOutlet]=\"templates.treeNodeFullTemplate\"\r\n        [ngTemplateOutletContext]=\"{\r\n          $implicit: node,\r\n          node: node,\r\n          index: index,\r\n          templates: templates\r\n        }\"\r\n      >\r\n      </ng-container>\r\n    </ng-container>\r\n  `\r\n})\r\nexport class TreeNodeComponent {\r\n  @Input() node: TreeNode;\r\n  @Input() index: number;\r\n  @Input() templates: any;\r\n}\r\n","import { Component, Input, ViewEncapsulation, TemplateRef } from '@angular/core';\r\nimport { TreeNode } from '../models/tree-node.model';\r\n\r\n@Component({\r\n  selector: 'tree-node-content',\r\n  encapsulation: ViewEncapsulation.None,\r\n  template: `\r\n  <span *ngIf=\"!template\">{{ node.displayField }}</span>\r\n  <ng-container\r\n    [ngTemplateOutlet]=\"template\"\r\n    [ngTemplateOutletContext]=\"{ $implicit: node, node: node, index: index }\">\r\n  </ng-container>`,\r\n})\r\nexport class TreeNodeContent {\r\n  @Input() node: TreeNode;\r\n  @Input() index: number;\r\n  @Input() template: TemplateRef<any>;\r\n}\r\n","import { Component, Input, ViewEncapsulation } from '@angular/core';\r\nimport { TreeNode } from '../models/tree-node.model';\r\n\r\n@Component({\r\n  selector: 'TreeNodeDropSlot, tree-node-drop-slot',\r\n  encapsulation: ViewEncapsulation.None,\r\n  styles: [],\r\n  template: `\r\n    <div\r\n      class=\"node-drop-slot\"\r\n      (treeDrop)=\"onDrop($event)\"\r\n      [treeAllowDrop]=\"allowDrop.bind(this)\"\r\n      [allowDragoverStyling]=\"true\">\r\n    </div>\r\n  `\r\n})\r\nexport class TreeNodeDropSlot {\r\n  @Input() node: TreeNode;\r\n  @Input() dropIndex: number;\r\n\r\n  onDrop($event) {\r\n    this.node.mouseAction('drop', $event.event, {\r\n      from: $event.element,\r\n      to: { parent: this.node, index: this.dropIndex }\r\n    });\r\n  }\r\n\r\n  allowDrop(element, $event) {\r\n    return this.node.options.allowDrop(element, { parent: this.node, index: this.dropIndex }, $event);\r\n  }\r\n}\r\n","import { Component, Input, ViewEncapsulation } from '@angular/core';\r\nimport { TreeNode } from '../models/tree-node.model';\r\n\r\n@Component({\r\n  selector: 'tree-node-expander',\r\n  encapsulation: ViewEncapsulation.None,\r\n  styles: [],\r\n  template: `\r\n    <ng-container *treeMobxAutorun=\"{ dontDetach: true }\">\r\n      <span\r\n        *ngIf=\"node.hasChildren\"\r\n        [class.toggle-children-wrapper-expanded]=\"node.isExpanded\"\r\n        [class.toggle-children-wrapper-collapsed]=\"node.isCollapsed\"\r\n        class=\"toggle-children-wrapper\"\r\n        (click)=\"node.mouseAction('expanderClick', $event)\"\r\n      >\r\n        <span class=\"toggle-children\"></span>\r\n      </span>\r\n      <span *ngIf=\"!node.hasChildren\" class=\"toggle-children-placeholder\">\r\n      </span>\r\n    </ng-container>\r\n  `\r\n})\r\nexport class TreeNodeExpanderComponent {\r\n  @Input() node: TreeNode;\r\n}\r\n","import { Component, Input, ViewEncapsulation } from '@angular/core';\r\nimport { TreeNode } from '../models/tree-node.model';\r\n\r\n@Component({\r\n  selector: 'tree-node-children',\r\n  encapsulation: ViewEncapsulation.None,\r\n  styles: [],\r\n  template: `\r\n    <ng-container *treeMobxAutorun=\"{ dontDetach: true }\">\r\n      <div\r\n        [class.tree-children]=\"true\"\r\n        [class.tree-children-no-padding]=\"node.options.levelPadding\"\r\n        *treeAnimateOpen=\"\r\n          node.isExpanded;\r\n          speed: node.options.animateSpeed;\r\n          acceleration: node.options.animateAcceleration;\r\n          enabled: node.options.animateExpand\r\n        \"\r\n      >\r\n        <tree-node-collection\r\n          *ngIf=\"node.children\"\r\n          [nodes]=\"node.children\"\r\n          [templates]=\"templates\"\r\n          [treeModel]=\"node.treeModel\"\r\n        >\r\n        </tree-node-collection>\r\n        <tree-loading-component\r\n          [style.padding-left]=\"node.getNodePadding()\"\r\n          class=\"tree-node-loading\"\r\n          *ngIf=\"!node.children\"\r\n          [template]=\"templates.loadingTemplate\"\r\n          [node]=\"node\"\r\n        ></tree-loading-component>\r\n      </div>\r\n    </ng-container>\r\n  `\r\n})\r\nexport class TreeNodeChildrenComponent {\r\n  @Input() node: TreeNode;\r\n  @Input() templates: any;\r\n}\r\n","import { action as mobxAction } from 'mobx';\r\nimport { computed as mobxComputed } from 'mobx';\r\nimport { observable as mobxObservable } from 'mobx';\r\n\r\n// Re-export mobx operators to be able to use inside components with AOT:\r\nexport function actionInternal(...args) {\r\n  return (mobxAction as any)(...args);\r\n}\r\nexport const action: typeof mobxAction = Object.assign(\r\n  actionInternal,\r\n  mobxAction\r\n) as any;\r\n\r\nfunction computedInternal(...args) {\r\n  return (mobxComputed as any)(...args);\r\n}\r\nexport const computed: typeof mobxComputed = Object.assign(\r\n  computedInternal,\r\n  mobxComputed\r\n) as any;\r\n\r\nfunction observableInternal(...args) {\r\n  return (mobxObservable as any)(...args);\r\n}\r\n\r\nexport const observable: typeof mobxObservable = Object.assign(\r\n  observableInternal,\r\n  mobxObservable\r\n) as any;\r\n","import {\r\n  Component,\r\n  Input,\r\n  ViewEncapsulation,\r\n  OnInit,\r\n  OnDestroy\r\n} from '@angular/core';\r\nimport { reaction } from 'mobx';\r\nimport { observable, computed, action } from '../mobx-angular/mobx-proxy';\r\nimport { TreeVirtualScroll } from '../models/tree-virtual-scroll.model';\r\nimport { TreeNode } from '../models/tree-node.model';\r\nimport { TreeModel } from '../models/tree.model';\r\n\r\n@Component({\r\n  selector: 'tree-node-collection',\r\n  encapsulation: ViewEncapsulation.None,\r\n  template: `\r\n    <ng-container *treeMobxAutorun=\"{ dontDetach: true }\">\r\n      <div [style.margin-top]=\"marginTop\">\r\n        <tree-node\r\n          *ngFor=\"let node of viewportNodes; let i = index; trackBy: trackNode\"\r\n          [node]=\"node\"\r\n          [index]=\"i\"\r\n          [templates]=\"templates\"\r\n        >\r\n        </tree-node>\r\n      </div>\r\n    </ng-container>\r\n  `\r\n})\r\nexport class TreeNodeCollectionComponent implements OnInit, OnDestroy {\r\n  @Input()\r\n  get nodes() {\r\n    return this._nodes;\r\n  }\r\n  set nodes(nodes) {\r\n    this.setNodes(nodes);\r\n  }\r\n\r\n  @Input() treeModel: TreeModel;\r\n\r\n  @observable _nodes;\r\n  private virtualScroll: TreeVirtualScroll; // Cannot inject this, because we might be inside treeNodeTemplateFull\r\n  @Input() templates;\r\n\r\n  @observable viewportNodes: TreeNode[];\r\n\r\n  @computed get marginTop(): string {\r\n    const firstNode =\r\n      this.viewportNodes && this.viewportNodes.length && this.viewportNodes[0];\r\n    const relativePosition =\r\n      firstNode && firstNode.parent\r\n        ? firstNode.position -\r\n          firstNode.parent.position -\r\n          firstNode.parent.getSelfHeight()\r\n        : 0;\r\n\r\n    return `${relativePosition}px`;\r\n  }\r\n\r\n  _dispose = [];\r\n\r\n  @action setNodes(nodes) {\r\n    this._nodes = nodes;\r\n  }\r\n\r\n  ngOnInit() {\r\n    this.virtualScroll = this.treeModel.virtualScroll;\r\n    this._dispose = [\r\n      // return node indexes so we can compare structurally,\r\n      reaction(\r\n        () => {\r\n          return this.virtualScroll\r\n            .getViewportNodes(this.nodes)\r\n            .map(n => n.index);\r\n        },\r\n        nodeIndexes => {\r\n          this.viewportNodes = nodeIndexes.map(i => this.nodes[i]);\r\n        },\r\n        { compareStructural: true, fireImmediately: true } as any\r\n      ),\r\n      reaction(\r\n        () => this.nodes,\r\n        nodes => {\r\n          this.viewportNodes = this.virtualScroll.getViewportNodes(nodes);\r\n        }\r\n      )\r\n    ];\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    this._dispose.forEach(d => d());\r\n  }\r\n\r\n  trackNode(index, node) {\r\n    return node.id;\r\n  }\r\n}\r\n","import { Component , Input , ViewEncapsulation , TemplateRef } from '@angular/core';\r\nimport { TreeNode } from '../models/tree-node.model';\r\n\r\n@Component({\r\n  selector: 'tree-node-wrapper' ,\r\n  encapsulation: ViewEncapsulation.None ,\r\n  styles: [] ,\r\n  template: `\r\n      <div *ngIf=\"!templates.treeNodeWrapperTemplate\" class=\"node-wrapper\" [style.padding-left]=\"node.getNodePadding()\">\r\n          <tree-node-checkbox *ngIf=\"node.options.useCheckbox\" [node]=\"node\"></tree-node-checkbox>\r\n          <tree-node-expander [node]=\"node\"></tree-node-expander>\r\n          <div class=\"node-content-wrapper\"\r\n               [class.node-content-wrapper-active]=\"node.isActive\"\r\n               [class.node-content-wrapper-focused]=\"node.isFocused\"\r\n               (click)=\"node.mouseAction('click', $event)\"\r\n               (dblclick)=\"node.mouseAction('dblClick', $event)\"\r\n               (mouseover)=\"node.mouseAction('mouseOver', $event)\"\r\n               (mouseout)=\"node.mouseAction('mouseOut', $event)\"\r\n               (contextmenu)=\"node.mouseAction('contextMenu', $event)\"\r\n               (treeDrop)=\"node.onDrop($event)\"\r\n               (treeDropDragOver)=\"node.mouseAction('dragOver', $event)\"\r\n               (treeDropDragLeave)=\"node.mouseAction('dragLeave', $event)\"\r\n               (treeDropDragEnter)=\"node.mouseAction('dragEnter', $event)\"\r\n               [treeAllowDrop]=\"node.allowDrop\"\r\n               [allowDragoverStyling]=\"node.allowDragoverStyling()\"\r\n               [treeDrag]=\"node\"\r\n               [treeDragEnabled]=\"node.allowDrag()\">\r\n\r\n              <tree-node-content [node]=\"node\" [index]=\"index\" [template]=\"templates.treeNodeTemplate\">\r\n              </tree-node-content>\r\n          </div>\r\n      </div>\r\n      <ng-container\r\n              [ngTemplateOutlet]=\"templates.treeNodeWrapperTemplate\"\r\n              [ngTemplateOutletContext]=\"{ $implicit: node, node: node, index: index, templates: templates }\">\r\n      </ng-container>\r\n  `\r\n})\r\n\r\nexport class TreeNodeWrapperComponent {\r\n\r\n  @Input() node: TreeNode;\r\n  @Input() index: number;\r\n  @Input() templates: any;\r\n\r\n  constructor() {\r\n  }\r\n\r\n}\r\n","import { Component, Input, ViewEncapsulation } from '@angular/core';\r\nimport { TreeNode } from '../models/tree-node.model';\r\n\r\n@Component({\r\n  selector: 'tree-node-checkbox',\r\n  encapsulation: ViewEncapsulation.None,\r\n  styles: [],\r\n  template: `\r\n    <ng-container *treeMobxAutorun=\"{ dontDetach: true }\">\r\n      <input\r\n        class=\"tree-node-checkbox\"\r\n        type=\"checkbox\"\r\n        (click)=\"node.mouseAction('checkboxClick', $event)\"\r\n        [checked]=\"node.isSelected\"\r\n        [indeterminate]=\"node.isPartiallySelected\"\r\n      />\r\n    </ng-container>\r\n  `\r\n})\r\nexport class TreeNodeCheckboxComponent {\r\n  @Input() node: TreeNode;\r\n}\r\n","import {\r\n  AfterViewInit,\r\n  Directive,\r\n  ElementRef,\r\n  EventEmitter,\r\n  HostListener,\r\n  Input,\r\n  NgZone,\r\n  OnDestroy,\r\n  Output,\r\n  Renderer2\r\n} from '@angular/core';\r\nimport { TreeDraggedElement } from '../models/tree-dragged-element.model';\r\n\r\nconst DRAG_OVER_CLASS = 'is-dragging-over';\r\nconst DRAG_DISABLED_CLASS = 'is-dragging-over-disabled';\r\n\r\n@Directive({\r\n  selector: '[treeDrop]'\r\n})\r\nexport class TreeDropDirective implements AfterViewInit, OnDestroy {\r\n  @Input() allowDragoverStyling = true;\r\n  @Output('treeDrop') onDropCallback = new EventEmitter();\r\n  @Output('treeDropDragOver') onDragOverCallback = new EventEmitter();\r\n  @Output('treeDropDragLeave') onDragLeaveCallback = new EventEmitter();\r\n  @Output('treeDropDragEnter') onDragEnterCallback = new EventEmitter();\r\n  private readonly dragOverEventHandler: (ev: DragEvent) => void;\r\n  private readonly dragEnterEventHandler: (ev: DragEvent) => void;\r\n  private readonly dragLeaveEventHandler: (ev: DragEvent) => void;\r\n\r\n  private _allowDrop = (element, $event) => true;\r\n\r\n  @Input() set treeAllowDrop(allowDrop) {\r\n    if (allowDrop instanceof Function) {\r\n      this._allowDrop = allowDrop;\r\n    }\r\n    else this._allowDrop = (element, $event) => allowDrop;\r\n  }\r\n\r\n  allowDrop($event) {\r\n    return this._allowDrop(this.treeDraggedElement.get(), $event);\r\n  }\r\n\r\n  constructor(private el: ElementRef, private renderer: Renderer2, private treeDraggedElement: TreeDraggedElement, private ngZone: NgZone) {\r\n    this.dragOverEventHandler = this.onDragOver.bind(this);\r\n    this.dragEnterEventHandler = this.onDragEnter.bind(this);\r\n    this.dragLeaveEventHandler = this.onDragLeave.bind(this);\r\n  }\r\n\r\n  ngAfterViewInit() {\r\n    let el: HTMLElement = this.el.nativeElement;\r\n    this.ngZone.runOutsideAngular(() => {\r\n      el.addEventListener('dragover', this.dragOverEventHandler);\r\n      el.addEventListener('dragenter', this.dragEnterEventHandler);\r\n      el.addEventListener('dragleave', this.dragLeaveEventHandler);\r\n    });\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    let el: HTMLElement = this.el.nativeElement;\r\n    el.removeEventListener('dragover', this.dragOverEventHandler);\r\n    el.removeEventListener('dragenter', this.dragEnterEventHandler);\r\n    el.removeEventListener('dragleave', this.dragLeaveEventHandler);\r\n  }\r\n\r\n  onDragOver($event) {\r\n    if (!this.allowDrop($event)) {\r\n      if (this.allowDragoverStyling) {\r\n        return this.addDisabledClass();\r\n      }\r\n      return;\r\n    }\r\n\r\n    this.onDragOverCallback.emit({event: $event, element: this.treeDraggedElement.get()});\r\n\r\n    $event.preventDefault();\r\n    if (this.allowDragoverStyling) {\r\n      this.addClass();\r\n    }\r\n  }\r\n\r\n  onDragEnter($event) {\r\n    if (!this.allowDrop($event)) return;\r\n\r\n    $event.preventDefault();\r\n    this.onDragEnterCallback.emit({event: $event, element: this.treeDraggedElement.get()});\r\n  }\r\n\r\n  onDragLeave($event) {\r\n    if (!this.allowDrop($event)) {\r\n      if (this.allowDragoverStyling) {\r\n        return this.removeDisabledClass();\r\n      }\r\n      return;\r\n    }\r\n    this.onDragLeaveCallback.emit({event: $event, element: this.treeDraggedElement.get()});\r\n\r\n    if (this.allowDragoverStyling) {\r\n      this.removeClass();\r\n    }\r\n  }\r\n\r\n  @HostListener('drop', ['$event']) onDrop($event) {\r\n    if (!this.allowDrop($event)) return;\r\n\r\n    $event.preventDefault();\r\n    this.onDropCallback.emit({event: $event, element: this.treeDraggedElement.get()});\r\n\r\n    if (this.allowDragoverStyling) {\r\n      this.removeClass();\r\n    }\r\n    this.treeDraggedElement.set(null);\r\n  }\r\n\r\n  private addClass() {\r\n    this.renderer.addClass(this.el.nativeElement, DRAG_OVER_CLASS);\r\n  }\r\n\r\n  private removeClass() {\r\n    this.renderer.removeClass(this.el.nativeElement, DRAG_OVER_CLASS);\r\n  }\r\n\r\n  private addDisabledClass() {\r\n    this.renderer.addClass(this.el.nativeElement, DRAG_DISABLED_CLASS);\r\n  }\r\n\r\n  private removeDisabledClass() {\r\n    this.renderer.removeClass(this.el.nativeElement, DRAG_DISABLED_CLASS);\r\n  }\r\n}\r\n","import { AfterViewInit, Directive, DoCheck, ElementRef, HostListener, Input, NgZone, OnDestroy, Renderer2 } from '@angular/core';\r\nimport { TreeDraggedElement } from '../models/tree-dragged-element.model';\r\n\r\nconst DRAG_OVER_CLASS = 'is-dragging-over';\r\n\r\n@Directive({\r\n  selector: '[treeDrag]'\r\n})\r\nexport class TreeDragDirective implements AfterViewInit, DoCheck, OnDestroy {\r\n  @Input('treeDrag') draggedElement;\r\n  @Input() treeDragEnabled;\r\n  private readonly dragEventHandler: (ev: DragEvent) => void;\r\n\r\n  constructor(private el: ElementRef, private renderer: Renderer2, private treeDraggedElement: TreeDraggedElement, private ngZone: NgZone) {\r\n    this.dragEventHandler = this.onDrag.bind(this);\r\n  }\r\n\r\n  ngAfterViewInit() {\r\n    let el: HTMLElement = this.el.nativeElement;\r\n    this.ngZone.runOutsideAngular(() => {\r\n      el.addEventListener('drag', this.dragEventHandler);\r\n    });\r\n  }\r\n\r\n  ngDoCheck() {\r\n    this.renderer.setAttribute(this.el.nativeElement, 'draggable', this.treeDragEnabled ? 'true' : 'false');\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    let el: HTMLElement = this.el.nativeElement;\r\n    el.removeEventListener('drag', this.dragEventHandler);\r\n  }\r\n\r\n  @HostListener('dragstart', ['$event']) onDragStart(ev) {\r\n    // setting the data is required by firefox\r\n    ev.dataTransfer.setData('text', ev.target.id);\r\n    this.treeDraggedElement.set(this.draggedElement);\r\n    if (this.draggedElement.mouseAction) {\r\n      this.draggedElement.mouseAction('dragStart', ev);\r\n    }\r\n  }\r\n\r\n  onDrag(ev) {\r\n    if (this.draggedElement.mouseAction) {\r\n      this.draggedElement.mouseAction('drag', ev);\r\n    }\r\n  }\r\n\r\n  @HostListener('dragend') onDragEnd() {\r\n    if (this.draggedElement.mouseAction) {\r\n      this.draggedElement.mouseAction('dragEnd');\r\n    }\r\n    this.treeDraggedElement.set(null);\r\n  }\r\n}\r\n","import { Directive, Input, Renderer2, TemplateRef, ViewContainerRef } from '@angular/core';\r\n\r\nconst EASE_ACCELERATION = 1.005;\r\n\r\n@Directive({\r\n  selector: '[treeAnimateOpen]'\r\n})\r\nexport class TreeAnimateOpenDirective {\r\n  private _isOpen: boolean;\r\n\r\n  @Input('treeAnimateOpenSpeed') animateSpeed: number;\r\n  @Input('treeAnimateOpenAcceleration') animateAcceleration: number;\r\n  @Input('treeAnimateOpenEnabled') isEnabled: boolean;\r\n\r\n  @Input('treeAnimateOpen')\r\n  set isOpen(value: boolean) {\r\n    if (value) {\r\n      this._show();\r\n      if (this.isEnabled && this._isOpen === false) {\r\n        this._animateOpen();\r\n      }\r\n    } else {\r\n      this.isEnabled ? this._animateClose() : this._hide();\r\n    }\r\n    this._isOpen = !!value;\r\n  };\r\n\r\n  private innerElement: any;\r\n\r\n  constructor(\r\n    private renderer: Renderer2,\r\n    private templateRef: TemplateRef<any>,\r\n    private viewContainerRef: ViewContainerRef) {\r\n  }\r\n\r\n  private _show() {\r\n    if (this.innerElement) return;\r\n\r\n    // create child view\r\n    this.innerElement = this.viewContainerRef.createEmbeddedView(this.templateRef).rootNodes[0];\r\n  }\r\n\r\n  private _hide() {\r\n    this.viewContainerRef.clear();\r\n    this.innerElement = null;\r\n  }\r\n\r\n  private _animateOpen() {\r\n    let delta = this.animateSpeed;\r\n    let ease = this.animateAcceleration;\r\n    let maxHeight = 0;\r\n\r\n    // set height to 0\r\n    this.renderer.setStyle(this.innerElement, 'max-height', `0`);\r\n\r\n    // increase maxHeight until height doesn't change\r\n    setTimeout(() => { // Allow inner element to create its content\r\n      const i = setInterval(() => {\r\n        if (!this._isOpen || !this.innerElement) return clearInterval(i);\r\n\r\n        maxHeight += delta;\r\n        const roundedMaxHeight = Math.round(maxHeight);\r\n\r\n        this.renderer.setStyle(this.innerElement, 'max-height', `${roundedMaxHeight}px`);\r\n        const height = this.innerElement.getBoundingClientRect ? this.innerElement.getBoundingClientRect().height : 0; // TBD use renderer\r\n\r\n        delta *= ease;\r\n        ease *= EASE_ACCELERATION;\r\n        if (height < roundedMaxHeight) {\r\n          // Make maxHeight auto because animation finished and container might change height later on\r\n          this.renderer.setStyle(this.innerElement, 'max-height', null);\r\n          clearInterval(i);\r\n        }\r\n      }, 17);\r\n    });\r\n  }\r\n\r\n  private _animateClose() {\r\n    if (!this.innerElement) return;\r\n\r\n    let delta = this.animateSpeed;\r\n    let ease = this.animateAcceleration;\r\n    let height = this.innerElement.getBoundingClientRect().height; // TBD use renderer\r\n\r\n    // slowly decrease maxHeight to 0, starting from current height\r\n    const i = setInterval(() => {\r\n      if (this._isOpen || !this.innerElement) return clearInterval(i);\r\n\r\n      height -= delta;\r\n      this.renderer.setStyle(this.innerElement, 'max-height', `${height}px`);\r\n      delta *= ease;\r\n      ease *= EASE_ACCELERATION;\r\n\r\n      if (height <= 0) {\r\n        // after animation complete - remove child element\r\n        this.viewContainerRef.clear();\r\n        this.innerElement = null;\r\n        clearInterval(i);\r\n      }\r\n    }, 17);\r\n  }\r\n}\r\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { TreeMobxAutorunDirective } from './mobx-angular/tree-mobx-autorun.directive';\r\n\r\nimport {\r\n  IActionHandler,\r\n  IActionMapping,\r\n  TREE_ACTIONS\r\n} from './models/tree-options.model';\r\nimport {\r\n  IAllowDragFn,\r\n  IAllowDropFn,\r\n  ITreeOptions,\r\n  ITreeState\r\n} from './defs/api';\r\nimport { KEYS } from './constants/keys';\r\nimport { TreeModel } from './models/tree.model';\r\nimport { TreeNode } from './models/tree-node.model';\r\nimport { TreeDraggedElement } from './models/tree-dragged-element.model';\r\nimport { TreeVirtualScroll } from './models/tree-virtual-scroll.model';\r\nimport { LoadingComponent } from './components/loading.component';\r\nimport { TreeComponent } from './components/tree.component';\r\nimport { TreeNodeComponent } from './components/tree-node.component';\r\nimport { TreeNodeContent } from './components/tree-node-content.component';\r\nimport { TreeNodeDropSlot } from './components/tree-node-drop-slot.component';\r\nimport { TreeNodeExpanderComponent } from './components/tree-node-expander.component';\r\nimport { TreeNodeChildrenComponent } from './components/tree-node-children.component';\r\nimport { TreeNodeCollectionComponent } from './components/tree-node-collection.component';\r\nimport { TreeNodeWrapperComponent } from './components/tree-node-wrapper.component';\r\nimport { TreeViewportComponent } from './components/tree-viewport.component';\r\nimport { TreeNodeCheckboxComponent } from './components/tree-node-checkbox.component';\r\nimport { TreeDropDirective } from './directives/tree-drop.directive';\r\nimport { TreeDragDirective } from './directives/tree-drag.directive';\r\nimport { TreeAnimateOpenDirective } from './directives/tree-animate-open.directive';\r\n\r\n@NgModule({\r\n  declarations: [\r\n    TreeComponent,\r\n    TreeNodeComponent,\r\n    TreeNodeContent,\r\n    LoadingComponent,\r\n    TreeDropDirective,\r\n    TreeDragDirective,\r\n    TreeNodeExpanderComponent,\r\n    TreeNodeChildrenComponent,\r\n    TreeNodeDropSlot,\r\n    TreeNodeCollectionComponent,\r\n    TreeViewportComponent,\r\n    TreeNodeWrapperComponent,\r\n    TreeNodeCheckboxComponent,\r\n    TreeAnimateOpenDirective,\r\n    TreeMobxAutorunDirective\r\n  ],\r\n  exports: [\r\n    TreeComponent,\r\n    TreeNodeComponent,\r\n    TreeNodeContent,\r\n    LoadingComponent,\r\n    TreeDropDirective,\r\n    TreeDragDirective,\r\n    TreeNodeExpanderComponent,\r\n    TreeNodeChildrenComponent,\r\n    TreeNodeDropSlot,\r\n    TreeNodeCollectionComponent,\r\n    TreeViewportComponent,\r\n    TreeNodeWrapperComponent,\r\n    TreeNodeCheckboxComponent,\r\n    TreeAnimateOpenDirective,\r\n    TreeMobxAutorunDirective\r\n  ],\r\n  imports: [CommonModule],\r\n  providers: []\r\n})\r\nexport class TreeModule {}\r\n\r\nexport {\r\n  TreeModel,\r\n  TreeNode,\r\n  TreeDraggedElement,\r\n  TreeVirtualScroll,\r\n  ITreeOptions,\r\n  TREE_ACTIONS,\r\n  KEYS,\r\n  IActionMapping,\r\n  IActionHandler,\r\n  IAllowDropFn,\r\n  IAllowDragFn,\r\n  LoadingComponent,\r\n  TreeAnimateOpenDirective,\r\n  TreeComponent,\r\n  TreeNodeComponent,\r\n  TreeNodeWrapperComponent,\r\n  TreeNodeContent,\r\n  TreeDropDirective,\r\n  TreeDragDirective,\r\n  TreeNodeExpanderComponent,\r\n  TreeNodeChildrenComponent,\r\n  TreeNodeDropSlot,\r\n  TreeNodeCollectionComponent,\r\n  TreeViewportComponent,\r\n  TreeNodeCheckboxComponent,\r\n  ITreeState\r\n};\r\n"]}